/*! For license information please see main.ed67b132.js.LICENSE.txt */
(()=>{var e={9091:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Composite:()=>Be,CompositeItem:()=>Ve,FloatingArrow:()=>ze,FloatingDelayGroup:()=>lt,FloatingFocusManager:()=>Vt,FloatingList:()=>Pe,FloatingNode:()=>$e,FloatingOverlay:()=>Ht,FloatingPortal:()=>It,FloatingTree:()=>Je,arrow:()=>ae,autoPlacement:()=>re,autoUpdate:()=>Y.ll,computePosition:()=>Y.rD,detectOverflow:()=>Y.__,flip:()=>ne,getOverflowAncestors:()=>s.v9,hide:()=>se,inline:()=>oe,inner:()=>Cn,limitShift:()=>te,offset:()=>J,platform:()=>Y.iD,safePolygon:()=>Sn,shift:()=>ee,size:()=>ie,useClick:()=>Ut,useClientPoint:()=>Yt,useDelayGroup:()=>ct,useDelayGroupContext:()=>at,useDismiss:()=>Qt,useFloating:()=>$t,useFloatingNodeId:()=>Ze,useFloatingParentNodeId:()=>Xe,useFloatingPortalNode:()=>Pt,useFloatingRootContext:()=>Zt,useFloatingTree:()=>Qe,useFocus:()=>Jt,useHover:()=>rt,useId:()=>Ue,useInnerOffset:()=>wn,useInteractions:()=>rn,useListItem:()=>Ie,useListNavigation:()=>un,useMergeRefs:()=>le,useRole:()=>hn,useTransitionStatus:()=>fn,useTransitionStyles:()=>mn,useTypeahead:()=>vn});var i=n(4628),r=n.t(i,2),s=n(7339);function o(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement);){var n;t=t.shadowRoot.activeElement}return t}function a(e,t){if(!e||!t)return!1;const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&(0,s.Ng)(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function l(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function c(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:n}=e;return t+"/"+n})).join(" "):navigator.userAgent}function u(e){return!(0!==e.mozInputSource||!e.isTrusted)||(p()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function d(e){return!c().includes("jsdom/")&&(!p()&&0===e.width&&0===e.height||p()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}function h(){return/apple/i.test(navigator.vendor)}function p(){const e=/android/i;return e.test(l())||e.test(c())}function g(){return l().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function f(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function m(e){return(null==e?void 0:e.ownerDocument)||document}function v(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}function y(e){return"composedPath"in e?e.composedPath()[0]:e.target}const C="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function w(e){return(0,s.sb)(e)&&e.matches(C)}function b(e){e.preventDefault(),e.stopPropagation()}function S(e){return!!e&&("combobox"===e.getAttribute("role")&&w(e))}var E=n(1881),x=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],A=x.join(","),T="undefined"===typeof Element,_=T?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,R=!T&&Element.prototype.getRootNode?function(e){var t;return null===e||void 0===e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null===e||void 0===e?void 0:e.ownerDocument},D=function e(t,n){var i;void 0===n&&(n=!0);var r=null===t||void 0===t||null===(i=t.getAttribute)||void 0===i?void 0:i.call(t,"inert");return""===r||"true"===r||n&&t&&e(t.parentNode)},M=function(e,t,n){if(D(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(A));return t&&_.call(e,A)&&i.unshift(e),i=i.filter(n)},P=function e(t,n,i){for(var r=[],s=Array.from(t);s.length;){var o=s.shift();if(!D(o,!1))if("SLOT"===o.tagName){var a=o.assignedElements(),l=e(a.length?a:o.children,!0,i);i.flatten?r.push.apply(r,l):r.push({scopeParent:o,candidates:l})}else{_.call(o,A)&&i.filter(o)&&(n||!t.includes(o))&&r.push(o);var c=o.shadowRoot||"function"===typeof i.getShadowRoot&&i.getShadowRoot(o),u=!D(c,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(o));if(c&&u){var d=e(!0===c?o.children:c.children,!0,i);i.flatten?r.push.apply(r,d):r.push({scopeParent:o,candidates:d})}else s.unshift.apply(s,o.children)}}return r},I=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},N=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,n=null===e||void 0===e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n}(e))&&!I(e)?0:e.tabIndex},k=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},O=function(e){return"INPUT"===e.tagName},L=function(e){return function(e){return O(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||R(e),i=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)t=i(window.CSS.escape(e.name));else try{t=i(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var r=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!r||r===e}(e)},F=function(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return 0===n&&0===i},B=function(e,t){var n=t.displayCheck,i=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var r=_.call(e,"details>summary:first-of-type")?e.parentElement:e;if(_.call(r,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return F(e)}else{if("function"===typeof i){for(var s=e;e;){var o=e.parentElement,a=R(e);if(o&&!o.shadowRoot&&!0===i(o))return F(e);e=e.assignedSlot?e.assignedSlot:o||a===e.ownerDocument?o:a.host}e=s}if(function(e){var t,n,i,r,s=e&&R(e),o=null===(t=s)||void 0===t?void 0:t.host,a=!1;if(s&&s!==e)for(a=!!(null!==(n=o)&&void 0!==n&&null!==(i=n.ownerDocument)&&void 0!==i&&i.contains(o)||null!==e&&void 0!==e&&null!==(r=e.ownerDocument)&&void 0!==r&&r.contains(e));!a&&o;){var l,c,u;a=!(null===(c=o=null===(l=s=R(o))||void 0===l?void 0:l.host)||void 0===c||null===(u=c.ownerDocument)||void 0===u||!u.contains(o))}return a}(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},V=function(e,t){return!(t.disabled||D(t)||function(e){return O(e)&&"hidden"===e.type}(t)||B(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var i=t.children.item(n);if("LEGEND"===i.tagName)return!!_.call(t,"fieldset[disabled] *")||!i.contains(e)}return!0}t=t.parentElement}return!1}(t))},G=function(e,t){return!(L(t)||N(t)<0||!V(e,t))},H=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},W=function e(t){var n=[],i=[];return t.forEach((function(t,r){var s=!!t.scopeParent,o=s?t.scopeParent:t,a=function(e,t){var n=N(e);return n<0&&t&&!I(e)?0:n}(o,s),l=s?e(t.candidates):o;0===a?s?n.push.apply(n,l):n.push(o):i.push({documentOrder:r,tabIndex:a,item:t,isScope:s,content:l})})),i.sort(k).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},j=function(e,t){var n;return n=(t=t||{}).getShadowRoot?P([e],t.includeContainer,{filter:G.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:H}):M(e,t.includeContainer,G.bind(null,t)),W(n)},U=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==_.call(e,A)&&G(t,e)},z=n(4473),Y=n(3133),q="undefined"!==typeof document?i.useLayoutEffect:i.useEffect;function K(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,i,r;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;0!==i--;)if(!K(e[i],t[i]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(i=n;0!==i--;)if(!{}.hasOwnProperty.call(t,r[i]))return!1;for(i=n;0!==i--;){const n=r[i];if(("_owner"!==n||!e.$$typeof)&&!K(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function X(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Q(e,t){const n=X(e);return Math.round(t*n)/n}function Z(e){const t=i.useRef(e);return q((()=>{t.current=e})),t}const $=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:i}="function"===typeof e?e(t):e;return n&&(r=n,{}.hasOwnProperty.call(r,"current"))?null!=n.current?(0,Y.UE)({element:n.current,padding:i}).fn(t):{}:n?(0,Y.UE)({element:n,padding:i}).fn(t):{};var r}}),J=(e,t)=>({...(0,Y.cY)(e),options:[e,t]}),ee=(e,t)=>({...(0,Y.BN)(e),options:[e,t]}),te=(e,t)=>({...(0,Y.ER)(e),options:[e,t]}),ne=(e,t)=>({...(0,Y.UU)(e),options:[e,t]}),ie=(e,t)=>({...(0,Y.Ej)(e),options:[e,t]}),re=(e,t)=>({...(0,Y.RK)(e),options:[e,t]}),se=(e,t)=>({...(0,Y.jD)(e),options:[e,t]}),oe=(e,t)=>({...(0,Y.mG)(e),options:[e,t]}),ae=(e,t)=>({...$(e),options:[e,t]});function le(e){return i.useMemo((()=>e.every((e=>null==e))?null:t=>{e.forEach((e=>{"function"===typeof e?e(t):null!=e&&(e.current=t)}))}),e)}const ce={...r},ue=ce.useInsertionEffect||(e=>e());function de(e){const t=i.useRef((()=>{0}));return ue((()=>{t.current=e})),i.useCallback((function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return null==t.current?void 0:t.current(...n)}),[])}const he="ArrowUp",pe="ArrowDown",ge="ArrowLeft",fe="ArrowRight";function me(e,t,n){return Math.floor(e/t)!==n}function ve(e,t){return t<0||t>=e.current.length}function ye(e,t){return we(e,{disabledIndices:t})}function Ce(e,t){return we(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function we(e,t){let{startingIndex:n=-1,decrement:i=!1,disabledIndices:r,amount:s=1}=void 0===t?{}:t;const o=e.current;let a=n;do{a+=i?-s:s}while(a>=0&&a<=o.length-1&&Ae(o,a,r));return a}function be(e,t){let{event:n,orientation:i,loop:r,cols:s,disabledIndices:o,minIndex:a,maxIndex:l,prevIndex:c,stopEvent:u=!1}=t,d=c;if(n.key===he){if(u&&b(n),-1===c)d=l;else if(d=we(e,{startingIndex:d,amount:s,decrement:!0,disabledIndices:o}),r&&(c-s<a||d<0)){const e=c%s,t=l%s,n=l-(t-e);d=t===e?l:t>e?n:n-s}ve(e,d)&&(d=c)}if(n.key===pe&&(u&&b(n),-1===c?d=a:(d=we(e,{startingIndex:c,amount:s,disabledIndices:o}),r&&c+s>l&&(d=we(e,{startingIndex:c%s-s,amount:s,disabledIndices:o}))),ve(e,d)&&(d=c)),"both"===i){const t=(0,E.RI)(c/s);n.key===fe&&(u&&b(n),c%s!==s-1?(d=we(e,{startingIndex:c,disabledIndices:o}),r&&me(d,s,t)&&(d=we(e,{startingIndex:c-c%s-1,disabledIndices:o}))):r&&(d=we(e,{startingIndex:c-c%s-1,disabledIndices:o})),me(d,s,t)&&(d=c)),n.key===ge&&(u&&b(n),c%s!==0?(d=we(e,{startingIndex:c,decrement:!0,disabledIndices:o}),r&&me(d,s,t)&&(d=we(e,{startingIndex:c+(s-c%s),decrement:!0,disabledIndices:o}))):r&&(d=we(e,{startingIndex:c+(s-c%s),decrement:!0,disabledIndices:o})),me(d,s,t)&&(d=c));const i=(0,E.RI)(l/s)===t;ve(e,d)&&(d=r&&i?n.key===ge?l:we(e,{startingIndex:c-c%s-1,disabledIndices:o}):c)}return d}function Se(e,t,n){const i=[];let r=0;return e.forEach(((e,s)=>{let{width:o,height:a}=e,l=!1;for(n&&(r=0);!l;){const e=[];for(let n=0;n<o;n++)for(let i=0;i<a;i++)e.push(r+n+i*t);r%t+o<=t&&e.every((e=>null==i[e]))?(e.forEach((e=>{i[e]=s})),l=!0):r++}})),[...i]}function Ee(e,t,n,i,r){if(-1===e)return-1;const s=n.indexOf(e),o=t[e];switch(r){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*i:s;case"br":return n.lastIndexOf(e)}}function xe(e,t){return t.flatMap(((t,n)=>e.includes(t)?[n]:[]))}function Ae(e,t,n){if(n)return n.includes(t);const i=e[t];return null==i||i.hasAttribute("disabled")||"true"===i.getAttribute("aria-disabled")}let Te=0;function _e(e,t){void 0===t&&(t={});const{preventScroll:n=!1,cancelPrevious:i=!0,sync:r=!1}=t;i&&cancelAnimationFrame(Te);const s=()=>null==e?void 0:e.focus({preventScroll:n});r?s():Te=requestAnimationFrame(s)}var Re="undefined"!==typeof document?i.useLayoutEffect:i.useEffect;function De(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const Me=i.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function Pe(e){const{children:t,elementsRef:n,labelsRef:r}=e,[s,o]=i.useState((()=>new Map)),a=i.useCallback((e=>{o((t=>new Map(t).set(e,null)))}),[]),l=i.useCallback((e=>{o((t=>{const n=new Map(t);return n.delete(e),n}))}),[]);return Re((()=>{const e=new Map(s);Array.from(e.keys()).sort(De).forEach(((t,n)=>{e.set(t,n)})),function(e,t){if(e.size!==t.size)return!1;for(const[n,i]of e.entries())if(i!==t.get(n))return!1;return!0}(s,e)||o(e)}),[s]),i.createElement(Me.Provider,{value:i.useMemo((()=>({register:a,unregister:l,map:s,elementsRef:n,labelsRef:r})),[a,l,s,n,r])},t)}function Ie(e){void 0===e&&(e={});const{label:t}=e,{register:n,unregister:r,map:s,elementsRef:o,labelsRef:a}=i.useContext(Me),[l,c]=i.useState(null),u=i.useRef(null),d=i.useCallback((e=>{if(u.current=e,null!==l&&(o.current[l]=e,a)){var n;const i=void 0!==t;a.current[l]=i?t:null!=(n=null==e?void 0:e.textContent)?n:null}}),[l,o,a,t]);return Re((()=>{const e=u.current;if(e)return n(e),()=>{r(e)}}),[n,r]),Re((()=>{const e=u.current?s.get(u.current):null;null!=e&&c(e)}),[s]),i.useMemo((()=>({ref:d,index:null==l?-1:l})),[l,d])}function Ne(e,t){return"function"===typeof e?e(t):e?i.cloneElement(e,t):i.createElement("div",t)}const ke=i.createContext({activeIndex:0,onNavigate:()=>{}}),Oe=[ge,fe],Le=[he,pe],Fe=[...Oe,...Le],Be=i.forwardRef((function(e,t){const{render:n,orientation:r="both",loop:s=!0,cols:o=1,disabledIndices:a,activeIndex:l,onNavigate:c,itemSizes:u,dense:d=!1,...h}=e,[p,g]=i.useState(0),f=null!=l?l:p,m=de(null!=c?c:g),v=i.useRef([]),y=n&&"function"!==typeof n?n.props:{},C=i.useMemo((()=>({activeIndex:f,onNavigate:m})),[f,m]),w=o>1;const b={...h,...y,ref:t,"aria-orientation":"both"===r?void 0:r,onKeyDown(e){null==h.onKeyDown||h.onKeyDown(e),null==y.onKeyDown||y.onKeyDown(e),function(e){if(!Fe.includes(e.key))return;let t=f;const n=ye(v,a),i=Ce(v,a);if(w){const l=u||Array.from({length:v.current.length},(()=>({width:1,height:1}))),c=Se(l,o,d),h=c.findIndex((e=>null!=e&&!Ae(v.current,e,a))),p=c.reduce(((e,t,n)=>null==t||Ae(v.current,t,a)?e:n),-1);t=c[be({current:c.map((e=>e?v.current[e]:null))},{event:e,orientation:r,loop:s,cols:o,disabledIndices:xe([...a||v.current.map(((e,t)=>Ae(v.current,t)?t:void 0)),void 0],c),minIndex:h,maxIndex:p,prevIndex:Ee(f>i?n:f,l,c,o,e.key===pe?"bl":e.key===fe?"tr":"tl")})]}const l={horizontal:[fe],vertical:[pe],both:[fe,pe]}[r],c={horizontal:[ge],vertical:[he],both:[ge,he]}[r],h=w?Fe:{horizontal:Oe,vertical:Le,both:Fe}[r];t===f&&[...l,...c].includes(e.key)&&(t=s&&t===i&&l.includes(e.key)?n:s&&t===n&&c.includes(e.key)?i:we(v,{startingIndex:t,decrement:c.includes(e.key),disabledIndices:a})),t===f||ve(v,t)||(e.stopPropagation(),h.includes(e.key)&&e.preventDefault(),m(t),queueMicrotask((()=>{_e(v.current[t])})))}(e)}};return i.createElement(ke.Provider,{value:C},i.createElement(Pe,{elementsRef:v},Ne(n,b)))})),Ve=i.forwardRef((function(e,t){const{render:n,...r}=e,s=n&&"function"!==typeof n?n.props:{},{activeIndex:o,onNavigate:a}=i.useContext(ke),{ref:l,index:c}=Ie(),u=le([l,t,s.ref]),d=o===c;return Ne(n,{...r,...s,ref:u,tabIndex:d?0:-1,"data-active":d?"":void 0,onFocus(e){null==r.onFocus||r.onFocus(e),null==s.onFocus||s.onFocus(e),a(c)}})}));function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ge.apply(this,arguments)}let He=!1,We=0;const je=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+We++;const Ue=ce.useId||function(){const[e,t]=i.useState((()=>He?je():void 0));return Re((()=>{null==e&&t(je())}),[]),i.useEffect((()=>{He=!0}),[]),e};const ze=i.forwardRef((function(e,t){const{context:{placement:n,elements:{floating:r},middlewareData:{arrow:o}},width:a=14,height:l=7,tipRadius:c=0,strokeWidth:u=0,staticOffset:d,stroke:h,d:p,style:{transform:g,...f}={},...m}=e;const v=Ue(),[y,C]=i.useState(!1);if(Re((()=>{if(!r)return;"rtl"===(0,s.L9)(r).direction&&C(!0)}),[r]),!r)return null;const w=2*u,b=w/2,S=a/2*(c/-8+1),E=l/2*c/4,[x,A]=n.split("-"),T=!!p,_="top"===x||"bottom"===x,R=d&&"end"===A?"bottom":"top";let D=d&&"end"===A?"right":"left";d&&y&&(D="end"===A?"left":"right");const M=null!=(null==o?void 0:o.x)?d||o.x:"",P=null!=(null==o?void 0:o.y)?d||o.y:"",I=p||"M0,0 H"+a+" L"+(a-S)+","+(l-E)+" Q"+a/2+","+l+" "+S+","+(l-E)+" Z",N={top:T?"rotate(180deg)":"",left:T?"rotate(90deg)":"rotate(-90deg)",bottom:T?"":"rotate(180deg)",right:T?"rotate(-90deg)":"rotate(90deg)"}[x];return i.createElement("svg",Ge({},m,{"aria-hidden":!0,ref:t,width:T?a:a+w,height:a,viewBox:"0 0 "+a+" "+(l>a?l:a),style:{position:"absolute",pointerEvents:"none",[D]:M,[R]:P,[x]:_||T?"100%":"calc(100% - "+w/2+"px)",transform:""+N+(null!=g?g:""),...f}}),w>0&&i.createElement("path",{clipPath:"url(#"+v+")",fill:"none",stroke:h,strokeWidth:w+(p?0:1),d:I}),i.createElement("path",{stroke:w&&!p?m.fill:"none",d:I}),i.createElement("clipPath",{id:v},i.createElement("rect",{x:-b,y:b*(T?-1:1),width:a+w,height:a})))}));function Ye(){const e=new Map;return{emit(t,n){var i;null==(i=e.get(t))||i.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var i;e.set(t,(null==(i=e.get(t))?void 0:i.filter((e=>e!==n)))||[])}}}const qe=i.createContext(null),Ke=i.createContext(null),Xe=()=>{var e;return(null==(e=i.useContext(qe))?void 0:e.id)||null},Qe=()=>i.useContext(Ke);function Ze(e){const t=Ue(),n=Qe(),i=Xe(),r=e||i;return Re((()=>{const e={id:t,parentId:r};return null==n||n.addNode(e),()=>{null==n||n.removeNode(e)}}),[n,t,r]),t}function $e(e){const{children:t,id:n}=e,r=Xe();return i.createElement(qe.Provider,{value:i.useMemo((()=>({id:n,parentId:r})),[n,r])},t)}function Je(e){const{children:t}=e,n=i.useRef([]),r=i.useCallback((e=>{n.current=[...n.current,e]}),[]),s=i.useCallback((e=>{n.current=n.current.filter((t=>t!==e))}),[]),o=i.useState((()=>Ye()))[0];return i.createElement(Ke.Provider,{value:i.useMemo((()=>({nodesRef:n,addNode:r,removeNode:s,events:o})),[r,s,o])},t)}function et(e){return"data-floating-ui-"+e}function tt(e){const t=(0,i.useRef)(e);return Re((()=>{t.current=e})),t}const nt=et("safe-polygon");function it(e,t,n){return n&&!f(n)?0:"number"===typeof e?e:null==e?void 0:e[t]}function rt(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,dataRef:o,events:l,elements:c}=e,{enabled:u=!0,delay:d=0,handleClose:h=null,mouseOnly:p=!1,restMs:g=0,move:v=!0}=t,y=Qe(),C=Xe(),w=tt(h),b=tt(d),S=tt(n),E=i.useRef(),x=i.useRef(-1),A=i.useRef(),T=i.useRef(-1),_=i.useRef(!0),R=i.useRef(!1),D=i.useRef((()=>{})),M=i.useCallback((()=>{var e;const t=null==(e=o.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t}),[o]);i.useEffect((()=>{if(u)return l.on("openchange",e),()=>{l.off("openchange",e)};function e(e){let{open:t}=e;t||(clearTimeout(x.current),clearTimeout(T.current),_.current=!0)}}),[u,l]),i.useEffect((()=>{if(!u)return;if(!w.current)return;if(!n)return;function e(e){M()&&r(!1,e,"hover")}const t=m(c.floating).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}}),[c.floating,n,r,u,w,M]);const P=i.useCallback((function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="hover");const i=it(b.current,"close",E.current);i&&!A.current?(clearTimeout(x.current),x.current=window.setTimeout((()=>r(!1,e,n)),i)):t&&(clearTimeout(x.current),r(!1,e,n))}),[b,r]),I=de((()=>{D.current(),A.current=void 0})),N=de((()=>{if(R.current){const e=m(c.floating).body;e.style.pointerEvents="",e.removeAttribute(nt),R.current=!1}}));i.useEffect((()=>{if(u&&(0,s.vq)(c.domReference)){var e;const t=c.domReference;return n&&t.addEventListener("mouseleave",d),null==(e=c.floating)||e.addEventListener("mouseleave",d),v&&t.addEventListener("mousemove",i,{once:!0}),t.addEventListener("mouseenter",i),t.addEventListener("mouseleave",l),()=>{var e;n&&t.removeEventListener("mouseleave",d),null==(e=c.floating)||e.removeEventListener("mouseleave",d),v&&t.removeEventListener("mousemove",i),t.removeEventListener("mouseenter",i),t.removeEventListener("mouseleave",l)}}function t(){return!!o.current.openEvent&&["click","mousedown"].includes(o.current.openEvent.type)}function i(e){if(clearTimeout(x.current),_.current=!1,p&&!f(E.current)||g>0&&!it(b.current,"open"))return;const t=it(b.current,"open",E.current);t?x.current=window.setTimeout((()=>{S.current||r(!0,e,"hover")}),t):r(!0,e,"hover")}function l(e){if(t())return;D.current();const i=m(c.floating);if(clearTimeout(T.current),w.current&&o.current.floatingContext){n||clearTimeout(x.current),A.current=w.current({...o.current.floatingContext,tree:y,x:e.clientX,y:e.clientY,onClose(){N(),I(),P(e,!0,"safe-polygon")}});const t=A.current;return i.addEventListener("mousemove",t),void(D.current=()=>{i.removeEventListener("mousemove",t)})}("touch"!==E.current||!a(c.floating,e.relatedTarget))&&P(e)}function d(e){t()||o.current.floatingContext&&(null==w.current||w.current({...o.current.floatingContext,tree:y,x:e.clientX,y:e.clientY,onClose(){N(),I(),P(e)}})(e))}}),[c,u,e,p,g,v,P,I,N,r,n,S,y,b,w,o]),Re((()=>{var e;if(u&&n&&null!=(e=w.current)&&e.__options.blockPointerEvents&&M()){const e=m(c.floating).body;e.setAttribute(nt,""),e.style.pointerEvents="none",R.current=!0;const n=c.floating;if((0,s.vq)(c.domReference)&&n){var t;const e=c.domReference,i=null==y||null==(t=y.nodesRef.current.find((e=>e.id===C)))||null==(t=t.context)?void 0:t.elements.floating;return i&&(i.style.pointerEvents=""),e.style.pointerEvents="auto",n.style.pointerEvents="auto",()=>{e.style.pointerEvents="",n.style.pointerEvents=""}}}}),[u,n,C,c,y,w,M]),Re((()=>{n||(E.current=void 0,I(),N())}),[n,I,N]),i.useEffect((()=>()=>{I(),clearTimeout(x.current),clearTimeout(T.current),N()}),[u,c.domReference,I,N]);const k=i.useMemo((()=>{function e(e){E.current=e.pointerType}return{onPointerDown:e,onPointerEnter:e,onMouseMove(e){const{nativeEvent:t}=e;function i(){_.current||S.current||r(!0,t,"hover")}p&&!f(E.current)||n||0===g||(clearTimeout(T.current),"touch"===E.current?i():T.current=window.setTimeout(i,g))}}}),[p,r,n,S,g]),O=i.useMemo((()=>({onMouseEnter(){clearTimeout(x.current)},onMouseLeave(e){P(e.nativeEvent,!1)}})),[P]);return i.useMemo((()=>u?{reference:k,floating:O}:{}),[u,k,O])}const st=()=>{},ot=i.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:st,setState:st,isInstantPhase:!1}),at=()=>i.useContext(ot);function lt(e){const{children:t,delay:n,timeoutMs:r=0}=e,[s,o]=i.useReducer(((e,t)=>({...e,...t})),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),a=i.useRef(null),l=i.useCallback((e=>{o({currentId:e})}),[]);return Re((()=>{s.currentId?null===a.current?a.current=s.currentId:s.isInstantPhase||o({isInstantPhase:!0}):(s.isInstantPhase&&o({isInstantPhase:!1}),a.current=null)}),[s.currentId,s.isInstantPhase]),i.createElement(ot.Provider,{value:i.useMemo((()=>({...s,setState:o,setCurrentId:l})),[s,l])},t)}function ct(e,t){void 0===t&&(t={});const{open:n,onOpenChange:i,floatingId:r}=e,{id:s}=t,o=null!=s?s:r,a=at(),{currentId:l,setCurrentId:c,initialDelay:u,setState:d,timeoutMs:h}=a;return Re((()=>{l&&(d({delay:{open:1,close:it(u,"close")}}),l!==o&&i(!1))}),[o,i,d,l,u]),Re((()=>{function e(){i(!1),d({delay:u,currentId:null})}if(l&&!n&&l===o){if(h){const t=window.setTimeout(e,h);return()=>{clearTimeout(t)}}e()}}),[n,d,l,o,i,u,h]),Re((()=>{c!==st&&n&&c(o)}),[n,c,o]),a}function ut(e,t){let n=e.filter((e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)})),i=n;for(;i.length;)i=e.filter((e=>{var t;return null==(t=i)?void 0:t.some((t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)}))})),n=n.concat(i);return n}let dt=new WeakMap,ht=new WeakSet,pt={},gt=0;const ft=()=>"undefined"!==typeof HTMLElement&&"inert"in HTMLElement.prototype,mt=e=>e&&(e.host||mt(e.parentNode)),vt=(e,t)=>t.map((t=>{if(e.contains(t))return t;const n=mt(t);return e.contains(n)?n:null})).filter((e=>null!=e));function yt(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=m(e[0]).body;return function(e,t,n,i){const r="data-floating-ui-inert",o=i?"inert":n?"aria-hidden":null,a=vt(t,e),l=new Set,c=new Set(a),u=[];pt[r]||(pt[r]=new WeakMap);const d=pt[r];return a.forEach((function e(t){t&&!l.has(t)&&(l.add(t),t.parentNode&&e(t.parentNode))})),function e(t){t&&!c.has(t)&&[].forEach.call(t.children,(t=>{if("script"!==(0,s.mq)(t))if(l.has(t))e(t);else{const e=o?t.getAttribute(o):null,n=null!==e&&"false"!==e,i=(dt.get(t)||0)+1,s=(d.get(t)||0)+1;dt.set(t,i),d.set(t,s),u.push(t),1===i&&n&&ht.add(t),1===s&&t.setAttribute(r,""),!n&&o&&t.setAttribute(o,"true")}}))}(t),l.clear(),gt++,()=>{u.forEach((e=>{const t=(dt.get(e)||0)-1,n=(d.get(e)||0)-1;dt.set(e,t),d.set(e,n),t||(!ht.has(e)&&o&&e.removeAttribute(o),ht.delete(e)),n||e.removeAttribute(r)})),gt--,gt||(dt=new WeakMap,dt=new WeakMap,ht=new WeakSet,pt={})}}(e.concat(Array.from(i.querySelectorAll("[aria-live]"))),i,t,n)}const Ct=()=>({getShadowRoot:!0,displayCheck:"function"===typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function wt(e,t){const n=j(e,Ct());"prev"===t&&n.reverse();const i=n.indexOf(o(m(e)));return n.slice(i+1)[0]}function bt(){return wt(document.body,"next")}function St(){return wt(document.body,"prev")}function Et(e,t){const n=t||e.currentTarget,i=e.relatedTarget;return!i||!a(n,i)}function xt(e){j(e,Ct()).forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}))}function At(e){e.querySelectorAll("[data-tabindex]").forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}const Tt={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function _t(e){"Tab"===e.key&&(e.target,clearTimeout(undefined))}const Rt=i.forwardRef((function(e,t){const[n,r]=i.useState();Re((()=>(h()&&r("button"),document.addEventListener("keydown",_t),()=>{document.removeEventListener("keydown",_t)})),[]);const s={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[et("focus-guard")]:"",style:Tt};return i.createElement("span",Ge({},e,s))})),Dt=i.createContext(null),Mt=et("portal");function Pt(e){void 0===e&&(e={});const{id:t,root:n}=e,r=Ue(),o=Nt(),[a,l]=i.useState(null),c=i.useRef(null);return Re((()=>()=>{null==a||a.remove(),queueMicrotask((()=>{c.current=null}))}),[a]),Re((()=>{if(!r)return;if(c.current)return;const e=t?document.getElementById(t):null;if(!e)return;const n=document.createElement("div");n.id=r,n.setAttribute(Mt,""),e.appendChild(n),c.current=n,l(n)}),[t,r]),Re((()=>{if(!r)return;if(c.current)return;let e=n||(null==o?void 0:o.portalNode);e&&!(0,s.vq)(e)&&(e=e.current),e=e||document.body;let i=null;t&&(i=document.createElement("div"),i.id=t,e.appendChild(i));const a=document.createElement("div");a.id=r,a.setAttribute(Mt,""),e=i||e,e.appendChild(a),c.current=a,l(a)}),[t,n,r,o]),a}function It(e){const{children:t,id:n,root:r=null,preserveTabOrder:s=!0}=e,o=Pt({id:n,root:r}),[a,l]=i.useState(null),c=i.useRef(null),u=i.useRef(null),d=i.useRef(null),h=i.useRef(null),p=!!a&&!a.modal&&a.open&&s&&!(!r&&!o);return i.useEffect((()=>{if(o&&s&&(null==a||!a.modal))return o.addEventListener("focusin",e,!0),o.addEventListener("focusout",e,!0),()=>{o.removeEventListener("focusin",e,!0),o.removeEventListener("focusout",e,!0)};function e(e){if(o&&Et(e)){("focusin"===e.type?At:xt)(o)}}}),[o,s,null==a?void 0:a.modal]),i.createElement(Dt.Provider,{value:i.useMemo((()=>({preserveTabOrder:s,beforeOutsideRef:c,afterOutsideRef:u,beforeInsideRef:d,afterInsideRef:h,portalNode:o,setFocusManagerState:l})),[s,o])},p&&o&&i.createElement(Rt,{"data-type":"outside",ref:c,onFocus:e=>{if(Et(e,o)){var t;null==(t=d.current)||t.focus()}else{const e=St()||(null==a?void 0:a.refs.domReference.current);null==e||e.focus()}}}),p&&o&&i.createElement("span",{"aria-owns":o.id,style:Tt}),o&&z.createPortal(t,o),p&&o&&i.createElement(Rt,{"data-type":"outside",ref:u,onFocus:e=>{if(Et(e,o)){var t;null==(t=h.current)||t.focus()}else{const t=bt()||(null==a?void 0:a.refs.domReference.current);null==t||t.focus(),(null==a?void 0:a.closeOnFocusOut)&&(null==a||a.onOpenChange(!1,e.nativeEvent))}}}))}const Nt=()=>i.useContext(Dt),kt=20;let Ot=[];function Lt(e){Ot=Ot.filter((e=>e.isConnected));let t=e;if(t&&"body"!==(0,s.mq)(t)){if(!U(t,Ct())){const e=j(t,Ct())[0];e&&(t=e)}Ot.push(t),Ot.length>kt&&(Ot=Ot.slice(-kt))}}function Ft(){return Ot.slice().reverse().find((e=>e.isConnected))}const Bt=i.forwardRef((function(e,t){return i.createElement("button",Ge({},e,{type:"button",ref:t,tabIndex:-1,style:Tt}))}));function Vt(e){const{context:t,children:n,disabled:r=!1,order:l=["content"],guards:c=!0,initialFocus:h=0,returnFocus:p=!0,restoreFocus:g=!1,modal:f=!0,visuallyHiddenDismiss:v=!1,closeOnFocusOut:C=!0}=e,{open:w,refs:E,nodeId:x,onOpenChange:A,events:T,dataRef:_,floatingId:R,elements:{domReference:D,floating:M}}=t,P="number"===typeof h&&h<0,I=S(D)&&P,N=!ft()||c,k=tt(l),O=tt(h),L=tt(p),F=Qe(),B=Nt(),V=i.useRef(null),G=i.useRef(null),H=i.useRef(!1),W=i.useRef(!1),U=i.useRef(-1),z=null!=B,Y=null==M?void 0:M.firstElementChild,q=(null==Y?void 0:Y.id)===R?Y:M,K=de((function(e){return void 0===e&&(e=q),e?j(e,Ct()):[]})),X=de((e=>{const t=K(e);return k.current.map((e=>D&&"reference"===e?D:q&&"floating"===e?q:t)).filter(Boolean).flat()}));function Q(e){return!r&&v&&f?i.createElement(Bt,{ref:"start"===e?V:G,onClick:e=>A(!1,e.nativeEvent)},"string"===typeof v?v:"Dismiss"):null}i.useEffect((()=>{if(r)return;if(!f)return;function e(e){if("Tab"===e.key){a(q,o(m(q)))&&0===K().length&&!I&&b(e);const t=X(),n=y(e);"reference"===k.current[0]&&n===D&&(b(e),e.shiftKey?_e(t[t.length-1]):_e(t[1])),"floating"===k.current[1]&&n===q&&e.shiftKey&&(b(e),_e(t[0]))}}const t=m(q);return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}}),[r,D,q,f,k,I,K,X]),i.useEffect((()=>{if(!r&&M)return M.addEventListener("focusin",e),()=>{M.removeEventListener("focusin",e)};function e(e){const t=y(e),n=K().indexOf(t);-1!==n&&(U.current=n)}}),[r,M,K]),i.useEffect((()=>{if(!r&&C)return M&&(0,s.sb)(D)?(D.addEventListener("focusout",t),D.addEventListener("pointerdown",e),M.addEventListener("focusout",t),()=>{D.removeEventListener("focusout",t),D.removeEventListener("pointerdown",e),M.removeEventListener("focusout",t)}):void 0;function e(){W.current=!0,setTimeout((()=>{W.current=!1}))}function t(e){const t=e.relatedTarget;queueMicrotask((()=>{const n=!(a(D,t)||a(M,t)||a(t,M)||a(null==B?void 0:B.portalNode,t)||null!=t&&t.hasAttribute(et("focus-guard"))||F&&(ut(F.nodesRef.current,x).find((e=>{var n,i;return a(null==(n=e.context)?void 0:n.elements.floating,t)||a(null==(i=e.context)?void 0:i.elements.domReference,t)}))||function(e,t){var n;let i=[],r=null==(n=e.find((e=>e.id===t)))?void 0:n.parentId;for(;r;){const t=e.find((e=>e.id===r));r=null==t?void 0:t.parentId,t&&(i=i.concat(t))}return i}(F.nodesRef.current,x).find((e=>{var n,i;return(null==(n=e.context)?void 0:n.elements.floating)===t||(null==(i=e.context)?void 0:i.elements.domReference)===t}))));if(g&&n&&o(m(q))===m(q).body){(0,s.sb)(q)&&(null==q||q.focus());const e=U.current,t=K(),n=t[e]||t[t.length-1]||q;(0,s.sb)(n)&&n.focus()}!I&&f||!t||!n||W.current||t===Ft()||(H.current=!0,A(!1,e))}))}}),[r,D,M,q,f,x,F,B,A,C,g,K,I]),i.useEffect((()=>{var e;if(r)return;const t=Array.from((null==B||null==(e=B.portalNode)?void 0:e.querySelectorAll("["+et("portal")+"]"))||[]);if(M){const e=[M,...t,V.current,G.current,k.current.includes("reference")||I?D:null].filter((e=>null!=e)),n=f||I?yt(e,N,!N):yt(e);return()=>{n()}}}),[r,D,M,f,k,B,I,N]),Re((()=>{if(r||!(0,s.sb)(q))return;const e=o(m(q));queueMicrotask((()=>{const t=X(q),n=O.current,i=("number"===typeof n?t[n]:n.current)||q,r=a(q,e);P||r||!w||_e(i,{preventScroll:i===q})}))}),[r,w,q,P,X,O]),Re((()=>{if(r||!q)return;let e=!1;const t=m(q),n=o(t);let i=_.current.openEvent;const l=E.domReference.current;function c(t){let{open:n,reason:r,event:s,nested:o}=t;n&&(i=s),"escape-key"===r&&E.domReference.current&&Lt(E.domReference.current),"hover"===r&&"mouseleave"===s.type&&(H.current=!0),"outside-press"===r&&(o?(H.current=!1,e=!0):H.current=!(u(s)||d(s)))}return Lt(n),T.on("openchange",c),()=>{T.off("openchange",c);const r=o(t),u=a(M,r)||F&&ut(F.nodesRef.current,x).some((e=>{var t;return a(null==(t=e.context)?void 0:t.elements.floating,r)}));(u||i&&["click","mousedown"].includes(i.type))&&E.domReference.current&&Lt(E.domReference.current);const d=l||n,h=j(m(d).body,Ct());queueMicrotask((()=>{let n=Ft();!n&&(0,s.sb)(d)&&M&&(n=function(e,t,n){const i=e.indexOf(t);function r(t){const r=et("focus-guard");let s=i+(t?1:0),o=e[s];for(;o&&(!o.isConnected||o.hasAttribute(r)||a(n,o));)t?s++:s--,o=e[s];return o}return r(!0)||r(!1)}(h,d,M)),L.current&&!H.current&&(0,s.sb)(n)&&(n===r||r===t.body||u)&&n.focus({preventScroll:e})}))}}),[r,M,q,L,_,E,T,F,x]),Re((()=>{if(!r&&B)return B.setFocusManagerState({modal:f,closeOnFocusOut:C,open:w,onOpenChange:A,refs:E}),()=>{B.setFocusManagerState(null)}}),[r,B,f,w,A,E,C]),Re((()=>{if(r)return;if(!q)return;if("function"!==typeof MutationObserver)return;if(P)return;const e=()=>{const e=q.getAttribute("tabindex"),t=K(),n=o(m(M)),i=t.indexOf(n);-1!==i&&(U.current=i),k.current.includes("floating")||n!==E.domReference.current&&0===t.length?"0"!==e&&q.setAttribute("tabindex","0"):"-1"!==e&&q.setAttribute("tabindex","-1")};e();const t=new MutationObserver(e);return t.observe(q,{childList:!0,subtree:!0,attributes:!0}),()=>{t.disconnect()}}),[r,M,q,E,k,K,P]);const Z=!r&&N&&(!f||!I)&&(z||f);return i.createElement(i.Fragment,null,Z&&i.createElement(Rt,{"data-type":"inside",ref:null==B?void 0:B.beforeInsideRef,onFocus:e=>{if(f){const e=X();_e("reference"===l[0]?e[0]:e[e.length-1])}else if(null!=B&&B.preserveTabOrder&&B.portalNode)if(H.current=!1,Et(e,B.portalNode)){const e=bt()||D;null==e||e.focus()}else{var t;null==(t=B.beforeOutsideRef.current)||t.focus()}}}),!I&&Q("start"),n,Q("end"),Z&&i.createElement(Rt,{"data-type":"inside",ref:null==B?void 0:B.afterInsideRef,onFocus:e=>{if(f)_e(X()[0]);else if(null!=B&&B.preserveTabOrder&&B.portalNode)if(C&&(H.current=!0),Et(e,B.portalNode)){const e=St()||D;null==e||e.focus()}else{var t;null==(t=B.afterOutsideRef.current)||t.focus()}}}))}const Gt=new Set,Ht=i.forwardRef((function(e,t){const{lockScroll:n=!1,...r}=e,s=Ue();return Re((()=>{if(!n)return;Gt.add(s);const e=/iP(hone|ad|od)|iOS/.test(l()),t=document.body.style,i=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",r=window.innerWidth-document.documentElement.clientWidth,o=t.left?parseFloat(t.left):window.scrollX,a=t.top?parseFloat(t.top):window.scrollY;if(t.overflow="hidden",r&&(t[i]=r+"px"),e){var c,u;const e=(null==(c=window.visualViewport)?void 0:c.offsetLeft)||0,n=(null==(u=window.visualViewport)?void 0:u.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(a-Math.floor(n))+"px",left:-(o-Math.floor(e))+"px",right:"0"})}return()=>{Gt.delete(s),0===Gt.size&&(Object.assign(t,{overflow:"",[i]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(o,a)))}}),[s,n]),i.createElement("div",Ge({ref:t},r,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...r.style}}))}));function Wt(e){return(0,s.sb)(e.target)&&"BUTTON"===e.target.tagName}function jt(e){return w(e)}function Ut(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,event:l="click",toggle:c=!0,ignoreMouse:u=!1,keyboardHandlers:d=!0}=t,h=i.useRef(),p=i.useRef(!1),g=i.useMemo((()=>({onPointerDown(e){h.current=e.pointerType},onMouseDown(e){const t=h.current;0===e.button&&"click"!==l&&(f(t,!0)&&u||(!n||!c||s.current.openEvent&&"mousedown"!==s.current.openEvent.type?(e.preventDefault(),r(!0,e.nativeEvent,"click")):r(!1,e.nativeEvent,"click")))},onClick(e){const t=h.current;"mousedown"===l&&h.current?h.current=void 0:f(t,!0)&&u||(!n||!c||s.current.openEvent&&"click"!==s.current.openEvent.type?r(!0,e.nativeEvent,"click"):r(!1,e.nativeEvent,"click"))},onKeyDown(e){h.current=void 0,e.defaultPrevented||!d||Wt(e)||(" "!==e.key||jt(o)||(e.preventDefault(),p.current=!0),"Enter"===e.key&&r(!n||!c,e.nativeEvent,"click"))},onKeyUp(e){e.defaultPrevented||!d||Wt(e)||jt(o)||" "===e.key&&p.current&&(p.current=!1,r(!n||!c,e.nativeEvent,"click"))}})),[s,o,l,u,d,r,n,c]);return i.useMemo((()=>a?{reference:g}:{}),[a,g])}function zt(e){return null!=e&&null!=e.clientX}function Yt(e,t){void 0===t&&(t={});const{open:n,dataRef:r,elements:{floating:o,domReference:l},refs:c}=e,{enabled:u=!0,axis:d="both",x:h=null,y:p=null}=t,g=i.useRef(!1),m=i.useRef(null),[v,C]=i.useState(),[w,b]=i.useState([]),S=de(((e,t)=>{g.current||r.current.openEvent&&!zt(r.current.openEvent)||c.setPositionReference(function(e,t){let n=null,i=null,r=!1;return{contextElement:e||void 0,getBoundingClientRect(){var s;const o=(null==e?void 0:e.getBoundingClientRect())||{width:0,height:0,x:0,y:0},a="x"===t.axis||"both"===t.axis,l="y"===t.axis||"both"===t.axis,c=["mouseenter","mousemove"].includes((null==(s=t.dataRef.current.openEvent)?void 0:s.type)||"")&&"touch"!==t.pointerType;let u=o.width,d=o.height,h=o.x,p=o.y;return null==n&&t.x&&a&&(n=o.x-t.x),null==i&&t.y&&l&&(i=o.y-t.y),h-=n||0,p-=i||0,u=0,d=0,!r||c?(u="y"===t.axis?o.width:0,d="x"===t.axis?o.height:0,h=a&&null!=t.x?t.x:h,p=l&&null!=t.y?t.y:p):r&&!c&&(d="x"===t.axis?o.height:d,u="y"===t.axis?o.width:u),r=!0,{width:u,height:d,x:h,y:p,top:p,right:h+u,bottom:p+d,left:h}}}}(l,{x:e,y:t,axis:d,dataRef:r,pointerType:v}))})),E=de((e=>{null==h&&null==p&&(n?m.current||b([]):S(e.clientX,e.clientY))})),x=f(v)?o:n,A=i.useCallback((()=>{if(!x||!u||null!=h||null!=p)return;const e=(0,s.zk)(o);function t(n){const i=y(n);a(o,i)?(e.removeEventListener("mousemove",t),m.current=null):S(n.clientX,n.clientY)}if(!r.current.openEvent||zt(r.current.openEvent)){e.addEventListener("mousemove",t);const n=()=>{e.removeEventListener("mousemove",t),m.current=null};return m.current=n,n}c.setPositionReference(l)}),[x,u,h,p,o,r,c,l,S]);i.useEffect((()=>A()),[A,w]),i.useEffect((()=>{u&&!o&&(g.current=!1)}),[u,o]),i.useEffect((()=>{!u&&n&&(g.current=!0)}),[u,n]),Re((()=>{!u||null==h&&null==p||(g.current=!1,S(h,p))}),[u,h,p,S]);const T=i.useMemo((()=>{function e(e){let{pointerType:t}=e;C(t)}return{onPointerDown:e,onPointerEnter:e,onMouseMove:E,onMouseEnter:E}}),[E]);return i.useMemo((()=>u?{reference:T}:{}),[u,T])}const qt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Kt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Xt=e=>{var t,n;return{escapeKey:"boolean"===typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"===typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function Qt(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:l}=e,{enabled:c=!0,escapeKey:u=!0,outsidePress:d=!0,outsidePressEvent:h="pointerdown",referencePress:p=!1,referencePressEvent:g="pointerdown",ancestorScroll:f=!1,bubbles:C,capture:w}=t,b=Qe(),S=de("function"===typeof d?d:()=>!1),E="function"===typeof d?S:d,x=i.useRef(!1),A=i.useRef(!1),{escapeKey:T,outsidePress:_}=Xt(C),{escapeKey:R,outsidePress:D}=Xt(w),M=de((e=>{var t;if(!n||!c||!u||"Escape"!==e.key)return;const i=null==(t=l.current.floatingContext)?void 0:t.nodeId,s=b?ut(b.nodesRef.current,i):[];if(!T&&(e.stopPropagation(),s.length>0)){let e=!0;if(s.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)})),!e)return}r(!1,function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,"escape-key")})),P=de((e=>{var t;const n=()=>{var t;M(e),null==(t=y(e))||t.removeEventListener("keydown",n)};null==(t=y(e))||t.addEventListener("keydown",n)})),I=de((e=>{var t;const n=x.current;x.current=!1;const i=A.current;if(A.current=!1,"click"===h&&i)return;if(n)return;if("function"===typeof E&&!E(e))return;const c=y(e),u="["+et("inert")+"]",d=m(o.floating).querySelectorAll(u);let p=(0,s.vq)(c)?c:null;for(;p&&!(0,s.eu)(p);){const e=(0,s.$4)(p);if((0,s.eu)(e)||!(0,s.vq)(e))break;p=e}if(d.length&&(0,s.vq)(c)&&!c.matches("html,body")&&!a(c,o.floating)&&Array.from(d).every((e=>!a(p,e))))return;if((0,s.sb)(c)&&O){const t=c.clientWidth>0&&c.scrollWidth>c.clientWidth,n=c.clientHeight>0&&c.scrollHeight>c.clientHeight;let i=n&&e.offsetX>c.clientWidth;if(n){"rtl"===(0,s.L9)(c).direction&&(i=e.offsetX<=c.offsetWidth-c.clientWidth)}if(i||t&&e.offsetY>c.clientHeight)return}const g=null==(t=l.current.floatingContext)?void 0:t.nodeId,f=b&&ut(b.nodesRef.current,g).some((t=>{var n;return v(e,null==(n=t.context)?void 0:n.elements.floating)}));if(v(e,o.floating)||v(e,o.domReference)||f)return;const C=b?ut(b.nodesRef.current,g):[];if(C.length>0){let e=!0;if(C.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)})),!e)return}r(!1,e,"outside-press")})),N=de((e=>{var t;const n=()=>{var t;I(e),null==(t=y(e))||t.removeEventListener(h,n)};null==(t=y(e))||t.addEventListener(h,n)}));i.useEffect((()=>{if(!n||!c)return;function e(e){r(!1,e,"ancestor-scroll")}l.current.__escapeKeyBubbles=T,l.current.__outsidePressBubbles=_;const t=m(o.floating);u&&t.addEventListener("keydown",R?P:M,R),E&&t.addEventListener(h,D?N:I,D);let i=[];return f&&((0,s.vq)(o.domReference)&&(i=(0,s.v9)(o.domReference)),(0,s.vq)(o.floating)&&(i=i.concat((0,s.v9)(o.floating))),!(0,s.vq)(o.reference)&&o.reference&&o.reference.contextElement&&(i=i.concat((0,s.v9)(o.reference.contextElement)))),i=i.filter((e=>{var n;return e!==(null==(n=t.defaultView)?void 0:n.visualViewport)})),i.forEach((t=>{t.addEventListener("scroll",e,{passive:!0})})),()=>{u&&t.removeEventListener("keydown",R?P:M,R),E&&t.removeEventListener(h,D?N:I,D),i.forEach((t=>{t.removeEventListener("scroll",e)}))}}),[l,o,u,E,h,n,r,f,c,T,_,M,R,P,I,D,N]),i.useEffect((()=>{x.current=!1}),[E,h]);const k=i.useMemo((()=>({onKeyDown:M,[qt[g]]:e=>{p&&r(!1,e.nativeEvent,"reference-press")}})),[M,r,p,g]),O=i.useMemo((()=>({onKeyDown:M,onMouseDown(){A.current=!0},onMouseUp(){A.current=!0},[Kt[h]]:()=>{x.current=!0}})),[M,h]);return i.useMemo((()=>c?{reference:k,floating:O}:{}),[c,k,O])}function Zt(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=Ue(),o=i.useRef({}),[a]=i.useState((()=>Ye())),l=null!=Xe();const[c,u]=i.useState(r.reference),d=de(((e,t,i)=>{o.current.openEvent=e?t:void 0,a.emit("openchange",{open:e,event:t,reason:i,nested:l}),null==n||n(e,t,i)})),h=i.useMemo((()=>({setPositionReference:u})),[]),p=i.useMemo((()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference})),[c,r.reference,r.floating]);return i.useMemo((()=>({dataRef:o,open:t,onOpenChange:d,elements:p,events:a,floatingId:s,refs:h})),[t,d,p,a,s,h])}function $t(e){void 0===e&&(e={});const{nodeId:t}=e,n=Zt({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[a,l]=i.useState(null),[c,u]=i.useState(null),d=(null==o?void 0:o.reference)||a,h=i.useRef(null),p=Qe();Re((()=>{d&&(h.current=d)}),[d]);const g=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=i.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,g]=i.useState(r);K(p,r)||g(r);const[f,m]=i.useState(null),[v,y]=i.useState(null),C=i.useCallback((e=>{e!==E.current&&(E.current=e,m(e))}),[]),w=i.useCallback((e=>{e!==x.current&&(x.current=e,y(e))}),[]),b=o||f,S=a||v,E=i.useRef(null),x=i.useRef(null),A=i.useRef(d),T=null!=c,_=Z(c),R=Z(s),D=i.useCallback((()=>{if(!E.current||!x.current)return;const e={placement:t,strategy:n,middleware:p};R.current&&(e.platform=R.current),(0,Y.rD)(E.current,x.current,e).then((e=>{const t={...e,isPositioned:!0};M.current&&!K(A.current,t)&&(A.current=t,z.flushSync((()=>{h(t)})))}))}),[p,t,n,R]);q((()=>{!1===u&&A.current.isPositioned&&(A.current.isPositioned=!1,h((e=>({...e,isPositioned:!1}))))}),[u]);const M=i.useRef(!1);q((()=>(M.current=!0,()=>{M.current=!1})),[]),q((()=>{if(b&&(E.current=b),S&&(x.current=S),b&&S){if(_.current)return _.current(b,S,D);D()}}),[b,S,D,_,T]);const P=i.useMemo((()=>({reference:E,floating:x,setReference:C,setFloating:w})),[C,w]),I=i.useMemo((()=>({reference:b,floating:S})),[b,S]),N=i.useMemo((()=>{const e={position:n,left:0,top:0};if(!I.floating)return e;const t=Q(I.floating,d.x),i=Q(I.floating,d.y);return l?{...e,transform:"translate("+t+"px, "+i+"px)",...X(I.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:i}}),[n,l,I.floating,d.x,d.y]);return i.useMemo((()=>({...d,update:D,refs:P,elements:I,floatingStyles:N})),[d,D,P,I,N])}({...e,elements:{...o,...c&&{reference:c}}}),f=i.useCallback((e=>{const t=(0,s.vq)(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;u(t),g.refs.setReference(t)}),[g.refs]),m=i.useCallback((e=>{((0,s.vq)(e)||null===e)&&(h.current=e,l(e)),((0,s.vq)(g.refs.reference.current)||null===g.refs.reference.current||null!==e&&!(0,s.vq)(e))&&g.refs.setReference(e)}),[g.refs]),v=i.useMemo((()=>({...g.refs,setReference:m,setPositionReference:f,domReference:h})),[g.refs,m,f]),y=i.useMemo((()=>({...g.elements,domReference:d})),[g.elements,d]),C=i.useMemo((()=>({...g,...r,refs:v,elements:y,nodeId:t})),[g,v,y,t,r]);return Re((()=>{r.dataRef.current.floatingContext=C;const e=null==p?void 0:p.nodesRef.current.find((e=>e.id===t));e&&(e.context=C)})),i.useMemo((()=>({...g,context:C,refs:v,elements:y})),[g,v,y,C])}function Jt(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,events:l,dataRef:c,elements:u}=e,{enabled:p=!0,visibleOnly:f=!0}=t,v=i.useRef(!1),C=i.useRef(),b=i.useRef(!0);i.useEffect((()=>{if(!p)return;const e=(0,s.zk)(u.domReference);function t(){!n&&(0,s.sb)(u.domReference)&&u.domReference===o(m(u.domReference))&&(v.current=!0)}function i(){b.current=!0}return e.addEventListener("blur",t),e.addEventListener("keydown",i,!0),()=>{e.removeEventListener("blur",t),e.removeEventListener("keydown",i,!0)}}),[u.domReference,n,p]),i.useEffect((()=>{if(p)return l.on("openchange",e),()=>{l.off("openchange",e)};function e(e){let{reason:t}=e;"reference-press"!==t&&"escape-key"!==t||(v.current=!0)}}),[l,p]),i.useEffect((()=>()=>{clearTimeout(C.current)}),[]);const S=i.useMemo((()=>({onPointerDown(e){d(e.nativeEvent)||(b.current=!1)},onMouseLeave(){v.current=!1},onFocus(e){if(v.current)return;const t=y(e.nativeEvent);if(f&&(0,s.vq)(t))try{if(h()&&g())throw Error();if(!t.matches(":focus-visible"))return}catch(n){if(!b.current&&!w(t))return}r(!0,e.nativeEvent,"focus")},onBlur(e){v.current=!1;const t=e.relatedTarget,n=e.nativeEvent,i=(0,s.vq)(t)&&t.hasAttribute(et("focus-guard"))&&"outside"===t.getAttribute("data-type");C.current=window.setTimeout((()=>{var e;const s=o(u.domReference?u.domReference.ownerDocument:document);(t||s!==u.domReference)&&(a(null==(e=c.current.floatingContext)?void 0:e.refs.floating.current,s)||a(u.domReference,s)||i||r(!1,n,"focus"))}))}})),[c,u.domReference,r,f]);return i.useMemo((()=>p?{reference:S}:{}),[p,S])}const en="active",tn="selected";function nn(e,t,n){const i=new Map,r="item"===n;let s=e;if(r&&e){const{[en]:t,[tn]:n,...i}=e;s=i}return{..."floating"===n&&{tabIndex:-1},...s,...t.map((t=>{const i=t?t[n]:null;return"function"===typeof i?e?i(e):null:i})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,s]=t;var o;r&&[en,tn].includes(n)||(0===n.indexOf("on")?(i.has(n)||i.set(n,[]),"function"===typeof s&&(null==(o=i.get(n))||o.push(s),e[n]=function(){for(var e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return null==(e=i.get(n))?void 0:e.map((e=>e(...r))).find((e=>void 0!==e))})):e[n]=s)})),e):e),{})}}function rn(e){void 0===e&&(e=[]);const t=e.map((e=>null==e?void 0:e.reference)),n=e.map((e=>null==e?void 0:e.floating)),r=e.map((e=>null==e?void 0:e.item)),s=i.useCallback((t=>nn(t,e,"reference")),t),o=i.useCallback((t=>nn(t,e,"floating")),n),a=i.useCallback((t=>nn(t,e,"item")),r);return i.useMemo((()=>({getReferenceProps:s,getFloatingProps:o,getItemProps:a})),[s,o,a])}let sn=!1;function on(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function an(e,t){return on(t,e===he||e===pe,e===ge||e===fe)}function ln(e,t,n){return on(t,e===pe,n?e===ge:e===fe)||"Enter"===e||" "===e||""===e}function cn(e,t,n){return on(t,n?e===fe:e===ge,e===he)}function un(e,t){const{open:n,onOpenChange:r,elements:l}=e,{listRef:c,activeIndex:p,onNavigate:f=(()=>{}),enabled:v=!0,selectedIndex:y=null,allowEscape:C=!1,loop:w=!1,nested:E=!1,rtl:x=!1,virtual:A=!1,focusItemOnOpen:T="auto",focusItemOnHover:_=!0,openOnArrowKeyDown:R=!0,disabledIndices:D,orientation:M="vertical",cols:P=1,scrollItemIntoView:I=!0,virtualItemRef:N,itemSizes:k,dense:O=!1}=t;const L=Xe(),F=Qe(),B=de(f),V=i.useRef(T),G=i.useRef(null!=y?y:-1),H=i.useRef(null),W=i.useRef(!0),j=i.useRef(B),U=i.useRef(!!l.floating),z=i.useRef(n),Y=i.useRef(!1),q=i.useRef(!1),K=tt(D),X=tt(n),Q=tt(I),Z=tt(l.floating),$=tt(y),[J,ee]=i.useState(),[te,ne]=i.useState(),ie=de((function(e,t,n){function i(e){A?(ee(e.id),null==F||F.events.emit("virtualfocus",e),N&&(N.current=e)):_e(e,{preventScroll:!0,sync:!(!g()||!h())&&(sn||Y.current)})}void 0===n&&(n=!1);const r=e.current[t.current];r&&i(r),requestAnimationFrame((()=>{const s=e.current[t.current]||r;if(!s)return;r||i(s);const o=Q.current;o&&se&&(n||!W.current)&&(null==s.scrollIntoView||s.scrollIntoView("boolean"===typeof o?{block:"nearest",inline:"nearest"}:o))}))}));Re((()=>{document.createElement("div").focus({get preventScroll(){return sn=!0,!1}})}),[]),Re((()=>{v&&(n&&l.floating?V.current&&null!=y&&(q.current=!0,G.current=y,B(y)):U.current&&(G.current=-1,j.current(null)))}),[v,n,l.floating,y,B]),Re((()=>{if(v&&n&&l.floating)if(null==p){if(Y.current=!1,null!=$.current)return;if(U.current&&(G.current=-1,ie(c,G)),(!z.current||!U.current)&&V.current&&(null!=H.current||!0===V.current&&null==H.current)){let e=0;const t=()=>{if(null==c.current[0]){if(e<2){(e?requestAnimationFrame:queueMicrotask)(t)}e++}else G.current=null==H.current||ln(H.current,M,x)||E?ye(c,K.current):Ce(c,K.current),H.current=null,B(G.current)};t()}}else ve(c,p)||(G.current=p,ie(c,G,q.current),q.current=!1)}),[v,n,l.floating,p,$,E,c,M,x,B,ie,K]),Re((()=>{var e;if(!v||l.floating||!F||A||!U.current)return;const t=F.nodesRef.current,n=null==(e=t.find((e=>e.id===L)))||null==(e=e.context)?void 0:e.elements.floating,i=o(m(l.floating)),r=t.some((e=>e.context&&a(e.context.elements.floating,i)));n&&!r&&W.current&&n.focus({preventScroll:!0})}),[v,l.floating,F,L,A]),Re((()=>{if(v&&F&&A&&!L)return F.events.on("virtualfocus",e),()=>{F.events.off("virtualfocus",e)};function e(e){ne(e.id),N&&(N.current=e)}}),[v,F,A,L,N]),Re((()=>{j.current=B,U.current=!!l.floating})),Re((()=>{n||(H.current=null)}),[n]),Re((()=>{z.current=n}),[n]);const re=null!=p,se=i.useMemo((()=>{function e(e){if(!n)return;const t=c.current.indexOf(e);-1!==t&&B(t)}return{onFocus(t){let{currentTarget:n}=t;e(n)},onClick:e=>{let{currentTarget:t}=e;return t.focus({preventScroll:!0})},..._&&{onMouseMove(t){let{currentTarget:n}=t;e(n)},onPointerLeave(e){let{pointerType:t}=e;W.current&&"touch"!==t&&(G.current=-1,ie(c,G),B(null),A||_e(Z.current,{preventScroll:!0}))}}}}),[n,Z,ie,_,c,B,A]),oe=de((e=>{if(W.current=!1,Y.current=!0,!X.current&&e.currentTarget===Z.current)return;if(E&&cn(e.key,M,x))return b(e),r(!1,e.nativeEvent,"list-navigation"),void((0,s.sb)(l.domReference)&&!A&&l.domReference.focus());const t=G.current,i=ye(c,D),a=Ce(c,D);if("Home"===e.key&&(b(e),G.current=i,B(G.current)),"End"===e.key&&(b(e),G.current=a,B(G.current)),P>1){const t=k||Array.from({length:c.current.length},(()=>({width:1,height:1}))),n=Se(t,P,O),r=n.findIndex((e=>null!=e&&!Ae(c.current,e,D))),s=n.reduce(((e,t,n)=>null==t||Ae(c.current,t,D)?e:n),-1);if(G.current=n[be({current:n.map((e=>null!=e?c.current[e]:null))},{event:e,orientation:M,loop:w,cols:P,disabledIndices:xe([...D||c.current.map(((e,t)=>Ae(c.current,t)?t:void 0)),void 0],n),minIndex:r,maxIndex:s,prevIndex:Ee(G.current>a?i:G.current,t,n,P,e.key===pe?"bl":e.key===fe?"tr":"tl"),stopEvent:!0})],B(G.current),"both"===M)return}if(an(e.key,M)){if(b(e),n&&!A&&o(e.currentTarget.ownerDocument)===e.currentTarget)return G.current=ln(e.key,M,x)?i:a,void B(G.current);ln(e.key,M,x)?G.current=w?t>=a?C&&t!==c.current.length?-1:i:we(c,{startingIndex:t,disabledIndices:D}):Math.min(a,we(c,{startingIndex:t,disabledIndices:D})):G.current=w?t<=i?C&&-1!==t?c.current.length:a:we(c,{startingIndex:t,decrement:!0,disabledIndices:D}):Math.max(i,we(c,{startingIndex:t,decrement:!0,disabledIndices:D})),ve(c,G.current)?B(null):B(G.current)}})),ae=i.useMemo((()=>A&&n&&re&&{"aria-activedescendant":te||J}),[A,n,re,te,J]),le=i.useMemo((()=>({"aria-orientation":"both"===M?void 0:M,...!S(l.domReference)&&ae,onKeyDown:oe,onPointerMove(){W.current=!0}})),[ae,oe,l.domReference,M]),ce=i.useMemo((()=>{function e(e){"auto"===T&&u(e.nativeEvent)&&(V.current=!0)}return{...ae,onKeyDown(e){W.current=!1;const t=0===e.key.indexOf("Arrow"),i=function(e,t,n){return on(t,n?e===ge:e===fe,e===pe)}(e.key,M,x),s=cn(e.key,M,x),o=an(e.key,M),a=(E?i:o)||"Enter"===e.key||""===e.key.trim();if(A&&n){const n=null==F?void 0:F.nodesRef.current.find((e=>null==e.parentId)),r=F&&n?function(e,t){let n,i=-1;return function t(r,s){s>i&&(n=r,i=s),ut(e,r).forEach((e=>{t(e.id,s+1)}))}(t,0),e.find((e=>e.id===n))}(F.nodesRef.current,n.id):null;if(t&&r&&N){const t=new KeyboardEvent("keydown",{key:e.key,bubbles:!0});if(i||s){var l,u;const n=(null==(l=r.context)?void 0:l.elements.domReference)===e.currentTarget,o=s&&!n?null==(u=r.context)?void 0:u.elements.domReference:i?c.current.find((e=>(null==e?void 0:e.id)===J)):null;o&&(b(e),o.dispatchEvent(t),ne(void 0))}var d;if(o&&r.context)if(r.context.open&&r.parentId&&e.currentTarget!==r.context.elements.domReference)return b(e),void(null==(d=r.context.elements.domReference)||d.dispatchEvent(t))}return oe(e)}(n||R||!t)&&(a&&(H.current=E&&o?null:e.key),E?i&&(b(e),n?(G.current=ye(c,K.current),B(G.current)):r(!0,e.nativeEvent,"list-navigation")):o&&(null!=y&&(G.current=y),b(e),!n&&R?r(!0,e.nativeEvent,"list-navigation"):oe(e),n&&B(G.current)))},onFocus(){n&&!A&&B(null)},onPointerDown:function(e){V.current=T,"auto"===T&&d(e.nativeEvent)&&(V.current=!0)},onMouseDown:e,onClick:e}}),[J,ae,oe,K,T,c,E,B,r,n,R,M,x,y,F,A,N]);return i.useMemo((()=>v?{reference:ce,floating:le,item:se}:{}),[v,ce,le,se])}const dn=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function hn(e,t){var n;void 0===t&&(t={});const{open:r,floatingId:s}=e,{enabled:o=!0,role:a="dialog"}=t,l=null!=(n=dn.get(a))?n:a,c=Ue(),u=null!=Xe(),d=i.useMemo((()=>"tooltip"===l||"label"===a?{["aria-"+("label"===a?"labelledby":"describedby")]:r?s:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":"alertdialog"===l?"dialog":l,"aria-controls":r?s:void 0,..."listbox"===l&&{role:"combobox"},..."menu"===l&&{id:c},..."menu"===l&&u&&{role:"menuitem"},..."select"===a&&{"aria-autocomplete":"none"},..."combobox"===a&&{"aria-autocomplete":"list"}}),[l,s,u,r,c,a]),h=i.useMemo((()=>{const e={id:s,...l&&{role:l}};return"tooltip"===l||"label"===a?e:{...e,..."menu"===l&&{"aria-labelledby":c}}}),[l,s,c,a]),p=i.useCallback((e=>{let{active:t,selected:n}=e;const i={role:"option",...t&&{id:s+"-option"}};switch(a){case"select":return{...i,"aria-selected":t&&n};case"combobox":return{...i,...t&&{"aria-selected":!0}}}return{}}),[s,a]);return i.useMemo((()=>o?{reference:d,floating:h,item:p}:{}),[o,d,h,p])}const pn=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase()));function gn(e,t){return"function"===typeof e?e(t):e}function fn(e,t){void 0===t&&(t={});const{open:n,elements:{floating:r}}=e,{duration:s=250}=t,o=("number"===typeof s?s:s.close)||0,[a,l]=i.useState("unmounted"),c=function(e,t){const[n,r]=i.useState(e);return e&&!n&&r(!0),i.useEffect((()=>{if(!e&&n){const e=setTimeout((()=>r(!1)),t);return()=>clearTimeout(e)}}),[e,n,t]),n}(n,o);return c||"close"!==a||l("unmounted"),Re((()=>{if(r){if(n){l("initial");const e=requestAnimationFrame((()=>{l("open")}));return()=>{cancelAnimationFrame(e)}}l("close")}}),[n,r]),{isMounted:c,status:a}}function mn(e,t){void 0===t&&(t={});const{initial:n={opacity:0},open:r,close:s,common:o,duration:a=250}=t,l=e.placement,c=l.split("-")[0],u=i.useMemo((()=>({side:c,placement:l})),[c,l]),d="number"===typeof a,h=(d?a:a.open)||0,p=(d?a:a.close)||0,[g,f]=i.useState((()=>({...gn(o,u),...gn(n,u)}))),{isMounted:m,status:v}=fn(e,{duration:a}),y=tt(n),C=tt(r),w=tt(s),b=tt(o);return Re((()=>{const e=gn(y.current,u),t=gn(w.current,u),n=gn(b.current,u),i=gn(C.current,u)||Object.keys(e).reduce(((e,t)=>(e[t]="",e)),{});if("initial"===v&&f((t=>({transitionProperty:t.transitionProperty,...n,...e}))),"open"===v&&f({transitionProperty:Object.keys(i).map(pn).join(","),transitionDuration:h+"ms",...n,...i}),"close"===v){const i=t||e;f({transitionProperty:Object.keys(i).map(pn).join(","),transitionDuration:p+"ms",...n,...i})}}),[p,w,y,C,b,h,v,u]),{isMounted:m,styles:g}}function vn(e,t){var n;const{open:r,dataRef:s}=e,{listRef:o,activeIndex:a,onMatch:l,onTypingChange:c,enabled:u=!0,findMatch:d=null,resetMs:h=750,ignoreKeys:p=[],selectedIndex:g=null}=t,f=i.useRef(),m=i.useRef(""),v=i.useRef(null!=(n=null!=g?g:a)?n:-1),y=i.useRef(null),C=de(l),w=de(c),S=tt(d),E=tt(p);Re((()=>{r&&(clearTimeout(f.current),y.current=null,m.current="")}),[r]),Re((()=>{var e;r&&""===m.current&&(v.current=null!=(e=null!=g?g:a)?e:-1)}),[r,g,a]);const x=de((e=>{e?s.current.typing||(s.current.typing=e,w(e)):s.current.typing&&(s.current.typing=e,w(e))})),A=de((e=>{function t(e,t,n){const i=S.current?S.current(t,n):t.find((e=>0===(null==e?void 0:e.toLocaleLowerCase().indexOf(n.toLocaleLowerCase()))));return i?e.indexOf(i):-1}const n=o.current;if(m.current.length>0&&" "!==m.current[0]&&(-1===t(n,n,m.current)?x(!1):" "===e.key&&b(e)),null==n||E.current.includes(e.key)||1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey)return;r&&" "!==e.key&&(b(e),x(!0));n.every((e=>{var t,n;return!e||(null==(t=e[0])?void 0:t.toLocaleLowerCase())!==(null==(n=e[1])?void 0:n.toLocaleLowerCase())}))&&m.current===e.key&&(m.current="",v.current=y.current),m.current+=e.key,clearTimeout(f.current),f.current=setTimeout((()=>{m.current="",v.current=y.current,x(!1)}),h);const i=v.current,s=t(n,[...n.slice((i||0)+1),...n.slice(0,(i||0)+1)],m.current);-1!==s?(C(s),y.current=s):" "!==e.key&&(m.current="",x(!1))})),T=i.useMemo((()=>({onKeyDown:A})),[A]),_=i.useMemo((()=>({onKeyDown:A,onKeyUp(e){" "===e.key&&x(!1)}})),[A,x]);return i.useMemo((()=>u?{reference:T,floating:_}:{}),[u,T,_])}function yn(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const Cn=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:i,onFallbackChange:r,offset:s=0,index:o=0,minItemsVisible:a=4,referenceOverflowThreshold:l=0,scrollRef:c,...u}=(0,E._3)(e,t),{rects:d,elements:{floating:h}}=t,p=n.current[o];if(!p)return{};const g={...t,...await J(-p.offsetTop-h.clientTop-d.reference.height/2-p.offsetHeight/2-s).fn(t)},f=(null==c?void 0:c.current)||h,m=await(0,Y.__)(yn(g,f.scrollHeight),u),v=await(0,Y.__)(g,{...u,elementContext:"reference"}),y=Math.max(0,m.top),C=g.y+y,w=Math.max(0,f.scrollHeight-y-Math.max(0,m.bottom));return f.style.maxHeight=w+"px",f.scrollTop=y,r&&(f.offsetHeight<p.offsetHeight*Math.min(a,n.current.length-1)-1||v.top>=-l||v.bottom>=-l?z.flushSync((()=>r(!0))):z.flushSync((()=>r(!1)))),i&&(i.current=await(0,Y.__)(yn({...g,y:C},f.offsetHeight),u)),{y:C}}});function wn(e,t){const{open:n,elements:r}=e,{enabled:s=!0,overflowRef:o,scrollRef:a,onChange:l}=t,u=de(l),d=i.useRef(!1),h=i.useRef(null),p=i.useRef(null);i.useEffect((()=>{if(!s)return;function e(e){if(e.ctrlKey||!t||null==o.current)return;const n=e.deltaY,i=o.current.top>=-.5,r=o.current.bottom>=-.5,s=t.scrollHeight-t.clientHeight,a=n<0?-1:1,l=n<0?"max":"min";t.scrollHeight<=t.clientHeight||(!i&&n>0||!r&&n<0?(e.preventDefault(),z.flushSync((()=>{u((e=>e+Math[l](n,s*a)))}))):/firefox/i.test(c())&&(t.scrollTop+=n))}const t=(null==a?void 0:a.current)||r.floating;return n&&t?(t.addEventListener("wheel",e),requestAnimationFrame((()=>{h.current=t.scrollTop,null!=o.current&&(p.current={...o.current})})),()=>{h.current=null,p.current=null,t.removeEventListener("wheel",e)}):void 0}),[s,n,r.floating,o,a,u]);const g=i.useMemo((()=>({onKeyDown(){d.current=!0},onWheel(){d.current=!1},onPointerMove(){d.current=!1},onScroll(){const e=(null==a?void 0:a.current)||r.floating;if(o.current&&e&&d.current){if(null!==h.current){const t=e.scrollTop-h.current;(o.current.bottom<-.5&&t<-1||o.current.top<-.5&&t>1)&&z.flushSync((()=>u((e=>e+t))))}requestAnimationFrame((()=>{h.current=e.scrollTop}))}}})),[r.floating,u,o,a]);return i.useMemo((()=>s?{floating:g}:{}),[s,g])}function bn(e,t){const[n,i]=e;let r=!1;const s=t.length;for(let o=0,a=s-1;o<s;a=o++){const[e,s]=t[o]||[0,0],[l,c]=t[a]||[0,0];s>=i!==c>=i&&n<=(l-e)*(i-s)/(c-s)+e&&(r=!r)}return r}function Sn(e){void 0===e&&(e={});const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:i=!0}=e;let r,o=!1,l=null,c=null,u=performance.now();const d=e=>{let{x:n,y:d,placement:h,elements:p,onClose:g,nodeId:f,tree:m}=e;return function(e){function v(){clearTimeout(r),g()}if(clearTimeout(r),!p.domReference||!p.floating||null==h||null==n||null==d)return;const{clientX:C,clientY:w}=e,b=[C,w],S=y(e),E="mouseleave"===e.type,x=a(p.floating,S),A=a(p.domReference,S),T=p.domReference.getBoundingClientRect(),_=p.floating.getBoundingClientRect(),R=h.split("-")[0],D=n>_.right-_.width/2,M=d>_.bottom-_.height/2,P=function(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}(b,T),I=_.width>T.width,N=_.height>T.height,k=(I?T:_).left,O=(I?T:_).right,L=(N?T:_).top,F=(N?T:_).bottom;if(x&&(o=!0,!E))return;if(A&&(o=!1),A&&!E)return void(o=!0);if(E&&(0,s.vq)(e.relatedTarget)&&a(p.floating,e.relatedTarget))return;if(m&&ut(m.nodesRef.current,f).some((e=>{let{context:t}=e;return null==t?void 0:t.open})))return;if("top"===R&&d>=T.bottom-1||"bottom"===R&&d<=T.top+1||"left"===R&&n>=T.right-1||"right"===R&&n<=T.left+1)return v();let B=[];switch(R){case"top":B=[[k,T.top+1],[k,_.bottom-1],[O,_.bottom-1],[O,T.top+1]];break;case"bottom":B=[[k,_.top+1],[k,T.bottom-1],[O,T.bottom-1],[O,_.top+1]];break;case"left":B=[[_.right-1,F],[_.right-1,L],[T.left+1,L],[T.left+1,F]];break;case"right":B=[[T.right-1,F],[T.right-1,L],[_.left+1,L],[_.left+1,F]]}if(!bn([C,w],B)){if(o&&!P)return v();if(!E&&i){const t=function(e,t){const n=performance.now(),i=n-u;if(null===l||null===c||0===i)return l=e,c=t,u=n,null;const r=e-l,s=t-c,o=Math.sqrt(r*r+s*s);return l=e,c=t,u=n,o/i}(e.clientX,e.clientY);if(null!==t&&t<.1)return v()}bn([C,w],function(e){let[n,i]=e;switch(R){case"top":return[[I?n+t/2:D?n+4*t:n-4*t,i+t+1],[I?n-t/2:D?n+4*t:n-4*t,i+t+1],...[[_.left,D||I?_.bottom-t:_.top],[_.right,D?I?_.bottom-t:_.top:_.bottom-t]]];case"bottom":return[[I?n+t/2:D?n+4*t:n-4*t,i-t],[I?n-t/2:D?n+4*t:n-4*t,i-t],...[[_.left,D||I?_.top+t:_.bottom],[_.right,D?I?_.top+t:_.bottom:_.top+t]]];case"left":{const e=[n+t+1,N?i+t/2:M?i+4*t:i-4*t],r=[n+t+1,N?i-t/2:M?i+4*t:i-4*t];return[...[[M||N?_.right-t:_.left,_.top],[M?N?_.right-t:_.left:_.right-t,_.bottom]],e,r]}case"right":return[[n-t,N?i+t/2:M?i+4*t:i-4*t],[n-t,N?i-t/2:M?i+4*t:i-4*t],...[[M||N?_.left+t:_.right,_.top],[M?N?_.left+t:_.right:_.left+t,_.bottom]]]}}([n,d]))?!o&&i&&(r=window.setTimeout(v,40)):v()}}};return d.__options={blockPointerEvents:n},d}},6519:(e,t)=>{"use strict";t.A=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),i=e.name||"",r=(e.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?i.toLowerCase().endsWith(t):t.endsWith("/*")?s===t.replace(/\/.*$/,""):r===t}))}return!0}},6778:e=>{var t=!("undefined"===typeof window||!window.document||!window.document.createElement);e.exports=t},7476:(e,t)=>{"use strict";t.addLeadingZeros=function(e,t){const n=e<0?"-":"",i=Math.abs(e).toString().padStart(t,"0");return n+i}},6305:(e,t,n)=>{"use strict";Object.defineProperty(t,"defaultLocale",{enumerable:!0,get:function(){return i.enUS}});var i=n(7350)},3837:(e,t)=>{"use strict";t.getDefaultOptions=function(){return n},t.setDefaultOptions=function(e){n=e};let n={}},8657:(e,t,n)=>{"use strict";t.formatters=void 0;var i=n(6963),r=n(4180),s=n(5629),o=n(189),a=n(1388),l=n(7476),c=n(3483);const u="midnight",d="noon",h="morning",p="afternoon",g="evening",f="night";t.formatters={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),i=t>0?t:1-t;return n.ordinalNumber(i,{unit:"year"})}return c.lightFormatters.y(e,t)},Y:function(e,t,n,i){const r=(0,a.getWeekYear)(e,i),s=r>0?r:1-r;if("YY"===t){const e=s%100;return(0,l.addLeadingZeros)(e,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):(0,l.addLeadingZeros)(s,t.length)},R:function(e,t){const n=(0,s.getISOWeekYear)(e);return(0,l.addLeadingZeros)(n,t.length)},u:function(e,t){const n=e.getFullYear();return(0,l.addLeadingZeros)(n,t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return(0,l.addLeadingZeros)(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return(0,l.addLeadingZeros)(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return c.lightFormatters.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return(0,l.addLeadingZeros)(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const r=(0,o.getWeek)(e,i);return"wo"===t?n.ordinalNumber(r,{unit:"week"}):(0,l.addLeadingZeros)(r,t.length)},I:function(e,t,n){const i=(0,r.getISOWeek)(e);return"Io"===t?n.ordinalNumber(i,{unit:"week"}):(0,l.addLeadingZeros)(i,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):c.lightFormatters.d(e,t)},D:function(e,t,n){const r=(0,i.getDayOfYear)(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):(0,l.addLeadingZeros)(r,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const r=e.getDay(),s=(r-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return(0,l.addLeadingZeros)(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const r=e.getDay(),s=(r-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return(0,l.addLeadingZeros)(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),r=0===i?7:i;switch(t){case"i":return String(r);case"ii":return(0,l.addLeadingZeros)(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let r;switch(r=12===i?d:0===i?u:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let r;switch(r=i>=17?g:i>=12?p:i>=4?h:f,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return c.lightFormatters.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):c.lightFormatters.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return"Ko"===t?n.ordinalNumber(i,{unit:"hour"}):(0,l.addLeadingZeros)(i,t.length)},k:function(e,t,n){let i=e.getHours();return 0===i&&(i=24),"ko"===t?n.ordinalNumber(i,{unit:"hour"}):(0,l.addLeadingZeros)(i,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):c.lightFormatters.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):c.lightFormatters.s(e,t)},S:function(e,t){return c.lightFormatters.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return v(i);case"XXXX":case"XX":return y(i);default:return y(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return v(i);case"xxxx":case"xx":return y(i);default:return y(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+m(i,":");default:return"GMT"+y(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+m(i,":");default:return"GMT"+y(i,":")}},t:function(e,t,n){const i=Math.trunc(e.getTime()/1e3);return(0,l.addLeadingZeros)(i,t.length)},T:function(e,t,n){const i=e.getTime();return(0,l.addLeadingZeros)(i,t.length)}};function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",i=Math.abs(e),r=Math.trunc(i/60),s=i%60;return 0===s?n+String(r):n+String(r)+t+(0,l.addLeadingZeros)(s,2)}function v(e,t){if(e%60===0){return(e>0?"-":"+")+(0,l.addLeadingZeros)(Math.abs(e)/60,2)}return y(e,t)}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",i=Math.abs(e);return n+(0,l.addLeadingZeros)(Math.trunc(i/60),2)+t+(0,l.addLeadingZeros)(i%60,2)}},3483:(e,t,n)=>{"use strict";t.lightFormatters=void 0;var i=n(7476);t.lightFormatters={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return(0,i.addLeadingZeros)("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):(0,i.addLeadingZeros)(n+1,2)},d:(e,t)=>(0,i.addLeadingZeros)(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>(0,i.addLeadingZeros)(e.getHours()%12||12,t.length),H:(e,t)=>(0,i.addLeadingZeros)(e.getHours(),t.length),m:(e,t)=>(0,i.addLeadingZeros)(e.getMinutes(),t.length),s:(e,t)=>(0,i.addLeadingZeros)(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return(0,i.addLeadingZeros)(s,t.length)}}},7495:(e,t)=>{"use strict";t.longFormatters=void 0;const n=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},i=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};t.longFormatters={p:i,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],o=r[2];if(!o)return n(e,t);let a;switch(s){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",n(s,t)).replace("{{time}}",i(o,t))}}},3783:(e,t,n)=>{"use strict";t.getTimezoneOffsetInMilliseconds=function(e){const t=(0,i.toDate)(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n};var i=n(8144)},3842:(e,t)=>{"use strict";t.isProtectedDayOfYearToken=function(e){return n.test(e)},t.isProtectedWeekYearToken=function(e){return i.test(e)},t.warnOrThrowProtectedError=function(e,t,n){const i=function(e,t,n){const i="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(i," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(i),r.includes(e))throw new RangeError(i)};const n=/^D+$/,i=/^Y+$/,r=["D","DD","YY","YYYY"]},561:(e,t,n)=>{"use strict";t.addDays=function(e,t){const n=(0,i.toDate)(e);if(isNaN(t))return(0,r.constructFrom)(e,NaN);if(!t)return n;return n.setDate(n.getDate()+t),n};var i=n(8144),r=n(6828)},6975:(e,t,n)=>{"use strict";t.addHours=function(e,t){return(0,i.addMilliseconds)(e,t*r.millisecondsInHour)};var i=n(6228),r=n(4712)},6228:(e,t,n)=>{"use strict";t.addMilliseconds=function(e,t){const n=+(0,i.toDate)(e);return(0,r.constructFrom)(e,n+t)};var i=n(8144),r=n(6828)},5213:(e,t,n)=>{"use strict";t.addMinutes=function(e,t){return(0,i.addMilliseconds)(e,t*r.millisecondsInMinute)};var i=n(6228),r=n(4712)},5865:(e,t,n)=>{"use strict";t.addMonths=function(e,t){const n=(0,i.toDate)(e);if(isNaN(t))return(0,r.constructFrom)(e,NaN);if(!t)return n;const s=n.getDate(),o=(0,r.constructFrom)(e,n.getTime());o.setMonth(n.getMonth()+t+1,0);const a=o.getDate();return s>=a?o:(n.setFullYear(o.getFullYear(),o.getMonth(),s),n)};var i=n(8144),r=n(6828)},8711:(e,t,n)=>{"use strict";t.addQuarters=function(e,t){const n=3*t;return(0,i.addMonths)(e,n)};var i=n(5865)},3713:(e,t,n)=>{"use strict";t.addSeconds=function(e,t){return(0,i.addMilliseconds)(e,1e3*t)};var i=n(6228)},5969:(e,t,n)=>{"use strict";t.addWeeks=function(e,t){const n=7*t;return(0,i.addDays)(e,n)};var i=n(561)},6594:(e,t,n)=>{"use strict";t.addYears=function(e,t){return(0,i.addMonths)(e,12*t)};var i=n(5865)},4712:(e,t)=>{"use strict";t.secondsInYear=t.secondsInWeek=t.secondsInQuarter=t.secondsInMonth=t.secondsInMinute=t.secondsInHour=t.secondsInDay=t.quartersInYear=t.monthsInYear=t.monthsInQuarter=t.minutesInYear=t.minutesInMonth=t.minutesInHour=t.minutesInDay=t.minTime=t.millisecondsInWeek=t.millisecondsInSecond=t.millisecondsInMinute=t.millisecondsInHour=t.millisecondsInDay=t.maxTime=t.daysInYear=t.daysInWeek=void 0;t.daysInWeek=7;const n=t.daysInYear=365.2425,i=t.maxTime=24*Math.pow(10,8)*60*60*1e3,r=(t.minTime=-i,t.millisecondsInWeek=6048e5,t.millisecondsInDay=864e5,t.millisecondsInMinute=6e4,t.millisecondsInHour=36e5,t.millisecondsInSecond=1e3,t.minutesInYear=525600,t.minutesInMonth=43200,t.minutesInDay=1440,t.minutesInHour=60,t.monthsInQuarter=3,t.monthsInYear=12,t.quartersInYear=4,t.secondsInHour=3600),s=(t.secondsInMinute=60,t.secondsInDay=24*r),o=(t.secondsInWeek=7*s,t.secondsInYear=s*n),a=t.secondsInMonth=o/12;t.secondsInQuarter=3*a},6828:(e,t)=>{"use strict";t.constructFrom=function(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}},3028:(e,t,n)=>{"use strict";t.differenceInCalendarDays=function(e,t){const n=(0,r.startOfDay)(e),o=(0,r.startOfDay)(t),a=+n-(0,s.getTimezoneOffsetInMilliseconds)(n),l=+o-(0,s.getTimezoneOffsetInMilliseconds)(o);return Math.round((a-l)/i.millisecondsInDay)};var i=n(4712),r=n(6092),s=n(3783)},2952:(e,t,n)=>{"use strict";t.differenceInCalendarMonths=function(e,t){const n=(0,i.toDate)(e),r=(0,i.toDate)(t),s=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return 12*s+o};var i=n(8144)},6890:(e,t,n)=>{"use strict";t.differenceInCalendarQuarters=function(e,t){const n=(0,r.toDate)(e),s=(0,r.toDate)(t),o=n.getFullYear()-s.getFullYear(),a=(0,i.getQuarter)(n)-(0,i.getQuarter)(s);return 4*o+a};var i=n(2649),r=n(8144)},2413:(e,t,n)=>{"use strict";t.differenceInCalendarYears=function(e,t){const n=(0,i.toDate)(e),r=(0,i.toDate)(t);return n.getFullYear()-r.getFullYear()};var i=n(8144)},1503:(e,t,n)=>{"use strict";t.endOfDay=function(e){const t=(0,i.toDate)(e);return t.setHours(23,59,59,999),t};var i=n(8144)},8851:(e,t,n)=>{"use strict";t.endOfMonth=function(e){const t=(0,i.toDate)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t};var i=n(8144)},9777:(e,t,n)=>{"use strict";t.endOfWeek=function(e,t){var n,s,o,a,l,c;const u=(0,r.getDefaultOptions)(),d=null!==(n=null!==(s=null!==(o=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(l=t.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==o?o:u.weekStartsOn)&&void 0!==s?s:null===(c=u.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0,h=(0,i.toDate)(e),p=h.getDay(),g=6+(p<d?-7:0)-(p-d);return h.setDate(h.getDate()+g),h.setHours(23,59,59,999),h};var i=n(8144),r=n(3837)},2692:(e,t,n)=>{"use strict";t.endOfYear=function(e){const t=(0,i.toDate)(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t};var i=n(8144)},6042:(e,t,n)=>{"use strict";t.format=t.formatDate=function(e,t,n){var h,p,m,v,y,C,w,b,S,E,x,A,T,_;const R=(0,r.getDefaultOptions)(),D=null!==(h=null!==(p=null===n||void 0===n?void 0:n.locale)&&void 0!==p?p:R.locale)&&void 0!==h?h:i.defaultLocale,M=null!==(m=null!==(v=null!==(y=null!==(C=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==C?C:null===n||void 0===n||null===(w=n.locale)||void 0===w||null===(w=w.options)||void 0===w?void 0:w.firstWeekContainsDate)&&void 0!==y?y:R.firstWeekContainsDate)&&void 0!==v?v:null===(b=R.locale)||void 0===b||null===(b=b.options)||void 0===b?void 0:b.firstWeekContainsDate)&&void 0!==m?m:1,P=null!==(S=null!==(E=null!==(x=null!==(A=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==A?A:null===n||void 0===n||null===(T=n.locale)||void 0===T||null===(T=T.options)||void 0===T?void 0:T.weekStartsOn)&&void 0!==x?x:R.weekStartsOn)&&void 0!==E?E:null===(_=R.locale)||void 0===_||null===(_=_.options)||void 0===_?void 0:_.weekStartsOn)&&void 0!==S?S:0,I=(0,c.toDate)(e);if(!(0,l.isValid)(I))throw new RangeError("Invalid time value");let N=t.match(d).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,o.longFormatters[t])(e,D.formatLong)}return e})).join("").match(u).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:f(e)};if(s.formatters[t])return{isToken:!0,value:e};if(t.match(g))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));D.localize.preprocessor&&(N=D.localize.preprocessor(I,N));const k={firstWeekContainsDate:M,weekStartsOn:P,locale:D};return N.map((i=>{if(!i.isToken)return i.value;const r=i.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!(0,a.isProtectedWeekYearToken)(r))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!(0,a.isProtectedDayOfYearToken)(r))||(0,a.warnOrThrowProtectedError)(r,t,String(e));return(0,s.formatters[r[0]])(I,r,D.localize,k)})).join("")},Object.defineProperty(t,"formatters",{enumerable:!0,get:function(){return s.formatters}}),Object.defineProperty(t,"longFormatters",{enumerable:!0,get:function(){return o.longFormatters}});var i=n(6305),r=n(3837),s=n(8657),o=n(7495),a=n(3842),l=n(631),c=n(8144);const u=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,d=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,h=/^'([^]*?)'?$/,p=/''/g,g=/[a-zA-Z]/;function f(e){const t=e.match(h);return t?t[1].replace(p,"'"):e}},4533:(e,t,n)=>{"use strict";t.getDate=function(e){const t=(0,i.toDate)(e);return t.getDate()};var i=n(8144)},2995:(e,t,n)=>{"use strict";t.getDay=function(e){const t=(0,i.toDate)(e);return t.getDay()};var i=n(8144)},6963:(e,t,n)=>{"use strict";t.getDayOfYear=function(e){const t=(0,s.toDate)(e),n=(0,i.differenceInCalendarDays)(t,(0,r.startOfYear)(t));return n+1};var i=n(3028),r=n(2553),s=n(8144)},2295:(e,t,n)=>{"use strict";t.getDaysInMonth=function(e){const t=(0,i.toDate)(e),n=t.getFullYear(),s=t.getMonth(),o=(0,r.constructFrom)(e,0);return o.setFullYear(n,s+1,0),o.setHours(0,0,0,0),o.getDate()};var i=n(8144),r=n(6828)},2356:(e,t,n)=>{"use strict";t.getDefaultOptions=function(){return Object.assign({},(0,i.getDefaultOptions)())};var i=n(3837)},7606:(e,t,n)=>{"use strict";t.getHours=function(e){const t=(0,i.toDate)(e);return t.getHours()};var i=n(8144)},9480:(e,t,n)=>{"use strict";t.getISODay=function(e){let t=(0,i.toDate)(e).getDay();0===t&&(t=7);return t};var i=n(8144)},4180:(e,t,n)=>{"use strict";t.getISOWeek=function(e){const t=(0,o.toDate)(e),n=+(0,r.startOfISOWeek)(t)-+(0,s.startOfISOWeekYear)(t);return Math.round(n/i.millisecondsInWeek)+1};var i=n(4712),r=n(2611),s=n(8726),o=n(8144)},5629:(e,t,n)=>{"use strict";t.getISOWeekYear=function(e){const t=(0,s.toDate)(e),n=t.getFullYear(),o=(0,i.constructFrom)(e,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);const a=(0,r.startOfISOWeek)(o),l=(0,i.constructFrom)(e,0);l.setFullYear(n,0,4),l.setHours(0,0,0,0);const c=(0,r.startOfISOWeek)(l);return t.getTime()>=a.getTime()?n+1:t.getTime()>=c.getTime()?n:n-1};var i=n(6828),r=n(2611),s=n(8144)},832:(e,t,n)=>{"use strict";t.getMinutes=function(e){const t=(0,i.toDate)(e);return t.getMinutes()};var i=n(8144)},1615:(e,t,n)=>{"use strict";t.getMonth=function(e){const t=(0,i.toDate)(e);return t.getMonth()};var i=n(8144)},2649:(e,t,n)=>{"use strict";t.getQuarter=function(e){const t=(0,i.toDate)(e);return Math.trunc(t.getMonth()/3)+1};var i=n(8144)},488:(e,t,n)=>{"use strict";t.getSeconds=function(e){const t=(0,i.toDate)(e);return t.getSeconds()};var i=n(8144)},9340:(e,t,n)=>{"use strict";t.getTime=function(e){const t=(0,i.toDate)(e);return t.getTime()};var i=n(8144)},189:(e,t,n)=>{"use strict";t.getWeek=function(e,t){const n=(0,o.toDate)(e),a=+(0,r.startOfWeek)(n,t)-+(0,s.startOfWeekYear)(n,t);return Math.round(a/i.millisecondsInWeek)+1};var i=n(4712),r=n(1680),s=n(6145),o=n(8144)},1388:(e,t,n)=>{"use strict";t.getWeekYear=function(e,t){var n,a,l,c,u,d;const h=(0,s.toDate)(e),p=h.getFullYear(),g=(0,o.getDefaultOptions)(),f=null!==(n=null!==(a=null!==(l=null!==(c=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==c?c:null===t||void 0===t||null===(u=t.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==l?l:g.firstWeekContainsDate)&&void 0!==a?a:null===(d=g.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1,m=(0,i.constructFrom)(e,0);m.setFullYear(p+1,0,f),m.setHours(0,0,0,0);const v=(0,r.startOfWeek)(m,t),y=(0,i.constructFrom)(e,0);y.setFullYear(p,0,f),y.setHours(0,0,0,0);const C=(0,r.startOfWeek)(y,t);return h.getTime()>=v.getTime()?p+1:h.getTime()>=C.getTime()?p:p-1};var i=n(6828),r=n(1680),s=n(8144),o=n(3837)},9328:(e,t,n)=>{"use strict";t.getYear=function(e){return(0,i.toDate)(e).getFullYear()};var i=n(8144)},1203:(e,t,n)=>{"use strict";t.isAfter=function(e,t){const n=(0,i.toDate)(e),r=(0,i.toDate)(t);return n.getTime()>r.getTime()};var i=n(8144)},730:(e,t,n)=>{"use strict";t.isBefore=function(e,t){const n=(0,i.toDate)(e),r=(0,i.toDate)(t);return+n<+r};var i=n(8144)},5373:(e,t)=>{"use strict";t.isDate=function(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}},5037:(e,t,n)=>{"use strict";t.isEqual=function(e,t){const n=(0,i.toDate)(e),r=(0,i.toDate)(t);return+n===+r};var i=n(8144)},845:(e,t,n)=>{"use strict";t.isSameDay=function(e,t){const n=(0,i.startOfDay)(e),r=(0,i.startOfDay)(t);return+n===+r};var i=n(6092)},5665:(e,t,n)=>{"use strict";t.isSameMonth=function(e,t){const n=(0,i.toDate)(e),r=(0,i.toDate)(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()};var i=n(8144)},3867:(e,t,n)=>{"use strict";t.isSameQuarter=function(e,t){const n=(0,i.startOfQuarter)(e),r=(0,i.startOfQuarter)(t);return+n===+r};var i=n(946)},8938:(e,t,n)=>{"use strict";t.isSameYear=function(e,t){const n=(0,i.toDate)(e),r=(0,i.toDate)(t);return n.getFullYear()===r.getFullYear()};var i=n(8144)},631:(e,t,n)=>{"use strict";t.isValid=function(e){if(!(0,i.isDate)(e)&&"number"!==typeof e)return!1;const t=(0,r.toDate)(e);return!isNaN(Number(t))};var i=n(5373),r=n(8144)},1535:(e,t,n)=>{"use strict";t.isWithinInterval=function(e,t){const n=+(0,i.toDate)(e),[r,s]=[+(0,i.toDate)(t.start),+(0,i.toDate)(t.end)].sort(((e,t)=>e-t));return n>=r&&n<=s};var i=n(8144)},884:(e,t)=>{"use strict";t.buildFormatLongFn=function(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}},5826:(e,t)=>{"use strict";t.buildLocalizeFn=function(e){return(t,n)=>{let i;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,r=null!==n&&void 0!==n&&n.width?String(n.width):t;i=e.formattingValues[r]||e.formattingValues[t]}else{const t=e.defaultWidth,r=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;i=e.values[r]||e.values[t]}return i[e.argumentCallback?e.argumentCallback(t):t]}}},472:(e,t)=>{"use strict";t.buildMatchFn=function(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=n.width,r=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],s=t.match(r);if(!s)return null;const o=s[0],a=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(a,(e=>e.test(o))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(a,(e=>e.test(o)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(o.length)}}}},8600:(e,t)=>{"use strict";t.buildMatchPatternFn=function(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t.match(e.matchPattern);if(!i)return null;const r=i[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;return{value:o,rest:t.slice(r.length)}}}},7350:(e,t,n)=>{"use strict";t.enUS=void 0;var i=n(2936),r=n(6801),s=n(471),o=n(1671),a=n(2511);t.enUS={code:"en-US",formatDistance:i.formatDistance,formatLong:r.formatLong,formatRelative:s.formatRelative,localize:o.localize,match:a.match,options:{weekStartsOn:0,firstWeekContainsDate:1}}},2936:(e,t)=>{"use strict";t.formatDistance=void 0;const n={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};t.formatDistance=(e,t,i)=>{let r;const s=n[e];return r="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==i&&void 0!==i&&i.addSuffix?i.comparison&&i.comparison>0?"in "+r:r+" ago":r}},6801:(e,t,n)=>{"use strict";t.formatLong=void 0;var i=n(884);t.formatLong={date:(0,i.buildFormatLongFn)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,i.buildFormatLongFn)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,i.buildFormatLongFn)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})}},471:(e,t)=>{"use strict";t.formatRelative=void 0;const n={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};t.formatRelative=(e,t,i,r)=>n[e]},1671:(e,t,n)=>{"use strict";t.localize=void 0;var i=n(5826);t.localize={ordinalNumber:(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:(0,i.buildLocalizeFn)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,i.buildLocalizeFn)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:(0,i.buildLocalizeFn)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,i.buildLocalizeFn)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,i.buildLocalizeFn)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})}},2511:(e,t,n)=>{"use strict";t.match=void 0;var i=n(472),r=n(8600);t.match={ordinalNumber:(0,r.buildMatchPatternFn)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:(0,i.buildMatchFn)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,i.buildMatchFn)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:(0,i.buildMatchFn)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,i.buildMatchFn)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,i.buildMatchFn)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})}},4875:(e,t,n)=>{"use strict";t.max=function(e){let t;return e.forEach((function(e){const n=(0,i.toDate)(e);(void 0===t||t<n||isNaN(Number(n)))&&(t=n)})),t||new Date(NaN)};var i=n(8144)},6217:(e,t,n)=>{"use strict";t.min=function(e){let t;return e.forEach((e=>{const n=(0,i.toDate)(e);(!t||t>n||isNaN(+n))&&(t=n)})),t||new Date(NaN)};var i=n(8144)},9254:(e,t,n)=>{"use strict";Object.defineProperty(t,"longFormatters",{enumerable:!0,get:function(){return a.longFormatters}}),t.parse=function(e,t,n,v){var y,C,w,b,S,E,x,A,T,_,R,D,M,P;const I=(0,r.getDefaultOptions)(),N=null!==(y=null!==(C=null===v||void 0===v?void 0:v.locale)&&void 0!==C?C:I.locale)&&void 0!==y?y:s.defaultLocale,k=null!==(w=null!==(b=null!==(S=null!==(E=null===v||void 0===v?void 0:v.firstWeekContainsDate)&&void 0!==E?E:null===v||void 0===v||null===(x=v.locale)||void 0===x||null===(x=x.options)||void 0===x?void 0:x.firstWeekContainsDate)&&void 0!==S?S:I.firstWeekContainsDate)&&void 0!==b?b:null===(A=I.locale)||void 0===A||null===(A=A.options)||void 0===A?void 0:A.firstWeekContainsDate)&&void 0!==w?w:1,O=null!==(T=null!==(_=null!==(R=null!==(D=null===v||void 0===v?void 0:v.weekStartsOn)&&void 0!==D?D:null===v||void 0===v||null===(M=v.locale)||void 0===M||null===(M=M.options)||void 0===M?void 0:M.weekStartsOn)&&void 0!==R?R:I.weekStartsOn)&&void 0!==_?_:null===(P=I.locale)||void 0===P||null===(P=P.options)||void 0===P?void 0:P.weekStartsOn)&&void 0!==T?T:0;if(""===t)return""===e?(0,o.toDate)(n):(0,i.constructFrom)(n,NaN);const L={firstWeekContainsDate:k,weekStartsOn:O,locale:N},F=[new u.DateToSystemTimezoneSetter],B=t.match(h).map((e=>{const t=e[0];if(t in a.longFormatters){return(0,a.longFormatters[t])(e,N.formatLong)}return e})).join("").match(d),V=[];for(let r of B){null!==v&&void 0!==v&&v.useAdditionalWeekYearTokens||!(0,l.isProtectedWeekYearToken)(r)||(0,l.warnOrThrowProtectedError)(r,t,e),null!==v&&void 0!==v&&v.useAdditionalDayOfYearTokens||!(0,l.isProtectedDayOfYearToken)(r)||(0,l.warnOrThrowProtectedError)(r,t,e);const s=r[0],o=c.parsers[s];if(o){const{incompatibleTokens:t}=o;if(Array.isArray(t)){const e=V.find((e=>t.includes(e.token)||e.token===s));if(e)throw new RangeError("The format string mustn't contain `".concat(e.fullToken,"` and `").concat(r,"` at the same time"))}else if("*"===o.incompatibleTokens&&V.length>0)throw new RangeError("The format string mustn't contain `".concat(r,"` and any other token at the same time"));V.push({token:s,fullToken:r});const a=o.run(e,r,N.match,L);if(!a)return(0,i.constructFrom)(n,NaN);F.push(a.setter),e=a.rest}else{if(s.match(m))throw new RangeError("Format string contains an unescaped latin alphabet character `"+s+"`");if("''"===r?r="'":"'"===s&&(r=r.match(p)[1].replace(g,"'")),0!==e.indexOf(r))return(0,i.constructFrom)(n,NaN);e=e.slice(r.length)}}if(e.length>0&&f.test(e))return(0,i.constructFrom)(n,NaN);const G=F.map((e=>e.priority)).sort(((e,t)=>t-e)).filter(((e,t,n)=>n.indexOf(e)===t)).map((e=>F.filter((t=>t.priority===e)).sort(((e,t)=>t.subPriority-e.subPriority)))).map((e=>e[0]));let H=(0,o.toDate)(n);if(isNaN(H.getTime()))return(0,i.constructFrom)(n,NaN);const W={};for(const r of G){if(!r.validate(H,L))return(0,i.constructFrom)(n,NaN);const e=r.set(H,W,L);Array.isArray(e)?(H=e[0],Object.assign(W,e[1])):H=e}return(0,i.constructFrom)(n,H)},Object.defineProperty(t,"parsers",{enumerable:!0,get:function(){return c.parsers}});var i=n(6828),r=n(2356),s=n(6305),o=n(8144),a=n(7495),l=n(3842),c=n(4546),u=n(8319);const d=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,h=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,p=/^'([^]*?)'?$/,g=/''/g,f=/\S/,m=/[a-zA-Z]/},4585:(e,t,n)=>{"use strict";t.parseISO=function(e,t){var n;const h=null!==(n=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==n?n:2,p=function(e){const t={},n=e.split(r.dateTimeDelimiter);let i;if(n.length>2)return t;/:/.test(n[0])?i=n[0]:(t.date=n[0],i=n[1],r.timeZoneDelimiter.test(t.date)&&(t.date=e.split(r.timeZoneDelimiter)[0],i=e.substr(t.date.length,e.length)));if(i){const e=r.timezone.exec(i);e?(t.time=i.replace(e[1],""),t.timezone=e[1]):t.time=i}return t}(e);let g;if(p.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=e.match(n);if(!i)return{year:NaN,restDateString:""};const r=i[1]?parseInt(i[1]):null,s=i[2]?parseInt(i[2]):null;return{year:null===s?r:100*s,restDateString:e.slice((i[1]||i[2]).length)}}(p.date,h);g=function(e,t){if(null===t)return new Date(NaN);const n=e.match(s);if(!n)return new Date(NaN);const i=!!n[4],r=l(n[1]),o=l(n[2])-1,a=l(n[3]),c=l(n[4]),h=l(n[5])-1;if(i)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,c,h)?function(e,t,n){const i=new Date(0);i.setUTCFullYear(e,0,4);const r=i.getUTCDay()||7,s=7*(t-1)+n+1-r;return i.setUTCDate(i.getUTCDate()+s),i}(t,c,h):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(u[t]||(d(e)?29:28))}(t,o,a)&&function(e,t){return t>=1&&t<=(d(e)?366:365)}(t,r)?(e.setUTCFullYear(t,o,Math.max(r,a)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!g||isNaN(g.getTime()))return new Date(NaN);const f=g.getTime();let m,v=0;if(p.time&&(v=function(e){const t=e.match(o);if(!t)return NaN;const n=c(t[1]),r=c(t[2]),s=c(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,s))return NaN;return n*i.millisecondsInHour+r*i.millisecondsInMinute+1e3*s}(p.time),isNaN(v)))return new Date(NaN);if(!p.timezone){const e=new Date(f+v),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}if(m=function(e){if("Z"===e)return 0;const t=e.match(a);if(!t)return 0;const n="+"===t[1]?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,s))return NaN;return n*(r*i.millisecondsInHour+s*i.millisecondsInMinute)}(p.timezone),isNaN(m))return new Date(NaN);return new Date(f+v+m)};var i=n(4712);const r={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},s=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,o=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,a=/^([+-])(\d{2})(?::?(\d{2}))?$/;function l(e){return e?parseInt(e):1}function c(e){return e&&parseFloat(e.replace(",","."))||0}const u=[31,null,31,30,31,30,31,31,30,31,30,31];function d(e){return e%400===0||e%4===0&&e%100!==0}},2775:(e,t,n)=>{"use strict";t.Parser=void 0;var i=n(8319);t.Parser=class{run(e,t,n,r){const s=this.parse(e,t,n,r);return s?{setter:new i.ValueSetter(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,n){return!0}}},8319:(e,t,n)=>{"use strict";var i=n(5985).default;t.ValueSetter=t.Setter=t.DateToSystemTimezoneSetter=void 0;var r=n(3690),s=n(6828);class o{constructor(){i(this,"subPriority",0)}validate(e,t){return!0}}t.Setter=o;t.ValueSetter=class extends o{constructor(e,t,n,i,r){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=i,r&&(this.subPriority=r)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}};t.DateToSystemTimezoneSetter=class extends o{constructor(){super(...arguments),i(this,"priority",10),i(this,"subPriority",-1)}set(e,t){return t.timestampIsSet?e:(0,s.constructFrom)(e,(0,r.transpose)(e,Date))}}},1223:(e,t)=>{"use strict";t.timezonePatterns=t.numericPatterns=void 0;t.numericPatterns={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},t.timezonePatterns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/}},4546:(e,t,n)=>{"use strict";t.parsers=void 0;var i=n(9448),r=n(6604),s=n(868),o=n(5130),a=n(326),l=n(3374),c=n(9675),u=n(6376),d=n(4481),h=n(8417),p=n(1179),g=n(490),f=n(2916),m=n(4092),v=n(145),y=n(9002),C=n(5647),w=n(1971),b=n(7527),S=n(1001),E=n(4773),x=n(6186),A=n(9643),T=n(9932),_=n(4250),R=n(2330),D=n(4065),M=n(609),P=n(6760),I=n(2527),N=n(1808);t.parsers={G:new i.EraParser,y:new r.YearParser,Y:new s.LocalWeekYearParser,R:new o.ISOWeekYearParser,u:new a.ExtendedYearParser,Q:new l.QuarterParser,q:new c.StandAloneQuarterParser,M:new u.MonthParser,L:new d.StandAloneMonthParser,w:new h.LocalWeekParser,I:new p.ISOWeekParser,d:new g.DateParser,D:new f.DayOfYearParser,E:new m.DayParser,e:new v.LocalDayParser,c:new y.StandAloneLocalDayParser,i:new C.ISODayParser,a:new w.AMPMParser,b:new b.AMPMMidnightParser,B:new S.DayPeriodParser,h:new E.Hour1to12Parser,H:new x.Hour0to23Parser,K:new A.Hour0To11Parser,k:new T.Hour1To24Parser,m:new _.MinuteParser,s:new R.SecondParser,S:new D.FractionOfSecondParser,X:new M.ISOTimezoneWithZParser,x:new P.ISOTimezoneParser,t:new I.TimestampSecondsParser,T:new N.TimestampMillisecondsParser}},7527:(e,t,n)=>{"use strict";var i=n(5985).default;t.AMPMMidnightParser=void 0;var r=n(2775),s=n(375);class o extends r.Parser{constructor(){super(...arguments),i(this,"priority",80),i(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours((0,s.dayPeriodEnumToHours)(n),0,0,0),e}}t.AMPMMidnightParser=o},1971:(e,t,n)=>{"use strict";var i=n(5985).default;t.AMPMParser=void 0;var r=n(2775),s=n(375);class o extends r.Parser{constructor(){super(...arguments),i(this,"priority",80),i(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours((0,s.dayPeriodEnumToHours)(n),0,0,0),e}}t.AMPMParser=o},490:(e,t,n)=>{"use strict";var i=n(5985).default;t.DateParser=void 0;var r=n(1223),s=n(2775),o=n(375);const a=[31,28,31,30,31,30,31,31,30,31,30,31],l=[31,29,31,30,31,30,31,31,30,31,30,31];class c extends s.Parser{constructor(){super(...arguments),i(this,"priority",90),i(this,"subPriority",1),i(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"d":return(0,o.parseNumericPattern)(r.numericPatterns.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return(0,o.parseNDigits)(t.length,e)}}validate(e,t){const n=e.getFullYear(),i=(0,o.isLeapYearIndex)(n),r=e.getMonth();return i?t>=1&&t<=l[r]:t>=1&&t<=a[r]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}}t.DateParser=c},2916:(e,t,n)=>{"use strict";var i=n(5985).default;t.DayOfYearParser=void 0;var r=n(1223),s=n(2775),o=n(375);class a extends s.Parser{constructor(){super(...arguments),i(this,"priority",90),i(this,"subpriority",1),i(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,t,n){switch(t){case"D":case"DD":return(0,o.parseNumericPattern)(r.numericPatterns.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return(0,o.parseNDigits)(t.length,e)}}validate(e,t){const n=e.getFullYear();return(0,o.isLeapYearIndex)(n)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}}t.DayOfYearParser=a},4092:(e,t,n)=>{"use strict";var i=n(5985).default;t.DayParser=void 0;var r=n(7927),s=n(2775);class o extends s.Parser{constructor(){super(...arguments),i(this,"priority",90),i(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,i){return(e=(0,r.setDay)(e,n,i)).setHours(0,0,0,0),e}}t.DayParser=o},1001:(e,t,n)=>{"use strict";var i=n(5985).default;t.DayPeriodParser=void 0;var r=n(2775),s=n(375);class o extends r.Parser{constructor(){super(...arguments),i(this,"priority",80),i(this,"incompatibleTokens",["a","b","t","T"])}parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours((0,s.dayPeriodEnumToHours)(n),0,0,0),e}}t.DayPeriodParser=o},9448:(e,t,n)=>{"use strict";var i=n(5985).default;t.EraParser=void 0;var r=n(2775);class s extends r.Parser{constructor(){super(...arguments),i(this,"priority",140),i(this,"incompatibleTokens",["R","u","t","T"])}parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}}t.EraParser=s},326:(e,t,n)=>{"use strict";var i=n(5985).default;t.ExtendedYearParser=void 0;var r=n(2775),s=n(375);class o extends r.Parser{constructor(){super(...arguments),i(this,"priority",130),i(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,t){return"u"===t?(0,s.parseNDigitsSigned)(4,e):(0,s.parseNDigitsSigned)(t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}}t.ExtendedYearParser=o},4065:(e,t,n)=>{"use strict";var i=n(5985).default;t.FractionOfSecondParser=void 0;var r=n(2775),s=n(375);class o extends r.Parser{constructor(){super(...arguments),i(this,"priority",30),i(this,"incompatibleTokens",["t","T"])}parse(e,t){return(0,s.mapValue)((0,s.parseNDigits)(t.length,e),(e=>Math.trunc(e*Math.pow(10,3-t.length))))}set(e,t,n){return e.setMilliseconds(n),e}}t.FractionOfSecondParser=o},9643:(e,t,n)=>{"use strict";var i=n(5985).default;t.Hour0To11Parser=void 0;var r=n(1223),s=n(2775),o=n(375);class a extends s.Parser{constructor(){super(...arguments),i(this,"priority",70),i(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,t,n){switch(t){case"K":return(0,o.parseNumericPattern)(r.numericPatterns.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return(0,o.parseNDigits)(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}}t.Hour0To11Parser=a},6186:(e,t,n)=>{"use strict";var i=n(5985).default;t.Hour0to23Parser=void 0;var r=n(1223),s=n(2775),o=n(375);class a extends s.Parser{constructor(){super(...arguments),i(this,"priority",70),i(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,t,n){switch(t){case"H":return(0,o.parseNumericPattern)(r.numericPatterns.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return(0,o.parseNDigits)(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}}t.Hour0to23Parser=a},9932:(e,t,n)=>{"use strict";var i=n(5985).default;t.Hour1To24Parser=void 0;var r=n(1223),s=n(2775),o=n(375);class a extends s.Parser{constructor(){super(...arguments),i(this,"priority",70),i(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,t,n){switch(t){case"k":return(0,o.parseNumericPattern)(r.numericPatterns.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return(0,o.parseNDigits)(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const i=n<=24?n%24:n;return e.setHours(i,0,0,0),e}}t.Hour1To24Parser=a},4773:(e,t,n)=>{"use strict";var i=n(5985).default;t.Hour1to12Parser=void 0;var r=n(1223),s=n(2775),o=n(375);class a extends s.Parser{constructor(){super(...arguments),i(this,"priority",70),i(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,t,n){switch(t){case"h":return(0,o.parseNumericPattern)(r.numericPatterns.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return(0,o.parseNDigits)(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const i=e.getHours()>=12;return i&&n<12?e.setHours(n+12,0,0,0):i||12!==n?e.setHours(n,0,0,0):e.setHours(0,0,0,0),e}}t.Hour1to12Parser=a},5647:(e,t,n)=>{"use strict";var i=n(5985).default;t.ISODayParser=void 0;var r=n(6028),s=n(2775),o=n(375);class a extends s.Parser{constructor(){super(...arguments),i(this,"priority",90),i(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,t,n){const i=e=>0===e?7:e;switch(t){case"i":case"ii":return(0,o.parseNDigits)(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return(0,o.mapValue)(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return(0,o.mapValue)(n.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return(0,o.mapValue)(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i);default:return(0,o.mapValue)(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return(e=(0,r.setISODay)(e,n)).setHours(0,0,0,0),e}}t.ISODayParser=a},6760:(e,t,n)=>{"use strict";var i=n(5985).default;t.ISOTimezoneParser=void 0;var r=n(6828),s=n(3783),o=n(1223),a=n(2775),l=n(375);class c extends a.Parser{constructor(){super(...arguments),i(this,"priority",10),i(this,"incompatibleTokens",["t","T","X"])}parse(e,t){switch(t){case"x":return(0,l.parseTimezonePattern)(o.timezonePatterns.basicOptionalMinutes,e);case"xx":return(0,l.parseTimezonePattern)(o.timezonePatterns.basic,e);case"xxxx":return(0,l.parseTimezonePattern)(o.timezonePatterns.basicOptionalSeconds,e);case"xxxxx":return(0,l.parseTimezonePattern)(o.timezonePatterns.extendedOptionalSeconds,e);default:return(0,l.parseTimezonePattern)(o.timezonePatterns.extended,e)}}set(e,t,n){return t.timestampIsSet?e:(0,r.constructFrom)(e,e.getTime()-(0,s.getTimezoneOffsetInMilliseconds)(e)-n)}}t.ISOTimezoneParser=c},609:(e,t,n)=>{"use strict";var i=n(5985).default;t.ISOTimezoneWithZParser=void 0;var r=n(6828),s=n(3783),o=n(1223),a=n(2775),l=n(375);class c extends a.Parser{constructor(){super(...arguments),i(this,"priority",10),i(this,"incompatibleTokens",["t","T","x"])}parse(e,t){switch(t){case"X":return(0,l.parseTimezonePattern)(o.timezonePatterns.basicOptionalMinutes,e);case"XX":return(0,l.parseTimezonePattern)(o.timezonePatterns.basic,e);case"XXXX":return(0,l.parseTimezonePattern)(o.timezonePatterns.basicOptionalSeconds,e);case"XXXXX":return(0,l.parseTimezonePattern)(o.timezonePatterns.extendedOptionalSeconds,e);default:return(0,l.parseTimezonePattern)(o.timezonePatterns.extended,e)}}set(e,t,n){return t.timestampIsSet?e:(0,r.constructFrom)(e,e.getTime()-(0,s.getTimezoneOffsetInMilliseconds)(e)-n)}}t.ISOTimezoneWithZParser=c},1179:(e,t,n)=>{"use strict";var i=n(5985).default;t.ISOWeekParser=void 0;var r=n(4944),s=n(2611),o=n(1223),a=n(2775),l=n(375);class c extends a.Parser{constructor(){super(...arguments),i(this,"priority",100),i(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,t,n){switch(t){case"I":return(0,l.parseNumericPattern)(o.numericPatterns.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return(0,l.parseNDigits)(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return(0,s.startOfISOWeek)((0,r.setISOWeek)(e,n))}}t.ISOWeekParser=c},5130:(e,t,n)=>{"use strict";var i=n(5985).default;t.ISOWeekYearParser=void 0;var r=n(2611),s=n(6828),o=n(2775),a=n(375);class l extends o.Parser{constructor(){super(...arguments),i(this,"priority",130),i(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,t){return"R"===t?(0,a.parseNDigitsSigned)(4,e):(0,a.parseNDigitsSigned)(t.length,e)}set(e,t,n){const i=(0,s.constructFrom)(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),(0,r.startOfISOWeek)(i)}}t.ISOWeekYearParser=l},145:(e,t,n)=>{"use strict";var i=n(5985).default;t.LocalDayParser=void 0;var r=n(7927),s=n(2775),o=n(375);class a extends s.Parser{constructor(){super(...arguments),i(this,"priority",90),i(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,t,n,i){const r=e=>{const t=7*Math.floor((e-1)/7);return(e+i.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return(0,o.mapValue)((0,o.parseNDigits)(t.length,e),r);case"eo":return(0,o.mapValue)(n.ordinalNumber(e,{unit:"day"}),r);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,i){return(e=(0,r.setDay)(e,n,i)).setHours(0,0,0,0),e}}t.LocalDayParser=a},8417:(e,t,n)=>{"use strict";var i=n(5985).default;t.LocalWeekParser=void 0;var r=n(7705),s=n(1680),o=n(1223),a=n(2775),l=n(375);class c extends a.Parser{constructor(){super(...arguments),i(this,"priority",100),i(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,t,n){switch(t){case"w":return(0,l.parseNumericPattern)(o.numericPatterns.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return(0,l.parseNDigits)(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,i){return(0,s.startOfWeek)((0,r.setWeek)(e,n,i),i)}}t.LocalWeekParser=c},868:(e,t,n)=>{"use strict";var i=n(5985).default;t.LocalWeekYearParser=void 0;var r=n(1388),s=n(1680),o=n(2775),a=n(375);class l extends o.Parser{constructor(){super(...arguments),i(this,"priority",130),i(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,t,n){const i=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return(0,a.mapValue)((0,a.parseNDigits)(4,e),i);case"Yo":return(0,a.mapValue)(n.ordinalNumber(e,{unit:"year"}),i);default:return(0,a.mapValue)((0,a.parseNDigits)(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,i){const o=(0,r.getWeekYear)(e,i);if(n.isTwoDigitYear){const t=(0,a.normalizeTwoDigitYear)(n.year,o);return e.setFullYear(t,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),(0,s.startOfWeek)(e,i)}const l="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(l,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),(0,s.startOfWeek)(e,i)}}t.LocalWeekYearParser=l},4250:(e,t,n)=>{"use strict";var i=n(5985).default;t.MinuteParser=void 0;var r=n(1223),s=n(2775),o=n(375);class a extends s.Parser{constructor(){super(...arguments),i(this,"priority",60),i(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"m":return(0,o.parseNumericPattern)(r.numericPatterns.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return(0,o.parseNDigits)(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}}t.MinuteParser=a},6376:(e,t,n)=>{"use strict";var i=n(5985).default;t.MonthParser=void 0;var r=n(1223),s=n(2775),o=n(375);class a extends s.Parser{constructor(){super(...arguments),i(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),i(this,"priority",110)}parse(e,t,n){const i=e=>e-1;switch(t){case"M":return(0,o.mapValue)((0,o.parseNumericPattern)(r.numericPatterns.month,e),i);case"MM":return(0,o.mapValue)((0,o.parseNDigits)(2,e),i);case"Mo":return(0,o.mapValue)(n.ordinalNumber(e,{unit:"month"}),i);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}t.MonthParser=a},3374:(e,t,n)=>{"use strict";var i=n(5985).default;t.QuarterParser=void 0;var r=n(2775),s=n(375);class o extends r.Parser{constructor(){super(...arguments),i(this,"priority",120),i(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"Q":case"QQ":return(0,s.parseNDigits)(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}}t.QuarterParser=o},2330:(e,t,n)=>{"use strict";var i=n(5985).default;t.SecondParser=void 0;var r=n(1223),s=n(2775),o=n(375);class a extends s.Parser{constructor(){super(...arguments),i(this,"priority",50),i(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"s":return(0,o.parseNumericPattern)(r.numericPatterns.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return(0,o.parseNDigits)(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}}t.SecondParser=a},9002:(e,t,n)=>{"use strict";var i=n(5985).default;t.StandAloneLocalDayParser=void 0;var r=n(7927),s=n(2775),o=n(375);class a extends s.Parser{constructor(){super(...arguments),i(this,"priority",90),i(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,t,n,i){const r=e=>{const t=7*Math.floor((e-1)/7);return(e+i.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return(0,o.mapValue)((0,o.parseNDigits)(t.length,e),r);case"co":return(0,o.mapValue)(n.ordinalNumber(e,{unit:"day"}),r);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,i){return(e=(0,r.setDay)(e,n,i)).setHours(0,0,0,0),e}}t.StandAloneLocalDayParser=a},4481:(e,t,n)=>{"use strict";var i=n(5985).default;t.StandAloneMonthParser=void 0;var r=n(1223),s=n(2775),o=n(375);class a extends s.Parser{constructor(){super(...arguments),i(this,"priority",110),i(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,t,n){const i=e=>e-1;switch(t){case"L":return(0,o.mapValue)((0,o.parseNumericPattern)(r.numericPatterns.month,e),i);case"LL":return(0,o.mapValue)((0,o.parseNDigits)(2,e),i);case"Lo":return(0,o.mapValue)(n.ordinalNumber(e,{unit:"month"}),i);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}t.StandAloneMonthParser=a},9675:(e,t,n)=>{"use strict";var i=n(5985).default;t.StandAloneQuarterParser=void 0;var r=n(2775),s=n(375);class o extends r.Parser{constructor(){super(...arguments),i(this,"priority",120),i(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"q":case"qq":return(0,s.parseNDigits)(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}}t.StandAloneQuarterParser=o},1808:(e,t,n)=>{"use strict";var i=n(5985).default;t.TimestampMillisecondsParser=void 0;var r=n(6828),s=n(2775),o=n(375);class a extends s.Parser{constructor(){super(...arguments),i(this,"priority",20),i(this,"incompatibleTokens","*")}parse(e){return(0,o.parseAnyDigitsSigned)(e)}set(e,t,n){return[(0,r.constructFrom)(e,n),{timestampIsSet:!0}]}}t.TimestampMillisecondsParser=a},2527:(e,t,n)=>{"use strict";var i=n(5985).default;t.TimestampSecondsParser=void 0;var r=n(6828),s=n(2775),o=n(375);class a extends s.Parser{constructor(){super(...arguments),i(this,"priority",40),i(this,"incompatibleTokens","*")}parse(e){return(0,o.parseAnyDigitsSigned)(e)}set(e,t,n){return[(0,r.constructFrom)(e,1e3*n),{timestampIsSet:!0}]}}t.TimestampSecondsParser=a},6604:(e,t,n)=>{"use strict";var i=n(5985).default;t.YearParser=void 0;var r=n(2775),s=n(375);class o extends r.Parser{constructor(){super(...arguments),i(this,"priority",130),i(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,t,n){const i=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return(0,s.mapValue)((0,s.parseNDigits)(4,e),i);case"yo":return(0,s.mapValue)(n.ordinalNumber(e,{unit:"year"}),i);default:return(0,s.mapValue)((0,s.parseNDigits)(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const i=e.getFullYear();if(n.isTwoDigitYear){const t=(0,s.normalizeTwoDigitYear)(n.year,i);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const r="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}t.YearParser=o},375:(e,t,n)=>{"use strict";t.dayPeriodEnumToHours=function(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}},t.isLeapYearIndex=function(e){return e%400===0||e%4===0&&e%100!==0},t.mapValue=function(e,t){if(!e)return e;return{value:t(e.value),rest:e.rest}},t.normalizeTwoDigitYear=function(e,t){const n=t>0,i=n?t:1-t;let r;if(i<=50)r=e||100;else{const t=i+50;r=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return n?r:1-r},t.parseAnyDigitsSigned=function(e){return s(r.numericPatterns.anyDigitsSigned,e)},t.parseNDigits=function(e,t){switch(e){case 1:return s(r.numericPatterns.singleDigit,t);case 2:return s(r.numericPatterns.twoDigits,t);case 3:return s(r.numericPatterns.threeDigits,t);case 4:return s(r.numericPatterns.fourDigits,t);default:return s(new RegExp("^\\d{1,"+e+"}"),t)}},t.parseNDigitsSigned=function(e,t){switch(e){case 1:return s(r.numericPatterns.singleDigitSigned,t);case 2:return s(r.numericPatterns.twoDigitsSigned,t);case 3:return s(r.numericPatterns.threeDigitsSigned,t);case 4:return s(r.numericPatterns.fourDigitsSigned,t);default:return s(new RegExp("^-?\\d{1,"+e+"}"),t)}},t.parseNumericPattern=s,t.parseTimezonePattern=function(e,t){const n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};const r="+"===n[1]?1:-1,s=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:r*(s*i.millisecondsInHour+o*i.millisecondsInMinute+a*i.millisecondsInSecond),rest:t.slice(n[0].length)}};var i=n(4712),r=n(1223);function s(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}},2381:(e,t,n)=>{"use strict";t.set=function(e,t){let n=(0,s.toDate)(e);if(isNaN(+n))return(0,i.constructFrom)(e,NaN);null!=t.year&&n.setFullYear(t.year);null!=t.month&&(n=(0,r.setMonth)(n,t.month));null!=t.date&&n.setDate(t.date);null!=t.hours&&n.setHours(t.hours);null!=t.minutes&&n.setMinutes(t.minutes);null!=t.seconds&&n.setSeconds(t.seconds);null!=t.milliseconds&&n.setMilliseconds(t.milliseconds);return n};var i=n(6828),r=n(7947),s=n(8144)},7927:(e,t,n)=>{"use strict";t.setDay=function(e,t,n){var o,a,l,c,u,d;const h=(0,s.getDefaultOptions)(),p=null!==(o=null!==(a=null!==(l=null!==(c=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==c?c:null===n||void 0===n||null===(u=n.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==l?l:h.weekStartsOn)&&void 0!==a?a:null===(d=h.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==o?o:0,g=(0,r.toDate)(e),f=g.getDay(),m=(t%7+7)%7,v=7-p,y=t<0||t>6?t-(f+v)%7:(m+v)%7-(f+v)%7;return(0,i.addDays)(g,y)};var i=n(561),r=n(8144),s=n(3837)},1330:(e,t,n)=>{"use strict";t.setHours=function(e,t){const n=(0,i.toDate)(e);return n.setHours(t),n};var i=n(8144)},6028:(e,t,n)=>{"use strict";t.setISODay=function(e,t){const n=(0,s.toDate)(e),o=(0,r.getISODay)(n),a=t-o;return(0,i.addDays)(n,a)};var i=n(561),r=n(9480),s=n(8144)},4944:(e,t,n)=>{"use strict";t.setISOWeek=function(e,t){const n=(0,r.toDate)(e),s=(0,i.getISOWeek)(n)-t;return n.setDate(n.getDate()-7*s),n};var i=n(4180),r=n(8144)},8420:(e,t,n)=>{"use strict";t.setMinutes=function(e,t){const n=(0,i.toDate)(e);return n.setMinutes(t),n};var i=n(8144)},7947:(e,t,n)=>{"use strict";t.setMonth=function(e,t){const n=(0,s.toDate)(e),o=n.getFullYear(),a=n.getDate(),l=(0,i.constructFrom)(e,0);l.setFullYear(o,t,15),l.setHours(0,0,0,0);const c=(0,r.getDaysInMonth)(l);return n.setMonth(t,Math.min(a,c)),n};var i=n(6828),r=n(2295),s=n(8144)},8093:(e,t,n)=>{"use strict";t.setQuarter=function(e,t){const n=(0,r.toDate)(e),s=Math.trunc(n.getMonth()/3)+1,o=t-s;return(0,i.setMonth)(n,n.getMonth()+3*o)};var i=n(7947),r=n(8144)},516:(e,t,n)=>{"use strict";t.setSeconds=function(e,t){const n=(0,i.toDate)(e);return n.setSeconds(t),n};var i=n(8144)},7705:(e,t,n)=>{"use strict";t.setWeek=function(e,t,n){const s=(0,r.toDate)(e),o=(0,i.getWeek)(s,n)-t;return s.setDate(s.getDate()-7*o),s};var i=n(189),r=n(8144)},8060:(e,t,n)=>{"use strict";t.setYear=function(e,t){const n=(0,r.toDate)(e);if(isNaN(+n))return(0,i.constructFrom)(e,NaN);return n.setFullYear(t),n};var i=n(6828),r=n(8144)},6092:(e,t,n)=>{"use strict";t.startOfDay=function(e){const t=(0,i.toDate)(e);return t.setHours(0,0,0,0),t};var i=n(8144)},2611:(e,t,n)=>{"use strict";t.startOfISOWeek=function(e){return(0,i.startOfWeek)(e,{weekStartsOn:1})};var i=n(1680)},8726:(e,t,n)=>{"use strict";t.startOfISOWeekYear=function(e){const t=(0,i.getISOWeekYear)(e),n=(0,s.constructFrom)(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),(0,r.startOfISOWeek)(n)};var i=n(5629),r=n(2611),s=n(6828)},6236:(e,t,n)=>{"use strict";t.startOfMonth=function(e){const t=(0,i.toDate)(e);return t.setDate(1),t.setHours(0,0,0,0),t};var i=n(8144)},946:(e,t,n)=>{"use strict";t.startOfQuarter=function(e){const t=(0,i.toDate)(e),n=t.getMonth(),r=n-n%3;return t.setMonth(r,1),t.setHours(0,0,0,0),t};var i=n(8144)},1680:(e,t,n)=>{"use strict";t.startOfWeek=function(e,t){var n,s,o,a,l,c;const u=(0,r.getDefaultOptions)(),d=null!==(n=null!==(s=null!==(o=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(l=t.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==o?o:u.weekStartsOn)&&void 0!==s?s:null===(c=u.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0,h=(0,i.toDate)(e),p=h.getDay(),g=(p<d?7:0)+p-d;return h.setDate(h.getDate()-g),h.setHours(0,0,0,0),h};var i=n(8144),r=n(3837)},6145:(e,t,n)=>{"use strict";t.startOfWeekYear=function(e,t){var n,a,l,c,u,d;const h=(0,o.getDefaultOptions)(),p=null!==(n=null!==(a=null!==(l=null!==(c=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==c?c:null===t||void 0===t||null===(u=t.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==l?l:h.firstWeekContainsDate)&&void 0!==a?a:null===(d=h.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1,g=(0,r.getWeekYear)(e,t),f=(0,i.constructFrom)(e,0);f.setFullYear(g,0,p),f.setHours(0,0,0,0);return(0,s.startOfWeek)(f,t)};var i=n(6828),r=n(1388),s=n(1680),o=n(3837)},2553:(e,t,n)=>{"use strict";t.startOfYear=function(e){const t=(0,i.toDate)(e),n=(0,r.constructFrom)(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n};var i=n(8144),r=n(6828)},8088:(e,t,n)=>{"use strict";t.subDays=function(e,t){return(0,i.addDays)(e,-t)};var i=n(561)},3716:(e,t,n)=>{"use strict";t.subMonths=function(e,t){return(0,i.addMonths)(e,-t)};var i=n(5865)},4270:(e,t,n)=>{"use strict";t.subQuarters=function(e,t){return(0,i.addQuarters)(e,-t)};var i=n(8711)},7374:(e,t,n)=>{"use strict";t.subWeeks=function(e,t){return(0,i.addWeeks)(e,-t)};var i=n(5969)},7033:(e,t,n)=>{"use strict";t.subYears=function(e,t){return(0,i.addYears)(e,-t)};var i=n(6594)},8144:(e,t)=>{"use strict";t.toDate=function(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new e.constructor(+e):"number"===typeof e||"[object Number]"===t||"string"===typeof e||"[object String]"===t?new Date(e):new Date(NaN)}},3690:(e,t,n)=>{"use strict";t.transpose=function(e,t){const n=t instanceof Date?(0,i.constructFrom)(t,0):new t(0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n};var i=n(6828)},4157:function(e,t,n){var i,r,s;r=[],void 0===(s="function"===typeof(i=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function i(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){l(i.response,t,n)},i.onerror=function(){console.error("could not download file")},i.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(i){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,t,n){var a=o.URL||o.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?s(l):r(l.href)?i(e,t,n):s(l,l.target="_blank")):(l.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(l.href)}),4e4),setTimeout((function(){s(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,o),n);else if(r(e))i(e,n,o);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){s(a)}))}}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return i(e,t,n);var s="application/octet-stream"===e.type,l=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&l||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},u.readAsDataURL(e)}else{var d=o.URL||o.webkitURL,h=d.createObjectURL(e);r?r.location=h:location.href=h,r=null,setTimeout((function(){d.revokeObjectURL(h)}),4e4)}});o.saveAs=l.saveAs=l,e.exports=l})?i.apply(t,r):i)||(e.exports=s)},5914:(e,t,n)=>{"use strict";var i=n(2804),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return i.isMemo(e)?o:a[e.$$typeof]||r}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[i.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;e.exports=function e(t,n,i){if("string"!==typeof n){if(g){var r=p(n);r&&r!==g&&e(t,r,i)}var o=u(n);d&&(o=o.concat(d(n)));for(var a=l(t),f=l(n),m=0;m<o.length;++m){var v=o[m];if(!s[v]&&(!i||!i[v])&&(!f||!f[v])&&(!a||!a[v])){var y=h(n,v);try{c(t,v,y)}catch(C){}}}}return t}},8184:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.suspense_list"):60120,f=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,C=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case u:case d:case s:case a:case o:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case f:case l:return e;default:return t}}case r:return t}}}function S(e){return b(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=i,t.ForwardRef=h,t.Fragment=s,t.Lazy=m,t.Memo=f,t.Portal=r,t.Profiler=a,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||b(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===s},t.isLazy=function(e){return b(e)===m},t.isMemo=function(e){return b(e)===f},t.isPortal=function(e){return b(e)===r},t.isProfiler=function(e){return b(e)===a},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===d||e===a||e===o||e===p||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===f||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===C||e.$$typeof===w||e.$$typeof===v)},t.typeOf=b},2804:(e,t,n)=>{"use strict";e.exports=n(8184)},3407:function(e,t,n){!function(e){"use strict";function t(e){return null===e||void 0===e}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}function o(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var a,l=function(e){function t(t){var n=this.constructor,i=e.call(this,t)||this;return Object.defineProperty(i,"name",{value:n.name,enumerable:!1}),s(i,n.prototype),o(i),i}return r(t,e),t}(Error);class c extends l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;super(e),this.message=e}getKind(){return this.constructor.kind}}c.kind="Exception";class u extends c{}u.kind="ArgumentException";class d extends c{}d.kind="IllegalArgumentException";class h{constructor(e){if(this.binarizer=e,null===e)throw new d("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,i){const r=this.binarizer.getLuminanceSource().crop(e,t,n,i);return new h(this.binarizer.createBinarizer(r))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new h(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new h(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class p extends c{static getChecksumInstance(){return new p}}p.kind="ChecksumException";class g{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class f{static arraycopy(e,t,n,i,r){for(;r--;)n[i++]=e[t++]}static currentTimeMillis(){return Date.now()}}class m extends c{}m.kind="IndexOutOfBoundsException";class v extends m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;super(t),this.index=e,this.message=t}}v.kind="ArrayIndexOutOfBoundsException";class y{static fill(e,t){for(let n=0,i=e.length;n<i;n++)e[n]=t}static fillWithin(e,t,n,i){y.rangeCheck(e.length,t,n);for(let r=t;r<n;r++)e[r]=i}static rangeCheck(e,t,n){if(t>n)throw new d("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new v(t);if(n>e)throw new v(n)}static asList(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}static create(e,t,n){return Array.from({length:e}).map((e=>Array.from({length:t}).fill(n)))}static createInt32Array(e,t,n){return Array.from({length:e}).map((e=>Int32Array.from({length:t}).fill(n)))}static equals(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const i=n-t,r=new Int32Array(i);return f.arraycopy(e,t,r,0,i),r}static binarySearch(e,t,n){void 0===n&&(n=y.numberComparator);let i=0,r=e.length-1;for(;i<=r;){const s=r+i>>1,o=n(t,e[s]);if(o>0)i=s+1;else{if(!(o<0))return s;r=s-1}}return-i-1}static numberComparator(e,t){return e-t}}class C{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let n=31;return t=e<<16,0!==t&&(n-=16,e=t),t=e<<8,0!==t&&(n-=8,e=t),t=e<<4,0!==t&&(n-=4,e=t),t=e<<2,0!==t&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}C.MIN_VALUE_32_BITS=-2147483648,C.MAX_VALUE=Number.MAX_SAFE_INTEGER;class w{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=void 0===t||null===t?w.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=w.makeArray(e);f.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let i=Math.floor(e/32),r=n[i];r&=~((1<<(31&e))-1);const s=n.length;for(;0===r;){if(++i===s)return t;r=n[i]}const o=32*i+C.numberOfTrailingZeros(r);return o>t?t:o}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let i=Math.floor(e/32),r=~n[i];r&=~((1<<(31&e))-1);const s=n.length;for(;0===r;){if(++i===s)return t;r=~n[i]}const o=32*i+C.numberOfTrailingZeros(r);return o>t?t:o}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new d;if(t===e)return;t--;const n=Math.floor(e/32),i=Math.floor(t/32),r=this.bits;for(let s=n;s<=i;s++){const o=(2<<(s<i?31:31&t))-(1<<(s>n?0:31&e));r[s]|=o}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new d;if(t===e)return!0;t--;const i=Math.floor(e/32),r=Math.floor(t/32),s=this.bits;for(let o=i;o<=r;o++){const a=(2<<(o<r?31:31&t))-(1<<(o>i?0:31&e))&4294967295;if((s[o]&a)!==(n?a:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new d("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new d("Sizes don't match");const t=this.bits;for(let n=0,i=t.length;n<i;n++)t[n]^=e.bits[n]}toBytes(e,t,n,i){for(let r=0;r<i;r++){let i=0;for(let t=0;t<8;t++)this.get(e)&&(i|=1<<7-t),e++;t[n+r]=i}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,i=this.bits;for(let r=0;r<n;r++){let n=i[r];n=n>>1&1431655765|(1431655765&n)<<1,n=n>>2&858993459|(858993459&n)<<2,n=n>>4&252645135|(252645135&n)<<4,n=n>>8&16711935|(16711935&n)<<8,n=n>>16&65535|(65535&n)<<16,e[t-r]=n}if(this.size!==32*n){const t=32*n-this.size;let i=e[0]>>>t;for(let r=1;r<n;r++){const n=e[r];i|=n<<32-t,e[r-1]=i,i=n>>>t}e[n-1]=i}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof w))return!1;const t=e;return this.size===t.size&&y.equals(this.bits,t.bits)}hashCode(){return 31*this.size+y.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new w(this.size,this.bits.slice())}}!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(a||(a={}));var b,S=a;class E extends c{static getFormatInstance(){return new E}}E.kind="FormatException",function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(b||(b={}));class x{constructor(e,t,n){this.valueIdentifier=e,this.name=n,this.values="number"===typeof t?Int32Array.from([t]):t;for(var i=arguments.length,r=new Array(i>3?i-3:0),s=3;s<i;s++)r[s-3]=arguments[s];this.otherEncodingNames=r,x.VALUE_IDENTIFIER_TO_ECI.set(e,this),x.NAME_TO_ECI.set(n,this);const o=this.values;for(let a=0,l=o.length;a!==l;a++){const e=o[a];x.VALUES_TO_ECI.set(e,this)}for(const a of r)x.NAME_TO_ECI.set(a,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new E("incorect value");const t=x.VALUES_TO_ECI.get(e);if(void 0===t)throw new E("incorect value");return t}static getCharacterSetECIByName(e){const t=x.NAME_TO_ECI.get(e);if(void 0===t)throw new E("incorect value");return t}equals(e){if(!(e instanceof x))return!1;const t=e;return this.getName()===t.getName()}}x.VALUE_IDENTIFIER_TO_ECI=new Map,x.VALUES_TO_ECI=new Map,x.NAME_TO_ECI=new Map,x.Cp437=new x(b.Cp437,Int32Array.from([0,2]),"Cp437"),x.ISO8859_1=new x(b.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),x.ISO8859_2=new x(b.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),x.ISO8859_3=new x(b.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),x.ISO8859_4=new x(b.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),x.ISO8859_5=new x(b.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),x.ISO8859_6=new x(b.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),x.ISO8859_7=new x(b.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),x.ISO8859_8=new x(b.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),x.ISO8859_9=new x(b.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),x.ISO8859_10=new x(b.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),x.ISO8859_11=new x(b.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),x.ISO8859_13=new x(b.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),x.ISO8859_14=new x(b.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),x.ISO8859_15=new x(b.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),x.ISO8859_16=new x(b.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),x.SJIS=new x(b.SJIS,20,"SJIS","Shift_JIS"),x.Cp1250=new x(b.Cp1250,21,"Cp1250","windows-1250"),x.Cp1251=new x(b.Cp1251,22,"Cp1251","windows-1251"),x.Cp1252=new x(b.Cp1252,23,"Cp1252","windows-1252"),x.Cp1256=new x(b.Cp1256,24,"Cp1256","windows-1256"),x.UnicodeBigUnmarked=new x(b.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),x.UTF8=new x(b.UTF8,26,"UTF8","UTF-8"),x.ASCII=new x(b.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),x.Big5=new x(b.Big5,28,"Big5"),x.GB18030=new x(b.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),x.EUC_KR=new x(b.EUC_KR,30,"EUC_KR","EUC-KR");class A extends c{}A.kind="UnsupportedOperationException";class T{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!T.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"===typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof x?e:x.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(T.isDecodeFallbackSupported(n)){let t="";for(let n=0,i=e.length;n<i;n++){let i=e[n].toString(16);i.length<2&&(i="0"+i),t+="%"+i}return decodeURIComponent(t)}if(n.equals(x.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new A("Encoding ".concat(this.encodingName(t)," not supported by fallback."))}static isDecodeFallbackSupported(e){return e.equals(x.UTF8)||e.equals(x.ISO8859_1)||e.equals(x.ASCII)}static encodeFallback(e){const t=btoa(unescape(encodeURIComponent(e))).split(""),n=[];for(let i=0;i<t.length;i++)n.push(t[i].charCodeAt(0));return new Uint8Array(n)}}class _{static castAsNonUtf8Char(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t?t.getName():this.ISO88591;return T.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(null!==t&&void 0!==t&&void 0!==t.get(S.CHARACTER_SET))return t.get(S.CHARACTER_SET).toString();const n=e.length;let i=!0,r=!0,s=!0,o=0,a=0,l=0,c=0,u=0,d=0,h=0,p=0,g=0,f=0,m=0;const v=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let y=0;y<n&&(i||r||s);y++){const t=255&e[y];s&&(o>0?0===(128&t)?s=!1:o--:0!==(128&t)&&(0===(64&t)?s=!1:(o++,0===(32&t)?a++:(o++,0===(16&t)?l++:(o++,0===(8&t)?c++:s=!1))))),i&&(t>127&&t<160?i=!1:t>159&&(t<192||215===t||247===t)&&m++),r&&(u>0?t<64||127===t||t>252?r=!1:u--:128===t||160===t||t>239?r=!1:t>160&&t<224?(d++,p=0,h++,h>g&&(g=h)):t>127?(u++,h=0,p++,p>f&&(f=p)):(h=0,p=0))}return s&&o>0&&(s=!1),r&&u>0&&(r=!1),s&&(v||a+l+c>0)?_.UTF8:r&&(_.ASSUME_SHIFT_JIS||g>=3||f>=3)?_.SHIFT_JIS:i&&r?2===g&&2===d||10*m>=n?_.SHIFT_JIS:_.ISO88591:i?_.ISO88591:r?_.SHIFT_JIS:s?_.UTF8:_.PLATFORM_DEFAULT_ENCODING}static format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=-1;function s(e,t,i,s,o,a){if("%%"===e)return"%";if(void 0===n[++r])return;e=s?parseInt(s.substr(1)):void 0;let l,c=o?parseInt(o.substr(1)):void 0;switch(a){case"s":l=n[r];break;case"c":l=n[r][0];break;case"f":l=parseFloat(n[r]).toFixed(e);break;case"p":l=parseFloat(n[r]).toPrecision(e);break;case"e":l=parseFloat(n[r]).toExponential(e);break;case"x":l=parseInt(n[r]).toString(c||16);break;case"d":l=parseFloat(parseInt(n[r],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(i),d=i&&i[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==t?l+d:d+l;return l}let o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,s)}static getBytes(e,t){return T.encode(e,t)}static getCharCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}_.SHIFT_JIS=x.SJIS.getName(),_.GB2312="GB2312",_.ISO88591=x.ISO8859_1.getName(),_.EUC_JP="EUC_JP",_.UTF8=x.UTF8.getName(),_.PLATFORM_DEFAULT_ENCODING=_.UTF8,_.ASSUME_SHIFT_JIS=!1;class R{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=_.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let i=t;t<t+n;i++)this.append(e[i]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class D{constructor(e,t,n,i){if(this.width=e,this.height=t,this.rowSize=n,this.bits=i,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new d("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((e+31)/32)),this.rowSize=n,void 0!==i&&null!==i||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,i=new D(n,t);for(let r=0;r<t;r++){const t=e[r];for(let e=0;e<n;e++)t[e]&&i.set(e,r)}return i}static parseFromString(e,t,n){if(null===e)throw new d("stringRepresentation cannot be null");const i=new Array(e.length);let r=0,s=0,o=-1,a=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(r>s){if(-1===o)o=r-s;else if(r-s!==o)throw new d("row lengths do not match");s=r,a++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,i[r]=!0,r++;else{if(e.substring(l,l+n.length)!==n)throw new d("illegal character encountered: "+e.substring(l));l+=n.length,i[r]=!1,r++}if(r>s){if(-1===o)o=r-s;else if(r-s!==o)throw new d("row lengths do not match");a++}const c=new D(o,a);for(let u=0;u<r;u++)i[u]&&c.set(Math.floor(u%o),Math.floor(u/o));return c}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new d("input matrix dimensions do not match");const t=new w(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits;for(let r=0,s=this.height;r<s;r++){const s=r*n,o=e.getRow(r,t).getBitArray();for(let e=0;e<n;e++)i[s+e]^=o[e]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,i){if(t<0||e<0)throw new d("Left and top must be nonnegative");if(i<1||n<1)throw new d("Height and width must be at least 1");const r=e+n,s=t+i;if(s>this.height||r>this.width)throw new d("The region must fit inside the matrix");const o=this.rowSize,a=this.bits;for(let l=t;l<s;l++){const t=l*o;for(let n=e;n<r;n++)a[t+Math.floor(n/32)]|=1<<(31&n)&4294967295}}getRow(e,t){null===t||void 0===t||t.getSize()<this.width?t=new w(this.width):t.clear();const n=this.rowSize,i=this.bits,r=e*n;for(let s=0;s<n;s++)t.setBulk(32*s,i[r+s]);return t}setRow(e,t){f.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new w(e),i=new w(e);for(let r=0,s=Math.floor((t+1)/2);r<s;r++)n=this.getRow(r,n),i=this.getRow(t-1-r,i),n.reverse(),i.reverse(),this.setRow(r,i),this.setRow(t-1-r,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,i=this.bits;let r=e,s=t,o=-1,a=-1;for(let l=0;l<t;l++)for(let e=0;e<n;e++){const t=i[l*n+e];if(0!==t){if(l<s&&(s=l),l>a&&(a=l),32*e<r){let n=0;for(;0===(t<<31-n&4294967295);)n++;32*e+n<r&&(r=32*e+n)}if(32*e+31>o){let n=31;for(;t>>>n===0;)n--;32*e+n>o&&(o=32*e+n)}}}return o<r||a<s?null:Int32Array.from([r,s,o-r+1,a-s+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&0===t[n];)n++;if(n===t.length)return null;const i=n/e;let r=n%e*32;const s=t[n];let o=0;for(;0===(s<<31-o&4294967295);)o++;return r+=o,Int32Array.from([r,i])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&0===t[n];)n--;if(n<0)return null;const i=Math.floor(n/e);let r=32*Math.floor(n%e);const s=t[n];let o=31;for(;s>>>o===0;)o--;return r+=o,Int32Array.from([r,i])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof D))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&y.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+y.hashCode(this.bits),e}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"X ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"  ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return this.buildToString(e,t,n)}buildToString(e,t,n){let i=new R;for(let r=0,s=this.height;r<s;r++){for(let n=0,s=this.width;n<s;n++)i.append(this.get(n,r)?e:t);i.append(n)}return i.toString()}clone(){return new D(this.width,this.height,this.rowSize,this.bits.slice())}}class M extends c{static getNotFoundInstance(){return new M}}M.kind="NotFoundException";class P extends g{constructor(e){super(e),this.luminances=P.EMPTY,this.buckets=new Int32Array(P.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),i=n.getWidth();void 0===t||null===t||t.getSize()<i?t=new w(i):t.clear(),this.initArrays(i);const r=n.getRow(e,this.luminances),s=this.buckets;for(let a=0;a<i;a++)s[(255&r[a])>>P.LUMINANCE_SHIFT]++;const o=P.estimateBlackPoint(s);if(i<3)for(let a=0;a<i;a++)(255&r[a])<o&&t.set(a);else{let e=255&r[0],n=255&r[1];for(let s=1;s<i-1;s++){const i=255&r[s+1];(4*n-e-i)/2<o&&t.set(s),e=n,n=i}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),i=new D(t,n);this.initArrays(t);const r=this.buckets;for(let a=1;a<5;a++){const i=Math.floor(n*a/5),s=e.getRow(i,this.luminances),o=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<o;e++)r[(255&s[e])>>P.LUMINANCE_SHIFT]++}const s=P.estimateBlackPoint(r),o=e.getMatrix();for(let a=0;a<n;a++){const e=a*t;for(let n=0;n<t;n++)(255&o[e+n])<s&&i.set(n,a)}return i}createBinarizer(e){return new P(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<P.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,i=0,r=0;for(let c=0;c<t;c++)e[c]>r&&(i=c,r=e[c]),e[c]>n&&(n=e[c]);let s=0,o=0;for(let c=0;c<t;c++){const t=c-i,n=e[c]*t*t;n>o&&(s=c,o=n)}if(i>s){const e=i;i=s,s=e}if(s-i<=t/16)throw new M;let a=s-1,l=-1;for(let c=s-1;c>i;c--){const t=c-i,r=t*t*(s-c)*(n-e[c]);r>l&&(a=c,l=r)}return a<<P.LUMINANCE_SHIFT}}P.LUMINANCE_BITS=5,P.LUMINANCE_SHIFT=8-P.LUMINANCE_BITS,P.LUMINANCE_BUCKETS=1<<P.LUMINANCE_BITS,P.EMPTY=Uint8ClampedArray.from([0]);class I extends P{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=I.MINIMUM_DIMENSION&&n>=I.MINIMUM_DIMENSION){const i=e.getMatrix();let r=t>>I.BLOCK_SIZE_POWER;0!==(t&I.BLOCK_SIZE_MASK)&&r++;let s=n>>I.BLOCK_SIZE_POWER;0!==(n&I.BLOCK_SIZE_MASK)&&s++;const o=I.calculateBlackPoints(i,r,s,t,n),a=new D(t,n);I.calculateThresholdForBlock(i,r,s,t,n,o,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new I(e)}static calculateThresholdForBlock(e,t,n,i,r,s,o){const a=r-I.BLOCK_SIZE,l=i-I.BLOCK_SIZE;for(let c=0;c<n;c++){let r=c<<I.BLOCK_SIZE_POWER;r>a&&(r=a);const u=I.cap(c,2,n-3);for(let n=0;n<t;n++){let a=n<<I.BLOCK_SIZE_POWER;a>l&&(a=l);const c=I.cap(n,2,t-3);let d=0;for(let e=-2;e<=2;e++){const t=s[u+e];d+=t[c-2]+t[c-1]+t[c]+t[c+1]+t[c+2]}const h=d/25;I.thresholdBlock(e,a,r,h,i,o)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,i,r,s){for(let o=0,a=n*r+t;o<I.BLOCK_SIZE;o++,a+=r)for(let r=0;r<I.BLOCK_SIZE;r++)(255&e[a+r])<=i&&s.set(t+r,n+o)}static calculateBlackPoints(e,t,n,i,r){const s=r-I.BLOCK_SIZE,o=i-I.BLOCK_SIZE,a=new Array(n);for(let l=0;l<n;l++){a[l]=new Int32Array(t);let n=l<<I.BLOCK_SIZE_POWER;n>s&&(n=s);for(let r=0;r<t;r++){let t=r<<I.BLOCK_SIZE_POWER;t>o&&(t=o);let s=0,c=255,u=0;for(let r=0,o=n*i+t;r<I.BLOCK_SIZE;r++,o+=i){for(let t=0;t<I.BLOCK_SIZE;t++){const n=255&e[o+t];s+=n,n<c&&(c=n),n>u&&(u=n)}if(u-c>I.MIN_DYNAMIC_RANGE)for(r++,o+=i;r<I.BLOCK_SIZE;r++,o+=i)for(let t=0;t<I.BLOCK_SIZE;t++)s+=255&e[o+t]}let d=s>>2*I.BLOCK_SIZE_POWER;if(u-c<=I.MIN_DYNAMIC_RANGE&&(d=c/2,l>0&&r>0)){const e=(a[l-1][r]+2*a[l][r-1]+a[l-1][r-1])/4;c<e&&(d=e)}a[l][r]=d}}return a}}I.BLOCK_SIZE_POWER=3,I.BLOCK_SIZE=1<<I.BLOCK_SIZE_POWER,I.BLOCK_SIZE_MASK=I.BLOCK_SIZE-1,I.MINIMUM_DIMENSION=5*I.BLOCK_SIZE,I.MIN_DYNAMIC_RANGE=24;class N{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,i){throw new A("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new A("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new A("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new R;for(let n=0;n<this.height;n++){const i=this.getRow(n,e);for(let e=0;e<this.width;e++){const n=255&i[e];let r;r=n<64?"#":n<128?"+":n<192?".":" ",t.append(r)}t.append("\n")}return t.toString()}}class k extends N{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),i=this.getWidth();for(let r=0;r<i;r++)n[r]=255-(255&n[r]);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let i=0;i<t;i++)n[i]=255-(255&e[i]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,i){return new k(this.delegate.crop(e,t,n,i))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new k(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new k(this.delegate.rotateCounterClockwise45())}}class O extends N{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=O.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return O.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const i=new Uint8ClampedArray(t*n);for(let r=0,s=0,o=e.length;r<o;r+=4,s++){let t;t=0===e[r+3]?255:306*e[r]+601*e[r+1]+117*e[r+2]+512>>10,i[s]=t}return i}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth(),i=e*n;return null===t?t=this.buffer.slice(i,i+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(i,i+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,i){return super.crop(e,t,n,i),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),i=e*O.DEGREE_TO_RADIANS,r=this.canvas.width,s=this.canvas.height,o=Math.ceil(Math.abs(Math.cos(i))*r+Math.abs(Math.sin(i))*s),a=Math.ceil(Math.abs(Math.sin(i))*r+Math.abs(Math.cos(i))*s);return t.width=o,t.height=a,n.translate(o/2,a/2),n.rotate(i),n.drawImage(this.canvas,r/-2,s/-2),this.buffer=O.makeBufferFromCanvasImageData(t),this}invert(){return new k(this)}}O.DEGREE_TO_RADIANS=Math.PI/180;class L{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var F,B=(globalThis||n.g||self||window?(globalThis||n.g||self||window||void 0).__awaiter:void 0)||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(t){s(t)}}function a(e){try{l(i.throw(e))}catch(t){s(t)}}function l(e){e.done?n(e.value):r(e.value).then(o,a)}l((i=i.apply(e,t||[])).next())}))};class V{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0;this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return B(this,void 0,void 0,(function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const e="video"===n.kind?"videoinput":n.kind;if("videoinput"!==e)continue;const i={deviceId:n.deviceId||n.id,label:n.label||"Video device ".concat(t.length+1),kind:e,groupId:n.groupId};t.push(i)}return t}))}getVideoInputDevices(){return B(this,void 0,void 0,(function*(){return(yield this.listVideoInputDevices()).map((e=>new L(e.deviceId,e.label)))}))}findDeviceById(e){return B(this,void 0,void 0,(function*(){const t=yield this.listVideoInputDevices();return t?t.find((t=>t.deviceId===e)):null}))}decodeFromInputVideoDevice(e,t){return B(this,void 0,void 0,(function*(){return yield this.decodeOnceFromVideoDevice(e,t)}))}decodeOnceFromVideoDevice(e,t){return B(this,void 0,void 0,(function*(){let n;this.reset(),n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const i={video:n};return yield this.decodeOnceFromConstraints(i,t)}))}decodeOnceFromConstraints(e,t){return B(this,void 0,void 0,(function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)}))}decodeOnceFromStream(e,t){return B(this,void 0,void 0,(function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)}))}decodeFromInputVideoDeviceContinuously(e,t,n){return B(this,void 0,void 0,(function*(){return yield this.decodeFromVideoDevice(e,t,n)}))}decodeFromVideoDevice(e,t,n){return B(this,void 0,void 0,(function*(){let i;i=e?{deviceId:{exact:e}}:{facingMode:"environment"};const r={video:i};return yield this.decodeFromConstraints(r,t,n)}))}decodeFromConstraints(e,t,n){return B(this,void 0,void 0,(function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(i,t,n)}))}decodeFromStream(e,t,n){return B(this,void 0,void 0,(function*(){this.reset();const i=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(i,n)}))}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return B(this,void 0,void 0,(function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n}))}playVideoOnLoadAsync(e){return new Promise(((t,n)=>this.playVideoOnLoad(e,(()=>t()))))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return B(this,void 0,void 0,(function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch(t){console.warn("It was not possible to play the video.")}}))}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new u("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new u("element with id '".concat(e,"' must be an ").concat(t," element"));return n}decodeFromImage(e,t){if(!e&&!t)throw new u("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(void 0===e&&void 0===t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new u("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let n;return this.imageElement=t,n=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new u("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new u("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,t);return n.src=e,i}_decodeOnLoadImage(e){return new Promise(((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)}))}_decodeOnLoadVideo(e){return B(this,void 0,void 0,(function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)}))}_decodeOnLoadVideoContinuously(e,t){return B(this,void 0,void 0,(function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)}))}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return"undefined"===typeof e&&(t=document.createElement("img"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"===typeof document||(t=document.createElement("video"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._stopAsyncDecode=!1;const i=(r,s)=>{if(this._stopAsyncDecode)return s(new M("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{r(this.decode(e))}catch(o){if(t&&o instanceof M||(o instanceof p||o instanceof E)&&n)return setTimeout(i,this._timeBetweenDecodingAttempts,r,s);s(o)}};return new Promise(((e,t)=>i(e,t)))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const i=this.decode(e);t(i,null),setTimeout(n,this.timeBetweenScansMillis)}catch(i){t(null,i),(i instanceof p||i instanceof E||i instanceof M)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.captureCanvasContext;t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new O(t),i=new I(n);return new h(i)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,i;return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=i+"px",t.width=n,t.height=i,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach((e=>e.stop())),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class G{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?0:8*t.length,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:f.currentTimeMillis();this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=i,this.format=r,this.timestamp=s,this.text=e,this.rawBytes=t,this.numBits=void 0===n||null===n?null===t||void 0===t?0:8*t.length:n,this.resultPoints=i,this.format=r,this.resultMetadata=null,this.timestamp=void 0===s||null===s?f.currentTimeMillis():s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const n=new Array(t.length+e.length);f.arraycopy(t,0,n,0,t.length),f.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(F||(F={}));var H,W=F;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(H||(H={}));var j,U,z,Y,q,K,X=H;class Q{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=r,this.structuredAppendParity=s,this.numBits=void 0===e||null===e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Z{exp(e){return this.expTable[e]}log(e){if(0===e)throw new d;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class ${constructor(e,t){if(0===t.length)throw new d;this.field=e;const n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-e),f.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let n;if(1===e){n=0;for(let e=0,i=t.length;e!==i;e++){const i=t[e];n=Z.addOrSubtract(n,i)}return n}n=t[0];const i=t.length,r=this.field;for(let s=1;s<i;s++)n=Z.addOrSubtract(r.multiply(e,n),t[s]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const e=t;t=n,n=e}let i=new Int32Array(n.length);const r=n.length-t.length;f.arraycopy(n,0,i,0,r);for(let s=r;s<n.length;s++)i[s]=Z.addOrSubtract(t[s-r],n[s]);return new $(this.field,i)}multiply(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,i=e.coefficients,r=i.length,s=new Int32Array(n+r-1),o=this.field;for(let a=0;a<n;a++){const e=t[a];for(let t=0;t<r;t++)s[a+t]=Z.addOrSubtract(s[a+t],o.multiply(e,i[t]))}return new $(o,s)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,n=this.field,i=new Int32Array(t),r=this.coefficients;for(let s=0;s<t;s++)i[s]=n.multiply(r[s],e);return new $(n,i)}multiplyByMonomial(e,t){if(e<0)throw new d;if(0===t)return this.field.getZero();const n=this.coefficients,i=n.length,r=new Int32Array(i+e),s=this.field;for(let o=0;o<i;o++)r[o]=s.multiply(n[o],t);return new $(s,r)}divide(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new d("Divide by 0");const t=this.field;let n=t.getZero(),i=this;const r=e.getCoefficient(e.getDegree()),s=t.inverse(r);for(;i.getDegree()>=e.getDegree()&&!i.isZero();){const r=i.getDegree()-e.getDegree(),o=t.multiply(i.getCoefficient(i.getDegree()),s),a=e.multiplyByMonomial(r,o),l=t.buildMonomial(r,o);n=n.addOrSubtract(l),i=i.addOrSubtract(a)}return[n,i]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){const t=this.field.log(n);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class J extends c{}J.kind="ArithmeticException";class ee extends Z{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const i=new Int32Array(t);let r=1;for(let o=0;o<t;o++)i[o]=r,r*=2,r>=t&&(r^=e,r&=t-1);this.expTable=i;const s=new Int32Array(t);for(let o=0;o<t-1;o++)s[i[o]]=o;this.logTable=s,this.zero=new $(this,Int32Array.from([0])),this.one=new $(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new d;if(0===t)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new $(this,n)}inverse(e){if(0===e)throw new J;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+C.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ee.AZTEC_DATA_12=new ee(4201,4096,1),ee.AZTEC_DATA_10=new ee(1033,1024,1),ee.AZTEC_DATA_6=new ee(67,64,1),ee.AZTEC_PARAM=new ee(19,16,1),ee.QR_CODE_FIELD_256=new ee(285,256,0),ee.DATA_MATRIX_FIELD_256=new ee(301,256,1),ee.AZTEC_DATA_8=ee.DATA_MATRIX_FIELD_256,ee.MAXICODE_FIELD_64=ee.AZTEC_DATA_6;class te extends c{}te.kind="ReedSolomonException";class ne extends c{}ne.kind="IllegalStateException";class ie{constructor(e){this.field=e}decode(e,t){const n=this.field,i=new $(n,e),r=new Int32Array(t);let s=!0;for(let h=0;h<t;h++){const e=i.evaluateAt(n.exp(h+n.getGeneratorBase()));r[r.length-1-h]=e,0!==e&&(s=!1)}if(s)return;const o=new $(n,r),a=this.runEuclideanAlgorithm(n.buildMonomial(t,1),o,t),l=a[0],c=a[1],u=this.findErrorLocations(l),d=this.findErrorMagnitudes(c,u);for(let h=0;h<u.length;h++){const t=e.length-1-n.log(u[h]);if(t<0)throw new te("Bad error location");e[t]=ee.addOrSubtract(e[t],d[h])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const n=e;e=t,t=n}const i=this.field;let r=e,s=t,o=i.getZero(),a=i.getOne();for(;s.getDegree()>=(n/2|0);){let e=r,t=o;if(r=s,o=a,r.isZero())throw new te("r_{i-1} was zero");s=e;let n=i.getZero();const l=r.getCoefficient(r.getDegree()),c=i.inverse(l);for(;s.getDegree()>=r.getDegree()&&!s.isZero();){const e=s.getDegree()-r.getDegree(),t=i.multiply(s.getCoefficient(s.getDegree()),c);n=n.addOrSubtract(i.buildMonomial(e,t)),s=s.addOrSubtract(r.multiplyByMonomial(e,t))}if(a=n.multiply(o).addOrSubtract(t),s.getDegree()>=r.getDegree())throw new ne("Division algorithm failed to reduce polynomial?")}const l=a.getCoefficient(0);if(0===l)throw new te("sigmaTilde(0) was zero");const c=i.inverse(l);return[a.multiplyScalar(c),s.multiplyScalar(c)]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let i=0;const r=this.field;for(let s=1;s<r.getSize()&&i<t;s++)0===e.evaluateAt(s)&&(n[i]=r.inverse(s),i++);if(i!==t)throw new te("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,i=new Int32Array(n),r=this.field;for(let s=0;s<n;s++){const o=r.inverse(t[s]);let a=1;for(let e=0;e<n;e++)if(s!==e){const n=r.multiply(t[e],o),i=0===(1&n)?1|n:-2&n;a=r.multiply(a,i)}i[s]=r.multiply(e.evaluateAt(o),r.inverse(a)),0!==r.getGeneratorBase()&&(i[s]=r.multiply(i[s],o))}return i}}!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(j||(j={}));class re{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),i=this.correctBits(n),r=re.convertBoolArrayToByteArray(i),s=re.getEncodedData(i),o=new Q(r,s,null,null);return o.setNumBits(i.length),o}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=j.UPPER,i=j.UPPER,r="",s=0;for(;s<t;)if(i===j.BINARY){if(t-s<5)break;let o=re.readCode(e,s,5);if(s+=5,0===o){if(t-s<11)break;o=re.readCode(e,s,11)+31,s+=11}for(let n=0;n<o;n++){if(t-s<8){s=t;break}const n=re.readCode(e,s,8);r+=_.castAsNonUtf8Char(n),s+=8}i=n}else{let o=i===j.DIGIT?4:5;if(t-s<o)break;let a=re.readCode(e,s,o);s+=o;let l=re.getCharacter(i,a);l.startsWith("CTRL_")?(n=i,i=re.getTable(l.charAt(5)),"L"===l.charAt(6)&&(n=i)):(r+=l,i=n)}return r}static getTable(e){switch(e){case"L":return j.LOWER;case"P":return j.PUNCT;case"M":return j.MIXED;case"D":return j.DIGIT;case"B":return j.BINARY;default:return j.UPPER}}static getCharacter(e,t){switch(e){case j.UPPER:return re.UPPER_TABLE[t];case j.LOWER:return re.LOWER_TABLE[t];case j.MIXED:return re.MIXED_TABLE[t];case j.PUNCT:return re.PUNCT_TABLE[t];case j.DIGIT:return re.DIGIT_TABLE[t];default:throw new ne("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=ee.AZTEC_DATA_10):(n=12,t=ee.AZTEC_DATA_12);let i=this.ddata.getNbDatablocks(),r=e.length/n;if(r<i)throw new E;let s=e.length%n,o=new Int32Array(r);for(let h=0;h<r;h++,s+=n)o[h]=re.readCode(e,s,n);try{new ie(t).decode(o,r-i)}catch(d){throw new E(d)}let a=(1<<n)-1,l=0;for(let h=0;h<i;h++){let e=o[h];if(0===e||e===a)throw new E;1!==e&&e!==a-1||l++}let c=new Array(i*n-l),u=0;for(let h=0;h<i;h++){let e=o[h];if(1===e||e===a-1)c.fill(e>1,u,u+n-1),u+=n-1;else for(let t=n-1;t>=0;--t)c[u++]=0!==(e&1<<t)}return c}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(t?11:14)+4*n,r=new Int32Array(i),s=new Array(this.totalBitsInLayer(n,t));if(t)for(let o=0;o<r.length;o++)r[o]=o;else{let e=i+1+2*C.truncDivision(C.truncDivision(i,2)-1,15),t=i/2,n=C.truncDivision(e,2);for(let i=0;i<t;i++){let e=i+C.truncDivision(i,15);r[t-i-1]=n-e-1,r[t+i]=n+e+1}}for(let o=0,a=0;o<n;o++){let l=4*(n-o)+(t?9:12),c=2*o,u=i-1-c;for(let t=0;t<l;t++){let n=2*t;for(let i=0;i<2;i++)s[a+n+i]=e.get(r[c+i],r[c+t]),s[a+2*l+n+i]=e.get(r[c+t],r[u-i]),s[a+4*l+n+i]=e.get(r[u-i],r[u-t]),s[a+6*l+n+i]=e.get(r[u-t],r[c+i])}a+=8*l}return s}static readCode(e,t,n){let i=0;for(let r=t;r<t+n;r++)i<<=1,e[r]&&(i|=1);return i}static readByte(e,t){let n=e.length-t;return n>=8?re.readCode(e,t,8):re.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=re.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}re.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],re.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],re.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],re.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],re.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class se{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,i){const r=e-n,s=t-i;return Math.sqrt(r*r+s*s)}static sum(e){let t=0;for(let n=0,i=e.length;n!==i;n++)t+=e[n];return t}}class oe{static floatToIntBits(e){return e}}oe.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ae{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof ae){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*oe.floatToIntBits(this.x)+oe.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]);let r,s,o;if(n>=t&&n>=i?(s=e[0],r=e[1],o=e[2]):i>=n&&i>=t?(s=e[1],r=e[0],o=e[2]):(s=e[2],r=e[0],o=e[1]),this.crossProductZ(r,s,o)<0){const e=r;r=o,o=e}e[0]=r,e[1]=s,e[2]=o}static distance(e,t){return se.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const i=t.x,r=t.y;return(n.x-i)*(e.y-r)-(n.y-r)*(e.x-i)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ce extends le{constructor(e,t,n,i,r){super(e,t),this.compact=n,this.nbDatablocks=i,this.nbLayers=r}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ue{constructor(e,t,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),void 0!==t&&null!==t||(t=ue.INIT_SIZE),void 0!==n&&null!==n||(n=e.getWidth()/2|0),void 0!==i&&null!==i||(i=e.getHeight()/2|0);const r=t/2|0;if(this.leftInit=n-r,this.rightInit=n+r,this.upInit=i-r,this.downInit=i+r,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new M}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,i=this.downInit,r=!1,s=!0,o=!1,a=!1,l=!1,c=!1,u=!1;const d=this.width,h=this.height;for(;s;){s=!1;let p=!0;for(;(p||!a)&&t<d;)p=this.containsBlackPoint(n,i,t,!1),p?(t++,s=!0,a=!0):a||t++;if(t>=d){r=!0;break}let g=!0;for(;(g||!l)&&i<h;)g=this.containsBlackPoint(e,t,i,!0),g?(i++,s=!0,l=!0):l||i++;if(i>=h){r=!0;break}let f=!0;for(;(f||!c)&&e>=0;)f=this.containsBlackPoint(n,i,e,!1),f?(e--,s=!0,c=!0):c||e--;if(e<0){r=!0;break}let m=!0;for(;(m||!u)&&n>=0;)m=this.containsBlackPoint(e,t,n,!0),m?(n--,s=!0,u=!0):u||n--;if(n<0){r=!0;break}s&&(o=!0)}if(!r&&o){const r=t-e;let s=null;for(let t=1;null===s&&t<r;t++)s=this.getBlackPointOnSegment(e,i-t,e+t,i);if(null==s)throw new M;let o=null;for(let t=1;null===o&&t<r;t++)o=this.getBlackPointOnSegment(e,n+t,e+t,n);if(null==o)throw new M;let a=null;for(let e=1;null===a&&e<r;e++)a=this.getBlackPointOnSegment(t,n+e,t-e,n);if(null==a)throw new M;let l=null;for(let e=1;null===l&&e<r;e++)l=this.getBlackPointOnSegment(t,i-e,t-e,i);if(null==l)throw new M;return this.centerEdges(l,s,a,o)}throw new M}getBlackPointOnSegment(e,t,n,i){const r=se.round(se.distance(e,t,n,i)),s=(n-e)/r,o=(i-t)/r,a=this.image;for(let l=0;l<r;l++){const n=se.round(e+l*s),i=se.round(t+l*o);if(a.get(n,i))return new ae(n,i)}return null}centerEdges(e,t,n,i){const r=e.getX(),s=e.getY(),o=t.getX(),a=t.getY(),l=n.getX(),c=n.getY(),u=i.getX(),d=i.getY(),h=ue.CORR;return r<this.width/2?[new ae(u-h,d+h),new ae(o+h,a+h),new ae(l-h,c-h),new ae(r+h,s-h)]:[new ae(u+h,d+h),new ae(o+h,a-h),new ae(l-h,c+h),new ae(r-h,s-h)]}containsBlackPoint(e,t,n,i){const r=this.image;if(i){for(let s=e;s<=t;s++)if(r.get(s,n))return!0}else for(let s=e;s<=t;s++)if(r.get(n,s))return!0;return!1}}ue.INIT_SIZE=10,ue.CORR=1;class de{static checkAndNudgePoints(e,t){const n=e.getWidth(),i=e.getHeight();let r=!0;for(let s=0;s<t.length&&r;s+=2){const e=Math.floor(t[s]),o=Math.floor(t[s+1]);if(e<-1||e>n||o<-1||o>i)throw new M;r=!1,-1===e?(t[s]=0,r=!0):e===n&&(t[s]=n-1,r=!0),-1===o?(t[s+1]=0,r=!0):o===i&&(t[s+1]=i-1,r=!0)}r=!0;for(let s=t.length-2;s>=0&&r;s-=2){const e=Math.floor(t[s]),o=Math.floor(t[s+1]);if(e<-1||e>n||o<-1||o>i)throw new M;r=!1,-1===e?(t[s]=0,r=!0):e===n&&(t[s]=n-1,r=!0),-1===o?(t[s+1]=0,r=!0):o===i&&(t[s+1]=i-1,r=!0)}}}class he{constructor(e,t,n,i,r,s,o,a,l){this.a11=e,this.a21=t,this.a31=n,this.a12=i,this.a22=r,this.a32=s,this.a13=o,this.a23=a,this.a33=l}static quadrilateralToQuadrilateral(e,t,n,i,r,s,o,a,l,c,u,d,h,p,g,f){const m=he.quadrilateralToSquare(e,t,n,i,r,s,o,a);return he.squareToQuadrilateral(l,c,u,d,h,p,g,f).times(m)}transformPoints(e){const t=e.length,n=this.a11,i=this.a12,r=this.a13,s=this.a21,o=this.a22,a=this.a23,l=this.a31,c=this.a32,u=this.a33;for(let d=0;d<t;d+=2){const t=e[d],h=e[d+1],p=r*t+a*h+u;e[d]=(n*t+s*h+l)/p,e[d+1]=(i*t+o*h+c)/p}}transformPointsWithValues(e,t){const n=this.a11,i=this.a12,r=this.a13,s=this.a21,o=this.a22,a=this.a23,l=this.a31,c=this.a32,u=this.a33,d=e.length;for(let h=0;h<d;h++){const d=e[h],p=t[h],g=r*d+a*p+u;e[h]=(n*d+s*p+l)/g,t[h]=(i*d+o*p+c)/g}}static squareToQuadrilateral(e,t,n,i,r,s,o,a){const l=e-n+r-o,c=t-i+s-a;if(0===l&&0===c)return new he(n-e,r-n,e,i-t,s-i,t,0,0,1);{const u=n-r,d=o-r,h=i-s,p=a-s,g=u*p-d*h,f=(l*p-d*c)/g,m=(u*c-l*h)/g;return new he(n-e+f*n,o-e+m*o,e,i-t+f*i,a-t+m*a,t,f,m,1)}}static quadrilateralToSquare(e,t,n,i,r,s,o,a){return he.squareToQuadrilateral(e,t,n,i,r,s,o,a).buildAdjoint()}buildAdjoint(){return new he(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new he(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class pe extends de{sampleGrid(e,t,n,i,r,s,o,a,l,c,u,d,h,p,g,f,m,v,y){const C=he.quadrilateralToQuadrilateral(i,r,s,o,a,l,c,u,d,h,p,g,f,m,v,y);return this.sampleGridWithTransform(e,t,n,C)}sampleGridWithTransform(e,t,n,i){if(t<=0||n<=0)throw new M;const r=new D(t,n),s=new Float32Array(2*t);for(let a=0;a<n;a++){const t=s.length,n=a+.5;for(let e=0;e<t;e+=2)s[e]=e/2+.5,s[e+1]=n;i.transformPoints(s),de.checkAndNudgePoints(e,s);try{for(let n=0;n<t;n+=2)e.get(Math.floor(s[n]),Math.floor(s[n+1]))&&r.set(n/2,a)}catch(o){throw new M}}return r}}class ge{static setGridSampler(e){ge.gridSampler=e}static getInstance(){return ge.gridSampler}}ge.gridSampler=new pe;class fe{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new ae(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class me{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let e=n[0];n[0]=n[2],n[2]=e}this.extractParameters(n);let i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),r=this.getMatrixCornerPoints(n);return new ce(i,r,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new M;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let i=0;for(let s=0;s<4;s++){let e=n[(this.shift+s)%4];this.compact?(i<<=7,i+=e>>1&127):(i<<=10,i+=(e>>2&992)+(e>>1&31))}let r=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=1+(r>>6),this.nbDataBlocks=1+(63&r)):(this.nbLayers=1+(r>>11),this.nbDataBlocks=1+(2047&r))}getRotation(e,t){let n=0;e.forEach(((e,i,r)=>{n=(e>>t-2<<1)+(1&e)+(n<<3)})),n=((1&n)<<11)+(n>>1);for(let i=0;i<4;i++)if(C.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new M}getCorrectedParameterData(e,t){let n,i;t?(n=7,i=2):(n=10,i=4);let r=n-i,s=new Int32Array(n);for(let l=n-1;l>=0;--l)s[l]=15&e,e>>=4;try{new ie(ee.AZTEC_PARAM).decode(s,r)}catch(a){throw new M}let o=0;for(let l=0;l<i;l++)o=(o<<4)+s[l];return o}getBullsEyeCorners(e){let t=e,n=e,i=e,r=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,s,1,-1),o=this.getFirstDifferent(n,s,1,1),a=this.getFirstDifferent(i,s,-1,1),l=this.getFirstDifferent(r,s,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(r,t)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(e,o,a,l))break}t=e,n=o,i=a,r=l,s=!s}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new M;this.compact=5===this.nbCenterLayers;let o=new ae(t.getX()+.5,t.getY()-.5),a=new ae(n.getX()+.5,n.getY()+.5),l=new ae(i.getX()-.5,i.getY()+.5),c=new ae(r.getX()-.5,r.getY()-.5);return this.expandSquare([o,a,l,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,i;try{let r=new ue(this.image).detect();e=r[0],t=r[1],n=r[2],i=r[3]}catch(o){let r=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new fe(r+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new fe(r+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new fe(r-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new fe(r-7,s-7),!1,-1,-1).toResultPoint()}let r=se.round((e.getX()+i.getX()+t.getX()+n.getX())/4),s=se.round((e.getY()+i.getY()+t.getY()+n.getY())/4);try{let o=new ue(this.image,15,r,s).detect();e=o[0],t=o[1],n=o[2],i=o[3]}catch(o){e=this.getFirstDifferent(new fe(r+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new fe(r+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new fe(r-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new fe(r-7,s-7),!1,-1,-1).toResultPoint()}return r=se.round((e.getX()+i.getX()+t.getX()+n.getX())/4),s=se.round((e.getY()+i.getY()+t.getY()+n.getY())/4),new fe(r,s)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,i,r){let s=ge.getInstance(),o=this.getDimension(),a=o/2-this.nbCenterLayers,l=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,a,a,l,a,l,l,a,l,t.getX(),t.getY(),n.getX(),n.getY(),i.getX(),i.getY(),r.getX(),r.getY())}sampleLine(e,t,n){let i=0,r=this.distanceResultPoint(e,t),s=r/n,o=e.getX(),a=e.getY(),l=s*(t.getX()-e.getX())/r,c=s*(t.getY()-e.getY())/r;for(let u=0;u<n;u++)this.image.get(se.round(o+u*l),se.round(a+u*c))&&(i|=1<<n-u-1);return i}isWhiteOrBlackRectangle(e,t,n,i){let r=3;e=new fe(e.getX()-r,e.getY()+r),t=new fe(t.getX()-r,t.getY()-r),n=new fe(n.getX()+r,n.getY()-r),i=new fe(i.getX()+r,i.getY()+r);let s=this.getColor(i,e);if(0===s)return!1;let o=this.getColor(e,t);return o===s&&(o=this.getColor(t,n),o===s&&(o=this.getColor(n,i),o===s))}getColor(e,t){let n=this.distancePoint(e,t),i=(t.getX()-e.getX())/n,r=(t.getY()-e.getY())/n,s=0,o=e.getX(),a=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(n);for(let d=0;d<c;d++)o+=i,a+=r,this.image.get(se.round(o),se.round(a))!==l&&s++;let u=s/n;return u>.1&&u<.9?0:u<=.1===l?1:-1}getFirstDifferent(e,t,n,i){let r=e.getX()+n,s=e.getY()+i;for(;this.isValid(r,s)&&this.image.get(r,s)===t;)r+=n,s+=i;for(r-=n,s-=i;this.isValid(r,s)&&this.image.get(r,s)===t;)r+=n;for(r-=n;this.isValid(r,s)&&this.image.get(r,s)===t;)s+=i;return s-=i,new fe(r,s)}expandSquare(e,t,n){let i=n/(2*t),r=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,a=(e[0].getY()+e[2].getY())/2,l=new ae(o+i*r,a+i*s),c=new ae(o-i*r,a-i*s);return r=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,a=(e[1].getY()+e[3].getY())/2,[l,new ae(o+i*r,a+i*s),c,new ae(o-i*r,a-i*s)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=se.round(e.getX()),n=se.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return se.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return se.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(C.truncDivision(this.nbLayers-4,8)+1)+15}}class ve{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null,i=new me(e.getBlackMatrix()),r=null,s=null;try{let e=i.detectMirror(!1);r=e.getPoints(),this.reportFoundResultPoints(t,r),s=(new re).decode(e)}catch(c){n=c}if(null==s)try{let e=i.detectMirror(!0);r=e.getPoints(),this.reportFoundResultPoints(t,r),s=(new re).decode(e)}catch(c){if(null!=n)throw n;throw c}let o=new G(s.getText(),s.getRawBytes(),s.getNumBits(),r,W.AZTEC,f.currentTimeMillis()),a=s.getByteSegments();null!=a&&o.putMetadata(X.BYTE_SEGMENTS,a);let l=s.getECLevel();return null!=l&&o.putMetadata(X.ERROR_CORRECTION_LEVEL,l),o}reportFoundResultPoints(e,t){if(null!=e){let n=e.get(S.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach(((e,t,i)=>{n.foundPossibleResultPoint(e)}))}}reset(){}}class ye extends V{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new ve,e)}}class Ce{decode(e,t){try{return this.doDecode(e,t)}catch(n){if(t&&!0===t.get(S.TRY_HARDER)&&e.isRotateSupported()){const n=e.rotateCounterClockwise(),i=this.doDecode(n,t),r=i.getResultMetadata();let s=270;null!==r&&!0===r.get(X.ORIENTATION)&&(s+=r.get(X.ORIENTATION)%360),i.putMetadata(X.ORIENTATION,s);const o=i.getResultPoints();if(null!==o){const e=n.getHeight();for(let t=0;t<o.length;t++)o[t]=new ae(e-o[t].getY()-1,o[t].getX())}return i}throw new M}}reset(){}doDecode(e,t){const n=e.getWidth(),i=e.getHeight();let r=new w(n);const s=t&&!0===t.get(S.TRY_HARDER),o=Math.max(1,i>>(s?8:5));let a;a=s?i:15;const l=Math.trunc(i/2);for(let d=0;d<a;d++){const s=Math.trunc((d+1)/2),a=l+o*(0===(1&d)?s:-s);if(a<0||a>=i)break;try{r=e.getBlackRow(a,r)}catch(c){continue}for(let e=0;e<2;e++){if(1===e&&(r.reverse(),t&&!0===t.get(S.NEED_RESULT_POINT_CALLBACK))){const e=new Map;t.forEach(((t,n)=>e.set(n,t))),e.delete(S.NEED_RESULT_POINT_CALLBACK),t=e}try{const i=this.decodeRow(a,r,t);if(1===e){i.putMetadata(X.ORIENTATION,180);const e=i.getResultPoints();null!==e&&(e[0]=new ae(n-e[0].getX()-1,e[0].getY()),e[1]=new ae(n-e[1].getX()-1,e[1].getY()))}return i}catch(u){}}}throw new M}static recordPattern(e,t,n){const i=n.length;for(let l=0;l<i;l++)n[l]=0;const r=e.getSize();if(t>=r)throw new M;let s=!e.get(t),o=0,a=t;for(;a<r;){if(e.get(a)!==s)n[o]++;else{if(++o===i)break;n[o]=1,s=!s}a++}if(o!==i&&(o!==i-1||a!==r))throw new M}static recordPatternInReverse(e,t,n){let i=n.length,r=e.get(t);for(;t>0&&i>=0;)e.get(--t)!==r&&(i--,r=!r);if(i>=0)throw new M;Ce.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const i=e.length;let r=0,s=0;for(let l=0;l<i;l++)r+=e[l],s+=t[l];if(r<s)return Number.POSITIVE_INFINITY;const o=r/s;n*=o;let a=0;for(let l=0;l<i;l++){const i=e[l],r=t[l]*o,s=i>r?i-r:r-i;if(s>n)return Number.POSITIVE_INFINITY;a+=s}return a/r}}class we extends Ce{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let i=0,r=Int32Array.from([0,0,0,0,0,0]),s=n,o=!1;const a=6;for(let l=n;l<t;l++)if(e.get(l)!==o)r[i]++;else{if(i===a-1){let t=we.MAX_AVG_VARIANCE,n=-1;for(let e=we.CODE_START_A;e<=we.CODE_START_C;e++){const i=Ce.patternMatchVariance(r,we.CODE_PATTERNS[e],we.MAX_INDIVIDUAL_VARIANCE);i<t&&(t=i,n=e)}if(n>=0&&e.isRange(Math.max(0,s-(l-s)/2),s,!1))return Int32Array.from([s,l,n]);s+=r[0]+r[1],r=r.slice(2,r.length-1),r[i-1]=0,r[i]=0,i--}else i++;r[i]=1,o=!o}throw new M}static decodeCode(e,t,n){Ce.recordPattern(e,n,t);let i=we.MAX_AVG_VARIANCE,r=-1;for(let s=0;s<we.CODE_PATTERNS.length;s++){const e=we.CODE_PATTERNS[s],n=this.patternMatchVariance(t,e,we.MAX_INDIVIDUAL_VARIANCE);n<i&&(i=n,r=s)}if(r>=0)return r;throw new M}decodeRow(e,t,n){const i=n&&!0===n.get(S.ASSUME_GS1),r=we.findStartPattern(t),s=r[2];let o=0;const a=new Uint8Array(20);let l;switch(a[o++]=s,s){case we.CODE_START_A:l=we.CODE_CODE_A;break;case we.CODE_START_B:l=we.CODE_CODE_B;break;case we.CODE_START_C:l=we.CODE_CODE_C;break;default:throw new E}let c=!1,u=!1,d="",h=r[0],g=r[1];const f=Int32Array.from([0,0,0,0,0,0]);let m=0,v=0,y=s,C=0,w=!0,b=!1,x=!1;for(;!c;){const e=u;switch(u=!1,m=v,v=we.decodeCode(t,f,g),a[o++]=v,v!==we.CODE_STOP&&(w=!0),v!==we.CODE_STOP&&(C++,y+=C*v),h=g,g+=f.reduce(((e,t)=>e+t),0),v){case we.CODE_START_A:case we.CODE_START_B:case we.CODE_START_C:throw new E}switch(l){case we.CODE_CODE_A:if(v<64)d+=x===b?String.fromCharCode(" ".charCodeAt(0)+v):String.fromCharCode(" ".charCodeAt(0)+v+128),x=!1;else if(v<96)d+=x===b?String.fromCharCode(v-64):String.fromCharCode(v+64),x=!1;else switch(v!==we.CODE_STOP&&(w=!1),v){case we.CODE_FNC_1:i&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_A:!b&&x?(b=!0,x=!1):b&&x?(b=!1,x=!1):x=!0;break;case we.CODE_SHIFT:u=!0,l=we.CODE_CODE_B;break;case we.CODE_CODE_B:l=we.CODE_CODE_B;break;case we.CODE_CODE_C:l=we.CODE_CODE_C;break;case we.CODE_STOP:c=!0}break;case we.CODE_CODE_B:if(v<96)d+=x===b?String.fromCharCode(" ".charCodeAt(0)+v):String.fromCharCode(" ".charCodeAt(0)+v+128),x=!1;else switch(v!==we.CODE_STOP&&(w=!1),v){case we.CODE_FNC_1:i&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_B:!b&&x?(b=!0,x=!1):b&&x?(b=!1,x=!1):x=!0;break;case we.CODE_SHIFT:u=!0,l=we.CODE_CODE_A;break;case we.CODE_CODE_A:l=we.CODE_CODE_A;break;case we.CODE_CODE_C:l=we.CODE_CODE_C;break;case we.CODE_STOP:c=!0}break;case we.CODE_CODE_C:if(v<100)v<10&&(d+="0"),d+=v;else switch(v!==we.CODE_STOP&&(w=!1),v){case we.CODE_FNC_1:i&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case we.CODE_CODE_A:l=we.CODE_CODE_A;break;case we.CODE_CODE_B:l=we.CODE_CODE_B;break;case we.CODE_STOP:c=!0}}e&&(l=l===we.CODE_CODE_A?we.CODE_CODE_B:we.CODE_CODE_A)}const A=g-h;if(g=t.getNextUnset(g),!t.isRange(g,Math.min(t.getSize(),g+(g-h)/2),!1))throw new M;if(y-=C*m,y%103!==m)throw new p;const T=d.length;if(0===T)throw new M;T>0&&w&&(d=l===we.CODE_CODE_C?d.substring(0,T-2):d.substring(0,T-1));const _=(r[1]+r[0])/2,R=h+A/2,D=a.length,P=new Uint8Array(D);for(let p=0;p<D;p++)P[p]=a[p];const I=[new ae(_,e),new ae(R,e)];return new G(d,P,0,I,W.CODE_128,(new Date).getTime())}}we.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],we.MAX_AVG_VARIANCE=.25,we.MAX_INDIVIDUAL_VARIANCE=.7,we.CODE_SHIFT=98,we.CODE_CODE_C=99,we.CODE_CODE_B=100,we.CODE_CODE_A=101,we.CODE_FNC_1=102,we.CODE_FNC_2=97,we.CODE_FNC_3=96,we.CODE_FNC_4_A=101,we.CODE_FNC_4_B=100,we.CODE_START_A=103,we.CODE_START_B=104,we.CODE_START_C=105,we.CODE_STOP=106;class be extends Ce{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let i=this.counters;i.fill(0),this.decodeRowResult="";let r,s,o=be.findAsteriskPattern(t,i),a=t.getNextSet(o[1]),l=t.getSize();do{be.recordPattern(t,a,i);let e=be.toNarrowWidePattern(i);if(e<0)throw new M;r=be.patternToChar(e),this.decodeRowResult+=r,s=a;for(let t of i)a+=t;a=t.getNextSet(a)}while("*"!==r);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c,u=0;for(let p of i)u+=p;if(a!==l&&2*(a-s-u)<u)throw new M;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let n=0;n<e;n++)t+=be.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(e)!==be.ALPHABET_STRING.charAt(t%43))throw new p;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new M;c=this.extendedMode?be.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=(o[1]+o[0])/2,h=s+u/2;return new G(c,null,0,[new ae(d,e),new ae(h,e)],W.CODE_39,(new Date).getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),i=e.getNextSet(0),r=0,s=i,o=!1,a=t.length;for(let l=i;l<n;l++)if(e.get(l)!==o)t[r]++;else{if(r===a-1){if(this.toNarrowWidePattern(t)===be.ASTERISK_ENCODING&&e.isRange(Math.max(0,s-Math.floor((l-s)/2)),s,!1))return[s,l];s+=t[0]+t[1],t.copyWithin(0,2,2+r-1),t[r-1]=0,t[r]=0,r--}else r++;t[r]=1,o=!o}throw new M}static toNarrowWidePattern(e){let t,n=e.length,i=0;do{let r=2147483647;for(let t of e)t<r&&t>i&&(r=t);i=r,t=0;let s=0,o=0;for(let a=0;a<n;a++){let r=e[a];r>i&&(o|=1<<n-1-a,t++,s+=r)}if(3===t){for(let r=0;r<n&&t>0;r++){let n=e[r];if(n>i&&(t--,2*n>=s))return-1}return o}}while(t>3);return-1}static patternToChar(e){for(let t=0;t<be.CHARACTER_ENCODINGS.length;t++)if(be.CHARACTER_ENCODINGS[t]===e)return be.ALPHABET_STRING.charAt(t);if(e===be.ASTERISK_ENCODING)return"*";throw new M}static decodeExtended(e){let t=e.length,n="";for(let i=0;i<t;i++){let t=e.charAt(i);if("+"===t||"$"===t||"%"===t||"/"===t){let r=e.charAt(i+1),s="\0";switch(t){case"+":if(!(r>="A"&&r<="Z"))throw new E;s=String.fromCharCode(r.charCodeAt(0)+32);break;case"$":if(!(r>="A"&&r<="Z"))throw new E;s=String.fromCharCode(r.charCodeAt(0)-64);break;case"%":if(r>="A"&&r<="E")s=String.fromCharCode(r.charCodeAt(0)-38);else if(r>="F"&&r<="J")s=String.fromCharCode(r.charCodeAt(0)-11);else if(r>="K"&&r<="O")s=String.fromCharCode(r.charCodeAt(0)+16);else if(r>="P"&&r<="T")s=String.fromCharCode(r.charCodeAt(0)+43);else if("U"===r)s="\0";else if("V"===r)s="@";else if("W"===r)s="`";else{if("X"!==r&&"Y"!==r&&"Z"!==r)throw new E;s="\x7f"}break;case"/":if(r>="A"&&r<="O")s=String.fromCharCode(r.charCodeAt(0)-32);else{if("Z"!==r)throw new E;s=":"}}n+=s,i++}else n+=t}return n}}be.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",be.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],be.ASTERISK_ENCODING=148;class Se extends Ce{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let i=this.decodeStart(t),r=this.decodeEnd(t),s=new R;Se.decodeMiddle(t,i[1],r[0],s);let o=s.toString(),a=null;null!=n&&(a=n.get(S.ALLOWED_LENGTHS)),null==a&&(a=Se.DEFAULT_ALLOWED_LENGTHS);let l=o.length,c=!1,u=0;for(let h of a){if(l===h){c=!0;break}h>u&&(u=h)}if(!c&&l>u&&(c=!0),!c)throw new E;const d=[new ae(i[1],e),new ae(r[0],e)];return new G(o,null,0,d,W.ITF,(new Date).getTime())}static decodeMiddle(e,t,n,i){let r=new Int32Array(10),s=new Int32Array(5),o=new Int32Array(5);for(r.fill(0),s.fill(0),o.fill(0);t<n;){Ce.recordPattern(e,t,r);for(let e=0;e<5;e++){let t=2*e;s[e]=r[t],o[e]=r[t+1]}let n=Se.decodeDigit(s);i.append(n.toString()),n=this.decodeDigit(o),i.append(n.toString()),r.forEach((function(e){t+=e}))}}decodeStart(e){let t=Se.skipWhiteSpace(e),n=Se.findGuardPattern(e,t,Se.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=10*this.narrowLineWidth;n=n<t?n:t;for(let i=t-1;n>0&&i>=0&&!e.get(i);i--)n--;if(0!==n)throw new M}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new M;return n}decodeEnd(e){e.reverse();try{let n,i=Se.skipWhiteSpace(e);try{n=Se.findGuardPattern(e,i,Se.END_PATTERN_REVERSED[0])}catch(t){t instanceof M&&(n=Se.findGuardPattern(e,i,Se.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let r=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-r,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let i=n.length,r=new Int32Array(i),s=e.getSize(),o=!1,a=0,l=t;r.fill(0);for(let c=t;c<s;c++)if(e.get(c)!==o)r[a]++;else{if(a===i-1){if(Ce.patternMatchVariance(r,n,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE)return[l,c];l+=r[0]+r[1],f.arraycopy(r,2,r,0,a-1),r[a-1]=0,r[a]=0,a--}else a++;r[a]=1,o=!o}throw new M}static decodeDigit(e){let t=Se.MAX_AVG_VARIANCE,n=-1,i=Se.PATTERNS.length;for(let r=0;r<i;r++){let i=Se.PATTERNS[r],s=Ce.patternMatchVariance(e,i,Se.MAX_INDIVIDUAL_VARIANCE);s<t?(t=s,n=r):s===t&&(n=-1)}if(n>=0)return n%10;throw new M}}Se.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Se.MAX_AVG_VARIANCE=.38,Se.MAX_INDIVIDUAL_VARIANCE=.5,Se.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Se.START_PATTERN=Int32Array.from([1,1,1,1]),Se.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ee extends Ce{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,n=!1,i=0,r=Int32Array.from([0,0,0]);for(;!n;){r=Int32Array.from([0,0,0]),t=Ee.findGuardPattern(e,i,!1,this.START_END_PATTERN,r);let s=t[0];i=t[1];let o=s-(i-s);o>=0&&(n=e.isRange(o,s,!1))}return t}static checkChecksum(e){return Ee.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Ee.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let i=t-1;i>=0;i-=2){let t=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;n+=t}n*=3;for(let i=t-2;i>=0;i-=2){let t=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;n+=t}return(1e3-n)%10}static decodeEnd(e,t){return Ee.findGuardPattern(e,t,!1,Ee.START_END_PATTERN,new Int32Array(Ee.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,i){return this.findGuardPattern(e,t,n,i,new Int32Array(i.length))}static findGuardPattern(e,t,n,i,r){let s=e.getSize(),o=0,a=t=n?e.getNextUnset(t):e.getNextSet(t),l=i.length,c=n;for(let u=t;u<s;u++)if(e.get(u)!==c)r[o]++;else{if(o===l-1){if(Ce.patternMatchVariance(r,i,Ee.MAX_INDIVIDUAL_VARIANCE)<Ee.MAX_AVG_VARIANCE)return Int32Array.from([a,u]);a+=r[0]+r[1];let e=r.slice(2,r.length-1);for(let t=0;t<o-1;t++)r[t]=e[t];r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,c=!c}throw new M}static decodeDigit(e,t,n,i){this.recordPattern(e,n,t);let r=this.MAX_AVG_VARIANCE,s=-1,o=i.length;for(let a=0;a<o;a++){let e=i[a],n=Ce.patternMatchVariance(t,e,Ee.MAX_INDIVIDUAL_VARIANCE);n<r&&(r=n,s=a)}if(s>=0)return s;throw new M}}Ee.MAX_AVG_VARIANCE=.48,Ee.MAX_INDIVIDUAL_VARIANCE=.7,Ee.START_END_PATTERN=Int32Array.from([1,1,1]),Ee.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ee.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ee.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class xe{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let i=this.decodeRowStringBuffer,r=this.decodeMiddle(t,n,i),s=i.toString(),o=xe.parseExtensionString(s),a=[new ae((n[0]+n[1])/2,e),new ae(r,e)],l=new G(s,null,0,a,W.UPC_EAN_EXTENSION,(new Date).getTime());return null!=o&&l.putAllMetadata(o),l}decodeMiddle(e,t,n){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let r=e.getSize(),s=t[1],o=0;for(let l=0;l<5&&s<r;l++){let t=Ee.decodeDigit(e,i,s,Ee.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of i)s+=e;t>=10&&(o|=1<<4-l),4!==l&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(5!==n.length)throw new M;let a=this.determineCheckDigit(o);if(xe.extensionChecksum(n.toString())!==a)throw new M;return s}static extensionChecksum(e){let t=e.length,n=0;for(let i=t-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let i=t-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new M}static parseExtensionString(e){if(5!==e.length)return null;let t=xe.parseExtension5String(e);return null==t?null:new Map([[X.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let n=parseInt(e.substring(1)),i=n%100;return t+(n/100).toString()+"."+(i<10?"0"+i:i.toString())}}class Ae{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let i=this.decodeRowStringBuffer,r=this.decodeMiddle(t,n,i),s=i.toString(),o=Ae.parseExtensionString(s),a=[new ae((n[0]+n[1])/2,e),new ae(r,e)],l=new G(s,null,0,a,W.UPC_EAN_EXTENSION,(new Date).getTime());return null!=o&&l.putAllMetadata(o),l}decodeMiddle(e,t,n){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let r=e.getSize(),s=t[1],o=0;for(let a=0;a<2&&s<r;a++){let t=Ee.decodeDigit(e,i,s,Ee.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of i)s+=e;t>=10&&(o|=1<<1-a),1!==a&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==n.length)throw new M;if(parseInt(n.toString())%4!==o)throw new M;return s}static parseExtensionString(e){return 2!==e.length?null:new Map([[X.ISSUE_NUMBER,parseInt(e)]])}}class Te{static decodeRow(e,t,n){let i=Ee.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new xe).decodeRow(e,t,i)}catch(r){return(new Ae).decodeRow(e,t,i)}}}Te.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class _e extends Ee{constructor(){super(),this.decodeRowStringBuffer="",_e.L_AND_G_PATTERNS=_e.L_PATTERNS.map((e=>Int32Array.from(e)));for(let e=10;e<20;e++){let t=_e.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[t.length-e-1];_e.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let i=_e.findStartGuardPattern(t),r=null==n?null:n.get(S.NEED_RESULT_POINT_CALLBACK);if(null!=r){const t=new ae((i[0]+i[1])/2,e);r.foundPossibleResultPoint(t)}let s=this.decodeMiddle(t,i,this.decodeRowStringBuffer),o=s.rowOffset,a=s.resultString;if(null!=r){const t=new ae(o,e);r.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,o);if(null!=r){const t=new ae((l[0]+l[1])/2,e);r.foundPossibleResultPoint(t)}let c=l[1],u=c+(c-l[0]);if(u>=t.getSize()||!t.isRange(c,u,!1))throw new M;let d=a.toString();if(d.length<8)throw new E;if(!_e.checkChecksum(d))throw new p;let h=(i[1]+i[0])/2,g=(l[1]+l[0])/2,f=this.getBarcodeFormat(),m=[new ae(h,e),new ae(g,e)],v=new G(d,null,0,m,f,(new Date).getTime()),y=0;try{let n=Te.decodeRow(e,t,l[1]);v.putMetadata(X.UPC_EAN_EXTENSION,n.getText()),v.putAllMetadata(n.getResultMetadata()),v.addResultPoints(n.getResultPoints()),y=n.getText().length}catch(w){}let C=null==n?null:n.get(S.ALLOWED_EAN_EXTENSIONS);if(null!=C){let e=!1;for(let t in C)if(y.toString()===t){e=!0;break}if(!e)throw new M}return v}decodeEnd(e,t){return _e.findGuardPattern(e,t,!1,_e.START_END_PATTERN,new Int32Array(_e.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return _e.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return _e.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let i=t-1;i>=0;i-=2){let t=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;n+=t}n*=3;for(let i=t-2;i>=0;i-=2){let t=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;n+=t}return(1e3-n)%10}}class Re extends _e{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let r=e.getSize(),s=t[1],o=0;for(let a=0;a<6&&s<r;a++){let t=_e.decodeDigit(e,i,s,_e.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of i)s+=e;t>=10&&(o|=1<<5-a)}n=Re.determineFirstDigit(n,o),s=_e.findGuardPattern(e,s,!0,_e.MIDDLE_PATTERN,new Int32Array(_e.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<6&&s<r;a++){let t=_e.decodeDigit(e,i,s,_e.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of i)s+=e}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return W.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e;throw new M}}Re.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class De extends _e{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let r=e.getSize(),s=t[1];for(let o=0;o<4&&s<r;o++){let t=_e.decodeDigit(e,i,s,_e.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of i)s+=e}s=_e.findGuardPattern(e,s,!0,_e.MIDDLE_PATTERN,new Int32Array(_e.MIDDLE_PATTERN.length).fill(0))[1];for(let o=0;o<4&&s<r;o++){let t=_e.decodeDigit(e,i,s,_e.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of i)s+=e}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return W.EAN_8}}class Me extends _e{constructor(){super(...arguments),this.ean13Reader=new Re}getBarcodeFormat(){return W.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let n=new G(t.substring(1),null,null,e.getResultPoints(),W.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new M}reset(){this.ean13Reader.reset()}}class Pe extends _e{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const i=this.decodeMiddleCounters.map((e=>e));i[0]=0,i[1]=0,i[2]=0,i[3]=0;const r=e.getSize();let s=t[1],o=0;for(let a=0;a<6&&s<r;a++){const t=Pe.decodeDigit(e,i,s,Pe.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of i)s+=e;t>=10&&(o|=1<<5-a)}return{rowOffset:s,resultString:Pe.determineNumSysAndCheckDigit(n,o)}}decodeEnd(e,t){return Pe.findGuardPatternWithoutCounters(e,t,!0,Pe.MIDDLE_END_PATTERN)}checkChecksum(e){return _e.checkChecksum(Pe.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let i=0;i<10;i++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][i])return String.fromCharCode("0".charCodeAt(0)+n)+e+String.fromCharCode("0".charCodeAt(0)+i);throw M.getNotFoundInstance()}getBarcodeFormat(){return W.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map((e=>e.charCodeAt(0))),n=new R;n.append(e.charAt(0));let i=t[5];switch(i){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(i),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(i)}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}Pe.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pe.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ie extends Ce{constructor(e){super();let n=null==e?null:e.get(S.POSSIBLE_FORMATS),i=[];t(n)?(i.push(new Re),i.push(new Me),i.push(new De),i.push(new Pe)):(n.indexOf(W.EAN_13)>-1&&i.push(new Re),n.indexOf(W.UPC_A)>-1&&i.push(new Me),n.indexOf(W.EAN_8)>-1&&i.push(new De),n.indexOf(W.UPC_E)>-1&&i.push(new Pe)),this.readers=i}decodeRow(e,t,n){for(let r of this.readers)try{const i=r.decodeRow(e,t,n),s=i.getBarcodeFormat()===W.EAN_13&&"0"===i.getText().charAt(0),o=null==n?null:n.get(S.POSSIBLE_FORMATS),a=null==o||o.includes(W.UPC_A);if(s&&a){const e=i.getRawBytes(),t=new G(i.getText().substring(1),e,e?e.length:null,i.getResultPoints(),W.UPC_A);return t.putAllMetadata(i.getResultMetadata()),t}return i}catch(i){}throw new M}reset(){for(let e of this.readers)e.reset()}}class Ne extends Ce{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(Ce.patternMatchVariance(e,t[n],Ne.MAX_INDIVIDUAL_VARIANCE)<Ne.MAX_AVG_VARIANCE)return n;throw new M}static count(e){return se.sum(new Int32Array(e))}static increment(e,t){let n=0,i=t[0];for(let r=1;r<e.length;r++)t[r]>i&&(i=t[r],n=r);e[n]++}static decrement(e,t){let n=0,i=t[0];for(let r=1;r<e.length;r++)t[r]<i&&(i=t[r],n=r);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t/(t+e[2]+e[3]);if(n>=Ne.MIN_FINDER_PATTERN_RATIO&&n<=Ne.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let i of e)i>n&&(n=i),i<t&&(t=i);return n<10*t}return!1}}Ne.MAX_AVG_VARIANCE=.2,Ne.MAX_INDIVIDUAL_VARIANCE=.45,Ne.MIN_FINDER_PATTERN_RATIO=9.5/12,Ne.MAX_FINDER_PATTERN_RATIO=12.5/14;class ke{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof ke))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Oe{constructor(e,t,n,i,r){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new ae(n,r)),this.resultPoints.push(new ae(i,r))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Oe))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Le{constructor(){}static getRSSvalue(e,t,n){let i=0;for(let a of e)i+=a;let r=0,s=0,o=e.length;for(let a=0;a<o-1;a++){let l;for(l=1,s|=1<<a;l<e[a];l++,s&=~(1<<a)){let e=Le.combins(i-l-1,o-a-2);if(n&&0===s&&i-l-(o-a-1)>=o-a-1&&(e-=Le.combins(i-l-(o-a),o-a-2)),o-a-1>1){let n=0;for(let e=i-l-(o-a-2);e>t;e--)n+=Le.combins(i-l-e-1,o-a-3);e-=n*(o-1-a)}else i-l>t&&e--;r+=e}i-=l}return r}static combins(e,t){let n,i;e-t>t?(i=t,n=e-t):(i=e-t,n=t);let r=1,s=1;for(let o=e;o>n;o--)r*=o,s<=i&&(r/=s,s++);for(;s<=i;)r/=s,s++;return r}}class Fe{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let n=new w(12*t),i=0,r=e[0].getRightChar().getValue();for(let s=11;s>=0;--s)0!=(r&1<<s)&&n.set(i),i++;for(let s=1;s<e.length;++s){let t=e[s],r=t.getLeftChar().getValue();for(let e=11;e>=0;--e)0!=(r&1<<e)&&n.set(i),i++;if(null!=t.getRightChar()){let e=t.getRightChar().getValue();for(let t=11;t>=0;--t)0!=(e&1<<t)&&n.set(i),i++}}return n}}class Be{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ve{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Ge extends Ve{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===Ge.FNC1}}Ge.FNC1="$";class He extends Ve{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class We extends Ve{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new E;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===We.FNC1}isSecondDigitFNC1(){return this.secondDigit===We.FNC1}isAnyFNC1(){return this.firstDigit===We.FNC1||this.secondDigit===We.FNC1}}We.FNC1=10;class je{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new M;let t=e.substring(0,2);for(let r of je.TWO_DIGIT_DATA_LENGTH)if(r[0]===t)return r[1]===je.VARIABLE_LENGTH?je.processVariableAI(2,r[2],e):je.processFixedAI(2,r[1],e);if(e.length<3)throw new M;let n=e.substring(0,3);for(let r of je.THREE_DIGIT_DATA_LENGTH)if(r[0]===n)return r[1]===je.VARIABLE_LENGTH?je.processVariableAI(3,r[2],e):je.processFixedAI(3,r[1],e);for(let r of je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(r[0]===n)return r[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,r[2],e):je.processFixedAI(4,r[1],e);if(e.length<4)throw new M;let i=e.substring(0,4);for(let r of je.FOUR_DIGIT_DATA_LENGTH)if(r[0]===i)return r[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,r[2],e):je.processFixedAI(4,r[1],e);throw new M}static processFixedAI(e,t,n){if(n.length<e)throw new M;let i=n.substring(0,e);if(n.length<e+t)throw new M;let r=n.substring(e,e+t),s=n.substring(e+t),o="("+i+")"+r,a=je.parseFieldsInGeneralPurpose(s);return null==a?o:o+a}static processVariableAI(e,t,n){let i,r=n.substring(0,e);i=n.length<e+t?n.length:e+t;let s=n.substring(e,i),o=n.substring(i),a="("+r+")"+s,l=je.parseFieldsInGeneralPurpose(o);return null==l?a:a+l}}je.VARIABLE_LENGTH=[],je.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",je.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",je.VARIABLE_LENGTH,20],["22",je.VARIABLE_LENGTH,29],["30",je.VARIABLE_LENGTH,8],["37",je.VARIABLE_LENGTH,8],["90",je.VARIABLE_LENGTH,30],["91",je.VARIABLE_LENGTH,30],["92",je.VARIABLE_LENGTH,30],["93",je.VARIABLE_LENGTH,30],["94",je.VARIABLE_LENGTH,30],["95",je.VARIABLE_LENGTH,30],["96",je.VARIABLE_LENGTH,30],["97",je.VARIABLE_LENGTH,3],["98",je.VARIABLE_LENGTH,30],["99",je.VARIABLE_LENGTH,30]],je.THREE_DIGIT_DATA_LENGTH=[["240",je.VARIABLE_LENGTH,30],["241",je.VARIABLE_LENGTH,30],["242",je.VARIABLE_LENGTH,6],["250",je.VARIABLE_LENGTH,30],["251",je.VARIABLE_LENGTH,30],["253",je.VARIABLE_LENGTH,17],["254",je.VARIABLE_LENGTH,20],["400",je.VARIABLE_LENGTH,30],["401",je.VARIABLE_LENGTH,30],["402",17],["403",je.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",je.VARIABLE_LENGTH,20],["421",je.VARIABLE_LENGTH,15],["422",3],["423",je.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",je.VARIABLE_LENGTH,15],["391",je.VARIABLE_LENGTH,18],["392",je.VARIABLE_LENGTH,15],["393",je.VARIABLE_LENGTH,18],["703",je.VARIABLE_LENGTH,30]],je.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",je.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",je.VARIABLE_LENGTH,20],["8003",je.VARIABLE_LENGTH,30],["8004",je.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",je.VARIABLE_LENGTH,30],["8008",je.VARIABLE_LENGTH,12],["8018",18],["8020",je.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",je.VARIABLE_LENGTH,70],["8200",je.VARIABLE_LENGTH,70]];class Ue{constructor(e){this.buffer=new R,this.information=e}decodeAllCodes(e,t){let n=t,i=null;for(;;){let t=this.decodeGeneralPurposeField(n,i),r=je.parseFieldsInGeneralPurpose(t.getNewString());if(null!=r&&e.append(r),i=t.isRemaining()?""+t.getRemainingValue():null,n===t.getNewPosition())break;n=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return new We(this.information.getSize(),0===t?We.FNC1:t-1,We.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new We(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return Ue.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let i=0;for(let r=0;r<n;++r)e.get(t+r)&&(i|=1<<n-r-1);return i}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new He(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new He(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new He(this.current.getPosition(),this.buffer.toString()):new He(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Be(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let e=new He(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Be(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new He(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Be(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new He(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Be(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ge(e+5,Ge.FNC1);if(t>=5&&t<15)return new Ge(e+5,"0"+(t-5));let n,i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new Ge(e+7,""+(i+1));if(i>=90&&i<116)return new Ge(e+7,""+(i+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new E}return new Ge(e+8,n)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ge(e+5,Ge.FNC1);if(t>=5&&t<15)return new Ge(e+5,"0"+(t-5));let n,i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new Ge(e+6,""+(i+33));switch(i){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new ne("Decoding invalid alphanumeric value: "+i)}return new Ge(e+6,n)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class ze{constructor(e){this.information=e,this.generalDecoder=new Ue(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ye extends ze{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let i=0;i<4;++i){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*i,10);n/100===0&&e.append("0"),n/10===0&&e.append("0"),e.append(n)}Ye.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let i=0;i<13;i++){let r=e.charAt(i+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&i)?3*r:r}n=10-n%10,10===n&&(n=0),e.append(n)}}Ye.GTIN_SIZE=40;class qe extends Ye{constructor(e){super(e)}parseInformation(){let e=new R;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(qe.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,qe.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,qe.HEADER_SIZE+44)}}qe.HEADER_SIZE=4;class Ke extends ze{constructor(e){super(e)}parseInformation(){let e=new R;return this.getGeneralDecoder().decodeAllCodes(e,Ke.HEADER_SIZE)}}Ke.HEADER_SIZE=5;class Xe extends Ye{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,i);let r=this.checkWeight(i),s=1e5;for(let o=0;o<5;++o)r/s===0&&e.append("0"),s/=10;e.append(r)}}class Qe extends Xe{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Qe.HEADER_SIZE+Xe.GTIN_SIZE+Qe.WEIGHT_SIZE)throw new M;let e=new R;return this.encodeCompressedGtin(e,Qe.HEADER_SIZE),this.encodeCompressedWeight(e,Qe.HEADER_SIZE+Xe.GTIN_SIZE,Qe.WEIGHT_SIZE),e.toString()}}Qe.HEADER_SIZE=5,Qe.WEIGHT_SIZE=15;class Ze extends Qe{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class $e extends Qe{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Je extends Ye{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Je.HEADER_SIZE+Ye.GTIN_SIZE)throw new M;let e=new R;this.encodeCompressedGtin(e,Je.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Je.HEADER_SIZE+Ye.GTIN_SIZE,Je.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Je.HEADER_SIZE+Ye.GTIN_SIZE+Je.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}Je.HEADER_SIZE=8,Je.LAST_DIGIT_SIZE=2;class et extends Ye{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<et.HEADER_SIZE+Ye.GTIN_SIZE)throw new M;let e=new R;this.encodeCompressedGtin(e,et.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ye.GTIN_SIZE,et.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ye.GTIN_SIZE+et.LAST_DIGIT_SIZE,et.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let i=this.getGeneralDecoder().decodeGeneralPurposeField(et.HEADER_SIZE+Ye.GTIN_SIZE+et.LAST_DIGIT_SIZE+et.FIRST_THREE_DIGITS_SIZE,null);return e.append(i.getNewString()),e.toString()}}et.HEADER_SIZE=8,et.LAST_DIGIT_SIZE=2,et.FIRST_THREE_DIGITS_SIZE=10;class tt extends Xe{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new M;let e=new R;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(38400==n)return;e.append("("),e.append(this.dateCode),e.append(")");let i=n%32;n/=32;let r=n%12+1;n/=12;let s=n;s/10==0&&e.append("0"),e.append(s),r/10==0&&e.append("0"),e.append(r),i/10==0&&e.append("0"),e.append(i)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function nt(e){try{if(e.get(1))return new qe(e);if(!e.get(2))return new Ke(e);switch(Ue.extractNumericValueFromBitArray(e,1,4)){case 4:return new Ze(e);case 5:return new $e(e)}switch(Ue.extractNumericValueFromBitArray(e,1,5)){case 12:return new Je(e);case 13:return new et(e)}switch(Ue.extractNumericValueFromBitArray(e,1,7)){case 56:return new tt(e,"310","11");case 57:return new tt(e,"320","11");case 58:return new tt(e,"310","13");case 59:return new tt(e,"320","13");case 60:return new tt(e,"310","15");case 61:return new tt(e,"320","15");case 62:return new tt(e,"310","17");case 63:return new tt(e,"320","17")}}catch(t){throw console.log(t),new ne("unknown decoder: "+e)}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;class it{constructor(e,t,n,i){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=i}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof it&&it.equalsOrNull(e.leftchar,t.leftchar)&&it.equalsOrNull(e.rightchar,t.rightchar)&&it.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:it.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class rt{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof rt&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach(((e,i)=>{t.forEach((t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)}))})),n}}class st extends Ne{constructor(e){super(...arguments),this.pairs=new Array(st.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return st.constructResult(this.decodeRow2pairs(e,t))}catch(i){this.verbose&&console.log(i)}return this.pairs.length=0,this.startFromEven=!0,st.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n,i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(r){if(r instanceof M){if(!this.pairs.length)throw new M;i=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){let e=this.checkRowsBoolean(!1);if(null!=e)return e;if(e=this.checkRowsBoolean(!0),null!=e)return e}throw new M}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let i=t;i<this.rows.length;i++){let t=this.rows[i];this.pairs.length=0;for(let n of e)this.pairs.push(n.getPairs());if(this.pairs.push(t.getPairs()),!st.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let r=new Array(e);r.push(t);try{return this.checkRows(r,i+1)}catch(n){this.verbose&&console.log(n)}}throw new M}static isValidSequence(e){for(let t of st.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let i=0;i<e.length;i++)if(e[i].getFinderPattern().getValue()!=t[i]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,i=!1,r=!1;for(;n<this.rows.length;){let t=this.rows[n];if(t.getRowNumber()>e){r=t.isEquivalent(this.pairs);break}i=t.isEquivalent(this.pairs),n++}r||i||st.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new rt(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length)for(let t of n.getPairs())for(let n of e)if(it.equals(t,n))break}static isPartialRow(e,t){for(let n of t){let t=!0;for(let i of e){let e=!1;for(let t of n.getPairs())if(i.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=nt(Fe.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),i=e[e.length-1].getFinderPattern().getResultPoints(),r=[n[0],n[1],i[0],i[1]];return new G(t,null,null,r,W.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;let i=n.getChecksumPortion(),r=2;for(let s=1;s<this.pairs.size();++s){let e=this.pairs.get(s);i+=e.getLeftChar().getChecksumPortion(),r++;let t=e.getRightChar();null!=t&&(i+=t.getChecksumPortion(),r++)}return i%=211,211*(r-4)+i==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let i,r=t.length%2==0;this.startFromEven&&(r=!r);let s=!0,o=-1;do{this.findNextPair(e,t,o),i=this.parseFoundFinderPattern(e,n,r),null==i?o=st.getNextSecondBar(e,this.startEnd[0]):s=!1}while(s);let a,l=this.decodeDataCharacter(e,i,r,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new M;try{a=this.decodeDataCharacter(e,i,r,!1)}catch(c){a=null,this.verbose&&console.log(c)}return new it(l,a,i,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let r,s=e.getSize();r=n>=0?n:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let o=t.length%2!=0;this.startFromEven&&(o=!o);let a=!1;for(;r<s&&(a=!e.get(r),a);)r++;let l=0,c=r;for(let u=r;u<s;u++)if(e.get(u)!=a)i[l]++;else{if(3==l){if(o&&st.reverseCounters(i),st.isFinderPattern(i))return this.startEnd[0]=c,void(this.startEnd[1]=u);o&&st.reverseCounters(i),c+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,a=!a}throw new M}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let i=e[n];e[n]=e[t-n-1],e[t-n-1]=i}}parseFoundFinderPattern(e,t,n){let i,r,s;if(n){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,i=this.startEnd[0]-t,r=t,s=this.startEnd[1]}else r=this.startEnd[0],s=e.getNextUnset(this.startEnd[1]+1),i=s-this.startEnd[1];let o,a=this.getDecodeFinderCounters();f.arraycopy(a,0,a,1,a.length-1),a[0]=i;try{o=this.parseFinderValue(a,st.FINDER_PATTERNS)}catch(l){return null}return new Oe(o,[r,s],r,s,t)}decodeDataCharacter(e,t,n,i){let r=this.getDataCharacterCounters();for(let x=0;x<r.length;x++)r[x]=0;if(i)st.recordPatternInReverse(e,t.getStartEnd()[0],r);else{st.recordPattern(e,t.getStartEnd()[1],r);for(let e=0,t=r.length-1;e<t;e++,t--){let n=r[e];r[e]=r[t],r[t]=n}}let s=17,o=se.sum(new Int32Array(r))/s,a=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(o-a)/a>.3)throw new M;let l=this.getOddCounts(),c=this.getEvenCounts(),u=this.getOddRoundingErrors(),d=this.getEvenRoundingErrors();for(let x=0;x<r.length;x++){let e=1*r[x]/o,t=e+.5;if(t<1){if(e<.3)throw new M;t=1}else if(t>8){if(e>8.7)throw new M;t=8}let n=x/2;0==(1&x)?(l[n]=t,u[n]=e-t):(c[n]=t,d[n]=e-t)}this.adjustOddEvenCounts(s);let h=4*t.getValue()+(n?0:2)+(i?0:1)-1,p=0,g=0;for(let x=l.length-1;x>=0;x--){if(st.isNotA1left(t,n,i)){let e=st.WEIGHTS[h][2*x];g+=l[x]*e}p+=l[x]}let f=0;for(let x=c.length-1;x>=0;x--)if(st.isNotA1left(t,n,i)){let e=st.WEIGHTS[h][2*x+1];f+=c[x]*e}let m=g+f;if(0!=(1&p)||p>13||p<4)throw new M;let v=(13-p)/2,y=st.SYMBOL_WIDEST[v],C=9-y,w=Le.getRSSvalue(l,y,!0),b=Le.getRSSvalue(c,C,!1),S=st.EVEN_TOTAL_SUBSET[v],E=st.GSUM[v];return new ke(w*S+b+E,m)}static isNotA1left(e,t,n){return!(0==e.getValue()&&t&&n)}adjustOddEvenCounts(e){let t=se.sum(new Int32Array(this.getOddCounts())),n=se.sum(new Int32Array(this.getEvenCounts())),i=!1,r=!1;t>13?r=!0:t<4&&(i=!0);let s=!1,o=!1;n>13?o=!0:n<4&&(s=!0);let a=t+n-e,l=1==(1&t),c=0==(1&n);if(1==a)if(l){if(c)throw new M;r=!0}else{if(!c)throw new M;o=!0}else if(-1==a)if(l){if(c)throw new M;i=!0}else{if(!c)throw new M;s=!0}else{if(0!=a)throw new M;if(l){if(!c)throw new M;t<n?(i=!0,o=!0):(r=!0,s=!0)}else if(c)throw new M}if(i){if(r)throw new M;st.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(r&&st.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(o)throw new M;st.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&st.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}st.SYMBOL_WIDEST=[7,5,4,3,1],st.EVEN_TOTAL_SUBSET=[4,20,52,104,204],st.GSUM=[0,348,1388,2948,3988],st.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],st.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],st.FINDER_PAT_A=0,st.FINDER_PAT_B=1,st.FINDER_PAT_C=2,st.FINDER_PAT_D=3,st.FINDER_PAT_E=4,st.FINDER_PAT_F=5,st.FINDER_PATTERN_SEQUENCES=[[st.FINDER_PAT_A,st.FINDER_PAT_A],[st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B],[st.FINDER_PAT_A,st.FINDER_PAT_C,st.FINDER_PAT_B,st.FINDER_PAT_D],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_C],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_D,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_D],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_E],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F]],st.MAX_PAIRS=11;class ot extends ke{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class at extends Ne{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const i=this.decodePair(t,!1,e,n);at.addOrTally(this.possibleLeftPairs,i),t.reverse();let r=this.decodePair(t,!0,e,n);at.addOrTally(this.possibleRightPairs,r),t.reverse();for(let s of this.possibleLeftPairs)if(s.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&at.checkChecksum(s,e))return at.constructResult(s,e);throw new M}static addOrTally(e,t){if(null==t)return;let n=!1;for(let i of e)if(i.getValue()===t.getValue()){i.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),i=new String(n).toString(),r=new R;for(let l=13-i.length;l>0;l--)r.append("0");r.append(i);let s=0;for(let l=0;l<13;l++){let e=r.charAt(l).charCodeAt(0)-"0".charCodeAt(0);s+=0===(1&l)?3*e:e}s=10-s%10,10===s&&(s=0),r.append(s.toString());let o=e.getFinderPattern().getResultPoints(),a=t.getFinderPattern().getResultPoints();return new G(r.toString(),null,0,[o[0],o[1],a[0],a[1]],W.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,i=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,n===i}decodePair(e,t,n,i){try{let r=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,n,t,r),o=null==i?null:i.get(S.NEED_RESULT_POINT_CALLBACK);if(null!=o){let i=(r[0]+r[1])/2;t&&(i=e.getSize()-1-i),o.foundPossibleResultPoint(new ae(i,n))}let a=this.decodeDataCharacter(e,s,!0),l=this.decodeDataCharacter(e,s,!1);return new ot(1597*a.getValue()+l.getValue(),a.getChecksumPortion()+4*l.getChecksumPortion(),s)}catch(r){return null}}decodeDataCharacter(e,t,n){let i=this.getDataCharacterCounters();for(let f=0;f<i.length;f++)i[f]=0;if(n)Ce.recordPatternInReverse(e,t.getStartEnd()[0],i);else{Ce.recordPattern(e,t.getStartEnd()[1]+1,i);for(let e=0,t=i.length-1;e<t;e++,t--){let n=i[e];i[e]=i[t],i[t]=n}}let r=n?16:15,s=se.sum(new Int32Array(i))/r,o=this.getOddCounts(),a=this.getEvenCounts(),l=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let f=0;f<i.length;f++){let e=i[f]/s,t=Math.floor(e+.5);t<1?t=1:t>8&&(t=8);let n=Math.floor(f/2);0===(1&f)?(o[n]=t,l[n]=e-t):(a[n]=t,c[n]=e-t)}this.adjustOddEvenCounts(n,r);let u=0,d=0;for(let f=o.length-1;f>=0;f--)d*=9,d+=o[f],u+=o[f];let h=0,p=0;for(let f=a.length-1;f>=0;f--)h*=9,h+=a[f],p+=a[f];let g=d+3*h;if(n){if(0!==(1&u)||u>12||u<4)throw new M;let e=(12-u)/2,t=at.OUTSIDE_ODD_WIDEST[e],n=9-t,i=Le.getRSSvalue(o,t,!1),r=Le.getRSSvalue(a,n,!0),s=at.OUTSIDE_EVEN_TOTAL_SUBSET[e],l=at.OUTSIDE_GSUM[e];return new ke(i*s+r+l,g)}{if(0!==(1&p)||p>10||p<4)throw new M;let e=(10-p)/2,t=at.INSIDE_ODD_WIDEST[e],n=9-t,i=Le.getRSSvalue(o,t,!0),r=Le.getRSSvalue(a,n,!1),s=at.INSIDE_ODD_TOTAL_SUBSET[e],l=at.INSIDE_GSUM[e];return new ke(r*s+i+l,g)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),r=!1,s=0;for(;s<i&&(r=!e.get(s),t!==r);)s++;let o=0,a=s;for(let l=s;l<i;l++)if(e.get(l)!==r)n[o]++;else{if(3===o){if(Ne.isFinderPattern(n))return[a,l];a+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,o--}else o++;n[o]=1,r=!r}throw new M}parseFoundFinderPattern(e,t,n,i){let r=e.get(i[0]),s=i[0]-1;for(;s>=0&&r!==e.get(s);)s--;s++;const o=i[0]-s,a=this.getDecodeFinderCounters(),l=new Int32Array(a.length);f.arraycopy(a,0,l,1,a.length-1),l[0]=o;const c=this.parseFinderValue(l,at.FINDER_PATTERNS);let u=s,d=i[1];return n&&(u=e.getSize()-1-u,d=e.getSize()-1-d),new Oe(c,[s,i[1]],u,d,t)}adjustOddEvenCounts(e,t){let n=se.sum(new Int32Array(this.getOddCounts())),i=se.sum(new Int32Array(this.getEvenCounts())),r=!1,s=!1,o=!1,a=!1;e?(n>12?s=!0:n<4&&(r=!0),i>12?a=!0:i<4&&(o=!0)):(n>11?s=!0:n<5&&(r=!0),i>10?a=!0:i<4&&(o=!0));let l=n+i-t,c=(1&n)===(e?1:0),u=1===(1&i);if(1===l)if(c){if(u)throw new M;s=!0}else{if(!u)throw new M;a=!0}else if(-1===l)if(c){if(u)throw new M;r=!0}else{if(!u)throw new M;o=!0}else{if(0!==l)throw new M;if(c){if(!u)throw new M;n<i?(r=!0,a=!0):(s=!0,o=!0)}else if(u)throw new M}if(r){if(s)throw new M;Ne.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Ne.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(a)throw new M;Ne.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&Ne.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}at.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],at.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],at.OUTSIDE_GSUM=[0,161,961,2015,2715],at.INSIDE_GSUM=[0,336,1036,1516],at.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],at.INSIDE_ODD_WIDEST=[2,4,6,8],at.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class lt extends Ce{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const n=e?e.get(S.POSSIBLE_FORMATS):null,i=e&&void 0!==e.get(S.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(W.EAN_13)||n.includes(W.UPC_A)||n.includes(W.EAN_8)||n.includes(W.UPC_E))&&this.readers.push(new Ie(e)),n.includes(W.CODE_39)&&this.readers.push(new be(i)),n.includes(W.CODE_128)&&this.readers.push(new we),n.includes(W.ITF)&&this.readers.push(new Se),n.includes(W.RSS_14)&&this.readers.push(new at),n.includes(W.RSS_EXPANDED)&&this.readers.push(new st(this.verbose))):(this.readers.push(new Ie(e)),this.readers.push(new be),this.readers.push(new Ie(e)),this.readers.push(new we),this.readers.push(new Se),this.readers.push(new at),this.readers.push(new st(this.verbose)))}decodeRow(e,t,n){for(let r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch(i){}throw new M}reset(){this.readers.forEach((e=>e.reset()))}}class ct extends V{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1?arguments[1]:void 0;super(new lt(t),e,t)}}class ut{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class dt{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ht{constructor(e,t,n,i,r,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=r,this.ecBlocks=s;let o=0;const a=s.getECCodewords(),l=s.getECBlocks();for(let c of l)o+=c.getCount()*(c.getDataCodewords()+a);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(0!==(1&e)||0!==(1&t))throw new E;for(let n of ht.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new E}toString(){return""+this.versionNumber}static buildVersions(){return[new ht(1,10,10,8,8,new ut(5,new dt(1,3))),new ht(2,12,12,10,10,new ut(7,new dt(1,5))),new ht(3,14,14,12,12,new ut(10,new dt(1,8))),new ht(4,16,16,14,14,new ut(12,new dt(1,12))),new ht(5,18,18,16,16,new ut(14,new dt(1,18))),new ht(6,20,20,18,18,new ut(18,new dt(1,22))),new ht(7,22,22,20,20,new ut(20,new dt(1,30))),new ht(8,24,24,22,22,new ut(24,new dt(1,36))),new ht(9,26,26,24,24,new ut(28,new dt(1,44))),new ht(10,32,32,14,14,new ut(36,new dt(1,62))),new ht(11,36,36,16,16,new ut(42,new dt(1,86))),new ht(12,40,40,18,18,new ut(48,new dt(1,114))),new ht(13,44,44,20,20,new ut(56,new dt(1,144))),new ht(14,48,48,22,22,new ut(68,new dt(1,174))),new ht(15,52,52,24,24,new ut(42,new dt(2,102))),new ht(16,64,64,14,14,new ut(56,new dt(2,140))),new ht(17,72,72,16,16,new ut(36,new dt(4,92))),new ht(18,80,80,18,18,new ut(48,new dt(4,114))),new ht(19,88,88,20,20,new ut(56,new dt(4,144))),new ht(20,96,96,22,22,new ut(68,new dt(4,174))),new ht(21,104,104,24,24,new ut(56,new dt(6,136))),new ht(22,120,120,18,18,new ut(68,new dt(6,175))),new ht(23,132,132,20,20,new ut(62,new dt(8,163))),new ht(24,144,144,22,22,new ut(62,new dt(8,156),new dt(2,155))),new ht(25,8,18,6,16,new ut(7,new dt(1,5))),new ht(26,8,32,6,14,new ut(11,new dt(1,10))),new ht(27,12,26,10,24,new ut(14,new dt(1,16))),new ht(28,12,36,10,16,new ut(18,new dt(1,22))),new ht(29,16,36,14,16,new ut(24,new dt(1,32))),new ht(30,16,48,14,22,new ut(28,new dt(1,49)))]}}ht.VERSIONS=ht.buildVersions();class pt{constructor(e){const t=e.getHeight();if(t<8||t>144||0!==(1&t))throw new E;this.version=pt.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new D(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return ht.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,i=0;const r=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth();let o=!1,a=!1,l=!1,c=!1;do{if(n!==r||0!==i||o)if(n!==r-2||0!==i||0===(3&s)||a)if(n!==r+4||2!==i||0!==(7&s)||l)if(n!==r-2||0!==i||4!==(7&s)||c){do{n<r&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[t++]=255&this.readUtah(n,i,r,s)),n-=2,i+=2}while(n>=0&&i<s);n+=1,i+=3;do{n>=0&&i<s&&!this.readMappingMatrix.get(i,n)&&(e[t++]=255&this.readUtah(n,i,r,s)),n+=2,i-=2}while(n<r&&i>=0);n+=3,i+=1}else e[t++]=255&this.readCorner4(r,s),n-=2,i+=2,c=!0;else e[t++]=255&this.readCorner3(r,s),n-=2,i+=2,l=!0;else e[t++]=255&this.readCorner2(r,s),n-=2,i+=2,a=!0;else e[t++]=255&this.readCorner1(r,s),n-=2,i+=2,o=!0}while(n<r||i<s);if(t!==this.version.getTotalCodewords())throw new E;return e}readModule(e,t,n,i){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,i){let r=0;return this.readModule(e-2,t-2,n,i)&&(r|=1),r<<=1,this.readModule(e-2,t-1,n,i)&&(r|=1),r<<=1,this.readModule(e-1,t-2,n,i)&&(r|=1),r<<=1,this.readModule(e-1,t-1,n,i)&&(r|=1),r<<=1,this.readModule(e-1,t,n,i)&&(r|=1),r<<=1,this.readModule(e,t-2,n,i)&&(r|=1),r<<=1,this.readModule(e,t-1,n,i)&&(r|=1),r<<=1,this.readModule(e,t,n,i)&&(r|=1),r}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new d("Dimension of bitMatrix must match the version size");const i=this.version.getDataRegionSizeRows(),r=this.version.getDataRegionSizeColumns(),s=t/i|0,o=n/r|0,a=new D(o*r,s*i);for(let l=0;l<s;++l){const t=l*i;for(let n=0;n<o;++n){const s=n*r;for(let o=0;o<i;++o){const c=l*(i+2)+1+o,u=t+o;for(let t=0;t<r;++t){const i=n*(r+2)+1+t;if(e.get(i,c)){const e=s+t;a.set(e,u)}}}}}return a}}class gt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let i=0;const r=n.getECBlocks();for(let d of r)i+=d.getCount();const s=new Array(i);let o=0;for(let d of r)for(let e=0;e<d.getCount();e++){const e=d.getDataCodewords(),t=n.getECCodewords()+e;s[o++]=new gt(e,new Uint8Array(t))}const a=s[0].codewords.length-n.getECCodewords(),l=a-1;let c=0;for(let d=0;d<l;d++)for(let t=0;t<o;t++)s[t].codewords[d]=e[c++];const u=24===t.getVersionNumber(),h=u?8:o;for(let d=0;d<h;d++)s[d].codewords[a-1]=e[c++];const p=s[0].codewords.length;for(let d=a;d<p;d++)for(let t=0;t<o;t++){const n=u?(t+8)%o:t,i=u&&n>7?d-1:d;s[n].codewords[i]=e[c++]}if(c!==e.length)throw new d;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ft{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new d(""+e);let t=0,n=this.bitOffset,i=this.byteOffset;const r=this.bytes;if(n>0){const s=8-n,o=e<s?e:s,a=s-o,l=255>>8-o<<a;t=(r[i]&l)>>a,e-=o,n+=o,8===n&&(n=0,i++)}if(e>0){for(;e>=8;)t=t<<8|255&r[i],i++,e-=8;if(e>0){const s=8-e,o=255>>s<<s;t=t<<e|(r[i]&o)>>s,n+=e}}return this.bitOffset=n,this.byteOffset=i,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(U||(U={}));class mt{static decode(e){const t=new ft(e),n=new R,i=new R,r=new Array;let s=U.ASCII_ENCODE;do{if(s===U.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,i);else{switch(s){case U.C40_ENCODE:this.decodeC40Segment(t,n);break;case U.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case U.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case U.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case U.BASE256_ENCODE:this.decodeBase256Segment(t,n,r);break;default:throw new E}s=U.ASCII_ENCODE}}while(s!==U.PAD_ENCODE&&t.available()>0);return i.length()>0&&n.append(i.toString()),new Q(e,n.toString(),0===r.length?null:r,null)}static decodeAsciiSegment(e,t,n){let i=!1;do{let r=e.readBits(8);if(0===r)throw new E;if(r<=128)return i&&(r+=128),t.append(String.fromCharCode(r-1)),U.ASCII_ENCODE;if(129===r)return U.PAD_ENCODE;if(r<=229){const e=r-130;e<10&&t.append("0"),t.append(""+e)}else switch(r){case 230:return U.C40_ENCODE;case 231:return U.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:i=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return U.ANSIX12_ENCODE;case 239:return U.TEXT_ENCODE;case 240:return U.EDIFACT_ENCODE;default:if(254!==r||0!==e.available())throw new E}}while(e.available()>0);return U.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const i=[];let r=0;do{if(8===e.available())return;const s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),i);for(let e=0;e<3;e++){const s=i[e];switch(r){case 0:if(s<3)r=s+1;else{if(!(s<this.C40_BASIC_SET_CHARS.length))throw new E;{const e=this.C40_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),r=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length){const e=this.C40_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new E}r=0;break;case 3:n?(t.append(String.fromCharCode(s+224)),n=!1):t.append(String.fromCharCode(s+96)),r=0;break;default:throw new E}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,i=[],r=0;do{if(8===e.available())return;const s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),i);for(let e=0;e<3;e++){const s=i[e];switch(r){case 0:if(s<3)r=s+1;else{if(!(s<this.TEXT_BASIC_SET_CHARS.length))throw new E;{const e=this.TEXT_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),r=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length){const e=this.TEXT_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new E}r=0;break;case 3:if(!(s<this.TEXT_SHIFT3_SET_CHARS.length))throw new E;{const e=this.TEXT_SHIFT3_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e),r=0}break;default:throw new E}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(8===e.available())return;const i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),n);for(let e=0;e<3;e++){const i=n[e];switch(i){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(i<14)t.append(String.fromCharCode(i+44));else{if(!(i<40))throw new E;t.append(String.fromCharCode(i+51))}}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let i=(e<<8)+t-1,r=Math.floor(i/1600);n[0]=r,i-=1600*r,r=Math.floor(i/40),n[1]=r,n[2]=i-40*r}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let n=e.readBits(6);if(31===n){const t=8-e.getBitOffset();return void(8!==t&&e.readBits(t))}0===(32&n)&&(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let i=1+e.getByteOffset();const r=this.unrandomize255State(e.readBits(8),i++);let s;if(s=0===r?e.available()/8|0:r<250?r:250*(r-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new E;const o=new Uint8Array(s);for(let l=0;l<s;l++){if(e.available()<8)throw new E;o[l]=this.unrandomize255State(e.readBits(8),i++)}n.push(o);try{t.append(T.decode(o,_.ISO88591))}catch(a){throw new ne("Platform does not support required encoding: "+a.message)}}static unrandomize255State(e,t){const n=e-(149*t%255+1);return n>=0?n:n+256}}mt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],mt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],mt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],mt.TEXT_SHIFT2_SET_CHARS=mt.C40_SHIFT2_SET_CHARS,mt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class vt{constructor(){this.rsDecoder=new ie(ee.DATA_MATRIX_FIELD_256)}decode(e){const t=new pt(e),n=t.getVersion(),i=t.readCodewords(),r=gt.getDataBlocks(i,n);let s=0;for(let l of r)s+=l.getNumDataCodewords();const o=new Uint8Array(s),a=r.length;for(let l=0;l<a;l++){const e=r[l],t=e.getCodewords(),n=e.getNumDataCodewords();this.correctErrors(t,n);for(let i=0;i<n;i++)o[i*a+l]=t[i]}return mt.decode(o)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(i){throw new p}for(let r=0;r<t;r++)e[r]=n[r]}}class yt{constructor(e){this.image=e,this.rectangleDetector=new ue(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new M;t=this.shiftToModuleCenter(t);const n=t[0],i=t[1],r=t[2],s=t[3];let o=this.transitionsBetween(n,s)+1,a=this.transitionsBetween(r,s)+1;1===(1&o)&&(o+=1),1===(1&a)&&(a+=1),4*o<7*a&&4*a<7*o&&(o=a=Math.max(o,a));let l=yt.sampleGrid(this.image,n,i,r,s,o,a);return new le(l,[n,i,r,s])}static shiftPoint(e,t,n){let i=(t.getX()-e.getX())/(n+1),r=(t.getY()-e.getY())/(n+1);return new ae(e.getX()+i,e.getY()+r)}static moveAway(e,t,n){let i=e.getX(),r=e.getY();return i<t?i-=1:i+=1,r<n?r-=1:r+=1,new ae(i,r)}detectSolid1(e){let t=e[0],n=e[1],i=e[3],r=e[2],s=this.transitionsBetween(t,n),o=this.transitionsBetween(n,i),a=this.transitionsBetween(i,r),l=this.transitionsBetween(r,t),c=s,u=[r,t,n,i];return c>o&&(c=o,u[0]=t,u[1]=n,u[2]=i,u[3]=r),c>a&&(c=a,u[0]=n,u[1]=i,u[2]=r,u[3]=t),c>l&&(u[0]=i,u[1]=r,u[2]=t,u[3]=n),u}detectSolid2(e){let t=e[0],n=e[1],i=e[2],r=e[3],s=this.transitionsBetween(t,r),o=yt.shiftPoint(n,i,4*(s+1)),a=yt.shiftPoint(i,n,4*(s+1));return this.transitionsBetween(o,t)<this.transitionsBetween(a,r)?(e[0]=t,e[1]=n,e[2]=i,e[3]=r):(e[0]=n,e[1]=i,e[2]=r,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],i=e[2],r=e[3],s=this.transitionsBetween(t,r),o=this.transitionsBetween(n,r),a=yt.shiftPoint(t,n,4*(o+1)),l=yt.shiftPoint(i,n,4*(s+1));s=this.transitionsBetween(a,r),o=this.transitionsBetween(l,r);let c=new ae(r.getX()+(i.getX()-n.getX())/(s+1),r.getY()+(i.getY()-n.getY())/(s+1)),u=new ae(r.getX()+(t.getX()-n.getX())/(o+1),r.getY()+(t.getY()-n.getY())/(o+1));return this.isValid(c)?this.isValid(u)?this.transitionsBetween(a,c)+this.transitionsBetween(l,c)>this.transitionsBetween(a,u)+this.transitionsBetween(l,u)?c:u:c:this.isValid(u)?u:null}shiftToModuleCenter(e){let t=e[0],n=e[1],i=e[2],r=e[3],s=this.transitionsBetween(t,r)+1,o=this.transitionsBetween(i,r)+1,a=yt.shiftPoint(t,n,4*o),l=yt.shiftPoint(i,n,4*s);s=this.transitionsBetween(a,r)+1,o=this.transitionsBetween(l,r)+1,1===(1&s)&&(s+=1),1===(1&o)&&(o+=1);let c,u,d=(t.getX()+n.getX()+i.getX()+r.getX())/4,h=(t.getY()+n.getY()+i.getY()+r.getY())/4;return t=yt.moveAway(t,d,h),n=yt.moveAway(n,d,h),i=yt.moveAway(i,d,h),r=yt.moveAway(r,d,h),a=yt.shiftPoint(t,n,4*o),a=yt.shiftPoint(a,r,4*s),c=yt.shiftPoint(n,t,4*o),c=yt.shiftPoint(c,i,4*s),l=yt.shiftPoint(i,r,4*o),l=yt.shiftPoint(l,n,4*s),u=yt.shiftPoint(r,i,4*o),u=yt.shiftPoint(u,t,4*s),[a,c,l,u]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,i,r,s,o){return ge.getInstance().sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),r=Math.trunc(t.getX()),s=Math.trunc(t.getY()),o=Math.abs(s-i)>Math.abs(r-n);if(o){let e=n;n=i,i=e,e=r,r=s,s=e}let a=Math.abs(r-n),l=Math.abs(s-i),c=-a/2,u=i<s?1:-1,d=n<r?1:-1,h=0,p=this.image.get(o?i:n,o?n:i);for(let g=n,f=i;g!==r;g+=d){let e=this.image.get(o?f:g,o?g:f);if(e!==p&&(h++,p=e),c+=l,c>0){if(f===s)break;f+=u,c-=a}}return h}}class Ct{constructor(){this.decoder=new vt}decode(e){let t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=i&&i.has(S.PURE_BARCODE)){const i=Ct.extractPureBits(e.getBlackMatrix());t=this.decoder.decode(i),n=Ct.NO_POINTS}else{const i=new yt(e.getBlackMatrix()).detect();t=this.decoder.decode(i.getBits()),n=i.getPoints()}const r=t.getRawBytes(),s=new G(t.getText(),r,8*r.length,n,W.DATA_MATRIX,f.currentTimeMillis()),o=t.getByteSegments();null!=o&&s.putMetadata(X.BYTE_SEGMENTS,o);const a=t.getECLevel();return null!=a&&s.putMetadata(X.ERROR_CORRECTION_LEVEL,a),s}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new M;const i=this.moduleSize(t,e);let r=t[1];const s=n[1];let o=t[0];const a=(n[0]-o+1)/i,l=(s-r+1)/i;if(a<=0||l<=0)throw new M;const c=i/2;r+=c,o+=c;const u=new D(a,l);for(let d=0;d<l;d++){const t=r+d*i;for(let n=0;n<a;n++)e.get(o+n*i,t)&&u.set(n,d)}return u}static moduleSize(e,t){const n=t.getWidth();let i=e[0];const r=e[1];for(;i<n&&t.get(i,r);)i++;if(i===n)throw new M;const s=i-e[0];if(0===s)throw new M;return s}}Ct.NO_POINTS=[];class wt extends V{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new Ct,e)}}!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(z||(z={}));class bt{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,bt.FOR_BITS.set(n,this),bt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return bt.L;case"M":return bt.M;case"Q":return bt.Q;case"H":return bt.H;default:throw new u(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof bt))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=bt.FOR_BITS.size)throw new d;return bt.FOR_BITS.get(e)}}bt.FOR_BITS=new Map,bt.FOR_VALUE=new Map,bt.L=new bt(z.L,"L",1),bt.M=new bt(z.M,"M",0),bt.Q=new bt(z.Q,"Q",3),bt.H=new bt(z.H,"H",2);class St{constructor(e){this.errorCorrectionLevel=bt.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return C.bitCount(e^t)}static decodeFormatInformation(e,t){const n=St.doDecodeFormatInformation(e,t);return null!==n?n:St.doDecodeFormatInformation(e^St.FORMAT_INFO_MASK_QR,t^St.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,i=0;for(const r of St.FORMAT_INFO_DECODE_LOOKUP){const s=r[0];if(s===e||s===t)return new St(r[1]);let o=St.numBitsDiffering(e,s);o<n&&(i=r[1],n=o),e!==t&&(o=St.numBitsDiffering(t,s),o<n&&(i=r[1],n=o))}return n<=3?new St(i):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof St))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}St.FORMAT_INFO_MASK_QR=21522,St.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Et{constructor(e){this.ecCodewordsPerBlock=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class xt{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class At{constructor(e,t){this.versionNumber=e,this.alignmentPatternCenters=t;for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];this.ecBlocks=i;let s=0;const o=i[0].getECCodewordsPerBlock(),a=i[0].getECBlocks();for(const l of a)s+=l.getCount()*(l.getDataCodewords()+o);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new E;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new E}}static getVersionForNumber(e){if(e<1||e>40)throw new d;return At.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let i=0;i<At.VERSION_DECODE_INFO.length;i++){const r=At.VERSION_DECODE_INFO[i];if(r===e)return At.getVersionForNumber(i+7);const s=St.numBitsDiffering(e,r);s<t&&(n=i+7,t=s)}return t<=3?At.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new D(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let i=0;i<n;i++){const e=this.alignmentPatternCenters[i]-2;for(let r=0;r<n;r++)0===i&&(0===r||r===n-1)||i===n-1&&0===r||t.setRegion(this.alignmentPatternCenters[r]-2,e,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}At.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),At.VERSIONS=[new At(1,new Int32Array(0),new Et(7,new xt(1,19)),new Et(10,new xt(1,16)),new Et(13,new xt(1,13)),new Et(17,new xt(1,9))),new At(2,Int32Array.from([6,18]),new Et(10,new xt(1,34)),new Et(16,new xt(1,28)),new Et(22,new xt(1,22)),new Et(28,new xt(1,16))),new At(3,Int32Array.from([6,22]),new Et(15,new xt(1,55)),new Et(26,new xt(1,44)),new Et(18,new xt(2,17)),new Et(22,new xt(2,13))),new At(4,Int32Array.from([6,26]),new Et(20,new xt(1,80)),new Et(18,new xt(2,32)),new Et(26,new xt(2,24)),new Et(16,new xt(4,9))),new At(5,Int32Array.from([6,30]),new Et(26,new xt(1,108)),new Et(24,new xt(2,43)),new Et(18,new xt(2,15),new xt(2,16)),new Et(22,new xt(2,11),new xt(2,12))),new At(6,Int32Array.from([6,34]),new Et(18,new xt(2,68)),new Et(16,new xt(4,27)),new Et(24,new xt(4,19)),new Et(28,new xt(4,15))),new At(7,Int32Array.from([6,22,38]),new Et(20,new xt(2,78)),new Et(18,new xt(4,31)),new Et(18,new xt(2,14),new xt(4,15)),new Et(26,new xt(4,13),new xt(1,14))),new At(8,Int32Array.from([6,24,42]),new Et(24,new xt(2,97)),new Et(22,new xt(2,38),new xt(2,39)),new Et(22,new xt(4,18),new xt(2,19)),new Et(26,new xt(4,14),new xt(2,15))),new At(9,Int32Array.from([6,26,46]),new Et(30,new xt(2,116)),new Et(22,new xt(3,36),new xt(2,37)),new Et(20,new xt(4,16),new xt(4,17)),new Et(24,new xt(4,12),new xt(4,13))),new At(10,Int32Array.from([6,28,50]),new Et(18,new xt(2,68),new xt(2,69)),new Et(26,new xt(4,43),new xt(1,44)),new Et(24,new xt(6,19),new xt(2,20)),new Et(28,new xt(6,15),new xt(2,16))),new At(11,Int32Array.from([6,30,54]),new Et(20,new xt(4,81)),new Et(30,new xt(1,50),new xt(4,51)),new Et(28,new xt(4,22),new xt(4,23)),new Et(24,new xt(3,12),new xt(8,13))),new At(12,Int32Array.from([6,32,58]),new Et(24,new xt(2,92),new xt(2,93)),new Et(22,new xt(6,36),new xt(2,37)),new Et(26,new xt(4,20),new xt(6,21)),new Et(28,new xt(7,14),new xt(4,15))),new At(13,Int32Array.from([6,34,62]),new Et(26,new xt(4,107)),new Et(22,new xt(8,37),new xt(1,38)),new Et(24,new xt(8,20),new xt(4,21)),new Et(22,new xt(12,11),new xt(4,12))),new At(14,Int32Array.from([6,26,46,66]),new Et(30,new xt(3,115),new xt(1,116)),new Et(24,new xt(4,40),new xt(5,41)),new Et(20,new xt(11,16),new xt(5,17)),new Et(24,new xt(11,12),new xt(5,13))),new At(15,Int32Array.from([6,26,48,70]),new Et(22,new xt(5,87),new xt(1,88)),new Et(24,new xt(5,41),new xt(5,42)),new Et(30,new xt(5,24),new xt(7,25)),new Et(24,new xt(11,12),new xt(7,13))),new At(16,Int32Array.from([6,26,50,74]),new Et(24,new xt(5,98),new xt(1,99)),new Et(28,new xt(7,45),new xt(3,46)),new Et(24,new xt(15,19),new xt(2,20)),new Et(30,new xt(3,15),new xt(13,16))),new At(17,Int32Array.from([6,30,54,78]),new Et(28,new xt(1,107),new xt(5,108)),new Et(28,new xt(10,46),new xt(1,47)),new Et(28,new xt(1,22),new xt(15,23)),new Et(28,new xt(2,14),new xt(17,15))),new At(18,Int32Array.from([6,30,56,82]),new Et(30,new xt(5,120),new xt(1,121)),new Et(26,new xt(9,43),new xt(4,44)),new Et(28,new xt(17,22),new xt(1,23)),new Et(28,new xt(2,14),new xt(19,15))),new At(19,Int32Array.from([6,30,58,86]),new Et(28,new xt(3,113),new xt(4,114)),new Et(26,new xt(3,44),new xt(11,45)),new Et(26,new xt(17,21),new xt(4,22)),new Et(26,new xt(9,13),new xt(16,14))),new At(20,Int32Array.from([6,34,62,90]),new Et(28,new xt(3,107),new xt(5,108)),new Et(26,new xt(3,41),new xt(13,42)),new Et(30,new xt(15,24),new xt(5,25)),new Et(28,new xt(15,15),new xt(10,16))),new At(21,Int32Array.from([6,28,50,72,94]),new Et(28,new xt(4,116),new xt(4,117)),new Et(26,new xt(17,42)),new Et(28,new xt(17,22),new xt(6,23)),new Et(30,new xt(19,16),new xt(6,17))),new At(22,Int32Array.from([6,26,50,74,98]),new Et(28,new xt(2,111),new xt(7,112)),new Et(28,new xt(17,46)),new Et(30,new xt(7,24),new xt(16,25)),new Et(24,new xt(34,13))),new At(23,Int32Array.from([6,30,54,78,102]),new Et(30,new xt(4,121),new xt(5,122)),new Et(28,new xt(4,47),new xt(14,48)),new Et(30,new xt(11,24),new xt(14,25)),new Et(30,new xt(16,15),new xt(14,16))),new At(24,Int32Array.from([6,28,54,80,106]),new Et(30,new xt(6,117),new xt(4,118)),new Et(28,new xt(6,45),new xt(14,46)),new Et(30,new xt(11,24),new xt(16,25)),new Et(30,new xt(30,16),new xt(2,17))),new At(25,Int32Array.from([6,32,58,84,110]),new Et(26,new xt(8,106),new xt(4,107)),new Et(28,new xt(8,47),new xt(13,48)),new Et(30,new xt(7,24),new xt(22,25)),new Et(30,new xt(22,15),new xt(13,16))),new At(26,Int32Array.from([6,30,58,86,114]),new Et(28,new xt(10,114),new xt(2,115)),new Et(28,new xt(19,46),new xt(4,47)),new Et(28,new xt(28,22),new xt(6,23)),new Et(30,new xt(33,16),new xt(4,17))),new At(27,Int32Array.from([6,34,62,90,118]),new Et(30,new xt(8,122),new xt(4,123)),new Et(28,new xt(22,45),new xt(3,46)),new Et(30,new xt(8,23),new xt(26,24)),new Et(30,new xt(12,15),new xt(28,16))),new At(28,Int32Array.from([6,26,50,74,98,122]),new Et(30,new xt(3,117),new xt(10,118)),new Et(28,new xt(3,45),new xt(23,46)),new Et(30,new xt(4,24),new xt(31,25)),new Et(30,new xt(11,15),new xt(31,16))),new At(29,Int32Array.from([6,30,54,78,102,126]),new Et(30,new xt(7,116),new xt(7,117)),new Et(28,new xt(21,45),new xt(7,46)),new Et(30,new xt(1,23),new xt(37,24)),new Et(30,new xt(19,15),new xt(26,16))),new At(30,Int32Array.from([6,26,52,78,104,130]),new Et(30,new xt(5,115),new xt(10,116)),new Et(28,new xt(19,47),new xt(10,48)),new Et(30,new xt(15,24),new xt(25,25)),new Et(30,new xt(23,15),new xt(25,16))),new At(31,Int32Array.from([6,30,56,82,108,134]),new Et(30,new xt(13,115),new xt(3,116)),new Et(28,new xt(2,46),new xt(29,47)),new Et(30,new xt(42,24),new xt(1,25)),new Et(30,new xt(23,15),new xt(28,16))),new At(32,Int32Array.from([6,34,60,86,112,138]),new Et(30,new xt(17,115)),new Et(28,new xt(10,46),new xt(23,47)),new Et(30,new xt(10,24),new xt(35,25)),new Et(30,new xt(19,15),new xt(35,16))),new At(33,Int32Array.from([6,30,58,86,114,142]),new Et(30,new xt(17,115),new xt(1,116)),new Et(28,new xt(14,46),new xt(21,47)),new Et(30,new xt(29,24),new xt(19,25)),new Et(30,new xt(11,15),new xt(46,16))),new At(34,Int32Array.from([6,34,62,90,118,146]),new Et(30,new xt(13,115),new xt(6,116)),new Et(28,new xt(14,46),new xt(23,47)),new Et(30,new xt(44,24),new xt(7,25)),new Et(30,new xt(59,16),new xt(1,17))),new At(35,Int32Array.from([6,30,54,78,102,126,150]),new Et(30,new xt(12,121),new xt(7,122)),new Et(28,new xt(12,47),new xt(26,48)),new Et(30,new xt(39,24),new xt(14,25)),new Et(30,new xt(22,15),new xt(41,16))),new At(36,Int32Array.from([6,24,50,76,102,128,154]),new Et(30,new xt(6,121),new xt(14,122)),new Et(28,new xt(6,47),new xt(34,48)),new Et(30,new xt(46,24),new xt(10,25)),new Et(30,new xt(2,15),new xt(64,16))),new At(37,Int32Array.from([6,28,54,80,106,132,158]),new Et(30,new xt(17,122),new xt(4,123)),new Et(28,new xt(29,46),new xt(14,47)),new Et(30,new xt(49,24),new xt(10,25)),new Et(30,new xt(24,15),new xt(46,16))),new At(38,Int32Array.from([6,32,58,84,110,136,162]),new Et(30,new xt(4,122),new xt(18,123)),new Et(28,new xt(13,46),new xt(32,47)),new Et(30,new xt(48,24),new xt(14,25)),new Et(30,new xt(42,15),new xt(32,16))),new At(39,Int32Array.from([6,26,54,82,110,138,166]),new Et(30,new xt(20,117),new xt(4,118)),new Et(28,new xt(40,47),new xt(7,48)),new Et(30,new xt(43,24),new xt(22,25)),new Et(30,new xt(10,15),new xt(67,16))),new At(40,Int32Array.from([6,30,58,86,114,142,170]),new Et(30,new xt(19,118),new xt(6,119)),new Et(28,new xt(18,47),new xt(31,48)),new Et(30,new xt(34,24),new xt(34,25)),new Et(30,new xt(20,15),new xt(61,16)))],function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(Y||(Y={}));class Tt{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let i=0;i<t;i++)this.isMasked(n,i)&&e.flip(i,n)}}Tt.values=new Map([[Y.DATA_MASK_000,new Tt(Y.DATA_MASK_000,((e,t)=>0===(e+t&1)))],[Y.DATA_MASK_001,new Tt(Y.DATA_MASK_001,((e,t)=>0===(1&e)))],[Y.DATA_MASK_010,new Tt(Y.DATA_MASK_010,((e,t)=>t%3===0))],[Y.DATA_MASK_011,new Tt(Y.DATA_MASK_011,((e,t)=>(e+t)%3===0))],[Y.DATA_MASK_100,new Tt(Y.DATA_MASK_100,((e,t)=>0===(Math.floor(e/2)+Math.floor(t/3)&1)))],[Y.DATA_MASK_101,new Tt(Y.DATA_MASK_101,((e,t)=>e*t%6===0))],[Y.DATA_MASK_110,new Tt(Y.DATA_MASK_110,((e,t)=>e*t%6<3))],[Y.DATA_MASK_111,new Tt(Y.DATA_MASK_111,((e,t)=>0===(e+t+e*t%3&1)))]]);class _t{constructor(e){const t=e.getHeight();if(t<21||1!==(3&t))throw new E;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let r=5;r>=0;r--)e=this.copyBit(8,r,e);const t=this.bitMatrix.getHeight();let n=0;const i=t-7;for(let r=t-1;r>=i;r--)n=this.copyBit(8,r,n);for(let r=t-8;r<t;r++)n=this.copyBit(r,8,n);if(this.parsedFormatInfo=St.decodeFormatInformation(e,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new E}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return At.getVersionForNumber(t);let n=0;const i=e-11;for(let s=5;s>=0;s--)for(let t=e-9;t>=i;t--)n=this.copyBit(t,s,n);let r=At.decodeVersionInformation(n);if(null!==r&&r.getDimensionForVersion()===e)return this.parsedVersion=r,r;n=0;for(let s=5;s>=0;s--)for(let t=e-9;t>=i;t--)n=this.copyBit(s,t,n);if(r=At.decodeVersionInformation(n),null!==r&&r.getDimensionForVersion()===e)return this.parsedVersion=r,r;throw new E}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=Tt.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);const r=t.buildFunctionPattern();let s=!0;const o=new Uint8Array(t.getTotalCodewords());let a=0,l=0,c=0;for(let u=i-1;u>0;u-=2){6===u&&u--;for(let e=0;e<i;e++){const t=s?i-1-e:e;for(let e=0;e<2;e++)r.get(u-e,t)||(c++,l<<=1,this.bitMatrix.get(u-e,t)&&(l|=1),8===c&&(o[a++]=l,c=0,l=0))}s=!s}if(a!==t.getTotalCodewords())throw new E;return o}remask(){if(null===this.parsedFormatInfo)return;const e=Tt.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let i=t+1,r=e.getHeight();i<r;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))}}class Rt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new d;const i=t.getECBlocksForLevel(n);let r=0;const s=i.getECBlocks();for(const d of s)r+=d.getCount();const o=new Array(r);let a=0;for(const d of s)for(let e=0;e<d.getCount();e++){const e=d.getDataCodewords(),t=i.getECCodewordsPerBlock()+e;o[a++]=new Rt(e,new Uint8Array(t))}const l=o[0].codewords.length;let c=o.length-1;for(;c>=0&&o[c].codewords.length!==l;)c--;c++;const u=l-i.getECCodewordsPerBlock();let h=0;for(let d=0;d<u;d++)for(let t=0;t<a;t++)o[t].codewords[d]=e[h++];for(let d=c;d<a;d++)o[d].codewords[u]=e[h++];const p=o[0].codewords.length;for(let d=u;d<p;d++)for(let t=0;t<a;t++){const n=t<c?d:d+1;o[t].codewords[n]=e[h++]}return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(q||(q={}));class Dt{constructor(e,t,n,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=i,Dt.FOR_BITS.set(i,this),Dt.FOR_VALUE.set(e,this)}static forBits(e){const t=Dt.FOR_BITS.get(e);if(void 0===t)throw new d;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return n=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Dt))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}Dt.FOR_BITS=new Map,Dt.FOR_VALUE=new Map,Dt.TERMINATOR=new Dt(q.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Dt.NUMERIC=new Dt(q.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Dt.ALPHANUMERIC=new Dt(q.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Dt.STRUCTURED_APPEND=new Dt(q.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Dt.BYTE=new Dt(q.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Dt.ECI=new Dt(q.ECI,"ECI",Int32Array.from([0,0,0]),7),Dt.KANJI=new Dt(q.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Dt.FNC1_FIRST_POSITION=new Dt(q.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Dt.FNC1_SECOND_POSITION=new Dt(q.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Dt.HANZI=new Dt(q.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Mt{static decode(e,t,n,i){const r=new ft(e);let s=new R;const o=new Array;let a=-1,l=-1;try{let e,n=null,c=!1;do{if(r.available()<4)e=Dt.TERMINATOR;else{const t=r.readBits(4);e=Dt.forBits(t)}switch(e){case Dt.TERMINATOR:break;case Dt.FNC1_FIRST_POSITION:case Dt.FNC1_SECOND_POSITION:c=!0;break;case Dt.STRUCTURED_APPEND:if(r.available()<16)throw new E;a=r.readBits(8),l=r.readBits(8);break;case Dt.ECI:const u=Mt.parseECIValue(r);if(n=x.getCharacterSetECIByValue(u),null===n)throw new E;break;case Dt.HANZI:const d=r.readBits(4),h=r.readBits(e.getCharacterCountBits(t));d===Mt.GB2312_SUBSET&&Mt.decodeHanziSegment(r,s,h);break;default:const p=r.readBits(e.getCharacterCountBits(t));switch(e){case Dt.NUMERIC:Mt.decodeNumericSegment(r,s,p);break;case Dt.ALPHANUMERIC:Mt.decodeAlphanumericSegment(r,s,p,c);break;case Dt.BYTE:Mt.decodeByteSegment(r,s,p,n,o,i);break;case Dt.KANJI:Mt.decodeKanjiSegment(r,s,p);break;default:throw new E}}}while(e!==Dt.TERMINATOR)}catch(c){throw new E}return new Q(e,s.toString(),0===o.length?null:o,null===n?null:n.toString(),a,l)}static decodeHanziSegment(e,t,n){if(13*n>e.available())throw new E;const i=new Uint8Array(2*n);let r=0;for(;n>0;){const t=e.readBits(13);let s=t/96<<8&4294967295|t%96;s+=s<959?41377:42657,i[r]=s>>8&255,i[r+1]=255&s,r+=2,n--}try{t.append(T.decode(i,_.GB2312))}catch(s){throw new E(s)}}static decodeKanjiSegment(e,t,n){if(13*n>e.available())throw new E;const i=new Uint8Array(2*n);let r=0;for(;n>0;){const t=e.readBits(13);let s=t/192<<8&4294967295|t%192;s+=s<7936?33088:49472,i[r]=s>>8,i[r+1]=s,r+=2,n--}try{t.append(T.decode(i,_.SHIFT_JIS))}catch(s){throw new E(s)}}static decodeByteSegment(e,t,n,i,r,s){if(8*n>e.available())throw new E;const o=new Uint8Array(n);for(let c=0;c<n;c++)o[c]=e.readBits(8);let a;a=null===i?_.guessEncoding(o,s):i.getName();try{t.append(T.decode(o,a))}catch(l){throw new E(l)}r.push(o)}static toAlphaNumericChar(e){if(e>=Mt.ALPHANUMERIC_CHARS.length)throw new E;return Mt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,i){const r=t.length();for(;n>1;){if(e.available()<11)throw new E;const i=e.readBits(11);t.append(Mt.toAlphaNumericChar(Math.floor(i/45))),t.append(Mt.toAlphaNumericChar(i%45)),n-=2}if(1===n){if(e.available()<6)throw new E;t.append(Mt.toAlphaNumericChar(e.readBits(6)))}if(i)for(let s=r;s<t.length();s++)"%"===t.charAt(s)&&(s<t.length()-1&&"%"===t.charAt(s+1)?t.deleteCharAt(s+1):t.setCharAt(s,String.fromCharCode(29)))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new E;const i=e.readBits(10);if(i>=1e3)throw new E;t.append(Mt.toAlphaNumericChar(Math.floor(i/100))),t.append(Mt.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(Mt.toAlphaNumericChar(i%10)),n-=3}if(2===n){if(e.available()<7)throw new E;const n=e.readBits(7);if(n>=100)throw new E;t.append(Mt.toAlphaNumericChar(Math.floor(n/10))),t.append(Mt.toAlphaNumericChar(n%10))}else if(1===n){if(e.available()<4)throw new E;const n=e.readBits(4);if(n>=10)throw new E;t.append(Mt.toAlphaNumericChar(n))}}static parseECIValue(e){const t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new E}}Mt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Mt.GB2312_SUBSET=1;class Pt{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class It{constructor(){this.rsDecoder=new ie(ee.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(D.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new _t(e);let i=null;try{return this.decodeBitMatrixParser(n,t)}catch(r){i=r}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const e=this.decodeBitMatrixParser(n,t);return e.setOther(new Pt(!0)),e}catch(r){if(null!==i)throw i;throw r}}decodeBitMatrixParser(e,t){const n=e.readVersion(),i=e.readFormatInformation().getErrorCorrectionLevel(),r=e.readCodewords(),s=Rt.getDataBlocks(r,n,i);let o=0;for(const c of s)o+=c.getNumDataCodewords();const a=new Uint8Array(o);let l=0;for(const c of s){const e=c.getCodewords(),t=c.getNumDataCodewords();this.correctErrors(e,t);for(let n=0;n<t;n++)a[l++]=e[n]}return Mt.decode(a,n,i,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(i){throw new p}for(let r=0;r<t;r++)e[r]=n[r]}}class Nt extends ae{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const i=(this.getX()+t)/2,r=(this.getY()+e)/2,s=(this.estimatedModuleSize+n)/2;return new Nt(i,r,s)}}class kt{constructor(e,t,n,i,r,s,o){this.image=e,this.startX=t,this.startY=n,this.width=i,this.height=r,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=e+this.width,i=this.startY+t/2,r=new Int32Array(3),s=this.image;for(let o=0;o<t;o++){const t=i+(0===(1&o)?Math.floor((o+1)/2):-Math.floor((o+1)/2));r[0]=0,r[1]=0,r[2]=0;let a=e;for(;a<n&&!s.get(a,t);)a++;let l=0;for(;a<n;){if(s.get(a,t))if(1===l)r[1]++;else if(2===l){if(this.foundPatternCross(r)){const e=this.handlePossibleCenter(r,t,a);if(null!==e)return e}r[0]=r[2],r[1]=1,r[2]=0,l=1}else r[++l]++;else 1===l&&l++,r[l]++;a++}if(this.foundPatternCross(r)){const e=this.handlePossibleCenter(r,t,n);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new M}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let i=0;i<3;i++)if(Math.abs(t-e[i])>=n)return!1;return!0}crossCheckVertical(e,t,n,i){const r=this.image,s=r.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;let a=e;for(;a>=0&&r.get(t,a)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&!r.get(t,a)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;a<s&&r.get(t,a)&&o[1]<=n;)o[1]++,a++;if(a===s||o[1]>n)return NaN;for(;a<s&&!r.get(t,a)&&o[2]<=n;)o[2]++,a++;if(o[2]>n)return NaN;const l=o[0]+o[1]+o[2];return 5*Math.abs(l-i)>=2*i?NaN:this.foundPatternCross(o)?kt.centerFromEnd(o,a):NaN}handlePossibleCenter(e,t,n){const i=e[0]+e[1]+e[2],r=kt.centerFromEnd(e,n),s=this.crossCheckVertical(t,r,2*e[1],i);if(!isNaN(s)){const t=(e[0]+e[1]+e[2])/3;for(const e of this.possibleCenters)if(e.aboutEquals(t,s,r))return e.combineEstimate(s,r,t);const n=new Nt(r,s,t);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class Ot extends ae{constructor(e,t,n,i){super(e,t),this.estimatedModuleSize=n,this.count=i,void 0===i&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const i=this.count+1,r=(this.count*this.getX()+t)/i,s=(this.count*this.getY()+e)/i,o=(this.count*this.estimatedModuleSize+n)/i;return new Ot(r,s,o,i)}}class Lt{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ft{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=null!==e&&void 0!==e&&void 0!==e.get(S.TRY_HARDER),n=null!==e&&void 0!==e&&void 0!==e.get(S.PURE_BARCODE),i=this.image,r=i.getHeight(),s=i.getWidth();let o=Math.floor(3*r/(4*Ft.MAX_MODULES));(o<Ft.MIN_SKIP||t)&&(o=Ft.MIN_SKIP);let a=!1;const l=new Int32Array(5);for(let u=o-1;u<r&&!a;u+=o){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let e=0;for(let t=0;t<s;t++)if(i.get(t,u))1===(1&e)&&e++,l[e]++;else if(0===(1&e))if(4===e)if(Ft.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,u,t,n)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;continue}if(o=2,!0===this.hasSkipped)a=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>l[2]&&(u+=e-l[2]-o,t=s-1)}e=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;else l[++e]++;else l[e]++;Ft.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,u,s,n)&&(o=l[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}const c=this.selectBestPatterns();return ae.orderBestPatterns(c),new Lt(c)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let r=0;r<5;r++){const n=e[r];if(0===n)return!1;t+=n}if(t<7)return!1;const n=t/7,i=n/2;return Math.abs(n-e[0])<i&&Math.abs(n-e[1])<i&&Math.abs(3*n-e[2])<3*i&&Math.abs(n-e[3])<i&&Math.abs(n-e[4])<i}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,i){const r=this.getCrossCheckStateCount();let s=0;const o=this.image;for(;e>=s&&t>=s&&o.get(t-s,e-s);)r[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!o.get(t-s,e-s)&&r[1]<=n;)r[1]++,s++;if(e<s||t<s||r[1]>n)return!1;for(;e>=s&&t>=s&&o.get(t-s,e-s)&&r[0]<=n;)r[0]++,s++;if(r[0]>n)return!1;const a=o.getHeight(),l=o.getWidth();for(s=1;e+s<a&&t+s<l&&o.get(t+s,e+s);)r[2]++,s++;if(e+s>=a||t+s>=l)return!1;for(;e+s<a&&t+s<l&&!o.get(t+s,e+s)&&r[3]<n;)r[3]++,s++;if(e+s>=a||t+s>=l||r[3]>=n)return!1;for(;e+s<a&&t+s<l&&o.get(t+s,e+s)&&r[4]<n;)r[4]++,s++;if(r[4]>=n)return!1;const c=r[0]+r[1]+r[2]+r[3]+r[4];return Math.abs(c-i)<2*i&&Ft.foundPatternCross(r)}crossCheckVertical(e,t,n,i){const r=this.image,s=r.getHeight(),o=this.getCrossCheckStateCount();let a=e;for(;a>=0&&r.get(t,a);)o[2]++,a--;if(a<0)return NaN;for(;a>=0&&!r.get(t,a)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&r.get(t,a)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;a<s&&r.get(t,a);)o[2]++,a++;if(a===s)return NaN;for(;a<s&&!r.get(t,a)&&o[3]<n;)o[3]++,a++;if(a===s||o[3]>=n)return NaN;for(;a<s&&r.get(t,a)&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return NaN;const l=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(l-i)>=2*i?NaN:Ft.foundPatternCross(o)?Ft.centerFromEnd(o,a):NaN}crossCheckHorizontal(e,t,n,i){const r=this.image,s=r.getWidth(),o=this.getCrossCheckStateCount();let a=e;for(;a>=0&&r.get(a,t);)o[2]++,a--;if(a<0)return NaN;for(;a>=0&&!r.get(a,t)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&r.get(a,t)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;a<s&&r.get(a,t);)o[2]++,a++;if(a===s)return NaN;for(;a<s&&!r.get(a,t)&&o[3]<n;)o[3]++,a++;if(a===s||o[3]>=n)return NaN;for(;a<s&&r.get(a,t)&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return NaN;const l=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(l-i)>=i?NaN:Ft.foundPatternCross(o)?Ft.centerFromEnd(o,a):NaN}handlePossibleCenter(e,t,n,i){const r=e[0]+e[1]+e[2]+e[3]+e[4];let s=Ft.centerFromEnd(e,n),o=this.crossCheckVertical(t,Math.floor(s),e[2],r);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],r),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],r)))){const e=r/7;let t=!1;const n=this.possibleCenters;for(let i=0,r=n.length;i<r;i++){const r=n[i];if(r.aboutEquals(e,o,s)){n[i]=r.combineEstimate(o,s,e),t=!0;break}}if(!t){const t=new Ot(s,o,e);n.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(const t of this.possibleCenters)if(t.getCount()>=Ft.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);e=t}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const s of this.possibleCenters)s.getCount()>=Ft.CENTER_QUORUM&&(e++,t+=s.getEstimatedModuleSize());if(e<3)return!1;const i=t/n;let r=0;for(const s of this.possibleCenters)r+=Math.abs(s.getEstimatedModuleSize()-i);return r<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new M;const t=this.possibleCenters;let n;if(e>3){let i=0,r=0;for(const e of this.possibleCenters){const t=e.getEstimatedModuleSize();i+=t,r+=t*t}n=i/e;let s=Math.sqrt(r/e-n*n);t.sort(((e,t)=>{const i=Math.abs(t.getEstimatedModuleSize()-n),r=Math.abs(e.getEstimatedModuleSize()-n);return i<r?-1:i>r?1:0}));const o=Math.max(.2*n,s);for(let e=0;e<t.length&&t.length>3;e++){const i=t[e];Math.abs(i.getEstimatedModuleSize()-n)>o&&(t.splice(e,1),e--)}}if(t.length>3){let e=0;for(const n of t)e+=n.getEstimatedModuleSize();n=e/t.length,t.sort(((e,t)=>{if(t.getCount()===e.getCount()){const i=Math.abs(t.getEstimatedModuleSize()-n),r=Math.abs(e.getEstimatedModuleSize()-n);return i<r?1:i>r?-1:0}return t.getCount()-e.getCount()})),t.splice(3)}return[t[0],t[1],t[2]]}}Ft.CENTER_QUORUM=2,Ft.MIN_SKIP=3,Ft.MAX_MODULES=57;class Bt{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null===e||void 0===e?null:e.get(S.NEED_RESULT_POINT_CALLBACK);const t=new Ft(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),r=this.calculateModuleSize(t,n,i);if(r<1)throw new M("No pattern found in proccess finder.");const s=Bt.computeDimension(t,n,i,r),o=At.getProvisionalVersionForDimension(s),a=o.getDimensionForVersion()-7;let l=null;if(o.getAlignmentPatternCenters().length>0){const e=n.getX()-t.getX()+i.getX(),s=n.getY()-t.getY()+i.getY(),o=1-3/a,c=Math.floor(t.getX()+o*(e-t.getX())),u=Math.floor(t.getY()+o*(s-t.getY()));for(let t=4;t<=16;t<<=1)try{l=this.findAlignmentInRegion(r,c,u,t);break}catch(h){if(!(h instanceof M))throw h}}const c=Bt.createTransform(t,n,i,l,s),u=Bt.sampleGrid(this.image,c,s);let d;return d=null===l?[i,t,n]:[i,t,n,l],new le(u,d)}static createTransform(e,t,n,i,r){const s=r-3.5;let o,a,l,c;return null!==i?(o=i.getX(),a=i.getY(),l=s-3,c=l):(o=t.getX()-e.getX()+n.getX(),a=t.getY()-e.getY()+n.getY(),l=s,c=s),he.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,l,c,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),o,a,n.getX(),n.getY())}static sampleGrid(e,t,n){return ge.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,i){const r=se.round(ae.distance(e,t)/i),s=se.round(ae.distance(e,n)/i);let o=Math.floor((r+s)/2)+7;switch(3&o){case 0:o++;break;case 2:o--;break;case 3:throw new M("Dimensions could be not found.")}return o}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,i){let r=this.sizeOfBlackWhiteBlackRun(e,t,n,i),s=1,o=e-(n-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);let a=Math.floor(t-(i-t)*s);return s=1,a<0?(s=t/(t-a),a=0):a>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(a-t),a=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),r+=this.sizeOfBlackWhiteBlackRun(e,t,o,a),r-1}sizeOfBlackWhiteBlackRun(e,t,n,i){const r=Math.abs(i-t)>Math.abs(n-e);if(r){let r=e;e=t,t=r,r=n,n=i,i=r}const s=Math.abs(n-e),o=Math.abs(i-t);let a=-s/2;const l=e<n?1:-1,c=t<i?1:-1;let u=0;const d=n+l;for(let h=e,p=t;h!==d;h+=l){const n=r?p:h,l=r?h:p;if(1===u===this.image.get(n,l)){if(2===u)return se.distance(h,p,e,t);u++}if(a+=o,a>0){if(p===i)break;p+=c,a-=s}}return 2===u?se.distance(n+l,i,e,t):NaN}findAlignmentInRegion(e,t,n,i){const r=Math.floor(i*e),s=Math.max(0,t-r),o=Math.min(this.image.getWidth()-1,t+r);if(o-s<3*e)throw new M("Alignment top exceeds estimated module size.");const a=Math.max(0,n-r),l=Math.min(this.image.getHeight()-1,n+r);if(l-a<3*e)throw new M("Alignment bottom exceeds estimated module size.");return new kt(this.image,s,a,o-s,l-a,e,this.resultPointCallback).find()}}class Vt{constructor(){this.decoder=new It}getDecoder(){return this.decoder}decode(e,t){let n,i;if(void 0!==t&&null!==t&&void 0!==t.get(S.PURE_BARCODE)){const r=Vt.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(r,t),i=Vt.NO_POINTS}else{const r=new Bt(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(r.getBits(),t),i=r.getPoints()}n.getOther()instanceof Pt&&n.getOther().applyMirroredCorrection(i);const r=new G(n.getText(),n.getRawBytes(),void 0,i,W.QR_CODE,void 0),s=n.getByteSegments();null!==s&&r.putMetadata(X.BYTE_SEGMENTS,s);const o=n.getECLevel();return null!==o&&r.putMetadata(X.ERROR_CORRECTION_LEVEL,o),n.hasStructuredAppend()&&(r.putMetadata(X.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),r.putMetadata(X.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),r}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new M;const i=this.moduleSize(t,e);let r=t[1],s=n[1],o=t[0],a=n[0];if(o>=a||r>=s)throw new M;if(s-r!==a-o&&(a=o+(s-r),a>=e.getWidth()))throw new M;const l=Math.round((a-o+1)/i),c=Math.round((s-r+1)/i);if(l<=0||c<=0)throw new M;if(c!==l)throw new M;const u=Math.floor(i/2);r+=u,o+=u;const d=o+Math.floor((l-1)*i)-a;if(d>0){if(d>u)throw new M;o-=d}const h=r+Math.floor((c-1)*i)-s;if(h>0){if(h>u)throw new M;r-=h}const p=new D(l,c);for(let g=0;g<c;g++){const t=r+Math.floor(g*i);for(let n=0;n<l;n++)e.get(o+Math.floor(n*i),t)&&p.set(n,g)}return p}static moduleSize(e,t){const n=t.getHeight(),i=t.getWidth();let r=e[0],s=e[1],o=!0,a=0;for(;r<i&&s<n;){if(o!==t.get(r,s)){if(5===++a)break;o=!o}r++,s++}if(r===i||s===n)throw new M;return(r-e[0])/7}}Vt.NO_POINTS=new Array;class Gt{PDF417Common(){}static getBitCountSum(e){return se.sum(e)}static toIntArray(e){if(null==e||!e.length)return Gt.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const i of e)t[n++]=i;return t}static getCodeword(e){const t=y.binarySearch(Gt.SYMBOL_TABLE,262143&e);return t<0?-1:(Gt.CODEWORD_TABLE[t]-1)%Gt.NUMBER_OF_CODEWORDS}}Gt.NUMBER_OF_CODEWORDS=929,Gt.MAX_CODEWORDS_IN_BARCODE=Gt.NUMBER_OF_CODEWORDS-1,Gt.MIN_ROWS_IN_BARCODE=3,Gt.MAX_ROWS_IN_BARCODE=90,Gt.MODULES_IN_CODEWORD=17,Gt.MODULES_IN_STOP_PATTERN=18,Gt.BARS_IN_MODULE=8,Gt.EMPTY_INT_ARRAY=new Int32Array([]),Gt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Gt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ht{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Wt{static detectMultiple(e,t,n){let i=e.getBlackMatrix(),r=Wt.detect(n,i);return r.length||(i=i.clone(),i.rotate180(),r=Wt.detect(n,i)),new Ht(i,r)}static detect(e,t){const n=new Array;let i=0,r=0,s=!1;for(;i<t.getHeight();){const o=Wt.findVertices(t,i,r);if(null!=o[0]||null!=o[3]){if(s=!0,n.push(o),!e)break;null!=o[2]?(r=Math.trunc(o[2].getX()),i=Math.trunc(o[2].getY())):(r=Math.trunc(o[4].getX()),i=Math.trunc(o[4].getY()))}else{if(!s)break;s=!1,r=0;for(const e of n)null!=e[1]&&(i=Math.trunc(Math.max(i,e[1].getY()))),null!=e[3]&&(i=Math.max(i,Math.trunc(e[3].getY())));i+=Wt.ROW_STEP}}return n}static findVertices(e,t,n){const i=e.getHeight(),r=e.getWidth(),s=new Array(8);return Wt.copyToResult(s,Wt.findRowsWithPattern(e,i,r,t,n,Wt.START_PATTERN),Wt.INDEXES_START_PATTERN),null!=s[4]&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),Wt.copyToResult(s,Wt.findRowsWithPattern(e,i,r,t,n,Wt.STOP_PATTERN),Wt.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,n){for(let i=0;i<n.length;i++)e[n[i]]=t[i]}static findRowsWithPattern(e,t,n,i,r,s){const o=new Array(4);let a=!1;const l=new Int32Array(s.length);for(;i<t;i+=Wt.ROW_STEP){let t=Wt.findGuardPattern(e,r,i,n,!1,s,l);if(null!=t){for(;i>0;){const o=Wt.findGuardPattern(e,r,--i,n,!1,s,l);if(null==o){i++;break}t=o}o[0]=new ae(t[0],i),o[1]=new ae(t[1],i),a=!0;break}}let c=i+1;if(a){let i=0,r=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);for(;c<t;c++){const t=Wt.findGuardPattern(e,r[0],c,n,!1,s,l);if(null!=t&&Math.abs(r[0]-t[0])<Wt.MAX_PATTERN_DRIFT&&Math.abs(r[1]-t[1])<Wt.MAX_PATTERN_DRIFT)r=t,i=0;else{if(i>Wt.SKIPPED_ROW_COUNT_MAX)break;i++}}c-=i+1,o[2]=new ae(r[0],c),o[3]=new ae(r[1],c)}return c-i<Wt.BARCODE_MIN_HEIGHT&&y.fill(o,null),o}static findGuardPattern(e,t,n,i,r,s,o){y.fillWithin(o,0,o.length,0);let a=t,l=0;for(;e.get(a,n)&&a>0&&l++<Wt.MAX_PIXEL_DRIFT;)a--;let c=a,u=0,d=s.length;for(let h=r;c<i;c++)if(e.get(c,n)!==h)o[u]++;else{if(u===d-1){if(Wt.patternMatchVariance(o,s,Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE)return new Int32Array([a,c]);a+=o[0]+o[1],f.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,h=!h}return u===d-1&&Wt.patternMatchVariance(o,s,Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE?new Int32Array([a,c-1]):null}static patternMatchVariance(e,t,n){let i=e.length,r=0,s=0;for(let l=0;l<i;l++)r+=e[l],s+=t[l];if(r<s)return 1/0;let o=r/s;n*=o;let a=0;for(let l=0;l<i;l++){let i=e[l],r=t[l]*o,s=i>r?i-r:r-i;if(s>n)return 1/0;a+=s}return a/r}}Wt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Wt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Wt.MAX_AVG_VARIANCE=.42,Wt.MAX_INDIVIDUAL_VARIANCE=.8,Wt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Wt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Wt.MAX_PIXEL_DRIFT=3,Wt.MAX_PATTERN_DRIFT=5,Wt.SKIPPED_ROW_COUNT_MAX=25,Wt.ROW_STEP=5,Wt.BARCODE_MIN_HEIGHT=10;class jt{constructor(e,t){if(0===t.length)throw new d;this.field=e;let n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-e),f.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],n=this.coefficients.length;for(let i=1;i<n;i++)t=this.field.add(this.field.multiply(e,t),this.coefficients[i]);return t}add(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let e=t;t=n,n=e}let i=new Int32Array(n.length),r=n.length-t.length;f.arraycopy(n,0,i,0,r);for(let s=r;s<n.length;s++)i[s]=this.field.add(t[s-r],n[s]);return new jt(this.field,i)}subtract(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof jt?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new jt(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,i=e.coefficients,r=i.length,s=new Int32Array(n+r-1);for(let o=0;o<n;o++){let e=t[o];for(let t=0;t<r;t++)s[o+t]=this.field.add(s[o+t],this.field.multiply(e,i[t]))}return new jt(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new jt(this.field,t)}multiplyScalar(e){if(0===e)return new jt(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let i=0;i<t;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new jt(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new d;if(0===t)return new jt(this.field,new Int32Array([0]));let n=this.coefficients.length,i=new Int32Array(n+e);for(let r=0;r<n;r++)i[r]=this.field.multiply(this.coefficients[r],t);return new jt(this.field,i)}toString(){let e=new R;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Ut{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new d;return this.logTable[e]}inverse(e){if(0===e)throw new J;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class zt extends Ut{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let i=0;i<e;i++)this.expTable[i]=n,n=n*t%e;for(let i=0;i<e-1;i++)this.logTable[this.expTable[i]]=i;this.zero=new jt(this,new Int32Array([0])),this.one=new jt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new d;if(0===t)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new jt(this,n)}}zt.PDF417_GF=new zt(Gt.NUMBER_OF_CODEWORDS,3);class Yt{constructor(){this.field=zt.PDF417_GF}decode(e,t,n){let i=new jt(this.field,e),r=new Int32Array(t),s=!1;for(let p=t;p>0;p--){let e=i.evaluateAt(this.field.exp(p));r[t-p]=e,0!==e&&(s=!0)}if(!s)return 0;let o=this.field.getOne();if(null!=n)for(const p of n){let t=this.field.exp(e.length-1-p),n=new jt(this.field,new Int32Array([this.field.subtract(0,t),1]));o=o.multiply(n)}let a=new jt(this.field,r),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),a,t),c=l[0],u=l[1],d=this.findErrorLocations(c),h=this.findErrorMagnitudes(u,c,d);for(let g=0;g<d.length;g++){let t=e.length-1-this.field.log(d[g]);if(t<0)throw p.getChecksumInstance();e[t]=this.field.subtract(e[t],h[g])}return d.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let i=e,r=t,s=this.field.getZero(),o=this.field.getOne();for(;r.getDegree()>=Math.round(n/2);){let e=i,t=s;if(i=r,s=o,i.isZero())throw p.getChecksumInstance();r=e;let n=this.field.getZero(),a=i.getCoefficient(i.getDegree()),l=this.field.inverse(a);for(;r.getDegree()>=i.getDegree()&&!r.isZero();){let e=r.getDegree()-i.getDegree(),t=this.field.multiply(r.getCoefficient(r.getDegree()),l);n=n.add(this.field.buildMonomial(e,t)),r=r.subtract(i.multiplyByMonomial(e,t))}o=n.multiply(s).subtract(t).negative()}let a=o.getCoefficient(0);if(0===a)throw p.getChecksumInstance();let l=this.field.inverse(a);return[o.multiply(l),r.multiply(l)]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),i=0;for(let r=1;r<this.field.getSize()&&i<t;r++)0===e.evaluateAt(r)&&(n[i]=this.field.inverse(r),i++);if(i!==t)throw p.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let i=t.getDegree(),r=new Int32Array(i);for(let l=1;l<=i;l++)r[i-l]=this.field.multiply(l,t.getCoefficient(l));let s=new jt(this.field,r),o=n.length,a=new Int32Array(o);for(let l=0;l<o;l++){let t=this.field.inverse(n[l]),i=this.field.subtract(0,e.evaluateAt(t)),r=this.field.inverse(s.evaluateAt(t));a[l]=this.field.multiply(i,r)}return a}}class qt{constructor(e,t,n,i,r){e instanceof qt?this.constructor_2(e):this.constructor_1(e,t,n,i,r)}constructor_1(e,t,n,i,r){const s=null==t||null==n,o=null==i||null==r;if(s&&o)throw new M;s?(t=new ae(0,i.getY()),n=new ae(0,r.getY())):o&&(i=new ae(e.getWidth()-1,t.getY()),r=new ae(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=i,this.bottomRight=r,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),r.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),r.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new qt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let i=this.topLeft,r=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){let t=n?this.topLeft:this.topRight,r=Math.trunc(t.getY()-e);r<0&&(r=0);let o=new ae(t.getX(),r);n?i=o:s=o}if(t>0){let e=n?this.bottomLeft:this.bottomRight,i=Math.trunc(e.getY()+t);i>=this.image.getHeight()&&(i=this.image.getHeight()-1);let s=new ae(e.getX(),i);n?r=s:o=s}return new qt(this.image,i,r,s,o)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Kt{constructor(e,t,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Xt{constructor(){this.buffer=""}static form(e,t){let n=-1;function i(e,i,r,s,o,a){if("%%"===e)return"%";if(void 0===t[++n])return;e=s?parseInt(s.substr(1)):void 0;let l,c=o?parseInt(o.substr(1)):void 0;switch(a){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[n],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(r),d=r&&r[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==i?l+d:d+l;return l}let r=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(r,i)}format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.buffer+=Xt.form(e,n)}toString(){return this.buffer}}class Qt{constructor(e){this.boundingBox=new qt(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let n=1;n<Qt.MAX_NEARBY_DISTANCE;n++){let i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(t=this.codewords[i],null!=t))return t;if(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(t=this.codewords[i],null!=t))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Xt;let t=0;for(const n of this.codewords)null!=n?e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue()):e.format("%3d:    |   %n",t++);return e.toString()}}Qt.MAX_NEARBY_DISTANCE=5;class Zt{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,i]of this.values.entries()){const r={getKey:()=>n,getValue:()=>i};r.getValue()>e?(e=r.getValue(),t=[],t.push(r.getKey())):r.getValue()===e&&t.push(r.getKey())}return Gt.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class $t extends Qt{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),r=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=-1,l=1,c=0;for(let u=s;u<o;u++){if(null==t[u])continue;let n=t[u],i=n.getRowNumber()-a;if(0===i)c++;else if(1===i)l=Math.max(l,c),c=1,a=n.getRowNumber();else if(i<0||n.getRowNumber()>=e.getRowCount()||i>u)t[u]=null;else{let e;e=l>2?(l-2)*i:i;let r=e>=u;for(let n=1;n<=e&&!r;n++)r=null!=t[u-n];r?t[u]=null:(a=n.getRowNumber(),c=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(null!=n){let e=n.getRowNumber();if(e>=t.length)continue;t[e]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),i=this._isLeft?t.getBottomLeft():t.getBottomRight(),r=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.getCodewords(),a=-1;for(let l=r;l<s;l++){if(null==o[l])continue;let t=o[l];t.setRowNumberAsRowIndicatorColumn();let n=t.getRowNumber()-a;0===n||(1===n?a=t.getRowNumber():t.getRowNumber()>=e.getRowCount()?o[l]=null:a=t.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Zt,n=new Zt,i=new Zt,r=new Zt;for(let o of e){if(null==o)continue;o.setRowNumberAsRowIndicatorColumn();let e=o.getValue()%30,s=o.getRowNumber();switch(this._isLeft||(s+=2),s%3){case 0:n.setValue(3*e+1);break;case 1:r.setValue(e/3),i.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===n.getValue().length||0===i.getValue().length||0===r.getValue().length||t.getValue()[0]<1||n.getValue()[0]+i.getValue()[0]<Gt.MIN_ROWS_IN_BARCODE||n.getValue()[0]+i.getValue()[0]>Gt.MAX_ROWS_IN_BARCODE)return null;let s=new Kt(t.getValue()[0],n.getValue()[0],i.getValue()[0],r.getValue()[0]);return this.removeIncorrectCodewords(e,s),s}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let i=e[n];if(null==e[n])continue;let r=i.getValue()%30,s=i.getRowNumber();if(s>t.getRowCount())e[n]=null;else switch(this._isLeft||(s+=2),s%3){case 0:3*r+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(r/3)===t.getErrorCorrectionLevel()&&r%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:r+1!==t.getColumnCount()&&(e[n]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class Jt{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e,t=Gt.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let n=0;n<e.length;n++)null!=e[n]&&(e[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,e))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let i=this.detectionResultColumns[t].getCodewords()[n];null!=i&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let i=t[n].getRowNumber(),r=0;for(let t=this.barcodeColumnCount+1;t>0&&r<this.ADJUST_ROW_NUMBER_SKIP;t--){let s=this.detectionResultColumns[t].getCodewords()[n];null!=s&&(r=Jt.adjustRowNumberIfValid(i,r,s),s.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let i=t[n].getRowNumber(),r=0;for(let t=1;t<this.barcodeColumnCount+1&&r<this.ADJUST_ROW_NUMBER_SKIP;t++){let s=this.detectionResultColumns[t].getCodewords()[n];null!=s&&(r=Jt.adjustRowNumberIfValid(i,r,s),s.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let i=n[t],r=this.detectionResultColumns[e-1].getCodewords(),s=r;null!=this.detectionResultColumns[e+1]&&(s=this.detectionResultColumns[e+1].getCodewords());let o=new Array(14);o[2]=r[t],o[3]=s[t],t>0&&(o[0]=n[t-1],o[4]=r[t-1],o[5]=s[t-1]),t>1&&(o[8]=n[t-2],o[10]=r[t-2],o[11]=s[t-2]),t<n.length-1&&(o[1]=n[t+1],o[6]=r[t+1],o[7]=s[t+1]),t<n.length-2&&(o[9]=n[t+2],o[12]=r[t+2],o[13]=s[t+2]);for(let a of o)if(Jt.adjustRowNumber(i,a))return}static adjustRowNumber(e,t){return null!=t&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Xt;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let i=this.detectionResultColumns[e].getCodewords()[n];null!=i?t.format(" %3d|%3d",i.getRowNumber(),i.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}class en{constructor(e,t,n,i){this.rowNumber=en.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==en.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}en.BARCODE_ROW_UNKNOWN=-1;class tn{static initialize(){for(let e=0;e<Gt.SYMBOL_TABLE.length;e++){let t=Gt.SYMBOL_TABLE[e],n=1&t;for(let i=0;i<Gt.BARS_IN_MODULE;i++){let r=0;for(;(1&t)===n;)r+=1,t>>=1;n=1&t,tn.RATIOS_TABLE[e]||(tn.RATIOS_TABLE[e]=new Array(Gt.BARS_IN_MODULE)),tn.RATIOS_TABLE[e][Gt.BARS_IN_MODULE-i-1]=Math.fround(r/Gt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tn.getDecodedCodewordValue(tn.sampleBitCounts(e));return-1!==t?t:tn.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=se.sum(e),n=new Int32Array(Gt.BARS_IN_MODULE),i=0,r=0;for(let s=0;s<Gt.MODULES_IN_CODEWORD;s++){let o=t/(2*Gt.MODULES_IN_CODEWORD)+s*t/Gt.MODULES_IN_CODEWORD;r+e[i]<=o&&(r+=e[i],i++),n[i]++}return n}static getDecodedCodewordValue(e){let t=tn.getBitValue(e);return-1===Gt.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let i=0;i<e[n];i++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=se.sum(e),n=new Array(Gt.BARS_IN_MODULE);if(t>1)for(let s=0;s<n.length;s++)n[s]=Math.fround(e[s]/t);let i=oe.MAX_VALUE,r=-1;this.bSymbolTableReady||tn.initialize();for(let s=0;s<tn.RATIOS_TABLE.length;s++){let e=0,t=tn.RATIOS_TABLE[s];for(let r=0;r<Gt.BARS_IN_MODULE;r++){let s=Math.fround(t[r]-n[r]);if(e+=Math.fround(s*s),e>=i)break}e<i&&(i=e,r=Gt.SYMBOL_TABLE[s])}return r}}tn.bSymbolTableReady=!1,tn.RATIOS_TABLE=new Array(Gt.SYMBOL_TABLE.length).map((e=>new Array(Gt.BARS_IN_MODULE)));class nn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class rn{static parseLong(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}class sn extends c{}sn.kind="NullPointerException";class on{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(null==e)throw new sn;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new m;if(0!==n)for(let i=0;i<n;i++)this.write(e[t+i])}flush(){}close(){}}class an extends c{}class ln extends on{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(super(),this.count=0,e<0)throw new d("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new an;t=C.MAX_VALUE}this.buf=y.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new m;this.ensureCapacity(this.count+n),f.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return y.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function cn(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof n.g)return n.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let un;function dn(e){if("undefined"===typeof un&&(un=cn()),null===un)throw new Error("BigInt is not supported!");return un(e)}function hn(){let e=[];e[0]=dn(1);let t=dn(900);e[1]=t;for(let n=2;n<16;n++)e[n]=e[n-1]*t;return e}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(K||(K={}));class pn{static decode(e,t){let n=new R(""),i=x.ISO8859_1;n.enableDecoding(i);let r=1,s=e[r++],o=new nn;for(;r<e[0];){switch(s){case pn.TEXT_COMPACTION_MODE_LATCH:r=pn.textCompaction(e,r,n);break;case pn.BYTE_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:r=pn.byteCompaction(s,e,i,r,n);break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[r++]);break;case pn.NUMERIC_COMPACTION_MODE_LATCH:r=pn.numericCompaction(e,r,n);break;case pn.ECI_CHARSET:x.getCharacterSetECIByValue(e[r++]);break;case pn.ECI_GENERAL_PURPOSE:r+=2;break;case pn.ECI_USER_DEFINED:r++;break;case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:r=pn.decodeMacroBlock(e,r,o);break;case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:throw new E;default:r--,r=pn.textCompaction(e,r,n)}if(!(r<e.length))throw E.getFormatInstance();s=e[r++]}if(0===n.length())throw E.getFormatInstance();let a=new Q(null,n.toString(),null,t);return a.setOther(o),a}static decodeMacroBlock(e,t,n){if(t+pn.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw E.getFormatInstance();let i=new Int32Array(pn.NUMBER_OF_SEQUENCE_CODEWORDS);for(let o=0;o<pn.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];n.setSegmentIndex(C.parseInt(pn.decodeBase900toBase10(i,pn.NUMBER_OF_SEQUENCE_CODEWORDS)));let r=new R;t=pn.textCompaction(e,t,r),n.setFileId(r.toString());let s=-1;for(e[t]===pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let i=new R;t=pn.textCompaction(e,t+1,i),n.setFileName(i.toString());break;case pn.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let r=new R;t=pn.textCompaction(e,t+1,r),n.setSender(r.toString());break;case pn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let s=new R;t=pn.textCompaction(e,t+1,s),n.setAddressee(s.toString());break;case pn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let o=new R;t=pn.numericCompaction(e,t+1,o),n.setSegmentCount(C.parseInt(o.toString()));break;case pn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let a=new R;t=pn.numericCompaction(e,t+1,a),n.setTimestamp(rn.parseLong(a.toString()));break;case pn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new R;t=pn.numericCompaction(e,t+1,l),n.setChecksum(C.parseInt(l.toString()));break;case pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new R;t=pn.numericCompaction(e,t+1,c),n.setFileSize(rn.parseLong(c.toString()));break;default:throw E.getFormatInstance()}break;case pn.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw E.getFormatInstance()}if(-1!==s){let i=t-s;n.isLastSegment()&&i--,n.setOptionalData(y.copyOfRange(e,s,s+i))}return t}static textCompaction(e,t,n){let i=new Int32Array(2*(e[0]-t)),r=new Int32Array(2*(e[0]-t)),s=0,o=!1;for(;t<e[0]&&!o;){let n=e[t++];if(n<pn.TEXT_COMPACTION_MODE_LATCH)i[s]=n/30,i[s+1]=n%30,s+=2;else switch(n){case pn.TEXT_COMPACTION_MODE_LATCH:i[s++]=pn.TEXT_COMPACTION_MODE_LATCH;break;case pn.BYTE_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.NUMERIC_COMPACTION_MODE_LATCH:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:t--,o=!0;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=e[t++],r[s]=n,s++}}return pn.decodeTextCompaction(i,r,s,n),t}static decodeTextCompaction(e,t,n,i){let r=K.ALPHA,s=K.ALPHA,o=0;for(;o<n;){let n=e[o],a="";switch(r){case K.ALPHA:if(n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case pn.LL:r=K.LOWER;break;case pn.ML:r=K.MIXED;break;case pn.PS:s=r,r=K.PUNCT_SHIFT;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case pn.TEXT_COMPACTION_MODE_LATCH:r=K.ALPHA}break;case K.LOWER:if(n<26)a=String.fromCharCode(97+n);else switch(n){case 26:a=" ";break;case pn.AS:s=r,r=K.ALPHA_SHIFT;break;case pn.ML:r=K.MIXED;break;case pn.PS:s=r,r=K.PUNCT_SHIFT;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case pn.TEXT_COMPACTION_MODE_LATCH:r=K.ALPHA}break;case K.MIXED:if(n<pn.PL)a=pn.MIXED_CHARS[n];else switch(n){case pn.PL:r=K.PUNCT;break;case 26:a=" ";break;case pn.LL:r=K.LOWER;break;case pn.AL:r=K.ALPHA;break;case pn.PS:s=r,r=K.PUNCT_SHIFT;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case pn.TEXT_COMPACTION_MODE_LATCH:r=K.ALPHA}break;case K.PUNCT:if(n<pn.PAL)a=pn.PUNCT_CHARS[n];else switch(n){case pn.PAL:r=K.ALPHA;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case pn.TEXT_COMPACTION_MODE_LATCH:r=K.ALPHA}break;case K.ALPHA_SHIFT:if(r=s,n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case pn.TEXT_COMPACTION_MODE_LATCH:r=K.ALPHA}break;case K.PUNCT_SHIFT:if(r=s,n<pn.PAL)a=pn.PUNCT_CHARS[n];else switch(n){case pn.PAL:r=K.ALPHA;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[o]);break;case pn.TEXT_COMPACTION_MODE_LATCH:r=K.ALPHA}}""!==a&&i.append(a),o++}}static byteCompaction(e,t,n,i,r){let s=new ln,o=0,a=0,l=!1;switch(e){case pn.BYTE_COMPACTION_MODE_LATCH:let e=new Int32Array(6),n=t[i++];for(;i<t[0]&&!l;)switch(e[o++]=n,a=900*a+n,n=t[i++],n){case pn.TEXT_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH:case pn.NUMERIC_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:i--,l=!0;break;default:if(o%5===0&&o>0){for(let e=0;e<6;++e)s.write(Number(dn(a)>>dn(8*(5-e))));a=0,o=0}}i===t[0]&&n<pn.TEXT_COMPACTION_MODE_LATCH&&(e[o++]=n);for(let t=0;t<o;t++)s.write(e[t]);break;case pn.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!l;){let e=t[i++];if(e<pn.TEXT_COMPACTION_MODE_LATCH)o++,a=900*a+e;else switch(e){case pn.TEXT_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH:case pn.NUMERIC_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:i--,l=!0}if(o%5===0&&o>0){for(let e=0;e<6;++e)s.write(Number(dn(a)>>dn(8*(5-e))));a=0,o=0}}}return r.append(T.decode(s.toByteArray(),n)),i}static numericCompaction(e,t,n){let i=0,r=!1,s=new Int32Array(pn.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!r;){let o=e[t++];if(t===e[0]&&(r=!0),o<pn.TEXT_COMPACTION_MODE_LATCH)s[i]=o,i++;else switch(o){case pn.TEXT_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:t--,r=!0}(i%pn.MAX_NUMERIC_CODEWORDS===0||o===pn.NUMERIC_COMPACTION_MODE_LATCH||r)&&i>0&&(n.append(pn.decodeBase900toBase10(s,i)),i=0)}return t}static decodeBase900toBase10(e,t){let n=dn(0);for(let r=0;r<t;r++)n+=pn.EXP900[t-r-1]*dn(e[r]);let i=n.toString();if("1"!==i.charAt(0))throw new E;return i.substring(1)}}pn.TEXT_COMPACTION_MODE_LATCH=900,pn.BYTE_COMPACTION_MODE_LATCH=901,pn.NUMERIC_COMPACTION_MODE_LATCH=902,pn.BYTE_COMPACTION_MODE_LATCH_6=924,pn.ECI_USER_DEFINED=925,pn.ECI_GENERAL_PURPOSE=926,pn.ECI_CHARSET=927,pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,pn.MACRO_PDF417_TERMINATOR=922,pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,pn.MAX_NUMERIC_CODEWORDS=15,pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,pn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,pn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,pn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,pn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,pn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,pn.PL=25,pn.LL=27,pn.AS=27,pn.ML=28,pn.AL=28,pn.PS=29,pn.PAL=29,pn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",pn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",pn.EXP900=cn()?hn():[],pn.NUMBER_OF_SEQUENCE_CODEWORDS=2;class gn{constructor(){}static decode(e,t,n,i,r,s,o){let a,l=new qt(e,t,n,i,r),c=null,u=null;for(let p=!0;;p=!1){if(null!=t&&(c=gn.getRowIndicatorColumn(e,l,t,!0,s,o)),null!=i&&(u=gn.getRowIndicatorColumn(e,l,i,!1,s,o)),a=gn.merge(c,u),null==a)throw M.getNotFoundInstance();let n=a.getBoundingBox();if(!p||null==n||!(n.getMinY()<l.getMinY()||n.getMaxY()>l.getMaxY()))break;l=n}a.setBoundingBox(l);let d=a.getBarcodeColumnCount()+1;a.setDetectionResultColumn(0,c),a.setDetectionResultColumn(d,u);let h=null!=c;for(let p=1;p<=d;p++){let t,n=h?p:d-p;if(void 0!==a.getDetectionResultColumn(n))continue;t=0===n||n===d?new $t(l,0===n):new Qt(l),a.setDetectionResultColumn(n,t);let i=-1,r=i;for(let c=l.getMinY();c<=l.getMaxY();c++){if(i=gn.getStartColumn(a,n,c,h),i<0||i>l.getMaxX()){if(-1===r)continue;i=r}let u=gn.detectCodeword(e,l.getMinX(),l.getMaxX(),h,i,c,s,o);null!=u&&(t.setCodeword(c,u),r=i,s=Math.min(s,u.getWidth()),o=Math.max(o,u.getWidth()))}}return gn.createDecoderResult(a)}static merge(e,t){if(null==e&&null==t)return null;let n=gn.getBarcodeMetadata(e,t);if(null==n)return null;let i=qt.merge(gn.adjustBoundingBox(e),gn.adjustBoundingBox(t));return new Jt(n,i)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let n=gn.getMax(t),i=0;for(let o of t)if(i+=n-o,o>0)break;let r=e.getCodewords();for(let o=0;i>0&&null==r[o];o++)i--;let s=0;for(let o=t.length-1;o>=0&&(s+=n-t[o],!(t[o]>0));o--);for(let o=r.length-1;s>0&&null==r[o];o--)s--;return e.getBoundingBox().addMissingRows(i,s,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n,i;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(i=t.getBarcodeMetadata())?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,i,r,s){let o=new $t(t,i);for(let a=0;a<2;a++){let l=0===a?1:-1,c=Math.trunc(Math.trunc(n.getX()));for(let a=Math.trunc(Math.trunc(n.getY()));a<=t.getMaxY()&&a>=t.getMinY();a+=l){let t=gn.detectCodeword(e,0,e.getWidth(),i,c,a,r,s);null!=t&&(o.setCodeword(a,t),c=i?t.getStartX():t.getEndX())}}return o}static adjustCodewordCount(e,t){let n=t[0][1],i=n.getValue(),r=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-gn.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===i.length){if(r<1||r>Gt.MAX_CODEWORDS_IN_BARCODE)throw M.getNotFoundInstance();n.setValue(r)}else i[0]!==r&&n.setValue(r)}static createDecoderResult(e){let t=gn.createBarcodeMatrix(e);gn.adjustCodewordCount(e,t);let n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),r=[],s=new Array;for(let a=0;a<e.getBarcodeRowCount();a++)for(let o=0;o<e.getBarcodeColumnCount();o++){let l=t[a][o+1].getValue(),c=a*e.getBarcodeColumnCount()+o;0===l.length?n.push(c):1===l.length?i[c]=l[0]:(s.push(c),r.push(l))}let o=new Array(r.length);for(let a=0;a<o.length;a++)o[a]=r[a];return gn.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Gt.toIntArray(n),Gt.toIntArray(s),o)}static createDecoderResultFromAmbiguousValues(e,t,n,i,r){let s=new Int32Array(i.length),o=100;for(;o-- >0;){for(let e=0;e<s.length;e++)t[i[e]]=r[e][s[e]];try{return gn.decodeCodewords(t,e,n)}catch(a){if(!(a instanceof p))throw a}if(0===s.length)throw p.getChecksumInstance();for(let e=0;e<s.length;e++){if(s[e]<r[e].length-1){s[e]++;break}if(s[e]=0,e===s.length-1)throw p.getChecksumInstance()}}throw p.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},(()=>new Array(e.getBarcodeColumnCount()+2)));for(let i=0;i<t.length;i++)for(let e=0;e<t[i].length;e++)t[i][e]=new Zt;let n=0;for(let i of e.getDetectionResultColumns()){if(null!=i)for(let e of i.getCodewords())if(null!=e){let i=e.getRowNumber();if(i>=0){if(i>=t.length)continue;t[i][n].setValue(e.getValue())}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,i){let r=i?1:-1,s=null;if(gn.isValidBarcodeColumn(e,t-r)&&(s=e.getDetectionResultColumn(t-r).getCodeword(n)),null!=s)return i?s.getEndX():s.getStartX();if(s=e.getDetectionResultColumn(t).getCodewordNearby(n),null!=s)return i?s.getStartX():s.getEndX();if(gn.isValidBarcodeColumn(e,t-r)&&(s=e.getDetectionResultColumn(t-r).getCodewordNearby(n)),null!=s)return i?s.getEndX():s.getStartX();let o=0;for(;gn.isValidBarcodeColumn(e,t-r);){t-=r;for(let n of e.getDetectionResultColumn(t).getCodewords())if(null!=n)return(i?n.getEndX():n.getStartX())+r*o*(n.getEndX()-n.getStartX());o++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,i,r,s,o,a){r=gn.adjustCodewordStartColumn(e,t,n,i,r,s);let l,c=gn.getModuleBitCount(e,t,n,i,r,s);if(null==c)return null;let u=se.sum(c);if(i)l=r+u;else{for(let e=0;e<c.length/2;e++){let t=c[e];c[e]=c[c.length-1-e],c[c.length-1-e]=t}l=r,r=l-u}if(!gn.checkCodewordSkew(u,o,a))return null;let d=tn.getDecodedValue(c),h=Gt.getCodeword(d);return-1===h?null:new en(r,l,gn.getCodewordBucketNumber(d),h)}static getModuleBitCount(e,t,n,i,r,s){let o=r,a=new Int32Array(8),l=0,c=i?1:-1,u=i;for(;(i?o<n:o>=t)&&l<a.length;)e.get(o,s)===u?(a[l]++,o+=c):(l++,u=!u);return l===a.length||o===(i?n:t)&&l===a.length-1?a:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,i,r,s){let o=r,a=i?-1:1;for(let l=0;l<2;l++){for(;(i?o>=t:o<n)&&i===e.get(o,s);){if(Math.abs(r-o)>gn.CODEWORD_SKEW_SIZE)return r;o+=a}a=-a,i=!i}return o}static checkCodewordSkew(e,t,n){return t-gn.CODEWORD_SKEW_SIZE<=e&&e<=n+gn.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(0===e.length)throw E.getFormatInstance();let i=1<<t+1,r=gn.correctErrors(e,n,i);gn.verifyCodewordCount(e,i);let s=pn.decode(e,""+t);return s.setErrorsCorrected(r),s.setErasures(n.length),s}static correctErrors(e,t,n){if(null!=t&&t.length>n/2+gn.MAX_ERRORS||n<0||n>gn.MAX_EC_CODEWORDS)throw p.getChecksumInstance();return gn.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw E.getFormatInstance();let n=e[0];if(n>e.length)throw E.getFormatInstance();if(0===n){if(!(t<e.length))throw E.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,i=t.length-1;for(;!((1&e)!==n&&(n=1&e,i--,i<0));)t[i]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return gn.getCodewordBucketNumber(gn.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Xt;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let i=0;i<e[n].length;i++){let r=e[n][i];0===r.getValue().length?t.format("        ",null):t.format("%4d(%2d)",r.getValue()[0],r.getConfidence(r.getValue()[0]))}t.format("%n")}return t.toString()}}gn.CODEWORD_SKEW_SIZE=2,gn.MAX_ERRORS=3,gn.MAX_EC_CODEWORDS=512,gn.errorCorrection=new Yt;class fn{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=fn.decode(e,t,!1);if(null==n||0===n.length||null==n[0])throw M.getNotFoundInstance();return n[0]}decodeMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return fn.decode(e,t,!0)}catch(n){if(n instanceof E||n instanceof p)throw M.getNotFoundInstance();throw n}}static decode(e,t,n){const i=new Array,r=Wt.detectMultiple(e,t,n);for(const s of r.getPoints()){const e=gn.decode(r.getBits(),s[4],s[5],s[6],s[7],fn.getMinCodewordWidth(s),fn.getMaxCodewordWidth(s)),t=new G(e.getText(),e.getRawBytes(),void 0,s,W.PDF_417);t.putMetadata(X.ERROR_CORRECTION_LEVEL,e.getECLevel());const n=e.getOther();null!=n&&t.putMetadata(X.PDF417_EXTRA_METADATA,n),i.push(t)}return i.map((e=>e))}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?C.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(fn.getMaxWidth(e[0],e[4]),fn.getMaxWidth(e[6],e[2])*Gt.MODULES_IN_CODEWORD/Gt.MODULES_IN_STOP_PATTERN),Math.max(fn.getMaxWidth(e[1],e[5]),fn.getMaxWidth(e[7],e[3])*Gt.MODULES_IN_CODEWORD/Gt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(fn.getMinWidth(e[0],e[4]),fn.getMinWidth(e[6],e[2])*Gt.MODULES_IN_CODEWORD/Gt.MODULES_IN_STOP_PATTERN),Math.min(fn.getMinWidth(e[1],e[5]),fn.getMinWidth(e[7],e[3])*Gt.MODULES_IN_CODEWORD/Gt.MODULES_IN_STOP_PATTERN)))}reset(){}}class mn extends c{}mn.kind="ReaderException";class vn{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!t(e)&&!0===e.get(S.TRY_HARDER),i=t(e)?null:e.get(S.POSSIBLE_FORMATS),r=new Array;if(!t(i)){const t=i.some((e=>e===W.UPC_A||e===W.UPC_E||e===W.EAN_13||e===W.EAN_8||e===W.CODABAR||e===W.CODE_39||e===W.CODE_93||e===W.CODE_128||e===W.ITF||e===W.RSS_14||e===W.RSS_EXPANDED));t&&!n&&r.push(new lt(e,this.verbose)),i.includes(W.QR_CODE)&&r.push(new Vt),i.includes(W.DATA_MATRIX)&&r.push(new Ct),i.includes(W.AZTEC)&&r.push(new ve),i.includes(W.PDF_417)&&r.push(new fn),t&&n&&r.push(new lt(e,this.verbose))}0===r.length&&(n||r.push(new lt(e,this.verbose)),r.push(new Vt),r.push(new Ct),r.push(new ve),r.push(new fn),n&&r.push(new lt(e,this.verbose))),this.readers=r}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new mn("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(t){if(t instanceof mn)continue}throw new M("No MultiFormat Readers were able to detect the code.")}}class yn extends V{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const n=new vn;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class Cn extends V{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new fn,e)}}class wn extends V{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new Vt,e)}}var bn;!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(bn||(bn={}));var Sn=bn;class En{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new $(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const i=this.field;for(let r=t.length;r<=e;r++){const e=n.multiply(new $(i,Int32Array.from([1,i.exp(r-1+i.getGeneratorBase())])));t.push(e),n=e}}return t[e]}encode(e,t){if(0===t)throw new d("No error correction bytes");const n=e.length-t;if(n<=0)throw new d("No data bytes provided");const i=this.buildGenerator(t),r=new Int32Array(n);f.arraycopy(e,0,r,0,n);let s=new $(this.field,r);s=s.multiplyByMonomial(t,1);const o=s.divide(i)[1].getCoefficients(),a=t-o.length;for(let l=0;l<a;l++)e[n+l]=0;f.arraycopy(o,0,e,n+a,o.length)}}class xn{constructor(){}static applyMaskPenaltyRule1(e){return xn.applyMaskPenaltyRule1Internal(e,!0)+xn.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),i=e.getWidth(),r=e.getHeight();for(let s=0;s<r-1;s++){const e=n[s];for(let r=0;r<i-1;r++){const i=e[r];i===e[r+1]&&i===n[s+1][r]&&i===n[s+1][r+1]&&t++}}return xn.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),i=e.getWidth(),r=e.getHeight();for(let s=0;s<r;s++)for(let e=0;e<i;e++){const o=n[s];e+6<i&&1===o[e]&&0===o[e+1]&&1===o[e+2]&&1===o[e+3]&&1===o[e+4]&&0===o[e+5]&&1===o[e+6]&&(xn.isWhiteHorizontal(o,e-4,e)||xn.isWhiteHorizontal(o,e+7,e+11))&&t++,s+6<r&&1===n[s][e]&&0===n[s+1][e]&&1===n[s+2][e]&&1===n[s+3][e]&&1===n[s+4][e]&&0===n[s+5][e]&&1===n[s+6][e]&&(xn.isWhiteVertical(n,e,s-4,s)||xn.isWhiteVertical(n,e,s+7,s+11))&&t++}return t*xn.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let i=t;i<n;i++)if(1===e[i])return!1;return!0}static isWhiteVertical(e,t,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let r=n;r<i;r++)if(1===e[r][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),i=e.getWidth(),r=e.getHeight();for(let o=0;o<r;o++){const e=n[o];for(let n=0;n<i;n++)1===e[n]&&t++}const s=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-s)/s)*xn.N4}static getDataMaskBit(e,t,n){let i,r;switch(e){case 0:i=n+t&1;break;case 1:i=1&n;break;case 2:i=t%3;break;case 3:i=(n+t)%3;break;case 4:i=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:r=n*t,i=(1&r)+r%3;break;case 6:r=n*t,i=(1&r)+r%3&1;break;case 7:r=n*t,i=r%3+(n+t&1)&1;break;default:throw new d("Invalid mask pattern: "+e)}return 0===i}static applyMaskPenaltyRule1Internal(e,t){let n=0;const i=t?e.getHeight():e.getWidth(),r=t?e.getWidth():e.getHeight(),s=e.getArray();for(let o=0;o<i;o++){let e=0,i=-1;for(let a=0;a<r;a++){const r=t?s[o][a]:s[a][o];r===i?e++:(e>=5&&(n+=xn.N1+(e-5)),e=1,i=r)}e>=5&&(n+=xn.N1+(e-5))}return n}}xn.N1=3,xn.N2=3,xn.N3=40,xn.N4=10;class An{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let i=0;i!==t;i++)n[i]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)y.fill(t,e)}equals(e){if(!(e instanceof An))return!1;const t=e;if(this.width!==t.width)return!1;if(this.height!==t.height)return!1;for(let n=0,i=this.height;n<i;++n){const e=this.bytes[n],i=t.bytes[n];for(let t=0,n=this.width;t<n;++t)if(e[t]!==i[t])return!1}return!0}toString(){const e=new R;for(let t=0,n=this.height;t<n;++t){const n=this.bytes[t];for(let t=0,i=this.width;t<i;++t)switch(n[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class Tn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new R;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Tn.NUM_MASK_PATTERNS}}Tn.NUM_MASK_PATTERNS=8;class _n extends c{}_n.kind="WriterException";class Rn{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,i,r){Rn.clearMatrix(r),Rn.embedBasicPatterns(n,r),Rn.embedTypeInfo(t,i,r),Rn.maybeEmbedVersionInfo(n,r),Rn.embedDataBits(e,i,r)}static embedBasicPatterns(e,t){Rn.embedPositionDetectionPatternsAndSeparators(t),Rn.embedDarkDotAtLeftBottomCorner(t),Rn.maybeEmbedPositionAdjustmentPatterns(e,t),Rn.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const i=new w;Rn.makeTypeInfoBits(e,t,i);for(let r=0,s=i.getSize();r<s;++r){const e=i.get(i.getSize()-1-r),t=Rn.TYPE_INFO_COORDINATES[r],s=t[0],o=t[1];if(n.setBoolean(s,o,e),r<8){const t=n.getWidth()-r-1,i=8;n.setBoolean(t,i,e)}else{const t=8,i=n.getHeight()-7+(r-8);n.setBoolean(t,i,e)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new w;Rn.makeVersionInfoBits(e,n);let i=17;for(let r=0;r<6;++r)for(let e=0;e<3;++e){const s=n.get(i);i--,t.setBoolean(r,t.getHeight()-11+e,s),t.setBoolean(t.getHeight()-11+e,r,s)}}static embedDataBits(e,t,n){let i=0,r=-1,s=n.getWidth()-1,o=n.getHeight()-1;for(;s>0;){for(6===s&&(s-=1);o>=0&&o<n.getHeight();){for(let r=0;r<2;++r){const a=s-r;if(!Rn.isEmpty(n.get(a,o)))continue;let l;i<e.getSize()?(l=e.get(i),++i):l=!1,255!==t&&xn.getDataMaskBit(t,a,o)&&(l=!l),n.setBoolean(a,o,l)}o+=r}r=-r,o+=r,s-=2}if(i!==e.getSize())throw new _n("Not all bits consumed: "+i+"/"+e.getSize())}static findMSBSet(e){return 32-C.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new d("0 polynomial");const n=Rn.findMSBSet(t);for(e<<=n-1;Rn.findMSBSet(e)>=n;)e^=t<<Rn.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!Tn.isValidMaskPattern(t))throw new _n("Invalid mask pattern");const i=e.getBits()<<3|t;n.appendBits(i,5);const r=Rn.calculateBCHCode(i,Rn.TYPE_INFO_POLY);n.appendBits(r,10);const s=new w;if(s.appendBits(Rn.TYPE_INFO_MASK_PATTERN,15),n.xor(s),15!==n.getSize())throw new _n("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=Rn.calculateBCHCode(e.getVersionNumber(),Rn.VERSION_INFO_POLY);if(t.appendBits(n,12),18!==t.getSize())throw new _n("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;Rn.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),Rn.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new _n;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let i=0;i<8;++i){if(!Rn.isEmpty(n.get(e+i,t)))throw new _n;n.setNumber(e+i,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let i=0;i<7;++i){if(!Rn.isEmpty(n.get(e,t+i)))throw new _n;n.setNumber(e,t+i,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let i=0;i<5;++i){const r=Rn.POSITION_ADJUSTMENT_PATTERN[i];for(let s=0;s<5;++s)n.setNumber(e+s,t+i,r[s])}}static embedPositionDetectionPattern(e,t,n){for(let i=0;i<7;++i){const r=Rn.POSITION_DETECTION_PATTERN[i];for(let s=0;s<7;++s)n.setNumber(e+s,t+i,r[s])}}static embedPositionDetectionPatternsAndSeparators(e){const t=Rn.POSITION_DETECTION_PATTERN[0].length;Rn.embedPositionDetectionPattern(0,0,e),Rn.embedPositionDetectionPattern(e.getWidth()-t,0,e),Rn.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;Rn.embedHorizontalSeparationPattern(0,n-1,e),Rn.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),Rn.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const i=7;Rn.embedVerticalSeparationPattern(i,0,e),Rn.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),Rn.embedVerticalSeparationPattern(i,e.getHeight()-i,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,i=Rn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let r=0,s=i.length;r!==s;r++){const e=i[r];if(e>=0)for(let n=0;n!==s;n++){const r=i[n];r>=0&&Rn.isEmpty(t.get(r,e))&&Rn.embedPositionAdjustmentPattern(r-2,e-2,t)}}}}Rn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Rn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Rn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Rn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Rn.VERSION_INFO_POLY=7973,Rn.TYPE_INFO_POLY=1335,Rn.TYPE_INFO_MASK_PATTERN=21522;class Dn{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Mn{constructor(){}static calculateMaskPenalty(e){return xn.applyMaskPenaltyRule1(e)+xn.applyMaskPenaltyRule2(e)+xn.applyMaskPenaltyRule3(e)+xn.applyMaskPenaltyRule4(e)}static encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=Mn.DEFAULT_BYTE_MODE_ENCODING;const r=null!==n&&void 0!==n.get(Sn.CHARACTER_SET);r&&(i=n.get(Sn.CHARACTER_SET).toString());const s=this.chooseMode(e,i),o=new w;if(s===Dt.BYTE&&(r||Mn.DEFAULT_BYTE_MODE_ENCODING!==i)){const e=x.getCharacterSetECIByName(i);void 0!==e&&this.appendECI(e,o)}this.appendModeInfo(s,o);const a=new w;let l;if(this.appendBytes(e,s,a,i),null!==n&&void 0!==n.get(Sn.QR_VERSION)){const e=Number.parseInt(n.get(Sn.QR_VERSION).toString(),10);l=At.getVersionForNumber(e);const i=this.calculateBitsNeeded(s,o,a,l);if(!this.willFit(i,l,t))throw new _n("Data too big for requested version")}else l=this.recommendVersion(t,s,o,a);const c=new w;c.appendBitArray(o);const u=s===Dt.BYTE?a.getSizeInBytes():e.length;this.appendLengthInfo(u,l,s,c),c.appendBitArray(a);const d=l.getECBlocksForLevel(t),h=l.getTotalCodewords()-d.getTotalECCodewords();this.terminateBits(h,c);const p=this.interleaveWithECBytes(c,l.getTotalCodewords(),h,d.getNumBlocks()),g=new Tn;g.setECLevel(t),g.setMode(s),g.setVersion(l);const f=l.getDimensionForVersion(),m=new An(f,f),v=this.chooseMaskPattern(p,t,l,m);return g.setMaskPattern(v),Rn.buildMatrix(p,t,l,v,m),g.setMatrix(m),g}static recommendVersion(e,t,n,i){const r=this.calculateBitsNeeded(t,n,i,At.getVersionForNumber(1)),s=this.chooseVersion(r,e),o=this.calculateBitsNeeded(t,n,i,s);return this.chooseVersion(o,e)}static calculateBitsNeeded(e,t,n,i){return t.getSize()+e.getCharacterCountBits(i)+n.getSize()}static getAlphanumericCode(e){return e<Mn.ALPHANUMERIC_TABLE.length?Mn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(x.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Dt.KANJI;let n=!1,i=!1;for(let r=0,s=e.length;r<s;++r){const t=e.charAt(r);if(Mn.isDigit(t))n=!0;else{if(-1===this.getAlphanumericCode(t.charCodeAt(0)))return Dt.BYTE;i=!0}}return i?Dt.ALPHANUMERIC:n?Dt.NUMERIC:Dt.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=T.encode(e,x.SJIS)}catch(i){return!1}const n=t.length;if(n%2!==0)return!1;for(let r=0;r<n;r+=2){const e=255&t[r];if((e<129||e>159)&&(e<224||e>235))return!1}return!0}static chooseMaskPattern(e,t,n,i){let r=Number.MAX_SAFE_INTEGER,s=-1;for(let o=0;o<Tn.NUM_MASK_PATTERNS;o++){Rn.buildMatrix(e,t,n,o,i);let a=this.calculateMaskPenalty(i);a<r&&(r=a,s=o)}return s}static chooseVersion(e,t){for(let n=1;n<=40;n++){const i=At.getVersionForNumber(n);if(Mn.willFit(e,i,t))return i}throw new _n("Data too big")}static willFit(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){const n=8*e;if(t.getSize()>n)throw new _n("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let s=0;s<4&&t.getSize()<n;++s)t.appendBit(!1);const i=7&t.getSize();if(i>0)for(let s=i;s<8;s++)t.appendBit(!1);const r=e-t.getSizeInBytes();for(let s=0;s<r;++s)t.appendBits(0===(1&s)?236:17,8);if(t.getSize()!==n)throw new _n("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,i,r,s){if(i>=n)throw new _n("Block ID too large");const o=e%n,a=n-o,l=Math.floor(e/n),c=l+1,u=Math.floor(t/n),d=u+1,h=l-u,p=c-d;if(h!==p)throw new _n("EC bytes mismatch");if(n!==a+o)throw new _n("RS blocks mismatch");if(e!==(u+h)*a+(d+p)*o)throw new _n("Total bytes mismatch");i<a?(r[0]=u,s[0]=h):(r[0]=d,s[0]=p)}static interleaveWithECBytes(e,t,n,i){if(e.getSizeInBytes()!==n)throw new _n("Number of bits and data bytes does not match");let r=0,s=0,o=0;const a=new Array;for(let c=0;c<i;++c){const l=new Int32Array(1),u=new Int32Array(1);Mn.getNumDataBytesAndNumECBytesForBlockID(t,n,i,c,l,u);const d=l[0],h=new Uint8Array(d);e.toBytes(8*r,h,0,d);const p=Mn.generateECBytes(h,u[0]);a.push(new Dn(h,p)),s=Math.max(s,d),o=Math.max(o,p.length),r+=l[0]}if(n!==r)throw new _n("Data bytes does not match offset");const l=new w;for(let c=0;c<s;++c)for(const e of a){const t=e.getDataBytes();c<t.length&&l.appendBits(t[c],8)}for(let c=0;c<o;++c)for(const e of a){const t=e.getErrorCorrectionBytes();c<t.length&&l.appendBits(t[c],8)}if(t!==l.getSizeInBytes())throw new _n("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){const n=e.length,i=new Int32Array(n+t);for(let s=0;s<n;s++)i[s]=255&e[s];new En(ee.QR_CODE_FIELD_256).encode(i,t);const r=new Uint8Array(t);for(let s=0;s<t;s++)r[s]=i[n+s];return r}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,i){const r=n.getCharacterCountBits(t);if(e>=1<<r)throw new _n(e+" is bigger than "+((1<<r)-1));i.appendBits(e,r)}static appendBytes(e,t,n,i){switch(t){case Dt.NUMERIC:Mn.appendNumericBytes(e,n);break;case Dt.ALPHANUMERIC:Mn.appendAlphanumericBytes(e,n);break;case Dt.BYTE:Mn.append8BitBytes(e,n,i);break;case Dt.KANJI:Mn.appendKanjiBytes(e,n);break;default:throw new _n("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=Mn.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let i=0;for(;i<n;){const r=Mn.getDigit(e.charAt(i));if(i+2<n){const n=Mn.getDigit(e.charAt(i+1)),s=Mn.getDigit(e.charAt(i+2));t.appendBits(100*r+10*n+s,10),i+=3}else if(i+1<n){const n=Mn.getDigit(e.charAt(i+1));t.appendBits(10*r+n,7),i+=2}else t.appendBits(r,4),i++}}static appendAlphanumericBytes(e,t){const n=e.length;let i=0;for(;i<n;){const r=Mn.getAlphanumericCode(e.charCodeAt(i));if(-1===r)throw new _n;if(i+1<n){const n=Mn.getAlphanumericCode(e.charCodeAt(i+1));if(-1===n)throw new _n;t.appendBits(45*r+n,11),i+=2}else t.appendBits(r,6),i++}}static append8BitBytes(e,t,n){let i;try{i=T.encode(e,n)}catch(r){throw new _n(r)}for(let s=0,o=i.length;s!==o;s++){const e=i[s];t.appendBits(e,8)}}static appendKanjiBytes(e,t){let n;try{n=T.encode(e,x.SJIS)}catch(r){throw new _n(r)}const i=n.length;for(let s=0;s<i;s+=2){const e=(255&n[s])<<8&4294967295|255&n[s+1];let i=-1;if(e>=33088&&e<=40956?i=e-33088:e>=57408&&e<=60351&&(i=e-49472),-1===i)throw new _n("Invalid byte sequence");const r=192*(i>>8)+(255&i);t.appendBits(r,13)}}static appendECI(e,t){t.appendBits(Dt.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Mn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Mn.DEFAULT_BYTE_MODE_ENCODING=x.UTF8.getName();class Pn{write(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(0===e.length)throw new d("Found empty contents");if(t<0||n<0)throw new d("Requested dimensions are too small: "+t+"x"+n);let r=bt.L,s=Pn.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(Sn.ERROR_CORRECTION)&&(r=bt.fromString(i.get(Sn.ERROR_CORRECTION).toString())),void 0!==i.get(Sn.MARGIN)&&(s=Number.parseInt(i.get(Sn.MARGIN).toString(),10)));const o=Mn.encode(e,r,i);return this.renderResult(o,t,n,s)}writeToDom(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"===typeof e&&(e=document.querySelector(e));const s=this.write(t,n,i,r);e&&e.appendChild(s)}renderResult(e,t,n,i){const r=e.getMatrix();if(null===r)throw new ne;const s=r.getWidth(),o=r.getHeight(),a=s+2*i,l=o+2*i,c=Math.max(t,a),u=Math.max(n,l),d=Math.min(Math.floor(c/a),Math.floor(u/l)),h=Math.floor((c-s*d)/2),p=Math.floor((u-o*d)/2),g=this.createSVGElement(c,u);for(let f=0,m=p;f<o;f++,m+=d)for(let e=0,t=h;e<s;e++,t+=d)if(1===r.get(e,f)){const e=this.createSvgRectElement(t,m,d,d);g.appendChild(e)}return g}createSVGElement(e,t){const n=document.createElementNS(Pn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,i){const r=document.createElementNS(Pn.SVG_NS,"rect");return r.setAttributeNS(null,"x",e.toString()),r.setAttributeNS(null,"y",t.toString()),r.setAttributeNS(null,"height",n.toString()),r.setAttributeNS(null,"width",i.toString()),r.setAttributeNS(null,"fill","#000000"),r}}Pn.QUIET_ZONE_SIZE=4,Pn.SVG_NS="http://www.w3.org/2000/svg";class In{encode(e,t,n,i,r){if(0===e.length)throw new d("Found empty contents");if(t!==W.QR_CODE)throw new d("Can only encode QR_CODE, but got "+t);if(n<0||i<0)throw new d("Requested dimensions are too small: ".concat(n,"x").concat(i));let s=bt.L,o=In.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(Sn.ERROR_CORRECTION)&&(s=bt.fromString(r.get(Sn.ERROR_CORRECTION).toString())),void 0!==r.get(Sn.MARGIN)&&(o=Number.parseInt(r.get(Sn.MARGIN).toString(),10)));const a=Mn.encode(e,s,r);return In.renderResult(a,n,i,o)}static renderResult(e,t,n,i){const r=e.getMatrix();if(null===r)throw new ne;const s=r.getWidth(),o=r.getHeight(),a=s+2*i,l=o+2*i,c=Math.max(t,a),u=Math.max(n,l),d=Math.min(Math.floor(c/a),Math.floor(u/l)),h=Math.floor((c-s*d)/2),p=Math.floor((u-o*d)/2),g=new D(c,u);for(let f=0,m=p;f<o;f++,m+=d)for(let e=0,t=h;e<s;e++,t+=d)1===r.get(e,f)&&g.setRegion(t,m,d,d);return g}}In.QUIET_ZONE_SIZE=4;class Nn{encode(e,t,n,i,r){let s;if(t!==W.QR_CODE)throw new d("No encoder available for format "+t);return s=new In,s.encode(e,t,n,i,r)}}class kn extends N{constructor(e,t,n,i,r,s,o,a){if(super(s,o),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=i,this.top=r,i+s>t||r+o>n)throw new d("Crop rectangle does not fit within image data.");a&&this.reverseHorizontal(s,o)}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const i=(e+this.top)*this.dataWidth+this.left;return f.arraycopy(this.yuvData,i,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,i=new Uint8ClampedArray(n);let r=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return f.arraycopy(this.yuvData,r,i,0,n),i;for(let s=0;s<t;s++){const t=s*e;f.arraycopy(this.yuvData,r,i,t,e),r+=this.dataWidth}return i}isCropSupported(){return!0}crop(e,t,n,i){return new kn(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,i,!1)}renderThumbnail(){const e=this.getWidth()/kn.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/kn.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),i=this.yuvData;let r=this.top*this.dataWidth+this.left;for(let s=0;s<t;s++){const t=s*e;for(let s=0;s<e;s++){const e=255&i[r+s*kn.THUMBNAIL_SCALE_FACTOR];n[t+s]=4278190080|65793*e}r+=this.dataWidth*kn.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/kn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/kn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let i=0,r=this.top*this.dataWidth+this.left;i<t;i++,r+=this.dataWidth){const t=r+e/2;for(let i=r,s=r+e-1;i<t;i++,s--){const e=n[i];n[i]=n[s],n[s]=e}}}invert(){return new k(this)}}kn.THUMBNAIL_SCALE_FACTOR=2;class On extends N{constructor(e,t,n,i,r,s,o){if(super(t,n),this.dataWidth=i,this.dataHeight=r,this.left=s,this.top=o,4===e.BYTES_PER_ELEMENT){const i=t*n,r=new Uint8ClampedArray(i);for(let t=0;t<i;t++){const n=e[t],i=n>>16&255,s=n>>7&510,o=255&n;r[t]=(i+s+o)/4&255}this.luminances=r}else this.luminances=e;if(void 0===i&&(this.dataWidth=t),void 0===r&&(this.dataHeight=n),void 0===s&&(this.left=0),void 0===o&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new d("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const i=(e+this.top)*this.dataWidth+this.left;return f.arraycopy(this.luminances,i,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,i=new Uint8ClampedArray(n);let r=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return f.arraycopy(this.luminances,r,i,0,n),i;for(let s=0;s<t;s++){const t=s*e;f.arraycopy(this.luminances,r,i,t,e),r+=this.dataWidth}return i}isCropSupported(){return!0}crop(e,t,n,i){return new On(this.luminances,n,i,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new k(this)}}class Ln extends x{static forName(e){return this.getCharacterSetECIByName(e)}}class Fn{}Fn.ISO_8859_1=x.ISO8859_1;class Bn{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Vn{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Gn{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Hn extends Gn{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Hn(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Hn(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+C.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Wn extends Hn{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Wn(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function jn(e,t,n){return new Wn(e,t,n)}function Un(e,t,n){return new Hn(e,t,n)}const zn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Yn=0,qn=1,Kn=2,Xn=3,Qn=4,Zn=new Hn(null,0,0),$n=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function Jn(e){for(let t of e)y.fill(t,-1);return e[Yn][Qn]=0,e[qn][Qn]=0,e[qn][Yn]=28,e[Xn][Qn]=0,e[Kn][Qn]=0,e[Kn][Yn]=15,e}const ei=Jn(y.createInt32Array(6,6));class ti{constructor(e,t,n,i){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=i}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,i=this.token;if(e!==this.mode){let t=$n[this.mode][e];i=Un(i,65535&t,t>>16),n+=t>>16}let r=e===Kn?4:5;return i=Un(i,t,r),new ti(i,e,0,n+r)}shiftAndAppend(e,t){let n=this.token,i=this.mode===Kn?4:5;return n=Un(n,ei[this.mode][e],i),n=Un(n,t,5),new ti(n,this.mode,0,this.bitCount+i+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,i=this.bitCount;if(this.mode===Qn||this.mode===Kn){let e=$n[n][Yn];t=Un(t,65535&e,e>>16),i+=e>>16,n=Yn}let r=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,s=new ti(t,n,this.binaryShiftByteCount+1,i+r);return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(e+1)),s}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=jn(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new ti(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+($n[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=ti.calculateBinaryShiftCost(e)-ti.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let i=this.endBinaryShift(e.length).token;null!==i;i=i.getPrevious())t.unshift(i);let n=new w;for(const i of t)i.appendTo(n,e);return n}toString(){return _.format("%s bits=%d bytes=%d",zn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}function ni(e){const t=_.getCharCode(" "),n=_.getCharCode("."),i=_.getCharCode(",");e[Yn][t]=1;const r=_.getCharCode("Z"),s=_.getCharCode("A");for(let h=s;h<=r;h++)e[Yn][h]=h-s+2;e[qn][t]=1;const o=_.getCharCode("z"),a=_.getCharCode("a");for(let h=a;h<=o;h++)e[qn][h]=h-a+2;e[Kn][t]=1;const l=_.getCharCode("9"),c=_.getCharCode("0");for(let h=c;h<=l;h++)e[Kn][h]=h-c+2;e[Kn][i]=12,e[Kn][n]=13;const u=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let h=0;h<u.length;h++)e[Xn][_.getCharCode(u[h])]=h;const d=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let h=0;h<d.length;h++)_.getCharCode(d[h])>0&&(e[Qn][_.getCharCode(d[h])]=h);return e}ti.INITIAL_STATE=new ti(Zn,Yn,0,0);const ii=ni(y.createInt32Array(5,256));class ri{constructor(e){this.text=e}encode(){const e=_.getCharCode(" "),t=_.getCharCode("\n");let n=Vn.singletonList(ti.INITIAL_STATE);for(let i=0;i<this.text.length;i++){let r,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case _.getCharCode("\r"):r=s===t?2:0;break;case _.getCharCode("."):r=s===e?3:0;break;case _.getCharCode(","):r=s===e?4:0;break;case _.getCharCode(":"):r=s===e?5:0;break;default:r=0}r>0?(n=ri.updateStateListForPair(n,i,r),i++):n=this.updateStateListForChar(n,i)}return Vn.min(n,((e,t)=>e.getBitCount()-t.getBitCount())).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let i of e)this.updateStateForChar(i,t,n);return ri.simplifyStates(n)}updateStateForChar(e,t,n){let i=255&this.text[t],r=ii[e.getMode()][i]>0,s=null;for(let o=0;o<=Qn;o++){let a=ii[o][i];if(a>0){if(null==s&&(s=e.endBinaryShift(t)),!r||o===e.getMode()||o===Kn){const e=s.latchAndAppend(o,a);n.push(e)}if(!r&&ei[e.getMode()][o]>=0){const e=s.shiftAndAppend(o,a);n.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===ii[e.getMode()][i]){let i=e.addBinaryShiftChar(t);n.push(i)}}static updateStateListForPair(e,t,n){const i=[];for(let r of e)this.updateStateForPair(r,t,n,i);return this.simplifyStates(i)}static updateStateForPair(e,t,n,i){let r=e.endBinaryShift(t);if(i.push(r.latchAndAppend(Qn,n)),e.getMode()!==Qn&&i.push(r.shiftAndAppend(Qn,n)),3===n||4===n){let e=r.latchAndAppend(Kn,16-n).latchAndAppend(Kn,1);i.push(e)}if(e.getBinaryShiftByteCount()>0){let n=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(n)}}static simplifyStates(e){let t=[];for(const n of e){let e=!0;for(const i of t){if(i.isBetterThanOrEqualTo(n)){e=!1;break}n.isBetterThanOrEqualTo(i)&&(t=t.filter((e=>e!==i)))}e&&t.push(n)}return t}}class si{constructor(){}static encodeBytes(e){return si.encode(e,si.DEFAULT_EC_PERCENT,si.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let i,r,s,o,a,l=new ri(e).encode(),c=C.truncDivision(l.getSize()*t,100)+11,u=l.getSize()+c;if(n!==si.DEFAULT_AZTEC_LAYERS){if(i=n<0,r=Math.abs(n),r>(i?si.MAX_NB_BITS_COMPACT:si.MAX_NB_BITS))throw new d(_.format("Illegal value %s for layers",n));s=si.totalBitsInLayer(r,i),o=si.WORD_SIZE[r];let e=s-s%o;if(a=si.stuffBits(l,o),a.getSize()+c>e)throw new d("Data to large for user specified layer");if(i&&a.getSize()>64*o)throw new d("Data to large for user specified layer")}else{o=0,a=null;for(let e=0;;e++){if(e>si.MAX_NB_BITS)throw new d("Data too large for an Aztec code");if(i=e<=3,r=i?e+1:e,s=si.totalBitsInLayer(r,i),u>s)continue;null!=a&&o===si.WORD_SIZE[r]||(o=si.WORD_SIZE[r],a=si.stuffBits(l,o));let t=s-s%o;if(!(i&&a.getSize()>64*o)&&a.getSize()+c<=t)break}}let h,p=si.generateCheckWords(a,s,o),g=a.getSize()/o,f=si.generateModeMessage(i,r,g),m=(i?11:14)+4*r,v=new Int32Array(m);if(i){h=m;for(let e=0;e<v.length;e++)v[e]=e}else{h=m+1+2*C.truncDivision(C.truncDivision(m,2)-1,15);let e=C.truncDivision(m,2),t=C.truncDivision(h,2);for(let n=0;n<e;n++){let i=n+C.truncDivision(n,15);v[e-n-1]=t-i-1,v[e+n]=t+i+1}}let y=new D(h);for(let d=0,C=0;d<r;d++){let e=4*(r-d)+(i?9:12);for(let t=0;t<e;t++){let n=2*t;for(let i=0;i<2;i++)p.get(C+n+i)&&y.set(v[2*d+i],v[2*d+t]),p.get(C+2*e+n+i)&&y.set(v[2*d+t],v[m-1-2*d-i]),p.get(C+4*e+n+i)&&y.set(v[m-1-2*d-i],v[m-1-2*d-t]),p.get(C+6*e+n+i)&&y.set(v[m-1-2*d-t],v[2*d+i])}C+=8*e}if(si.drawModeMessage(y,i,h,f),i)si.drawBullsEye(y,C.truncDivision(h,2),5);else{si.drawBullsEye(y,C.truncDivision(h,2),7);for(let e=0,t=0;e<C.truncDivision(m,2)-1;e+=15,t+=16)for(let n=1&C.truncDivision(h,2);n<h;n+=2)y.set(C.truncDivision(h,2)-t,n),y.set(C.truncDivision(h,2)+t,n),y.set(n,C.truncDivision(h,2)-t),y.set(n,C.truncDivision(h,2)+t)}let w=new Bn;return w.setCompact(i),w.setSize(h),w.setLayers(r),w.setCodeWords(g),w.setMatrix(y),w}static drawBullsEye(e,t,n){for(let i=0;i<n;i+=2)for(let n=t-i;n<=t+i;n++)e.set(n,t-i),e.set(n,t+i),e.set(t-i,n),e.set(t+i,n);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let i=new w;return e?(i.appendBits(t-1,2),i.appendBits(n-1,6),i=si.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(n-1,11),i=si.generateCheckWords(i,40,4)),i}static drawModeMessage(e,t,n,i){let r=C.truncDivision(n,2);if(t)for(let s=0;s<7;s++){let t=r-3+s;i.get(s)&&e.set(t,r-5),i.get(s+7)&&e.set(r+5,t),i.get(20-s)&&e.set(t,r+5),i.get(27-s)&&e.set(r-5,t)}else for(let s=0;s<10;s++){let t=r-5+s+C.truncDivision(s,5);i.get(s)&&e.set(t,r-7),i.get(s+10)&&e.set(r+7,t),i.get(29-s)&&e.set(t,r+7),i.get(39-s)&&e.set(r-7,t)}}static generateCheckWords(e,t,n){let i=e.getSize()/n,r=new En(si.getGF(n)),s=C.truncDivision(t,n),o=si.bitsToWords(e,n,s);r.encode(o,s-i);let a=t%n,l=new w;l.appendBits(0,a);for(const c of Array.from(o))l.appendBits(c,n);return l}static bitsToWords(e,t,n){let i,r,s=new Int32Array(n);for(i=0,r=e.getSize()/t;i<r;i++){let n=0;for(let r=0;r<t;r++)n|=e.get(i*t+r)?1<<t-r-1:0;s[i]=n}return s}static getGF(e){switch(e){case 4:return ee.AZTEC_PARAM;case 6:return ee.AZTEC_DATA_6;case 8:return ee.AZTEC_DATA_8;case 10:return ee.AZTEC_DATA_10;case 12:return ee.AZTEC_DATA_12;default:throw new d("Unsupported word size "+e)}}static stuffBits(e,t){let n=new w,i=e.getSize(),r=(1<<t)-2;for(let s=0;s<i;s+=t){let o=0;for(let n=0;n<t;n++)(s+n>=i||e.get(s+n))&&(o|=1<<t-1-n);(o&r)===r?(n.appendBits(o&r,t),s--):0===(o&r)?(n.appendBits(1|o,t),s--):n.appendBits(o,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}si.DEFAULT_EC_PERCENT=33,si.DEFAULT_AZTEC_LAYERS=0,si.MAX_NB_BITS=32,si.MAX_NB_BITS_COMPACT=4,si.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class oi{encode(e,t,n,i){return this.encodeWithHints(e,t,n,i,null)}encodeWithHints(e,t,n,i,r){let s=Fn.ISO_8859_1,o=si.DEFAULT_EC_PERCENT,a=si.DEFAULT_AZTEC_LAYERS;return null!=r&&(r.has(Sn.CHARACTER_SET)&&(s=Ln.forName(r.get(Sn.CHARACTER_SET).toString())),r.has(Sn.ERROR_CORRECTION)&&(o=C.parseInt(r.get(Sn.ERROR_CORRECTION).toString())),r.has(Sn.AZTEC_LAYERS)&&(a=C.parseInt(r.get(Sn.AZTEC_LAYERS).toString()))),oi.encodeLayers(e,t,n,i,s,o,a)}static encodeLayers(e,t,n,i,r,s,o){if(t!==W.AZTEC)throw new d("Can only encode AZTEC, but got "+t);let a=si.encode(_.getBytes(e,r),s,o);return oi.renderResult(a,n,i)}static renderResult(e,t,n){let i=e.getMatrix();if(null==i)throw new ne;let r=i.getWidth(),s=i.getHeight(),o=Math.max(t,r),a=Math.max(n,s),l=Math.min(o/r,a/s),c=(o-r*l)/2,u=(a-s*l)/2,d=new D(o,a);for(let h=0,p=u;h<s;h++,p+=l)for(let e=0,t=c;e<r;e++,t+=l)i.get(e,h)&&d.setRegion(t,p,l,l);return d}}e.AbstractExpandedDecoder=ze,e.ArgumentException=u,e.ArithmeticException=J,e.AztecCode=Bn,e.AztecCodeReader=ve,e.AztecCodeWriter=oi,e.AztecDecoder=re,e.AztecDetector=me,e.AztecDetectorResult=ce,e.AztecEncoder=si,e.AztecHighLevelEncoder=ri,e.AztecPoint=fe,e.BarcodeFormat=W,e.Binarizer=g,e.BinaryBitmap=h,e.BitArray=w,e.BitMatrix=D,e.BitSource=ft,e.BrowserAztecCodeReader=ye,e.BrowserBarcodeReader=ct,e.BrowserCodeReader=V,e.BrowserDatamatrixCodeReader=wt,e.BrowserMultiFormatReader=yn,e.BrowserPDF417Reader=Cn,e.BrowserQRCodeReader=wn,e.BrowserQRCodeSvgWriter=Pn,e.CharacterSetECI=x,e.ChecksumException=p,e.Code128Reader=we,e.Code39Reader=be,e.DataMatrixDecodedBitStreamParser=mt,e.DataMatrixReader=Ct,e.DecodeHintType=S,e.DecoderResult=Q,e.DefaultGridSampler=pe,e.DetectorResult=le,e.EAN13Reader=Re,e.EncodeHintType=Sn,e.Exception=c,e.FormatException=E,e.GenericGF=ee,e.GenericGFPoly=$,e.GlobalHistogramBinarizer=P,e.GridSampler=de,e.GridSamplerInstance=ge,e.HTMLCanvasElementLuminanceSource=O,e.HybridBinarizer=I,e.ITFReader=Se,e.IllegalArgumentException=d,e.IllegalStateException=ne,e.InvertedLuminanceSource=k,e.LuminanceSource=N,e.MathUtils=se,e.MultiFormatOneDReader=lt,e.MultiFormatReader=vn,e.MultiFormatWriter=Nn,e.NotFoundException=M,e.OneDReader=Ce,e.PDF417DecodedBitStreamParser=pn,e.PDF417DecoderErrorCorrection=Yt,e.PDF417Reader=fn,e.PDF417ResultMetadata=nn,e.PerspectiveTransform=he,e.PlanarYUVLuminanceSource=kn,e.QRCodeByteMatrix=An,e.QRCodeDataMask=Tt,e.QRCodeDecodedBitStreamParser=Mt,e.QRCodeDecoderErrorCorrectionLevel=bt,e.QRCodeDecoderFormatInformation=St,e.QRCodeEncoder=Mn,e.QRCodeEncoderQRCode=Tn,e.QRCodeMaskUtil=xn,e.QRCodeMatrixUtil=Rn,e.QRCodeMode=Dt,e.QRCodeReader=Vt,e.QRCodeVersion=At,e.QRCodeWriter=In,e.RGBLuminanceSource=On,e.RSS14Reader=at,e.RSSExpandedReader=st,e.ReaderException=mn,e.ReedSolomonDecoder=ie,e.ReedSolomonEncoder=En,e.ReedSolomonException=te,e.Result=G,e.ResultMetadataType=X,e.ResultPoint=ae,e.StringUtils=_,e.UnsupportedOperationException=A,e.VideoInputDevice=L,e.WhiteRectangleDetector=ue,e.WriterException=_n,e.ZXingArrays=y,e.ZXingCharset=Ln,e.ZXingInteger=C,e.ZXingStandardCharsets=Fn,e.ZXingStringBuilder=R,e.ZXingStringEncoding=T,e.ZXingSystem=f,e.createAbstractExpandedDecoder=nt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},8591:e=>{"use strict";e.exports=function(e,t,n,i,r,s,o,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,r,s,o,a],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},481:function(e,t){var n,i,r;i=[],n=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,i=t.IS_PAPA_WORKER||!1,r={},s=0,o={parse:function(n,i){var a=(i=i||{}).dynamicTyping||!1;if(b(a)&&(i.dynamicTypingFunction=a,a={}),i.dynamicTyping=a,i.transform=!!b(i.transform)&&i.transform,i.worker&&o.WORKERS_SUPPORTED){var l=function(){if(!o.WORKERS_SUPPORTED)return!1;var n,i,a=(n=t.URL||t.webkitURL||null,i=e.toString(),o.BLOB_URL||(o.BLOB_URL=n.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",i,")();"],{type:"text/javascript"})))),l=new t.Worker(a);return l.onmessage=m,l.id=s++,r[l.id]=l}();return l.userStep=i.step,l.userChunk=i.chunk,l.userComplete=i.complete,l.userError=i.error,i.step=b(i.step),i.chunk=b(i.chunk),i.complete=b(i.complete),i.error=b(i.error),delete i.worker,void l.postMessage({input:n,config:i,workerId:l.id})}var p=null;return o.NODE_STREAM_INPUT,"string"==typeof n?(n=function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}(n),p=i.download?new c(i):new d(i)):!0===n.readable&&b(n.read)&&b(n.on)?p=new h(i):(t.File&&n instanceof File||n instanceof Object)&&(p=new u(i)),p.stream(n)},unparse:function(e,t){var n=!1,i=!0,r=",",s="\r\n",a='"',l=a+a,c=!1,u=null,d=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||o.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(r=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(s=t.newline),"string"==typeof t.quoteChar&&(a=t.quoteChar),"boolean"==typeof t.header&&(i=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");u=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+a),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(d=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var h=new RegExp(g(a),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return p(null,e,c);if("object"==typeof e[0])return p(u||Object.keys(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||u),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),p(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function p(e,t,n){var o="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var a=Array.isArray(e)&&0<e.length,l=!Array.isArray(t[0]);if(a&&i){for(var c=0;c<e.length;c++)0<c&&(o+=r),o+=f(e[c],c);0<t.length&&(o+=s)}for(var u=0;u<t.length;u++){var d=a?e.length:t[u].length,h=!1,p=a?0===Object.keys(t[u]).length:0===t[u].length;if(n&&!a&&(h="greedy"===n?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===n&&a){for(var g=[],m=0;m<d;m++){var v=l?e[m]:m;g.push(t[u][v])}h=""===g.join("").trim()}if(!h){for(var y=0;y<d;y++){0<y&&!p&&(o+=r);var C=a&&l?e[y]:y;o+=f(t[u][C],y)}u<t.length-1&&(!n||0<d&&!p)&&(o+=s)}}return o}function f(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var i=!1;d&&"string"==typeof e&&d.test(e)&&(e="'"+e,i=!0);var s=e.toString().replace(h,l);return(i=i||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(s,o.BAD_DELIMITERS)||-1<s.indexOf(r)||" "===s.charAt(0)||" "===s.charAt(s.length-1))?a+s+a:s}}};if(o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\ufeff",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!n&&!!t.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=f,o.ParserHandle=p,o.NetworkStreamer=c,o.FileStreamer=u,o.StringStreamer=d,o.ReadableStreamStreamer=h,t.jQuery){var a=t.jQuery;a.fn.parse=function(e){var n=e.config||{},i=[];return this.each((function(e){if("INPUT"!==a(this).prop("tagName").toUpperCase()||"file"!==a(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var r=0;r<this.files.length;r++)i.push({file:this.files[r],inputElem:this,instanceConfig:a.extend({},n)})})),r(),this;function r(){if(0!==i.length){var t,n,r,l,c=i[0];if(b(e.before)){var u=e.before(c.file,c.inputElem);if("object"==typeof u){if("abort"===u.action)return t="AbortError",n=c.file,r=c.inputElem,l=u.reason,void(b(e.error)&&e.error({name:t},n,r,l));if("skip"===u.action)return void s();"object"==typeof u.config&&(c.instanceConfig=a.extend(c.instanceConfig,u.config))}else if("skip"===u)return void s()}var d=c.instanceConfig.complete;c.instanceConfig.complete=function(e){b(d)&&d(e,c.file,c.inputElem),s()},o.parse(c.file,c.instanceConfig)}else b(e.complete)&&e.complete()}function s(){i.splice(0,1),r()}}}function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=C(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new p(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&b(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(e);void 0!==r&&(e=r)}this.isFirstChunk=!1,this._halted=!1;var s=this._partialLine+e;this._partialLine="";var a=this._handle.parse(s,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=a.meta.cursor;this._finished||(this._partialLine=s.substring(l-this._baseIndex),this._baseIndex=l),a&&a.data&&(this._rowCount+=a.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)t.postMessage({results:a,workerId:o.WORKER_ID,finished:c});else if(b(this._config.chunk)&&!n){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!c||!b(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(e){b(this._config.error)?this._config.error(e):i&&this._config.error&&t.postMessage({workerId:o.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),l.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var i in e)t.setRequestHeader(i,e[i])}if(this._config.chunkSize){var r=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+r)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(new Error(n))}}function u(e){var t,n;(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),l.call(this,e);var i="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,i?((t=new FileReader).onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,r)}var s=t.readAsText(e,this._config.encoding);i||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function h(e){l.call(this,e=e||{});var t=[],n=!0,i=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=w((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=w((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=w((function(){this._streamCleanUp(),i=!0,this._streamData("")}),this),this._streamCleanUp=w((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function p(e){var t,n,i,r=Math.pow(2,53),s=-r,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,c=this,u=0,d=0,h=!1,p=!1,m=[],v={data:[],errors:[],meta:{}};if(b(e.step)){var y=e.step;e.step=function(t){if(v=t,E())S();else{if(S(),0===v.data.length)return;u+=t.data.length,e.preview&&u>e.preview?n.abort():(v.data=v.data[0],y(v,c))}}}function w(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function S(){return v&&i&&(A("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),i=!1),e.skipEmptyLines&&(v.data=v.data.filter((function(e){return!w(e)}))),E()&&function(){if(v)if(Array.isArray(v.data[0])){for(var t=0;E()&&t<v.data.length;t++)v.data[t].forEach(n);v.data.splice(0,1)}else v.data.forEach(n);function n(t,n){b(e.transformHeader)&&(t=e.transformHeader(t,n)),m.push(t)}}(),function(){if(!v||!e.header&&!e.dynamicTyping&&!e.transform)return v;function t(t,n){var i,r=e.header?{}:[];for(i=0;i<t.length;i++){var s=i,o=t[i];e.header&&(s=i>=m.length?"__parsed_extra":m[i]),e.transform&&(o=e.transform(o,s)),o=x(s,o),"__parsed_extra"===s?(r[s]=r[s]||[],r[s].push(o)):r[s]=o}return e.header&&(i>m.length?A("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+i,d+n):i<m.length&&A("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+i,d+n)),r}var n=1;return!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(t),n=v.data.length):v.data=t(v.data,0),e.header&&v.meta&&(v.meta.fields=m),d+=n,v}()}function E(){return e.header&&0===m.length}function x(t,n){return i=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[i]&&(e.dynamicTyping[i]=e.dynamicTypingFunction(i)),!0===(e.dynamicTyping[i]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(e){if(a.test(e)){var t=parseFloat(e);if(s<t&&t<r)return!0}return!1}(n)?parseFloat(n):l.test(n)?new Date(n):""===n?null:n):n;var i}function A(e,t,n,i){var r={type:e,code:t,message:n};void 0!==i&&(r.row=i),v.errors.push(r)}this.parse=function(r,s,a){var l=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=new RegExp(g(t)+"([^]*?)"+g(t),"gm"),i=(e=e.replace(n,"")).split("\r"),r=e.split("\n"),s=1<r.length&&r[0].length<i[0].length;if(1===i.length||s)return"\n";for(var o=0,a=0;a<i.length;a++)"\n"===i[a][0]&&o++;return o>=i.length/2?"\r\n":"\r"}(r,l)),i=!1,e.delimiter)b(e.delimiter)&&(e.delimiter=e.delimiter(r),v.meta.delimiter=e.delimiter);else{var c=function(t,n,i,r,s){var a,l,c,u;s=s||[",","\t","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var d=0;d<s.length;d++){var h=s[d],p=0,g=0,m=0;c=void 0;for(var v=new f({comments:r,delimiter:h,newline:n,preview:10}).parse(t),y=0;y<v.data.length;y++)if(i&&w(v.data[y]))m++;else{var C=v.data[y].length;g+=C,void 0!==c?0<C&&(p+=Math.abs(C-c),c=C):c=C}0<v.data.length&&(g/=v.data.length-m),(void 0===l||p<=l)&&(void 0===u||u<g)&&1.99<g&&(l=p,a=h,u=g)}return{successful:!!(e.delimiter=a),bestDelimiter:a}}(r,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);c.successful?e.delimiter=c.bestDelimiter:(i=!0,e.delimiter=o.DefaultDelimiter),v.meta.delimiter=e.delimiter}var u=C(e);return e.preview&&e.header&&u.preview++,t=r,n=new f(u),v=n.parse(t,s,a),S(),h?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return h},this.pause=function(){h=!0,n.abort(),t=b(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){c.streamer._halted?(h=!1,c.streamer.parseChunk(t,!0)):setTimeout(c.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,n.abort(),v.meta.aborted=!0,b(e.complete)&&e.complete(v),t=""}}function g(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function f(e){var t,n=(e=e||{}).delimiter,i=e.newline,r=e.comments,s=e.step,a=e.preview,l=e.fastMode,c=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(c=e.escapeChar),("string"!=typeof n||-1<o.BAD_DELIMITERS.indexOf(n))&&(n=","),r===n)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<o.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==i&&"\r"!==i&&"\r\n"!==i&&(i="\n");var u=0,d=!1;this.parse=function(o,h,p){if("string"!=typeof o)throw new Error("Input must be a string");var f=o.length,m=n.length,v=i.length,y=r.length,C=b(s),w=[],S=[],E=[],x=u=0;if(!o)return Y();if(e.header&&!h){var A=o.split(i)[0].split(n),T=[],_={},R=!1;for(var D in A){var M=A[D];b(e.transformHeader)&&(M=e.transformHeader(M,D));var P=M,I=_[M]||0;for(0<I&&(R=!0,P=M+"_"+I),_[M]=I+1;T.includes(P);)P=P+"_"+I;T.push(P)}if(R){var N=o.split(i);N[0]=T.join(n),o=N.join(i)}}if(l||!1!==l&&-1===o.indexOf(t)){for(var k=o.split(i),O=0;O<k.length;O++){if(E=k[O],u+=E.length,O!==k.length-1)u+=i.length;else if(p)return Y();if(!r||E.substring(0,y)!==r){if(C){if(w=[],W(E.split(n)),q(),d)return Y()}else W(E.split(n));if(a&&a<=O)return w=w.slice(0,a),Y(!0)}}return Y()}for(var L=o.indexOf(n,u),F=o.indexOf(i,u),B=new RegExp(g(c)+g(t),"g"),V=o.indexOf(t,u);;)if(o[u]!==t)if(r&&0===E.length&&o.substring(u,u+y)===r){if(-1===F)return Y();u=F+v,F=o.indexOf(i,u),L=o.indexOf(n,u)}else if(-1!==L&&(L<F||-1===F))E.push(o.substring(u,L)),u=L+m,L=o.indexOf(n,u);else{if(-1===F)break;if(E.push(o.substring(u,F)),z(F+v),C&&(q(),d))return Y();if(a&&w.length>=a)return Y(!0)}else for(V=u,u++;;){if(-1===(V=o.indexOf(t,V+1)))return p||S.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:w.length,index:u}),U();if(V===f-1)return U(o.substring(u,V).replace(B,t));if(t!==c||o[V+1]!==c){if(t===c||0===V||o[V-1]!==c){-1!==L&&L<V+1&&(L=o.indexOf(n,V+1)),-1!==F&&F<V+1&&(F=o.indexOf(i,V+1));var G=j(-1===F?L:Math.min(L,F));if(o.substr(V+1+G,m)===n){E.push(o.substring(u,V).replace(B,t)),o[u=V+1+G+m]!==t&&(V=o.indexOf(t,u)),L=o.indexOf(n,u),F=o.indexOf(i,u);break}var H=j(F);if(o.substring(V+1+H,V+1+H+v)===i){if(E.push(o.substring(u,V).replace(B,t)),z(V+1+H+v),L=o.indexOf(n,u),V=o.indexOf(t,u),C&&(q(),d))return Y();if(a&&w.length>=a)return Y(!0);break}S.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:w.length,index:u}),V++}}else V++}return U();function W(e){w.push(e),x=u}function j(e){var t=0;if(-1!==e){var n=o.substring(V+1,e);n&&""===n.trim()&&(t=n.length)}return t}function U(e){return p||(void 0===e&&(e=o.substring(u)),E.push(e),u=f,W(E),C&&q()),Y()}function z(e){u=e,W(E),E=[],F=o.indexOf(i,u)}function Y(e){return{data:w,errors:S,meta:{delimiter:n,linebreak:i,aborted:d,truncated:!!e,cursor:x+(h||0)}}}function q(){s(Y()),w=[],S=[]}},this.abort=function(){d=!0},this.getCharIndex=function(){return u}}function m(e){var t=e.data,n=r[t.workerId],i=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var s={abort:function(){i=!0,v(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(b(n.userStep)){for(var o=0;o<t.results.data.length&&(n.userStep({data:t.results.data[o],errors:t.results.errors,meta:t.results.meta},s),!i);o++);delete t.results}else b(n.userChunk)&&(n.userChunk(t.results,s,t.file),delete t.results)}t.finished&&!i&&v(t.workerId,t.results)}function v(e,t){var n=r[e];b(n.userComplete)&&n.userComplete(t),n.terminate(),delete r[e]}function y(){throw new Error("Not implemented.")}function C(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=C(e[n]);return t}function w(e,t){return function(){e.apply(t,arguments)}}function b(e){return"function"==typeof e}return i&&(t.onmessage=function(e){var n=e.data;if(void 0===o.WORKER_ID&&n&&(o.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:o.WORKER_ID,results:o.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var i=o.parse(n.input,n.config);i&&t.postMessage({workerId:o.WORKER_ID,results:i,finished:!0})}}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(d.prototype=Object.create(d.prototype)).constructor=d,(h.prototype=Object.create(l.prototype)).constructor=h,o},void 0===(r="function"===typeof n?n.apply(t,i):n)||(e.exports=r)},7278:(e,t,n)=>{"use strict";var i=n(7685);function r(){}function s(){}s.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,s,o){if(o!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:r};return n.PropTypes=n,n}},9964:(e,t,n)=>{e.exports=n(7278)()},7685:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6940:e=>{"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,i=/^\d+$/,r=/^\d/,s=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,a=new t(512),l=new t(512),c=new t(512);function u(e){return a.get(e)||a.set(e,d(e).map((function(e){return e.replace(o,"$2")})))}function d(e){return e.match(n)||[""]}function h(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function p(e){return!h(e)&&(function(e){return e.match(r)&&!e.match(i)}(e)||function(e){return s.test(e)}(e))}e.exports={Cache:t,split:d,normalizePath:u,setter:function(e){var t=u(e);return l.get(e)||l.set(e,(function(e,n){for(var i=0,r=t.length,s=e;i<r-1;){var o=t[i];if("__proto__"===o||"constructor"===o||"prototype"===o)return e;s=s[t[i++]]}s[t[i]]=n}))},getter:function(e,t){var n=u(e);return c.get(e)||c.set(e,(function(e){for(var i=0,r=n.length;i<r;){if(null==e&&t)return;e=e[n[i++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(h(t)||i.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var i,r,s,o,a=e.length;for(r=0;r<a;r++)(i=e[r])&&(p(i)&&(i='"'+i+'"'),s=!(o=h(i))&&/^\d+$/.test(i),t.call(n,i,o,s,r,e))}(Array.isArray(e)?e:d(e),t,n)}}},6658:function(e,t,n){!function(e,t,n,i,r,s,o,a,l,c,u,d,h,p,g,f,m,v,y,C,w,b,S,E,x,A,T,_,R,D,M,P,I,N,k,O,L,F,B,V,G,H,W,j,U,z,Y,q,K,X,Q,Z,$,J,ee,te,ne,ie,re,se,oe,ae,le,ce,ue){"use strict";function de(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var he=de(n),pe=de(i),ge=de(ue),fe=function(e,t){return fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},fe(e,t)};function me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}fe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ve=function(){return ve=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ve.apply(this,arguments)};function ye(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var Ce,we=function(e){var t=e.showTimeSelectOnly,n=void 0!==t&&t,i=e.showTime,r=void 0!==i&&i,s=e.className,o=e.children,a=n?"Choose Time":"Choose Date".concat(r?" and Time":"");return he.default.createElement("div",{className:s,role:"dialog","aria-label":a,"aria-modal":"true"},o)};function be(){return"undefined"!=typeof window?window:globalThis}!function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"}(Ce||(Ce={}));var Se=12,Ee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function xe(e){if(null==e)return new Date;var t="string"==typeof e?U.parseISO(e):le.toDate(e);return Ae(t)?t:new Date}function Ae(e,t){return V.isValid(e)&&!I.isBefore(e,null!=t?t:new Date("1/1/1800"))}function Te(e,t,n){if("en"===n)return w.format(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var i=n?je(n):void 0;return n&&!i&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!i&&We()&&je(We())&&(i=je(We())),w.format(e,t,{locale:i,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function _e(e,t){var n=t.dateFormat,i=t.locale,r=Array.isArray(n)&&n.length>0?n[0]:n;return e&&Te(e,r,i)||""}function Re(e,t){var n=t.hour,i=void 0===n?0:n,r=t.minute,s=void 0===r?0:r,o=t.second,a=void 0===o?0:o;return Y.setHours(q.setMinutes(Q.setSeconds(e,a),s),i)}function De(e){return $.startOfDay(e)}function Me(e,t,n){var i=je(t||We());return te.startOfWeek(e,{locale:i,weekStartsOn:n})}function Pe(e){return J.startOfMonth(e)}function Ie(e){return ne.startOfYear(e)}function Ne(e){return ee.startOfQuarter(e)}function ke(){return $.startOfDay(xe())}function Oe(e){return m.endOfDay(e)}function Le(e,t){return e&&t?B.isSameYear(e,t):!e&&!t}function Fe(e,t){return e&&t?L.isSameMonth(e,t):!e&&!t}function Be(e,t){return e&&t?F.isSameQuarter(e,t):!e&&!t}function Ve(e,t){return e&&t?O.isSameDay(e,t):!e&&!t}function Ge(e,t){return e&&t?k.isEqual(e,t):!e&&!t}function He(e,t,n){var i,r=$.startOfDay(t),s=m.endOfDay(n);try{i=G.isWithinInterval(e,{start:r,end:s})}catch(e){i=!1}return i}function We(){return be().__localeId__}function je(e){if("string"==typeof e){var t=be();return t.__localeData__?t.__localeData__[e]:void 0}return e}function Ue(e,t){return Te(K.setMonth(xe(),e),"LLLL",t)}function ze(e,t){return Te(K.setMonth(xe(),e),"LLL",t)}function Ye(e,t){var n=void 0===t?{}:t,i=n.minDate,r=n.maxDate,s=n.excludeDates,o=n.excludeDateIntervals,a=n.includeDates,l=n.includeDateIntervals,c=n.filterDate;return tt(e,{minDate:i,maxDate:r})||s&&s.some((function(t){var n;return t instanceof Date?Ve(e,t):Ve(e,null!==(n=t.date)&&void 0!==n?n:new Date)}))||o&&o.some((function(t){var n=t.start,i=t.end;return G.isWithinInterval(e,{start:n,end:i})}))||a&&!a.some((function(t){return Ve(e,t)}))||l&&!l.some((function(t){var n=t.start,i=t.end;return G.isWithinInterval(e,{start:n,end:i})}))||c&&!c(xe(e))||!1}function qe(e,t){var n=void 0===t?{}:t,i=n.excludeDates,r=n.excludeDateIntervals;return r&&r.length>0?r.some((function(t){var n=t.start,i=t.end;return G.isWithinInterval(e,{start:n,end:i})})):i&&i.some((function(t){var n;return t instanceof Date?Ve(e,t):Ve(e,null!==(n=t.date)&&void 0!==n?n:new Date)}))||!1}function Ke(e,t){var n=void 0===t?{}:t,i=n.minDate,r=n.maxDate,s=n.excludeDates,o=n.includeDates,a=n.filterDate;return tt(e,{minDate:i?J.startOfMonth(i):void 0,maxDate:r?v.endOfMonth(r):void 0})||(null==s?void 0:s.some((function(t){return Fe(e,t instanceof Date?t:t.date)})))||o&&!o.some((function(t){return Fe(e,t)}))||a&&!a(xe(e))||!1}function Xe(e,t,n,i){var r=M.getYear(e),s=T.getMonth(e),o=M.getYear(t),a=T.getMonth(t),l=M.getYear(i);return r===o&&r===l?s<=n&&n<=a:r<o&&(l===r&&s<=n||l===o&&a>=n||l<o&&l>r)}function Qe(e,t){var n=void 0===t?{}:t,i=n.minDate,r=n.maxDate,s=n.excludeDates,o=n.includeDates;return tt(e,{minDate:i,maxDate:r})||s&&s.some((function(t){return Fe(t instanceof Date?t:t.date,e)}))||o&&!o.some((function(t){return Fe(t,e)}))||!1}function Ze(e,t){var n=void 0===t?{}:t,i=n.minDate,r=n.maxDate,s=n.excludeDates,o=n.includeDates,a=n.filterDate;return tt(e,{minDate:i,maxDate:r})||(null==s?void 0:s.some((function(t){return Be(e,t instanceof Date?t:t.date)})))||o&&!o.some((function(t){return Be(e,t)}))||a&&!a(xe(e))||!1}function $e(e,t,n){if(!t||!n)return!1;if(!V.isValid(t)||!V.isValid(n))return!1;var i=M.getYear(t),r=M.getYear(n);return i<=e&&r>=e}function Je(e,t){var n=void 0===t?{}:t,i=n.minDate,r=n.maxDate,s=n.excludeDates,o=n.includeDates,a=n.filterDate,l=new Date(e,0,1);return tt(l,{minDate:i?ne.startOfYear(i):void 0,maxDate:r?C.endOfYear(r):void 0})||(null==s?void 0:s.some((function(e){return Le(l,e instanceof Date?e:e.date)})))||o&&!o.some((function(e){return Le(l,e)}))||a&&!a(xe(l))||!1}function et(e,t,n,i){var r=M.getYear(e),s=_.getQuarter(e),o=M.getYear(t),a=_.getQuarter(t),l=M.getYear(i);return r===o&&r===l?s<=n&&n<=a:r<o&&(l===r&&s<=n||l===o&&a>=n||l<o&&l>r)}function tt(e,t){var n,i=void 0===t?{}:t,r=i.minDate,s=i.maxDate;return null!==(n=r&&h.differenceInCalendarDays(e,r)<0||s&&h.differenceInCalendarDays(e,s)>0)&&void 0!==n&&n}function nt(e,t){return t.some((function(t){return E.getHours(t)===E.getHours(e)&&A.getMinutes(t)===A.getMinutes(e)&&R.getSeconds(t)===R.getSeconds(e)}))}function it(e,t){var n=void 0===t?{}:t,i=n.excludeTimes,r=n.includeTimes,s=n.filterTime;return i&&nt(e,i)||r&&!nt(e,r)||s&&!s(e)||!1}function rt(e,t){var n=t.minTime,i=t.maxTime;if(!n||!i)throw new Error("Both minTime and maxTime props required");var r=xe();r=Y.setHours(r,E.getHours(e)),r=q.setMinutes(r,A.getMinutes(e)),r=Q.setSeconds(r,R.getSeconds(e));var s=xe();s=Y.setHours(s,E.getHours(n)),s=q.setMinutes(s,A.getMinutes(n)),s=Q.setSeconds(s,R.getSeconds(n));var o,a=xe();a=Y.setHours(a,E.getHours(i)),a=q.setMinutes(a,A.getMinutes(i)),a=Q.setSeconds(a,R.getSeconds(i));try{o=!G.isWithinInterval(r,{start:s,end:a})}catch(e){o=!1}return o}function st(e,t){var n=void 0===t?{}:t,i=n.minDate,r=n.includeDates,s=re.subMonths(e,1);return i&&p.differenceInCalendarMonths(i,s)>0||r&&r.every((function(e){return p.differenceInCalendarMonths(e,s)>0}))||!1}function ot(e,t){var n=void 0===t?{}:t,i=n.maxDate,r=n.includeDates,s=a.addMonths(e,1);return i&&p.differenceInCalendarMonths(s,i)>0||r&&r.every((function(e){return p.differenceInCalendarMonths(s,e)>0}))||!1}function at(e,t){var n=void 0===t?{}:t,i=n.minDate,r=n.includeDates,s=ae.subYears(e,1);return i&&f.differenceInCalendarYears(i,s)>0||r&&r.every((function(e){return f.differenceInCalendarYears(e,s)>0}))||!1}function lt(e,t){var n=void 0===t?{}:t,i=n.maxDate,r=n.includeDates,s=d.addYears(e,1);return i&&f.differenceInCalendarYears(s,i)>0||r&&r.every((function(e){return f.differenceInCalendarYears(s,e)>0}))||!1}function ct(e){var t=e.minDate,n=e.includeDates;if(n&&t){var i=n.filter((function(e){return h.differenceInCalendarDays(e,t)>=0}));return W.min(i)}return n?W.min(n):t}function ut(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var i=n.filter((function(e){return h.differenceInCalendarDays(e,t)<=0}));return H.max(i)}return n?H.max(n):t}function dt(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t="react-datepicker__day--highlighted");for(var i=new Map,r=0,s=e.length;r<s;r++){var o=e[r];if(N.isDate(o)){var a=Te(o,"MM.dd.yyyy");(h=i.get(a)||[]).includes(t)||(h.push(t),i.set(a,h))}else if("object"==typeof o){var l=null!==(n=Object.keys(o)[0])&&void 0!==n?n:"",c=o[l];if("string"==typeof l&&Array.isArray(c))for(var u=0,d=c.length;u<d;u++){var h,p=c[u];p&&(a=Te(p,"MM.dd.yyyy"),(h=i.get(a)||[]).includes(l)||(h.push(l),i.set(a,h)))}}}return i}function ht(e,t){void 0===e&&(e=[]),void 0===t&&(t="react-datepicker__day--holidays");var n=new Map;return e.forEach((function(e){var i=e.date,r=e.holidayName;if(N.isDate(i)){var s=Te(i,"MM.dd.yyyy"),o=n.get(s)||{className:"",holidayNames:[]};if(!("className"in o)||o.className!==t||(a=o.holidayNames,l=[r],a.length!==l.length||!a.every((function(e,t){return e===l[t]})))){var a,l;o.className=t;var c=o.holidayNames;o.holidayNames=c?ye(ye([],c,!0),[r],!1):[r],n.set(s,o)}}})),n}function pt(e,t,n,i,r){for(var a=r.length,l=[],u=0;u<a;u++){var d=e,h=r[u];h&&(d=s.addHours(d,E.getHours(h)),d=o.addMinutes(d,A.getMinutes(h)),d=c.addSeconds(d,R.getSeconds(h)));var p=o.addMinutes(e,(n+1)*i);P.isAfter(d,t)&&I.isBefore(d,p)&&null!=h&&l.push(h)}return l}function gt(e){return e<10?"0".concat(e):"".concat(e)}function ft(e,t){void 0===t&&(t=Se);var n=Math.ceil(M.getYear(e)/t)*t;return{startPeriod:n-(t-1),endPeriod:n}}function mt(e){var t=e.getSeconds(),n=e.getMilliseconds();return le.toDate(e.getTime()-1e3*t-n)}function vt(e){if(!N.isDate(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function yt(e,t){if(!N.isDate(e)||!N.isDate(t))throw new Error("Invalid date received");var n=vt(e),i=vt(t);return I.isBefore(n,i)}function Ct(e){return e.key===Ce.Space}var wt,bt=function(e){function t(t){var i=e.call(this,t)||this;return i.onTimeChange=function(e){var t,n;i.setState({time:e});var r=i.props.date,s=r instanceof Date&&!isNaN(+r)?r:new Date;if(null==e?void 0:e.includes(":")){var o=e.split(":"),a=o[0],l=o[1];s.setHours(Number(a)),s.setMinutes(Number(l))}null===(n=(t=i.props).onChange)||void 0===n||n.call(t,s)},i.renderTimeInput=function(){var e=i.state.time,t=i.props,r=t.date,s=t.timeString,o=t.customTimeInput;return o?n.cloneElement(o,{date:r,value:e,onChange:i.onTimeChange}):he.default.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:e,onChange:function(e){i.onTimeChange(e.target.value||s)}})},i.state={time:i.props.timeString},i}return me(t,e),t.getDerivedStateFromProps=function(e,t){return e.timeString!==t.time?{time:e.timeString}:null},t.prototype.render=function(){return he.default.createElement("div",{className:"react-datepicker__input-time-container"},he.default.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),he.default.createElement("div",{className:"react-datepicker-time__input-container"},he.default.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(n.Component),St=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.dayEl=n.createRef(),i.handleClick=function(e){!i.isDisabled()&&i.props.onClick&&i.props.onClick(e)},i.handleMouseEnter=function(e){!i.isDisabled()&&i.props.onMouseEnter&&i.props.onMouseEnter(e)},i.handleOnKeyDown=function(e){var t,n;e.key===Ce.Space&&(e.preventDefault(),e.key=Ce.Enter),null===(n=(t=i.props).handleOnKeyDown)||void 0===n||n.call(t,e)},i.isSameDay=function(e){return Ve(i.props.day,e)},i.isKeyboardSelected=function(){var e;if(i.props.disabledKeyboardNavigation)return!1;var t=i.props.selectsMultiple?null===(e=i.props.selectedDates)||void 0===e?void 0:e.some((function(e){return i.isSameDayOrWeek(e)})):i.isSameDayOrWeek(i.props.selected),n=i.props.preSelection&&i.isDisabled(i.props.preSelection);return!t&&i.isSameDayOrWeek(i.props.preSelection)&&!n},i.isDisabled=function(e){return void 0===e&&(e=i.props.day),Ye(e,{minDate:i.props.minDate,maxDate:i.props.maxDate,excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals,includeDateIntervals:i.props.includeDateIntervals,includeDates:i.props.includeDates,filterDate:i.props.filterDate})},i.isExcluded=function(){return qe(i.props.day,{excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals})},i.isStartOfWeek=function(){return Ve(i.props.day,Me(i.props.day,i.props.locale,i.props.calendarStartDay))},i.isSameWeek=function(e){return i.props.showWeekPicker&&Ve(e,Me(i.props.day,i.props.locale,i.props.calendarStartDay))},i.isSameDayOrWeek=function(e){return i.isSameDay(e)||i.isSameWeek(e)},i.getHighLightedClass=function(){var e=i.props,t=e.day,n=e.highlightDates;if(!n)return!1;var r=Te(t,"MM.dd.yyyy");return n.get(r)},i.getHolidaysClass=function(){var e,t=i.props,n=t.day,r=t.holidays;if(!r)return[void 0];var s=Te(n,"MM.dd.yyyy");return r.has(s)?[null===(e=r.get(s))||void 0===e?void 0:e.className]:[void 0]},i.isInRange=function(){var e=i.props,t=e.day,n=e.startDate,r=e.endDate;return!(!n||!r)&&He(t,n,r)},i.isInSelectingRange=function(){var e,t=i.props,n=t.day,r=t.selectsStart,s=t.selectsEnd,o=t.selectsRange,a=t.selectsDisabledDaysInRange,l=t.startDate,c=t.endDate,u=null!==(e=i.props.selectingDate)&&void 0!==e?e:i.props.preSelection;return!(!(r||s||o)||!u||!a&&i.isDisabled())&&(r&&c&&(I.isBefore(u,c)||Ge(u,c))?He(n,u,c):(s&&l&&(P.isAfter(u,l)||Ge(u,l))||!(!o||!l||c||!P.isAfter(u,l)&&!Ge(u,l)))&&He(n,l,u))},i.isSelectingRangeStart=function(){var e;if(!i.isInSelectingRange())return!1;var t=i.props,n=t.day,r=t.startDate,s=t.selectsStart,o=null!==(e=i.props.selectingDate)&&void 0!==e?e:i.props.preSelection;return Ve(n,s?o:r)},i.isSelectingRangeEnd=function(){var e;if(!i.isInSelectingRange())return!1;var t=i.props,n=t.day,r=t.endDate,s=t.selectsEnd,o=t.selectsRange,a=null!==(e=i.props.selectingDate)&&void 0!==e?e:i.props.preSelection;return Ve(n,s||o?a:r)},i.isRangeStart=function(){var e=i.props,t=e.day,n=e.startDate,r=e.endDate;return!(!n||!r)&&Ve(n,t)},i.isRangeEnd=function(){var e=i.props,t=e.day,n=e.startDate,r=e.endDate;return!(!n||!r)&&Ve(r,t)},i.isWeekend=function(){var e=S.getDay(i.props.day);return 0===e||6===e},i.isAfterMonth=function(){return void 0!==i.props.month&&(i.props.month+1)%12===T.getMonth(i.props.day)},i.isBeforeMonth=function(){return void 0!==i.props.month&&(T.getMonth(i.props.day)+1)%12===i.props.month},i.isCurrentDay=function(){return i.isSameDay(xe())},i.isSelected=function(){var e;return i.props.selectsMultiple?null===(e=i.props.selectedDates)||void 0===e?void 0:e.some((function(e){return i.isSameDayOrWeek(e)})):i.isSameDayOrWeek(i.props.selected)},i.getClassNames=function(e){var n,r=i.props.dayClassName?i.props.dayClassName(e):void 0;return t.clsx("react-datepicker__day",r,"react-datepicker__day--"+Te(i.props.day,"ddd",n),{"react-datepicker__day--disabled":i.isDisabled(),"react-datepicker__day--excluded":i.isExcluded(),"react-datepicker__day--selected":i.isSelected(),"react-datepicker__day--keyboard-selected":i.isKeyboardSelected(),"react-datepicker__day--range-start":i.isRangeStart(),"react-datepicker__day--range-end":i.isRangeEnd(),"react-datepicker__day--in-range":i.isInRange(),"react-datepicker__day--in-selecting-range":i.isInSelectingRange(),"react-datepicker__day--selecting-range-start":i.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":i.isSelectingRangeEnd(),"react-datepicker__day--today":i.isCurrentDay(),"react-datepicker__day--weekend":i.isWeekend(),"react-datepicker__day--outside-month":i.isAfterMonth()||i.isBeforeMonth()},i.getHighLightedClass(),i.getHolidaysClass())},i.getAriaLabel=function(){var e=i.props,t=e.day,n=e.ariaLabelPrefixWhenEnabled,r=void 0===n?"Choose":n,s=e.ariaLabelPrefixWhenDisabled,o=void 0===s?"Not available":s,a=i.isDisabled()||i.isExcluded()?o:r;return"".concat(a," ").concat(Te(t,"PPPP",i.props.locale))},i.getTitle=function(){var e=i.props,t=e.day,n=e.holidays,r=void 0===n?new Map:n,s=e.excludeDates,o=Te(t,"MM.dd.yyyy"),a=[];return r.has(o)&&a.push.apply(a,r.get(o).holidayNames),i.isExcluded()&&a.push(null==s?void 0:s.filter((function(e){return e instanceof Date?Ve(e,t):Ve(null==e?void 0:e.date,t)})).map((function(e){if(!(e instanceof Date))return null==e?void 0:e.message}))),a.join(", ")},i.getTabIndex=function(){var e=i.props.selected,t=i.props.preSelection;return(!i.props.showWeekPicker||!i.props.showWeekNumber&&i.isStartOfWeek())&&(i.isKeyboardSelected()||i.isSameDay(e)&&Ve(t,e))?0:-1},i.handleFocusDay=function(){var e;i.shouldFocusDay()&&(null===(e=i.dayEl.current)||void 0===e||e.focus({preventScroll:!0}))},i.renderDayContents=function(){return i.props.monthShowsDuplicateDaysEnd&&i.isAfterMonth()||i.props.monthShowsDuplicateDaysStart&&i.isBeforeMonth()?null:i.props.renderDayContents?i.props.renderDayContents(b.getDate(i.props.day),i.props.day):b.getDate(i.props.day)},i.render=function(){return he.default.createElement("div",{ref:i.dayEl,className:i.getClassNames(i.props.day),onKeyDown:i.handleOnKeyDown,onClick:i.handleClick,onMouseEnter:i.props.usePointerEvent?void 0:i.handleMouseEnter,onPointerEnter:i.props.usePointerEvent?i.handleMouseEnter:void 0,tabIndex:i.getTabIndex(),"aria-label":i.getAriaLabel(),role:"option",title:i.getTitle(),"aria-disabled":i.isDisabled(),"aria-current":i.isCurrentDay()?"date":void 0,"aria-selected":i.isSelected()||i.isInRange()},i.renderDayContents(),""!==i.getTitle()&&he.default.createElement("span",{className:"overlay"},i.getTitle()))},i}return me(i,e),i.prototype.componentDidMount=function(){this.handleFocusDay()},i.prototype.componentDidUpdate=function(){this.handleFocusDay()},i.prototype.shouldFocusDay=function(){var e=!1;return 0===this.getTabIndex()&&this.isSameDay(this.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(e=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(e=!1),this.isDayActiveElement()&&(e=!0),this.isDuplicateDay()&&(e=!1)),e},i.prototype.isDayActiveElement=function(){var e,t,n;return(null===(t=null===(e=this.props.containerRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.contains(document.activeElement))&&(null===(n=document.activeElement)||void 0===n?void 0:n.classList.contains("react-datepicker__day"))},i.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},i}(n.Component),Et=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.weekNumberEl=n.createRef(),t.handleClick=function(e){t.props.onClick&&t.props.onClick(e)},t.handleOnKeyDown=function(e){var n,i;e.key===Ce.Space&&(e.preventDefault(),e.key=Ce.Enter),null===(i=(n=t.props).handleOnKeyDown)||void 0===i||i.call(n,e)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Ve(t.props.date,t.props.selected)&&Ve(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||Ve(t.props.date,t.props.selected)&&Ve(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(e){var n=!1;0===t.getTabIndex()&&!(null==e?void 0:e.isInputFocused)&&Ve(t.props.date,t.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(n=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(n=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(n=!0)),n&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return me(i,e),Object.defineProperty(i,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),i.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},i.prototype.componentDidUpdate=function(e){this.handleFocusWeekNumber(e)},i.prototype.render=function(){var e=this.props,n=e.weekNumber,r=e.ariaLabelPrefix,s=void 0===r?i.defaultProps.ariaLabelPrefix:r,o=e.onClick,a={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!o,"react-datepicker__week-number--selected":!!o&&Ve(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return he.default.createElement("div",{ref:this.weekNumberEl,className:t.clsx(a),"aria-label":"".concat(s," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},n)},i}(n.Component),xt=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDisabled=function(e){return Ye(e,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.handleDayClick=function(e,n){t.props.onDayClick&&t.props.onDayClick(e,n)},t.handleDayMouseEnter=function(e){t.props.onDayMouseEnter&&t.props.onDayMouseEnter(e)},t.handleWeekClick=function(e,i,r){for(var s,o,a,l=new Date(e),c=0;c<7;c++){var u=new Date(e);if(u.setDate(u.getDate()+c),!t.isDisabled(u)){l=u;break}}"function"==typeof t.props.onWeekSelect&&t.props.onWeekSelect(l,i,r),t.props.showWeekPicker&&t.handleDayClick(l,r),(null!==(s=t.props.shouldCloseOnSelect)&&void 0!==s?s:n.defaultProps.shouldCloseOnSelect)&&(null===(a=(o=t.props).setOpen)||void 0===a||a.call(o,!1))},t.formatWeekNumber=function(e){return t.props.formatWeekNumber?t.props.formatWeekNumber(e):function(e){return x.getISOWeek(e)}(e)},t.renderDays=function(){var e=t.startOfWeek(),i=[],s=t.formatWeekNumber(e);if(t.props.showWeekNumber){var o=t.props.onWeekSelect||t.props.showWeekPicker?t.handleWeekClick.bind(t,e,s):void 0;i.push(he.default.createElement(Et,ve({key:"W"},n.defaultProps,t.props,{weekNumber:s,date:e,onClick:o})))}return i.concat([0,1,2,3,4,5,6].map((function(i){var s=r.addDays(e,i);return he.default.createElement(St,ve({},n.defaultProps,t.props,{ariaLabelPrefixWhenEnabled:t.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:t.props.disabledDayAriaLabelPrefix,key:s.valueOf(),day:s,onClick:t.handleDayClick.bind(t,s),onMouseEnter:t.handleDayMouseEnter.bind(t,s)}))})))},t.startOfWeek=function(){return Me(t.props.day,t.props.locale,t.props.calendarStartDay)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Ve(t.startOfWeek(),t.props.selected)&&Ve(t.startOfWeek(),t.props.preSelection)},t}return me(n,e),Object.defineProperty(n,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),n.prototype.render=function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":Ve(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return he.default.createElement("div",{className:t.clsx(e)},this.renderDays())},n}(n.Component),At="two_columns",Tt="three_columns",_t="four_columns",Rt=((wt={})[At]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},wt[Tt]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},wt[_t]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},wt);function Dt(e,t){return e?_t:t?At:Tt}var Mt=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.MONTH_REFS=ye([],Array(12),!0).map((function(){return n.createRef()})),i.QUARTER_REFS=ye([],Array(4),!0).map((function(){return n.createRef()})),i.isDisabled=function(e){return Ye(e,{minDate:i.props.minDate,maxDate:i.props.maxDate,excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals,includeDateIntervals:i.props.includeDateIntervals,includeDates:i.props.includeDates,filterDate:i.props.filterDate})},i.isExcluded=function(e){return qe(e,{excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals})},i.handleDayClick=function(e,t){var n,r;null===(r=(n=i.props).onDayClick)||void 0===r||r.call(n,e,t,i.props.orderInDisplay)},i.handleDayMouseEnter=function(e){var t,n;null===(n=(t=i.props).onDayMouseEnter)||void 0===n||n.call(t,e)},i.handleMouseLeave=function(){var e,t;null===(t=(e=i.props).onMouseLeave)||void 0===t||t.call(e)},i.isRangeStartMonth=function(e){var t=i.props,n=t.day,r=t.startDate,s=t.endDate;return!(!r||!s)&&Fe(K.setMonth(n,e),r)},i.isRangeStartQuarter=function(e){var t=i.props,n=t.day,r=t.startDate,s=t.endDate;return!(!r||!s)&&Be(X.setQuarter(n,e),r)},i.isRangeEndMonth=function(e){var t=i.props,n=t.day,r=t.startDate,s=t.endDate;return!(!r||!s)&&Fe(K.setMonth(n,e),s)},i.isRangeEndQuarter=function(e){var t=i.props,n=t.day,r=t.startDate,s=t.endDate;return!(!r||!s)&&Be(X.setQuarter(n,e),s)},i.isInSelectingRangeMonth=function(e){var t,n=i.props,r=n.day,s=n.selectsStart,o=n.selectsEnd,a=n.selectsRange,l=n.startDate,c=n.endDate,u=null!==(t=i.props.selectingDate)&&void 0!==t?t:i.props.preSelection;return!(!(s||o||a)||!u)&&(s&&c?Xe(u,c,e,r):(o&&l||!(!a||!l||c))&&Xe(l,u,e,r))},i.isSelectingMonthRangeStart=function(e){var t;if(!i.isInSelectingRangeMonth(e))return!1;var n=i.props,r=n.day,s=n.startDate,o=n.selectsStart,a=K.setMonth(r,e),l=null!==(t=i.props.selectingDate)&&void 0!==t?t:i.props.preSelection;return Fe(a,o?l:s)},i.isSelectingMonthRangeEnd=function(e){var t;if(!i.isInSelectingRangeMonth(e))return!1;var n=i.props,r=n.day,s=n.endDate,o=n.selectsEnd,a=n.selectsRange,l=K.setMonth(r,e),c=null!==(t=i.props.selectingDate)&&void 0!==t?t:i.props.preSelection;return Fe(l,o||a?c:s)},i.isInSelectingRangeQuarter=function(e){var t,n=i.props,r=n.day,s=n.selectsStart,o=n.selectsEnd,a=n.selectsRange,l=n.startDate,c=n.endDate,u=null!==(t=i.props.selectingDate)&&void 0!==t?t:i.props.preSelection;return!(!(s||o||a)||!u)&&(s&&c?et(u,c,e,r):(o&&l||!(!a||!l||c))&&et(l,u,e,r))},i.isWeekInMonth=function(e){var t=i.props.day,n=r.addDays(e,6);return Fe(e,t)||Fe(n,t)},i.isCurrentMonth=function(e,t){return M.getYear(e)===M.getYear(xe())&&t===T.getMonth(xe())},i.isCurrentQuarter=function(e,t){return M.getYear(e)===M.getYear(xe())&&t===_.getQuarter(xe())},i.isSelectedMonth=function(e,t,n){return T.getMonth(n)===t&&M.getYear(e)===M.getYear(n)},i.isSelectMonthInList=function(e,t,n){return n.some((function(n){return i.isSelectedMonth(e,t,n)}))},i.isSelectedQuarter=function(e,t,n){return _.getQuarter(e)===t&&M.getYear(e)===M.getYear(n)},i.renderWeeks=function(){for(var e=[],t=i.props.fixedHeight,n=0,r=!1,s=Me(Pe(i.props.day),i.props.locale,i.props.calendarStartDay),o=i.props.selected?function(e){return i.props.showWeekPicker?Me(e,i.props.locale,i.props.calendarStartDay):i.props.selected}(i.props.selected):void 0,a=i.props.preSelection?function(e){return i.props.showWeekPicker?Me(e,i.props.locale,i.props.calendarStartDay):i.props.preSelection}(i.props.preSelection):void 0;e.push(he.default.createElement(xt,ve({},i.props,{ariaLabelPrefix:i.props.weekAriaLabelPrefix,key:n,day:s,month:T.getMonth(i.props.day),onDayClick:i.handleDayClick,onDayMouseEnter:i.handleDayMouseEnter,selected:o,preSelection:a,showWeekNumber:i.props.showWeekNumbers}))),!r;){n++,s=u.addWeeks(s,1);var l=t&&n>=6,c=!t&&!i.isWeekInMonth(s);if(l||c){if(!i.props.peekNextMonth)break;r=!0}}return e},i.onMonthClick=function(e,t){var n=i.isMonthDisabledForLabelDate(t),r=n.isDisabled,s=n.labelDate;r||i.handleDayClick(Pe(s),e)},i.onMonthMouseEnter=function(e){var t=i.isMonthDisabledForLabelDate(e),n=t.isDisabled,r=t.labelDate;n||i.handleDayMouseEnter(Pe(r))},i.handleMonthNavigation=function(e,t){var n,r,s,o;null===(r=(n=i.props).setPreSelection)||void 0===r||r.call(n,t),null===(o=null===(s=i.MONTH_REFS[e])||void 0===s?void 0:s.current)||void 0===o||o.focus()},i.handleKeyboardNavigation=function(e,t,n){var r,s=i.props,o=s.selected,l=s.preSelection,c=s.setPreSelection,u=s.minDate,d=s.maxDate,h=s.showFourColumnMonthYearPicker,p=s.showTwoColumnMonthYearPicker;if(l){var g=Dt(h,p),f=i.getVerticalOffset(g),m=null===(r=Rt[g])||void 0===r?void 0:r.grid,v=function(e,t,n){var i,r,s=t,o=n;switch(e){case Ce.ArrowRight:s=a.addMonths(t,1),o=11===n?0:n+1;break;case Ce.ArrowLeft:s=re.subMonths(t,1),o=0===n?11:n-1;break;case Ce.ArrowUp:s=re.subMonths(t,f),o=(null===(i=null==m?void 0:m[0])||void 0===i?void 0:i.includes(n))?n+12-f:n-f;break;case Ce.ArrowDown:s=a.addMonths(t,f),o=(null===(r=null==m?void 0:m[m.length-1])||void 0===r?void 0:r.includes(n))?n-12+f:n+f}return{newCalculatedDate:s,newCalculatedMonth:o}};if(t!==Ce.Enter){var y=function(e,t,n){for(var r=e,s=!1,o=0,a=v(r,t,n),l=a.newCalculatedDate,c=a.newCalculatedMonth;!s;){if(o>=40){l=t,c=n;break}var h;u&&l<u&&(r=Ce.ArrowRight,l=(h=v(r,l,c)).newCalculatedDate,c=h.newCalculatedMonth),d&&l>d&&(r=Ce.ArrowLeft,l=(h=v(r,l,c)).newCalculatedDate,c=h.newCalculatedMonth),Qe(l,i.props)?(l=(h=v(r,l,c)).newCalculatedDate,c=h.newCalculatedMonth):s=!0,o++}return{newCalculatedDate:l,newCalculatedMonth:c}}(t,l,n),C=y.newCalculatedDate,w=y.newCalculatedMonth;switch(t){case Ce.ArrowRight:case Ce.ArrowLeft:case Ce.ArrowUp:case Ce.ArrowDown:i.handleMonthNavigation(w,C)}}else i.isMonthDisabled(n)||(i.onMonthClick(e,n),null==c||c(o))}},i.getVerticalOffset=function(e){var t,n;return null!==(n=null===(t=Rt[e])||void 0===t?void 0:t.verticalNavigationOffset)&&void 0!==n?n:0},i.onMonthKeyDown=function(e,t){var n=i.props,r=n.disabledKeyboardNavigation,s=n.handleOnMonthKeyDown,o=e.key;o!==Ce.Tab&&e.preventDefault(),r||i.handleKeyboardNavigation(e,o,t),s&&s(e)},i.onQuarterClick=function(e,t){var n=X.setQuarter(i.props.day,t);Ze(n,i.props)||i.handleDayClick(Ne(n),e)},i.onQuarterMouseEnter=function(e){var t=X.setQuarter(i.props.day,e);Ze(t,i.props)||i.handleDayMouseEnter(Ne(t))},i.handleQuarterNavigation=function(e,t){var n,r,s,o;i.isDisabled(t)||i.isExcluded(t)||(null===(r=(n=i.props).setPreSelection)||void 0===r||r.call(n,t),null===(o=null===(s=i.QUARTER_REFS[e-1])||void 0===s?void 0:s.current)||void 0===o||o.focus())},i.onQuarterKeyDown=function(e,t){var n,r,s=e.key;if(!i.props.disabledKeyboardNavigation)switch(s){case Ce.Enter:i.onQuarterClick(e,t),null===(r=(n=i.props).setPreSelection)||void 0===r||r.call(n,i.props.selected);break;case Ce.ArrowRight:if(!i.props.preSelection)break;i.handleQuarterNavigation(4===t?1:t+1,l.addQuarters(i.props.preSelection,1));break;case Ce.ArrowLeft:if(!i.props.preSelection)break;i.handleQuarterNavigation(1===t?4:t-1,se.subQuarters(i.props.preSelection,1))}},i.isMonthDisabledForLabelDate=function(e){var t,n=i.props,r=n.day,s=n.minDate,o=n.maxDate,a=n.excludeDates,l=n.includeDates,c=K.setMonth(r,e);return{isDisabled:null!==(t=(s||o||a||l)&&Ke(c,i.props))&&void 0!==t&&t,labelDate:c}},i.isMonthDisabled=function(e){return i.isMonthDisabledForLabelDate(e).isDisabled},i.getMonthClassNames=function(e){var n=i.props,r=n.day,s=n.startDate,o=n.endDate,a=n.preSelection,l=n.monthClassName,c=l?l(K.setMonth(r,e)):void 0,u=i.getSelection();return t.clsx("react-datepicker__month-text","react-datepicker__month-".concat(e),c,{"react-datepicker__month-text--disabled":i.isMonthDisabled(e),"react-datepicker__month-text--selected":u?i.isSelectMonthInList(r,e,u):void 0,"react-datepicker__month-text--keyboard-selected":!i.props.disabledKeyboardNavigation&&a&&i.isSelectedMonth(r,e,a)&&!i.isMonthDisabled(e),"react-datepicker__month-text--in-selecting-range":i.isInSelectingRangeMonth(e),"react-datepicker__month-text--in-range":s&&o?Xe(s,o,e,r):void 0,"react-datepicker__month-text--range-start":i.isRangeStartMonth(e),"react-datepicker__month-text--range-end":i.isRangeEndMonth(e),"react-datepicker__month-text--selecting-range-start":i.isSelectingMonthRangeStart(e),"react-datepicker__month-text--selecting-range-end":i.isSelectingMonthRangeEnd(e),"react-datepicker__month-text--today":i.isCurrentMonth(r,e)})},i.getTabIndex=function(e){if(null==i.props.preSelection)return"-1";var t=T.getMonth(i.props.preSelection);return i.props.disabledKeyboardNavigation||e!==t?"-1":"0"},i.getQuarterTabIndex=function(e){if(null==i.props.preSelection)return"-1";var t=_.getQuarter(i.props.preSelection);return i.props.disabledKeyboardNavigation||e!==t?"-1":"0"},i.getAriaLabel=function(e){var t=i.props,n=t.chooseDayAriaLabelPrefix,r=void 0===n?"Choose":n,s=t.disabledDayAriaLabelPrefix,o=void 0===s?"Not available":s,a=t.day,l=t.locale,c=K.setMonth(a,e),u=i.isDisabled(c)||i.isExcluded(c)?o:r;return"".concat(u," ").concat(Te(c,"MMMM yyyy",l))},i.getQuarterClassNames=function(e){var n=i.props,r=n.day,s=n.startDate,o=n.endDate,a=n.selected,l=n.minDate,c=n.maxDate,u=n.excludeDates,d=n.includeDates,h=n.filterDate,p=n.preSelection,g=n.disabledKeyboardNavigation,f=(l||c||u||d||h)&&Ze(X.setQuarter(r,e),i.props);return t.clsx("react-datepicker__quarter-text","react-datepicker__quarter-".concat(e),{"react-datepicker__quarter-text--disabled":f,"react-datepicker__quarter-text--selected":a?i.isSelectedQuarter(r,e,a):void 0,"react-datepicker__quarter-text--keyboard-selected":!g&&p&&i.isSelectedQuarter(r,e,p)&&!f,"react-datepicker__quarter-text--in-selecting-range":i.isInSelectingRangeQuarter(e),"react-datepicker__quarter-text--in-range":s&&o?et(s,o,e,r):void 0,"react-datepicker__quarter-text--range-start":i.isRangeStartQuarter(e),"react-datepicker__quarter-text--range-end":i.isRangeEndQuarter(e)})},i.getMonthContent=function(e){var t=i.props,n=t.showFullMonthYearPicker,r=t.renderMonthContent,s=t.locale,o=t.day,a=ze(e,s),l=Ue(e,s);return r?r(e,a,l,o):n?l:a},i.getQuarterContent=function(e){var t,n=i.props,r=n.renderQuarterContent,s=function(e,t){return Te(X.setQuarter(xe(),e),"QQQ",t)}(e,n.locale);return null!==(t=null==r?void 0:r(e,s))&&void 0!==t?t:s},i.renderMonths=function(){var e,t=i.props,n=t.showTwoColumnMonthYearPicker,r=t.showFourColumnMonthYearPicker,s=t.day,o=t.selected,a=null===(e=Rt[Dt(r,n)])||void 0===e?void 0:e.grid;return null==a?void 0:a.map((function(e,t){return he.default.createElement("div",{className:"react-datepicker__month-wrapper",key:t},e.map((function(e,t){return he.default.createElement("div",{ref:i.MONTH_REFS[e],key:t,onClick:function(t){i.onMonthClick(t,e)},onKeyDown:function(t){Ct(t)&&(t.preventDefault(),t.key=Ce.Enter),i.onMonthKeyDown(t,e)},onMouseEnter:i.props.usePointerEvent?void 0:function(){return i.onMonthMouseEnter(e)},onPointerEnter:i.props.usePointerEvent?function(){return i.onMonthMouseEnter(e)}:void 0,tabIndex:Number(i.getTabIndex(e)),className:i.getMonthClassNames(e),"aria-disabled":i.isMonthDisabled(e),role:"option","aria-label":i.getAriaLabel(e),"aria-current":i.isCurrentMonth(s,e)?"date":void 0,"aria-selected":o?i.isSelectedMonth(s,e,o):void 0},i.getMonthContent(e))})))}))},i.renderQuarters=function(){var e=i.props,t=e.day,n=e.selected;return he.default.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map((function(e,r){return he.default.createElement("div",{key:r,ref:i.QUARTER_REFS[r],role:"option",onClick:function(t){i.onQuarterClick(t,e)},onKeyDown:function(t){i.onQuarterKeyDown(t,e)},onMouseEnter:i.props.usePointerEvent?void 0:function(){return i.onQuarterMouseEnter(e)},onPointerEnter:i.props.usePointerEvent?function(){return i.onQuarterMouseEnter(e)}:void 0,className:i.getQuarterClassNames(e),"aria-selected":n?i.isSelectedQuarter(t,e,n):void 0,tabIndex:Number(i.getQuarterTabIndex(e)),"aria-current":i.isCurrentQuarter(t,e)?"date":void 0},i.getQuarterContent(e))})))},i.getClassNames=function(){var e=i.props,n=e.selectingDate,r=e.selectsStart,s=e.selectsEnd,o=e.showMonthYearPicker,a=e.showQuarterYearPicker,l=e.showWeekPicker;return t.clsx("react-datepicker__month",{"react-datepicker__month--selecting-range":n&&(r||s)},{"react-datepicker__monthPicker":o},{"react-datepicker__quarterPicker":a},{"react-datepicker__weekPicker":l})},i}return me(i,e),i.prototype.getSelection=function(){var e=this.props,t=e.selected,n=e.selectedDates;return e.selectsMultiple?n:t?[t]:void 0},i.prototype.render=function(){var e=this.props,t=e.showMonthYearPicker,n=e.showQuarterYearPicker,i=e.day,r=e.ariaLabelPrefix,s=void 0===r?"Month ":r,o=s?s.trim()+" ":"";return he.default.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(o).concat(Te(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},t?this.renderMonths():n?this.renderQuarters():this.renderWeeks())},i}(n.Component),Pt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isSelectedMonth=function(e){return t.props.month===e},t.renderOptions=function(){return t.props.monthNames.map((function(e,n){return he.default.createElement("div",{className:t.isSelectedMonth(n)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:e,onClick:t.onChange.bind(t,n),"aria-selected":t.isSelectedMonth(n)?"true":void 0},t.isSelectedMonth(n)?he.default.createElement("span",{className:"react-datepicker__month-option--selected"},"\u2713"):"",e)}))},t.onChange=function(e){return t.props.onChange(e)},t.handleClickOutside=function(){return t.props.onCancel()},t}return me(t,e),t.prototype.render=function(){return he.default.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())},t}(n.Component),It=pe.default(Pt),Nt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(e){return e.map((function(e,t){return he.default.createElement("option",{key:e,value:t},e)}))},t.renderSelectMode=function(e){return he.default.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(e){return t.onChange(parseInt(e.target.value))}},t.renderSelectOptions(e))},t.renderReadView=function(e,n){return he.default.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},he.default.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),he.default.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},n[t.props.month]))},t.renderDropdown=function(e){return he.default.createElement(It,ve({key:"dropdown"},t.props,{monthNames:e,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(e){var n=t.state.dropdownVisible,i=[t.renderReadView(!n,e)];return n&&i.unshift(t.renderDropdown(e)),i},t.onChange=function(e){t.toggleDropdown(),e!==t.props.month&&t.props.onChange(e)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return me(t,e),t.prototype.render=function(){var e,t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return ze(e,t.props.locale)}:function(e){return Ue(e,t.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(n);break;case"select":e=this.renderSelectMode(n)}return he.default.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(n.Component);function kt(e,t){for(var n=[],i=Pe(e),r=Pe(t);!P.isAfter(i,r);)n.push(xe(i)),i=a.addMonths(i,1);return n}var Ot=function(e){function n(t){var n=e.call(this,t)||this;return n.renderOptions=function(){return n.state.monthYearsList.map((function(e){var t=D.getTime(e),i=Le(n.props.date,e)&&Fe(n.props.date,e);return he.default.createElement("div",{className:i?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:t,onClick:n.onChange.bind(n,t),"aria-selected":i?"true":void 0},i?he.default.createElement("span",{className:"react-datepicker__month-year-option--selected"},"\u2713"):"",Te(e,n.props.dateFormat,n.props.locale))}))},n.onChange=function(e){return n.props.onChange(e)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:kt(n.props.minDate,n.props.maxDate)},n}return me(n,e),n.prototype.render=function(){var e=t.clsx({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return he.default.createElement("div",{className:e},this.renderOptions())},n}(n.Component),Lt=pe.default(Ot),Ft=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var e=Pe(t.props.minDate),n=Pe(t.props.maxDate),i=[];!P.isAfter(e,n);){var r=D.getTime(e);i.push(he.default.createElement("option",{key:r,value:r},Te(e,t.props.dateFormat,t.props.locale))),e=a.addMonths(e,1)}return i},t.onSelectChange=function(e){t.onChange(parseInt(e.target.value))},t.renderSelectMode=function(){return he.default.createElement("select",{value:D.getTime(Pe(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(e){var n=Te(t.props.date,t.props.dateFormat,t.props.locale);return he.default.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},he.default.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),he.default.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},n))},t.renderDropdown=function(){return he.default.createElement(Lt,ve({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var e=t.state.dropdownVisible,n=[t.renderReadView(!e)];return e&&n.unshift(t.renderDropdown()),n},t.onChange=function(e){t.toggleDropdown();var n=xe(e);Le(t.props.date,n)&&Fe(t.props.date,n)||t.props.onChange(n)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return me(t,e),t.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return he.default.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(n.Component),Bt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame((function(){var e,i,r;n.list&&(n.list.scrollTop=null!==(r=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-(null!==(i=null===(e=n.header)||void 0===e?void 0:e.clientHeight)&&void 0!==i?i:0):n.list.clientHeight,n.centerLi))&&void 0!==r?r:0)}))},n.handleClick=function(e){var t,i;(n.props.minTime||n.props.maxTime)&&rt(e,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&it(e,n.props)||null===(i=(t=n.props).onChange)||void 0===i||i.call(t,e)},n.isSelectedTime=function(e){return n.props.selected&&(t=e,mt(n.props.selected).getTime()===mt(t).getTime());var t},n.isDisabledTime=function(e){return(n.props.minTime||n.props.maxTime)&&rt(e,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&it(e,n.props)},n.liClasses=function(e){var i,r=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(e):void 0];return n.isSelectedTime(e)&&r.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(e)&&r.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(3600*E.getHours(e)+60*A.getMinutes(e)+R.getSeconds(e))%(60*(null!==(i=n.props.intervals)&&void 0!==i?i:t.defaultProps.intervals))!=0&&r.push("react-datepicker__time-list-item--injected"),r.join(" ")},n.handleOnKeyDown=function(e,t){var i,r;e.key===Ce.Space&&(e.preventDefault(),e.key=Ce.Enter),(e.key===Ce.ArrowUp||e.key===Ce.ArrowLeft)&&e.target instanceof HTMLElement&&e.target.previousSibling&&(e.preventDefault(),e.target.previousSibling instanceof HTMLElement&&e.target.previousSibling.focus()),(e.key===Ce.ArrowDown||e.key===Ce.ArrowRight)&&e.target instanceof HTMLElement&&e.target.nextSibling&&(e.preventDefault(),e.target.nextSibling instanceof HTMLElement&&e.target.nextSibling.focus()),e.key===Ce.Enter&&n.handleClick(t),null===(r=(i=n.props).handleOnKeyDown)||void 0===r||r.call(i,e)},n.renderTimes=function(){for(var e,i=[],r=n.props.format?n.props.format:"p",s=null!==(e=n.props.intervals)&&void 0!==e?e:t.defaultProps.intervals,a=n.props.selected||n.props.openToDate||xe(),l=De(a),c=n.props.injectTimes&&n.props.injectTimes.sort((function(e,t){return e.getTime()-t.getTime()})),u=60*function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}(a),d=u/s,h=0;h<d;h++){var p=o.addMinutes(l,h*s);if(i.push(p),c){var g=pt(l,p,h,s,c);i=i.concat(g)}}var f=i.reduce((function(e,t){return t.getTime()<=a.getTime()?t:e}),i[0]);return i.map((function(e){return he.default.createElement("li",{key:e.valueOf(),onClick:n.handleClick.bind(n,e),className:n.liClasses(e),ref:function(t){e===f&&(n.centerLi=t)},onKeyDown:function(t){n.handleOnKeyDown(t,e)},tabIndex:e===f?0:-1,role:"option","aria-selected":n.isSelectedTime(e)?"true":void 0,"aria-disabled":n.isDisabledTime(e)?"true":void 0},Te(e,r,n.props.locale))}))},n}return me(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time"}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var e,n=this,i=this.state.height;return he.default.createElement("div",{className:"react-datepicker__time-container ".concat((null!==(e=this.props.todayButton)&&void 0!==e?e:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},he.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(e){n.header=e}},he.default.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),he.default.createElement("div",{className:"react-datepicker__time"},he.default.createElement("div",{className:"react-datepicker__time-box"},he.default.createElement("ul",{className:"react-datepicker__time-list",ref:function(e){n.list=e},style:i?{height:i}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)},t}(n.Component),Vt=function(e){function i(i){var r=e.call(this,i)||this;return r.YEAR_REFS=ye([],Array(r.props.yearItemNumber),!0).map((function(){return n.createRef()})),r.isDisabled=function(e){return Ye(e,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(e){return qe(e,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var e;return null!==(e=r.props.selectingDate)&&void 0!==e?e:r.props.preSelection},r.updateFocusOnPaginate=function(e){window.requestAnimationFrame((function(){var t,n;null===(n=null===(t=r.YEAR_REFS[e])||void 0===t?void 0:t.current)||void 0===n||n.focus()}))},r.handleYearClick=function(e,t){r.props.onDayClick&&r.props.onDayClick(e,t)},r.handleYearNavigation=function(e,t){var n,i,s,o,a=r.props,l=a.date,c=a.yearItemNumber;if(void 0!==l&&void 0!==c){var u=ft(l,c).startPeriod;r.isDisabled(t)||r.isExcluded(t)||(null===(i=(n=r.props).setPreSelection)||void 0===i||i.call(n,t),e-u<0?r.updateFocusOnPaginate(c-(u-e)):e-u>=c?r.updateFocusOnPaginate(Math.abs(c-(e-u))):null===(o=null===(s=r.YEAR_REFS[e-u])||void 0===s?void 0:s.current)||void 0===o||o.focus())}},r.isSameDay=function(e,t){return Ve(e,t)},r.isCurrentYear=function(e){return e===M.getYear(xe())},r.isRangeStart=function(e){return r.props.startDate&&r.props.endDate&&Le(Z.setYear(xe(),e),r.props.startDate)},r.isRangeEnd=function(e){return r.props.startDate&&r.props.endDate&&Le(Z.setYear(xe(),e),r.props.endDate)},r.isInRange=function(e){return $e(e,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(e){var t=r.props,n=t.selectsStart,i=t.selectsEnd,s=t.selectsRange,o=t.startDate,a=t.endDate;return!(!(n||i||s)||!r.selectingDate())&&(n&&a?$e(e,r.selectingDate(),a):(i&&o||!(!s||!o||a))&&$e(e,o,r.selectingDate()))},r.isSelectingRangeStart=function(e){var t;if(!r.isInSelectingRange(e))return!1;var n=r.props,i=n.startDate,s=n.selectsStart;return Le(Z.setYear(xe(),e),s?null!==(t=r.selectingDate())&&void 0!==t?t:null:null!=i?i:null)},r.isSelectingRangeEnd=function(e){var t;if(!r.isInSelectingRange(e))return!1;var n=r.props,i=n.endDate,s=n.selectsEnd,o=n.selectsRange;return Le(Z.setYear(xe(),e),s||o?null!==(t=r.selectingDate())&&void 0!==t?t:null:null!=i?i:null)},r.isKeyboardSelected=function(e){if(void 0!==r.props.date&&null!=r.props.selected&&null!=r.props.preSelection){var t=r.props,n=t.minDate,i=t.maxDate,s=t.excludeDates,o=t.includeDates,a=t.filterDate,l=Ie(Z.setYear(r.props.date,e)),c=(n||i||s||o||a)&&Je(e,r.props);return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!Ve(l,Ie(r.props.selected))&&Ve(l,Ie(r.props.preSelection))&&!c}},r.onYearClick=function(e,t){var n=r.props.date;void 0!==n&&r.handleYearClick(Ie(Z.setYear(n,t)),e)},r.onYearKeyDown=function(e,t){var n,i,s=e.key,o=r.props,a=o.date,l=o.yearItemNumber,c=o.handleOnKeyDown;if(s!==Ce.Tab&&e.preventDefault(),!r.props.disabledKeyboardNavigation)switch(s){case Ce.Enter:if(null==r.props.selected)break;r.onYearClick(e,t),null===(i=(n=r.props).setPreSelection)||void 0===i||i.call(n,r.props.selected);break;case Ce.ArrowRight:if(null==r.props.preSelection)break;r.handleYearNavigation(t+1,d.addYears(r.props.preSelection,1));break;case Ce.ArrowLeft:if(null==r.props.preSelection)break;r.handleYearNavigation(t-1,ae.subYears(r.props.preSelection,1));break;case Ce.ArrowUp:if(void 0===a||void 0===l||null==r.props.preSelection)break;var u=ft(a,l).startPeriod;if((g=t-(p=3))<u){var h=l%p;t>=u&&t<u+h?p=h:p+=h,g=t-p}r.handleYearNavigation(g,ae.subYears(r.props.preSelection,p));break;case Ce.ArrowDown:if(void 0===a||void 0===l||null==r.props.preSelection)break;var p,g,f=ft(a,l).endPeriod;(g=t+(p=3))>f&&(h=l%p,t<=f&&t>f-h?p=h:p+=h,g=t+p),r.handleYearNavigation(g,d.addYears(r.props.preSelection,p))}c&&c(e)},r.getYearClassNames=function(e){var n=r.props,i=n.date,s=n.minDate,o=n.maxDate,a=n.selected,l=n.excludeDates,c=n.includeDates,u=n.filterDate,d=n.yearClassName;return t.clsx("react-datepicker__year-text","react-datepicker__year-".concat(e),i?null==d?void 0:d(Z.setYear(i,e)):void 0,{"react-datepicker__year-text--selected":a?e===M.getYear(a):void 0,"react-datepicker__year-text--disabled":(s||o||l||c||u)&&Je(e,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(e),"react-datepicker__year-text--range-start":r.isRangeStart(e),"react-datepicker__year-text--range-end":r.isRangeEnd(e),"react-datepicker__year-text--in-range":r.isInRange(e),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(e),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(e),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(e),"react-datepicker__year-text--today":r.isCurrentYear(e)})},r.getYearTabIndex=function(e){return r.props.disabledKeyboardNavigation||null==r.props.preSelection?"-1":e===M.getYear(r.props.preSelection)?"0":"-1"},r.getYearContainerClassNames=function(){var e=r.props,n=e.selectingDate,i=e.selectsStart,s=e.selectsEnd,o=e.selectsRange;return t.clsx("react-datepicker__year",{"react-datepicker__year--selecting-range":n&&(i||s||o)})},r.getYearContent=function(e){return r.props.renderYearContent?r.props.renderYearContent(e):e},r}return me(i,e),i.prototype.render=function(){var e=this,t=[],n=this.props,i=n.date,r=n.yearItemNumber,s=n.onYearMouseEnter,o=n.onYearMouseLeave;if(void 0===i)return null;for(var a=ft(i,r),l=a.startPeriod,c=a.endPeriod,u=function(n){t.push(he.default.createElement("div",{ref:d.YEAR_REFS[n-l],onClick:function(t){e.onYearClick(t,n)},onKeyDown:function(t){Ct(t)&&(t.preventDefault(),t.key=Ce.Enter),e.onYearKeyDown(t,n)},tabIndex:Number(d.getYearTabIndex(n)),className:d.getYearClassNames(n),onMouseEnter:d.props.usePointerEvent?void 0:function(e){return s(e,n)},onPointerEnter:d.props.usePointerEvent?function(e){return s(e,n)}:void 0,onMouseLeave:d.props.usePointerEvent?void 0:function(e){return o(e,n)},onPointerLeave:d.props.usePointerEvent?function(e){return o(e,n)}:void 0,key:n,"aria-current":d.isCurrentYear(n)?"date":void 0},d.getYearContent(n)))},d=this,h=l;h<=c;h++)u(h);return he.default.createElement("div",{className:this.getYearContainerClassNames()},he.default.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},t))},i}(n.Component);function Gt(e,t,n,i){for(var r=[],s=0;s<2*t+1;s++){var o=e+t-s,a=!0;n&&(a=M.getYear(n)<=o),i&&a&&(a=M.getYear(i)>=o),a&&r.push(o)}return r}var Ht,Wt=function(e){function i(t){var i=e.call(this,t)||this;i.renderOptions=function(){var e=i.props.year,t=i.state.yearsList.map((function(t){return he.default.createElement("div",{className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,onClick:i.onChange.bind(i,t),"aria-selected":e===t?"true":void 0},e===t?he.default.createElement("span",{className:"react-datepicker__year-option--selected"},"\u2713"):"",t)})),n=i.props.minDate?M.getYear(i.props.minDate):null,r=i.props.maxDate?M.getYear(i.props.maxDate):null;return r&&i.state.yearsList.find((function(e){return e===r}))||t.unshift(he.default.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:i.incrementYears},he.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),n&&i.state.yearsList.find((function(e){return e===n}))||t.push(he.default.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:i.decrementYears},he.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t},i.onChange=function(e){i.props.onChange(e)},i.handleClickOutside=function(){i.props.onCancel()},i.shiftYears=function(e){var t=i.state.yearsList.map((function(t){return t+e}));i.setState({yearsList:t})},i.incrementYears=function(){return i.shiftYears(1)},i.decrementYears=function(){return i.shiftYears(-1)};var r=t.yearDropdownItemNumber,s=t.scrollableYearDropdown,o=r||(s?10:5);return i.state={yearsList:Gt(i.props.year,o,i.props.minDate,i.props.maxDate)},i.dropdownRef=n.createRef(),i}return me(i,e),i.prototype.componentDidMount=function(){var e=this.dropdownRef.current;if(e){var t=e.children?Array.from(e.children):null,n=t?t.find((function(e){return e.ariaSelected})):null;e.scrollTop=n&&n instanceof HTMLElement?n.offsetTop+(n.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}},i.prototype.render=function(){var e=t.clsx({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return he.default.createElement("div",{className:e,ref:this.dropdownRef},this.renderOptions())},i}(n.Component),jt=pe.default(Wt),Ut=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var e=t.props.minDate?M.getYear(t.props.minDate):1900,n=t.props.maxDate?M.getYear(t.props.maxDate):2100,i=[],r=e;r<=n;r++)i.push(he.default.createElement("option",{key:r,value:r},r));return i},t.onSelectChange=function(e){t.onChange(parseInt(e.target.value))},t.renderSelectMode=function(){return he.default.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(e){return he.default.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(e){return t.toggleDropdown(e)}},he.default.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),he.default.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return he.default.createElement(jt,ve({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var e=t.state.dropdownVisible,n=[t.renderReadView(!e)];return e&&n.unshift(t.renderDropdown()),n},t.onChange=function(e){t.toggleDropdown(),e!==t.props.year&&t.props.onChange(e)},t.toggleDropdown=function(e){t.setState({dropdownVisible:!t.state.dropdownVisible},(function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,e)}))},t.handleYearChange=function(e,n){t.onSelect(e,n),t.setOpen()},t.onSelect=function(e,n){t.props.onSelect&&t.props.onSelect(e,n)},t.setOpen=function(){t.props.setOpen&&t.props.setOpen(!0)},t}return me(t,e),t.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return he.default.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(n.Component),zt=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],Yt=function(e){function i(s){var o=e.call(this,s)||this;return o.monthContainer=void 0,o.handleClickOutside=function(e){o.props.onClickOutside(e)},o.setClickOutsideRef=function(){return o.containerRef.current},o.handleDropdownFocus=function(e){var t,n,i,r;i=e.target,r=(i.className||"").split(/\s+/),zt.some((function(e){return r.indexOf(e)>=0}))&&(null===(n=(t=o.props).onDropdownFocus)||void 0===n||n.call(t,e))},o.getDateInView=function(){var e=o.props,t=e.preSelection,n=e.selected,i=e.openToDate,r=ct(o.props),s=ut(o.props),a=xe();return i||n||t||(r&&I.isBefore(a,r)?r:s&&P.isAfter(a,s)?s:a)},o.increaseMonth=function(){o.setState((function(e){var t=e.date;return{date:a.addMonths(t,1)}}),(function(){return o.handleMonthChange(o.state.date)}))},o.decreaseMonth=function(){o.setState((function(e){var t=e.date;return{date:re.subMonths(t,1)}}),(function(){return o.handleMonthChange(o.state.date)}))},o.handleDayClick=function(e,t,n){o.props.onSelect(e,t,n),o.props.setPreSelection&&o.props.setPreSelection(e)},o.handleDayMouseEnter=function(e){o.setState({selectingDate:e}),o.props.onDayMouseEnter&&o.props.onDayMouseEnter(e)},o.handleMonthMouseLeave=function(){o.setState({selectingDate:void 0}),o.props.onMonthMouseLeave&&o.props.onMonthMouseLeave()},o.handleYearMouseEnter=function(e,t){o.setState({selectingDate:Z.setYear(xe(),t)}),o.props.onYearMouseEnter&&o.props.onYearMouseEnter(e,t)},o.handleYearMouseLeave=function(e,t){o.props.onYearMouseLeave&&o.props.onYearMouseLeave(e,t)},o.handleYearChange=function(e){o.props.onYearChange&&(o.props.onYearChange(e),o.setState({isRenderAriaLiveMessage:!0})),o.props.adjustDateOnChange&&(o.props.onSelect&&o.props.onSelect(e),o.props.setOpen&&o.props.setOpen(!0)),o.props.setPreSelection&&o.props.setPreSelection(e)},o.handleMonthChange=function(e){o.handleCustomMonthChange(e),o.props.adjustDateOnChange&&(o.props.onSelect&&o.props.onSelect(e),o.props.setOpen&&o.props.setOpen(!0)),o.props.setPreSelection&&o.props.setPreSelection(e)},o.handleCustomMonthChange=function(e){o.props.onMonthChange&&(o.props.onMonthChange(e),o.setState({isRenderAriaLiveMessage:!0}))},o.handleMonthYearChange=function(e){o.handleYearChange(e),o.handleMonthChange(e)},o.changeYear=function(e){o.setState((function(t){var n=t.date;return{date:Z.setYear(n,Number(e))}}),(function(){return o.handleYearChange(o.state.date)}))},o.changeMonth=function(e){o.setState((function(t){var n=t.date;return{date:K.setMonth(n,Number(e))}}),(function(){return o.handleMonthChange(o.state.date)}))},o.changeMonthYear=function(e){o.setState((function(t){var n=t.date;return{date:Z.setYear(K.setMonth(n,T.getMonth(e)),M.getYear(e))}}),(function(){return o.handleMonthYearChange(o.state.date)}))},o.header=function(e){void 0===e&&(e=o.state.date);var n=Me(e,o.props.locale,o.props.calendarStartDay),i=[];return o.props.showWeekNumbers&&i.push(he.default.createElement("div",{key:"W",className:"react-datepicker__day-name"},o.props.weekLabel||"#")),i.concat([0,1,2,3,4,5,6].map((function(e){var i=r.addDays(n,e),s=o.formatWeekday(i,o.props.locale),a=o.props.weekDayClassName?o.props.weekDayClassName(i):void 0;return he.default.createElement("div",{key:e,"aria-label":Te(i,"EEEE",o.props.locale),className:t.clsx("react-datepicker__day-name",a)},s)})))},o.formatWeekday=function(e,t){return o.props.formatWeekDay?function(e,t,n){return t(Te(e,"EEEE",n))}(e,o.props.formatWeekDay,t):o.props.useWeekdaysShort?function(e,t){return Te(e,"EEE",t)}(e,t):function(e,t){return Te(e,"EEEEEE",t)}(e,t)},o.decreaseYear=function(){o.setState((function(e){var t,n=e.date;return{date:ae.subYears(n,o.props.showYearPicker?null!==(t=o.props.yearItemNumber)&&void 0!==t?t:i.defaultProps.yearItemNumber:1)}}),(function(){return o.handleYearChange(o.state.date)}))},o.clearSelectingDate=function(){o.setState({selectingDate:void 0})},o.renderPreviousButton=function(){var e;if(!o.props.renderCustomHeader){var t;switch(!0){case o.props.showMonthYearPicker:t=at(o.state.date,o.props);break;case o.props.showYearPicker:t=function(e,t){var n=void 0===t?{}:t,i=n.minDate,r=n.yearItemNumber,s=void 0===r?Se:r,o=ft(Ie(ae.subYears(e,s)),s).endPeriod,a=i&&M.getYear(i);return a&&a>o||!1}(o.state.date,o.props);break;case o.props.showQuarterYearPicker:t=function(e,t){var n=void 0===t?{}:t,i=n.minDate,r=n.includeDates,s=ne.startOfYear(e),o=se.subQuarters(s,1);return i&&g.differenceInCalendarQuarters(i,o)>0||r&&r.every((function(e){return g.differenceInCalendarQuarters(e,o)>0}))||!1}(o.state.date,o.props);break;default:t=st(o.state.date,o.props)}if(((null!==(e=o.props.forceShowMonthNavigation)&&void 0!==e?e:i.defaultProps.forceShowMonthNavigation)||o.props.showDisabledMonthNavigation||!t)&&!o.props.showTimeSelectOnly){var n=["react-datepicker__navigation","react-datepicker__navigation--previous"],r=o.decreaseMonth;(o.props.showMonthYearPicker||o.props.showQuarterYearPicker||o.props.showYearPicker)&&(r=o.decreaseYear),t&&o.props.showDisabledMonthNavigation&&(n.push("react-datepicker__navigation--previous--disabled"),r=void 0);var s=o.props.showMonthYearPicker||o.props.showQuarterYearPicker||o.props.showYearPicker,a=o.props,l=a.previousMonthButtonLabel,c=void 0===l?i.defaultProps.previousMonthButtonLabel:l,u=a.previousYearButtonLabel,d=void 0===u?i.defaultProps.previousYearButtonLabel:u,h=o.props,p=h.previousMonthAriaLabel,f=void 0===p?"string"==typeof c?c:"Previous Month":p,m=h.previousYearAriaLabel,v=void 0===m?"string"==typeof d?d:"Previous Year":m;return he.default.createElement("button",{type:"button",className:n.join(" "),onClick:r,onKeyDown:o.props.handleOnKeyDown,"aria-label":s?v:f},he.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},s?d:c))}}},o.increaseYear=function(){o.setState((function(e){var t,n=e.date;return{date:d.addYears(n,o.props.showYearPicker?null!==(t=o.props.yearItemNumber)&&void 0!==t?t:i.defaultProps.yearItemNumber:1)}}),(function(){return o.handleYearChange(o.state.date)}))},o.renderNextButton=function(){var e;if(!o.props.renderCustomHeader){var t;switch(!0){case o.props.showMonthYearPicker:t=lt(o.state.date,o.props);break;case o.props.showYearPicker:t=function(e,t){var n=void 0===t?{}:t,i=n.maxDate,r=n.yearItemNumber,s=void 0===r?Se:r,o=ft(d.addYears(e,s),s).startPeriod,a=i&&M.getYear(i);return a&&a<o||!1}(o.state.date,o.props);break;case o.props.showQuarterYearPicker:t=function(e,t){var n=void 0===t?{}:t,i=n.maxDate,r=n.includeDates,s=C.endOfYear(e),o=l.addQuarters(s,1);return i&&g.differenceInCalendarQuarters(o,i)>0||r&&r.every((function(e){return g.differenceInCalendarQuarters(o,e)>0}))||!1}(o.state.date,o.props);break;default:t=ot(o.state.date,o.props)}if(((null!==(e=o.props.forceShowMonthNavigation)&&void 0!==e?e:i.defaultProps.forceShowMonthNavigation)||o.props.showDisabledMonthNavigation||!t)&&!o.props.showTimeSelectOnly){var n=["react-datepicker__navigation","react-datepicker__navigation--next"];o.props.showTimeSelect&&n.push("react-datepicker__navigation--next--with-time"),o.props.todayButton&&n.push("react-datepicker__navigation--next--with-today-button");var r=o.increaseMonth;(o.props.showMonthYearPicker||o.props.showQuarterYearPicker||o.props.showYearPicker)&&(r=o.increaseYear),t&&o.props.showDisabledMonthNavigation&&(n.push("react-datepicker__navigation--next--disabled"),r=void 0);var s=o.props.showMonthYearPicker||o.props.showQuarterYearPicker||o.props.showYearPicker,a=o.props,c=a.nextMonthButtonLabel,u=void 0===c?i.defaultProps.nextMonthButtonLabel:c,h=a.nextYearButtonLabel,p=void 0===h?i.defaultProps.nextYearButtonLabel:h,f=o.props,m=f.nextMonthAriaLabel,v=void 0===m?"string"==typeof u?u:"Next Month":m,y=f.nextYearAriaLabel,w=void 0===y?"string"==typeof p?p:"Next Year":y;return he.default.createElement("button",{type:"button",className:n.join(" "),onClick:r,onKeyDown:o.props.handleOnKeyDown,"aria-label":s?w:v},he.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},s?p:u))}}},o.renderCurrentMonth=function(e){void 0===e&&(e=o.state.date);var t=["react-datepicker__current-month"];return o.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),o.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),o.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),he.default.createElement("h2",{className:t.join(" ")},Te(e,o.props.dateFormat,o.props.locale))},o.renderYearDropdown=function(e){if(void 0===e&&(e=!1),o.props.showYearDropdown&&!e)return he.default.createElement(Ut,ve({},i.defaultProps,o.props,{date:o.state.date,onChange:o.changeYear,year:M.getYear(o.state.date)}))},o.renderMonthDropdown=function(e){if(void 0===e&&(e=!1),o.props.showMonthDropdown&&!e)return he.default.createElement(Nt,ve({},i.defaultProps,o.props,{month:T.getMonth(o.state.date),onChange:o.changeMonth}))},o.renderMonthYearDropdown=function(e){if(void 0===e&&(e=!1),o.props.showMonthYearDropdown&&!e)return he.default.createElement(Ft,ve({},i.defaultProps,o.props,{date:o.state.date,onChange:o.changeMonthYear}))},o.handleTodayButtonClick=function(e){o.props.onSelect(ke(),e),o.props.setPreSelection&&o.props.setPreSelection(ke())},o.renderTodayButton=function(){if(o.props.todayButton&&!o.props.showTimeSelectOnly)return he.default.createElement("div",{className:"react-datepicker__today-button",onClick:o.handleTodayButtonClick},o.props.todayButton)},o.renderDefaultHeader=function(e){var t=e.monthDate,n=e.i;return he.default.createElement("div",{className:"react-datepicker__header ".concat(o.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},o.renderCurrentMonth(t),he.default.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(o.props.dropdownMode),onFocus:o.handleDropdownFocus},o.renderMonthDropdown(0!==n),o.renderMonthYearDropdown(0!==n),o.renderYearDropdown(0!==n)),he.default.createElement("div",{className:"react-datepicker__day-names"},o.header(t)))},o.renderCustomHeader=function(e){var t,n,i=e.monthDate,r=e.i;if(o.props.showTimeSelect&&!o.state.monthContainer||o.props.showTimeSelectOnly)return null;var s=st(o.state.date,o.props),a=ot(o.state.date,o.props),l=at(o.state.date,o.props),c=lt(o.state.date,o.props),u=!o.props.showMonthYearPicker&&!o.props.showQuarterYearPicker&&!o.props.showYearPicker;return he.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:o.props.onDropdownFocus},null===(n=(t=o.props).renderCustomHeader)||void 0===n?void 0:n.call(t,ve(ve({},o.state),{customHeaderCount:r,monthDate:i,changeMonth:o.changeMonth,changeYear:o.changeYear,decreaseMonth:o.decreaseMonth,increaseMonth:o.increaseMonth,decreaseYear:o.decreaseYear,increaseYear:o.increaseYear,prevMonthButtonDisabled:s,nextMonthButtonDisabled:a,prevYearButtonDisabled:l,nextYearButtonDisabled:c})),u&&he.default.createElement("div",{className:"react-datepicker__day-names"},o.header(i)))},o.renderYearHeader=function(e){var t=e.monthDate,n=o.props,r=n.showYearPicker,s=n.yearItemNumber,a=ft(t,void 0===s?i.defaultProps.yearItemNumber:s),l=a.startPeriod,c=a.endPeriod;return he.default.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},r?"".concat(l," - ").concat(c):M.getYear(t))},o.renderHeader=function(e){var t=e.monthDate,n=e.i,i={monthDate:t,i:void 0===n?0:n};switch(!0){case void 0!==o.props.renderCustomHeader:return o.renderCustomHeader(i);case o.props.showMonthYearPicker||o.props.showQuarterYearPicker||o.props.showYearPicker:return o.renderYearHeader(i);default:return o.renderDefaultHeader(i)}},o.renderMonths=function(){var e,t;if(!o.props.showTimeSelectOnly&&!o.props.showYearPicker){for(var n=[],r=null!==(e=o.props.monthsShown)&&void 0!==e?e:i.defaultProps.monthsShown,s=o.props.showPreviousMonths?r-1:0,l=o.props.showMonthYearPicker||o.props.showQuarterYearPicker?d.addYears(o.state.date,s):re.subMonths(o.state.date,s),c=null!==(t=o.props.monthSelectedIn)&&void 0!==t?t:s,u=0;u<r;++u){var h=u-c+s,p=o.props.showMonthYearPicker||o.props.showQuarterYearPicker?d.addYears(l,h):a.addMonths(l,h),g="month-".concat(u),f=u<r-1,m=u>0;n.push(he.default.createElement("div",{key:g,ref:function(e){o.monthContainer=null!=e?e:void 0},className:"react-datepicker__month-container"},o.renderHeader({monthDate:p,i:u}),he.default.createElement(Mt,ve({},i.defaultProps,o.props,{ariaLabelPrefix:o.props.monthAriaLabelPrefix,day:p,onDayClick:o.handleDayClick,handleOnKeyDown:o.props.handleOnDayKeyDown,handleOnMonthKeyDown:o.props.handleOnKeyDown,onDayMouseEnter:o.handleDayMouseEnter,onMouseLeave:o.handleMonthMouseLeave,orderInDisplay:u,selectingDate:o.state.selectingDate,monthShowsDuplicateDaysEnd:f,monthShowsDuplicateDaysStart:m}))))}return n}},o.renderYears=function(){if(!o.props.showTimeSelectOnly)return o.props.showYearPicker?he.default.createElement("div",{className:"react-datepicker__year--container"},o.renderHeader({monthDate:o.state.date}),he.default.createElement(Vt,ve({},i.defaultProps,o.props,{selectingDate:o.state.selectingDate,date:o.state.date,onDayClick:o.handleDayClick,clearSelectingDate:o.clearSelectingDate,onYearMouseEnter:o.handleYearMouseEnter,onYearMouseLeave:o.handleYearMouseLeave}))):void 0},o.renderTimeSection=function(){if(o.props.showTimeSelect&&(o.state.monthContainer||o.props.showTimeSelectOnly))return he.default.createElement(Bt,ve({},i.defaultProps,o.props,{onChange:o.props.onTimeChange,format:o.props.timeFormat,intervals:o.props.timeIntervals,monthRef:o.state.monthContainer}))},o.renderInputTimeSection=function(){var e=o.props.selected?new Date(o.props.selected):void 0,t=e&&Ae(e)&&Boolean(o.props.selected)?"".concat(gt(e.getHours()),":").concat(gt(e.getMinutes())):"";if(o.props.showTimeInput)return he.default.createElement(bt,ve({},i.defaultProps,o.props,{date:e,timeString:t,onChange:o.props.onTimeChange}))},o.renderAriaLiveRegion=function(){var e,t,n=ft(o.state.date,null!==(e=o.props.yearItemNumber)&&void 0!==e?e:i.defaultProps.yearItemNumber),r=n.startPeriod,s=n.endPeriod;return t=o.props.showYearPicker?"".concat(r," - ").concat(s):o.props.showMonthYearPicker||o.props.showQuarterYearPicker?M.getYear(o.state.date):"".concat(Ue(T.getMonth(o.state.date),o.props.locale)," ").concat(M.getYear(o.state.date)),he.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},o.state.isRenderAriaLiveMessage&&t)},o.renderChildren=function(){if(o.props.children)return he.default.createElement("div",{className:"react-datepicker__children-container"},o.props.children)},o.containerRef=n.createRef(),o.state={date:o.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},o}return me(i,e),Object.defineProperty(i,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Se}},enumerable:!1,configurable:!0}),i.prototype.componentDidMount=function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=void e.setState({monthContainer:e.monthContainer}))},i.prototype.componentDidUpdate=function(e){var t=this;if(!this.props.preSelection||Ve(this.props.preSelection,e.preSelection)&&this.props.monthSelectedIn===e.monthSelectedIn)this.props.openToDate&&!Ve(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate});else{var n=!Fe(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},(function(){return n&&t.handleCustomMonthChange(t.state.date)}))}},i.prototype.render=function(){var e=this.props.container||we;return he.default.createElement("div",{style:{display:"contents"},ref:this.containerRef},he.default.createElement(e,{className:t.clsx("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))},i}(n.Component),qt=function(e){var t=e.icon,n=e.className,i=void 0===n?"":n,r=e.onClick,s="react-datepicker__calendar-icon";return"string"==typeof t?he.default.createElement("i",{className:"".concat(s," ").concat(t," ").concat(i),"aria-hidden":"true",onClick:r}):he.default.isValidElement(t)?he.default.cloneElement(t,{className:"".concat(t.props.className||""," ").concat(s," ").concat(i),onClick:function(e){"function"==typeof t.props.onClick&&t.props.onClick(e),"function"==typeof r&&r(e)}}):he.default.createElement("svg",{className:"".concat(s," ").concat(i),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:r},he.default.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Kt=function(e){function t(t){var n=e.call(this,t)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return me(t,e),t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return ge.default.createPortal(this.props.children,this.el)},t}(n.Component),Xt=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&-1!==e.tabIndex},Qt=function(e){function t(t){var i=e.call(this,t)||this;return i.getTabChildren=function(){var e;return Array.prototype.slice.call(null===(e=i.tabLoopRef.current)||void 0===e?void 0:e.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(Xt)},i.handleFocusStart=function(){var e=i.getTabChildren();e&&e.length>1&&e[e.length-1].focus()},i.handleFocusEnd=function(){var e=i.getTabChildren();e&&e.length>1&&e[0].focus()},i.tabLoopRef=n.createRef(),i}return me(t,e),t.prototype.render=function(){var e;return(null!==(e=this.props.enableTabLoop)&&void 0!==e?e:t.defaultProps.enableTabLoop)?he.default.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},he.default.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,he.default.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(n.Component),Zt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return me(i,e),Object.defineProperty(i,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),i.prototype.render=function(){var e=this.props,r=e.className,s=e.wrapperClassName,o=e.hidePopper,a=void 0===o?i.defaultProps.hidePopper:o,l=e.popperComponent,c=e.targetComponent,u=e.enableTabLoop,d=e.popperOnKeyDown,h=e.portalId,p=e.portalHost,g=e.popperProps,f=e.showArrow,m=void 0;if(!a){var v=t.clsx("react-datepicker-popper",r);m=he.default.createElement(Qt,{enableTabLoop:u},he.default.createElement("div",{ref:g.refs.setFloating,style:g.floatingStyles,className:v,"data-placement":g.placement,onKeyDown:d},l,f&&he.default.createElement(ce.FloatingArrow,{ref:g.arrowRef,context:g.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(m=n.createElement(this.props.popperContainer,{},m)),h&&!a&&(m=he.default.createElement(Kt,{portalId:h,portalHost:p},m));var y=t.clsx("react-datepicker-wrapper",s);return he.default.createElement(he.default.Fragment,null,he.default.createElement("div",{ref:g.refs.setReference,className:y},c),m)},i}(n.Component),$t=(Ht=Zt,function(e){var t,i="boolean"!=typeof e.hidePopper||e.hidePopper,r=n.useRef(null),s=ce.useFloating(ve({open:!i,whileElementsMounted:ce.autoUpdate,placement:e.popperPlacement,middleware:ye([ce.flip({padding:15}),ce.offset(10),ce.arrow({element:r})],null!==(t=e.popperModifiers)&&void 0!==t?t:[],!0)},e.popperProps)),o=ve(ve({},e),{hidePopper:i,popperProps:ve(ve({},s),{arrowRef:r})});return he.default.createElement(Ht,ve({},o))}),Jt="react-datepicker-ignore-onclickoutside",en=pe.default(Yt),tn="Date input not valid.",nn=function(e){function i(s){var o=e.call(this,s)||this;return o.calendar=null,o.input=null,o.getPreSelection=function(){return o.props.openToDate?o.props.openToDate:o.props.selectsEnd&&o.props.startDate?o.props.startDate:o.props.selectsStart&&o.props.endDate?o.props.endDate:xe()},o.modifyHolidays=function(){var e;return null===(e=o.props.holidays)||void 0===e?void 0:e.reduce((function(e,t){var n=new Date(t.date);return Ae(n)?ye(ye([],e,!0),[ve(ve({},t),{date:n})],!1):e}),[])},o.calcInitialState=function(){var e,t=o.getPreSelection(),n=ct(o.props),i=ut(o.props),r=n&&I.isBefore(t,De(n))?n:i&&P.isAfter(t,Oe(i))?i:t;return{open:o.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:null!==(e=o.props.selectsRange?o.props.startDate:o.props.selected)&&void 0!==e?e:r,highlightDates:dt(o.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},o.resetHiddenStatus=function(){o.setState(ve(ve({},o.state),{wasHidden:!1}))},o.setHiddenStatus=function(){o.setState(ve(ve({},o.state),{wasHidden:!0}))},o.setHiddenStateOnVisibilityHidden=function(){"hidden"===document.visibilityState&&o.setHiddenStatus()},o.clearPreventFocusTimeout=function(){o.preventFocusTimeout&&clearTimeout(o.preventFocusTimeout)},o.setFocus=function(){o.input&&o.input.focus&&o.input.focus({preventScroll:!0})},o.setBlur=function(){o.input&&o.input.blur&&o.input.blur(),o.cancelFocusInput()},o.setOpen=function(e,t){void 0===t&&(t=!1),o.setState({open:e,preSelection:e&&o.state.open?o.state.preSelection:o.calcInitialState().preSelection,lastPreSelectChange:sn},(function(){e||o.setState((function(e){return{focused:!!t&&e.focused}}),(function(){!t&&o.setBlur(),o.setState({inputValue:null})}))}))},o.inputOk=function(){return N.isDate(o.state.preSelection)},o.isCalendarOpen=function(){return void 0===o.props.open?o.state.open&&!o.props.disabled&&!o.props.readOnly:o.props.open},o.handleFocus=function(e){var t,n,i=o.state.wasHidden,r=!i||o.state.open;i&&o.resetHiddenStatus(),!o.state.preventFocus&&r&&(null===(n=(t=o.props).onFocus)||void 0===n||n.call(t,e),o.props.preventOpenOnFocus||o.props.readOnly||o.setOpen(!0)),o.setState({focused:!0})},o.sendFocusBackToInput=function(){o.preventFocusTimeout&&o.clearPreventFocusTimeout(),o.setState({preventFocus:!0},(function(){o.preventFocusTimeout=setTimeout((function(){o.setFocus(),o.setState({preventFocus:!1})}))}))},o.cancelFocusInput=function(){clearTimeout(o.inputFocusTimeout),o.inputFocusTimeout=void 0},o.deferFocusInput=function(){o.cancelFocusInput(),o.inputFocusTimeout=setTimeout((function(){return o.setFocus()}),1)},o.handleDropdownFocus=function(){o.cancelFocusInput()},o.handleBlur=function(e){var t,n;(!o.state.open||o.props.withPortal||o.props.showTimeInput)&&(null===(n=(t=o.props).onBlur)||void 0===n||n.call(t,e)),o.setState({focused:!1})},o.handleCalendarClickOutside=function(e){var t,n;o.props.inline||o.setOpen(!1),null===(n=(t=o.props).onClickOutside)||void 0===n||n.call(t,e),o.props.withPortal&&e.preventDefault()},o.handleChange=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0];if(!o.props.onChangeRaw||(o.props.onChangeRaw.apply(o,e),n&&"function"==typeof n.isDefaultPrevented&&!n.isDefaultPrevented())){o.setState({inputValue:(null==n?void 0:n.target)instanceof HTMLInputElement?n.target.value:null,lastPreSelectChange:rn});var r=o.props,s=r.dateFormat,a=void 0===s?i.defaultProps.dateFormat:s,l=r.strictParsing,c=void 0===l?i.defaultProps.strictParsing:l,u=function(e,t,n,i,r){var s,o=null,a=je(n)||je(We()),l=!0;if(Array.isArray(t))return t.forEach((function(t){var s=j.parse(e,t,new Date,{locale:a,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});i&&(l=Ae(s,r)&&e===Te(s,t,n)),Ae(s,r)&&l&&(o=s)})),o;if(o=j.parse(e,t,new Date,{locale:a,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0}),i)l=Ae(o)&&e===Te(o,t,n);else if(!Ae(o)){var c=(null!==(s=t.match(Ee))&&void 0!==s?s:[]).map((function(e){var t=e[0];if("p"===t||"P"===t){var n=w.longFormatters[t];return a?n(e,a.formatLong):t}return e})).join("");e.length>0&&(o=j.parse(e,c.slice(0,e.length),new Date,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})),Ae(o)||(o=new Date(e))}return Ae(o)&&l?o:null}((null==n?void 0:n.target)instanceof HTMLInputElement?n.target.value:"",a,o.props.locale,c,o.props.minDate);o.props.showTimeSelectOnly&&o.props.selected&&u&&!Ve(u,o.props.selected)&&(u=z.set(o.props.selected,{hours:E.getHours(u),minutes:A.getMinutes(u),seconds:R.getSeconds(u)})),!u&&(null==n?void 0:n.target)instanceof HTMLInputElement&&(null==n?void 0:n.target.value)||o.setSelected(u,n,!0)}},o.handleSelect=function(e,t,n){if(o.props.shouldCloseOnSelect&&!o.props.showTimeSelect&&o.sendFocusBackToInput(),o.props.onChangeRaw&&o.props.onChangeRaw(t),o.setSelected(e,t,!1,n),o.props.showDateSelect&&o.setState({isRenderAriaLiveMessage:!0}),!o.props.shouldCloseOnSelect||o.props.showTimeSelect)o.setPreSelection(e);else if(!o.props.inline){o.props.selectsRange||o.setOpen(!1);var i=o.props,r=i.startDate,s=i.endDate;!r||s||!o.props.swapRange&&yt(e,r)||o.setOpen(!1)}},o.setSelected=function(e,t,n,r){var s,a=e;if(o.props.showYearPicker){if(null!==a&&Je(M.getYear(a),o.props))return}else if(o.props.showMonthYearPicker){if(null!==a&&Ke(a,o.props))return}else if(null!==a&&Ye(a,o.props))return;var l=o.props,c=l.onChange,u=l.selectsRange,d=l.startDate,h=l.endDate,p=l.selectsMultiple,g=l.selectedDates,f=l.minTime,m=l.swapRange;if(!Ge(o.props.selected,a)||o.props.allowSameDay||u||p)if(null!==a&&(!o.props.selected||n&&(o.props.showTimeSelect||o.props.showTimeSelectOnly||o.props.showTimeInput)||(a=Re(a,{hour:E.getHours(o.props.selected),minute:A.getMinutes(o.props.selected),second:R.getSeconds(o.props.selected)})),n||!o.props.showTimeSelect&&!o.props.showTimeSelectOnly||f&&(a=Re(a,{hour:f.getHours(),minute:f.getMinutes(),second:f.getSeconds()})),o.props.inline||o.setState({preSelection:a}),o.props.focusSelectedMonth||o.setState({monthSelectedIn:r})),u){var v=d&&h;d||h?d&&!h&&(null===a?c?c([null,null],t):i.defaultProps.onChange:yt(a,d)?m?c?c([a,d],t):i.defaultProps.onChange:c?c([a,null],t):i.defaultProps.onChange:c?c([d,a],t):i.defaultProps.onChange):c?c([a,null],t):i.defaultProps.onChange,v&&(c?c([a,null],t):i.defaultProps.onChange)}else if(p){if(null!==a)if(null==g?void 0:g.length)if(g.some((function(e){return Ve(e,a)}))){var y=g.filter((function(e){return!Ve(e,a)}));c?c(y,t):i.defaultProps.onChange}else c?c(ye(ye([],g,!0),[a],!1),t):i.defaultProps.onChange;else c?c([a],t):i.defaultProps.onChange}else c?c(a,t):i.defaultProps.onChange;n||((null!==(s=o.props.onSelect)&&void 0!==s?s:i.defaultProps.onSelect)(a,t),o.setState({inputValue:null}))},o.setPreSelection=function(e){var t=N.isDate(o.props.minDate),n=N.isDate(o.props.maxDate),i=!0;if(e){var r=De(e);if(t&&n)i=He(e,o.props.minDate,o.props.maxDate);else if(t){var s=De(o.props.minDate);i=P.isAfter(e,s)||Ge(r,s)}else if(n){var a=Oe(o.props.maxDate);i=I.isBefore(e,a)||Ge(r,a)}}i&&o.setState({preSelection:e})},o.toggleCalendar=function(){o.setOpen(!o.state.open)},o.handleTimeChange=function(e){var t;if(!o.props.selectsRange&&!o.props.selectsMultiple){var n=o.props.selected?o.props.selected:o.getPreSelection(),r=o.props.selected?e:Re(n,{hour:E.getHours(e),minute:A.getMinutes(e)});o.setState({preSelection:r}),(null!==(t=o.props.onChange)&&void 0!==t?t:i.defaultProps.onChange)(r),o.props.shouldCloseOnSelect&&!o.props.showTimeInput&&(o.sendFocusBackToInput(),o.setOpen(!1)),o.props.showTimeInput&&o.setOpen(!0),(o.props.showTimeSelectOnly||o.props.showTimeSelect)&&o.setState({isRenderAriaLiveMessage:!0}),o.setState({inputValue:null})}},o.onInputClick=function(){var e,t;o.props.disabled||o.props.readOnly||o.setOpen(!0),null===(t=(e=o.props).onInputClick)||void 0===t||t.call(e)},o.onInputKeyDown=function(e){var t,n,i,r,s;null===(n=(t=o.props).onKeyDown)||void 0===n||n.call(t,e);var a=e.key;if(o.state.open||o.props.inline||o.props.preventOpenOnFocus){if(o.state.open){if(a===Ce.ArrowDown||a===Ce.ArrowUp){e.preventDefault();var l=o.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":o.props.showWeekPicker&&o.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':o.props.showFullMonthYearPicker||o.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',c=(null===(i=o.calendar)||void 0===i?void 0:i.componentNode)instanceof Element&&o.calendar.componentNode.querySelector(l);return void(c instanceof HTMLElement&&c.focus({preventScroll:!0}))}var u=xe(o.state.preSelection);a===Ce.Enter?(e.preventDefault(),o.inputOk()&&o.state.lastPreSelectChange===sn?(o.handleSelect(u,e),!o.props.shouldCloseOnSelect&&o.setPreSelection(u)):o.setOpen(!1)):a===Ce.Escape?(e.preventDefault(),o.sendFocusBackToInput(),o.setOpen(!1)):a===Ce.Tab&&o.setOpen(!1),o.inputOk()||null===(s=(r=o.props).onInputError)||void 0===s||s.call(r,{code:1,msg:tn})}}else a!==Ce.ArrowDown&&a!==Ce.ArrowUp&&a!==Ce.Enter||o.onInputClick()},o.onPortalKeyDown=function(e){e.key===Ce.Escape&&(e.preventDefault(),o.setState({preventFocus:!0},(function(){o.setOpen(!1),setTimeout((function(){o.setFocus(),o.setState({preventFocus:!1})}))})))},o.onDayKeyDown=function(e){var t,n,i,s,l=o.props,c=l.minDate,h=l.maxDate,p=l.disabledKeyboardNavigation,g=l.showWeekPicker,f=l.shouldCloseOnSelect,m=l.locale,v=l.calendarStartDay,C=l.adjustDateOnChange,w=l.inline;if(null===(n=(t=o.props).onKeyDown)||void 0===n||n.call(t,e),!p){var b=e.key,S=e.shiftKey,E=xe(o.state.preSelection),x=function(e,t){var n=t;switch(e){case Ce.ArrowRight:n=g?u.addWeeks(t,1):r.addDays(t,1);break;case Ce.ArrowLeft:n=g?oe.subWeeks(t,1):ie.subDays(t,1);break;case Ce.ArrowUp:n=oe.subWeeks(t,1);break;case Ce.ArrowDown:n=u.addWeeks(t,1);break;case Ce.PageUp:n=S?ae.subYears(t,1):re.subMonths(t,1);break;case Ce.PageDown:n=S?d.addYears(t,1):a.addMonths(t,1);break;case Ce.Home:n=Me(t,m,v);break;case Ce.End:n=function(e){return y.endOfWeek(e)}(t)}return n};if(b===Ce.Enter)return e.preventDefault(),o.handleSelect(E,e),void(!f&&o.setPreSelection(E));if(b===Ce.Escape)return e.preventDefault(),o.setOpen(!1),void(o.inputOk()||null===(s=(i=o.props).onInputError)||void 0===s||s.call(i,{code:1,msg:tn}));var A=null;switch(b){case Ce.ArrowLeft:case Ce.ArrowRight:case Ce.ArrowUp:case Ce.ArrowDown:case Ce.PageUp:case Ce.PageDown:case Ce.Home:case Ce.End:A=function(e,t){for(var n=e,i=!1,r=0,s=x(e,t);!i;){if(r>=40){s=t;break}c&&s<c&&(n=Ce.ArrowRight,s=Ye(c,o.props)?x(n,s):c),h&&s>h&&(n=Ce.ArrowLeft,s=Ye(h,o.props)?x(n,s):h),Ye(s,o.props)?(n!==Ce.PageUp&&n!==Ce.Home||(n=Ce.ArrowRight),n!==Ce.PageDown&&n!==Ce.End||(n=Ce.ArrowLeft),s=x(n,s)):i=!0,r++}return s}(b,E)}if(A){if(e.preventDefault(),o.setState({lastPreSelectChange:sn}),C&&o.setSelected(A),o.setPreSelection(A),w){var _=T.getMonth(E),R=T.getMonth(A),D=M.getYear(E),P=M.getYear(A);_!==R||D!==P?o.setState({shouldFocusDayInline:!0}):o.setState({shouldFocusDayInline:!1})}}else o.props.onInputError&&o.props.onInputError({code:1,msg:tn})}},o.onPopperKeyDown=function(e){e.key===Ce.Escape&&(e.preventDefault(),o.sendFocusBackToInput())},o.onClearClick=function(e){e&&e.preventDefault&&e.preventDefault(),o.sendFocusBackToInput();var t=o.props,n=t.selectsRange,r=t.onChange;n?r?r([null,null],e):i.defaultProps.onChange():r?r(null,e):i.defaultProps.onChange(),o.setState({inputValue:null})},o.clear=function(){o.onClearClick()},o.onScroll=function(e){"boolean"==typeof o.props.closeOnScroll&&o.props.closeOnScroll?e.target!==document&&e.target!==document.documentElement&&e.target!==document.body||o.setOpen(!1):"function"==typeof o.props.closeOnScroll&&o.props.closeOnScroll(e)&&o.setOpen(!1)},o.renderCalendar=function(){var e,t;return o.props.inline||o.isCalendarOpen()?he.default.createElement(en,ve({ref:function(e){o.calendar=e}},o.props,o.state,{setOpen:o.setOpen,dateFormat:null!==(e=o.props.dateFormatCalendar)&&void 0!==e?e:i.defaultProps.dateFormatCalendar,onSelect:o.handleSelect,onClickOutside:o.handleCalendarClickOutside,holidays:ht(o.modifyHolidays()),outsideClickIgnoreClass:Jt,onDropdownFocus:o.handleDropdownFocus,onTimeChange:o.handleTimeChange,className:o.props.calendarClassName,container:o.props.calendarContainer,handleOnKeyDown:o.props.onKeyDown,handleOnDayKeyDown:o.onDayKeyDown,setPreSelection:o.setPreSelection,dropdownMode:null!==(t=o.props.dropdownMode)&&void 0!==t?t:i.defaultProps.dropdownMode}),o.props.children):null},o.renderAriaLiveRegion=function(){var e,t=o.props,n=t.dateFormat,r=void 0===n?i.defaultProps.dateFormat:n,s=t.locale,a=o.props.showTimeInput||o.props.showTimeSelect?"PPPPp":"PPPP";return e=o.props.selectsRange?"Selected start date: ".concat(_e(o.props.startDate,{dateFormat:a,locale:s}),". ").concat(o.props.endDate?"End date: "+_e(o.props.endDate,{dateFormat:a,locale:s}):""):o.props.showTimeSelectOnly?"Selected time: ".concat(_e(o.props.selected,{dateFormat:r,locale:s})):o.props.showYearPicker?"Selected year: ".concat(_e(o.props.selected,{dateFormat:"yyyy",locale:s})):o.props.showMonthYearPicker?"Selected month: ".concat(_e(o.props.selected,{dateFormat:"MMMM yyyy",locale:s})):o.props.showQuarterYearPicker?"Selected quarter: ".concat(_e(o.props.selected,{dateFormat:"yyyy, QQQ",locale:s})):"Selected date: ".concat(_e(o.props.selected,{dateFormat:a,locale:s})),he.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},e)},o.renderDateInput=function(){var e,r,s,a=t.clsx(o.props.className,((e={})[Jt]=o.state.open,e)),l=o.props.customInput||he.default.createElement("input",{type:"text"}),c=o.props.customInputRef||"ref",u=o.props,d=u.dateFormat,h=void 0===d?i.defaultProps.dateFormat:d,p=u.locale,g="string"==typeof o.props.value?o.props.value:"string"==typeof o.state.inputValue?o.state.inputValue:o.props.selectsRange?function(e,t,n){if(!e)return"";var i=_e(e,n),r=t?_e(t,n):"";return"".concat(i," - ").concat(r)}(o.props.startDate,o.props.endDate,{dateFormat:h,locale:p}):o.props.selectsMultiple?function(e,t){if(!(null==e?void 0:e.length))return"";var n=e[0]?_e(e[0],t):"";if(1===e.length)return n;if(2===e.length&&e[1]){var i=_e(e[1],t);return"".concat(n,", ").concat(i)}var r=e.length-1;return"".concat(n," (+").concat(r,")")}(null!==(s=o.props.selectedDates)&&void 0!==s?s:[],{dateFormat:h,locale:p}):_e(o.props.selected,{dateFormat:h,locale:p});return n.cloneElement(l,((r={})[c]=function(e){o.input=e},r.value=g,r.onBlur=o.handleBlur,r.onChange=o.handleChange,r.onClick=o.onInputClick,r.onFocus=o.handleFocus,r.onKeyDown=o.onInputKeyDown,r.id=o.props.id,r.name=o.props.name,r.form=o.props.form,r.autoFocus=o.props.autoFocus,r.placeholder=o.props.placeholderText,r.disabled=o.props.disabled,r.autoComplete=o.props.autoComplete,r.className=t.clsx(l.props.className,a),r.title=o.props.title,r.readOnly=o.props.readOnly,r.required=o.props.required,r.tabIndex=o.props.tabIndex,r["aria-describedby"]=o.props.ariaDescribedBy,r["aria-invalid"]=o.props.ariaInvalid,r["aria-labelledby"]=o.props.ariaLabelledBy,r["aria-required"]=o.props.ariaRequired,r))},o.renderClearButton=function(){var e=o.props,n=e.isClearable,i=e.disabled,r=e.selected,s=e.startDate,a=e.endDate,l=e.clearButtonTitle,c=e.clearButtonClassName,u=void 0===c?"":c,d=e.ariaLabelClose,h=void 0===d?"Close":d,p=e.selectedDates;return n&&(null!=r||null!=s||null!=a||(null==p?void 0:p.length))?he.default.createElement("button",{type:"button",className:t.clsx("react-datepicker__close-icon",u,{"react-datepicker__close-icon--disabled":i}),disabled:i,"aria-label":h,onClick:o.onClearClick,title:l,tabIndex:-1}):null},o.state=o.calcInitialState(),o.preventFocusTimeout=void 0,o}return me(i,e),Object.defineProperty(i,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Se,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),i.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},i.prototype.componentDidUpdate=function(e,t){var n,i,r,s,o,a;e.inline&&(o=e.selected,a=this.props.selected,o&&a?T.getMonth(o)!==T.getMonth(a)||M.getYear(o)!==M.getYear(a):o!==a)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:dt(this.props.highlightDates)}),t.focused||Ge(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&(null===(i=(n=this.props).onCalendarOpen)||void 0===i||i.call(n)),!0===t.open&&!1===this.state.open&&(null===(s=(r=this.props).onCalendarClose)||void 0===s||s.call(r)))},i.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},i.prototype.renderInputContainer=function(){var e=this.props,n=e.showIcon,i=e.icon,r=e.calendarIconClassname,s=e.calendarIconClassName,o=e.toggleCalendarOnIconClick,a=this.state.open;return r&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),he.default.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&he.default.createElement(qt,ve({icon:i,className:t.clsx(s,!s&&r,a&&"react-datepicker-ignore-onclickoutside")},o?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},i.prototype.render=function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var t=this.state.open?he.default.createElement(Qt,{enableTabLoop:this.props.enableTabLoop},he.default.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(t=he.default.createElement(Kt,ve({portalId:this.props.portalId},this.props),t)),he.default.createElement("div",null,this.renderInputContainer(),t)}return he.default.createElement($t,ve({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:e,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},i}(n.Component),rn="input",sn="navigate";e.CalendarContainer=we,e.default=nn,e.getDefaultLocale=We,e.registerLocale=function(e,t){var n=be();n.__localeData__||(n.__localeData__={}),n.__localeData__[e]=t},e.setDefaultLocale=function(e){be().__localeId__=e},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(4372),n(4628),n(5868),n(561),n(6975),n(5213),n(5865),n(8711),n(3713),n(5969),n(6594),n(3028),n(2952),n(6890),n(2413),n(1503),n(8851),n(9777),n(2692),n(6042),n(4533),n(2995),n(7606),n(4180),n(832),n(1615),n(2649),n(488),n(9340),n(9328),n(1203),n(730),n(5373),n(5037),n(845),n(5665),n(3867),n(8938),n(631),n(1535),n(4875),n(6217),n(9254),n(4585),n(2381),n(1330),n(8420),n(7947),n(8093),n(516),n(8060),n(6092),n(6236),n(946),n(1680),n(2553),n(8088),n(3716),n(4270),n(7374),n(7033),n(8144),n(9091),n(4473))},4372:e=>{function t(e){var n,i,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(n=0;n<s;n++)e[n]&&(i=t(e[n]))&&(r&&(r+=" "),r+=i)}else for(i in e)e[i]&&(r&&(r+=" "),r+=i);return r}function n(){for(var e,n,i=0,r="",s=arguments.length;i<s;i++)(e=arguments[i])&&(n=t(e))&&(r&&(r+=" "),r+=n);return r}e.exports=n,e.exports.clsx=n},4793:(e,t,n)=>{"use strict";var i=n(4628);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=Object.prototype.hasOwnProperty,o=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a={},l={};function c(e){return!!s.call(l,e)||!s.call(a,e)&&(o.test(e)?l[e]=!0:(a[e]=!0,!1))}function u(e,t,n,i,r,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var d={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){d[e]=new u(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];d[t]=new u(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){d[e]=new u(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){d[e]=new u(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){d[e]=new u(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){d[e]=new u(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){d[e]=new u(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){d[e]=new u(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){d[e]=new u(e,5,!1,e.toLowerCase(),null,!1,!1)}));var h=/[\-:]([a-z])/g;function p(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(h,p);d[t]=new u(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(h,p);d[t]=new u(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(h,p);d[t]=new u(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){d[e]=new u(e,1,!1,e.toLowerCase(),null,!1,!1)})),d.xlinkHref=new u("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){d[e]=new u(e,1,!1,e.toLowerCase(),null,!0,!0)}));var g={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f=["Webkit","ms","Moz","O"];Object.keys(g).forEach((function(e){f.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),g[t]=g[e]}))}));var m=/["'&<>]/;function v(e){if("boolean"===typeof e||"number"===typeof e)return""+e;e=""+e;var t=m.exec(e);if(t){var n,i="",r=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}r!==n&&(i+=e.substring(r,n)),r=n+1,i+=t}e=r!==n?i+e.substring(r,n):i}return e}var y=/([A-Z])/g,C=/^ms-/,w=Array.isArray;function b(e,t){return{insertionMode:e,selectedValue:t}}var S=new Map;function E(e,t,n){if("object"!==typeof n)throw Error(r(62));for(var i in t=!0,n)if(s.call(n,i)){var o=n[i];if(null!=o&&"boolean"!==typeof o&&""!==o){if(0===i.indexOf("--")){var a=v(i);o=v((""+o).trim())}else{a=i;var l=S.get(a);void 0!==l||(l=v(a.replace(y,"-$1").toLowerCase().replace(C,"-ms-")),S.set(a,l)),a=l,o="number"===typeof o?0===o||s.call(g,i)?""+o:o+"px":v((""+o).trim())}t?(t=!1,e.push(' style="',a,":",o)):e.push(";",a,":",o)}}t||e.push('"')}function x(e,t,n,i){switch(n){case"style":return void E(e,t,i);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])if(null!==(t=d.hasOwnProperty(n)?d[n]:null)){switch(typeof i){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=t.attributeName,t.type){case 3:i&&e.push(" ",n,'=""');break;case 4:!0===i?e.push(" ",n,'=""'):!1!==i&&e.push(" ",n,'="',v(i),'"');break;case 5:isNaN(i)||e.push(" ",n,'="',v(i),'"');break;case 6:!isNaN(i)&&1<=i&&e.push(" ",n,'="',v(i),'"');break;default:t.sanitizeURL&&(i=""+i),e.push(" ",n,'="',v(i),'"')}}else if(c(n)){switch(typeof i){case"function":case"symbol":return;case"boolean":if("data-"!==(t=n.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(" ",n,'="',v(i),'"')}}function A(e,t,n){if(null!=t){if(null!=n)throw Error(r(60));if("object"!==typeof t||!("__html"in t))throw Error(r(61));null!==(t=t.__html)&&void 0!==t&&e.push(""+t)}}function T(e,t,n,i){e.push(D(n));var r,o=n=null;for(r in t)if(s.call(t,r)){var a=t[r];if(null!=a)switch(r){case"children":n=a;break;case"dangerouslySetInnerHTML":o=a;break;default:x(e,i,r,a)}}return e.push(">"),A(e,o,n),"string"===typeof n?(e.push(v(n)),null):n}var _=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,R=new Map;function D(e){var t=R.get(e);if(void 0===t){if(!_.test(e))throw Error(r(65,e));t="<"+e,R.set(e,t)}return t}function M(e,t,n,o,a){switch(t){case"select":e.push(D("select"));var l=null,u=null;for(g in n)if(s.call(n,g)){var d=n[g];if(null!=d)switch(g){case"children":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"defaultValue":case"value":break;default:x(e,o,g,d)}}return e.push(">"),A(e,u,l),l;case"option":u=a.selectedValue,e.push(D("option"));var h=d=null,p=null,g=null;for(l in n)if(s.call(n,l)){var f=n[l];if(null!=f)switch(l){case"children":d=f;break;case"selected":p=f;break;case"dangerouslySetInnerHTML":g=f;break;case"value":h=f;default:x(e,o,l,f)}}if(null!=u)if(n=null!==h?""+h:function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(d),w(u)){for(o=0;o<u.length;o++)if(""+u[o]===n){e.push(' selected=""');break}}else""+u===n&&e.push(' selected=""');else p&&e.push(' selected=""');return e.push(">"),A(e,g,d),d;case"textarea":for(d in e.push(D("textarea")),g=u=l=null,n)if(s.call(n,d)&&null!=(h=n[d]))switch(d){case"children":g=h;break;case"value":l=h;break;case"defaultValue":u=h;break;case"dangerouslySetInnerHTML":throw Error(r(91));default:x(e,o,d,h)}if(null===l&&null!==u&&(l=u),e.push(">"),null!=g){if(null!=l)throw Error(r(92));if(w(g)&&1<g.length)throw Error(r(93));l=""+g}return"string"===typeof l&&"\n"===l[0]&&e.push("\n"),null!==l&&e.push(v(""+l)),null;case"input":for(u in e.push(D("input")),h=g=d=l=null,n)if(s.call(n,u)&&null!=(p=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(r(399,"input"));case"defaultChecked":h=p;break;case"defaultValue":d=p;break;case"checked":g=p;break;case"value":l=p;break;default:x(e,o,u,p)}return null!==g?x(e,o,"checked",g):null!==h&&x(e,o,"checked",h),null!==l?x(e,o,"value",l):null!==d&&x(e,o,"value",d),e.push("/>"),null;case"menuitem":for(var m in e.push(D("menuitem")),n)if(s.call(n,m)&&null!=(l=n[m]))switch(m){case"children":case"dangerouslySetInnerHTML":throw Error(r(400));default:x(e,o,m,l)}return e.push(">"),null;case"title":for(f in e.push(D("title")),l=null,n)if(s.call(n,f)&&null!=(u=n[f]))switch(f){case"children":l=u;break;case"dangerouslySetInnerHTML":throw Error(r(434));default:x(e,o,f,u)}return e.push(">"),l;case"listing":case"pre":for(h in e.push(D(t)),u=l=null,n)if(s.call(n,h)&&null!=(d=n[h]))switch(h){case"children":l=d;break;case"dangerouslySetInnerHTML":u=d;break;default:x(e,o,h,d)}if(e.push(">"),null!=u){if(null!=l)throw Error(r(60));if("object"!==typeof u||!("__html"in u))throw Error(r(61));null!==(n=u.__html)&&void 0!==n&&("string"===typeof n&&0<n.length&&"\n"===n[0]?e.push("\n",n):e.push(""+n))}return"string"===typeof l&&"\n"===l[0]&&e.push("\n"),l;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var y in e.push(D(t)),n)if(s.call(n,y)&&null!=(l=n[y]))switch(y){case"children":case"dangerouslySetInnerHTML":throw Error(r(399,t));default:x(e,o,y,l)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return T(e,n,t,o);case"html":return 0===a.insertionMode&&e.push("<!DOCTYPE html>"),T(e,n,t,o);default:if(-1===t.indexOf("-")&&"string"!==typeof n.is)return T(e,n,t,o);for(p in e.push(D(t)),u=l=null,n)if(s.call(n,p)&&null!=(d=n[p]))switch(p){case"children":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"style":E(e,o,d);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:c(p)&&"function"!==typeof d&&"symbol"!==typeof d&&e.push(" ",p,'="',v(d),'"')}return e.push(">"),A(e,u,l),l}}function P(e,t,n){if(e.push('\x3c!--$?--\x3e<template id="'),null===n)throw Error(r(395));return e.push(n),e.push('"></template>')}var I=/[<\u2028\u2029]/g;function N(e){return JSON.stringify(e).replace(I,(function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}))}function k(e,t,n,i){return n.generateStaticMarkup?(e.push(v(t)),!1):(""===t?e=i:(i&&e.push("\x3c!-- --\x3e"),e.push(v(t)),e=!0),e)}var O=Object.assign,L=Symbol.for("react.element"),F=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),W=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),K=Symbol.for("react.scope"),X=Symbol.for("react.debug_trace_mode"),Q=Symbol.for("react.legacy_hidden"),Z=Symbol.for("react.default_value"),$=Symbol.iterator;function J(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case B:return"Fragment";case F:return"Portal";case G:return"Profiler";case V:return"StrictMode";case U:return"Suspense";case z:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case W:return(e.displayName||"Context")+".Consumer";case H:return(e._context.displayName||"Context")+".Provider";case j:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Y:return null!==(t=e.displayName||null)?t:J(e.type)||"Memo";case q:t=e._payload,e=e._init;try{return J(e(t))}catch(n){}}return null}var ee={};function te(e,t){if(!(e=e.contextTypes))return ee;var n,i={};for(n in e)i[n]=t[n];return i}var ne=null;function ie(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var n=t.parent;if(null===e){if(null!==n)throw Error(r(401))}else{if(null===n)throw Error(r(401));ie(e,n)}t.context._currentValue2=t.value}}function re(e){e.context._currentValue2=e.parentValue,null!==(e=e.parent)&&re(e)}function se(e){var t=e.parent;null!==t&&se(t),e.context._currentValue2=e.value}function oe(e,t){if(e.context._currentValue2=e.parentValue,null===(e=e.parent))throw Error(r(402));e.depth===t.depth?ie(e,t):oe(e,t)}function ae(e,t){var n=t.parent;if(null===n)throw Error(r(402));e.depth===n.depth?ie(e,n):ae(e,n),t.context._currentValue2=t.value}function le(e){var t=ne;t!==e&&(null===t?se(e):null===e?re(t):t.depth===e.depth?ie(t,e):t.depth>e.depth?oe(t,e):ae(t,e),ne=e)}var ce={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function ue(e,t,n,i){var r=void 0!==e.state?e.state:null;e.updater=ce,e.props=n,e.state=r;var s={queue:[],replace:!1};e._reactInternals=s;var o=t.contextType;if(e.context="object"===typeof o&&null!==o?o._currentValue2:i,"function"===typeof(o=t.getDerivedStateFromProps)&&(r=null===(o=o(n,r))||void 0===o?r:O({},r,o),e.state=r),"function"!==typeof t.getDerivedStateFromProps&&"function"!==typeof e.getSnapshotBeforeUpdate&&("function"===typeof e.UNSAFE_componentWillMount||"function"===typeof e.componentWillMount))if(t=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&ce.enqueueReplaceState(e,e.state,null),null!==s.queue&&0<s.queue.length)if(t=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&1===t.length)e.state=t[0];else{for(s=o?t[0]:e.state,r=!0,o=o?1:0;o<t.length;o++){var a=t[o];null!=(a="function"===typeof a?a.call(e,s,n,i):a)&&(r?(r=!1,s=O({},s,a)):O(s,a))}e.state=s}else s.queue=null}var de={id:1,overflow:""};function he(e,t,n){var i=e.id;e=e.overflow;var r=32-pe(i)-1;i&=~(1<<r),n+=1;var s=32-pe(t)+r;if(30<s){var o=r-r%5;return s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,{id:1<<32-pe(t)+r|n<<r|i,overflow:s+e}}return{id:1<<s|n<<r|i,overflow:e}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ge(e)/fe|0)|0},ge=Math.log,fe=Math.LN2;var me="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ve=null,ye=null,Ce=null,we=null,be=!1,Se=!1,Ee=0,xe=null,Ae=0;function Te(){if(null===ve)throw Error(r(321));return ve}function _e(){if(0<Ae)throw Error(r(312));return{memoizedState:null,queue:null,next:null}}function Re(){return null===we?null===Ce?(be=!1,Ce=we=_e()):(be=!0,we=Ce):null===we.next?(be=!1,we=we.next=_e()):(be=!0,we=we.next),we}function De(){ye=ve=null,Se=!1,Ce=null,Ae=0,we=xe=null}function Me(e,t){return"function"===typeof t?t(e):t}function Pe(e,t,n){if(ve=Te(),we=Re(),be){var i=we.queue;if(t=i.dispatch,null!==xe&&void 0!==(n=xe.get(i))){xe.delete(i),i=we.memoizedState;do{i=e(i,n.action),n=n.next}while(null!==n);return we.memoizedState=i,[i,t]}return[we.memoizedState,t]}return e=e===Me?"function"===typeof t?t():t:void 0!==n?n(t):t,we.memoizedState=e,e=(e=we.queue={last:null,dispatch:null}).dispatch=Ne.bind(null,ve,e),[we.memoizedState,e]}function Ie(e,t){if(ve=Te(),t=void 0===t?null:t,null!==(we=Re())){var n=we.memoizedState;if(null!==n&&null!==t){var i=n[1];e:if(null===i)i=!1;else{for(var r=0;r<i.length&&r<t.length;r++)if(!me(t[r],i[r])){i=!1;break e}i=!0}if(i)return n[0]}}return e=e(),we.memoizedState=[e,t],e}function Ne(e,t,n){if(25<=Ae)throw Error(r(301));if(e===ve)if(Se=!0,e={action:n,next:null},null===xe&&(xe=new Map),void 0===(n=xe.get(t)))xe.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function ke(){throw Error(r(394))}function Oe(){}var Le={readContext:function(e){return e._currentValue2},useContext:function(e){return Te(),e._currentValue2},useMemo:Ie,useReducer:Pe,useRef:function(e){ve=Te();var t=(we=Re()).memoizedState;return null===t?(e={current:e},we.memoizedState=e):t},useState:function(e){return Pe(Me,e)},useInsertionEffect:Oe,useLayoutEffect:function(){},useCallback:function(e,t){return Ie((function(){return e}),t)},useImperativeHandle:Oe,useEffect:Oe,useDebugValue:Oe,useDeferredValue:function(e){return Te(),e},useTransition:function(){return Te(),[!1,ke]},useId:function(){var e=ye.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-pe(e)-1)).toString(32)+t;var n=Fe;if(null===n)throw Error(r(404));return t=Ee++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Te(),t(e._source)},useSyncExternalStore:function(e,t,n){if(void 0===n)throw Error(r(407));return n()}},Fe=null,Be=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Ve(e){return console.error(e),null}function Ge(){}function He(e,t,n,i,r,s,o,a){e.allPendingTasks++,null===n?e.pendingRootTasks++:n.pendingTasks++;var l={node:t,ping:function(){var t=e.pingedTasks;t.push(l),1===t.length&&nt(e)},blockedBoundary:n,blockedSegment:i,abortSet:r,legacyContext:s,context:o,treeContext:a};return r.add(l),l}function We(e,t,n,i,r,s){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:i,boundary:n,lastPushedText:r,textEmbedded:s}}function je(e,t){if(null!=(e=e.onError(t))&&"string"!==typeof e)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function Ue(e,t){var n=e.onShellError;n(t),(n=e.onFatalError)(t),null!==e.destination?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function ze(e,t,n,i,r){for(ve={},ye=t,Ee=0,e=n(i,r);Se;)Se=!1,Ee=0,Ae+=1,we=null,e=n(i,r);return De(),e}function Ye(e,t,n,i){var s=n.render(),o=i.childContextTypes;if(null!==o&&void 0!==o){var a=t.legacyContext;if("function"!==typeof n.getChildContext)i=a;else{for(var l in n=n.getChildContext())if(!(l in o))throw Error(r(108,J(i)||"Unknown",l));i=O({},a,n)}t.legacyContext=i,Xe(e,t,s),t.legacyContext=a}else Xe(e,t,s)}function qe(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function Ke(e,t,n,i,s){if("function"===typeof n)if(n.prototype&&n.prototype.isReactComponent){s=te(n,t.legacyContext);var o=n.contextType;ue(o=new n(i,"object"===typeof o&&null!==o?o._currentValue2:s),n,i,s),Ye(e,t,o,n)}else{s=ze(e,t,n,i,o=te(n,t.legacyContext));var a=0!==Ee;if("object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof)ue(s,n,i,o),Ye(e,t,s,n);else if(a){i=t.treeContext,t.treeContext=he(i,1,0);try{Xe(e,t,s)}finally{t.treeContext=i}}else Xe(e,t,s)}else{if("string"!==typeof n){switch(n){case Q:case X:case V:case G:case B:case z:return void Xe(e,t,i.children);case K:throw Error(r(343));case U:e:{n=t.blockedBoundary,s=t.blockedSegment,o=i.fallback,i=i.children;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:a=new Set,errorDigest:null},c=We(0,s.chunks.length,l,s.formatContext,!1,!1);s.children.push(c),s.lastPushedText=!1;var u=We(0,0,null,s.formatContext,!1,!1);u.parentFlushed=!0,t.blockedBoundary=l,t.blockedSegment=u;try{if(Ze(e,t,i),e.responseState.generateStaticMarkup||u.lastPushedText&&u.textEmbedded&&u.chunks.push("\x3c!-- --\x3e"),u.status=1,et(l,u),0===l.pendingTasks)break e}catch(d){u.status=4,l.forceClientRender=!0,l.errorDigest=je(e,d)}finally{t.blockedBoundary=n,t.blockedSegment=s}t=He(e,o,n,c,a,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if("object"===typeof n&&null!==n)switch(n.$$typeof){case j:if(i=ze(e,t,n.render,i,s),0!==Ee){n=t.treeContext,t.treeContext=he(n,1,0);try{Xe(e,t,i)}finally{t.treeContext=n}}else Xe(e,t,i);return;case Y:return void Ke(e,t,n=n.type,i=qe(n,i),s);case H:if(s=i.children,n=n._context,i=i.value,o=n._currentValue2,n._currentValue2=i,ne=i={parent:a=ne,depth:null===a?0:a.depth+1,context:n,parentValue:o,value:i},t.context=i,Xe(e,t,s),null===(e=ne))throw Error(r(403));return i=e.parentValue,e.context._currentValue2=i===Z?e.context._defaultValue:i,e=ne=e.parent,void(t.context=e);case W:return void Xe(e,t,i=(i=i.children)(n._currentValue2));case q:return void Ke(e,t,n=(s=n._init)(n._payload),i=qe(n,i),void 0)}throw Error(r(130,null==n?n:typeof n,""))}switch(o=M((s=t.blockedSegment).chunks,n,i,e.responseState,s.formatContext),s.lastPushedText=!1,a=s.formatContext,s.formatContext=function(e,t,n){switch(t){case"select":return b(1,null!=n.value?n.value:n.defaultValue);case"svg":return b(2,null);case"math":return b(3,null);case"foreignObject":return b(1,null);case"table":return b(4,null);case"thead":case"tbody":case"tfoot":return b(5,null);case"colgroup":return b(7,null);case"tr":return b(6,null)}return 4<=e.insertionMode||0===e.insertionMode?b(1,null):e}(a,n,i),Ze(e,t,o),s.formatContext=a,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:s.chunks.push("</",n,">")}s.lastPushedText=!1}}function Xe(e,t,n){if(t.node=n,"object"===typeof n&&null!==n){switch(n.$$typeof){case L:return void Ke(e,t,n.type,n.props,n.ref);case F:throw Error(r(257));case q:var i=n._init;return void Xe(e,t,n=i(n._payload))}if(w(n))return void Qe(e,t,n);if(null===n||"object"!==typeof n?i=null:i="function"===typeof(i=$&&n[$]||n["@@iterator"])?i:null,i&&(i=i.call(n))){if(!(n=i.next()).done){var s=[];do{s.push(n.value),n=i.next()}while(!n.done);Qe(e,t,s)}return}throw e=Object.prototype.toString.call(n),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}"string"===typeof n?(i=t.blockedSegment).lastPushedText=k(t.blockedSegment.chunks,n,e.responseState,i.lastPushedText):"number"===typeof n&&((i=t.blockedSegment).lastPushedText=k(t.blockedSegment.chunks,""+n,e.responseState,i.lastPushedText))}function Qe(e,t,n){for(var i=n.length,r=0;r<i;r++){var s=t.treeContext;t.treeContext=he(s,i,r);try{Ze(e,t,n[r])}finally{t.treeContext=s}}}function Ze(e,t,n){var i=t.blockedSegment.formatContext,r=t.legacyContext,s=t.context;try{return Xe(e,t,n)}catch(l){if(De(),"object"!==typeof l||null===l||"function"!==typeof l.then)throw t.blockedSegment.formatContext=i,t.legacyContext=r,t.context=s,le(s),l;n=l;var o=t.blockedSegment,a=We(0,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,e=He(e,t.node,t.blockedBoundary,a,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=i,t.legacyContext=r,t.context=s,le(s)}}function $e(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3,tt(this,t,e)}function Je(e,t,n){var i=e.blockedBoundary;e.blockedSegment.status=3,null===i?(t.allPendingTasks--,2!==t.status&&(t.status=2,null!==t.destination&&t.destination.push(null))):(i.pendingTasks--,i.forceClientRender||(i.forceClientRender=!0,e=void 0===n?Error(r(432)):n,i.errorDigest=t.onError(e),i.parentFlushed&&t.clientRenderedBoundaries.push(i)),i.fallbackAbortableTasks.forEach((function(e){return Je(e,t,n)})),i.fallbackAbortableTasks.clear(),t.allPendingTasks--,0===t.allPendingTasks&&(i=t.onAllReady)())}function et(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,1===n.status&&et(e,n)}else e.completedSegments.push(t)}function tt(e,t,n){if(null===t){if(n.parentFlushed){if(null!==e.completedRootSegment)throw Error(r(389));e.completedRootSegment=n}e.pendingRootTasks--,0===e.pendingRootTasks&&(e.onShellError=Ge,(t=e.onShellReady)())}else t.pendingTasks--,t.forceClientRender||(0===t.pendingTasks?(n.parentFlushed&&1===n.status&&et(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach($e,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&1===n.status&&(et(t,n),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,0===e.allPendingTasks&&(e=e.onAllReady)()}function nt(e){if(2!==e.status){var t=ne,n=Be.current;Be.current=Le;var i=Fe;Fe=e.responseState;try{var r,s=e.pingedTasks;for(r=0;r<s.length;r++){var o=s[r],a=e,l=o.blockedSegment;if(0===l.status){le(o.context);try{Xe(a,o,o.node),a.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("\x3c!-- --\x3e"),o.abortSet.delete(o),l.status=1,tt(a,o.blockedBoundary,l)}catch(p){if(De(),"object"===typeof p&&null!==p&&"function"===typeof p.then){var c=o.ping;p.then(c,c)}else{o.abortSet.delete(o),l.status=4;var u=o.blockedBoundary,d=p,h=je(a,d);if(null===u?Ue(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=h,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,0===a.allPendingTasks)(0,a.onAllReady)()}}}}s.splice(0,r),null!==e.destination&&lt(e,e.destination)}catch(p){je(e,p),Ue(e,p)}finally{Fe=i,Be.current=n,n===Le&&le(t)}}}function it(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var i=n.id=e.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,e=e.responseState,t.push('<template id="'),t.push(e.placeholderPrefix),e=i.toString(16),t.push(e),t.push('"></template>');case 1:n.status=2;var s=!0;i=n.chunks;var o=0;n=n.children;for(var a=0;a<n.length;a++){for(s=n[a];o<s.index;o++)t.push(i[o]);s=rt(e,t,s)}for(;o<i.length-1;o++)t.push(i[o]);return o<i.length&&(s=t.push(i[o])),s;default:throw Error(r(390))}}function rt(e,t,n){var i=n.boundary;if(null===i)return it(e,t,n);if(i.parentFlushed=!0,i.forceClientRender)return e.responseState.generateStaticMarkup||(i=i.errorDigest,t.push("\x3c!--$!--\x3e"),t.push("<template"),i&&(t.push(' data-dgst="'),i=v(i),t.push(i),t.push('"')),t.push("></template>")),it(e,t,n),e=!!e.responseState.generateStaticMarkup||t.push("\x3c!--/$--\x3e");if(0<i.pendingTasks){i.rootSegmentID=e.nextSegmentId++,0<i.completedSegments.length&&e.partialBoundaries.push(i);var s=e.responseState,o=s.nextSuspenseID++;return s=s.boundaryPrefix+o.toString(16),i=i.id=s,P(t,e.responseState,i),it(e,t,n),t.push("\x3c!--/$--\x3e")}if(i.byteSize>e.progressiveChunkSize)return i.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(i),P(t,e.responseState,i.id),it(e,t,n),t.push("\x3c!--/$--\x3e");if(e.responseState.generateStaticMarkup||t.push("\x3c!--$--\x3e"),1!==(n=i.completedSegments).length)throw Error(r(391));return rt(e,t,n[0]),e=!!e.responseState.generateStaticMarkup||t.push("\x3c!--/$--\x3e")}function st(e,t,n){return function(e,t,n,i){switch(n.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(t.segmentPrefix),t=i.toString(16),e.push(t),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=i.toString(16),e.push(t),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=i.toString(16),e.push(t),e.push('">');case 4:return e.push('<table hidden id="'),e.push(t.segmentPrefix),t=i.toString(16),e.push(t),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(t.segmentPrefix),t=i.toString(16),e.push(t),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(t.segmentPrefix),t=i.toString(16),e.push(t),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(t.segmentPrefix),t=i.toString(16),e.push(t),e.push('">');default:throw Error(r(397))}}(t,e.responseState,n.formatContext,n.id),rt(e,t,n),function(e,t){switch(t.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(r(397))}}(t,n.formatContext)}function ot(e,t,n){for(var i=n.completedSegments,s=0;s<i.length;s++)at(e,t,n,i[s]);if(i.length=0,e=e.responseState,i=n.id,n=n.rootSegmentID,t.push(e.startInlineScript),e.sentCompleteBoundaryFunction?t.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,t.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),null===i)throw Error(r(395));return n=n.toString(16),t.push(i),t.push('","'),t.push(e.segmentPrefix),t.push(n),t.push('")<\/script>')}function at(e,t,n,i){if(2===i.status)return!0;var s=i.id;if(-1===s){if(-1===(i.id=n.rootSegmentID))throw Error(r(392));return st(e,t,i)}return st(e,t,i),e=e.responseState,t.push(e.startInlineScript),e.sentCompleteSegmentFunction?t.push('$RS("'):(e.sentCompleteSegmentFunction=!0,t.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),t.push(e.segmentPrefix),s=s.toString(16),t.push(s),t.push('","'),t.push(e.placeholderPrefix),t.push(s),t.push('")<\/script>')}function lt(e,t){try{var n=e.completedRootSegment;if(null!==n&&0===e.pendingRootTasks){rt(e,t,n),e.completedRootSegment=null;var i=e.responseState.bootstrapChunks;for(n=0;n<i.length-1;n++)t.push(i[n]);n<i.length&&t.push(i[n])}var s,o=e.clientRenderedBoundaries;for(s=0;s<o.length;s++){var a=o[s];i=t;var l=e.responseState,c=a.id,u=a.errorDigest,d=a.errorMessage,h=a.errorComponentStack;if(i.push(l.startInlineScript),l.sentClientRenderFunction?i.push('$RX("'):(l.sentClientRenderFunction=!0,i.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),null===c)throw Error(r(395));if(i.push(c),i.push('"'),u||d||h){i.push(",");var p=N(u||"");i.push(p)}if(d||h){i.push(",");var g=N(d||"");i.push(g)}if(h){i.push(",");var f=N(h);i.push(f)}if(!i.push(")<\/script>"))return e.destination=null,s++,void o.splice(0,s)}o.splice(0,s);var m=e.completedBoundaries;for(s=0;s<m.length;s++)if(!ot(e,t,m[s]))return e.destination=null,s++,void m.splice(0,s);m.splice(0,s);var v=e.partialBoundaries;for(s=0;s<v.length;s++){var y=v[s];e:{o=e,a=t;var C=y.completedSegments;for(l=0;l<C.length;l++)if(!at(o,a,y,C[l])){l++,C.splice(0,l);var w=!1;break e}C.splice(0,l),w=!0}if(!w)return e.destination=null,s++,void v.splice(0,s)}v.splice(0,s);var b=e.completedBoundaries;for(s=0;s<b.length;s++)if(!ot(e,t,b[s]))return e.destination=null,s++,void b.splice(0,s);b.splice(0,s)}finally{0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&t.push(null)}}function ct(e,t){try{var n=e.abortableTasks;n.forEach((function(n){return Je(n,e,t)})),n.clear(),null!==e.destination&&lt(e,e.destination)}catch(i){je(e,i),Ue(e,i)}}function ut(){}function dt(e,t,n,i){var s=!1,o=null,a="",l={push:function(e){return null!==e&&(a+=e),!0},destroy:function(e){s=!0,o=e}},c=!1;if(e=function(e,t,n,i,r,s,o,a,l){var c=[],u=new Set;return(n=We(t={destination:null,responseState:t,progressiveChunkSize:void 0===i?12800:i,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===r?Ve:r,onAllReady:void 0===s?Ge:s,onShellReady:void 0===o?Ge:o,onShellError:void 0===a?Ge:a,onFatalError:void 0===l?Ge:l},0,null,n,!1,!1)).parentFlushed=!0,e=He(t,e,null,n,u,ee,null,de),c.push(e),t}(e,function(e,t){return{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:(t=void 0===t?"":t)+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}(n,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,ut,void 0,(function(){c=!0}),void 0,void 0),nt(e),ct(e,i),1===e.status)e.status=2,l.destroy(e.fatalError);else if(2!==e.status&&null===e.destination){e.destination=l;try{lt(e,l)}catch(u){je(e,u),Ue(e,u)}}if(s)throw o;if(!c)throw Error(r(426));return a}t.renderToNodeStream=function(){throw Error(r(207))},t.renderToStaticMarkup=function(e,t){return dt(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},t.renderToStaticNodeStream=function(){throw Error(r(208))},t.renderToString=function(e,t){return dt(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},t.version="18.3.1"},3623:(e,t,n)=>{"use strict";var i=n(4628);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=null,o=0;function a(e,t){if(0!==t.length)if(512<t.length)0<o&&(e.enqueue(new Uint8Array(s.buffer,0,o)),s=new Uint8Array(512),o=0),e.enqueue(t);else{var n=s.length-o;n<t.length&&(0===n?e.enqueue(s):(s.set(t.subarray(0,n),o),e.enqueue(s),t=t.subarray(n)),s=new Uint8Array(512),o=0),s.set(t,o),o+=t.length}}function l(e,t){return a(e,t),!0}function c(e){s&&0<o&&(e.enqueue(new Uint8Array(s.buffer,0,o)),s=null,o=0)}var u=new TextEncoder;function d(e){return u.encode(e)}function h(e){return u.encode(e)}function p(e,t){"function"===typeof e.error?e.error(t):e.close()}var g=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function y(e){return!!g.call(v,e)||!g.call(m,e)&&(f.test(e)?v[e]=!0:(m[e]=!0,!1))}function C(e,t,n,i,r,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){w[e]=new C(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];w[t]=new C(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){w[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){w[e]=new C(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){w[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){w[e]=new C(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){w[e]=new C(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){w[e]=new C(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){w[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function S(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(b,S);w[t]=new C(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(b,S);w[t]=new C(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(b,S);w[t]=new C(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){w[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)})),w.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){w[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)}));var E={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},x=["Webkit","ms","Moz","O"];Object.keys(E).forEach((function(e){x.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),E[t]=E[e]}))}));var A=/["'&<>]/;function T(e){if("boolean"===typeof e||"number"===typeof e)return""+e;e=""+e;var t=A.exec(e);if(t){var n,i="",r=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}r!==n&&(i+=e.substring(r,n)),r=n+1,i+=t}e=r!==n?i+e.substring(r,n):i}return e}var _=/([A-Z])/g,R=/^ms-/,D=Array.isArray,M=h("<script>"),P=h("<\/script>"),I=h('<script src="'),N=h('<script type="module" src="'),k=h('" async=""><\/script>'),O=/(<\/|<)(s)(cript)/gi;function L(e,t,n,i){return t+("s"===n?"\\u0073":"\\u0053")+i}function F(e,t){return{insertionMode:e,selectedValue:t}}var B=h("\x3c!-- --\x3e");function V(e,t,n,i){return""===t?i:(i&&e.push(B),e.push(d(T(t))),!0)}var G=new Map,H=h(' style="'),W=h(":"),j=h(";");function U(e,t,n){if("object"!==typeof n)throw Error(r(62));for(var i in t=!0,n)if(g.call(n,i)){var s=n[i];if(null!=s&&"boolean"!==typeof s&&""!==s){if(0===i.indexOf("--")){var o=d(T(i));s=d(T((""+s).trim()))}else{o=i;var a=G.get(o);void 0!==a||(a=h(T(o.replace(_,"-$1").toLowerCase().replace(R,"-ms-"))),G.set(o,a)),o=a,s="number"===typeof s?0===s||g.call(E,i)?d(""+s):d(s+"px"):d(T((""+s).trim()))}t?(t=!1,e.push(H,o,W,s)):e.push(j,o,W,s)}}t||e.push(q)}var z=h(" "),Y=h('="'),q=h('"'),K=h('=""');function X(e,t,n,i){switch(n){case"style":return void U(e,t,i);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])if(null!==(t=w.hasOwnProperty(n)?w[n]:null)){switch(typeof i){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=d(t.attributeName),t.type){case 3:i&&e.push(z,n,K);break;case 4:!0===i?e.push(z,n,K):!1!==i&&e.push(z,n,Y,d(T(i)),q);break;case 5:isNaN(i)||e.push(z,n,Y,d(T(i)),q);break;case 6:!isNaN(i)&&1<=i&&e.push(z,n,Y,d(T(i)),q);break;default:t.sanitizeURL&&(i=""+i),e.push(z,n,Y,d(T(i)),q)}}else if(y(n)){switch(typeof i){case"function":case"symbol":return;case"boolean":if("data-"!==(t=n.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(z,d(n),Y,d(T(i)),q)}}var Q=h(">"),Z=h("/>");function $(e,t,n){if(null!=t){if(null!=n)throw Error(r(60));if("object"!==typeof t||!("__html"in t))throw Error(r(61));null!==(t=t.__html)&&void 0!==t&&e.push(d(""+t))}}var J=h(' selected=""');function ee(e,t,n,i){e.push(re(n));var r,s=n=null;for(r in t)if(g.call(t,r)){var o=t[r];if(null!=o)switch(r){case"children":n=o;break;case"dangerouslySetInnerHTML":s=o;break;default:X(e,i,r,o)}}return e.push(Q),$(e,s,n),"string"===typeof n?(e.push(d(T(n))),null):n}var te=h("\n"),ne=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ie=new Map;function re(e){var t=ie.get(e);if(void 0===t){if(!ne.test(e))throw Error(r(65,e));t=h("<"+e),ie.set(e,t)}return t}var se=h("<!DOCTYPE html>");function oe(e,t,n,s,o){switch(t){case"select":e.push(re("select"));var a=null,l=null;for(p in n)if(g.call(n,p)){var c=n[p];if(null!=c)switch(p){case"children":a=c;break;case"dangerouslySetInnerHTML":l=c;break;case"defaultValue":case"value":break;default:X(e,s,p,c)}}return e.push(Q),$(e,l,a),a;case"option":l=o.selectedValue,e.push(re("option"));var u=c=null,h=null,p=null;for(a in n)if(g.call(n,a)){var f=n[a];if(null!=f)switch(a){case"children":c=f;break;case"selected":h=f;break;case"dangerouslySetInnerHTML":p=f;break;case"value":u=f;default:X(e,s,a,f)}}if(null!=l)if(n=null!==u?""+u:function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(c),D(l)){for(s=0;s<l.length;s++)if(""+l[s]===n){e.push(J);break}}else""+l===n&&e.push(J);else h&&e.push(J);return e.push(Q),$(e,p,c),c;case"textarea":for(c in e.push(re("textarea")),p=l=a=null,n)if(g.call(n,c)&&null!=(u=n[c]))switch(c){case"children":p=u;break;case"value":a=u;break;case"defaultValue":l=u;break;case"dangerouslySetInnerHTML":throw Error(r(91));default:X(e,s,c,u)}if(null===a&&null!==l&&(a=l),e.push(Q),null!=p){if(null!=a)throw Error(r(92));if(D(p)&&1<p.length)throw Error(r(93));a=""+p}return"string"===typeof a&&"\n"===a[0]&&e.push(te),null!==a&&e.push(d(T(""+a))),null;case"input":for(l in e.push(re("input")),u=p=c=a=null,n)if(g.call(n,l)&&null!=(h=n[l]))switch(l){case"children":case"dangerouslySetInnerHTML":throw Error(r(399,"input"));case"defaultChecked":u=h;break;case"defaultValue":c=h;break;case"checked":p=h;break;case"value":a=h;break;default:X(e,s,l,h)}return null!==p?X(e,s,"checked",p):null!==u&&X(e,s,"checked",u),null!==a?X(e,s,"value",a):null!==c&&X(e,s,"value",c),e.push(Z),null;case"menuitem":for(var m in e.push(re("menuitem")),n)if(g.call(n,m)&&null!=(a=n[m]))switch(m){case"children":case"dangerouslySetInnerHTML":throw Error(r(400));default:X(e,s,m,a)}return e.push(Q),null;case"title":for(f in e.push(re("title")),a=null,n)if(g.call(n,f)&&null!=(l=n[f]))switch(f){case"children":a=l;break;case"dangerouslySetInnerHTML":throw Error(r(434));default:X(e,s,f,l)}return e.push(Q),a;case"listing":case"pre":for(u in e.push(re(t)),l=a=null,n)if(g.call(n,u)&&null!=(c=n[u]))switch(u){case"children":a=c;break;case"dangerouslySetInnerHTML":l=c;break;default:X(e,s,u,c)}if(e.push(Q),null!=l){if(null!=a)throw Error(r(60));if("object"!==typeof l||!("__html"in l))throw Error(r(61));null!==(n=l.__html)&&void 0!==n&&("string"===typeof n&&0<n.length&&"\n"===n[0]?e.push(te,d(n)):e.push(d(""+n)))}return"string"===typeof a&&"\n"===a[0]&&e.push(te),a;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var v in e.push(re(t)),n)if(g.call(n,v)&&null!=(a=n[v]))switch(v){case"children":case"dangerouslySetInnerHTML":throw Error(r(399,t));default:X(e,s,v,a)}return e.push(Z),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return ee(e,n,t,s);case"html":return 0===o.insertionMode&&e.push(se),ee(e,n,t,s);default:if(-1===t.indexOf("-")&&"string"!==typeof n.is)return ee(e,n,t,s);for(h in e.push(re(t)),l=a=null,n)if(g.call(n,h)&&null!=(c=n[h]))switch(h){case"children":a=c;break;case"dangerouslySetInnerHTML":l=c;break;case"style":U(e,s,c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:y(h)&&"function"!==typeof c&&"symbol"!==typeof c&&e.push(z,d(h),Y,d(T(c)),q)}return e.push(Q),$(e,l,a),a}}var ae=h("</"),le=h(">"),ce=h('<template id="'),ue=h('"></template>'),de=h("\x3c!--$--\x3e"),he=h('\x3c!--$?--\x3e<template id="'),pe=h('"></template>'),ge=h("\x3c!--$!--\x3e"),fe=h("\x3c!--/$--\x3e"),me=h("<template"),ve=h('"'),ye=h(' data-dgst="');h(' data-msg="'),h(' data-stck="');var Ce=h("></template>");function we(e,t,n){if(a(e,he),null===n)throw Error(r(395));return a(e,n),l(e,pe)}var be=h('<div hidden id="'),Se=h('">'),Ee=h("</div>"),xe=h('<svg aria-hidden="true" style="display:none" id="'),Ae=h('">'),Te=h("</svg>"),_e=h('<math aria-hidden="true" style="display:none" id="'),Re=h('">'),De=h("</math>"),Me=h('<table hidden id="'),Pe=h('">'),Ie=h("</table>"),Ne=h('<table hidden><tbody id="'),ke=h('">'),Oe=h("</tbody></table>"),Le=h('<table hidden><tr id="'),Fe=h('">'),Be=h("</tr></table>"),Ve=h('<table hidden><colgroup id="'),Ge=h('">'),He=h("</colgroup></table>");var We=h('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),je=h('$RS("'),Ue=h('","'),ze=h('")<\/script>'),Ye=h('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),qe=h('$RC("'),Ke=h('","'),Xe=h('")<\/script>'),Qe=h('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),Ze=h('$RX("'),$e=h('"'),Je=h(")<\/script>"),et=h(","),tt=/[<\u2028\u2029]/g;function nt(e){return JSON.stringify(e).replace(tt,(function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}))}var it=Object.assign,rt=Symbol.for("react.element"),st=Symbol.for("react.portal"),ot=Symbol.for("react.fragment"),at=Symbol.for("react.strict_mode"),lt=Symbol.for("react.profiler"),ct=Symbol.for("react.provider"),ut=Symbol.for("react.context"),dt=Symbol.for("react.forward_ref"),ht=Symbol.for("react.suspense"),pt=Symbol.for("react.suspense_list"),gt=Symbol.for("react.memo"),ft=Symbol.for("react.lazy"),mt=Symbol.for("react.scope"),vt=Symbol.for("react.debug_trace_mode"),yt=Symbol.for("react.legacy_hidden"),Ct=Symbol.for("react.default_value"),wt=Symbol.iterator;function bt(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ot:return"Fragment";case st:return"Portal";case lt:return"Profiler";case at:return"StrictMode";case ht:return"Suspense";case pt:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case ut:return(e.displayName||"Context")+".Consumer";case ct:return(e._context.displayName||"Context")+".Provider";case dt:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case gt:return null!==(t=e.displayName||null)?t:bt(e.type)||"Memo";case ft:t=e._payload,e=e._init;try{return bt(e(t))}catch(n){}}return null}var St={};function Et(e,t){if(!(e=e.contextTypes))return St;var n,i={};for(n in e)i[n]=t[n];return i}var xt=null;function At(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var n=t.parent;if(null===e){if(null!==n)throw Error(r(401))}else{if(null===n)throw Error(r(401));At(e,n)}t.context._currentValue=t.value}}function Tt(e){e.context._currentValue=e.parentValue,null!==(e=e.parent)&&Tt(e)}function _t(e){var t=e.parent;null!==t&&_t(t),e.context._currentValue=e.value}function Rt(e,t){if(e.context._currentValue=e.parentValue,null===(e=e.parent))throw Error(r(402));e.depth===t.depth?At(e,t):Rt(e,t)}function Dt(e,t){var n=t.parent;if(null===n)throw Error(r(402));e.depth===n.depth?At(e,n):Dt(e,n),t.context._currentValue=t.value}function Mt(e){var t=xt;t!==e&&(null===t?_t(e):null===e?Tt(t):t.depth===e.depth?At(t,e):t.depth>e.depth?Rt(t,e):Dt(t,e),xt=e)}var Pt={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function It(e,t,n,i){var r=void 0!==e.state?e.state:null;e.updater=Pt,e.props=n,e.state=r;var s={queue:[],replace:!1};e._reactInternals=s;var o=t.contextType;if(e.context="object"===typeof o&&null!==o?o._currentValue:i,"function"===typeof(o=t.getDerivedStateFromProps)&&(r=null===(o=o(n,r))||void 0===o?r:it({},r,o),e.state=r),"function"!==typeof t.getDerivedStateFromProps&&"function"!==typeof e.getSnapshotBeforeUpdate&&("function"===typeof e.UNSAFE_componentWillMount||"function"===typeof e.componentWillMount))if(t=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&Pt.enqueueReplaceState(e,e.state,null),null!==s.queue&&0<s.queue.length)if(t=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&1===t.length)e.state=t[0];else{for(s=o?t[0]:e.state,r=!0,o=o?1:0;o<t.length;o++){var a=t[o];null!=(a="function"===typeof a?a.call(e,s,n,i):a)&&(r?(r=!1,s=it({},s,a)):it(s,a))}e.state=s}else s.queue=null}var Nt={id:1,overflow:""};function kt(e,t,n){var i=e.id;e=e.overflow;var r=32-Ot(i)-1;i&=~(1<<r),n+=1;var s=32-Ot(t)+r;if(30<s){var o=r-r%5;return s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,{id:1<<32-Ot(t)+r|n<<r|i,overflow:s+e}}return{id:1<<s|n<<r|i,overflow:e}}var Ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Lt(e)/Ft|0)|0},Lt=Math.log,Ft=Math.LN2;var Bt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Vt=null,Gt=null,Ht=null,Wt=null,jt=!1,Ut=!1,zt=0,Yt=null,qt=0;function Kt(){if(null===Vt)throw Error(r(321));return Vt}function Xt(){if(0<qt)throw Error(r(312));return{memoizedState:null,queue:null,next:null}}function Qt(){return null===Wt?null===Ht?(jt=!1,Ht=Wt=Xt()):(jt=!0,Wt=Ht):null===Wt.next?(jt=!1,Wt=Wt.next=Xt()):(jt=!0,Wt=Wt.next),Wt}function Zt(){Gt=Vt=null,Ut=!1,Ht=null,qt=0,Wt=Yt=null}function $t(e,t){return"function"===typeof t?t(e):t}function Jt(e,t,n){if(Vt=Kt(),Wt=Qt(),jt){var i=Wt.queue;if(t=i.dispatch,null!==Yt&&void 0!==(n=Yt.get(i))){Yt.delete(i),i=Wt.memoizedState;do{i=e(i,n.action),n=n.next}while(null!==n);return Wt.memoizedState=i,[i,t]}return[Wt.memoizedState,t]}return e=e===$t?"function"===typeof t?t():t:void 0!==n?n(t):t,Wt.memoizedState=e,e=(e=Wt.queue={last:null,dispatch:null}).dispatch=tn.bind(null,Vt,e),[Wt.memoizedState,e]}function en(e,t){if(Vt=Kt(),t=void 0===t?null:t,null!==(Wt=Qt())){var n=Wt.memoizedState;if(null!==n&&null!==t){var i=n[1];e:if(null===i)i=!1;else{for(var r=0;r<i.length&&r<t.length;r++)if(!Bt(t[r],i[r])){i=!1;break e}i=!0}if(i)return n[0]}}return e=e(),Wt.memoizedState=[e,t],e}function tn(e,t,n){if(25<=qt)throw Error(r(301));if(e===Vt)if(Ut=!0,e={action:n,next:null},null===Yt&&(Yt=new Map),void 0===(n=Yt.get(t)))Yt.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function nn(){throw Error(r(394))}function rn(){}var sn={readContext:function(e){return e._currentValue},useContext:function(e){return Kt(),e._currentValue},useMemo:en,useReducer:Jt,useRef:function(e){Vt=Kt();var t=(Wt=Qt()).memoizedState;return null===t?(e={current:e},Wt.memoizedState=e):t},useState:function(e){return Jt($t,e)},useInsertionEffect:rn,useLayoutEffect:function(){},useCallback:function(e,t){return en((function(){return e}),t)},useImperativeHandle:rn,useEffect:rn,useDebugValue:rn,useDeferredValue:function(e){return Kt(),e},useTransition:function(){return Kt(),[!1,nn]},useId:function(){var e=Gt.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-Ot(e)-1)).toString(32)+t;var n=on;if(null===n)throw Error(r(404));return t=zt++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Kt(),t(e._source)},useSyncExternalStore:function(e,t,n){if(void 0===n)throw Error(r(407));return n()}},on=null,an=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function ln(e){return console.error(e),null}function cn(){}function un(e,t,n,i,r,s,o,a){e.allPendingTasks++,null===n?e.pendingRootTasks++:n.pendingTasks++;var l={node:t,ping:function(){var t=e.pingedTasks;t.push(l),1===t.length&&An(e)},blockedBoundary:n,blockedSegment:i,abortSet:r,legacyContext:s,context:o,treeContext:a};return r.add(l),l}function dn(e,t,n,i,r,s){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:i,boundary:n,lastPushedText:r,textEmbedded:s}}function hn(e,t){if(null!=(e=e.onError(t))&&"string"!==typeof e)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function pn(e,t){var n=e.onShellError;n(t),(n=e.onFatalError)(t),null!==e.destination?(e.status=2,p(e.destination,t)):(e.status=1,e.fatalError=t)}function gn(e,t,n,i,r){for(Vt={},Gt=t,zt=0,e=n(i,r);Ut;)Ut=!1,zt=0,qt+=1,Wt=null,e=n(i,r);return Zt(),e}function fn(e,t,n,i){var s=n.render(),o=i.childContextTypes;if(null!==o&&void 0!==o){var a=t.legacyContext;if("function"!==typeof n.getChildContext)i=a;else{for(var l in n=n.getChildContext())if(!(l in o))throw Error(r(108,bt(i)||"Unknown",l));i=it({},a,n)}t.legacyContext=i,yn(e,t,s),t.legacyContext=a}else yn(e,t,s)}function mn(e,t){if(e&&e.defaultProps){for(var n in t=it({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function vn(e,t,n,i,s){if("function"===typeof n)if(n.prototype&&n.prototype.isReactComponent){s=Et(n,t.legacyContext);var o=n.contextType;It(o=new n(i,"object"===typeof o&&null!==o?o._currentValue:s),n,i,s),fn(e,t,o,n)}else{s=gn(e,t,n,i,o=Et(n,t.legacyContext));var a=0!==zt;if("object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof)It(s,n,i,o),fn(e,t,s,n);else if(a){i=t.treeContext,t.treeContext=kt(i,1,0);try{yn(e,t,s)}finally{t.treeContext=i}}else yn(e,t,s)}else{if("string"!==typeof n){switch(n){case yt:case vt:case at:case lt:case ot:case pt:return void yn(e,t,i.children);case mt:throw Error(r(343));case ht:e:{n=t.blockedBoundary,s=t.blockedSegment,o=i.fallback,i=i.children;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:a=new Set,errorDigest:null},c=dn(0,s.chunks.length,l,s.formatContext,!1,!1);s.children.push(c),s.lastPushedText=!1;var u=dn(0,0,null,s.formatContext,!1,!1);u.parentFlushed=!0,t.blockedBoundary=l,t.blockedSegment=u;try{if(wn(e,t,i),u.lastPushedText&&u.textEmbedded&&u.chunks.push(B),u.status=1,En(l,u),0===l.pendingTasks)break e}catch(h){u.status=4,l.forceClientRender=!0,l.errorDigest=hn(e,h)}finally{t.blockedBoundary=n,t.blockedSegment=s}t=un(e,o,n,c,a,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if("object"===typeof n&&null!==n)switch(n.$$typeof){case dt:if(i=gn(e,t,n.render,i,s),0!==zt){n=t.treeContext,t.treeContext=kt(n,1,0);try{yn(e,t,i)}finally{t.treeContext=n}}else yn(e,t,i);return;case gt:return void vn(e,t,n=n.type,i=mn(n,i),s);case ct:if(s=i.children,n=n._context,i=i.value,o=n._currentValue,n._currentValue=i,xt=i={parent:a=xt,depth:null===a?0:a.depth+1,context:n,parentValue:o,value:i},t.context=i,yn(e,t,s),null===(e=xt))throw Error(r(403));return i=e.parentValue,e.context._currentValue=i===Ct?e.context._defaultValue:i,e=xt=e.parent,void(t.context=e);case ut:return void yn(e,t,i=(i=i.children)(n._currentValue));case ft:return void vn(e,t,n=(s=n._init)(n._payload),i=mn(n,i),void 0)}throw Error(r(130,null==n?n:typeof n,""))}switch(o=oe((s=t.blockedSegment).chunks,n,i,e.responseState,s.formatContext),s.lastPushedText=!1,a=s.formatContext,s.formatContext=function(e,t,n){switch(t){case"select":return F(1,null!=n.value?n.value:n.defaultValue);case"svg":return F(2,null);case"math":return F(3,null);case"foreignObject":return F(1,null);case"table":return F(4,null);case"thead":case"tbody":case"tfoot":return F(5,null);case"colgroup":return F(7,null);case"tr":return F(6,null)}return 4<=e.insertionMode||0===e.insertionMode?F(1,null):e}(a,n,i),wn(e,t,o),s.formatContext=a,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:s.chunks.push(ae,d(n),le)}s.lastPushedText=!1}}function yn(e,t,n){if(t.node=n,"object"===typeof n&&null!==n){switch(n.$$typeof){case rt:return void vn(e,t,n.type,n.props,n.ref);case st:throw Error(r(257));case ft:var i=n._init;return void yn(e,t,n=i(n._payload))}if(D(n))return void Cn(e,t,n);if(null===n||"object"!==typeof n?i=null:i="function"===typeof(i=wt&&n[wt]||n["@@iterator"])?i:null,i&&(i=i.call(n))){if(!(n=i.next()).done){var s=[];do{s.push(n.value),n=i.next()}while(!n.done);Cn(e,t,s)}return}throw e=Object.prototype.toString.call(n),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}"string"===typeof n?(i=t.blockedSegment).lastPushedText=V(t.blockedSegment.chunks,n,e.responseState,i.lastPushedText):"number"===typeof n&&((i=t.blockedSegment).lastPushedText=V(t.blockedSegment.chunks,""+n,e.responseState,i.lastPushedText))}function Cn(e,t,n){for(var i=n.length,r=0;r<i;r++){var s=t.treeContext;t.treeContext=kt(s,i,r);try{wn(e,t,n[r])}finally{t.treeContext=s}}}function wn(e,t,n){var i=t.blockedSegment.formatContext,r=t.legacyContext,s=t.context;try{return yn(e,t,n)}catch(l){if(Zt(),"object"!==typeof l||null===l||"function"!==typeof l.then)throw t.blockedSegment.formatContext=i,t.legacyContext=r,t.context=s,Mt(s),l;n=l;var o=t.blockedSegment,a=dn(0,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,e=un(e,t.node,t.blockedBoundary,a,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=i,t.legacyContext=r,t.context=s,Mt(s)}}function bn(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3,xn(this,t,e)}function Sn(e,t,n){var i=e.blockedBoundary;e.blockedSegment.status=3,null===i?(t.allPendingTasks--,2!==t.status&&(t.status=2,null!==t.destination&&t.destination.close())):(i.pendingTasks--,i.forceClientRender||(i.forceClientRender=!0,e=void 0===n?Error(r(432)):n,i.errorDigest=t.onError(e),i.parentFlushed&&t.clientRenderedBoundaries.push(i)),i.fallbackAbortableTasks.forEach((function(e){return Sn(e,t,n)})),i.fallbackAbortableTasks.clear(),t.allPendingTasks--,0===t.allPendingTasks&&(i=t.onAllReady)())}function En(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,1===n.status&&En(e,n)}else e.completedSegments.push(t)}function xn(e,t,n){if(null===t){if(n.parentFlushed){if(null!==e.completedRootSegment)throw Error(r(389));e.completedRootSegment=n}e.pendingRootTasks--,0===e.pendingRootTasks&&(e.onShellError=cn,(t=e.onShellReady)())}else t.pendingTasks--,t.forceClientRender||(0===t.pendingTasks?(n.parentFlushed&&1===n.status&&En(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(bn,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&1===n.status&&(En(t,n),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,0===e.allPendingTasks&&(e=e.onAllReady)()}function An(e){if(2!==e.status){var t=xt,n=an.current;an.current=sn;var i=on;on=e.responseState;try{var r,s=e.pingedTasks;for(r=0;r<s.length;r++){var o=s[r],a=e,l=o.blockedSegment;if(0===l.status){Mt(o.context);try{yn(a,o,o.node),l.lastPushedText&&l.textEmbedded&&l.chunks.push(B),o.abortSet.delete(o),l.status=1,xn(a,o.blockedBoundary,l)}catch(p){if(Zt(),"object"===typeof p&&null!==p&&"function"===typeof p.then){var c=o.ping;p.then(c,c)}else{o.abortSet.delete(o),l.status=4;var u=o.blockedBoundary,d=p,h=hn(a,d);if(null===u?pn(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=h,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,0===a.allPendingTasks)(0,a.onAllReady)()}}}}s.splice(0,r),null!==e.destination&&Pn(e,e.destination)}catch(p){hn(e,p),pn(e,p)}finally{on=i,an.current=n,n===sn&&Mt(t)}}}function Tn(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var i=n.id=e.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,e=e.responseState,a(t,ce),a(t,e.placeholderPrefix),a(t,e=d(i.toString(16))),l(t,ue);case 1:n.status=2;var s=!0;i=n.chunks;var o=0;n=n.children;for(var c=0;c<n.length;c++){for(s=n[c];o<s.index;o++)a(t,i[o]);s=_n(e,t,s)}for(;o<i.length-1;o++)a(t,i[o]);return o<i.length&&(s=l(t,i[o])),s;default:throw Error(r(390))}}function _n(e,t,n){var i=n.boundary;if(null===i)return Tn(e,t,n);if(i.parentFlushed=!0,i.forceClientRender)i=i.errorDigest,l(t,ge),a(t,me),i&&(a(t,ye),a(t,d(T(i))),a(t,ve)),l(t,Ce),Tn(e,t,n);else if(0<i.pendingTasks){i.rootSegmentID=e.nextSegmentId++,0<i.completedSegments.length&&e.partialBoundaries.push(i);var s=e.responseState,o=s.nextSuspenseID++;s=h(s.boundaryPrefix+o.toString(16)),i=i.id=s,we(t,e.responseState,i),Tn(e,t,n)}else if(i.byteSize>e.progressiveChunkSize)i.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(i),we(t,e.responseState,i.id),Tn(e,t,n);else{if(l(t,de),1!==(n=i.completedSegments).length)throw Error(r(391));_n(e,t,n[0])}return l(t,fe)}function Rn(e,t,n){return function(e,t,n,i){switch(n.insertionMode){case 0:case 1:return a(e,be),a(e,t.segmentPrefix),a(e,d(i.toString(16))),l(e,Se);case 2:return a(e,xe),a(e,t.segmentPrefix),a(e,d(i.toString(16))),l(e,Ae);case 3:return a(e,_e),a(e,t.segmentPrefix),a(e,d(i.toString(16))),l(e,Re);case 4:return a(e,Me),a(e,t.segmentPrefix),a(e,d(i.toString(16))),l(e,Pe);case 5:return a(e,Ne),a(e,t.segmentPrefix),a(e,d(i.toString(16))),l(e,ke);case 6:return a(e,Le),a(e,t.segmentPrefix),a(e,d(i.toString(16))),l(e,Fe);case 7:return a(e,Ve),a(e,t.segmentPrefix),a(e,d(i.toString(16))),l(e,Ge);default:throw Error(r(397))}}(t,e.responseState,n.formatContext,n.id),_n(e,t,n),function(e,t){switch(t.insertionMode){case 0:case 1:return l(e,Ee);case 2:return l(e,Te);case 3:return l(e,De);case 4:return l(e,Ie);case 5:return l(e,Oe);case 6:return l(e,Be);case 7:return l(e,He);default:throw Error(r(397))}}(t,n.formatContext)}function Dn(e,t,n){for(var i=n.completedSegments,s=0;s<i.length;s++)Mn(e,t,n,i[s]);if(i.length=0,e=e.responseState,i=n.id,n=n.rootSegmentID,a(t,e.startInlineScript),e.sentCompleteBoundaryFunction?a(t,qe):(e.sentCompleteBoundaryFunction=!0,a(t,Ye)),null===i)throw Error(r(395));return n=d(n.toString(16)),a(t,i),a(t,Ke),a(t,e.segmentPrefix),a(t,n),l(t,Xe)}function Mn(e,t,n,i){if(2===i.status)return!0;var s=i.id;if(-1===s){if(-1===(i.id=n.rootSegmentID))throw Error(r(392));return Rn(e,t,i)}return Rn(e,t,i),a(t,(e=e.responseState).startInlineScript),e.sentCompleteSegmentFunction?a(t,je):(e.sentCompleteSegmentFunction=!0,a(t,We)),a(t,e.segmentPrefix),a(t,s=d(s.toString(16))),a(t,Ue),a(t,e.placeholderPrefix),a(t,s),l(t,ze)}function Pn(e,t){s=new Uint8Array(512),o=0;try{var n=e.completedRootSegment;if(null!==n&&0===e.pendingRootTasks){_n(e,t,n),e.completedRootSegment=null;var i=e.responseState.bootstrapChunks;for(n=0;n<i.length-1;n++)a(t,i[n]);n<i.length&&l(t,i[n])}var u,h=e.clientRenderedBoundaries;for(u=0;u<h.length;u++){var p=h[u];i=t;var g=e.responseState,f=p.id,m=p.errorDigest,v=p.errorMessage,y=p.errorComponentStack;if(a(i,g.startInlineScript),g.sentClientRenderFunction?a(i,Ze):(g.sentClientRenderFunction=!0,a(i,Qe)),null===f)throw Error(r(395));if(a(i,f),a(i,$e),(m||v||y)&&(a(i,et),a(i,d(nt(m||"")))),(v||y)&&(a(i,et),a(i,d(nt(v||"")))),y&&(a(i,et),a(i,d(nt(y)))),!l(i,Je))return e.destination=null,u++,void h.splice(0,u)}h.splice(0,u);var C=e.completedBoundaries;for(u=0;u<C.length;u++)if(!Dn(e,t,C[u]))return e.destination=null,u++,void C.splice(0,u);C.splice(0,u),c(t),s=new Uint8Array(512),o=0;var w=e.partialBoundaries;for(u=0;u<w.length;u++){var b=w[u];e:{h=e,p=t;var S=b.completedSegments;for(g=0;g<S.length;g++)if(!Mn(h,p,b,S[g])){g++,S.splice(0,g);var E=!1;break e}S.splice(0,g),E=!0}if(!E)return e.destination=null,u++,void w.splice(0,u)}w.splice(0,u);var x=e.completedBoundaries;for(u=0;u<x.length;u++)if(!Dn(e,t,x[u]))return e.destination=null,u++,void x.splice(0,u);x.splice(0,u)}finally{c(t),0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&t.close()}}function In(e,t){try{var n=e.abortableTasks;n.forEach((function(n){return Sn(n,e,t)})),n.clear(),null!==e.destination&&Pn(e,e.destination)}catch(i){hn(e,i),pn(e,i)}}t.renderToReadableStream=function(e,t){return new Promise((function(n,i){var r,s,o=new Promise((function(e,t){s=e,r=t})),a=function(e,t,n,i,r,s,o,a,l){var c=[],u=new Set;return(n=dn(t={destination:null,responseState:t,progressiveChunkSize:void 0===i?12800:i,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===r?ln:r,onAllReady:void 0===s?cn:s,onShellReady:void 0===o?cn:o,onShellError:void 0===a?cn:a,onFatalError:void 0===l?cn:l},0,null,n,!1,!1)).parentFlushed=!0,e=un(t,e,null,n,u,St,null,Nt),c.push(e),t}(e,function(e,t,n,i,r){e=void 0===e?"":e,t=void 0===t?M:h('<script nonce="'+T(t)+'">');var s=[];if(void 0!==n&&s.push(t,d((""+n).replace(O,L)),P),void 0!==i)for(n=0;n<i.length;n++)s.push(I,d(T(i[n])),k);if(void 0!==r)for(i=0;i<r.length;i++)s.push(N,d(T(r[i])),k);return{bootstrapChunks:s,startInlineScript:t,placeholderPrefix:h(e+"P:"),segmentPrefix:h(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),function(e){return F("http://www.w3.org/2000/svg"===e?2:"http://www.w3.org/1998/Math/MathML"===e?3:0,null)}(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,s,(function(){var e=new ReadableStream({type:"bytes",pull:function(e){if(1===a.status)a.status=2,p(e,a.fatalError);else if(2!==a.status&&null===a.destination){a.destination=e;try{Pn(a,e)}catch(t){hn(a,t),pn(a,t)}}},cancel:function(){In(a)}},{highWaterMark:0});e.allReady=o,n(e)}),(function(e){o.catch((function(){})),i(e)}),r);if(t&&t.signal){var l=t.signal,c=function(){In(a,l.reason),l.removeEventListener("abort",c)};l.addEventListener("abort",c)}An(a)}))},t.version="18.3.1"},4223:(e,t,n)=>{"use strict";var i=n(4628),r=n(4950);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function f(e,t,n,i,r,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function C(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(g,e)||!d.call(p,e)&&(h.test(e)?g[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),_=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var k=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=k&&e[k]||e["@@iterator"])?e:null}var L,F=Object.assign;function B(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var V=!1;function G(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function H(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 1:return e=G(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case A:return"Profiler";case x:return"StrictMode";case D:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function j(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=z(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=U(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&C(e,"checked",t,!1)}function $(e,t){Z(e,t);var n=U(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,U(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+U(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:U(n)}}function se(e,t){var n=U(t.value),i=U(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=fe(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){ge.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function Ce(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,xe=null;function Ae(e){if(e=Cr(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=br(t),Se(e.stateNode,e.type,t))}}function Te(e){Ee?xe?xe.push(e):xe=[e]:Ee=e}function _e(){if(Ee){var e=Ee,t=xe;if(xe=Ee=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Re(e,t){return e(t)}function De(){}var Me=!1;function Pe(e,t,n){if(Me)return e(t,n);Me=!0;try{return Re(e,t,n)}finally{Me=!1,(null!==Ee||null!==xe)&&(De(),_e())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var i=br(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ne=!1;if(u)try{var ke={};Object.defineProperty(ke,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",ke,ke),window.removeEventListener("test",ke,ke)}catch(ue){Ne=!1}function Oe(e,t,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Fe=null,Be=!1,Ve=null,Ge={onError:function(e){Le=!0,Fe=e}};function He(e,t,n,i,r,s,o,a,l){Le=!1,Fe=null,Oe.apply(Ge,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ue(e){if(We(e)!==e)throw Error(s(188))}function ze(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Ue(r),e;if(o===i)return Ue(r),t;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var qe=r.unstable_scheduleCallback,Ke=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,Qe=r.unstable_requestPaint,Ze=r.unstable_now,$e=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=dt(a):0!==(s&=o)&&(i=dt(s))}else 0!==(o=n&~r)?i=dt(o):0!==s&&(i=dt(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var Ct=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,St,Et,xt,At,Tt=!1,_t=[],Rt=null,Dt=null,Mt=null,Pt=new Map,It=new Map,Nt=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Lt(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=Cr(t))&&St(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ft(e){var t=yr(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=je(n)))return e.blockedOn=t,void At(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Cr(n))&&St(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);we=i,n.target.dispatchEvent(i),we=null,t.shift()}return!0}function Vt(e,t,n){Bt(e)&&n.delete(t)}function Gt(){Tt=!1,null!==Rt&&Bt(Rt)&&(Rt=null),null!==Dt&&Bt(Dt)&&(Dt=null),null!==Mt&&Bt(Mt)&&(Mt=null),Pt.forEach(Vt),It.forEach(Vt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Gt)))}function Wt(e){function t(t){return Ht(t,e)}if(0<_t.length){Ht(_t[0],e);for(var n=1;n<_t.length;n++){var i=_t[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Rt&&Ht(Rt,e),null!==Dt&&Ht(Dt,e),null!==Mt&&Ht(Mt,e),Pt.forEach(t),It.forEach(t),n=0;n<Nt.length;n++)(i=Nt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Nt.shift()}var jt=w.ReactCurrentBatchConfig,Ut=!0;function zt(e,t,n,i){var r=Ct,s=jt.transition;jt.transition=null;try{Ct=1,qt(e,t,n,i)}finally{Ct=r,jt.transition=s}}function Yt(e,t,n,i){var r=Ct,s=jt.transition;jt.transition=null;try{Ct=4,qt(e,t,n,i)}finally{Ct=r,jt.transition=s}}function qt(e,t,n,i){if(Ut){var r=Xt(e,t,n,i);if(null===r)Ui(e,t,i,Kt,n),Ot(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Rt=Lt(Rt,e,t,n,i,r),!0;case"dragenter":return Dt=Lt(Dt,e,t,n,i,r),!0;case"mouseover":return Mt=Lt(Mt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Pt.set(s,Lt(Pt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,It.set(s,Lt(It.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Ot(e,i),4&t&&-1<kt.indexOf(e)){for(;null!==r;){var s=Cr(r);if(null!==s&&bt(s),null===(s=Xt(e,t,n,i))&&Ui(e,t,i,Kt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Ui(e,t,i,null,n)}}var Kt=null;function Xt(e,t,n,i){if(Kt=null,null!==(e=yr(e=be(i))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=je(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Zt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,i=n.length,r="value"in Zt?Zt.value:Zt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=F({},cn,{view:0,detail:0}),hn=sn(dn),pn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),gn=sn(pn),fn=sn(F({},pn,{dataTransfer:0})),mn=sn(F({},dn,{relatedTarget:0})),vn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cn=sn(yn),wn=sn(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function An(){return xn}var Tn=F({},dn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=sn(Tn),Rn=sn(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=sn(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Mn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=sn(Pn),Nn=[9,13,27,32],kn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Fn=u&&(!kn||On&&8<On&&11>=On),Bn=String.fromCharCode(32),Vn=!1;function Gn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function zn(e,t,n,i){Te(i),0<(t=Yi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Yn=null,qn=null;function Kn(e){Bi(e,0)}function Xn(e){if(q(wr(e)))return e}function Qn(e,t){if("change"===e)return t}var Zn=!1;if(u){var $n;if(u){var Jn="oninput"in document;if(!Jn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Jn="function"===typeof ei.oninput}$n=Jn}else $n=!1;Zn=$n&&(!document.documentMode||9<document.documentMode)}function ti(){Yn&&(Yn.detachEvent("onpropertychange",ni),qn=Yn=null)}function ni(e){if("value"===e.propertyName&&Xn(qn)){var t=[];zn(t,qn,e,be(e)),Pe(Kn,t)}}function ii(e,t,n){"focusin"===e?(ti(),qn=n,(Yn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(qn)}function si(e,t){if("click"===e)return Xn(t)}function oi(e,t){if("input"===e||"change"===e)return Xn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var o=ui(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,vi=null,yi=null,Ci=!1;function wi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Ci||null==mi||mi!==K(i)||("selectionStart"in(i=mi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=Yi(vi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function bi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Si={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},Ei={},xi={};function Ai(e){if(Ei[e])return Ei[e];if(!Si[e])return e;var t,n=Si[e];for(t in n)if(n.hasOwnProperty(t)&&t in xi)return Ei[e]=n[t];return e}u&&(xi=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);var Ti=Ai("animationend"),_i=Ai("animationiteration"),Ri=Ai("animationstart"),Di=Ai("transitionend"),Mi=new Map,Pi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(e,t){Mi.set(e,t),l(t,[e])}for(var Ni=0;Ni<Pi.length;Ni++){var ki=Pi[Ni];Ii(ki.toLowerCase(),"on"+(ki[0].toUpperCase()+ki.slice(1)))}Ii(Ti,"onAnimationEnd"),Ii(_i,"onAnimationIteration"),Ii(Ri,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(Di,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Li=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function Fi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,a,l,c){if(He.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Fe;Le=!1,Fe=null,Be||(Be=!0,Ve=u)}}(i,t,void 0,e),e.currentTarget=null}function Bi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Fi(r,a,c),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Fi(r,a,c),s=l}}}if(Be)throw e=Ve,Be=!1,Ve=null,e}function Vi(e,t){var n=t[fr];void 0===n&&(n=t[fr]=new Set);var i=e+"__bubble";n.has(i)||(ji(t,e,2,!1),n.add(i))}function Gi(e,t,n){var i=0;t&&(i|=4),ji(n,e,i,t)}var Hi="_reactListening"+Math.random().toString(36).slice(2);function Wi(e){if(!e[Hi]){e[Hi]=!0,o.forEach((function(t){"selectionchange"!==t&&(Li.has(t)||Gi(t,!1,e),Gi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hi]||(t[Hi]=!0,Gi("selectionchange",!1,t))}}function ji(e,t,n,i){switch(Qt(t)){case 1:var r=zt;break;case 4:r=Yt;break;default:r=qt}n=r.bind(null,t,n,e),r=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Ui(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=yr(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue e}a=a.parentNode}}i=i.return}Pe((function(){var i=s,r=be(n),o=[];e:{var a=Mi.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case Ti:case _i:case Ri:l=vn;break;case Di:l=Mn;break;case"scroll":l=hn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=Cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Rn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var p,g=i;null!==g;){var f=(p=g).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Ie(g,h))&&u.push(zi(g,f,p)))),d)break;g=g.return}0<u.length&&(a=new l(a,c,null,n,r),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[gr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=gn,f="onMouseLeave",h="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(u=Rn,f="onPointerLeave",h="onPointerEnter",g="pointer"),d=null==l?a:wr(l),p=null==c?a:wr(c),(a=new u(f,g+"leave",l,n,r)).target=d,a.relatedTarget=p,f=null,yr(r)===i&&((u=new u(h,g+"enter",c,n,r)).target=p,u.relatedTarget=d,f=u),d=f,l&&c)e:{for(h=c,g=0,p=u=l;p;p=qi(p))g++;for(p=0,f=h;f;f=qi(f))p++;for(;0<g-p;)u=qi(u),g--;for(;0<p-g;)h=qi(h),p--;for(;g--;){if(u===h||null!==h&&u===h.alternate)break e;u=qi(u),h=qi(h)}u=null}else u=null;null!==l&&Ki(o,a,l,u,!1),null!==c&&null!==d&&Ki(o,d,c,u,!0)}if("select"===(l=(a=i?wr(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Qn;else if(Un(a))if(Zn)m=oi;else{m=ri;var v=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=si);switch(m&&(m=m(e,i))?zn(o,m,n,r):(v&&v(e,a,i),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=i?wr(i):window,e){case"focusin":(Un(v)||"true"===v.contentEditable)&&(mi=v,vi=i,yi=null);break;case"focusout":yi=vi=mi=null;break;case"mousedown":Ci=!0;break;case"contextmenu":case"mouseup":case"dragend":Ci=!1,wi(o,n,r);break;case"selectionchange":if(fi)break;case"keydown":case"keyup":wi(o,n,r)}var y;if(kn)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Wn?Gn(e,n)&&(C="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(C="onCompositionStart");C&&(Fn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==C?"onCompositionEnd"===C&&Wn&&(y=en()):($t="value"in(Zt=r)?Zt.value:Zt.textContent,Wn=!0)),0<(v=Yi(i,C)).length&&(C=new wn(C,e,null,n,r),o.push({event:C,listeners:v}),y?C.data=y:null!==(y=Hn(n))&&(C.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Bn);case"textInput":return(e=t.data)===Bn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!kn&&Gn(e,t)?(e=en(),Jt=$t=Zt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Yi(i,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=y))}Bi(o,t)}))}function zi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Ie(e,n))&&i.unshift(zi(e,s,r)),null!=(s=Ie(e,t))&&i.push(zi(e,s,r))),e=e.return}return i}function qi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ki(e,t,n,i,r){for(var s=t._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Ie(n,s))&&o.unshift(zi(n,l,a)):r||null!=(l=Ie(n,s))&&o.push(zi(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xi=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function Zi(e){return("string"===typeof e?e:""+e).replace(Xi,"\n").replace(Qi,"")}function $i(e,t,n){if(t=Zi(t),Zi(e)!==t&&n)throw Error(s(425))}function Ji(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Wt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Wt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,pr="__reactProps$"+dr,gr="__reactContainer$"+dr,fr="__reactEvents$"+dr,mr="__reactListeners$"+dr,vr="__reactHandles$"+dr;function yr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[hr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function Cr(e){return!(e=e[hr]||e[gr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function br(e){return e[pr]||null}var Sr=[],Er=-1;function xr(e){return{current:e}}function Ar(e){0>Er||(e.current=Sr[Er],Sr[Er]=null,Er--)}function Tr(e,t){Er++,Sr[Er]=e.current,e.current=t}var _r={},Rr=xr(_r),Dr=xr(!1),Mr=_r;function Pr(e,t){var n=e.type.contextTypes;if(!n)return _r;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ir(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Nr(){Ar(Dr),Ar(Rr)}function kr(e,t,n){if(Rr.current!==_r)throw Error(s(168));Tr(Rr,t),Tr(Dr,n)}function Or(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,j(e)||"Unknown",r));return F({},n,i)}function Lr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_r,Mr=Rr.current,Tr(Rr,e),Tr(Dr,Dr.current),!0}function Fr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Or(e,t,Mr),i.__reactInternalMemoizedMergedChildContext=e,Ar(Dr),Ar(Rr),Tr(Rr,e)):Ar(Dr),Tr(Dr,n)}var Br=null,Vr=!1,Gr=!1;function Hr(e){null===Br?Br=[e]:Br.push(e)}function Wr(){if(!Gr&&null!==Br){Gr=!0;var e=0,t=Ct;try{var n=Br;for(Ct=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Br=null,Vr=!1}catch(r){throw null!==Br&&(Br=Br.slice(e+1)),qe(Je,Wr),r}finally{Ct=t,Gr=!1}}return null}var jr=[],Ur=0,zr=null,Yr=0,qr=[],Kr=0,Xr=null,Qr=1,Zr="";function $r(e,t){jr[Ur++]=Yr,jr[Ur++]=zr,zr=e,Yr=t}function Jr(e,t,n){qr[Kr++]=Qr,qr[Kr++]=Zr,qr[Kr++]=Xr,Xr=e;var i=Qr;e=Zr;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var s=32-ot(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Qr=1<<32-ot(t)+r|n<<r|i,Zr=s+e}else Qr=1<<s|n<<r|i,Zr=e}function es(e){null!==e.return&&($r(e,1),Jr(e,1,0))}function ts(e){for(;e===zr;)zr=jr[--Ur],jr[Ur]=null,Yr=jr[--Ur],jr[Ur]=null;for(;e===Xr;)Xr=qr[--Kr],qr[Kr]=null,Zr=qr[--Kr],qr[Kr]=null,Qr=qr[--Kr],qr[Kr]=null}var ns=null,is=null,rs=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xr?{id:Qr,overflow:Zr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=is;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&as(e,t)?os(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!rs)return us(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw hs(),Error(s(418));for(;t;)os(e,t),t=cr(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=is;e;)e=cr(e.nextSibling)}function ps(){is=ns=null,rs=!1}function gs(e){null===ss?ss=[e]:ss.push(e)}var fs=w.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function Cs(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Nc(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Fc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===E?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===I&&ys(s)===t.type)?((i=r(t,n.props)).ref=ms(e,t,n),i.return=e,i):((i=kc(n.type,n.key,n.props,null,e.mode,i)).ref=ms(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,s){return null===t||7!==t.tag?((t=Oc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=kc(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case S:return(t=Bc(t,e.mode,n)).return=e,t;case I:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===r?c(e,t,n,i):null;case S:return n.key===r?u(e,t,n,i):null;case I:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||O(n))return null!==r?null:d(e,t,n,i,null);vs(e,n)}return null}function g(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case b:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case S:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case I:return g(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||O(i))return d(t,e=e.get(n)||null,i,r,null);vs(t,i)}return null}function f(r,s,a,l){for(var c=null,u=null,d=s,f=s=0,m=null;null!==d&&f<a.length;f++){d.index>f?(m=d,d=null):m=d.sibling;var v=p(r,d,a[f],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(r,d),s=o(v,s,f),null===u?c=v:u.sibling=v,u=v,d=m}if(f===a.length)return n(r,d),rs&&$r(r,f),c;if(null===d){for(;f<a.length;f++)null!==(d=h(r,a[f],l))&&(s=o(d,s,f),null===u?c=d:u.sibling=d,u=d);return rs&&$r(r,f),c}for(d=i(r,d);f<a.length;f++)null!==(m=g(d,r,f,a[f],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?f:m.key),s=o(m,s,f),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(r,e)})),rs&&$r(r,f),c}function m(r,a,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,f=a,m=a=0,v=null,y=l.next();null!==f&&!y.done;m++,y=l.next()){f.index>m?(v=f,f=null):v=f.sibling;var C=p(r,f,y.value,c);if(null===C){null===f&&(f=v);break}e&&f&&null===C.alternate&&t(r,f),a=o(C,a,m),null===d?u=C:d.sibling=C,d=C,f=v}if(y.done)return n(r,f),rs&&$r(r,m),u;if(null===f){for(;!y.done;m++,y=l.next())null!==(y=h(r,y.value,c))&&(a=o(y,a,m),null===d?u=y:d.sibling=y,d=y);return rs&&$r(r,m),u}for(f=i(r,f);!y.done;m++,y=l.next())null!==(y=g(f,r,m,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),a=o(y,a,m),null===d?u=y:d.sibling=y,d=y);return e&&f.forEach((function(e){return t(r,e)})),rs&&$r(r,m),u}return function e(i,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===E){if(7===u.tag){n(i,u.sibling),(s=r(u,o.props.children)).return=i,i=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&ys(c)===u.type){n(i,u.sibling),(s=r(u,o.props)).ref=ms(i,u,o),s.return=i,i=s;break e}n(i,u);break}t(i,u),u=u.sibling}o.type===E?((s=Oc(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=kc(o.type,o.key,o.props,null,i.mode,l)).ref=ms(i,s,o),l.return=i,i=l)}return a(i);case S:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=Bc(o,i.mode,l)).return=i,i=s}return a(i);case I:return e(i,s,(u=o._init)(o._payload),l)}if(te(o))return f(i,s,o,l);if(O(o))return m(i,s,o,l);vs(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=Fc(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var ws=Cs(!0),bs=Cs(!1),Ss=xr(null),Es=null,xs=null,As=null;function Ts(){As=xs=Es=null}function _s(e){var t=Ss.current;Ar(Ss),e._currentValue=t}function Rs(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ds(e,t){Es=e,As=xs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ca=!0),e.firstContext=null)}function Ms(e){var t=e._currentValue;if(As!==e)if(e={context:e,memoizedValue:t,next:null},null===xs){if(null===Es)throw Error(s(308));xs=e,Es.dependencies={lanes:0,firstContext:e}}else xs=xs.next=e;return t}var Ps=null;function Is(e){null===Ps?Ps=[e]:Ps.push(e)}function Ns(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Is(t)):(n.next=r.next,r.next=n),t.interleaved=n,ks(e,i)}function ks(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Os=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Rl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,ks(e,n)}return null===(r=i.interleaved)?(t.next=t,Is(i)):(t.next=r.next,r.next=t),i.interleaved=t,ks(e,n)}function Gs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Hs(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ws(e,t,n,i){var r=e.updateQueue;Os=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=r.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,p=a.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,f=a;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(g=f.payload)){d=g.call(p,d,h);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(h="function"===typeof(g=f.payload)?g.call(p,d,h):g)||void 0===h)break e;d=F({},d,h);break e;case 2:Os=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=h;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(h=a).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=d}}function js(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Us={},zs=xr(Us),Ys=xr(Us),qs=xr(Us);function Ks(e){if(e===Us)throw Error(s(174));return e}function Xs(e,t){switch(Tr(qs,t),Tr(Ys,e),Tr(zs,Us),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ar(zs),Tr(zs,t)}function Qs(){Ar(zs),Ar(Ys),Ar(qs)}function Zs(e){Ks(qs.current);var t=Ks(zs.current),n=le(t,e.type);t!==n&&(Tr(Ys,e),Tr(zs,n))}function $s(e){Ys.current===e&&(Ar(zs),Ar(Ys))}var Js=xr(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var io=w.ReactCurrentDispatcher,ro=w.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,po=0;function go(){throw Error(s(321))}function fo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function mo(e,t,n,i,r,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?Jo:ea,e=n(i,r),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,io.current=ta,e=n(i,r)}while(uo)}if(io.current=$o,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function Co(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function bo(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=ao,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((so&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=i):c=c.next=h,oo.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==o);null===c?a=i:c.next=l,ai(i,t.memoizedState)||(Ca=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,oo.lanes|=o,Ll|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);ai(o,t.memoizedState)||(Ca=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Eo(){}function xo(e,t){var n=oo,i=Co(),r=t(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,Ca=!0),i=i.queue,Lo(_o.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Po(9,To.bind(null,n,i,r,t),void 0,null),null===Dl)throw Error(s(349));0!==(30&so)||Ao(n,t,r)}return r}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,i){t.value=n,t.getSnapshot=i,Ro(t)&&Do(e)}function _o(e,t,n){return n((function(){Ro(t)&&Do(e)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Do(e){var t=ks(e,1);null!==t&&nc(t,e,1,-1)}function Mo(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[t.memoizedState,e]}function Po(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Io(){return Co().memoizedState}function No(e,t,n,i){var r=yo();oo.flags|=e,r.memoizedState=Po(1|t,n,void 0,void 0===i?null:i)}function ko(e,t,n,i){var r=Co();i=void 0===i?null:i;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==i&&fo(i,o.deps))return void(r.memoizedState=Po(t,n,s,i))}oo.flags|=e,r.memoizedState=Po(1|t,n,s,i)}function Oo(e,t){return No(8390656,8,e,t)}function Lo(e,t){return ko(2048,8,e,t)}function Fo(e,t){return ko(4,2,e,t)}function Bo(e,t){return ko(4,4,e,t)}function Vo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ko(4,4,Vo.bind(null,t,e),n)}function Ho(){}function Wo(e,t){var n=Co();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fo(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function jo(e,t){var n=Co();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fo(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Uo(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,Ca=!0),e.memoizedState=n):(ai(n,t)||(n=ft(),oo.lanes|=n,Ll|=n,e.baseState=!0),t)}function zo(e,t){var n=Ct;Ct=0!==n&&4>n?n:4,e(!0);var i=ro.transition;ro.transition={};try{e(!1),t()}finally{Ct=n,ro.transition=i}}function Yo(){return Co().memoizedState}function qo(e,t,n){var i=tc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Xo(e))Qo(t,n);else if(null!==(n=Ns(e,t,n,i))){nc(n,e,i,ec()),Zo(n,t,i)}}function Ko(e,t,n){var i=tc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xo(e))Qo(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=t.interleaved;return null===l?(r.next=r,Is(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Ns(e,t,r,i))&&(nc(n,e,i,r=ec()),Zo(n,t,i))}}function Xo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Qo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zo(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var $o={readContext:Ms,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},Jo={readContext:Ms,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Ms,useEffect:Oo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,No(4194308,4,Vo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return No(4194308,4,e,t)},useInsertionEffect:function(e,t){return No(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=yo();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=qo.bind(null,oo,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Mo,useDebugValue:Ho,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Mo(!1),t=e[0];return e=zo.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=oo,r=yo();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Dl)throw Error(s(349));0!==(30&so)||Ao(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Oo(_o.bind(null,i,o,e),[e]),i.flags|=2048,Po(9,To.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Dl.identifierPrefix;if(rs){var n=Zr;t=":"+t+"R"+(n=(Qr&~(1<<32-ot(Qr)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ms,useCallback:Wo,useContext:Ms,useEffect:Lo,useImperativeHandle:Go,useInsertionEffect:Fo,useLayoutEffect:Bo,useMemo:jo,useReducer:bo,useRef:Io,useState:function(){return bo(wo)},useDebugValue:Ho,useDeferredValue:function(e){return Uo(Co(),ao.memoizedState,e)},useTransition:function(){return[bo(wo)[0],Co().memoizedState]},useMutableSource:Eo,useSyncExternalStore:xo,useId:Yo,unstable_isNewReconciler:!1},ta={readContext:Ms,useCallback:Wo,useContext:Ms,useEffect:Lo,useImperativeHandle:Go,useInsertionEffect:Fo,useLayoutEffect:Bo,useMemo:jo,useReducer:So,useRef:Io,useState:function(){return So(wo)},useDebugValue:Ho,useDeferredValue:function(e){var t=Co();return null===ao?t.memoizedState=e:Uo(t,ao.memoizedState,e)},useTransition:function(){return[So(wo)[0],Co().memoizedState]},useMutableSource:Eo,useSyncExternalStore:xo,useId:Yo,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ia(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ra={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),s=Bs(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,r))&&(nc(t,e,r,i),Gs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),s=Bs(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,r))&&(nc(t,e,r,i),Gs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),r=Bs(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Vs(e,r,i))&&(nc(t,e,i,n),Gs(t,e,i))}};function sa(e,t,n,i,r,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function oa(e,t,n){var i=!1,r=_r,s=t.contextType;return"object"===typeof s&&null!==s?s=Ms(s):(r=Ir(t)?Mr:Rr.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Pr(e,r):_r),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ra,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ra.enqueueReplaceState(t,t.state,null)}function la(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Ms(s):(s=Ir(t)?Mr:Rr.current,r.context=Pr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ia(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ra.enqueueReplaceState(r,r.state,null),Ws(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",i=t;do{n+=H(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Bs(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Ul||(Ul=!0,zl=i),da(0,t)},n}function ga(e,t,n){(n=Bs(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof i&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fa(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ha;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Ac.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bs(-1,1)).tag=2,Vs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ya=w.ReactCurrentOwner,Ca=!1;function wa(e,t,n,i){t.child=null===e?bs(t,null,n,i):ws(t,e.child,n,i)}function ba(e,t,n,i,r){n=n.render;var s=t.ref;return Ds(t,r),i=mo(e,t,n,i,s,r),n=vo(),null===e||Ca?(rs&&n&&es(t),t.flags|=1,wa(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ua(e,t,r))}function Sa(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Ic(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=kc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return Ua(e,t,r)}return t.flags|=1,(e=Nc(s,i)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(Ca=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Ua(e,t,r);0!==(131072&e.flags)&&(Ca=!0)}}return Ta(e,t,n,i,r)}function xa(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(Nl,Il),Il|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tr(Nl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Tr(Nl,Il),Il|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Tr(Nl,Il),Il|=i;return wa(e,t,r,n),t.child}function Aa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,i,r){var s=Ir(n)?Mr:Rr.current;return s=Pr(t,s),Ds(t,r),n=mo(e,t,n,i,s,r),i=vo(),null===e||Ca?(rs&&i&&es(t),t.flags|=1,wa(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ua(e,t,r))}function _a(e,t,n,i,r){if(Ir(n)){var s=!0;Lr(t)}else s=!1;if(Ds(t,r),null===t.stateNode)ja(e,t),oa(t,n,i),la(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ms(c):c=Pr(t,c=Ir(n)?Mr:Rr.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==c)&&aa(t,o,i,c),Os=!1;var h=t.memoizedState;o.state=h,Ws(t,i,o,r),l=t.memoizedState,a!==i||h!==l||Dr.current||Os?("function"===typeof u&&(ia(t,n,u,i),l=t.memoizedState),(a=Os||sa(t,n,a,i,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ms(l):l=Pr(t,l=Ir(n)?Mr:Rr.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,o,i,l),Os=!1,h=t.memoizedState,o.state=h,Ws(t,i,o,r);var g=t.memoizedState;a!==d||h!==g||Dr.current||Os?("function"===typeof p&&(ia(t,n,p,i),g=t.memoizedState),(c=Os||sa(t,n,c,i,h,g,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,g,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,g,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Ra(e,t,n,i,s,r)}function Ra(e,t,n,i,r,s){Aa(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&Fr(t,n,!1),Ua(e,t,s);i=t.stateNode,ya.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,a,s)):wa(e,t,a,s),t.memoizedState=i.state,r&&Fr(t,n,!0),t.child}function Da(e){var t=e.stateNode;t.pendingContext?kr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&kr(0,t.context,!1),Xs(e,t.containerInfo)}function Ma(e,t,n,i,r){return ps(),gs(r),t.flags|=256,wa(e,t,n,i),t.child}var Pa,Ia,Na,ka,Oa={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var i,r=t.pendingProps,o=Js.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Tr(Js,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Lc(l,r,0,null),e=Oc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(n),t.memoizedState=Oa,e):Ba(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,i=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=Lc({mode:"visible",children:i.children},r,0,null),(o=Oc(o,r,a,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&ws(t,e.child,null,a),t.child.memoizedState=La(a),t.memoizedState=Oa,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Va(e,t,a,i=ua(o=Error(s(419)),i,void 0))}if(l=0!==(a&e.childLanes),Ca||l){if(null!==(i=Dl)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,ks(e,r),nc(i,e,r,-1))}return fc(),Va(e,t,a,i=ua(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(qr[Kr++]=Qr,qr[Kr++]=Zr,qr[Kr++]=Xr,Qr=e.id,Zr=e.overflow,Xr=t),t=Ba(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,o,n);if(a){a=r.fallback,l=t.mode,i=(o=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Nc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=Nc(i,a):(a=Oc(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?La(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Oa,r}return e=(a=e.child).sibling,r=Nc(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ba(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,i){return null!==i&&gs(i),ws(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ga(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Rs(e.return,t,n)}function Ha(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Wa(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(wa(e,t,i.children,n),0!==(2&(i=Js.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ga(e,n,t);else if(19===e.tag)Ga(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Tr(Js,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Ha(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===eo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Ha(t,!0,n,null,s);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ja(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ua(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Nc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function za(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ya(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function qa(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(t),null;case 1:case 17:return Ir(t.type)&&Nr(),Ya(t),null;case 3:return i=t.stateNode,Qs(),Ar(Dr),Ar(Rr),no(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Ia(e,t),Ya(t),null;case 5:$s(t);var r=Ks(qs.current);if(n=t.type,null!==e&&null!=t.stateNode)Na(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Ya(t),null}if(e=Ks(zs.current),ds(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[hr]=t,i[pr]=o,e=0!==(1&t.mode),n){case"dialog":Vi("cancel",i),Vi("close",i);break;case"iframe":case"object":case"embed":Vi("load",i);break;case"video":case"audio":for(r=0;r<Oi.length;r++)Vi(Oi[r],i);break;case"source":Vi("error",i);break;case"img":case"image":case"link":Vi("error",i),Vi("load",i);break;case"details":Vi("toggle",i);break;case"input":Q(i,o),Vi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Vi("invalid",i);break;case"textarea":re(i,o),Vi("invalid",i)}for(var l in ye(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&$i(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$i(i.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vi("scroll",i)}switch(n){case"input":Y(i),J(i,o,!0);break;case"textarea":Y(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Ji)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hr]=t,e[pr]=i,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ce(n,i),n){case"dialog":Vi("cancel",e),Vi("close",e),r=i;break;case"iframe":case"object":case"embed":Vi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Oi.length;r++)Vi(Oi[r],e);r=i;break;case"source":Vi("error",e),r=i;break;case"img":case"image":case"link":Vi("error",e),Vi("load",e),r=i;break;case"details":Vi("toggle",e),r=i;break;case"input":Q(e,i),r=X(e,i),Vi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=F({},i,{value:void 0}),Vi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Vi("invalid",e)}for(o in ye(n,r),c=r)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Vi("scroll",e):null!=u&&C(e,o,u,l))}switch(n){case"input":Y(e),J(e,i,!1);break;case"textarea":Y(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+U(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ya(t),null;case 6:if(e&&null!=t.stateNode)ka(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Ks(qs.current),Ks(zs.current),ds(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(o=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$i(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$i(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return Ya(t),null;case 13:if(Ar(Js),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,o=!1;else if(o=ds(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[hr]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ya(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Js.current)?0===kl&&(kl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Ya(t),null);case 4:return Qs(),Ia(e,t),null===e&&Wi(t.stateNode.containerInfo),Ya(t),null;case 10:return _s(t.type._context),Ya(t),null;case 19:if(Ar(Js),null===(o=t.memoizedState))return Ya(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)za(o,!1);else{if(0!==kl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,za(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Tr(Js,1&Js.current|2),t.child}e=e.sibling}null!==o.tail&&Ze()>Wl&&(t.flags|=128,i=!0,za(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=eo(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),za(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!rs)return Ya(t),null}else 2*Ze()-o.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,i=!0,za(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,n=Js.current,Tr(Js,i?1&n|2:1&n),t):(Ya(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Ya(t),6&t.subtreeFlags&&(t.flags|=8192)):Ya(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ka(e,t){switch(ts(t),t.tag){case 1:return Ir(t.type)&&Nr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),Ar(Dr),Ar(Rr),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $s(t),null;case 13:if(Ar(Js),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ar(Js),null;case 4:return Qs(),null;case 10:return _s(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ia=function(){},Na=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Ks(zs.current);var s,o=null;switch(n){case"input":r=X(e,r),i=X(e,i),o=[];break;case"select":r=F({},r,{value:void 0}),i=F({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Ji)}for(u in ye(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vi("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},ka=function(e,t,n,i){n!==i&&(t.flags|=4)};var Xa=!1,Qa=!1,Za="function"===typeof WeakSet?WeakSet:Set,$a=null;function Ja(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){xc(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){xc(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(t,n,s)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[pr],delete t[fr],delete t[mr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ji));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:Qa||Ja(n,t);case 6:var i=ul,r=dl;ul=null,hl(e,t,n),dl=r,null!==(ul=i)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Wt(e)):lr(ul,n.stateNode));break;case 4:i=ul,r=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=i,dl=r;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),r=r.next}while(r!==i)}hl(e,t,n);break;case 1:if(!Qa&&(Ja(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){xc(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qa=(i=Qa)||null!==n.memoizedState,hl(e,t,n),Qa=i):hl(e,t,n);break;default:hl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var i=Rc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));pl(o,a,r),ul=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){xc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),vl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(m){xc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){xc(e,e.return,m)}}break;case 1:fl(t,e),vl(e),512&i&&null!==n&&Ja(n,n.return);break;case 5:if(fl(t,e),vl(e),512&i&&null!==n&&Ja(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(m){xc(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Z(r,o),Ce(l,a);var u=Ce(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?me(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):C(r,d,h,u)}switch(l){case"input":$(r,o);break;case"textarea":se(r,o);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var g=o.value;null!=g?ne(r,!!o.multiple,g,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[pr]=o}catch(m){xc(e,e.return,m)}}break;case 6:if(fl(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(m){xc(e,e.return,m)}}break;case 3:if(fl(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(m){xc(e,e.return,m)}break;case 4:default:fl(t,e),vl(e);break;case 13:fl(t,e),vl(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Hl=Ze())),4&i&&gl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qa=(u=Qa)||d,fl(t,e),Qa=u):fl(t,e),vl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for($a=e,d=e.child;null!==d;){for(h=$a=d;null!==$a;){switch(g=(p=$a).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Ja(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){i=p,n=p.return;try{t=i,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){xc(i,n,m)}}break;case 5:Ja(p,p.return);break;case 22:if(null!==p.memoizedState){bl(h);continue}}null!==g?(g.return=p,$a=g):bl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,u?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",a))}catch(m){xc(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){xc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),vl(e),4&i&&gl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),cl(e,al(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){xc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){$a=e,Cl(e,t,n)}function Cl(e,t,n){for(var i=0!==(1&e.mode);null!==$a;){var r=$a,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Xa;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=Xa;var c=Qa;if(Xa=o,(Qa=l)&&!c)for($a=r;null!==$a;)l=(o=$a).child,22===o.tag&&null!==o.memoizedState?Sl(r):null!==l?(l.return=o,$a=l):Sl(r);for(;null!==s;)$a=s,Cl(s,t,n),s=s.sibling;$a=r,Xa=a,Qa=c}wl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,$a=s):wl(e)}}function wl(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qa||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Qa)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&js(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}js(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(s(163))}Qa||512&t.flags&&rl(t)}catch(p){xc(t,t.return,p)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function bl(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function Sl(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){xc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){xc(t,r,l)}}var s=t.return;try{rl(t)}catch(l){xc(t,s,l)}break;case 5:var o=t.return;try{rl(t)}catch(l){xc(t,o,l)}}}catch(l){xc(t,t.return,l)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var El,xl=Math.ceil,Al=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,_l=w.ReactCurrentBatchConfig,Rl=0,Dl=null,Ml=null,Pl=0,Il=0,Nl=xr(0),kl=0,Ol=null,Ll=0,Fl=0,Bl=0,Vl=null,Gl=null,Hl=0,Wl=1/0,jl=null,Ul=!1,zl=null,Yl=null,ql=!1,Kl=null,Xl=0,Ql=0,Zl=null,$l=-1,Jl=0;function ec(){return 0!==(6&Rl)?Ze():-1!==$l?$l:$l=Ze()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Rl)&&0!==Pl?Pl&-Pl:null!==fs.transition?(0===Jl&&(Jl=ft()),Jl):0!==(e=Ct)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,i){if(50<Ql)throw Ql=0,Zl=null,Error(s(185));vt(e,n,i),0!==(2&Rl)&&e===Dl||(e===Dl&&(0===(2&Rl)&&(Fl|=n),4===kl&&ac(e,Pl)),ic(e,i),1===n&&0===Rl&&0===(1&t.mode)&&(Wl=Ze()+500,Vr&&Wr()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=pt(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var i=ht(e,e===Dl?Pl:0);if(0===i)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Vr=!0,Hr(e)}(lc.bind(null,e)):Hr(lc.bind(null,e)),or((function(){0===(6&Rl)&&Wr()})),n=null;else{switch(wt(i)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Dc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if($l=-1,Jl=0,0!==(6&Rl))throw Error(s(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var i=ht(e,e===Dl?Pl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=mc(e,i);else{t=i;var r=Rl;Rl|=2;var o=gc();for(Dl===e&&Pl===t||(jl=null,Wl=Ze()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Ts(),Al.current=o,Rl=r,null!==Ml?t=0:(Dl=null,Pl=0,t=kl)}if(0!==t){if(2===t&&(0!==(r=gt(e))&&(i=r,t=sc(e,r))),1===t)throw n=Ol,hc(e,0),ac(e,i),ic(e,Ze()),n;if(6===t)ac(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=mc(e,i))&&(0!==(o=gt(e))&&(i=o,t=sc(e,o))),1===t))throw n=Ol,hc(e,0),ac(e,i),ic(e,Ze()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:bc(e,Gl,jl);break;case 3:if(ac(e,i),(130023424&i)===i&&10<(t=Hl+500-Ze())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(bc.bind(null,e,Gl,jl),t);break}bc(e,Gl,jl);break;case 4:if(ac(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-ot(i);o=1<<a,(a=t[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=Ze()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*xl(i/1960))-i)){e.timeoutHandle=ir(bc.bind(null,e,Gl,jl),i);break}bc(e,Gl,jl);break;default:throw Error(s(329))}}}return ic(e,Ze()),e.callbackNode===n?rc.bind(null,e):null}function sc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Gl,Gl=n,null!==t&&oc(t)),e}function oc(e){null===Gl?Gl=e:Gl.push.apply(Gl,e)}function ac(e,t){for(t&=~Bl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!==(6&Rl))throw Error(s(327));Sc();var t=ht(e,0);if(0===(1&t))return ic(e,Ze()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var i=gt(e);0!==i&&(t=i,n=sc(e,i))}if(1===n)throw n=Ol,hc(e,0),ac(e,t),ic(e,Ze()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Gl,jl),ic(e,Ze()),null}function cc(e,t){var n=Rl;Rl|=1;try{return e(t)}finally{0===(Rl=n)&&(Wl=Ze()+500,Vr&&Wr())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Rl)&&Sc();var t=Rl;Rl|=1;var n=_l.transition,i=Ct;try{if(_l.transition=null,Ct=1,e)return e()}finally{Ct=i,_l.transition=n,0===(6&(Rl=t))&&Wr()}}function dc(){Il=Nl.current,Ar(Nl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Ml)for(n=Ml.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Nr();break;case 3:Qs(),Ar(Dr),Ar(Rr),no();break;case 5:$s(i);break;case 4:Qs();break;case 13:case 19:Ar(Js);break;case 10:_s(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Dl=e,Ml=e=Nc(e.current,null),Pl=Il=t,kl=0,Ol=null,Bl=Fl=Ll=0,Gl=Vl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(i=(n=Ps[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}Ps=null}return e}function pc(e,t){for(;;){var n=Ml;try{if(Ts(),io.current=$o,co){for(var i=oo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Tl.current=null,null===n||null===n.return){kl=1,Ol=t,Ml=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=ma(a);if(null!==g){g.flags&=-257,va(g,a,l,0,t),1&g.mode&&fa(o,u,t),c=u;var f=(t=g).updateQueue;if(null===f){var m=new Set;m.add(c),t.updateQueue=m}else f.add(c);break e}if(0===(1&t)){fa(o,u,t),fc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var v=ma(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),gs(ca(c,l));break e}}o=c=ca(c,l),4!==kl&&(kl=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Hs(o,pa(0,c,t));break e;case 1:l=c;var y=o.type,C=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==C&&"function"===typeof C.componentDidCatch&&(null===Yl||!Yl.has(C)))){o.flags|=65536,t&=-t,o.lanes|=t,Hs(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function gc(){var e=Al.current;return Al.current=$o,null===e?$o:e}function fc(){0!==kl&&3!==kl&&2!==kl||(kl=4),null===Dl||0===(268435455&Ll)&&0===(268435455&Fl)||ac(Dl,Pl)}function mc(e,t){var n=Rl;Rl|=2;var i=gc();for(Dl===e&&Pl===t||(jl=null,hc(e,t));;)try{vc();break}catch(r){pc(e,r)}if(Ts(),Rl=n,Al.current=i,null!==Ml)throw Error(s(261));return Dl=null,Pl=0,kl}function vc(){for(;null!==Ml;)Cc(Ml)}function yc(){for(;null!==Ml&&!Xe();)Cc(Ml)}function Cc(e){var t=El(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?wc(e):Ml=t,Tl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qa(n,t,Il)))return void(Ml=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(Ml=n);if(null===e)return kl=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===kl&&(kl=5)}function bc(e,t,n){var i=Ct,r=_l.transition;try{_l.transition=null,Ct=1,function(e,t,n,i){do{Sc()}while(null!==Kl);if(0!==(6&Rl))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,o),e===Dl&&(Ml=Dl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Dc(tt,(function(){return Sc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=_l.transition,_l.transition=null;var a=Ct;Ct=1;var l=Rl;Rl|=4,Tl.current=null,function(e,t){if(er=Ut,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var g;h!==n||0!==r&&3!==h.nodeType||(l=a+r),h!==o||0!==i&&3!==h.nodeType||(c=a+i),3===h.nodeType&&(a+=h.nodeValue.length),null!==(g=h.firstChild);)p=h,h=g;for(;;){if(h===e)break t;if(p===n&&++u===r&&(l=a),p===o&&++d===i&&(c=a),null!==(g=h.nextSibling))break;p=(h=p).parentNode}h=g}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ut=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,v=f.memoizedState,y=t.stateNode,C=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:na(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(b){xc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}f=tl,tl=!1}(e,n),ml(n,e),gi(tr),Ut=!!er,tr=er=null,e.current=n,yl(n,e,r),Qe(),Rl=l,Ct=a,_l.transition=o}else e.current=n;if(ql&&(ql=!1,Kl=e,Xl=r),o=e.pendingLanes,0===o&&(Yl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ze()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Ul)throw Ul=!1,e=zl,zl=null,e;0!==(1&Xl)&&0!==e.tag&&Sc(),o=e.pendingLanes,0!==(1&o)?e===Zl?Ql++:(Ql=0,Zl=e):Ql=0,Wr()}(e,t,n,i)}finally{_l.transition=r,Ct=i}return null}function Sc(){if(null!==Kl){var e=wt(Xl),t=_l.transition,n=Ct;try{if(_l.transition=null,Ct=16>e?16:e,null===Kl)var i=!1;else{if(e=Kl,Kl=null,Xl=0,0!==(6&Rl))throw Error(s(331));var r=Rl;for(Rl|=4,$a=e.current;null!==$a;){var o=$a,a=o.child;if(0!==(16&$a.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($a=u;null!==$a;){var d=$a;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var h=d.child;if(null!==h)h.return=d,$a=h;else for(;null!==$a;){var p=(d=$a).sibling,g=d.return;if(sl(d),d===u){$a=null;break}if(null!==p){p.return=g,$a=p;break}$a=g}}}var f=o.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}$a=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else e:for(;null!==$a;){if(0!==(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,$a=y;break e}$a=o.return}}var C=e.current;for($a=C;null!==$a;){var w=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,$a=w;else e:for(a=C;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){xc(l,l.return,S)}if(l===a){$a=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,$a=b;break e}$a=l.return}}if(Rl=r,Wr(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(S){}i=!0}return i}finally{Ct=n,_l.transition=t}}return!1}function Ec(e,t,n){e=Vs(e,t=pa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ic(e,t))}function xc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Yl||!Yl.has(i))){t=Vs(t,e=ga(t,e=ca(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Ac(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Dl===e&&(Pl&n)===n&&(4===kl||3===kl&&(130023424&Pl)===Pl&&500>Ze()-Hl?hc(e,0):Bl|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=ks(e,t))&&(vt(e,t,n),ic(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Rc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Tc(e,n)}function Dc(e,t){return qe(e,t)}function Mc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,i){return new Mc(e,t,n,i)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function kc(e,t,n,i,r,o){var a=2;if(i=e,"function"===typeof e)Ic(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Oc(n.children,r,o,t);case x:a=8,r|=8;break;case A:return(e=Pc(12,n,t,2|r)).elementType=A,e.lanes=o,e;case D:return(e=Pc(13,n,t,r)).elementType=D,e.lanes=o,e;case M:return(e=Pc(19,n,t,r)).elementType=M,e.lanes=o,e;case N:return Lc(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case _:a=9;break e;case R:a=11;break e;case P:a=14;break e;case I:a=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Oc(e,t,n,i){return(e=Pc(7,e,i,t)).lanes=n,e}function Lc(e,t,n,i){return(e=Pc(22,e,i,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Gc(e,t,n,i,r,s,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Hc(e){if(!e)return _r;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ir(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ir(n))return Or(e,n,t)}return t}function Wc(e,t,n,i,r,s,o,a,l){return(e=Gc(n,i,!0,e,0,s,0,a,l)).context=Hc(null),n=e.current,(s=Bs(i=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,Vs(n,s,r),e.current.lanes=r,vt(e,r,i),ic(e,i),e}function jc(e,t,n,i){var r=t.current,s=ec(),o=tc(r);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bs(s,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Vs(r,t,o))&&(nc(e,r,o,s),Gs(e,r,o)),o}function Uc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function zc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){zc(e,t),(e=e.alternate)&&zc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Dr.current)Ca=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ca=!1,function(e,t,n){switch(t.tag){case 3:Da(t),ps();break;case 5:Zs(t);break;case 1:Ir(t.type)&&Lr(t);break;case 4:Xs(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Tr(Ss,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Tr(Js,1&Js.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Tr(Js,1&Js.current),null!==(e=Ua(e,t,n))?e.sibling:null);Tr(Js,1&Js.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Wa(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr(Js,Js.current),i)break;return null;case 22:case 23:return t.lanes=0,xa(e,t,n)}return Ua(e,t,n)}(e,t,n);Ca=0!==(131072&e.flags)}else Ca=!1,rs&&0!==(1048576&t.flags)&&Jr(t,Yr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;ja(e,t),e=t.pendingProps;var r=Pr(t,Rr.current);Ds(t,n),r=mo(null,t,i,e,r,n);var o=vo();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ir(i)?(o=!0,Lr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ls(t),r.updater=ra,t.stateNode=r,r._reactInternals=t,la(t,i,e,n),t=Ra(null,t,i,!0,o,n)):(t.tag=0,rs&&o&&es(t),wa(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(ja(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Ic(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===R)return 11;if(e===P)return 14}return 2}(i),e=na(i,e),r){case 0:t=Ta(null,t,i,e,n);break e;case 1:t=_a(null,t,i,e,n);break e;case 11:t=ba(null,t,i,e,n);break e;case 14:t=Sa(null,t,i,na(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ta(e,t,i,r=t.elementType===i?r:na(i,r),n);case 1:return i=t.type,r=t.pendingProps,_a(e,t,i,r=t.elementType===i?r:na(i,r),n);case 3:e:{if(Da(t),null===e)throw Error(s(387));i=t.pendingProps,r=(o=t.memoizedState).element,Fs(e,t),Ws(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ma(e,t,i,n,r=ca(Error(s(423)),t));break e}if(i!==r){t=Ma(e,t,i,n,r=ca(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=bs(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),i===r){t=Ua(e,t,n);break e}wa(e,t,i,n)}t=t.child}return t;case 5:return Zs(t),null===e&&cs(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(t.flags|=32),Aa(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Fa(e,t,n);case 4:return Xs(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ws(t,null,i,n):wa(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,ba(e,t,i,r=t.elementType===i?r:na(i,r),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,Tr(Ss,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Dr.current){t=Ua(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=Bs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Rs(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Rs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ds(t,n),i=i(r=Ms(r)),t.flags|=1,wa(e,t,i,n),t.child;case 14:return r=na(i=t.type,t.pendingProps),Sa(e,t,i,r=na(i.type,r),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:na(i,r),ja(e,t),t.tag=1,Ir(i)?(e=!0,Lr(t)):e=!1,Ds(t,n),oa(t,i,r),la(t,i,r,n),Ra(null,t,i,!0,e,n);case 19:return Wa(e,t,n);case 22:return xa(e,t,n)}throw Error(s(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Jc(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var e=Uc(o);a.call(e)}}jc(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Uc(o);s.call(e)}}var o=Wc(t,i,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[gr]=o.current,Wi(8===e.nodeType?e.parentNode:e),uc(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Uc(l);a.call(e)}}var l=Gc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[gr]=l.current,Wi(8===e.nodeType?e.parentNode:e),uc((function(){jc(t,l,n,i)})),l}(n,t,e,r,i);return Uc(o)}Xc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));jc(e,t,null,null)},Xc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){jc(null,e,null,null)})),t[gr]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Ze()),0===(6&Rl)&&(Wl=Ze()+500,Wr()))}break;case 13:uc((function(){var t=ks(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Yc(e,1)}},St=function(e){if(13===e.tag){var t=ks(e,134217728);if(null!==t)nc(t,e,134217728,ec());Yc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=ks(e,t);if(null!==n)nc(n,e,t,ec());Yc(e,t)}},xt=function(){return Ct},At=function(e,t){var n=Ct;try{return Ct=e,t()}finally{Ct=n}},Se=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=br(i);if(!r)throw Error(s(90));q(i),$(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Re=cc,De=uc;var eu={usingClientEntryPoint:!1,Events:[Cr,wr,br,Te,_e,cc]},tu={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ze(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{rt=iu.inject(nu),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(s(299));var n=!1,i="",r=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Gc(e,1,!1,null,0,n,0,i,r),e[gr]=t.current,Wi(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=ze(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,r,0,o,a),e[gr]=t.current,Wi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Xc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[gr]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Jc(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},6258:(e,t,n)=>{"use strict";var i=n(4473);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},4473:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4223)},3200:(e,t,n)=>{"use strict";var i,r;i=n(4793),r=n(3623),i.version,i.renderToString,t.qV=i.renderToStaticMarkup,i.renderToNodeStream,i.renderToStaticNodeStream,r.renderToReadableStream},2363:e=>{"use strict";var t=Array.isArray,n=Object.keys,i=Object.prototype.hasOwnProperty,r="undefined"!==typeof Element;function s(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){var a,l,c,u=t(e),d=t(o);if(u&&d){if((l=e.length)!=o.length)return!1;for(a=l;0!==a--;)if(!s(e[a],o[a]))return!1;return!0}if(u!=d)return!1;var h=e instanceof Date,p=o instanceof Date;if(h!=p)return!1;if(h&&p)return e.getTime()==o.getTime();var g=e instanceof RegExp,f=o instanceof RegExp;if(g!=f)return!1;if(g&&f)return e.toString()==o.toString();var m=n(e);if((l=m.length)!==n(o).length)return!1;for(a=l;0!==a--;)if(!i.call(o,m[a]))return!1;if(r&&e instanceof Element&&o instanceof Element)return e===o;for(a=l;0!==a--;)if(("_owner"!==(c=m[a])||!e.$$typeof)&&!s(e[c],o[c]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return s(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},7957:e=>{var t="undefined"!==typeof Element,n="function"===typeof Map,i="function"===typeof Set,r="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function s(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var a,l,c,u;if(Array.isArray(e)){if((a=e.length)!=o.length)return!1;for(l=a;0!==l--;)if(!s(e[l],o[l]))return!1;return!0}if(n&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!s(l.value[1],o.get(l.value[0])))return!1;return!0}if(i&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((a=e.length)!=o.length)return!1;for(l=a;0!==l--;)if(e[l]!==o[l])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof o.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof o.toString)return e.toString()===o.toString();if((a=(c=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(l=a;0!==l--;)if(!Object.prototype.hasOwnProperty.call(o,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=a;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!s(e[c[l]],o[c[l]]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return s(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},5868:(e,t,n)=>{"use strict";n.r(t),n.d(t,{IGNORE_CLASS_NAME:()=>g,default:()=>m});var i=n(4628),r=n(4473);function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,n){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(n):e.classList.contains(n))}var l,c,u=(void 0===l&&(l=0),function(){return++l}),d={},h={},p=["touchstart","touchmove"],g="ignore-react-onclickoutside";function f(e,t){var n={};return-1!==p.indexOf(t)&&c&&(n.passive=!e.props.preventDefault),n}const m=function(e,t){var n,l,p=e.displayName||e.name||"Component";return l=n=function(n){var l,g;function m(e){var i;return(i=n.call(this,e)||this).__outsideClickHandler=function(e){if("function"!==typeof i.__clickOutsideHandlerProp){var t=i.getInstance();if("function"!==typeof t.props.handleClickOutside){if("function"!==typeof t.handleClickOutside)throw new Error("WrappedComponent: "+p+" lacks a handleClickOutside(event) function for processing outside click events.");t.handleClickOutside(e)}else t.props.handleClickOutside(e)}else i.__clickOutsideHandlerProp(e)},i.__getComponentNode=function(){var e=i.getInstance();return t&&"function"===typeof t.setClickOutsideRef?t.setClickOutsideRef()(e):"function"===typeof e.setClickOutsideRef?e.setClickOutsideRef():(0,r.findDOMNode)(e)},i.enableOnClickOutside=function(){if("undefined"!==typeof document&&!h[i._uid]){"undefined"===typeof c&&(c=function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),e}}()),h[i._uid]=!0;var e=i.props.eventTypes;e.forEach||(e=[e]),d[i._uid]=function(e){var t;null!==i.componentNode&&(i.initTimeStamp>e.timeStamp||(i.props.preventDefault&&e.preventDefault(),i.props.stopPropagation&&e.stopPropagation(),i.props.excludeScrollbar&&(t=e,document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY)||function(e,t,n){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&a(e,t,n))return!0;e=e.parentNode||e.host}return e}(e.composed&&e.composedPath&&e.composedPath().shift()||e.target,i.componentNode,i.props.outsideClickIgnoreClass)===document&&i.__outsideClickHandler(e)))},e.forEach((function(e){document.addEventListener(e,d[i._uid],f(o(i),e))}))}},i.disableOnClickOutside=function(){delete h[i._uid];var e=d[i._uid];if(e&&"undefined"!==typeof document){var t=i.props.eventTypes;t.forEach||(t=[t]),t.forEach((function(t){return document.removeEventListener(t,e,f(o(i),t))})),delete d[i._uid]}},i.getRef=function(e){return i.instanceRef=e},i._uid=u(),i.initTimeStamp=performance.now(),i}g=n,(l=m).prototype=Object.create(g.prototype),l.prototype.constructor=l,s(l,g);var v=m.prototype;return v.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},v.componentDidMount=function(){if("undefined"!==typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"===typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!==typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent: "+p+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),this.props.disableOnClickOutside||this.enableOnClickOutside()}},v.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},v.componentWillUnmount=function(){this.disableOnClickOutside()},v.render=function(){var t=this.props;t.excludeScrollbar;var n=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(t,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,(0,i.createElement)(e,n)},m}(i.Component),n.displayName="OnClickOutside("+p+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:g,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return e.getClass?e.getClass():e},l}},4868:(e,t,n)=>{"use strict";var i=n(4628),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},5455:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}function y(){}function C(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=C.prototype=new y;w.constructor=C,f(w,v.prototype),w.isPureReactComponent=!0;var b=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,i){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,r)&&!x.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function D(e,t,r,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===s?"."+R(l,0):s,b(o)?(r="",null!=e&&(r=e.replace(_,"$&/")+"/"),D(o,t,r,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(_,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+R(a=e[c],c);l+=D(a,t,r,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=D(a=a.value,t,r,u=s+R(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function M(e,t,n){if(null==e)return e;var i=[],r=0;return D(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},N={transition:null},k={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:N,ReactCurrentOwner:E};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=o,t.PureComponent=C,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,t.act=O,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=f({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!x.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},4628:(e,t,n)=>{"use strict";e.exports=n(5455)},1864:(e,t,n)=>{"use strict";e.exports=n(4868)},3175:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=function(e){var t=(0,r.default)(e);return{getItem:function(e){return new Promise((function(n,i){n(t.getItem(e))}))},setItem:function(e,n){return new Promise((function(i,r){i(t.setItem(e,n))}))},removeItem:function(e){return new Promise((function(n,i){n(t.removeItem(e))}))}}};var i,r=(i=n(7769))&&i.__esModule?i:{default:i}},7769:(e,t)=>{"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(){}t.__esModule=!0,t.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"===typeof self?"undefined":n(self))||!(e in self))return!1;try{var t=self[e],i="redux-persist ".concat(e," test");t.setItem(i,"test"),t.getItem(i),t.removeItem(i)}catch(r){return!1}return!0}(t)?self[t]:r};var r={getItem:i,setItem:i,removeItem:i}},8602:(e,t,n)=>{"use strict";var i;t.A=void 0;var r=(0,((i=n(3175))&&i.__esModule?i:{default:i}).default)("local");t.A=r},5407:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,g=!1,f=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,C="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function b(e){if(m=!1,w(e),!f)if(null!==i(c))f=!0,N(S);else{var t=i(u);null!==t&&k(b,t.startTime-e)}}function S(e,n){f=!1,m&&(m=!1,y(T),T=-1),g=!0;var s=p;try{for(w(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!D());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===i(c)&&r(c),w(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&k(b,d.startTime-n),l=!1}return l}finally{h=null,p=s,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,x=!1,A=null,T=-1,_=5,R=-1;function D(){return!(t.unstable_now()-R<_)}function M(){if(null!==A){var e=t.unstable_now();R=e;var n=!0;try{n=A(!0,e)}finally{n?E():(x=!1,A=null)}}else x=!1}if("function"===typeof C)E=function(){C(M)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,I=P.port2;P.port1.onmessage=M,E=function(){I.postMessage(null)}}else E=function(){v(M,0)};function N(e){A=e,x||(x=!0,E())}function k(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||g||(f=!0,N(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(m?(y(T),T=-1):m=!0,k(b,s-o))):(e.sortIndex=a,n(c,e),f||g||(f=!0,N(S))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},4950:(e,t,n)=>{"use strict";e.exports=n(5407)},5289:e=>{e.exports=function(e,t,n,i){var r=n?n.call(i,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var c=s[l];if(!a(c))return!1;var u=e[c],d=t[c];if(!1===(r=n?n.call(i,u,d,c):void 0)||void 0===r&&u!==d)return!1}return!0}},8666:e=>{const t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,n=e=>e.match(t)||[],i=e=>e[0].toUpperCase()+e.slice(1),r=(e,t)=>n(e).join(t).toLowerCase(),s=e=>n(e).reduce(((e,t)=>"".concat(e).concat(e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase())),"");e.exports={words:n,upperFirst:i,camelCase:s,pascalCase:e=>i(s(e)),snakeCase:e=>r(e,"_"),kebabCase:e=>r(e,"-"),sentenceCase:e=>i(r(e," ")),titleCase:e=>n(e).map(i).join(" ")}},8621:e=>{function t(e,t){var n=e.length,i=new Array(n),r={},s=n,o=function(e){for(var t=new Map,n=0,i=e.length;n<i;n++){var r=e[n];t.has(r[0])||t.set(r[0],new Set),t.has(r[1])||t.set(r[1],new Set),t.get(r[0]).add(r[1])}return t}(t),a=function(e){for(var t=new Map,n=0,i=e.length;n<i;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!a.has(e[0])||!a.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));s--;)r[s]||l(e[s],s,new Set);return i;function l(e,t,s){if(s.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(h){c=""}throw new Error("Cyclic dependency"+c)}if(!a.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!r[t]){r[t]=!0;var u=o.get(e)||new Set;if(t=(u=Array.from(u)).length){s.add(e);do{var d=u[--t];l(d,a.get(d),s)}while(t);s.delete(e)}i[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,i=e.length;n<i;n++){var r=e[n];t.add(r[0]),t.add(r[1])}return Array.from(t)}(e),e)},e.exports.array=t},7626:(e,t,n)=>{"use strict";var i=n(4628);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=i.useSyncExternalStore,o=i.useRef,a=i.useEffect,l=i.useMemo,c=i.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,i,u){var d=o(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=l((function(){function e(e){if(!a){if(a=!0,s=e,e=i(e),void 0!==u&&h.hasValue){var t=h.value;if(u(t,e))return o=t}return o=e}if(t=o,r(s,e))return t;var n=i(e);return void 0!==u&&u(t,n)?t:(s=e,o=n)}var s,o,a=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,i,u]);var p=s(e,d[0],d[1]);return a((function(){h.hasValue=!0,h.value=p}),[p]),c(p),p}},4202:(e,t,n)=>{"use strict";e.exports=n(7626)},9011:e=>{"use strict";var t=function(){};e.exports=t},9046:(e,t)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)i.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},5985:(e,t,n)=>{var i=n(4676);e.exports=function(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},8705:(e,t,n)=>{var i=n(2990).default;e.exports=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4676:(e,t,n)=>{var i=n(2990).default,r=n(8705);e.exports=function(e){var t=r(e,"string");return"symbol"==i(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},2990:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3133:(e,t,n)=>{"use strict";n.d(t,{UE:()=>I,RK:()=>_,ll:()=>x,rD:()=>O,__:()=>A,UU:()=>D,jD:()=>P,mG:()=>N,ER:()=>k,cY:()=>T,iD:()=>E,BN:()=>R,Ej:()=>M});var i=n(1881);function r(e,t,n){let{reference:r,floating:s}=e;const o=(0,i.TV)(t),a=(0,i.Dz)(t),l=(0,i.sq)(a),c=(0,i.C0)(t),u="y"===o,d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:d,y:r.y-s.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-s.width,y:h};break;default:g={x:r.x,y:r.y}}switch((0,i.Sg)(t)){case"start":g[a]-=p*(n&&u?-1:1);break;case"end":g[a]+=p*(n&&u?-1:1)}return g}async function s(e,t){var n;void 0===t&&(t={});const{x:r,y:s,platform:o,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:g=0}=(0,i._3)(t,e),f=(0,i.nI)(g),m=l[p?"floating"===h?"reference":"floating":h],v=(0,i.B1)(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(m)))||n?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y="floating"===h?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,C=await(null==o.getOffsetParent?void 0:o.getOffsetParent(l.floating)),w=await(null==o.isElement?void 0:o.isElement(C))&&await(null==o.getScale?void 0:o.getScale(C))||{x:1,y:1},b=(0,i.B1)(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:C,strategy:c}):y);return{top:(v.top-b.top+f.top)/w.y,bottom:(b.bottom-v.bottom+f.bottom)/w.y,left:(v.left-b.left+f.left)/w.x,right:(b.right-v.right+f.right)/w.x}}function o(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function a(e){return i.r_.some((t=>e[t]>=0))}function l(e){const t=(0,i.jk)(...e.map((e=>e.left))),n=(0,i.jk)(...e.map((e=>e.top)));return{x:t,y:n,width:(0,i.T9)(...e.map((e=>e.right)))-t,height:(0,i.T9)(...e.map((e=>e.bottom)))-n}}var c=n(7339);function u(e){const t=(0,c.L9)(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=(0,c.sb)(e),o=s?e.offsetWidth:n,a=s?e.offsetHeight:r,l=(0,i.LI)(n)!==o||(0,i.LI)(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function d(e){return(0,c.vq)(e)?e:e.contextElement}function h(e){const t=d(e);if(!(0,c.sb)(t))return(0,i.Jx)(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=u(t);let a=(o?(0,i.LI)(n.width):n.width)/r,l=(o?(0,i.LI)(n.height):n.height)/s;return a&&Number.isFinite(a)||(a=1),l&&Number.isFinite(l)||(l=1),{x:a,y:l}}const p=(0,i.Jx)(0);function g(e){const t=(0,c.zk)(e);return(0,c.Tc)()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:p}function f(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const s=e.getBoundingClientRect(),o=d(e);let a=(0,i.Jx)(1);t&&(r?(0,c.vq)(r)&&(a=h(r)):a=h(e));const l=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==(0,c.zk)(e))&&t}(o,n,r)?g(o):(0,i.Jx)(0);let u=(s.left+l.x)/a.x,p=(s.top+l.y)/a.y,f=s.width/a.x,m=s.height/a.y;if(o){const e=(0,c.zk)(o),t=r&&(0,c.vq)(r)?(0,c.zk)(r):r;let n=e,i=(0,c._m)(n);for(;i&&r&&t!==n;){const e=h(i),t=i.getBoundingClientRect(),r=(0,c.L9)(i),s=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;u*=e.x,p*=e.y,f*=e.x,m*=e.y,u+=s,p+=o,n=(0,c.zk)(i),i=(0,c._m)(n)}}return(0,i.B1)({width:f,height:m,x:u,y:p})}function m(e){return f((0,c.ep)(e)).left+(0,c.CP)(e).scrollLeft}function v(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=(0,c.zk)(e),i=(0,c.ep)(e),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const e=(0,c.Tc)();(!e||e&&"fixed"===t)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=(0,c.ep)(e),n=(0,c.CP)(e),r=e.ownerDocument.body,s=(0,i.T9)(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=(0,i.T9)(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+m(e);const l=-n.scrollTop;return"rtl"===(0,c.L9)(r).direction&&(a+=(0,i.T9)(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:l}}((0,c.ep)(e));else if((0,c.vq)(t))r=function(e,t){const n=f(e,!0,"fixed"===t),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=(0,c.sb)(e)?h(e):(0,i.Jx)(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:s*o.x,y:r*o.y}}(t,n);else{const n=g(e);r={...t,x:t.x-n.x,y:t.y-n.y}}return(0,i.B1)(r)}function y(e,t){const n=(0,c.$4)(e);return!(n===t||!(0,c.vq)(n)||(0,c.eu)(n))&&("fixed"===(0,c.L9)(n).position||y(n,t))}function C(e,t,n){const r=(0,c.sb)(t),s=(0,c.ep)(t),o="fixed"===n,a=f(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const u=(0,i.Jx)(0);if(r||!r&&!o)if(("body"!==(0,c.mq)(t)||(0,c.ZU)(s))&&(l=(0,c.CP)(t)),r){const e=f(t,!0,o,t);u.x=e.x+t.clientLeft,u.y=e.y+t.clientTop}else s&&(u.x=m(s));return{x:a.left+l.scrollLeft-u.x,y:a.top+l.scrollTop-u.y,width:a.width,height:a.height}}function w(e){return"static"===(0,c.L9)(e).position}function b(e,t){return(0,c.sb)(e)&&"fixed"!==(0,c.L9)(e).position?t?t(e):e.offsetParent:null}function S(e,t){const n=(0,c.zk)(e);if((0,c.Tf)(e))return n;if(!(0,c.sb)(e)){let t=(0,c.$4)(e);for(;t&&!(0,c.eu)(t);){if((0,c.vq)(t)&&!w(t))return t;t=(0,c.$4)(t)}return n}let i=b(e,t);for(;i&&(0,c.Lv)(i)&&w(i);)i=b(i,t);return i&&(0,c.eu)(i)&&w(i)&&!(0,c.sQ)(i)?n:i||(0,c.gJ)(e)||n}const E={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o="fixed"===s,a=(0,c.ep)(r),l=!!t&&(0,c.Tf)(t.floating);if(r===a||l&&o)return n;let u={scrollLeft:0,scrollTop:0},d=(0,i.Jx)(1);const p=(0,i.Jx)(0),g=(0,c.sb)(r);if((g||!g&&!o)&&(("body"!==(0,c.mq)(r)||(0,c.ZU)(a))&&(u=(0,c.CP)(r)),(0,c.sb)(r))){const e=f(r);d=h(r),p.x=e.x+r.clientLeft,p.y=e.y+r.clientTop}return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+p.x,y:n.y*d.y-u.scrollTop*d.y+p.y}},getDocumentElement:c.ep,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[..."clippingAncestors"===n?(0,c.Tf)(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let i=(0,c.v9)(e,[],!1).filter((e=>(0,c.vq)(e)&&"body"!==(0,c.mq)(e))),r=null;const s="fixed"===(0,c.L9)(e).position;let o=s?(0,c.$4)(e):e;for(;(0,c.vq)(o)&&!(0,c.eu)(o);){const t=(0,c.L9)(o),n=(0,c.sQ)(o);n||"fixed"!==t.position||(r=null),(s?!n&&!r:!n&&"static"===t.position&&r&&["absolute","fixed"].includes(r.position)||(0,c.ZU)(o)&&!n&&y(e,o))?i=i.filter((e=>e!==o)):r=t,o=(0,c.$4)(o)}return t.set(e,i),i}(t,this._c):[].concat(n),r],a=o[0],l=o.reduce(((e,n)=>{const r=v(t,n,s);return e.top=(0,i.T9)(r.top,e.top),e.right=(0,i.jk)(r.right,e.right),e.bottom=(0,i.jk)(r.bottom,e.bottom),e.left=(0,i.T9)(r.left,e.left),e}),v(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:S,getElementRects:async function(e){const t=this.getOffsetParent||S,n=this.getDimensions,i=await n(e.floating);return{reference:C(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=u(e);return{width:t,height:n}},getScale:h,isElement:c.vq,isRTL:function(e){return"rtl"===(0,c.L9)(e).direction}};function x(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a="function"===typeof ResizeObserver,layoutShift:l="function"===typeof IntersectionObserver,animationFrame:u=!1}=r,h=d(e),p=s||o?[...h?(0,c.v9)(h):[],...(0,c.v9)(t)]:[];p.forEach((e=>{s&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));const g=h&&l?function(e,t){let n,r=null;const s=(0,c.ep)(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(l,c){void 0===l&&(l=!1),void 0===c&&(c=1),o();const{left:u,top:d,width:h,height:p}=e.getBoundingClientRect();if(l||t(),!h||!p)return;const g={rootMargin:-(0,i.RI)(d)+"px "+-(0,i.RI)(s.clientWidth-(u+h))+"px "+-(0,i.RI)(s.clientHeight-(d+p))+"px "+-(0,i.RI)(u)+"px",threshold:(0,i.T9)(0,(0,i.jk)(1,c))||1};let f=!0;function m(e){const t=e[0].intersectionRatio;if(t!==c){if(!f)return a();t?a(!1,t):n=setTimeout((()=>{a(!1,1e-7)}),1e3)}f=!1}try{r=new IntersectionObserver(m,{...g,root:s.ownerDocument})}catch(v){r=new IntersectionObserver(m,g)}r.observe(e)}(!0),o}(h,n):null;let m,v=-1,y=null;a&&(y=new ResizeObserver((e=>{let[i]=e;i&&i.target===h&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame((()=>{var e;null==(e=y)||e.observe(t)}))),n()})),h&&!u&&y.observe(h),y.observe(t));let C=u?f(e):null;return u&&function t(){const i=f(e);!C||i.x===C.x&&i.y===C.y&&i.width===C.width&&i.height===C.height||n();C=i,m=requestAnimationFrame(t)}(),n(),()=>{var e;p.forEach((e=>{s&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),null==g||g(),null==(e=y)||e.disconnect(),y=null,u&&cancelAnimationFrame(m)}}const A=s,T=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:a,middlewareData:l}=t,c=await async function(e,t){const{placement:n,platform:r,elements:s}=e,o=await(null==r.isRTL?void 0:r.isRTL(s.floating)),a=(0,i.C0)(n),l=(0,i.Sg)(n),c="y"===(0,i.TV)(n),u=["left","top"].includes(a)?-1:1,d=o&&c?-1:1,h=(0,i._3)(t,e);let{mainAxis:p,crossAxis:g,alignmentAxis:f}="number"===typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return l&&"number"===typeof f&&(g="end"===l?-1*f:f),c?{x:g*d,y:p*u}:{x:p*u,y:g*d}}(t,e);return a===(null==(n=l.offset)?void 0:n.placement)&&null!=(r=l.arrow)&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},_=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,r,o;const{rects:a,middlewareData:l,placement:c,platform:u,elements:d}=t,{crossAxis:h=!1,alignment:p,allowedPlacements:g=i.DD,autoAlignment:f=!0,...m}=(0,i._3)(e,t),v=void 0!==p||g===i.DD?function(e,t,n){return(e?[...n.filter((t=>(0,i.Sg)(t)===e)),...n.filter((t=>(0,i.Sg)(t)!==e))]:n.filter((e=>(0,i.C0)(e)===e))).filter((n=>!e||(0,i.Sg)(n)===e||!!t&&(0,i.aD)(n)!==n))}(p||null,f,g):g,y=await s(t,m),C=(null==(n=l.autoPlacement)?void 0:n.index)||0,w=v[C];if(null==w)return{};const b=(0,i.w7)(w,a,await(null==u.isRTL?void 0:u.isRTL(d.floating)));if(c!==w)return{reset:{placement:v[0]}};const S=[y[(0,i.C0)(w)],y[b[0]],y[b[1]]],E=[...(null==(r=l.autoPlacement)?void 0:r.overflows)||[],{placement:w,overflows:S}],x=v[C+1];if(x)return{data:{index:C+1,overflows:E},reset:{placement:x}};const A=E.map((e=>{const t=(0,i.Sg)(e.placement);return[e.placement,t&&h?e.overflows.slice(0,2).reduce(((e,t)=>e+t),0):e.overflows[0],e.overflows]})).sort(((e,t)=>e[1]-t[1])),T=(null==(o=A.filter((e=>e[2].slice(0,(0,i.Sg)(e[0])?2:3).every((e=>e<=0))))[0])?void 0:o[0])||A[0][0];return T!==c?{data:{index:C+1,overflows:E},reset:{placement:T}}:{}}}},R=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:a=!0,crossAxis:l=!1,limiter:c={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...u}=(0,i._3)(e,t),d={x:n,y:r},h=await s(t,u),p=(0,i.TV)((0,i.C0)(o)),g=(0,i.PG)(p);let f=d[g],m=d[p];if(a){const e="y"===g?"bottom":"right",t=f+h["y"===g?"top":"left"],n=f-h[e];f=(0,i.qE)(t,f,n)}if(l){const e="y"===p?"bottom":"right",t=m+h["y"===p?"top":"left"],n=m-h[e];m=(0,i.qE)(t,m,n)}const v=c.fn({...t,[g]:f,[p]:m});return{...v,data:{x:v.x-n,y:v.y-r}}}}},D=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:a,rects:l,initialPlacement:c,platform:u,elements:d}=t,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...y}=(0,i._3)(e,t);if(null!=(n=a.arrow)&&n.alignmentOffset)return{};const C=(0,i.C0)(o),w=(0,i.TV)(c),b=(0,i.C0)(c)===c,S=await(null==u.isRTL?void 0:u.isRTL(d.floating)),E=g||(b||!v?[(0,i.bV)(c)]:(0,i.WJ)(c)),x="none"!==m;!g&&x&&E.push(...(0,i.lP)(c,v,m,S));const A=[c,...E],T=await s(t,y),_=[];let R=(null==(r=a.flip)?void 0:r.overflows)||[];if(h&&_.push(T[C]),p){const e=(0,i.w7)(o,l,S);_.push(T[e[0]],T[e[1]])}if(R=[...R,{placement:o,overflows:_}],!_.every((e=>e<=0))){var D,M;const e=((null==(D=a.flip)?void 0:D.index)||0)+1,t=A[e];if(t)return{data:{index:e,overflows:R},reset:{placement:t}};let n=null==(M=R.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:M.placement;if(!n)switch(f){case"bestFit":{var P;const e=null==(P=R.filter((e=>{if(x){const t=(0,i.TV)(e.placement);return t===w||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:P[0];e&&(n=e);break}case"initialPlacement":n=c}if(o!==n)return{reset:{placement:n}}}return{}}}},M=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:o,elements:a}=t,{apply:l=(()=>{}),...c}=(0,i._3)(e,t),u=await s(t,c),d=(0,i.C0)(n),h=(0,i.Sg)(n),p="y"===(0,i.TV)(n),{width:g,height:f}=r.floating;let m,v;"top"===d||"bottom"===d?(m=d,v=h===(await(null==o.isRTL?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,m="end"===h?"top":"bottom");const y=f-u.top-u.bottom,C=g-u.left-u.right,w=(0,i.jk)(f-u[m],y),b=(0,i.jk)(g-u[v],C),S=!t.middlewareData.shift;let E=w,x=b;if(p?x=h||S?(0,i.jk)(b,C):C:E=h||S?(0,i.jk)(w,y):y,S&&!h){const e=(0,i.T9)(u.left,0),t=(0,i.T9)(u.right,0),n=(0,i.T9)(u.top,0),r=(0,i.T9)(u.bottom,0);p?x=g-2*(0!==e||0!==t?e+t:(0,i.T9)(u.left,u.right)):E=f-2*(0!==n||0!==r?n+r:(0,i.T9)(u.top,u.bottom))}await l({...t,availableWidth:x,availableHeight:E});const A=await o.getDimensions(a.floating);return g!==A.width||f!==A.height?{reset:{rects:!0}}:{}}}},P=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...l}=(0,i._3)(e,t);switch(r){case"referenceHidden":{const e=o(await s(t,{...l,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:a(e)}}}case"escaped":{const e=o(await s(t,{...l,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:a(e)}}}default:return{}}}}},I=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=(0,i._3)(e,t)||{};if(null==u)return{};const h=(0,i.nI)(d),p={x:n,y:r},g=(0,i.Dz)(s),f=(0,i.sq)(g),m=await a.getDimensions(u),v="y"===g,y=v?"top":"left",C=v?"bottom":"right",w=v?"clientHeight":"clientWidth",b=o.reference[f]+o.reference[g]-p[g]-o.floating[f],S=p[g]-o.reference[g],E=await(null==a.getOffsetParent?void 0:a.getOffsetParent(u));let x=E?E[w]:0;x&&await(null==a.isElement?void 0:a.isElement(E))||(x=l.floating[w]||o.floating[f]);const A=b/2-S/2,T=x/2-m[f]/2-1,_=(0,i.jk)(h[y],T),R=(0,i.jk)(h[C],T),D=_,M=x-m[f]-R,P=x/2-m[f]/2+A,I=(0,i.qE)(D,P,M),N=!c.arrow&&null!=(0,i.Sg)(s)&&P!==I&&o.reference[f]/2-(P<D?_:R)-m[f]/2<0,k=N?P<D?P-D:P-M:0;return{[g]:p[g]+k,data:{[g]:I,centerOffset:P-I-k,...N&&{alignmentOffset:k}},reset:N}}}),N=function(e){return void 0===e&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:o,strategy:a}=t,{padding:c=2,x:u,y:d}=(0,i._3)(e,t),h=Array.from(await(null==o.getClientRects?void 0:o.getClientRects(r.reference))||[]),p=function(e){const t=e.slice().sort(((e,t)=>e.y-t.y)),n=[];let r=null;for(let i=0;i<t.length;i++){const e=t[i];!r||e.y-r.y>r.height/2?n.push([e]):n[n.length-1].push(e),r=e}return n.map((e=>(0,i.B1)(l(e))))}(h),g=(0,i.B1)(l(h)),f=(0,i.nI)(c);const m=await o.getElementRects({reference:{getBoundingClientRect:function(){if(2===p.length&&p[0].left>p[1].right&&null!=u&&null!=d)return p.find((e=>u>e.left-f.left&&u<e.right+f.right&&d>e.top-f.top&&d<e.bottom+f.bottom))||g;if(p.length>=2){if("y"===(0,i.TV)(n)){const e=p[0],t=p[p.length-1],r="top"===(0,i.C0)(n),s=e.top,o=t.bottom,a=r?e.left:t.left,l=r?e.right:t.right;return{top:s,bottom:o,left:a,right:l,width:l-a,height:o-s,x:a,y:s}}const e="left"===(0,i.C0)(n),t=(0,i.T9)(...p.map((e=>e.right))),r=(0,i.jk)(...p.map((e=>e.left))),s=p.filter((n=>e?n.left===r:n.right===t)),o=s[0].top,a=s[s.length-1].bottom;return{top:o,bottom:a,left:r,right:t,width:t-r,height:a-o,x:r,y:o}}return g}},floating:r.floating,strategy:a});return s.reference.x!==m.reference.x||s.reference.y!==m.reference.y||s.reference.width!==m.reference.width||s.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}},k=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=(0,i._3)(e,t),d={x:n,y:r},h=(0,i.TV)(s),p=(0,i.PG)(h);let g=d[p],f=d[h];const m=(0,i._3)(l,t),v="number"===typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const e="y"===p?"height":"width",t=o.reference[p]-o.floating[e]+v.mainAxis,n=o.reference[p]+o.reference[e]-v.mainAxis;g<t?g=t:g>n&&(g=n)}if(u){var y,C;const e="y"===p?"width":"height",t=["top","left"].includes((0,i.C0)(s)),n=o.reference[h]-o.floating[e]+(t&&(null==(y=a.offset)?void 0:y[h])||0)+(t?0:v.crossAxis),r=o.reference[h]+o.reference[e]+(t?0:(null==(C=a.offset)?void 0:C[h])||0)-(t?v.crossAxis:0);f<n?f=n:f>r&&(f=r)}return{[p]:g,[h]:f}}}},O=(e,t,n)=>{const i=new Map,s={platform:E,...n},o={...s.platform,_c:i};return(async(e,t,n)=>{const{placement:i="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),c=await(null==a.isRTL?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:h}=r(u,i,c),p=i,g={},f=0;for(let m=0;m<l.length;m++){const{name:n,fn:o}=l[m],{x:v,y:y,data:C,reset:w}=await o({x:d,y:h,initialPlacement:i,placement:p,strategy:s,middlewareData:g,rects:u,platform:a,elements:{reference:e,floating:t}});d=null!=v?v:d,h=null!=y?y:h,g={...g,[n]:{...g[n],...C}},w&&f<=50&&(f++,"object"===typeof w&&(w.placement&&(p=w.placement),w.rects&&(u=!0===w.rects?await a.getElementRects({reference:e,floating:t,strategy:s}):w.rects),({x:d,y:h}=r(u,p,c))),m=-1)}return{x:d,y:h,placement:p,strategy:s,middlewareData:g}})(e,t,{...s,platform:o})}},7339:(e,t,n)=>{"use strict";function i(e){return o(e)?(e.nodeName||"").toLowerCase():"#document"}function r(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function s(e){var t;return null==(t=(o(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function o(e){return e instanceof Node||e instanceof r(e).Node}function a(e){return e instanceof Element||e instanceof r(e).Element}function l(e){return e instanceof HTMLElement||e instanceof r(e).HTMLElement}function c(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof r(e).ShadowRoot)}function u(e){const{overflow:t,overflowX:n,overflowY:i,display:r}=v(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(r)}function d(e){return["table","td","th"].includes(i(e))}function h(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(n){return!1}}))}function p(e){const t=f(),n=a(e)?v(e):e;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function g(e){let t=C(e);for(;l(t)&&!m(t);){if(p(t))return t;if(h(t))return null;t=C(t)}return null}function f(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function m(e){return["html","body","#document"].includes(i(e))}function v(e){return r(e).getComputedStyle(e)}function y(e){return a(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function C(e){if("html"===i(e))return e;const t=e.assignedSlot||e.parentNode||c(e)&&e.host||s(e);return c(t)?t.host:t}function w(e){const t=C(e);return m(t)?e.ownerDocument?e.ownerDocument.body:e.body:l(t)&&u(t)?t:w(t)}function b(e,t,n){var i;void 0===t&&(t=[]),void 0===n&&(n=!0);const s=w(e),o=s===(null==(i=e.ownerDocument)?void 0:i.body),a=r(s);if(o){const e=S(a);return t.concat(a,a.visualViewport||[],u(s)?s:[],e&&n?b(e):[])}return t.concat(s,b(s,[],n))}function S(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}n.d(t,{$4:()=>C,CP:()=>y,L9:()=>v,Lv:()=>d,Ng:()=>c,Tc:()=>f,Tf:()=>h,ZU:()=>u,_m:()=>S,ep:()=>s,eu:()=>m,gJ:()=>g,mq:()=>i,sQ:()=>p,sb:()=>l,v9:()=>b,vq:()=>a,zk:()=>r})},1881:(e,t,n)=>{"use strict";n.d(t,{B1:()=>_,C0:()=>f,DD:()=>s,Dz:()=>w,Jx:()=>u,LI:()=>l,PG:()=>v,RI:()=>c,Sg:()=>m,T9:()=>a,TV:()=>C,WJ:()=>S,_3:()=>g,aD:()=>E,bV:()=>A,jk:()=>o,lP:()=>x,nI:()=>T,qE:()=>p,r_:()=>i,sq:()=>y,w7:()=>b});const i=["top","right","bottom","left"],r=["start","end"],s=i.reduce(((e,t)=>e.concat(t,t+"-"+r[0],t+"-"+r[1])),[]),o=Math.min,a=Math.max,l=Math.round,c=Math.floor,u=e=>({x:e,y:e}),d={left:"right",right:"left",bottom:"top",top:"bottom"},h={start:"end",end:"start"};function p(e,t,n){return a(e,o(t,n))}function g(e,t){return"function"===typeof e?e(t):e}function f(e){return e.split("-")[0]}function m(e){return e.split("-")[1]}function v(e){return"x"===e?"y":"x"}function y(e){return"y"===e?"height":"width"}function C(e){return["top","bottom"].includes(f(e))?"y":"x"}function w(e){return v(C(e))}function b(e,t,n){void 0===n&&(n=!1);const i=m(e),r=w(e),s=y(r);let o="x"===r?i===(n?"end":"start")?"right":"left":"start"===i?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=A(o)),[o,A(o)]}function S(e){const t=A(e);return[E(e),t,E(t)]}function E(e){return e.replace(/start|end/g,(e=>h[e]))}function x(e,t,n,i){const r=m(e);let s=function(e,t,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:i:t?i:r;case"left":case"right":return t?s:o;default:return[]}}(f(e),"start"===n,i);return r&&(s=s.map((e=>e+"-"+r)),t&&(s=s.concat(s.map(E)))),s}function A(e){return e.replace(/left|right|bottom|top/g,(e=>d[e]))}function T(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function _(e){const{x:t,y:n,width:i,height:r}=e;return{width:i,height:r,top:n,left:t,right:t+i,bottom:n+r,x:t,y:n}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>i[e]));return o.default=()=>i,n.d(s,o),s}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>"static/js/"+e+".8c812204.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="pmx-frontend:";n.l=(i,r,s,o)=>{if(e[i])e[i].push(r);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==t+s){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=i),e[i]=[r];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise(((n,i)=>r=e[t]=[n,i]));i.push(r[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=(t,i)=>{var r,s,o=i[0],a=i[1],l=i[2],c=0;if(o.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(t&&t(i);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.webpackChunkpmx_frontend=self.webpackChunkpmx_frontend||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Qs,hasStandardBrowserEnv:()=>Zs,hasStandardBrowserWebWorkerEnv:()=>Js,origin:()=>eo});var t={};n.r(t),n.d(t,{Decoder:()=>Lu,Encoder:()=>ku,PacketType:()=>Nu,protocol:()=>Iu});var i={};n.r(i),n.d(i,{dU:()=>Qne,ng:()=>Zne,EA:()=>$ne,PDFDataRangeTransport:()=>Jne,D6:()=>eie,YE:()=>tie,rE:()=>nie});var r,s=n(4628),o=n.t(s,2),a=n(6258),l=n(4473),c=n.t(l,2);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const d="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function p(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function g(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,i){return void 0===n&&(n=null),u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?v(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function v(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function y(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,l=r.Pop,c=null,p=v();function v(){return(a.state||{idx:null}).idx}function y(){l=r.Pop;let e=v(),t=null==e?null:e-p;p=e,c&&c({action:l,location:w.location,delta:t})}function C(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==p&&(p=0,a.replaceState(u({},a.state,{idx:p}),""));let w={get action(){return l},get location(){return e(s,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(d,y),c=e,()=>{s.removeEventListener(d,y),c=null}},createHref:e=>t(s,e),createURL:C,encodeLocation(e){let t=C(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let i=f(w.location,e,t);n&&n(i,e),p=v()+1;let u=g(i,p),d=w.createHref(i);try{a.pushState(u,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;s.location.assign(d)}o&&c&&c({action:l,location:w.location,delta:1})},replace:function(e,t){l=r.Replace;let i=f(w.location,e,t);n&&n(i,e),p=v();let s=g(i,p),u=w.createHref(i);a.replaceState(s,"",u),o&&c&&c({action:l,location:w.location,delta:0})},go:e=>a.go(e)};return w}var C;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(C||(C={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function w(e,t,n){void 0===n&&(n="/");let i=k(("string"===typeof t?v(t):t).pathname||"/",n);if(null==i)return null;let r=b(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(r);let s=null;for(let o=0;null==s&&o<r.length;++o){let e=N(i);s=P(r[o],e)}return s}function b(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(e,r,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};o.relativePath.startsWith("/")&&(h(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));let a=V([i,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),b(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:M(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let i of S(e.path))r(e,t,i);else r(e,t)})),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let o=S(i.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),r&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const E=/^:[\w-]+$/,x=3,A=2,T=1,_=10,R=-2,D=e=>"*"===e;function M(e,t){let n=e.split("/"),i=n.length;return n.some(D)&&(i+=R),t&&(i+=A),n.filter((e=>!D(e))).reduce(((e,t)=>e+(E.test(t)?x:""===t?T:_)),i)}function P(e,t){let{routesMeta:n}=e,i={},r="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===r?t:t.slice(r.length)||"/",c=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(i,c.params);let u=e.route;s.push({params:i,pathname:V([r,c.pathname]),pathnameBase:G(V([r,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(r=V([r,c.pathnameBase]))}return s}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);p("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,t?void 0:"i");return[s,i]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1),l=i.reduce(((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function N(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return p(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function k(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function O(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function F(e,t){let n=L(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function B(e,t,n,i){let r;void 0===i&&(i=!1),"string"===typeof e?r=v(e):(r=u({},e),h(!r.pathname||!r.pathname.includes("?"),O("?","pathname","search",r)),h(!r.pathname||!r.pathname.includes("#"),O("#","pathname","hash",r)),h(!r.search||!r.search.includes("#"),O("#","search","hash",r)));let s,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof e?v(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:H(i),hash:W(r)}}(r,s),c=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const V=e=>e.join("/").replace(/\/\/+/g,"/"),G=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),H=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function j(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const U=["post","put","patch","delete"],z=(new Set(U),["get",...U]);new Set(z),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Y.apply(this,arguments)}const q=s.createContext(null);const K=s.createContext(null);const X=s.createContext(null);const Q=s.createContext(null);const Z=s.createContext({outlet:null,matches:[],isDataRoute:!1});const $=s.createContext(null);function J(){return null!=s.useContext(Q)}function ee(){return J()||h(!1),s.useContext(Q).location}function te(e){s.useContext(X).static||s.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=s.useContext(Z);return e?function(){let{router:e}=ge(he.UseNavigateStable),t=me(pe.UseNavigateStable),n=s.useRef(!1);te((()=>{n.current=!0}));let i=s.useCallback((function(i,r){void 0===r&&(r={}),n.current&&("number"===typeof i?e.navigate(i):e.navigate(i,Y({fromRouteId:t},r)))}),[e,t]);return i}():function(){J()||h(!1);let e=s.useContext(q),{basename:t,future:n,navigator:i}=s.useContext(X),{matches:r}=s.useContext(Z),{pathname:o}=ee(),a=JSON.stringify(F(r,n.v7_relativeSplatPath)),l=s.useRef(!1);te((()=>{l.current=!0}));let c=s.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=B(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:V([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e]);return c}()}const ie=s.createContext(null);function re(){let{matches:e}=s.useContext(Z),t=e[e.length-1];return t?t.params:{}}function se(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=s.useContext(X),{matches:r}=s.useContext(Z),{pathname:o}=ee(),a=JSON.stringify(F(r,i.v7_relativeSplatPath));return s.useMemo((()=>B(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function oe(e,t,n,i){J()||h(!1);let{navigator:o}=s.useContext(X),{matches:a}=s.useContext(Z),l=a[a.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,p=ee();if(t){var g;let e="string"===typeof t?v(t):t;"/"===u||(null==(g=e.pathname)?void 0:g.startsWith(u))||h(!1),d=e}else d=p;let f=d.pathname||"/",m=f;if("/"!==u){let e=u.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=w(e,{pathname:m});let C=de(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:V([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:V([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,i);return t&&C?s.createElement(Q.Provider,{value:{location:Y({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:r.Pop}},C):C}function ae(){let e=function(){var e;let t=s.useContext($),n=fe(pe.UseRouteError),i=me(pe.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=j(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:r},n):null,null)}const le=s.createElement(ae,null);class ce extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(Z.Provider,{value:this.props.routeContext},s.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ue(e){let{routeContext:t,match:n,children:i}=e,r=s.useContext(q);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(Z.Provider,{value:t},i)}function de(e,t,n,i){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(r=n)?void 0:r.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||h(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let s=0;s<a.length;s++){let e=a[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=s),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,i,r)=>{let o,d=!1,h=null,p=null;var g;n&&(o=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||le,c&&(u<0&&0===r?(g="route-fallback",!1||ve[g]||(ve[g]=!0),d=!0,p=null):u===r&&(d=!0,p=i.route.hydrateFallbackElement||null)));let f=t.concat(a.slice(0,r+1)),m=()=>{let t;return t=o?h:d?p:i.route.Component?s.createElement(i.route.Component,null):i.route.element?i.route.element:e,s.createElement(ue,{match:i,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===r)?s.createElement(ce,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()}),null)}var he=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(he||{}),pe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(pe||{});function ge(e){let t=s.useContext(q);return t||h(!1),t}function fe(e){let t=s.useContext(K);return t||h(!1),t}function me(e){let t=function(e){let t=s.useContext(Z);return t||h(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const ve={};o.startTransition;function ye(e){let{to:t,replace:n,state:i,relative:r}=e;J()||h(!1);let{future:o,static:a}=s.useContext(X),{matches:l}=s.useContext(Z),{pathname:c}=ee(),u=ne(),d=B(t,F(l,o.v7_relativeSplatPath),c,"path"===r),p=JSON.stringify(d);return s.useEffect((()=>u(JSON.parse(p),{replace:n,state:i,relative:r})),[u,p,r,n,i]),null}function Ce(e){return function(e){let t=s.useContext(Z).outlet;return t?s.createElement(ie.Provider,{value:e},t):t}(e.context)}function we(e){h(!1)}function be(e){let{basename:t="/",children:n=null,location:i,navigationType:o=r.Pop,navigator:a,static:l=!1,future:c}=e;J()&&h(!1);let u=t.replace(/^\/*/,"/"),d=s.useMemo((()=>({basename:u,navigator:a,static:l,future:Y({v7_relativeSplatPath:!1},c)})),[u,c,a,l]);"string"===typeof i&&(i=v(i));let{pathname:p="/",search:g="",hash:f="",state:m=null,key:y="default"}=i,C=s.useMemo((()=>{let e=k(p,u);return null==e?null:{location:{pathname:e,search:g,hash:f,state:m,key:y},navigationType:o}}),[u,p,g,f,m,y,o]);return null==C?null:s.createElement(X.Provider,{value:d},s.createElement(Q.Provider,{children:n,value:C}))}function Se(e){let{children:t,location:n}=e;return oe(Ee(t),n)}new Promise((()=>{}));s.Component;function Ee(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,((e,i)=>{if(!s.isValidElement(e))return;let r=[...t,i];if(e.type===s.Fragment)return void n.push.apply(n,Ee(e.props.children,r));e.type!==we&&h(!1),e.props.index&&e.props.children&&h(!1);let o={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ee(e.props.children,r)),n.push(o)})),n}function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xe.apply(this,arguments)}function Ae(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Te=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(rre){}new Map;const _e=o.startTransition;c.flushSync,o.useId;function Re(e){let{basename:t,children:n,future:i,window:r}=e,o=s.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:r,v5Compat:!0})&&(a={}),y((function(e,t){let{pathname:n,search:i,hash:r}=e.location;return f("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:m(t)}),null,a)));let l=o.current,[c,u]=s.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},h=s.useCallback((e=>{d&&_e?_e((()=>u(e))):u(e)}),[u,d]);return s.useLayoutEffect((()=>l.listen(h)),[l,h]),s.createElement(be,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const De="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Me=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=s.forwardRef((function(e,t){let n,{onClick:i,relative:r,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:d,unstable_viewTransition:p}=e,g=Ae(e,Te),{basename:f}=s.useContext(X),v=!1;if("string"===typeof u&&Me.test(u)&&(n=u,De))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=k(t.pathname,f);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:v=!0}catch(rre){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;J()||h(!1);let{basename:i,navigator:r}=s.useContext(X),{hash:o,pathname:a,search:l}=se(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:V([i,a])),r.createHref({pathname:c,search:l,hash:o})}(u,{relative:r}),C=function(e,t){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=ne(),u=ee(),d=se(e,{relative:a});return s.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:m(u)===m(d);c(e,{replace:n,state:r,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[u,c,d,i,r,n,e,o,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:r,unstable_viewTransition:p});return s.createElement("a",xe({},g,{href:n||y,onClick:v||o?i:function(e){i&&i(e),e.defaultPrevented||C(e)},ref:t,target:c}))}));var Ie,Ne;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ie||(Ie={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ne||(Ne={}));function ke(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=ke(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}const Oe=function(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=ke(e))&&(i&&(i+=" "),i+=t);return i},Le=e=>"number"==typeof e&&!isNaN(e),Fe=e=>"string"==typeof e,Be=e=>"function"==typeof e,Ve=e=>Fe(e)||Be(e)?e:null,Ge=e=>(0,s.isValidElement)(e)||Fe(e)||Be(e)||Le(e);function He(e){let{enter:t,exit:n,appendPosition:i=!1,collapse:r=!0,collapseDuration:o=300}=e;return function(e){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:h,playToast:p}=e;const g=i?"".concat(t,"--").concat(l):t,f=i?"".concat(n,"--").concat(l):n,m=(0,s.useRef)(0);return(0,s.useLayoutEffect)((()=>{const e=d.current,t=g.split(" "),n=i=>{i.target===d.current&&(p(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===m.current&&"animationcancel"!==i.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,s.useEffect)((()=>{const e=d.current,t=()=>{e.removeEventListener("animationend",t),r?function(e,t,n){void 0===n&&(n=300);const{scrollHeight:i,style:r}=e;requestAnimationFrame((()=>{r.minHeight="initial",r.height=i+"px",r.transition="all ".concat(n,"ms"),requestAnimationFrame((()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,n)}))}))}(e,u,o):u()};h||(c?t():(m.current=1,e.className+=" ".concat(f),e.addEventListener("animationend",t)))}),[h]),s.createElement(s.Fragment,null,a)}}function We(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const je=new Map;let Ue=[];const ze=new Set,Ye=e=>ze.forEach((t=>t(e))),qe=()=>je.size>0;function Ke(e,t){var n;if(t)return!(null==(n=je.get(t))||!n.isToastActive(e));let i=!1;return je.forEach((t=>{t.isToastActive(e)&&(i=!0)})),i}function Xe(e,t){Ge(e)&&(qe()||Ue.push({content:e,options:t}),je.forEach((n=>{n.buildToast(e,t)})))}function Qe(e,t){je.forEach((n=>{null!=t&&null!=t&&t.containerId?(null==t?void 0:t.containerId)===n.id&&n.toggle(e,null==t?void 0:t.id):n.toggle(e,null==t?void 0:t.id)}))}function Ze(e){const{subscribe:t,getSnapshot:n,setProps:i}=(0,s.useRef)(function(e){const t=e.containerId||1;return{subscribe(n){const i=function(e,t,n){let i=1,r=0,o=[],a=[],l=[],c=t;const u=new Map,d=new Set,h=()=>{l=Array.from(u.values()),d.forEach((e=>e()))},p=e=>{a=null==e?[]:a.filter((t=>t!==e)),h()},g=e=>{const{toastId:t,onOpen:i,updateId:r,children:o}=e.props,l=null==r;e.staleId&&u.delete(e.staleId),u.set(t,e),a=[...a,e.props.toastId].filter((t=>t!==e.staleId)),h(),n(We(e,l?"added":"updated")),l&&Be(i)&&i((0,s.isValidElement)(o)&&o.props)};return{id:e,props:c,observe:e=>(d.add(e),()=>d.delete(e)),toggle:(e,t)=>{u.forEach((n=>{null!=t&&t!==n.props.toastId||Be(n.toggle)&&n.toggle(e)}))},removeToast:p,toasts:u,clearQueue:()=>{r-=o.length,o=[]},buildToast:(t,a)=>{if((t=>{let{containerId:n,toastId:i,updateId:r}=t;const s=n?n!==e:1!==e,o=u.has(i)&&null==r;return s||o})(a))return;const{toastId:l,updateId:d,data:f,staleId:m,delay:v}=a,y=()=>{p(l)},C=null==d;C&&r++;const w={...c,style:c.toastStyle,key:i++,...Object.fromEntries(Object.entries(a).filter((e=>{let[t,n]=e;return null!=n}))),toastId:l,updateId:d,data:f,closeToast:y,isIn:!1,className:Ve(a.className||c.toastClassName),bodyClassName:Ve(a.bodyClassName||c.bodyClassName),progressClassName:Ve(a.progressClassName||c.progressClassName),autoClose:!a.isLoading&&(b=a.autoClose,S=c.autoClose,!1===b||Le(b)&&b>0?b:S),deleteToast(){const e=u.get(l),{onClose:t,children:i}=e.props;Be(t)&&t((0,s.isValidElement)(i)&&i.props),n(We(e,"removed")),u.delete(l),r--,r<0&&(r=0),o.length>0?g(o.shift()):h()}};var b,S;w.closeButton=c.closeButton,!1===a.closeButton||Ge(a.closeButton)?w.closeButton=a.closeButton:!0===a.closeButton&&(w.closeButton=!Ge(c.closeButton)||c.closeButton);let E=t;(0,s.isValidElement)(t)&&!Fe(t.type)?E=(0,s.cloneElement)(t,{closeToast:y,toastProps:w,data:f}):Be(t)&&(E=t({closeToast:y,toastProps:w,data:f}));const x={content:E,props:w,staleId:m};c.limit&&c.limit>0&&r>c.limit&&C?o.push(x):Le(v)?setTimeout((()=>{g(x)}),v):g(x)},setProps(e){c=e},setToggle:(e,t)=>{u.get(e).toggle=t},isToastActive:e=>a.some((t=>t===e)),getSnapshot:()=>c.newestOnTop?l.reverse():l}}(t,e,Ye);je.set(t,i);const r=i.observe(n);return Ue.forEach((e=>Xe(e.content,e.options))),Ue=[],()=>{r(),je.delete(t)}},setProps(e){var n;null==(n=je.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=je.get(t))?void 0:e.getSnapshot()}}}(e)).current;i(e);const r=(0,s.useSyncExternalStore)(t,n,n);return{getToastToRender:function(e){if(!r)return[];const t=new Map;return r.forEach((e=>{const{position:n}=e.props;t.has(n)||t.set(n,[]),t.get(n).push(e)})),Array.from(t,(t=>e(t[0],t[1])))},isToastActive:Ke,count:null==r?void 0:r.length}}function $e(e){const[t,n]=(0,s.useState)(!1),[i,r]=(0,s.useState)(!1),o=(0,s.useRef)(null),a=(0,s.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:u,onClick:d,closeOnClick:h}=e;var p,g;function f(){n(!0)}function m(){n(!1)}function v(n){const i=o.current;a.canDrag&&i&&(a.didMove=!0,t&&m(),a.delta="x"===e.draggableDirection?n.clientX-a.start:n.clientY-a.start,a.start!==n.clientX&&(a.canCloseOnClick=!1),i.style.transform="translate3d(".concat("x"===e.draggableDirection?"".concat(a.delta,"px, var(--y)"):"0, calc(".concat(a.delta,"px + var(--y))"),",0)"),i.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance)))}function y(){document.removeEventListener("pointermove",v),document.removeEventListener("pointerup",y);const t=o.current;if(a.canDrag&&a.didMove&&t){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return r(!0),e.closeToast(),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}null==(g=je.get((p={id:e.toastId,containerId:e.containerId,fn:n}).containerId||1))||g.setToggle(p.id,p.fn),(0,s.useEffect)((()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||m(),window.addEventListener("focus",f),window.addEventListener("blur",m),()=>{window.removeEventListener("focus",f),window.removeEventListener("blur",m)}}),[e.pauseOnFocusLoss]);const C={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){a.didMove=!1,document.addEventListener("pointermove",v),document.addEventListener("pointerup",y);const n=o.current;a.canCloseOnClick=!0,a.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(a.start=t.clientX,a.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(a.start=t.clientY,a.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){const{top:n,bottom:i,left:r,right:s}=o.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=r&&t.clientX<=s&&t.clientY>=n&&t.clientY<=i?m():f()}};return l&&c&&(C.onMouseEnter=m,e.stacked||(C.onMouseLeave=f)),h&&(C.onClick=e=>{d&&d(e),a.canCloseOnClick&&u()}),{playToast:f,pauseToast:m,isRunning:t,preventExitTransition:i,toastRef:o,eventHandlers:C}}function Je(e){let{delay:t,isRunning:n,closeToast:i,type:r="default",hide:o,className:a,style:l,controlledProgress:c,progress:u,rtl:d,isIn:h,theme:p}=e;const g=o||c&&0===u,f={...l,animationDuration:"".concat(t,"ms"),animationPlayState:n?"running":"paused"};c&&(f.transform="scaleX(".concat(u,")"));const m=Oe("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(p),"Toastify__progress-bar--".concat(r),{"Toastify__progress-bar--rtl":d}),v=Be(a)?a({rtl:d,type:r,defaultClassName:m}):Oe(m,a),y={[c&&u>=1?"onTransitionEnd":"onAnimationEnd"]:c&&u<1?null:()=>{h&&i()}};return s.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":g},s.createElement("div",{className:"Toastify__progress-bar--bg Toastify__progress-bar-theme--".concat(p," Toastify__progress-bar--").concat(r)}),s.createElement("div",{role:"progressbar","aria-hidden":g?"true":"false","aria-label":"notification timer",className:v,style:f,...y}))}let et=1;const tt=()=>""+et++;function nt(e){return e&&(Fe(e.toastId)||Le(e.toastId))?e.toastId:tt()}function it(e,t){return Xe(e,t),t.toastId}function rt(e,t){return{...t,type:t&&t.type||e,toastId:nt(t)}}function st(e){return(t,n)=>it(t,rt(e,n))}function ot(e,t){return it(e,rt("default",t))}ot.loading=(e,t)=>it(e,rt("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),ot.promise=function(e,t,n){let i,{pending:r,error:s,success:o}=t;r&&(i=Fe(r)?ot.loading(r,n):ot.loading(r.render,{...n,...r}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,r)=>{if(null==t)return void ot.dismiss(i);const s={type:e,...a,...n,data:r},o=Fe(t)?{render:t}:t;return i?ot.update(i,{...s,...o}):ot(o.render,{...s,...o}),r},c=Be(e)?e():e;return c.then((e=>l("success",o,e))).catch((e=>l("error",s,e))),c},ot.success=st("success"),ot.info=st("info"),ot.error=st("error"),ot.warning=st("warning"),ot.warn=ot.warning,ot.dark=(e,t)=>it(e,rt("default",{theme:"dark",...t})),ot.dismiss=function(e){!function(e){var t;if(qe()){if(null==e||Fe(t=e)||Le(t))je.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){const t=je.get(e.containerId);t?t.removeToast(e.id):je.forEach((t=>{t.removeToast(e.id)}))}}else Ue=Ue.filter((t=>null!=e&&t.options.toastId!==e))}(e)},ot.clearWaitingQueue=function(e){void 0===e&&(e={}),je.forEach((t=>{!t.props.limit||e.containerId&&t.id!==e.containerId||t.clearQueue()}))},ot.isActive=Ke,ot.update=function(e,t){void 0===t&&(t={});const n=((e,t)=>{var n;let{containerId:i}=t;return null==(n=je.get(i||1))?void 0:n.toasts.get(e)})(e,t);if(n){const{props:i,content:r}=n,s={delay:100,...i,...t,toastId:t.toastId||e,updateId:tt()};s.toastId!==e&&(s.staleId=e);const o=s.render||r;delete s.render,it(o,s)}},ot.done=e=>{ot.update(e,{progress:1})},ot.onChange=function(e){return ze.add(e),()=>{ze.delete(e)}},ot.play=e=>Qe(!0,e),ot.pause=e=>Qe(!1,e);const at="undefined"!=typeof window?s.useLayoutEffect:s.useEffect,lt=e=>{let{theme:t,type:n,isLoading:i,...r}=e;return s.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-".concat(n,")"),...r})},ct={info:function(e){return s.createElement(lt,{...e},s.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return s.createElement(lt,{...e},s.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return s.createElement(lt,{...e},s.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return s.createElement(lt,{...e},s.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return s.createElement("div",{className:"Toastify__spinner"})}},ut=e=>{const{isRunning:t,preventExitTransition:n,toastRef:i,eventHandlers:r,playToast:o}=$e(e),{closeButton:a,children:l,autoClose:c,onClick:u,type:d,hideProgressBar:h,closeToast:p,transition:g,position:f,className:m,style:v,bodyClassName:y,bodyStyle:C,progressClassName:w,progressStyle:b,updateId:S,role:E,progress:x,rtl:A,toastId:T,deleteToast:_,isIn:R,isLoading:D,closeOnClick:M,theme:P}=e,I=Oe("Toastify__toast","Toastify__toast-theme--".concat(P),"Toastify__toast--".concat(d),{"Toastify__toast--rtl":A},{"Toastify__toast--close-on-click":M}),N=Be(m)?m({rtl:A,position:f,type:d,defaultClassName:I}):Oe(I,m),k=function(e){let{theme:t,type:n,isLoading:i,icon:r}=e,o=null;const a={theme:t,type:n};return!1===r||(Be(r)?o=r({...a,isLoading:i}):(0,s.isValidElement)(r)?o=(0,s.cloneElement)(r,a):i?o=ct.spinner():(e=>e in ct)(n)&&(o=ct[n](a))),o}(e),O=!!x||!c,L={closeToast:p,type:d,theme:P};let F=null;return!1===a||(F=Be(a)?a(L):(0,s.isValidElement)(a)?(0,s.cloneElement)(a,L):function(e){let{closeToast:t,theme:n,ariaLabel:i="close"}=e;return s.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(n),type:"button",onClick:e=>{e.stopPropagation(),t(e)},"aria-label":i},s.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},s.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(L)),s.createElement(g,{isIn:R,done:_,position:f,preventExitTransition:n,nodeRef:i,playToast:o},s.createElement("div",{id:T,onClick:u,"data-in":R,className:N,...r,style:v,ref:i},s.createElement("div",{...R&&{role:E},className:Be(y)?y({type:d}):Oe("Toastify__toast-body",y),style:C},null!=k&&s.createElement("div",{className:Oe("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!D})},k),s.createElement("div",null,l)),F,s.createElement(Je,{...S&&!O?{key:"pb-".concat(S)}:{},rtl:A,theme:P,delay:c,isRunning:t,isIn:R,closeToast:p,hide:h,type:d,style:b,className:w,controlledProgress:O,progress:x||0})))},dt=function(e,t){return void 0===t&&(t=!1),{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},ht=He(dt("bounce",!0)),pt=(He(dt("slide",!0)),He(dt("zoom")),He(dt("flip")),{position:"top-right",transition:ht,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"});function gt(e){let t={...pt,...e};const n=e.stacked,[i,r]=(0,s.useState)(!0),o=(0,s.useRef)(null),{getToastToRender:a,isToastActive:l,count:c}=Ze(t),{className:u,style:d,rtl:h,containerId:p}=t;function g(e){const t=Oe("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":h});return Be(u)?u({position:e,rtl:h,defaultClassName:t}):Oe(t,Ve(u))}function f(){n&&(r(!0),ot.play())}return at((()=>{if(n){var e;const n=o.current.querySelectorAll('[data-in="true"]'),r=12,s=null==(e=t.position)?void 0:e.includes("top");let a=0,l=0;Array.from(n).reverse().forEach(((e,t)=>{const n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed="".concat(i)),n.dataset.pos||(n.dataset.pos=s?"top":"bot");const o=a*(i?.2:1)+(i?0:r*t);n.style.setProperty("--y","".concat(s?o:-1*o,"px")),n.style.setProperty("--g","".concat(r)),n.style.setProperty("--s",""+(1-(i?l:0))),a+=n.offsetHeight,l+=.025}))}}),[i,c,n]),s.createElement("div",{ref:o,className:"Toastify",id:p,onMouseEnter:()=>{n&&(r(!1),ot.pause())},onMouseLeave:f},a(((e,t)=>{const i=t.length?{...d}:{...d,pointerEvents:"none"};return s.createElement("div",{className:g(e),style:i,key:"container-".concat(e)},t.map((e=>{let{content:t,props:i}=e;return s.createElement(ut,{...i,stacked:n,collapseAll:f,isIn:l(i.toastId,i.containerId),style:i.style,key:"toast-".concat(i.key)},t)})))})))}var ft=n(6940),mt=n(8666),vt=n(8621),yt=n.n(vt);const Ct=Object.prototype.toString,wt=Error.prototype.toString,bt=RegExp.prototype.toString,St="undefined"!==typeof Symbol?Symbol.prototype.toString:()=>"",Et=/^Symbol\((.*)\)(.*)$/;function xt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||!0===e||!1===e)return""+e;const n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?'"'.concat(e,'"'):e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return St.call(e).replace(Et,"Symbol($1)");const i=Ct.call(e).slice(8,-1);return"Date"===i?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===i||e instanceof Error?"["+wt.call(e)+"]":"RegExp"===i?bt.call(e):null}function At(e,t){let n=xt(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){let i=xt(this[e],t);return null!==i?i:n}),2)}function Tt(e){return null==e?[]:[].concat(e)}let _t,Rt,Dt,Mt=/\$\{\s*(\w+)\s*\}/g;_t=Symbol.toStringTag;class Pt{constructor(e,t,n,i){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[_t]="Error",this.name="ValidationError",this.value=t,this.path=n,this.type=i,this.errors=[],this.inner=[],Tt(e).forEach((e=>{if(It.isError(e)){this.errors.push(...e.errors);const t=e.inner.length?e.inner:[e];this.inner.push(...t)}else this.errors.push(e)})),this.message=this.errors.length>1?"".concat(this.errors.length," errors occurred"):this.errors[0]}}Rt=Symbol.hasInstance,Dt=Symbol.toStringTag;class It extends Error{static formatError(e,t){const n=t.label||t.path||"this";return n!==t.path&&(t=Object.assign({},t,{path:n})),"string"===typeof e?e.replace(Mt,((e,n)=>At(t[n]))):"function"===typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,n,i,r){const s=new Pt(e,t,n,i);if(r)return s;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[Dt]="Error",this.name=s.name,this.message=s.message,this.type=s.type,this.value=s.value,this.path=s.path,this.errors=s.errors,this.inner=s.inner,Error.captureStackTrace&&Error.captureStackTrace(this,It)}static[Rt](e){return Pt[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let Nt={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:e=>{let{path:t,type:n,value:i,originalValue:r}=e;const s=null!=r&&r!==i?" (cast from the value `".concat(At(r,!0),"`)."):".";return"mixed"!==n?"".concat(t," must be a `").concat(n,"` type, ")+"but the final value was: `".concat(At(i,!0),"`")+s:"".concat(t," must match the configured type. ")+"The validated value was: `".concat(At(i,!0),"`")+s}},kt={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Ot={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},Lt={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Ft={isValue:"${path} field must be ${value}"},Bt={noUnknown:"${path} field has unspecified keys: ${unknown}"},Vt={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},Gt={notType:e=>{const{path:t,value:n,spec:i}=e,r=i.types.length;if(Array.isArray(n)){if(n.length<r)return"".concat(t," tuple value has too few items, expected a length of ").concat(r," but got ").concat(n.length," for value: `").concat(At(n,!0),"`");if(n.length>r)return"".concat(t," tuple value has too many items, expected a length of ").concat(r," but got ").concat(n.length," for value: `").concat(At(n,!0),"`")}return It.formatError(Nt.notType,e)}};Object.assign(Object.create(null),{mixed:Nt,string:kt,number:Ot,date:Lt,object:Bt,array:Vt,boolean:Ft,tuple:Gt});const Ht=e=>e&&e.__isYupSchema__;class Wt{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:i,otherwise:r}=t,s="function"===typeof n?n:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.every((e=>e===n))};return new Wt(e,((e,t)=>{var n;let o=s(...e)?i:r;return null!=(n=null==o?void 0:o(t))?n:t}))}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let n=this.refs.map((e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context))),i=this.fn(n,e,t);if(void 0===i||i===e)return e;if(!Ht(i))throw new TypeError("conditions must return a schema object");return i.resolve(t)}}const jt="$",Ut=".";class zt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===jt,this.isValue=this.key[0]===Ut,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?jt:this.isValue?Ut:"";this.path=this.key.slice(n.length),this.getter=this.path&&(0,ft.getter)(this.path,!0),this.map=t.map}getValue(e,t,n){let i=this.isContext?n:this.isValue?e:t;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return"Ref(".concat(this.key,")")}static isRef(e){return e&&e.__isYupRef}}zt.prototype.__isYupRef=!0;const Yt=e=>null==e;function qt(e){function t(t,n,i){let{value:r,path:s="",options:o,originalValue:a,schema:l}=t;const{name:c,test:u,params:d,message:h,skipAbsent:p}=e;let{parent:g,context:f,abortEarly:m=l.spec.abortEarly,disableStackTrace:v=l.spec.disableStackTrace}=o;function y(e){return zt.isRef(e)?e.getValue(r,g,f):e}function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.assign({value:r,originalValue:a,label:l.spec.label,path:e.path||s,spec:l.spec,disableStackTrace:e.disableStackTrace||v},d,e.params);for(const i of Object.keys(t))t[i]=y(t[i]);const n=new It(It.formatError(e.message||h,t),r,t.path,e.type||c,t.disableStackTrace);return n.params=t,n}const w=m?n:i;let b={path:s,parent:g,type:c,from:o.from,createError:C,resolve:y,options:o,originalValue:a,schema:l};const S=e=>{It.isError(e)?w(e):e?i(null):w(C())},E=e=>{It.isError(e)?w(e):n(e)};if(p&&Yt(r))return S(!0);let x;try{var A;if(x=u.call(b,r,b),"function"===typeof(null==(A=x)?void 0:A.then)){if(o.sync)throw new Error('Validation test of type: "'.concat(b.type,'" returned a Promise during a synchronous validate. ')+"This test will finish after the validate call has returned");return Promise.resolve(x).then(S,E)}}catch(T){return void E(T)}S(x)}return t.OPTIONS=e,t}function Kt(e,t,n){let i,r,s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return t?((0,ft.forEach)(t,((a,l,c)=>{let u=l?a.slice(1,a.length-1):a,d="tuple"===(e=e.resolve({context:o,parent:i,value:n})).type,h=c?parseInt(u,10):0;if(e.innerType||d){if(d&&!c)throw new Error('Yup.reach cannot implicitly index into a tuple type. the path part "'.concat(s,'" must contain an index to the tuple element, e.g. "').concat(s,'[0]"'));if(n&&h>=n.length)throw new Error("Yup.reach cannot resolve an array item at index: ".concat(a,", in the path: ").concat(t,". ")+"because there is no value at that index. ");i=n,n=n&&n[h],e=d?e.spec.types[h]:e.innerType}if(!c){if(!e.fields||!e.fields[u])throw new Error("The schema does not contain the path: ".concat(t,". ")+"(failed at: ".concat(s,' which is a type: "').concat(e.type,'")'));i=n,n=n&&n[u],e=e.fields[u]}r=u,s=l?"["+a+"]":"."+a})),{schema:e,parent:i,parentPath:r}):{parent:i,parentPath:t,schema:e}}class Xt extends Set{describe(){const e=[];for(const t of this.values())e.push(zt.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const n of this.values())t.push(e(n));return t}clone(){return new Xt(this.values())}merge(e,t){const n=this.clone();return e.forEach((e=>n.add(e))),t.forEach((e=>n.delete(e))),n}}function Qt(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(Ht(e)||!e||"object"!==typeof e)return e;if(n.has(e))return n.get(e);if(e instanceof Date)t=new Date(e.getTime()),n.set(e,t);else if(e instanceof RegExp)t=new RegExp(e),n.set(e,t);else if(Array.isArray(e)){t=new Array(e.length),n.set(e,t);for(let i=0;i<e.length;i++)t[i]=Qt(e[i],n)}else if(e instanceof Map){t=new Map,n.set(e,t);for(const[i,r]of e.entries())t.set(i,Qt(r,n))}else if(e instanceof Set){t=new Set,n.set(e,t);for(const i of e)t.add(Qt(i,n))}else{if(!(e instanceof Object))throw Error("Unable to clone ".concat(e));t={},n.set(e,t);for(const[i,r]of Object.entries(e))t[i]=Qt(r,n)}return t}class Zt{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new Xt,this._blacklist=new Xt,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(Nt.notType)})),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==e?void 0:e.spec),this.withMutation((e=>{e.nonNullable()}))}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=Qt(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(){if(0===arguments.length)return this.spec.meta;let e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},arguments.length<=0?void 0:arguments[0]),e}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError("You cannot `concat()` schema's of different types: ".concat(this.type," and ").concat(e.type));let t=this,n=e.clone();const i=Object.assign({},t.spec,n.spec);return n.spec=i,n.internalTests=Object.assign({},t.internalTests,n.internalTests),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((t=>{e.tests.forEach((e=>{t.test(e.OPTIONS)}))})),n.transforms=[...t.transforms,...n.transforms],n}isType(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce(((t,n)=>n.resolve(t,e)),t),t=t.resolve(e)}return t}resolveOptions(e){var t,n,i,r;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(n=e.abortEarly)?n:this.spec.abortEarly,recursive:null!=(i=e.recursive)?i:this.spec.recursive,disableStackTrace:null!=(r=e.disableStackTrace)?r:this.spec.disableStackTrace})}cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resolve(Object.assign({value:e},t)),i="ignore-optionality"===t.assert,r=n._cast(e,t);if(!1!==t.assert&&!n.isType(r)){if(i&&Yt(r))return r;let s=At(e),o=At(r);throw new TypeError("The value of ".concat(t.path||"field"," could not be cast to a value ")+'that satisfies the schema type: "'.concat(n.type,'". \n\n')+"attempted value: ".concat(s," \n")+(o!==s?"result of cast: ".concat(o):""))}return r}_cast(e,t){let n=void 0===e?e:this.transforms.reduce(((t,n)=>n.call(this,t,e,this)),e);return void 0===n&&(n=this.getDefault(t)),n}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,{path:r,originalValue:s=e,strict:o=this.spec.strict}=t,a=e;o||(a=this._cast(a,Object.assign({assert:!1},t)));let l=[];for(let c of Object.values(this.internalTests))c&&l.push(c);this.runTests({path:r,value:a,originalValue:s,options:t,tests:l},n,(e=>{if(e.length)return i(e,a);this.runTests({path:r,value:a,originalValue:s,options:t,tests:this.tests},n,i)}))}runTests(e,t,n){let i=!1,{tests:r,value:s,originalValue:o,path:a,options:l}=e,c=e=>{i||(i=!0,t(e,s))},u=e=>{i||(i=!0,n(e,s))},d=r.length,h=[];if(!d)return u([]);let p={value:s,originalValue:o,path:a,options:l,schema:this};for(let g=0;g<r.length;g++){(0,r[g])(p,c,(function(e){e&&(Array.isArray(e)?h.push(...e):h.push(e)),--d<=0&&u(h)}))}}asNestedTest(e){let{key:t,index:n,parent:i,parentPath:r,originalParent:s,options:o}=e;const a=null!=t?t:n;if(null==a)throw TypeError("Must include `key` or `index` for nested validations");const l="number"===typeof a;let c=i[a];const u=Object.assign({},o,{strict:!0,parent:i,value:c,originalValue:s[a],key:void 0,[l?"index":"key"]:a,path:l||a.includes(".")?"".concat(r||"","[").concat(l?a:'"'.concat(a,'"'),"]"):(r?"".concat(r,"."):"")+t});return(e,t,n)=>this.resolve(u)._validate(c,u,t,n)}validate(e,t){var n;let i=this.resolve(Object.assign({},t,{value:e})),r=null!=(n=null==t?void 0:t.disableStackTrace)?n:i.spec.disableStackTrace;return new Promise(((n,s)=>i._validate(e,t,((e,t)=>{It.isError(e)&&(e.value=t),s(e)}),((e,t)=>{e.length?s(new It(e,t,void 0,void 0,r)):n(t)}))))}validateSync(e,t){var n;let i,r=this.resolve(Object.assign({},t,{value:e})),s=null!=(n=null==t?void 0:t.disableStackTrace)?n:r.spec.disableStackTrace;return r._validate(e,Object.assign({},t,{sync:!0}),((e,t)=>{throw It.isError(e)&&(e.value=t),e}),((t,n)=>{if(t.length)throw new It(t,e,void 0,void 0,s);i=n})),i}isValid(e,t){return this.validate(e,t).then((()=>!0),(e=>{if(It.isError(e))return!1;throw e}))}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(n){if(It.isError(n))return!1;throw n}}_getDefault(e){let t=this.spec.default;return null==t?t:"function"===typeof t?t.call(this,e):Qt(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){if(0===arguments.length)return this._getDefault();return this.clone({default:e})}strict(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.clone({strict:e})}nullability(e,t){const n=this.clone({nullable:e});return n.internalTests.nullable=qt({message:t,name:"nullable",test(e){return null!==e||this.schema.spec.nullable}}),n}optionality(e,t){const n=this.clone({optional:e});return n.internalTests.optionality=qt({message:t,name:"optionality",test(e){return void 0!==e||this.schema.spec.optional}}),n}optional(){return this.optionality(!0)}defined(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt.defined;return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt.notNull;return this.nullability(!1,e)}required(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt.required;return this.clone().withMutation((t=>t.nonNullable(e).defined(e)))}notRequired(){return this.clone().withMutation((e=>e.nullable().optional()))}transform(e){let t=this.clone();return t.transforms.push(e),t}test(){let e;if(e=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]},void 0===e.message&&(e.message=Nt.default),"function"!==typeof e.test)throw new TypeError("`test` is a required parameters");let t=this.clone(),n=qt(e),i=e.exclusive||e.name&&!0===t.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(t.exclusiveTests[e.name]=!!e.exclusive),t.tests=t.tests.filter((t=>{if(t.OPTIONS.name===e.name){if(i)return!1;if(t.OPTIONS.test===n.OPTIONS.test)return!1}return!0})),t.tests.push(n),t}when(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");let n=this.clone(),i=Tt(e).map((e=>new zt(e)));return i.forEach((e=>{e.isSibling&&n.deps.push(e.key)})),n.conditions.push("function"===typeof t?new Wt(i,t):Wt.fromOptions(i,t)),n}typeError(e){let t=this.clone();return t.internalTests.typeError=qt({message:e,name:"typeError",skipAbsent:!0,test(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}oneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nt.oneOf,n=this.clone();return e.forEach((e=>{n._whitelist.add(e),n._blacklist.delete(e)})),n.internalTests.whiteList=qt({message:t,name:"oneOf",skipAbsent:!0,test(e){let t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}notOneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nt.notOneOf,n=this.clone();return e.forEach((e=>{n._blacklist.add(e),n._whitelist.delete(e)})),n.internalTests.blacklist=qt({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}strip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:n,meta:i,optional:r,nullable:s}=t.spec,o={meta:i,label:n,optional:r,nullable:s,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map((e=>({name:e.OPTIONS.name,params:e.OPTIONS.params}))).filter(((e,t,n)=>n.findIndex((t=>t.name===e.name))===t))};return o}}Zt.prototype.__isYupSchema__=!0;for(const n of["validate","validateSync"])Zt.prototype["".concat(n,"At")]=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{parent:r,parentPath:s,schema:o}=Kt(this,e,t,i.context);return o[n](r&&r[s],Object.assign({},i,{parent:r,path:e}))};for(const n of["equals","is"])Zt.prototype[n]=Zt.prototype.oneOf;for(const n of["not","nope"])Zt.prototype[n]=Zt.prototype.notOneOf;const $t=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function Jt(e){var t,n;const i=$t.exec(e);return i?{year:en(i[1]),month:en(i[2],1)-1,day:en(i[3],1),hour:en(i[4]),minute:en(i[5]),second:en(i[6]),millisecond:i[7]?en(i[7].substring(0,3)):0,precision:null!=(t=null==(n=i[7])?void 0:n.length)?t:void 0,z:i[8]||void 0,plusMinus:i[9]||void 0,hourOffset:en(i[10]),minuteOffset:en(i[11])}:null}function en(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number(e)||t}let tn=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,nn=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,rn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,sn=new RegExp("".concat("^\\d{4}-\\d{2}-\\d{2}","T").concat("\\d{2}:\\d{2}:\\d{2}","(\\.\\d+)?").concat("(([+-]\\d{2}(:?\\d{2})?)|Z)","$")),on=e=>Yt(e)||e===e.trim(),an={}.toString();function ln(){return new cn}class cn extends Zt{constructor(){super({type:"string",check:e=>(e instanceof String&&(e=e.valueOf()),"string"===typeof e)}),this.withMutation((()=>{this.transform(((e,t,n)=>{if(!n.spec.coerce||n.isType(e))return e;if(Array.isArray(e))return e;const i=null!=e&&e.toString?e.toString():e;return i===an?e:i}))}))}required(e){return super.required(e).withMutation((t=>t.test({message:e||Nt.required,name:"required",skipAbsent:!0,test:e=>!!e.length})))}notRequired(){return super.notRequired().withMutation((e=>(e.tests=e.tests.filter((e=>"required"!==e.OPTIONS.name)),e)))}length(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kt.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kt.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kt.max;return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}matches(e,t){let n,i,r=!1;return t&&("object"===typeof t?({excludeEmptyString:r=!1,message:n,name:i}=t):n=t),this.test({name:i||"matches",message:n||kt.matches,params:{regex:e},skipAbsent:!0,test:t=>""===t&&r||-1!==t.search(e)})}email(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt.email;return this.matches(tn,{name:"email",message:e,excludeEmptyString:!0})}url(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt.url;return this.matches(nn,{name:"url",message:e,excludeEmptyString:!0})}uuid(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt.uuid;return this.matches(rn,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t,n,i="";return e&&("object"===typeof e?({message:i="",allowOffset:t=!1,precision:n}=e):i=e),this.matches(sn,{name:"datetime",message:i||kt.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:i||kt.datetime_offset,params:{allowOffset:t},skipAbsent:!0,test:e=>{if(!e||t)return!0;const n=Jt(e);return!!n&&!!n.z}}).test({name:"datetime_precision",message:i||kt.datetime_precision,params:{precision:n},skipAbsent:!0,test:e=>{if(!e||void 0==n)return!0;const t=Jt(e);return!!t&&t.precision===n}})}ensure(){return this.default("").transform((e=>null===e?"":e))}trim(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt.trim;return this.transform((e=>null!=e?e.trim():e)).test({message:e,name:"trim",test:on})}lowercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt.lowercase;return this.transform((e=>Yt(e)?e:e.toLowerCase())).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>Yt(e)||e===e.toLowerCase()})}uppercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt.uppercase;return this.transform((e=>Yt(e)?e:e.toUpperCase())).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>Yt(e)||e===e.toUpperCase()})}}ln.prototype=cn.prototype;function un(){return new dn}class dn extends Zt{constructor(){super({type:"number",check:e=>(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&!(e=>e!=+e)(e))}),this.withMutation((()=>{this.transform(((e,t,n)=>{if(!n.spec.coerce)return e;let i=e;if("string"===typeof i){if(i=i.replace(/\s/g,""),""===i)return NaN;i=+i}return n.isType(i)||null===i?i:parseFloat(i)}))}))}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t>=this.resolve(e)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.max;return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t<=this.resolve(e)}})}lessThan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.lessThan;return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(t){return t<this.resolve(e)}})}moreThan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.moreThan;return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(t){return t>this.resolve(e)}})}positive(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot.positive;return this.moreThan(0,e)}negative(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot.negative;return this.lessThan(0,e)}integer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot.integer;return this.test({name:"integer",message:e,skipAbsent:!0,test:e=>Number.isInteger(e)})}truncate(){return this.transform((e=>Yt(e)?e:0|e))}round(e){var t;let n=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((t=>Yt(t)?t:Math[e](t)))}}un.prototype=dn.prototype;let hn=new Date("");function pn(){return new gn}class gn extends Zt{constructor(){super({type:"date",check(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),this.withMutation((()=>{this.transform(((e,t,n)=>!n.spec.coerce||n.isType(e)||null===e?e:(e=function(e){const t=Jt(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(void 0===t.z&&void 0===t.plusMinus)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let n=0;return"Z"!==t.z&&void 0!==t.plusMinus&&(n=60*t.hourOffset+t.minuteOffset,"+"===t.plusMinus&&(n=0-n)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+n,t.second,t.millisecond)}(e),isNaN(e)?gn.INVALID_DATE:new Date(e))))}))}prepareParam(e,t){let n;if(zt.isRef(e))n=e;else{let i=this.cast(e);if(!this._typeCheck(i))throw new TypeError("`".concat(t,"` must be a Date or a value that can be `cast()` to a Date"));n=i}return n}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt.min,n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(e){return e>=this.resolve(n)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt.max,n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(e){return e<=this.resolve(n)}})}}function fn(e,t){let n=1/0;return e.some(((e,i)=>{var r;if(null!=(r=t.path)&&r.includes(e))return n=i,!0})),n}function mn(e){return(t,n)=>fn(e,t)-fn(e,n)}gn.INVALID_DATE=hn,pn.prototype=gn.prototype,pn.INVALID_DATE=hn;const vn=(e,t,n)=>{if("string"!==typeof e)return e;let i=e;try{i=JSON.parse(e)}catch(r){}return n.isType(i)?i:e};function yn(e){if("fields"in e){const t={};for(const[n,i]of Object.entries(e.fields))t[n]=yn(i);return e.setFields(t)}if("array"===e.type){const t=e.optional();return t.innerType&&(t.innerType=yn(t.innerType)),t}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(yn)}):"optional"in e?e.optional():e}let Cn=e=>"[object Object]"===Object.prototype.toString.call(e);const wn=mn([]);function bn(e){return new Sn(e)}class Sn extends Zt{constructor(e){super({type:"object",check:e=>Cn(e)||"function"===typeof e}),this.fields=Object.create(null),this._sortErrors=wn,this._nodes=[],this._excludedEdges=[],this.withMutation((()=>{e&&this.shape(e)}))}_cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;let i=super._cast(e,t);if(void 0===i)return this.getDefault(t);if(!this._typeCheck(i))return i;let r=this.fields,s=null!=(n=t.stripUnknown)?n:this.spec.noUnknown,o=[].concat(this._nodes,Object.keys(i).filter((e=>!this._nodes.includes(e)))),a={},l=Object.assign({},t,{parent:a,__validating:t.__validating||!1}),c=!1;for(const u of o){let e=r[u],n=u in i;if(e){let n,r=i[u];l.path=(t.path?"".concat(t.path,"."):"")+u,e=e.resolve({value:r,context:t.context,parent:a});let s=e instanceof Zt?e.spec:void 0,o=null==s?void 0:s.strict;if(null!=s&&s.strip){c=c||u in i;continue}n=t.__validating&&o?i[u]:e.cast(i[u],l),void 0!==n&&(a[u]=n)}else n&&!s&&(a[u]=i[u]);n===u in a&&a[u]===i[u]||(c=!0)}return c?a:i}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,{from:r=[],originalValue:s=e,recursive:o=this.spec.recursive}=t;t.from=[{schema:this,value:s},...r],t.__validating=!0,t.originalValue=s,super._validate(e,t,n,((e,r)=>{if(!o||!Cn(r))return void i(e,r);s=s||r;let a=[];for(let n of this._nodes){let e=this.fields[n];e&&!zt.isRef(e)&&a.push(e.asNestedTest({options:t,key:n,parent:r,parentPath:t.path,originalParent:s}))}this.runTests({tests:a,value:r,originalValue:s,options:t},n,(t=>{i(t.sort(this._sortErrors).concat(e),r)}))}))}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[i,r]of Object.entries(this.fields)){const e=n[i];n[i]=void 0===e?r:e}return t.withMutation((t=>t.setFields(n,[...this._excludedEdges,...e._excludedEdges])))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach((n=>{var i;const r=this.fields[n];let s=e;null!=(i=s)&&i.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[n]})),t[n]=r&&"getDefault"in r?r.getDefault(s):void 0})),t}setFields(e,t){let n=this.clone();return n.fields=e,n._nodes=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],i=new Set,r=new Set(t.map((e=>{let[t,n]=e;return"".concat(t,"-").concat(n)})));function s(e,t){let s=(0,ft.split)(e)[0];i.add(s),r.has("".concat(t,"-").concat(s))||n.push([t,s])}for(const o of Object.keys(e)){let t=e[o];i.add(o),zt.isRef(t)&&t.isSibling?s(t.path,o):Ht(t)&&"deps"in t&&t.deps.forEach((e=>s(e,o)))}return yt().array(Array.from(i),n).reverse()}(e,t),n._sortErrors=mn(Object.keys(e)),t&&(n._excludedEdges=t),n}shape(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.clone().withMutation((n=>{let i=n._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),i=[...n._excludedEdges,...t]),n.setFields(Object.assign(n.fields,e),i)}))}partial(){const e={};for(const[t,n]of Object.entries(this.fields))e[t]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(e)}deepPartial(){return yn(this)}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.setFields(t,this._excludedEdges.filter((t=>{let[n,i]=t;return e.includes(n)&&e.includes(i)})))}omit(e){const t=[];for(const n of Object.keys(this.fields))e.includes(n)||t.push(n);return this.pick(t)}from(e,t,n){let i=(0,ft.getter)(e,!0);return this.transform((r=>{if(!r)return r;let s=r;return((e,t)=>{const n=[...(0,ft.normalizePath)(t)];if(1===n.length)return n[0]in e;let i=n.pop(),r=(0,ft.getter)((0,ft.join)(n),!0)(e);return!(!r||!(i in r))})(r,e)&&(s=Object.assign({},r),n||delete s[e],s[t]=i(r)),s}))}json(){return this.transform(vn)}noUnknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bt.noUnknown;"boolean"!==typeof e&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const n=function(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter((e=>-1===n.indexOf(e)))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bt.noUnknown;return this.noUnknown(!e,t)}transformKeys(e){return this.transform((t=>{if(!t)return t;const n={};for(const i of Object.keys(t))n[e(i)]=t[i];return n}))}camelCase(){return this.transformKeys(mt.camelCase)}snakeCase(){return this.transformKeys(mt.snakeCase)}constantCase(){return this.transformKeys((e=>(0,mt.snakeCase)(e).toUpperCase()))}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);n.fields={};for(const[r,s]of Object.entries(t.fields)){var i;let t=e;null!=(i=t)&&i.value&&(t=Object.assign({},t,{parent:t.value,value:t.value[r]})),n.fields[r]=s.describe(t)}return n}}bn.prototype=Sn.prototype;function En(e){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(e)}function xn(e){var t=function(e,t){if("object"!=En(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=En(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==En(t)?t:t+""}function An(e,t,n){return(t=xn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tn=Symbol.for("immer-nothing"),_n=Symbol.for("immer-draftable"),Rn=Symbol.for("immer-state");function Dn(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Mn=Object.getPrototypeOf;function Pn(e){return!!e&&!!e[Rn]}function In(e){var t;return!!e&&(kn(e)||Array.isArray(e)||!!e[_n]||!(null===(t=e.constructor)||void 0===t||!t[_n])||Vn(e)||Gn(e))}var Nn=Object.prototype.constructor.toString();function kn(e){if(!e||"object"!==typeof e)return!1;const t=Mn(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Nn}function On(e,t){0===Ln(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,i)=>t(i,n,e)))}function Ln(e){const t=e[Rn];return t?t.type_:Array.isArray(e)?1:Vn(e)?2:Gn(e)?3:0}function Fn(e,t){return 2===Ln(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Bn(e,t,n){const i=Ln(e);2===i?e.set(t,n):3===i?e.add(n):e[t]=n}function Vn(e){return e instanceof Map}function Gn(e){return e instanceof Set}function Hn(e){return e.copy_||e.base_}function Wn(e,t){if(Vn(e))return new Map(e);if(Gn(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=kn(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Rn];let n=Reflect.ownKeys(t);for(let i=0;i<n.length;i++){const r=n[i],s=t[r];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[r]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[r]})}return Object.create(Mn(e),t)}{const t=Mn(e);if(null!==t&&n)return{...e};const i=Object.create(t);return Object.assign(i,e)}}function jn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return zn(e)||Pn(e)||!In(e)||(Ln(e)>1&&(e.set=e.add=e.clear=e.delete=Un),Object.freeze(e),t&&Object.entries(e).forEach((e=>{let[t,n]=e;return jn(n,!0)}))),e}function Un(){Dn(2)}function zn(e){return Object.isFrozen(e)}var Yn,qn={};function Kn(e){const t=qn[e];return t||Dn(0),t}function Xn(){return Yn}function Qn(e,t){t&&(Kn("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Zn(e){$n(e),e.drafts_.forEach(ei),e.drafts_=null}function $n(e){e===Yn&&(Yn=e.parent_)}function Jn(e){return Yn={drafts_:[],parent_:Yn,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ei(e){const t=e[Rn];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function ti(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Rn].modified_&&(Zn(t),Dn(4)),In(e)&&(e=ni(t,e),t.parent_||ri(t,e)),t.patches_&&Kn("Patches").generateReplacementPatches_(n[Rn].base_,e,t.patches_,t.inversePatches_)):e=ni(t,n,[]),Zn(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Tn?e:void 0}function ni(e,t,n){if(zn(t))return t;const i=t[Rn];if(!i)return On(t,((r,s)=>ii(e,i,t,r,s,n))),t;if(i.scope_!==e)return t;if(!i.modified_)return ri(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const t=i.copy_;let r=t,s=!1;3===i.type_&&(r=new Set(t),t.clear(),s=!0),On(r,((r,o)=>ii(e,i,t,r,o,n,s))),ri(e,t,!1),n&&e.patches_&&Kn("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function ii(e,t,n,i,r,s,o){if(Pn(r)){const o=ni(e,r,s&&t&&3!==t.type_&&!Fn(t.assigned_,i)?s.concat(i):void 0);if(Bn(n,i,o),!Pn(o))return;e.canAutoFreeze_=!1}else o&&n.add(r);if(In(r)&&!zn(r)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ni(e,r),t&&t.scope_.parent_||"symbol"===typeof i||!Object.prototype.propertyIsEnumerable.call(n,i)||ri(e,r)}}function ri(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&jn(t,n)}var si={get(e,t){if(t===Rn)return e;const n=Hn(e);if(!Fn(n,t))return function(e,t,n){var i;const r=li(t,n);return r?"value"in r?r.value:null===(i=r.get)||void 0===i?void 0:i.call(e.draft_):void 0}(e,n,t);const i=n[t];return e.finalized_||!In(i)?i:i===ai(e.base_,t)?(ui(e),e.copy_[t]=di(i,e)):i},has:(e,t)=>t in Hn(e),ownKeys:e=>Reflect.ownKeys(Hn(e)),set(e,t,n){const i=li(Hn(e),t);if(null!==i&&void 0!==i&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const i=ai(Hn(e),t),r=null===i||void 0===i?void 0:i[Rn];if(r&&r.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,i)&&(void 0!==n||Fn(e.base_,t)))return!0;ui(e),ci(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==ai(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,ui(e),ci(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Hn(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:i.enumerable,value:n[t]}:i},defineProperty(){Dn(11)},getPrototypeOf:e=>Mn(e.base_),setPrototypeOf(){Dn(12)}},oi={};function ai(e,t){const n=e[Rn];return(n?Hn(n):e)[t]}function li(e,t){if(!(t in e))return;let n=Mn(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Mn(n)}}function ci(e){e.modified_||(e.modified_=!0,e.parent_&&ci(e.parent_))}function ui(e){e.copy_||(e.copy_=Wn(e.base_,e.scope_.immer_.useStrictShallowCopy_))}On(si,((e,t)=>{oi[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),oi.deleteProperty=function(e,t){return oi.set.call(this,e,t,void 0)},oi.set=function(e,t,n){return si.set.call(this,e[0],t,n,e[0])};function di(e,t){const n=Vn(e)?Kn("MapSet").proxyMap_(e,t):Gn(e)?Kn("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:Xn(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,s=si;n&&(r=[i],s=oi);const{revoke:o,proxy:a}=Proxy.revocable(r,s);return i.draft_=a,i.revoke_=o,a}(e,t);return(t?t.scope_:Xn()).drafts_.push(n),n}function hi(e){return Pn(e)||Dn(10),pi(e)}function pi(e){if(!In(e)||zn(e))return e;const t=e[Rn];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Wn(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Wn(e,!0);return On(n,((e,t)=>{Bn(n,e,pi(t))})),t&&(t.finalized_=!1),n}var gi=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const i=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return i.produce(e,(e=>t.call(this,e,...s)))}}let i;if("function"!==typeof t&&Dn(6),void 0!==n&&"function"!==typeof n&&Dn(7),In(e)){const r=Jn(this),s=di(e,void 0);let o=!0;try{i=t(s),o=!1}finally{o?Zn(r):$n(r)}return Qn(r,n),ti(i,r)}if(!e||"object"!==typeof e){if(i=t(e),void 0===i&&(i=e),i===Tn&&(i=void 0),this.autoFreeze_&&jn(i,!0),n){const t=[],r=[];Kn("Patches").generateReplacementPatches_(e,i,t,r),n(t,r)}return i}Dn(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return t.produceWithPatches(n,(t=>e(t,...r)))};let i,r;const s=this.produce(e,n,((e,t)=>{i=e,r=t}));return[s,i,r]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){In(e)||Dn(8),Pn(e)&&(e=hi(e));const t=Jn(this),n=di(e,void 0);return n[Rn].isManual_=!0,$n(t),n}finishDraft(e,t){const n=e&&e[Rn];n&&n.isManual_||Dn(9);const{scope_:i}=n;return Qn(i,t),ti(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}n>-1&&(t=t.slice(n+1));const i=Kn("Patches").applyPatches_;return Pn(e)?i(e,t):this.produce(e,(e=>i(e,t)))}},fi=gi.produce;gi.produceWithPatches.bind(gi),gi.setAutoFreeze.bind(gi),gi.setUseStrictShallowCopy.bind(gi),gi.applyPatches.bind(gi),gi.createDraft.bind(gi),gi.finishDraft.bind(gi);function mi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var vi=e=>Array.isArray(e)?e:[e];function yi(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((e=>"function"===typeof e))){const n=e.map((e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e)).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var Ci="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},wi=0,bi=1;function Si(){return{s:wi,v:void 0,o:null,p:null}}function Ei(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Si();const{resultEqualityCheck:i}=t;let r,s=0;function o(){let t=n;const{length:o}=arguments;for(let e=0,n=o;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const i=e.get(n);void 0===i?(t=Si(),e.set(n,t)):t=i}else{let e=t.p;null===e&&(t.p=e=new Map);const i=e.get(n);void 0===i?(t=Si(),e.set(n,t)):t=i}}const a=t;let l;if(t.s===bi)l=t.v;else if(l=e.apply(null,arguments),s++,i){var c,u,d;const e=null!==(c=null===(u=r)||void 0===u||null===(d=u.deref)||void 0===d?void 0:d.call(u))&&void 0!==c?c:r;null!=e&&i(e,l)&&(l=e,0!==s&&s--);r="object"===typeof l&&null!==l||"function"===typeof l?new Ci(l):l}return a.s=bi,a.v=l,l}return o.clearCache=()=>{n=Si(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function xi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r="function"===typeof e?{memoize:e,memoizeOptions:n}:e,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let i,s=0,o=0,a={},l=t.pop();"object"===typeof l&&(a=l,l=t.pop()),mi(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const c={...r,...a},{memoize:u,memoizeOptions:d=[],argsMemoize:h=Ei,argsMemoizeOptions:p=[],devModeChecks:g={}}=c,f=vi(d),m=vi(p),v=yi(t),y=u((function(){return s++,l.apply(null,arguments)}),...f);const C=h((function(){o++;const e=function(e,t){const n=[],{length:i}=e;for(let r=0;r<i;r++)n.push(e[r].apply(null,t));return n}(v,arguments);return i=y.apply(null,e),i}),...m);return Object.assign(C,{resultFunc:l,memoizedResultFunc:y,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>i,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:u,argsMemoize:h})};return Object.assign(s,{withTypes:()=>s}),s}var Ai=xi(Ei),Ti=Object.assign((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ai;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),i=t(n.map((t=>e[t])),(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce(((e,t,i)=>(e[n[i]]=t,e)),{})}));return i}),{withTypes:()=>Ti});function _i(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Ri=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),Di=()=>Math.random().toString(36).substring(7).split("").join("."),Mi={INIT:"@@redux/INIT".concat(Di()),REPLACE:"@@redux/REPLACE".concat(Di()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(Di())};function Pi(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Ii(e,t,n){if("function"!==typeof e)throw new Error(_i(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(_i(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(_i(1));return n(Ii)(e,t)}let i=e,r=t,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach(((e,t)=>{o.set(t,e)})))}function u(){if(l)throw new Error(_i(3));return r}function d(e){if("function"!==typeof e)throw new Error(_i(4));if(l)throw new Error(_i(5));let t=!0;c();const n=a++;return o.set(n,e),function(){if(t){if(l)throw new Error(_i(6));t=!1,c(),o.delete(n),s=null}}}function h(e){if(!Pi(e))throw new Error(_i(7));if("undefined"===typeof e.type)throw new Error(_i(8));if("string"!==typeof e.type)throw new Error(_i(17));if(l)throw new Error(_i(9));try{l=!0,r=i(r,e)}finally{l=!1}return(s=o).forEach((e=>{e()})),e}h({type:Mi.INIT});return{dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(_i(10));i=e,h({type:Mi.REPLACE})},[Ri]:function(){const e=d;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(_i(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[Ri](){return this}}}}}function Ni(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const i=t[s];0,"function"===typeof e[i]&&(n[i]=e[i])}const i=Object.keys(n);let r;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:Mi.INIT}))throw new Error(_i(12));if("undefined"===typeof n(void 0,{type:Mi.PROBE_UNKNOWN_ACTION()}))throw new Error(_i(13))}))}(n)}catch(rre){r=rre}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(r)throw r;let s=!1;const o={};for(let r=0;r<i.length;r++){const a=i[r],l=n[a],c=e[a],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(_i(14))}o[a]=u,s=s||u!==c}return s=s||i.length!==Object.keys(e).length,s?o:e}}function ki(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function Oi(e){return t=>{let{dispatch:n,getState:i}=t;return t=>r=>"function"===typeof r?r(n,i,e):t(r)}}var Li=Oi(),Fi=Oi,Bi=(function(){const e=xi(...arguments),t=Object.assign((function(){const t=e(...arguments),n=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t(Pn(e)?hi(e):e,...i)};return Object.assign(n,t),n}),{withTypes:()=>t})}(Ei),"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?ki:ki.apply(null,arguments)}),Vi=("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,e=>e&&"function"===typeof e.match);function Gi(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(wr(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return Pi(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var Hi=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function Wi(e){return In(e)?fi(e,(()=>{})):e}function ji(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(wr(10));const i=n.insert(t,e);return e.set(t,i),i}var Ui="RTK_autoBatch",zi=e=>t=>{setTimeout(t,e)},Yi="undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:zi(10),qi=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let i=new Hi(e);return n&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let i=!0,r=!1,s=!1;const o=new Set,a="tick"===e.type?queueMicrotask:"raf"===e.type?Yi:"callback"===e.type?e.queueNotification:zi(e.timeout),l=()=>{s=!1,r&&(r=!1,o.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>i&&e()));return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{var t;return i=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[Ui]),r=!i,r&&(s||(s=!0,a(l))),n.dispatch(e)}finally{i=!0}}})}}("object"===typeof n?n:void 0)),i};function Ki(e){const t={},n=[];let i;const r={addCase(e,n){const i="string"===typeof e?e:e.type;if(!i)throw new Error(wr(28));if(i in t)throw new Error(wr(29));return t[i]=n,r},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),r),addDefaultCase:e=>(i=e,r)};return e(r),[t,n,i]}var Xi=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},Qi=(e,t)=>Vi(e)?e.match(t):e(t);function Zi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.some((t=>Qi(t,e)))}var $i=["name","message","stack","code"],Ji=class{constructor(e,t){An(this,"_type",void 0),this.payload=e,this.meta=t}},er=class{constructor(e,t){An(this,"_type",void 0),this.payload=e,this.meta=t}},tr=e=>{if("object"===typeof e&&null!==e){const t={};for(const n of $i)"string"===typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},nr=(()=>{function e(e,t,n){const i=Gi(e+"/fulfilled",((e,t,n,i)=>({payload:e,meta:{...i||{},arg:n,requestId:t,requestStatus:"fulfilled"}}))),r=Gi(e+"/pending",((e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}}))),s=Gi(e+"/rejected",((e,t,i,r,s)=>({payload:r,error:(n&&n.serializeError||tr)(e||"Rejected"),meta:{...s||{},arg:i,requestId:t,rejectedWithValue:!!r,requestStatus:"rejected",aborted:"AbortError"===(null===e||void 0===e?void 0:e.name),condition:"ConditionError"===(null===e||void 0===e?void 0:e.name)}})));return Object.assign((function(e){return(o,a,l)=>{const c=null!==n&&void 0!==n&&n.idGenerator?n.idGenerator(e):Xi(),u=new AbortController;let d,h;function p(e){h=e,u.abort()}const g=async function(){let g;try{var f,m;let s=null===n||void 0===n||null===(f=n.condition)||void 0===f?void 0:f.call(n,e,{getState:a,extra:l});if(function(e){return null!==e&&"object"===typeof e&&"function"===typeof e.then}(s)&&(s=await s),!1===s||u.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const v=new Promise(((e,t)=>{d=()=>{t({name:"AbortError",message:h||"Aborted"})},u.signal.addEventListener("abort",d)}));o(r(c,e,null===n||void 0===n||null===(m=n.getPendingMeta)||void 0===m?void 0:m.call(n,{requestId:c,arg:e},{getState:a,extra:l}))),g=await Promise.race([v,Promise.resolve(t(e,{dispatch:o,getState:a,extra:l,requestId:c,signal:u.signal,abort:p,rejectWithValue:(e,t)=>new Ji(e,t),fulfillWithValue:(e,t)=>new er(e,t)})).then((t=>{if(t instanceof Ji)throw t;return t instanceof er?i(t.payload,c,e,t.meta):i(t,c,e)}))])}catch(v){g=v instanceof Ji?s(null,c,e,v.payload,v.meta):s(v,c,e)}finally{d&&u.signal.removeEventListener("abort",d)}return n&&!n.dispatchConditionRejection&&s.match(g)&&g.meta.condition||o(g),g}();return Object.assign(g,{abort:p,requestId:c,arg:e,unwrap:()=>g.then(ir)})}}),{pending:r,rejected:s,fulfilled:i,settled:Zi(s,i),typePrefix:e})}return e.withTypes=()=>e,e})();function ir(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var rr=Symbol.for("rtk-slice-createasyncthunk");function sr(e,t){return"".concat(e,"/").concat(t)}function or(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[rr];return function(e){const{name:t,reducerPath:i=t}=e;if(!t)throw new Error(wr(11));const r=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(r),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(wr(12));if(n in o.sliceCaseReducersByType)throw new Error(wr(13));return o.sliceCaseReducersByType[n]=t,a},addMatcher:(e,t)=>(o.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(o.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(o.sliceCaseReducersByName[e]=t,a)};function l(){const[t={},n=[],i]="function"===typeof e.extraReducers?Ki(e.extraReducers):[e.extraReducers],r={...t,...o.sliceCaseReducersByType};return function(e,t){let n,[i,r,s]=Ki(t);if(function(e){return"function"===typeof e}(e))n=()=>Wi(e());else{const t=Wi(e);n=()=>t}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,o=[i[t.type],...r.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===o.filter((e=>!!e)).length&&(o=[s]),o.reduce(((e,n)=>{if(n){if(Pn(e)){const i=n(e,t);return void 0===i?e:i}if(In(e))return fi(e,(e=>n(e,t)));{const i=n(e,t);if(void 0===i){if(null===e)return e;throw new Error(wr(9))}return i}}return e}),e)}return o.getInitialState=n,o}(e.initialState,(e=>{for(let t in r)e.addCase(t,r[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);i&&e.addDefaultCase(i)}))}s.forEach((i=>{const s=r[i],o={reducerName:i,type:sr(t,i),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,n){let i,r,{type:s,reducerName:o,createNotation:a}=e;if("reducer"in t){if(a&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(wr(17));i=t.reducer,r=t.prepare}else i=t;n.addCase(s,i).exposeCaseReducer(o,i).exposeAction(o,r?Gi(s,r):Gi(s))}(o,s,a):function(e,t,n,i){let{type:r,reducerName:s}=e;if(!i)throw new Error(wr(18));const{payloadCreator:o,fulfilled:a,pending:l,rejected:c,settled:u,options:d}=t,h=i(r,o,d);n.exposeAction(s,h),a&&n.addCase(h.fulfilled,a);l&&n.addCase(h.pending,l);c&&n.addCase(h.rejected,c);u&&n.addMatcher(h.settled,u);n.exposeCaseReducer(s,{fulfilled:a||cr,pending:l||cr,rejected:c||cr,settled:u||cr})}(o,s,a,n)}));const c=e=>e,u=new Map;let d;function h(e,t){return d||(d=l()),d(e,t)}function p(){return d||(d=l()),d.getInitialState()}function g(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function i(e){let i=e[t];return"undefined"===typeof i&&n&&(i=p()),i}function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const i=ji(u,n,{insert:()=>new WeakMap});return ji(i,t,{insert:()=>{const i={};for(const[s,o]of Object.entries(null!==(r=e.selectors)&&void 0!==r?r:{})){var r;i[s]=ar(o,t,p,n)}return i}})}return{reducerPath:t,getSelectors:r,get selectors(){return r(i)},selectSlice:i}}const f={name:t,reducer:h,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:p,...g(i),injectInto(e){let{reducerPath:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=null!==t&&void 0!==t?t:i;return e.inject({reducerPath:r,reducer:h},n),{...f,...g(r,!0)}}};return f}}function ar(e,t,n,i){function r(r){let s=t(r);"undefined"===typeof s&&i&&(s=n());for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return e(s,...a)}return r.unwrapped=e,r}var lr=or();function cr(){}var ur="listener",dr="completed",hr="cancelled",pr=("task-".concat(hr),"task-".concat(dr),"".concat(ur,"-").concat(hr),"".concat(ur,"-").concat(dr),(e,t)=>{if("function"!==typeof e)throw new Error(wr(32))});var{assign:gr}=Object,fr="listenerMiddleware",mr=e=>{let{type:t,actionCreator:n,matcher:i,predicate:r,effect:s}=e;if(t)r=Gi(t).match;else if(n)t=n.type,r=n.match;else if(i)r=i;else if(!r)throw new Error(wr(21));return pr(s),{predicate:r,type:t,effect:s}},vr=Object.assign((e=>{const{type:t,predicate:n,effect:i}=mr(e);return{id:Xi(),effect:i,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(wr(22))}}}),{withTypes:()=>vr}),yr=Object.assign(Gi("".concat(fr,"/add")),{withTypes:()=>yr}),Cr=(Gi("".concat(fr,"/removeAll")),Object.assign(Gi("".concat(fr,"/remove")),{withTypes:()=>Cr}));Symbol.for("rtk-state-proxy-original");function wr(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var br="persist:",Sr="persist/FLUSH",Er="persist/REHYDRATE",xr="persist/PAUSE",Ar="persist/PERSIST",Tr="persist/PURGE",_r="persist/REGISTER";function Rr(e){return Rr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rr(e)}function Dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Mr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pr(e,t,n,i){i.debug;var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dr(n,!0).forEach((function(t){Mr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);return e&&"object"===Rr(e)&&Object.keys(e).forEach((function(i){"_persist"!==i&&t[i]===n[i]&&(r[i]=e[i])})),r}function Ir(e){var t,n=e.blacklist||null,i=e.whitelist||null,r=e.transforms||[],s=e.throttle||0,o="".concat(void 0!==e.keyPrefix?e.keyPrefix:br).concat(e.key),a=e.storage;t=!1===e.serialize?function(e){return e}:"function"===typeof e.serialize?e.serialize:Nr;var l=e.writeFailHandler||null,c={},u={},d=[],h=null,p=null;function g(){if(0===d.length)return h&&clearInterval(h),void(h=null);var e=d.shift(),n=r.reduce((function(t,n){return n.in(t,e,c)}),c[e]);if(void 0!==n)try{u[e]=t(n)}catch(i){console.error("redux-persist/createPersistoid: error serializing state",i)}else delete u[e];0===d.length&&(Object.keys(u).forEach((function(e){void 0===c[e]&&delete u[e]})),p=a.setItem(o,t(u)).catch(m))}function f(e){return(!i||-1!==i.indexOf(e)||"_persist"===e)&&(!n||-1===n.indexOf(e))}function m(e){l&&l(e)}return{update:function(e){Object.keys(e).forEach((function(t){f(t)&&c[t]!==e[t]&&-1===d.indexOf(t)&&d.push(t)})),Object.keys(c).forEach((function(t){void 0===e[t]&&f(t)&&-1===d.indexOf(t)&&void 0!==c[t]&&d.push(t)})),null===h&&(h=setInterval(g,s)),c=e},flush:function(){for(;0!==d.length;)g();return p||Promise.resolve()}}}function Nr(e){return JSON.stringify(e)}function kr(e){var t,n=e.transforms||[],i="".concat(void 0!==e.keyPrefix?e.keyPrefix:br).concat(e.key),r=e.storage;e.debug;return t=!1===e.deserialize?function(e){return e}:"function"===typeof e.deserialize?e.deserialize:Or,r.getItem(i).then((function(e){if(e)try{var i={},r=t(e);return Object.keys(r).forEach((function(e){i[e]=n.reduceRight((function(t,n){return n.out(t,e,r)}),t(r[e]))})),i}catch(s){throw s}}))}function Or(e){return JSON.parse(e)}function Lr(e){0}function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fr(n,!0).forEach((function(t){Vr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gr(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Hr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wr(n,!0).forEach((function(t){Ur(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zr={registry:[],bootstrapped:!1},Yr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _r:return jr({},e,{registry:[].concat(Hr(e.registry),[t.key])});case Er:var n=e.registry.indexOf(t.key),i=Hr(e.registry);return i.splice(n,1),jr({},e,{registry:i,bootstrapped:0===i.length});default:return e}};var qr=n(8602);function Kr(e,t){return function(){return e.apply(t,arguments)}}const{toString:Xr}=Object.prototype,{getPrototypeOf:Qr}=Object,Zr=(e=>t=>{const n=Xr.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),$r=e=>(e=e.toLowerCase(),t=>Zr(t)===e),Jr=e=>t=>typeof t===e,{isArray:es}=Array,ts=Jr("undefined");const ns=$r("ArrayBuffer");const is=Jr("string"),rs=Jr("function"),ss=Jr("number"),os=e=>null!==e&&"object"===typeof e,as=e=>{if("object"!==Zr(e))return!1;const t=Qr(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ls=$r("Date"),cs=$r("File"),us=$r("Blob"),ds=$r("FileList"),hs=$r("URLSearchParams"),[ps,gs,fs,ms]=["ReadableStream","Request","Response","Headers"].map($r);function vs(e,t){let n,i,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),es(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let o;for(n=0;n<s;n++)o=i[n],t.call(null,e[o],o,e)}}function ys(e,t){t=t.toLowerCase();const n=Object.keys(e);let i,r=n.length;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Cs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ws=e=>!ts(e)&&e!==Cs;const bs=(Ss="undefined"!==typeof Uint8Array&&Qr(Uint8Array),e=>Ss&&e instanceof Ss);var Ss;const Es=$r("HTMLFormElement"),xs=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),As=$r("RegExp"),Ts=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};vs(n,((n,r)=>{let s;!1!==(s=t(n,r,e))&&(i[r]=s||n)})),Object.defineProperties(e,i)},_s="abcdefghijklmnopqrstuvwxyz",Rs="0123456789",Ds={DIGIT:Rs,ALPHA:_s,ALPHA_DIGIT:_s+_s.toUpperCase()+Rs};const Ms=$r("AsyncFunction"),Ps={isArray:es,isArrayBuffer:ns,isBuffer:function(e){return null!==e&&!ts(e)&&null!==e.constructor&&!ts(e.constructor)&&rs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||rs(e.append)&&("formdata"===(t=Zr(e))||"object"===t&&rs(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ns(e.buffer),t},isString:is,isNumber:ss,isBoolean:e=>!0===e||!1===e,isObject:os,isPlainObject:as,isReadableStream:ps,isRequest:gs,isResponse:fs,isHeaders:ms,isUndefined:ts,isDate:ls,isFile:cs,isBlob:us,isRegExp:As,isFunction:rs,isStream:e=>os(e)&&rs(e.pipe),isURLSearchParams:hs,isTypedArray:bs,isFileList:ds,forEach:vs,merge:function e(){const{caseless:t}=ws(this)&&this||{},n={},i=(i,r)=>{const s=t&&ys(n,r)||r;as(n[s])&&as(i)?n[s]=e(n[s],i):as(i)?n[s]=e({},i):es(i)?n[s]=i.slice():n[s]=i};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&vs(arguments[r],i);return n},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return vs(t,((t,i)=>{n&&rs(t)?e[i]=Kr(t,n):e[i]=t}),{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let r,s,o;const a={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)o=r[s],i&&!i(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&Qr(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Zr,kindOfTest:$r,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(es(e))return e;let t=e.length;if(!ss(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:Es,hasOwnProperty:xs,hasOwnProp:xs,reduceDescriptors:Ts,freezeMethods:e=>{Ts(e,((t,n)=>{if(rs(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];rs(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return es(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ys,global:Cs,isContextDefined:ws,ALPHABET:Ds,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ds.ALPHA_DIGIT,n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n},isSpecCompliantForm:function(e){return!!(e&&rs(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(os(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const r=es(e)?[]:{};return vs(e,((e,t)=>{const s=n(e,i+1);!ts(s)&&(r[t]=s)})),t[i]=void 0,r}}return e};return n(e,0)},isAsyncFn:Ms,isThenable:e=>e&&(os(e)||rs(e))&&rs(e.then)&&rs(e.catch)};function Is(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}Ps.inherits(Is,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ps.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ns=Is.prototype,ks={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{ks[e]={value:e}})),Object.defineProperties(Is,ks),Object.defineProperty(Ns,"isAxiosError",{value:!0}),Is.from=(e,t,n,i,r,s)=>{const o=Object.create(Ns);return Ps.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Is.call(o,e.message,t,n,i,r),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const Os=Is;function Ls(e){return Ps.isPlainObject(e)||Ps.isArray(e)}function Fs(e){return Ps.endsWith(e,"[]")?e.slice(0,-2):e}function Bs(e,t,n){return e?e.concat(t).map((function(e,t){return e=Fs(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Vs=Ps.toFlatObject(Ps,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Gs=function(e,t,n){if(!Ps.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=Ps.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Ps.isUndefined(t[e])}))).metaTokens,r=n.visitor||c,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Ps.isSpecCompliantForm(t);if(!Ps.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Ps.isDate(e))return e.toISOString();if(!a&&Ps.isBlob(e))throw new Os("Blob is not supported. Use a Buffer instead.");return Ps.isArrayBuffer(e)||Ps.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,r){let a=e;if(e&&!r&&"object"===typeof e)if(Ps.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(Ps.isArray(e)&&function(e){return Ps.isArray(e)&&!e.some(Ls)}(e)||(Ps.isFileList(e)||Ps.endsWith(n,"[]"))&&(a=Ps.toArray(e)))return n=Fs(n),a.forEach((function(e,i){!Ps.isUndefined(e)&&null!==e&&t.append(!0===o?Bs([n],i,s):null===o?n:n+"[]",l(e))})),!1;return!!Ls(e)||(t.append(Bs(r,n,s),l(e)),!1)}const u=[],d=Object.assign(Vs,{defaultVisitor:c,convertValue:l,isVisitable:Ls});if(!Ps.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!Ps.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+i.join("."));u.push(n),Ps.forEach(n,(function(n,s){!0===(!(Ps.isUndefined(n)||null===n)&&r.call(t,n,Ps.isString(s)?s.trim():s,i,d))&&e(n,i?i.concat(s):[s])})),u.pop()}}(e),t};function Hs(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Ws(e,t){this._pairs=[],e&&Gs(e,this,t)}const js=Ws.prototype;js.append=function(e,t){this._pairs.push([e,t])},js.toString=function(e){const t=e?function(t){return e.call(this,t,Hs)}:Hs;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Us=Ws;function zs(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ys(e,t,n){if(!t)return e;const i=n&&n.encode||zs,r=n&&n.serialize;let s;if(s=r?r(t,n):Ps.isURLSearchParams(t)?t.toString():new Us(t,n).toString(i),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const qs=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ps.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Ks={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xs={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Us,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Qs="undefined"!==typeof window&&"undefined"!==typeof document,Zs=($s="undefined"!==typeof navigator&&navigator.product,Qs&&["ReactNative","NativeScript","NS"].indexOf($s)<0);var $s;const Js="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,eo=Qs&&window.location.href||"http://localhost",to={...e,...Xs};const no=function(e){function t(e,n,i,r){let s=e[r++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=r>=e.length;if(s=!s&&Ps.isArray(i)?i.length:s,a)return Ps.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o;i[s]&&Ps.isObject(i[s])||(i[s]=[]);return t(e,n,i[s],r)&&Ps.isArray(i[s])&&(i[s]=function(e){const t={},n=Object.keys(e);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],t[s]=e[s];return t}(i[s])),!o}if(Ps.isFormData(e)&&Ps.isFunction(e.entries)){const n={};return Ps.forEachEntry(e,((e,i)=>{t(function(e){return Ps.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),i,n,0)})),n}return null};const io={transitional:Ks,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=Ps.isObject(e);r&&Ps.isHTMLForm(e)&&(e=new FormData(e));if(Ps.isFormData(e))return i?JSON.stringify(no(e)):e;if(Ps.isArrayBuffer(e)||Ps.isBuffer(e)||Ps.isStream(e)||Ps.isFile(e)||Ps.isBlob(e)||Ps.isReadableStream(e))return e;if(Ps.isArrayBufferView(e))return e.buffer;if(Ps.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Gs(e,new to.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return to.isNode&&Ps.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Ps.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Gs(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),function(e,t,n){if(Ps.isString(e))try{return(t||JSON.parse)(e),Ps.trim(e)}catch(rre){if("SyntaxError"!==rre.name)throw rre}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||io.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(Ps.isResponse(e)||Ps.isReadableStream(e))return e;if(e&&Ps.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(rre){if(n){if("SyntaxError"===rre.name)throw Os.from(rre,Os.ERR_BAD_RESPONSE,this,null,this.response);throw rre}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:to.classes.FormData,Blob:to.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ps.forEach(["delete","get","head","post","put","patch"],(e=>{io.headers[e]={}}));const ro=io,so=Ps.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oo=Symbol("internals");function ao(e){return e&&String(e).trim().toLowerCase()}function lo(e){return!1===e||null==e?e:Ps.isArray(e)?e.map(lo):String(e)}function co(e,t,n,i,r){return Ps.isFunction(i)?i.call(this,t,n):(r&&(t=n),Ps.isString(t)?Ps.isString(i)?-1!==t.indexOf(i):Ps.isRegExp(i)?i.test(t):void 0:void 0)}class uo{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=ao(t);if(!r)throw new Error("header name must be a non-empty string");const s=Ps.findKey(i,r);(!s||void 0===i[s]||!0===n||void 0===n&&!1!==i[s])&&(i[s||t]=lo(e))}const s=(e,t)=>Ps.forEach(e,((e,n)=>r(e,n,t)));if(Ps.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(Ps.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,i,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),i=e.substring(r+1).trim(),!n||t[n]&&so[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t})(e),t);else if(Ps.isHeaders(e))for(const[o,a]of e.entries())r(a,o,n);else null!=e&&r(t,e,n);return this}get(e,t){if(e=ao(e)){const n=Ps.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(Ps.isFunction(t))return t.call(this,e,n);if(Ps.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ao(e)){const n=Ps.findKey(this,e);return!(!n||void 0===this[n]||t&&!co(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=ao(e)){const r=Ps.findKey(n,e);!r||t&&!co(0,n[r],r,t)||(delete n[r],i=!0)}}return Ps.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const r=t[n];e&&!co(0,this[r],r,e,!0)||(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return Ps.forEach(this,((i,r)=>{const s=Ps.findKey(n,r);if(s)return t[s]=lo(i),void delete t[r];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();o!==r&&delete t[r],t[o]=lo(i),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Ps.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&Ps.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[oo]=this[oo]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=ao(e);t[i]||(!function(e,t){const n=Ps.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,r){return this[i].call(this,t,e,n,r)},configurable:!0})}))}(n,e),t[i]=!0)}return Ps.isArray(e)?e.forEach(i):i(e),this}}uo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ps.reduceDescriptors(uo.prototype,((e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}})),Ps.freezeMethods(uo);const ho=uo;function po(e,t){const n=this||ro,i=t||n,r=ho.from(i.headers);let s=i.data;return Ps.forEach(e,(function(e){s=e.call(n,s,r.normalize(),t?t.status:void 0)})),r.normalize(),s}function go(e){return!(!e||!e.__CANCEL__)}function fo(e,t,n){Os.call(this,null==e?"canceled":e,Os.ERR_CANCELED,t,n),this.name="CanceledError"}Ps.inherits(fo,Os,{__CANCEL__:!0});const mo=fo;function vo(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new Os("Request failed with status code "+n.status,[Os.ERR_BAD_REQUEST,Os.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const yo=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=i[o];r||(r=l),n[s]=a,i[s]=l;let u=o,d=0;for(;u!==s;)d+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-r<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const Co=function(e,t){let n=0;const i=1e3/t;let r=null;return function(){const t=!0===this,s=Date.now();if(t||s-n>i)return r&&(clearTimeout(r),r=null),n=s,e.apply(null,arguments);r||(r=setTimeout((()=>(r=null,n=Date.now(),e.apply(null,arguments))),i-(s-n)))}},wo=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const r=yo(50,250);return Co((n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-i,l=r(a);i=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:n,lengthComputable:null!=o};c[t?"download":"upload"]=!0,e(c)}),n)},bo=to.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function i(n){let i=n;return e&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(e){const t=Ps.isString(e)?i(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},So=to.hasStandardBrowserEnv?{write(e,t,n,i,r,s){const o=[e+"="+encodeURIComponent(t)];Ps.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ps.isString(i)&&o.push("path="+i),Ps.isString(r)&&o.push("domain="+r),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Eo(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const xo=e=>e instanceof ho?{...e}:e;function Ao(e,t){t=t||{};const n={};function i(e,t,n){return Ps.isPlainObject(e)&&Ps.isPlainObject(t)?Ps.merge.call({caseless:n},e,t):Ps.isPlainObject(t)?Ps.merge({},t):Ps.isArray(t)?t.slice():t}function r(e,t,n){return Ps.isUndefined(t)?Ps.isUndefined(e)?void 0:i(void 0,e,n):i(e,t,n)}function s(e,t){if(!Ps.isUndefined(t))return i(void 0,t)}function o(e,t){return Ps.isUndefined(t)?Ps.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function a(n,r,s){return s in t?i(n,r):s in e?i(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>r(xo(e),xo(t),!0)};return Ps.forEach(Object.keys(Object.assign({},e,t)),(function(i){const s=l[i]||r,o=s(e[i],t[i],i);Ps.isUndefined(o)&&s!==a||(n[i]=o)})),n}const To=e=>{const t=Ao({},e);let n,{data:i,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:l}=t;if(t.headers=a=ho.from(a),t.url=Ys(Eo(t.baseURL,t.url),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Ps.isFormData(i))if(to.hasStandardBrowserEnv||to.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(to.hasStandardBrowserEnv&&(r&&Ps.isFunction(r)&&(r=r(t)),r||!1!==r&&bo(t.url))){const e=s&&o&&So.read(o);e&&a.set(s,e)}return t},_o="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const i=To(e);let r=i.data;const s=ho.from(i.headers).normalize();let o,{responseType:a}=i;function l(){i.cancelToken&&i.cancelToken.unsubscribe(o),i.signal&&i.signal.removeEventListener("abort",o)}let c=new XMLHttpRequest;function u(){if(!c)return;const i=ho.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());vo((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:i,config:e,request:c}),c=null}c.open(i.method.toUpperCase(),i.url,!0),c.timeout=i.timeout,"onloadend"in c?c.onloadend=u:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(u)},c.onabort=function(){c&&(n(new Os("Request aborted",Os.ECONNABORTED,i,c)),c=null)},c.onerror=function(){n(new Os("Network Error",Os.ERR_NETWORK,i,c)),c=null},c.ontimeout=function(){let e=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const t=i.transitional||Ks;i.timeoutErrorMessage&&(e=i.timeoutErrorMessage),n(new Os(e,t.clarifyTimeoutError?Os.ETIMEDOUT:Os.ECONNABORTED,i,c)),c=null},void 0===r&&s.setContentType(null),"setRequestHeader"in c&&Ps.forEach(s.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),Ps.isUndefined(i.withCredentials)||(c.withCredentials=!!i.withCredentials),a&&"json"!==a&&(c.responseType=i.responseType),"function"===typeof i.onDownloadProgress&&c.addEventListener("progress",wo(i.onDownloadProgress,!0)),"function"===typeof i.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",wo(i.onUploadProgress)),(i.cancelToken||i.signal)&&(o=t=>{c&&(n(!t||t.type?new mo(null,e,c):t),c.abort(),c=null)},i.cancelToken&&i.cancelToken.subscribe(o),i.signal&&(i.signal.aborted?o():i.signal.addEventListener("abort",o)));const d=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(i.url);d&&-1===to.protocols.indexOf(d)?n(new Os("Unsupported protocol "+d+":",Os.ERR_BAD_REQUEST,e)):c.send(r||null)}))},Ro=(e,t)=>{let n,i=new AbortController;const r=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;i.abort(t instanceof Os?t:new mo(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{r(new Os("timeout ".concat(t," of ms exceeded"),Os.ETIMEDOUT))}),t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e&&(e.removeEventListener?e.removeEventListener("abort",r):e.unsubscribe(r))})),e=null)};e.forEach((e=>e&&e.addEventListener&&e.addEventListener("abort",r)));const{signal:a}=i;return a.unsubscribe=o,[a,()=>{s&&clearTimeout(s),s=null}]},Do=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,r=0;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},Mo=(e,t,n,i,r)=>{const s=async function*(e,t,n){for await(const i of e)yield*Do(ArrayBuffer.isView(i)?i:await n(String(i)),t)}(e,t,r);let o=0;return new ReadableStream({type:"bytes",async pull(e){const{done:t,value:r}=await s.next();if(t)return e.close(),void i();let a=r.byteLength;n&&n(o+=a),e.enqueue(new Uint8Array(r))},cancel:e=>(i(e),s.return())},{highWaterMark:2})},Po=(e,t)=>{const n=null!=e;return i=>setTimeout((()=>t({lengthComputable:n,total:e,loaded:i})))},Io="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,No=Io&&"function"===typeof ReadableStream,ko=Io&&("function"===typeof TextEncoder?(Oo=new TextEncoder,e=>Oo.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Oo;const Lo=No&&(()=>{let e=!1;const t=new Request(to.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),Fo=No&&!!(()=>{try{return Ps.isReadableStream(new Response("").body)}catch(e){}})(),Bo={stream:Fo&&(e=>e.body)};var Vo;Io&&(Vo=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Bo[e]&&(Bo[e]=Ps.isFunction(Vo[e])?t=>t[e]():(t,n)=>{throw new Os("Response type '".concat(e,"' is not supported"),Os.ERR_NOT_SUPPORT,n)})})));const Go=async(e,t)=>{const n=Ps.toFiniteNumber(e.getContentLength());return null==n?(async e=>null==e?0:Ps.isBlob(e)?e.size:Ps.isSpecCompliantForm(e)?(await new Request(e).arrayBuffer()).byteLength:Ps.isArrayBufferView(e)?e.byteLength:(Ps.isURLSearchParams(e)&&(e+=""),Ps.isString(e)?(await ko(e)).byteLength:void 0))(t):n},Ho=Io&&(async e=>{let{url:t,method:n,data:i,signal:r,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=To(e);c=c?(c+"").toLowerCase():"text";let p,g,[f,m]=r||s||o?Ro([r,s],o):[];const v=()=>{!p&&setTimeout((()=>{f&&f.unsubscribe()})),p=!0};let y;try{if(l&&Lo&&"get"!==n&&"head"!==n&&0!==(y=await Go(u,i))){let e,n=new Request(t,{method:"POST",body:i,duplex:"half"});Ps.isFormData(i)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body&&(i=Mo(n.body,65536,Po(y,wo(l)),null,ko))}Ps.isString(d)||(d=d?"cors":"omit"),g=new Request(t,{...h,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",withCredentials:d});let r=await fetch(g);const s=Fo&&("stream"===c||"response"===c);if(Fo&&(a||s)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=r[t]}));const t=Ps.toFiniteNumber(r.headers.get("content-length"));r=new Response(Mo(r.body,65536,a&&Po(t,wo(a,!0)),s&&v,ko),e)}c=c||"text";let o=await Bo[Ps.findKey(Bo,c)||"text"](r,e);return!s&&v(),m&&m(),await new Promise(((t,n)=>{vo(t,n,{data:o,headers:ho.from(r.headers),status:r.status,statusText:r.statusText,config:e,request:g})}))}catch(C){if(v(),C&&"TypeError"===C.name&&/fetch/i.test(C.message))throw Object.assign(new Os("Network Error",Os.ERR_NETWORK,e,g),{cause:C.cause||C});throw Os.from(C,C&&C.code,e,g)}}),Wo={http:null,xhr:_o,fetch:Ho};Ps.forEach(Wo,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(rre){}Object.defineProperty(e,"adapterName",{value:t})}}));const jo=e=>"- ".concat(e),Uo=e=>Ps.isFunction(e)||null===e||!1===e,zo=e=>{e=Ps.isArray(e)?e:[e];const{length:t}=e;let n,i;const r={};for(let s=0;s<t;s++){let t;if(n=e[s],i=n,!Uo(n)&&(i=Wo[(t=String(n)).toLowerCase()],void 0===i))throw new Os("Unknown adapter '".concat(t,"'"));if(i)break;r[t||"#"+s]=i}if(!i){const e=Object.entries(r).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(jo).join("\n"):" "+jo(e[0]):"as no adapter specified";throw new Os("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i};function Yo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new mo(null,e)}function qo(e){Yo(e),e.headers=ho.from(e.headers),e.data=po.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return zo(e.adapter||ro.adapter)(e).then((function(t){return Yo(e),t.data=po.call(e,e.transformResponse,t),t.headers=ho.from(t.headers),t}),(function(t){return go(t)||(Yo(e),t&&t.response&&(t.response.data=po.call(e,e.transformResponse,t.response),t.response.headers=ho.from(t.response.headers))),Promise.reject(t)}))}const Ko="1.7.2",Xo={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Xo[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Qo={};Xo.transitional=function(e,t,n){function i(e,t){return"[Axios v1.7.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,s)=>{if(!1===e)throw new Os(i(r," has been removed"+(t?" in "+t:"")),Os.ERR_DEPRECATED);return t&&!Qo[r]&&(Qo[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}};const Zo={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Os("options must be an object",Os.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;for(;r-- >0;){const s=i[r],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new Os("option "+s+" must be "+n,Os.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Os("Unknown option "+s,Os.ERR_BAD_OPTION)}},validators:Xo},$o=Zo.validators;class Jo{constructor(e){this.defaults=e,this.interceptors={request:new qs,response:new qs}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(rre){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ao(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;void 0!==n&&Zo.assertOptions(n,{silentJSONParsing:$o.transitional($o.boolean),forcedJSONParsing:$o.transitional($o.boolean),clarifyTimeoutError:$o.transitional($o.boolean)},!1),null!=i&&(Ps.isFunction(i)?t.paramsSerializer={serialize:i}:Zo.assertOptions(i,{encode:$o.function,serialize:$o.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=r&&Ps.merge(r.common,r[t.method]);r&&Ps.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=ho.concat(s,r);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[qo.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=o.length;let h=t;for(d=0;d<u;){const e=o[d++],t=o[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=qo.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Ys(Eo((e=Ao(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Ps.forEach(["delete","get","head","options"],(function(e){Jo.prototype[e]=function(t,n){return this.request(Ao(n||{},{method:e,url:t,data:(n||{}).data}))}})),Ps.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(Ao(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Jo.prototype[e]=t(),Jo.prototype[e+"Form"]=t(!0)}));const ea=Jo;class ta{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,r){n.reason||(n.reason=new mo(e,i,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;const t=new ta((function(t){e=t}));return{token:t,cancel:e}}}const na=ta;const ia={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ia).forEach((e=>{let[t,n]=e;ia[n]=t}));const ra=ia;const sa=function e(t){const n=new ea(t),i=Kr(ea.prototype.request,n);return Ps.extend(i,ea.prototype,n,{allOwnKeys:!0}),Ps.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(Ao(t,n))},i}(ro);sa.Axios=ea,sa.CanceledError=mo,sa.CancelToken=na,sa.isCancel=go,sa.VERSION=Ko,sa.toFormData=Gs,sa.AxiosError=Os,sa.Cancel=sa.CanceledError,sa.all=function(e){return Promise.all(e)},sa.spread=function(e){return function(t){return e.apply(null,t)}},sa.isAxiosError=function(e){return Ps.isObject(e)&&!0===e.isAxiosError},sa.mergeConfig=Ao,sa.AxiosHeaders=ho,sa.formToJSON=e=>no(Ps.isHTMLForm(e)?new FormData(e):e),sa.getAdapter=zo,sa.HttpStatusCode=ra,sa.default=sa;const oa=sa,aa=oa.create({baseURL:"http://172.23.40.227:5000/api",headers:{"Content-Type":"application/json"},withCredentials:!0,timeout:1e4});aa.interceptors.request.use((async e=>{var t,n;const i=wc.getState(),r=i.auth.token,s=i.auth.refreshToken;return r&&null!==(t=e.url)&&void 0!==t&&t.includes("/auth/logout")&&(e.headers.Authorization="Bearer ".concat(r)),s&&null!==(n=e.url)&&void 0!==n&&n.includes("/auth/logout")&&(e.headers["X-Refresh-Token"]=s),e}),(e=>Promise.reject(e)));const la=aa,ca=oa.create({baseURL:"http://172.23.40.227:5000/api",headers:{"Content-Type":"application/json"},withCredentials:!0,timeout:1e4});ca.interceptors.request.use((async e=>{var t;const n=wc.getState().auth.token;n&&(e.headers.Authorization="Bearer ".concat(n));const i=null===(t=document.cookie.split(";").find((e=>e.trim().startsWith("csrfToken="))))||void 0===t?void 0:t.split("=")[1];return i&&(e.headers["X-CSRF-Token"]=i),e}),(e=>Promise.reject(e))),ca.interceptors.response.use((e=>e),(async e=>{const t=e.config;let n="An error occurred. Please try again.",i={message:n,name:e.name,code:e.code};if(e.response){if(i.status=e.response.status,401!==e.response.status||t._retry)switch(e.response.status){case 401:n="Session expired. Please log in again.",i.status=401;break;case 403:n="You are not allowed to view this.",i.status=403;break;case 500:n="Server error. Please try again later.",i.status=500;break;default:i.status=e.response.status}else{t._retry=!0,t.headers=t.headers||{},t.headers["X-Retry"]="true";try{if(await ed.refreshAndRetryRequest(t))return ca(t)}catch(r){n="Session expired. Please log in again.",i={message:n,name:r.name,code:r.code,status:401}}}return(401===e.response.status||t._retry)&&(ot.error(n),ed.logout(n)),Promise.reject(i)}return n="Network error. Please check your connection.",ot.error(n),i.message=n,i.status=500,Promise.reject(i)}));const ua=ca,da=nr("auth/login",(async(e,t)=>{let{email:n,password:i,deviceId:r,browser:s,deviceName:o}=e,{rejectWithValue:a}=t;try{const e=await la.post("/auth/login",{email:n,password:i,deviceId:r,browser:s,deviceName:o});return{data:e.data,status:e.status}}catch(c){var l;return a({message:c.message,name:c.name,status:null===(l=c.response)||void 0===l?void 0:l.status,code:c.code})}})),ha=nr("auth/fetchCsrfToken",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await la.get("/auth/csrf-token");return{data:e.data,status:e.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),pa=nr("auth/fetchCurrentUser",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await ua.get("/auth/me");return{data:e.data,status:e.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),ga=(nr("auth/updateProfile",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.put("/auth/me",e);return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),nr("auth/logout",(async(e,t)=>{let{rejectWithValue:n}=t;try{await la.post("/auth/logout")}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}}))),fa=lr({name:"auth",initialState:{user:null,token:null,refreshToken:null,loading:!1,error:null,fetchingCurrentUser:!1},reducers:{setUser(e,t){e.user=t.payload,e.loading=!1},setToken(e,t){e.token=t.payload},setRefreshToken(e,t){e.refreshToken=t.payload},setLoading(e,t){e.loading=t.payload},setError(e,t){e.error=t.payload},setFetchingCurrentUser(e,t){e.fetchingCurrentUser=t.payload},updateRole(e,t){e.user&&e.user.roleId===t.payload._id&&(e.user.role=t.payload)},updateCity(e,t){e.user&&e.user.cityId===t.payload._id&&(e.user.city=t.payload)},updateCountry(e,t){e.user&&e.user.countryId===t.payload._id&&(e.user.country=t.payload)}},extraReducers:e=>{e.addCase(da.pending,(e=>{e.loading=!0,e.error=null})),e.addCase(da.fulfilled,((e,t)=>{e.token=t.payload.data.accessToken,e.refreshToken=t.payload.data.refreshToken,e.loading=!1,e.error=null})),e.addCase(da.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(ha.fulfilled,((e,t)=>{const n=t.payload.data.csrfToken;document.cookie="csrfToken=".concat(n,"; path=/;")})),e.addCase(pa.pending,(e=>{e.fetchingCurrentUser=!0,e.loading=!0})),e.addCase(pa.fulfilled,((e,t)=>{e.user=t.payload.data.user,e.fetchingCurrentUser=!1,e.error=null,e.loading=!1})),e.addCase(pa.rejected,((e,t)=>{e.fetchingCurrentUser=!1,e.error=t.payload,e.loading=!1})),e.addCase(ga.pending,(e=>{e.loading=!0})),e.addCase(ga.fulfilled,(e=>{e.user=null,e.token=null,e.refreshToken=null,e.loading=!1,e.fetchingCurrentUser=!1,e.error=null})),e.addCase(ga.rejected,((e,t)=>{e.user=null,e.token=null,e.refreshToken=null,e.loading=!1,e.fetchingCurrentUser=!1,e.error=t.payload}))}}),{setUser:ma,setToken:va,setRefreshToken:ya,setLoading:Ca,setError:wa,setFetchingCurrentUser:ba,updateRole:Sa,updateCity:Ea,updateCountry:xa}=fa.actions,Aa=fa.reducer,Ta=nr("city/fetchCities",(async(e,t)=>{let{page:n,limit:i,query:r}=e,{rejectWithValue:s}=t;try{const e=await ua.get("/cities?page=".concat(n,"&limit=").concat(i,"&query=").concat(r));return{data:e.data,status:e.status}}catch(o){return s({message:o.message,name:o.name,status:o.status,code:o.code})}})),_a=nr("city/fetchCityById",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.get("/cities/".concat(e));return{data:t.data,status:t.status}}catch(i){return n({message:i.message,name:i.name,status:i.status,code:i.code})}})),Ra=nr("city/createCity",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.post("/cities",e);return{data:t.data,status:t.status}}catch(i){return n({message:i.message,name:i.name,status:i.status,code:i.code})}})),Da=nr("city/updateCity",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.put("/cities/".concat(e._id),e);return{data:t.data,status:t.status}}catch(i){return n({message:i.message,name:i.name,status:i.status,code:i.code})}})),Ma=nr("city/deleteCity",(async(e,t)=>{let{rejectWithValue:n}=t;try{return await ua.delete("/cities/".concat(e)),{data:e,status:200}}catch(i){return n({message:i.message,name:i.name,status:i.status,code:i.code})}})),Pa=lr({name:"city",initialState:{cities:[],total:0,query:"",loading:!1,error:null},reducers:{setQuery:(e,t)=>{e.query=t.payload},cityCreated:(e,t)=>{e.cities.find((e=>e._id===t.payload._id))||e.cities.push(t.payload)},cityUpdated:(e,t)=>{const n=e.cities.findIndex((e=>e._id===t.payload._id));n>=0&&(e.cities[n]=t.payload)},cityDeleted:(e,t)=>{e.cities=e.cities.filter((e=>e._id!==t.payload))},updateCitiesByCountry:(e,t)=>{Object.values(e.cities).forEach((e=>{e.countryId===t.payload._id&&(e.country=t.payload)}))}},extraReducers:e=>{e.addCase(Ta.pending,(e=>{e.loading=!0})),e.addCase(Ta.fulfilled,((e,t)=>{t.payload.data&&(e.cities=t.payload.data.cities,e.total=t.payload.data.total),e.loading=!1})),e.addCase(Ta.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(_a.pending,(e=>{e.loading=!0})),e.addCase(_a.fulfilled,((e,t)=>{if(t.payload.data){const n=e.cities.findIndex((e=>e._id===t.payload.data._id));n>=0?e.cities[n]=t.payload.data:e.cities.push(t.payload.data)}e.loading=!1})),e.addCase(_a.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Ra.pending,(e=>{e.loading=!0})),e.addCase(Ra.fulfilled,((e,t)=>{if(t.payload.data){e.cities.find((e=>e._id===t.payload.data._id))||e.cities.push(t.payload.data)}e.loading=!1})),e.addCase(Ra.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Da.pending,(e=>{e.loading=!0})),e.addCase(Da.fulfilled,((e,t)=>{if(t.payload.data){const n=e.cities.findIndex((e=>e._id===t.payload.data._id));n>=0&&(e.cities[n]=t.payload.data)}e.loading=!1})),e.addCase(Da.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Ma.pending,(e=>{e.loading=!0})),e.addCase(Ma.fulfilled,((e,t)=>{t.payload.data&&(e.cities=e.cities.filter((e=>e._id!==t.payload.data))),e.loading=!1})),e.addCase(Ma.rejected,((e,t)=>{e.loading=!1,e.error=t.payload}))}}),{setQuery:Ia,cityCreated:Na,cityUpdated:ka,cityDeleted:Oa,updateCitiesByCountry:La}=Pa.actions,Fa=Pa.reducer,Ba=nr("country/fetchCountries",(async(e,t)=>{let{page:n,limit:i,query:r}=e,{rejectWithValue:s}=t;try{const e=await ua.get("/countries?page=".concat(n,"&limit=").concat(i,"&query=").concat(r));return{data:e.data,status:e.status}}catch(o){return s({message:o.message,name:o.name,status:o.status,code:o.code})}})),Va=nr("country/fetchCountryById",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.get("/countries/".concat(e));return{data:t.data,status:t.status}}catch(i){return n({message:i.message,name:i.name,status:i.status,code:i.code})}})),Ga=nr("country/createCountry",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.post("/countries",e);return{data:t.data,status:t.status}}catch(i){return n({message:i.message,name:i.name,status:i.status,code:i.code})}})),Ha=nr("country/updateCountry",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.put("/countries/".concat(e._id),e);return{data:t.data,status:t.status}}catch(i){return n({message:i.message,name:i.name,status:i.status,code:i.code})}})),Wa=nr("country/deleteCountry",(async(e,t)=>{let{rejectWithValue:n}=t;try{return await ua.delete("/countries/".concat(e)),{data:e,status:200}}catch(i){return n({message:i.message,name:i.name,status:i.status,code:i.code})}})),ja=lr({name:"country",initialState:{countries:[],total:0,query:"",loading:!1,error:null},reducers:{setQuery:(e,t)=>{e.query=t.payload},countryCreated:(e,t)=>{e.countries.find((e=>e._id===t.payload._id))||e.countries.push(t.payload)},countryUpdated:(e,t)=>{const n=e.countries.findIndex((e=>e._id===t.payload._id));n>=0&&(e.countries[n]=t.payload)},countryDeleted:(e,t)=>{e.countries=e.countries.filter((e=>e._id!==t.payload))}},extraReducers:e=>{e.addCase(Ba.pending,(e=>{e.loading=!0})),e.addCase(Ba.fulfilled,((e,t)=>{t.payload.data&&(e.countries=t.payload.data.countries,e.total=t.payload.data.total),e.loading=!1})),e.addCase(Ba.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Va.pending,(e=>{e.loading=!0})),e.addCase(Va.fulfilled,((e,t)=>{if(t.payload.data){const n=e.countries.findIndex((e=>e._id===t.payload.data._id));n>=0?e.countries[n]=t.payload.data:e.countries.push(t.payload.data)}e.loading=!1})),e.addCase(Va.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Ga.pending,(e=>{e.loading=!0})),e.addCase(Ga.fulfilled,((e,t)=>{if(t.payload.data){e.countries.find((e=>e._id===t.payload.data._id))||e.countries.push(t.payload.data)}e.loading=!1})),e.addCase(Ga.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Ha.pending,(e=>{e.loading=!0})),e.addCase(Ha.fulfilled,((e,t)=>{if(t.payload.data){const n=e.countries.findIndex((e=>e._id===t.payload.data._id));n>=0&&(e.countries[n]=t.payload.data)}e.loading=!1})),e.addCase(Ha.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Wa.pending,(e=>{e.loading=!0})),e.addCase(Wa.fulfilled,((e,t)=>{t.payload.data&&(e.countries=e.countries.filter((e=>e._id!==t.payload.data))),e.loading=!1})),e.addCase(Wa.rejected,((e,t)=>{e.loading=!1,e.error=t.payload}))}}),{setQuery:Ua,countryCreated:za,countryUpdated:Ya,countryDeleted:qa}=ja.actions,Ka=ja.reducer,Xa=nr("exchangeRate/fetchExchangeRates",(async(e,t)=>{let{page:n,limit:i,query:r}=e,{rejectWithValue:s}=t;try{const e=await ua.get("/exchange-rates?page=".concat(n,"&limit=").concat(i,"&query=").concat(r));return{data:e.data,status:e.status}}catch(a){var o;return s({message:a.message,name:a.name,status:null===(o=a.response)||void 0===o?void 0:o.status,code:a.code})}})),Qa=nr("exchangeRate/fetchExchangeRateById",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.get("/exchange-rates/".concat(e));return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),Za=nr("exchangeRate/createExchangeRate",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.post("/exchange-rates",e);return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),$a=nr("exchangeRate/updateExchangeRate",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.put("/exchange-rates/".concat(e._id),e);return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),Ja=nr("exchangeRate/deleteExchangeRate",(async(e,t)=>{let{rejectWithValue:n}=t;try{return await ua.delete("/exchange-rates/".concat(e)),{data:e,status:200}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),el=lr({name:"exchangeRate",initialState:{exchangeRates:[],total:0,query:"",loading:!1,error:null},reducers:{setQuery:(e,t)=>{e.query=t.payload},exchangeRateCreated:(e,t)=>{e.exchangeRates.find((e=>e._id===t.payload._id))||e.exchangeRates.push(t.payload)},exchangeRateUpdated:(e,t)=>{const n=e.exchangeRates.findIndex((e=>e._id===t.payload._id));n>=0&&(e.exchangeRates[n]=t.payload)},exchangeRateDeleted:(e,t)=>{e.exchangeRates=e.exchangeRates.filter((e=>e._id!==t.payload))}},extraReducers:e=>{e.addCase(Xa.pending,(e=>{e.loading=!0})),e.addCase(Xa.fulfilled,((e,t)=>{t.payload.data&&(e.exchangeRates=t.payload.data.exchangeRates,e.total=t.payload.data.total),e.loading=!1})),e.addCase(Xa.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Qa.pending,(e=>{e.loading=!0})),e.addCase(Qa.fulfilled,((e,t)=>{if(t.payload.data){const n=e.exchangeRates.findIndex((e=>e._id===t.payload.data._id));n>=0?e.exchangeRates[n]=t.payload.data:e.exchangeRates.push(t.payload.data)}e.loading=!1})),e.addCase(Qa.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Za.pending,(e=>{e.loading=!0})),e.addCase(Za.fulfilled,((e,t)=>{if(t.payload.data){e.exchangeRates.find((e=>e._id===t.payload.data._id))||e.exchangeRates.push(t.payload.data)}e.loading=!1})),e.addCase(Za.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase($a.pending,(e=>{e.loading=!0})),e.addCase($a.fulfilled,((e,t)=>{if(t.payload.data){const n=e.exchangeRates.findIndex((e=>e._id===t.payload.data._id));n>=0&&(e.exchangeRates[n]=t.payload.data)}e.loading=!1})),e.addCase($a.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Ja.pending,(e=>{e.loading=!0})),e.addCase(Ja.fulfilled,((e,t)=>{t.payload.data&&(e.exchangeRates=e.exchangeRates.filter((e=>e._id!==t.payload.data))),e.loading=!1})),e.addCase(Ja.rejected,((e,t)=>{e.loading=!1,e.error=t.payload}))}}),{setQuery:tl,exchangeRateCreated:nl,exchangeRateUpdated:il,exchangeRateDeleted:rl}=el.actions,sl=el.reducer,ol=nr("parcel/fetchParcels",(async(e,t)=>{let{page:n,limit:i,query:r}=e,{rejectWithValue:s}=t;try{const e=await ua.get("/parcels?page=".concat(n,"&limit=").concat(i,"&query=").concat(r));return{data:e.data,status:e.status}}catch(a){var o;return s({message:a.message,name:a.name,status:null===(o=a.response)||void 0===o?void 0:o.status,code:a.code})}})),al=nr("parcel/fetchParcelById",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.get("/parcels/".concat(e));return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),ll=nr("parcel/fetchParcelByParcelId",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.get("/parcels/parcelId/".concat(e));return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),cl=nr("parcel/createParcel",(async(e,t)=>{let{parcel:n,initialWarehouseId:i}=e,{rejectWithValue:r}=t;try{const e=await ua.post("/parcels",{...n,initialWarehouseId:i});return{data:e.data,status:e.status}}catch(o){var s;return r({message:o.message,name:o.name,status:null===(s=o.response)||void 0===s?void 0:s.status,code:o.code})}})),ul=nr("parcel/updateParcel",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.put("/parcels/".concat(e._id),e);return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),dl=nr("parcel/deleteParcel",(async(e,t)=>{let{rejectWithValue:n}=t;try{return await ua.delete("/parcels/".concat(e)),{data:e,status:200}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),hl=lr({name:"parcel",initialState:{parcels:[],total:0,query:"",loading:!1,error:null},reducers:{setQuery:(e,t)=>{e.query=t.payload},parcelCreated:(e,t)=>{e.parcels.find((e=>e._id===t.payload._id))||e.parcels.push(t.payload)},parcelUpdated:(e,t)=>{const n=e.parcels.findIndex((e=>e._id===t.payload._id));n>=0&&(e.parcels[n]=t.payload)},parcelDeleted:(e,t)=>{e.parcels=e.parcels.filter((e=>e._id!==t.payload))},parcelStatusChanged:(e,t)=>{const n=e.parcels.findIndex((e=>e._id===t.payload._id));n>=0&&(t.payload.status&&(e.parcels[n].status=t.payload.status),t.payload.paymentStatus&&(e.parcels[n].paymentStatus=t.payload.paymentStatus),t.payload.trackingHistory&&(e.parcels[n].trackingHistory=t.payload.trackingHistory))},bulkParcelStatusChanged:(e,t)=>{t.payload.parcels.forEach((t=>{const n=e.parcels.findIndex((e=>e._id===t._id));n>=0&&(t.status&&(e.parcels[n].status=t.status),t.paymentStatus&&(e.parcels[n].paymentStatus=t.paymentStatus),t.trackingHistory&&(e.parcels[n].trackingHistory=t.trackingHistory))}))},bulkParcelUpdated:(e,t)=>{t.payload.parcels.forEach((t=>{const n=e.parcels.findIndex((e=>e._id===t._id));n>=0&&(e.parcels[n]=t)}))},updateParcelsByCity:(e,t)=>{e.parcels.forEach((e=>{var n,i,r;e.receiver.cityId===t.payload._id&&(e.receiver.city=t.payload),e.sender.shipper&&(null===(n=e.sender.shipper)||void 0===n?void 0:n.cityId)===t.payload._id&&(e.sender.shipper.city=t.payload),e.sender.guest&&(null===(i=e.sender.guest)||void 0===i?void 0:i.cityId)===t.payload._id&&(e.sender.guest.city=t.payload),e.currentDriver&&(null===(r=e.currentDriver)||void 0===r?void 0:r.cityId)===t.payload._id&&(e.currentDriver.city=t.payload)}))},updateParcelsByCountry:(e,t)=>{e.parcels.forEach((e=>{var n,i,r;e.receiver.countryId===t.payload._id&&(e.receiver.country=t.payload),e.sender.shipper&&(null===(n=e.sender.shipper)||void 0===n?void 0:n.countryId)===t.payload._id&&(e.sender.shipper.country=t.payload),e.sender.guest&&(null===(i=e.sender.guest)||void 0===i?void 0:i.countryId)===t.payload._id&&(e.sender.guest.country=t.payload),e.currentDriver&&(null===(r=e.currentDriver)||void 0===r?void 0:r.countryId)===t.payload._id&&(e.currentDriver.country=t.payload)}))},updateParcelsByUser:(e,t)=>{e.parcels.forEach((e=>{var n;e.sender.shipper_id===t.payload._id&&(e.sender.shipper=t.payload),e.currentDriverId===t.payload._id&&(e.currentDriver=t.payload),e.createdById===t.payload._id&&(e.createdBy=t.payload),null===(n=e.trackingHistory)||void 0===n||n.forEach((e=>{e.driverId===t.payload._id&&(e.driver=t.payload)}))}))},updateParcelsByRole:(e,t)=>{e.parcels.forEach((e=>{var n;e.sender.shipper&&e.sender.shipper.roleId===t.payload._id&&(e.sender.shipper.role=t.payload),e.currentDriver&&e.currentDriver.roleId===t.payload._id&&(e.currentDriver.role=t.payload),e.createdBy&&e.createdBy.roleId===t.payload._id&&(e.createdBy.role=t.payload),null===(n=e.trackingHistory)||void 0===n||n.forEach((e=>{e.driver&&e.driver.roleId===t.payload._id&&(e.driver.role=t.payload)}))}))},updateParcelsByWarehouse:(e,t)=>{e.parcels.forEach((e=>{var n;null===(n=e.trackingHistory)||void 0===n||n.forEach((e=>{e.warehouseId===t.payload._id&&(e.warehouse=t.payload)}))}))}},extraReducers:e=>{e.addCase(ol.pending,(e=>{e.loading=!0})),e.addCase(ol.fulfilled,((e,t)=>{t.payload.data&&(e.parcels=t.payload.data.parcels,e.total=t.payload.data.total),e.loading=!1})),e.addCase(ol.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(al.pending,(e=>{e.loading=!0})),e.addCase(al.fulfilled,((e,t)=>{if(t.payload.data){const n=e.parcels.findIndex((e=>e._id===t.payload.data._id));n>=0?e.parcels[n]=t.payload.data:e.parcels.push(t.payload.data)}e.loading=!1})),e.addCase(al.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(cl.pending,(e=>{e.loading=!0})),e.addCase(cl.fulfilled,((e,t)=>{if(t.payload.data){e.parcels.find((e=>e._id===t.payload.data.parcel._id))||e.parcels.push(t.payload.data.parcel);const n=document.createElement("a");n.href="data:application/pdf;base64,".concat(t.payload.data.waybill),n.download="waybill-".concat(t.payload.data.parcel.parcelId,".pdf"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}e.loading=!1})),e.addCase(cl.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(ul.pending,(e=>{e.loading=!0})),e.addCase(ul.fulfilled,((e,t)=>{if(t.payload.data){const n=e.parcels.findIndex((e=>e._id===t.payload.data.parcel._id));n>=0&&(e.parcels[n]=t.payload.data.parcel);const i=document.createElement("a");i.href="data:application/pdf;base64,".concat(t.payload.data.waybill),i.download="waybill-".concat(t.payload.data.parcel.parcelId,".pdf"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}e.loading=!1})),e.addCase(ul.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(dl.pending,(e=>{e.loading=!0})),e.addCase(dl.fulfilled,((e,t)=>{t.payload.data&&(e.parcels=e.parcels.filter((e=>e._id!==t.payload.data))),e.loading=!1})),e.addCase(dl.rejected,((e,t)=>{e.loading=!1,e.error=t.payload}))}}),{setQuery:pl,parcelCreated:gl,parcelUpdated:fl,parcelDeleted:ml,parcelStatusChanged:vl,bulkParcelStatusChanged:yl,bulkParcelUpdated:Cl,updateParcelsByCity:wl,updateParcelsByCountry:bl,updateParcelsByUser:Sl,updateParcelsByRole:El,updateParcelsByWarehouse:xl}=hl.actions,Al=hl.reducer,Tl=nr("role/fetchRoles",(async(e,t)=>{let{page:n,limit:i,query:r}=e,{rejectWithValue:s}=t;try{const e=await ua.get("/roles?page=".concat(n,"&limit=").concat(i,"&query=").concat(r));return{data:e.data,status:e.status}}catch(a){var o;return s({message:a.message,name:a.name,status:null===(o=a.response)||void 0===o?void 0:o.status,code:a.code})}})),_l=nr("role/fetchRoleById",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.get("/roles/".concat(e));return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),Rl=nr("role/createRole",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.post("/roles",e);return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),Dl=nr("role/updateRole",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.put("/roles/".concat(e._id),e);return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),Ml=nr("role/deleteRole",(async(e,t)=>{let{rejectWithValue:n}=t;try{return await ua.delete("/roles/".concat(e)),{data:e,status:200}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),Pl=lr({name:"role",initialState:{roles:[],total:0,query:"",loading:!1,error:null},reducers:{setQuery:(e,t)=>{e.query=t.payload},roleCreated:(e,t)=>{e.roles.find((e=>e._id===t.payload._id))||e.roles.push(t.payload)},roleUpdated:(e,t)=>{const n=e.roles.findIndex((e=>e._id===t.payload._id));n>=0&&(e.roles[n]=t.payload)},roleDeleted:(e,t)=>{e.roles=e.roles.filter((e=>e._id!==t.payload))}},extraReducers:e=>{e.addCase(Tl.pending,(e=>{e.loading=!0})),e.addCase(Tl.fulfilled,((e,t)=>{t.payload.data&&(e.roles=t.payload.data.roles,e.total=t.payload.data.total),e.loading=!1})),e.addCase(Tl.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(_l.pending,(e=>{e.loading=!0})),e.addCase(_l.fulfilled,((e,t)=>{if(t.payload.data){const n=e.roles.findIndex((e=>e._id===t.payload.data._id));n>=0?e.roles[n]=t.payload.data:e.roles.push(t.payload.data)}e.loading=!1})),e.addCase(_l.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Rl.pending,(e=>{e.loading=!0})),e.addCase(Rl.fulfilled,((e,t)=>{if(t.payload.data){e.roles.find((e=>e._id===t.payload.data._id))||e.roles.push(t.payload.data)}e.loading=!1})),e.addCase(Rl.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Dl.pending,(e=>{e.loading=!0})),e.addCase(Dl.fulfilled,((e,t)=>{if(t.payload.data){const n=e.roles.findIndex((e=>e._id===t.payload.data._id));n>=0&&(e.roles[n]=t.payload.data)}e.loading=!1})),e.addCase(Dl.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Ml.pending,(e=>{e.loading=!0})),e.addCase(Ml.fulfilled,((e,t)=>{t.payload.data&&(e.roles=e.roles.filter((e=>e._id!==t.payload.data))),e.loading=!1})),e.addCase(Ml.rejected,((e,t)=>{e.loading=!1,e.error=t.payload}))}}),{setQuery:Il,roleCreated:Nl,roleUpdated:kl,roleDeleted:Ol}=Pl.actions,Ll=Pl.reducer,Fl=nr("warehouse/fetchWarehouses",(async(e,t)=>{let{page:n,limit:i,query:r}=e,{rejectWithValue:s}=t;try{const e=await ua.get("/warehouses?page=".concat(n,"&limit=").concat(i,"&query=").concat(r));return{data:e.data,status:e.status}}catch(a){var o;return s({message:a.message,name:a.name,status:null===(o=a.response)||void 0===o?void 0:o.status,code:a.code})}})),Bl=nr("warehouse/fetchWarehouseById",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.get("/warehouses/".concat(e));return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),Vl=nr("warehouse/createWarehouse",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.post("/warehouses",e);return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),Gl=nr("warehouse/updateWarehouse",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.put("/warehouses/".concat(e._id),e);return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),Hl=nr("warehouse/deleteWarehouse",(async(e,t)=>{let{rejectWithValue:n}=t;try{return await ua.delete("/warehouses/".concat(e)),{data:e,status:200}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),Wl=lr({name:"warehouse",initialState:{warehouses:[],total:0,query:"",loading:!1,error:null},reducers:{setQuery:(e,t)=>{e.query=t.payload},warehouseCreated:(e,t)=>{e.warehouses.find((e=>e._id===t.payload._id))||e.warehouses.push(t.payload)},warehouseUpdated:(e,t)=>{const n=e.warehouses.findIndex((e=>e._id===t.payload._id));n>=0&&(e.warehouses[n]=t.payload)},warehouseDeleted:(e,t)=>{e.warehouses=e.warehouses.filter((e=>e._id!==t.payload))},updateWarehousesByCity:(e,t)=>{e.warehouses.forEach((e=>{e.location.cityId===t.payload._id&&(e.location.city=t.payload)}))},updateWarehousesByCountry:(e,t)=>{e.warehouses.forEach((e=>{e.location.countryId===t.payload._id&&(e.location.country=t.payload)}))}},extraReducers:e=>{e.addCase(Fl.pending,(e=>{e.loading=!0})),e.addCase(Fl.fulfilled,((e,t)=>{t.payload.data&&(e.warehouses=t.payload.data.warehouses,e.total=t.payload.data.total),e.loading=!1})),e.addCase(Fl.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Bl.pending,(e=>{e.loading=!0})),e.addCase(Bl.fulfilled,((e,t)=>{if(t.payload.data){const n=e.warehouses.findIndex((e=>e._id===t.payload.data._id));n>=0?e.warehouses[n]=t.payload.data:e.warehouses.push(t.payload.data)}e.loading=!1})),e.addCase(Bl.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Vl.pending,(e=>{e.loading=!0})),e.addCase(Vl.fulfilled,((e,t)=>{if(t.payload.data){e.warehouses.find((e=>e._id===t.payload.data._id))||e.warehouses.push(t.payload.data)}e.loading=!1})),e.addCase(Vl.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Gl.pending,(e=>{e.loading=!0})),e.addCase(Gl.fulfilled,((e,t)=>{if(t.payload.data){const n=e.warehouses.findIndex((e=>e._id===t.payload.data._id));n>=0&&(e.warehouses[n]=t.payload.data)}e.loading=!1})),e.addCase(Gl.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(Hl.pending,(e=>{e.loading=!0})),e.addCase(Hl.fulfilled,((e,t)=>{t.payload.data&&(e.warehouses=e.warehouses.filter((e=>e._id!==t.payload.data))),e.loading=!1})),e.addCase(Hl.rejected,((e,t)=>{e.loading=!1,e.error=t.payload}))}}),{setQuery:jl,warehouseCreated:Ul,warehouseUpdated:zl,warehouseDeleted:Yl,updateWarehousesByCity:ql,updateWarehousesByCountry:Kl}=Wl.actions,Xl=Wl.reducer,Ql=nr("cart/submitCart",(async(e,t)=>{let{parcels:n,warehouseId:i}=e,{rejectWithValue:r}=t;try{const e=await ua.post("/reception/long-haul-parcels",{parcels:n,warehouseId:i});return{data:e.data,status:e.status}}catch(a){var s,o;return r({data:(null===(s=a.response)||void 0===s?void 0:s.data)||"An unknown error occurred.",status:(null===(o=a.response)||void 0===o?void 0:o.status)||500})}})),Zl=lr({name:"cart",initialState:{parcels:[],selectedWarehouse:null,loading:!1,error:null},reducers:{addParcelToCart(e,t){e.parcels.some((e=>e._id===t.payload._id))||e.parcels.push(t.payload)},removeParcelFromCart(e,t){e.parcels=e.parcels.filter((e=>e._id!==t.payload))},selectWarehouse(e,t){e.selectedWarehouse=t.payload},clearCart(e){e.parcels=[],e.selectedWarehouse=null}},extraReducers:e=>{e.addCase(Ql.pending,(e=>{e.loading=!0})),e.addCase(Ql.fulfilled,(e=>{e.loading=!1,e.parcels=[],e.selectedWarehouse=null})),e.addCase(Ql.rejected,((e,t)=>{var n;e.loading=!1,e.error=(null===(n=t.payload)||void 0===n?void 0:n.data)||"Failed to submit parcels."}))}}),{addParcelToCart:$l,removeParcelFromCart:Jl,selectWarehouse:ec,clearCart:tc}=Zl.actions,nc=Zl.reducer,ic=nr("user/fetchUsers",(async(e,t)=>{let{page:n,limit:i,query:r}=e,{rejectWithValue:s}=t;try{const e=await ua.get("/users?page=".concat(n,"&limit=").concat(i,"&query=").concat(r));return{data:e.data,status:e.status}}catch(a){var o;return s({message:a.message,name:a.name,status:null===(o=a.response)||void 0===o?void 0:o.status,code:a.code})}})),rc=nr("user/fetchUserById",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.get("/users/".concat(e));return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),sc=nr("user/createUser",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await ua.post("/users",e);return{data:t.data,status:t.status}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}})),oc=nr("user/updateUser",(async(e,t)=>{let{id:n,user:i}=e,{rejectWithValue:r}=t;try{const e=await ua.put("/users/".concat(n),i);return{data:e.data,status:e.status}}catch(o){var s;return r({message:o.message,name:o.name,status:null===(s=o.response)||void 0===s?void 0:s.status,code:o.code})}})),ac=(nr("user/updateUserPassword",(async(e,t)=>{let{id:n,password:i}=e,{rejectWithValue:r}=t;try{const e=await ua.put("/users/".concat(n,"/update-password"),{password:i});return{data:e.data,status:e.status}}catch(o){var s;return r({message:o.message,name:o.name,status:null===(s=o.response)||void 0===s?void 0:s.status,code:o.code})}})),nr("user/deleteUser",(async(e,t)=>{let{rejectWithValue:n}=t;try{return await ua.delete("/users/".concat(e)),{data:e,status:200}}catch(r){var i;return n({message:r.message,name:r.name,status:null===(i=r.response)||void 0===i?void 0:i.status,code:r.code})}}))),lc=lr({name:"user",initialState:{users:[],total:0,query:"",loading:!1,error:null},reducers:{setQuery:(e,t)=>{e.query=t.payload},userCreated:(e,t)=>{e.users.find((e=>e._id===t.payload._id))||e.users.push(t.payload)},userUpdated:(e,t)=>{const n=e.users.findIndex((e=>e._id===t.payload._id));n>=0&&(e.users[n]=t.payload)},userDeleted:(e,t)=>{e.users=e.users.filter((e=>e._id!==t.payload))},updateUsersByCity:(e,t)=>{e.users.forEach((e=>{e.cityId===t.payload._id&&(e.city=t.payload)}))},updateUsersByCountry:(e,t)=>{e.users.forEach((e=>{e.countryId===t.payload._id&&(e.country=t.payload)}))},updateUsersByRole:(e,t)=>{e.users.forEach((e=>{e.roleId===t.payload._id&&(e.role=t.payload)}))}},extraReducers:e=>{e.addCase(ic.pending,(e=>{e.loading=!0})),e.addCase(ic.fulfilled,((e,t)=>{t.payload.data&&(e.users=t.payload.data.users,e.total=t.payload.data.total),e.loading=!1})),e.addCase(ic.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(rc.pending,(e=>{e.loading=!0})),e.addCase(rc.fulfilled,((e,t)=>{if(t.payload.data){const n=e.users.findIndex((e=>e._id===t.payload.data._id));n>=0?e.users[n]=t.payload.data:e.users.push(t.payload.data)}e.loading=!1})),e.addCase(rc.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(sc.pending,(e=>{e.loading=!0})),e.addCase(sc.fulfilled,((e,t)=>{if(t.payload.data){e.users.find((e=>e._id===t.payload.data._id))||e.users.push(t.payload.data)}e.loading=!1})),e.addCase(sc.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(oc.pending,(e=>{e.loading=!0})),e.addCase(oc.fulfilled,((e,t)=>{if(t.payload.data){const n=e.users.findIndex((e=>e._id===t.payload.data._id));n>=0&&(e.users[n]=t.payload.data)}e.loading=!1})),e.addCase(oc.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})),e.addCase(ac.pending,(e=>{e.loading=!0})),e.addCase(ac.fulfilled,((e,t)=>{t.payload.data&&(e.users=e.users.filter((e=>e._id!==t.payload.data))),e.loading=!1})),e.addCase(ac.rejected,((e,t)=>{e.loading=!1,e.error=t.payload}))}}),{setQuery:cc,userCreated:uc,userUpdated:dc,userDeleted:hc,updateUsersByCity:pc,updateUsersByCountry:gc,updateUsersByRole:fc}=lc.actions,mc=lc.reducer,vc=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.whitelist||null,r=n.blacklist||null;function s(e){return!(!i||-1!==i.indexOf(e))||!(!r||-1===r.indexOf(e))}return{in:function(t,n,i){return!s(n)&&e?e(t,n,i):t},out:function(e,n,i){return!s(n)&&t?t(e,n,i):e}}}((e=>{const{fetchingCurrentUser:t,loading:n,...i}=e;return i}),(e=>({...e,fetchingCurrentUser:!1,loading:!1})),{whitelist:["auth"]}),yc=Ni({auth:Aa,cities:Fa,countries:Ka,exchangeRate:sl,parcels:Al,roles:Ll,warehouses:Xl,cart:nc,users:mc}),Cc=function(e,t){var n=void 0!==e.version?e.version:-1,i=(e.debug,void 0===e.stateReconciler?Pr:e.stateReconciler),r=e.getStoredState||kr,s=void 0!==e.timeout?e.timeout:5e3,o=null,a=!1,l=!0,c=function(e){return e._persist.rehydrated&&o&&!l&&o.update(e),e};return function(u,d){var h=u||{},p=h._persist,g=Gr(h,["_persist"]);if(d.type===Ar){var f=!1,m=function(t,n){f||(d.rehydrate(e.key,t,n),f=!0)};if(s&&setTimeout((function(){!f&&m(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))}),s),l=!1,o||(o=Ir(e)),p)return Br({},t(g,d),{_persist:p});if("function"!==typeof d.rehydrate||"function"!==typeof d.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return d.register(e.key),r(e).then((function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,n).then((function(e){m(e)}),(function(e){m(void 0,e)}))}),(function(e){m(void 0,e)})),Br({},t(g,d),{_persist:{version:n,rehydrated:!1}})}if(d.type===Tr)return a=!0,d.result(function(e){var t=e.storage,n="".concat(void 0!==e.keyPrefix?e.keyPrefix:br).concat(e.key);return t.removeItem(n,Lr)}(e)),Br({},t(g,d),{_persist:p});if(d.type===Sr)return d.result(o&&o.flush()),Br({},t(g,d),{_persist:p});if(d.type===xr)l=!0;else if(d.type===Er){if(a)return Br({},g,{_persist:Br({},p,{rehydrated:!0})});if(d.key===e.key){var v=t(g,d),y=d.payload,C=Br({},!1!==i&&void 0!==y?i(y,u,v,e):v,{_persist:Br({},p,{rehydrated:!0})});return c(C)}}if(!p)return t(u,d);var w=t(g,d);return w===g?u:c(Br({},w,{_persist:p}))}}({key:"root",storage:qr.A,whitelist:["auth"],transforms:[vc]},yc),wc=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:r=!0}=null!==e&&void 0!==e?e:{};let s=new Hi;return t&&(function(e){return"boolean"===typeof e}(t)?s.push(Li):s.push(Fi(t.extraArgument))),s},{reducer:n,middleware:i,devTools:r=!0,preloadedState:s,enhancers:o}=e||{};let a,l;if("function"===typeof n)a=n;else{if(!Pi(n))throw new Error(wr(1));a=Ni(n)}l="function"===typeof i?i(t):t();let c=ki;r&&(c=Bi({trace:!1,..."object"===typeof r&&r}));const u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,i)=>{const r=e(n,i);let s=()=>{throw new Error(_i(15))};const o={getState:r.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return s(e,...n)}},a=t.map((e=>e(o)));return s=ki(...a)(r.dispatch),{...r,dispatch:s}}}(...l),d=qi(u);let h="function"===typeof o?o(d):d();return Ii(a,s,c(...h))}({reducer:Cc,middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST"]}})}),bc=function(e,t,n){var i=n||!1,r=Ii(Yr,zr,t&&t.enhancer?t.enhancer:void 0),s=function(e){r.dispatch({type:_r,key:e})},o=function(t,n,s){var o={type:Er,payload:n,err:s,key:t};e.dispatch(o),r.dispatch(o),i&&a.getState().bootstrapped&&(i(),i=!1)},a=jr({},r,{purge:function(){var t=[];return e.dispatch({type:Tr,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:Sr,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:xr})},persist:function(){e.dispatch({type:Ar,register:s,rehydrate:o})}});return t&&t.manualPersist||a.persist(),a}(wc),Sc=Object.create(null);Sc.open="0",Sc.close="1",Sc.ping="2",Sc.pong="3",Sc.message="4",Sc.upgrade="5",Sc.noop="6";const Ec=Object.create(null);Object.keys(Sc).forEach((e=>{Ec[Sc[e]]=e}));const xc={type:"error",data:"parser error"},Ac="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Tc="function"===typeof ArrayBuffer,_c=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Rc=(e,t,n)=>{let{type:i,data:r}=e;return Ac&&r instanceof Blob?t?n(r):Dc(r,n):Tc&&(r instanceof ArrayBuffer||_c(r))?t?n(r):Dc(new Blob([r]),n):n(Sc[i]+(r||""))},Dc=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function Mc(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Pc;const Ic="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nc="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let n=0;n<64;n++)Nc[Ic.charCodeAt(n)]=n;const kc="function"===typeof ArrayBuffer,Oc=(e,t)=>{if("string"!==typeof e)return{type:"message",data:Fc(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:Lc(e.substring(1),t)};return Ec[n]?e.length>1?{type:Ec[n],data:e.substring(1)}:{type:Ec[n]}:xc},Lc=(e,t)=>{if(kc){const n=(e=>{let t,n,i,r,s,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);const c=new ArrayBuffer(o),u=new Uint8Array(c);for(t=0;t<a;t+=4)n=Nc[e.charCodeAt(t)],i=Nc[e.charCodeAt(t+1)],r=Nc[e.charCodeAt(t+2)],s=Nc[e.charCodeAt(t+3)],u[l++]=n<<2|i>>4,u[l++]=(15&i)<<4|r>>2,u[l++]=(3&r)<<6|63&s;return c})(e);return Fc(n,t)}return{base64:!0,data:e}},Fc=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Bc=String.fromCharCode(30);function Vc(){return new TransformStream({transform(e,t){!function(e,t){Ac&&e.data instanceof Blob?e.data.arrayBuffer().then(Mc).then(t):Tc&&(e.data instanceof ArrayBuffer||_c(e.data))?t(Mc(e.data)):Rc(e,!1,(e=>{Pc||(Pc=new TextEncoder),t(Pc.encode(e))}))}(e,(n=>{const i=n.length;let r;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);const e=new DataView(r.buffer);e.setUint8(0,126),e.setUint16(1,i)}else{r=new Uint8Array(9);const e=new DataView(r.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}e.data&&"string"!==typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)}))}})}let Gc;function Hc(e){return e.reduce(((e,t)=>e+t.length),0)}function Wc(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let i=0;for(let r=0;r<t;r++)n[r]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),n}function jc(e){if(e)return function(e){for(var t in jc.prototype)e[t]=jc.prototype[t];return e}(e)}jc.prototype.on=jc.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},jc.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},jc.prototype.off=jc.prototype.removeListener=jc.prototype.removeAllListeners=jc.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},jc.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},jc.prototype.emitReserved=jc.prototype.emit,jc.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},jc.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Uc="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function zc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const Yc=Uc.setTimeout,qc=Uc.clearTimeout;function Kc(e,t){t.useNativeTimers?(e.setTimeoutFn=Yc.bind(Uc),e.clearTimeoutFn=qc.bind(Uc)):(e.setTimeoutFn=Uc.setTimeout.bind(Uc),e.clearTimeoutFn=Uc.clearTimeout.bind(Uc))}class Xc extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Qc extends jc{constructor(e){super(),this.writable=!1,Kc(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,n){return super.emitReserved("error",new Xc(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Oc(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}const Zc="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),$c=64,Jc={};let eu,tu=0,nu=0;function iu(e){let t="";do{t=Zc[e%$c]+t,e=Math.floor(e/$c)}while(e>0);return t}function ru(){const e=iu(+new Date);return e!==eu?(tu=0,eu=e):e+"."+iu(tu++)}for(;nu<$c;nu++)Jc[Zc[nu]]=nu;let su=!1;try{su="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(sre){}const ou=su;function au(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||ou))return new XMLHttpRequest}catch(rre){}if(!t)try{return new(Uc[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(rre){}}function lu(){}const cu=null!=new au({xdomain:!1}).responseType;class uu extends jc{constructor(e,t){super(),Kc(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.data=void 0!==t.data?t.data:null,this.create()}create(){var e;const t=zc(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;const n=this.xhr=new au(t);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(rre){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(rre){}try{n.setRequestHeader("Accept","*/*")}catch(rre){}null===(e=this.opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this.opts.cookieJar)||void 0===e||e.parseCookies(n)),4===n.readyState&&(200===n.status||1223===n.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"===typeof n.status?n.status:0)}),0))},n.send(this.data)}catch(rre){return void this.setTimeoutFn((()=>{this.onError(rre)}),0)}"undefined"!==typeof document&&(this.index=uu.requestsCount++,uu.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=lu,e)try{this.xhr.abort()}catch(rre){}"undefined"!==typeof document&&delete uu.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(uu.requestsCount=0,uu.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",du);else if("function"===typeof addEventListener){addEventListener("onpagehide"in Uc?"pagehide":"unload",du,!1)}function du(){for(let e in uu.requests)uu.requests.hasOwnProperty(e)&&uu.requests[e].abort()}const hu="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),pu=Uc.WebSocket||Uc.MozWebSocket,gu="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const fu={websocket:class extends Qc{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=gu?{}:zc(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=gu?new pu(e,t,n):t?new pu(e,t):new pu(e)}catch(sre){return this.emitReserved("error",sre)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;Rc(n,this.supportsBinary,(e=>{try{this.ws.send(e)}catch(rre){}i&&hu((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=ru()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!pu}},webtransport:class extends Qc{get name(){return"webtransport"}doOpen(){"function"===typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this.transport.ready.then((()=>{this.transport.createBidirectionalStream().then((e=>{const t=function(e,t){Gc||(Gc=new TextDecoder);const n=[];let i=0,r=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(0===i){if(Hc(n)<1)break;const e=Wc(n,1);s=128===(128&e[0]),r=127&e[0],i=r<126?3:126===r?1:2}else if(1===i){if(Hc(n)<2)break;const e=Wc(n,2);r=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(Hc(n)<8)break;const e=Wc(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),s=t.getUint32(0);if(s>Math.pow(2,21)-1){a.enqueue(xc);break}r=s*Math.pow(2,32)+t.getUint32(4),i=3}else{if(Hc(n)<r)break;const e=Wc(n,r);a.enqueue(Oc(s?e:Gc.decode(e),t)),i=0}if(0===r||r>e){a.enqueue(xc);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),i=Vc();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const r=()=>{n.read().then((e=>{let{done:t,value:n}=e;t||(this.onPacket(n),r())})).catch((e=>{}))};r();const s={type:"open"};this.query.sid&&(s.data='{"sid":"'.concat(this.query.sid,'"}')),this.writer.write(s).then((()=>this.onOpen()))}))})))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;this.writer.write(n).then((()=>{i&&hu((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this.transport)||void 0===e||e.close()}},polling:class extends Qc{constructor(e){if(super(e),this.polling=!1,"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}const t=e&&e.forceBase64;this.supportsBinary=cu&&!t,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(Bc),i=[];for(let r=0;r<n.length;r++){const e=Oc(n[r],t);if(i.push(e),"error"===e.type)break}return i})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,i=new Array(n);let r=0;e.forEach(((e,s)=>{Rc(e,!1,(e=>{i[s]=e,++r===n&&t(i.join(Bc))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=ru()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new uu(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}},mu=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,vu=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function yu(e){if(e.length>2e3)throw"URI too long";const t=e,n=e.indexOf("["),i=e.indexOf("]");-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));let r=mu.exec(e||""),s={},o=14;for(;o--;)s[vu[o]]=r[o]||"";return-1!=n&&-1!=i&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){const n=/\/{2,9}/g,i=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||i.splice(0,1);"/"==t.slice(-1)&&i.splice(i.length-1,1);return i}(0,s.path),s.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,i){t&&(n[t]=i)})),n}(0,s.query),s}class Cu extends jc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.binaryType="arraybuffer",this.writeBuffer=[],e&&"object"===typeof e&&(t=e,e=null),e?(e=yu(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=yu(t.host).host),Kc(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let i=0,r=n.length;i<r;i++){let e=n[i].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"===typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new fu[e](n)}open(){let e;if(this.opts.rememberUpgrade&&Cu.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(rre){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(e=>this.onClose("transport close",e)))}probe(e){let t=this.createTransport(e),n=!1;Cu.priorWebsocketSuccess=!1;const i=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Cu.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function r(){n||(n=!0,c(),t.close(),t=null)}const s=e=>{const n=new Error("probe error: "+e);n.transport=t.name,r(),this.emitReserved("upgradeError",n)};function o(){s("transport closed")}function a(){s("socket closed")}function l(e){t&&e.name!==t.name&&r()}const c=()=>{t.removeListener("open",i),t.removeListener("error",s),t.removeListener("close",o),this.off("close",a),this.off("upgrading",l)};t.once("open",i),t.once("error",s),t.once("close",o),this.once("close",a),this.once("upgrading",l),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onOpen(){if(this.readyState="open",Cu.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(e+="string"===typeof(t=i)?function(e){let t=0,n=0;for(let i=0,r=e.length;i<r;i++)t=e.charCodeAt(i),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this.maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,i){if("function"===typeof t&&(i=t,t=void 0),"function"===typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}onError(e){Cu.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let n=0;const i=e.length;for(;n<i;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}Cu.protocol=4;Cu.protocol;const wu="function"===typeof ArrayBuffer,bu=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Su=Object.prototype.toString,Eu="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Su.call(Blob),xu="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Su.call(File);function Au(e){return wu&&(e instanceof ArrayBuffer||bu(e))||Eu&&e instanceof Blob||xu&&e instanceof File}function Tu(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Tu(e[t]))return!0;return!1}if(Au(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Tu(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Tu(e[n]))return!0;return!1}function _u(e){const t=[],n=e.data,i=e;return i.data=Ru(n,t),i.attachments=t.length,{packet:i,buffers:t}}function Ru(e,t){if(!e)return e;if(Au(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=Ru(e[i],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=Ru(e[i],t));return n}return e}function Du(e,t){return e.data=Mu(e.data,t),delete e.attachments,e}function Mu(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Mu(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Mu(e[n],t));return e}const Pu=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Iu=5;var Nu;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Nu||(Nu={}));class ku{constructor(e){this.replacer=e}encode(e){return e.type!==Nu.EVENT&&e.type!==Nu.ACK||!Tu(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Nu.EVENT?Nu.BINARY_EVENT:Nu.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Nu.BINARY_EVENT&&e.type!==Nu.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=_u(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}function Ou(e){return"[object Object]"===Object.prototype.toString.call(e)}class Lu extends jc{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Nu.BINARY_EVENT;n||t.type===Nu.BINARY_ACK?(t.type=n?Nu.EVENT:Nu.ACK,this.reconstructor=new Fu(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Au(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Nu[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Nu.BINARY_EVENT||n.type===Nu.BINARY_ACK){const i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const r=e.substring(i,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1)){const i=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(i,t)}else n.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(!Lu.isPayloadValid(n.type,i))throw new Error("invalid payload");n.data=i}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(rre){return!1}}static isPayloadValid(e,t){switch(e){case Nu.CONNECT:return Ou(t);case Nu.DISCONNECT:return void 0===t;case Nu.CONNECT_ERROR:return"string"===typeof t||Ou(t);case Nu.EVENT:case Nu.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===Pu.indexOf(t[0]));case Nu.ACK:case Nu.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Fu{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=Du(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Bu(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Vu=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Gu extends jc{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Bu(e,"open",this.onopen.bind(this)),Bu(e,"packet",this.onpacket.bind(this)),Bu(e,"error",this.onerror.bind(this)),Bu(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){if(Vu.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:Nu.EVENT,data:n,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){const e=this.ids++,t=n.pop();this._registerAckCallback(e,t),r.id=e}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,t){var n,i=this;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const s=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),r),o=function(){i.io.clearTimeoutFn(s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(i,n)};o.withError=!0,this.acks[e]=o}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise(((t,i)=>{const r=(e,n)=>e?i(e):t(n);r.withError=!0,n.push(r),this.emit(e,...n)}))}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(i!==t._queue[0])return;if(null!==e)i.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];n(null,...s)}return i.pending=!1,t._drainQueue()})),this._queue.push(i),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Nu.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Nu.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Nu.EVENT:case Nu.BINARY_EVENT:this.onevent(e);break;case Nu.ACK:case Nu.BINARY_ACK:this.onack(e);break;case Nu.DISCONNECT:this.ondisconnect();break;case Nu.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];t.packet({type:Nu.ACK,id:e,data:r})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Nu.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Hu(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Hu.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Hu.prototype.reset=function(){this.attempts=0},Hu.prototype.setMin=function(e){this.ms=e},Hu.prototype.setMax=function(e){this.max=e},Hu.prototype.setJitter=function(e){this.jitter=e};class Wu extends jc{constructor(e,n){var i;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,Kc(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=n.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new Hu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=e;const r=n.parser||t;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Cu(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=Bu(t,"open",(function(){n.onopen(),e&&e()})),r=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},s=Bu(t,"error",r);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{i(),r(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(i),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Bu(e,"ping",this.onping.bind(this)),Bu(e,"data",this.ondata.bind(this)),Bu(e,"error",this.onerror.bind(this)),Bu(e,"close",this.onclose.bind(this)),Bu(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(rre){this.onclose("parse error",rre)}}ondecoded(e){hu((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Gu(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const ju={};function Uu(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),i=yu(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(n&&n.port===i.port?"":":"+i.port),i}(e,(t=t||{}).path||"/socket.io"),i=n.source,r=n.id,s=n.path,o=ju[r]&&s in ju[r].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?a=new Wu(i,t):(ju[r]||(ju[r]=new Wu(i,t)),a=ju[r]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(Uu,{Manager:Wu,Socket:Gu,io:Uu,connect:Uu});let zu=function(e){return e.Created="cityCreated",e.Updated="cityUpdated",e.Deleted="cityDeleted",e}({}),Yu=function(e){return e.Created="countryCreated",e.Updated="countryUpdated",e.Deleted="countryDeleted",e}({}),qu=function(e){return e.Created="exchangeRateCreated",e.Updated="exchangeRateUpdated",e.Deleted="exchangeRateDeleted",e}({}),Ku=function(e){return e.Created="parcelCreated",e.Updated="parcelUpdated",e.Deleted="parcelDeleted",e.BulkUpdated="parcelBulkUpdated",e.StatusChanged="parcelStatusChanged",e.BulkStatusChanged="parcelBulkStatusChanged",e}({}),Xu=function(e){return e.Created="roleCreated",e.Updated="roleUpdated",e.Deleted="roleDeleted",e}({}),Qu=function(e){return e.Created="warehouseCreated",e.Updated="warehouseUpdated",e.Deleted="warehouseDeleted",e}({}),Zu=function(e){return e.Created="userCreated",e.Updated="userUpdated",e.Deleted="userDeleted",e}({});class $u{constructor(){this.socket=null}static getInstance(){return $u.instance||($u.instance=new $u),$u.instance}connect(){if(this.socket)return;const e=wc.getState().auth.token;this.socket=Uu("http://172.23.40.227:5000",{auth:{token:e}}),this.socket.on("connect",(()=>{console.log("Connected to socket server")})),this.socket.on("disconnect",(e=>{console.log("Disconnected from socket server",e),"io server disconnect"===e&&this.socket.connect()})),this.socket.on("error",(e=>{console.error("Socket error:",e)})),this.registerEventListeners()}registerEventListeners(){this.socket&&(this.socket.on(zu.Created,(e=>{wc.dispatch(Na(e))})),this.socket.on(zu.Updated,(e=>{wc.dispatch(ka(e)),wc.dispatch(pc(e)),wc.dispatch(wl(e)),wc.dispatch(ql(e))})),this.socket.on(zu.Deleted,(e=>{wc.dispatch(Oa(e))})),this.socket.on(Yu.Created,(e=>{wc.dispatch(za(e))})),this.socket.on(Yu.Updated,(e=>{wc.dispatch(Ya(e)),wc.dispatch(gc(e)),wc.dispatch(bl(e)),wc.dispatch(Kl(e)),wc.dispatch(La(e))})),this.socket.on(Yu.Deleted,(e=>{wc.dispatch(qa(e))})),this.socket.on(qu.Created,(e=>{wc.dispatch(nl(e))})),this.socket.on(qu.Updated,(e=>{wc.dispatch(il(e))})),this.socket.on(qu.Deleted,(e=>{wc.dispatch(rl(e))})),this.socket.on(Ku.Created,(e=>{wc.dispatch(gl(e))})),this.socket.on(Ku.Updated,(e=>{wc.dispatch(fl(e))})),this.socket.on(Ku.Deleted,(e=>{wc.dispatch(ml(e))})),this.socket.on(Ku.StatusChanged,(e=>{console.log("parcel Changed",e),wc.dispatch(vl(e))})),this.socket.on(Ku.BulkStatusChanged,(e=>{wc.dispatch(yl(e))})),this.socket.on(Ku.BulkUpdated,(e=>{wc.dispatch(Cl(e))})),this.socket.on(Xu.Created,(e=>{wc.dispatch(Nl(e))})),this.socket.on(Xu.Updated,(e=>{wc.dispatch(kl(e)),wc.dispatch(El(e)),wc.dispatch(fc(e))})),this.socket.on(Xu.Deleted,(e=>{wc.dispatch(Ol(e))})),this.socket.on(Qu.Created,(e=>{wc.dispatch(Ul(e))})),this.socket.on(Qu.Updated,(e=>{wc.dispatch(zl(e)),wc.dispatch(xl(e))})),this.socket.on(Qu.Deleted,(e=>{wc.dispatch(Yl(e))})),this.socket.on(Zu.Created,(e=>{wc.dispatch(uc(e))})),this.socket.on(Zu.Updated,(e=>{wc.dispatch(dc(e)),wc.dispatch(Sl(e));const t=wc.getState().auth.user;t&&t._id===e._id&&wc.dispatch(pa())})),this.socket.on(Zu.Deleted,(e=>{const t=wc.getState().auth.user;t&&t._id===e._id?wc.dispatch(ga()):wc.dispatch(hc(e))})))}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}sendMessage(e,t){this.socket&&this.socket.emit(e,t)}onMessage(e,t){this.socket&&this.socket.on(e,t)}}$u.instance=void 0;const Ju=$u.getInstance();const ed=new class{constructor(){this.refreshingToken=!1,this.refreshSubscribers=[]}async generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}async getDeviceId(){let e=localStorage.getItem("deviceId");return e||(e=await this.generateUUID(),localStorage.setItem("deviceId",e)),e}async getBrowserName(){const e=navigator.userAgent;return!e.includes("Chrome")||e.includes("Edge")||e.includes("OPR")?e.includes("Safari")&&!e.includes("Chrome")?"Safari":e.includes("Firefox")?"Firefox":e.includes("MSIE")||e.includes("Trident")?"Internet Explorer":e.includes("Edge")?"Edge":e.includes("OPR")||e.includes("Opera")?"Opera":"Unknown":"Chrome"}async getDeviceName(){const e=navigator.userAgent;if(/android/i.test(e)){const t=e.match(/Android\s+([\d.]+); ([^;]+)/);return t?t[2]:"Android Device"}if(/iPad|iPhone|iPod/.test(e)&&!window.MSStream){const t=e.match(/(iPhone|iPad|iPod).*OS\s([\d_]+)/);return t?t[1]:"iOS Device"}if(/Windows NT|Mac OS|Linux/.test(e)){if(/Windows NT/.test(e))return"Windows PC";if(/Mac OS/.test(e))return"Mac PC";if(/Linux/.test(e))return"Linux PC"}return"Unknown Device"}async login(e,t){try{const n=await this.getDeviceId(),i=await this.getBrowserName(),r=await this.getDeviceName(),s=await wc.dispatch(da({email:e,password:t,deviceId:n,browser:i,deviceName:r}));if("fulfilled"!==s.meta.requestStatus){const{status:e,data:t}=s.payload;return void(401===e||403===e?ot.error("Login failed. Please check your credentials."):500===e&&"Network Error"===t?ot.error("Network error. Please check your connection."):ot.error("Login failed. Please try again later."))}if(await this.fetchCsrfToken()){await this.fetchCurrentUser()&&ot.success("Login successful!")}}catch(n){console.error("Login failed:",n),ot.error(n.message||"An unexpected error occurred.")}}async fetchCsrfToken(){try{const e=await wc.dispatch(ha());if("fulfilled"!==e.meta.requestStatus){const{status:t,data:n}=e.payload;return 500===t&&"Network Error"===n?ot.error("Network error. Please check your connection."):ot.error("Failed to fetch CSRF token. Please try again later."),!1}const t=e.payload.data.csrfToken;return document.cookie="csrfToken=".concat(t,"; path=/;"),!0}catch(e){return console.error("Failed to fetch CSRF token:",e),ot.error(e.message||"An unexpected error occurred."),!1}}async fetchCurrentUser(){try{const e=await wc.dispatch(pa());if(console.log(e),"fulfilled"!==e.meta.requestStatus){const{status:t}=e.payload;if(401===t||403===t)return this.logout("Session expired. Please log in again."),!1}return!0}catch(e){return console.error("Failed to fetch current user:",e),ot.error(e.message||"An unexpected error occurred."),!1}}async refreshAndRetryRequest(e){if(this.refreshingToken)return new Promise((t=>{this.refreshSubscribers.push((n=>{e.headers&&(e.headers.Authorization="Bearer ".concat(n)),t(!0)}))}));this.refreshingToken=!0;const t=wc.getState().auth.refreshToken,n=await this.getDeviceId();if(!t)return console.log("No refresh token available"),this.logout("No refresh token available"),!1;try{console.log("Attempting to refresh token");const i=await la.post("/auth/refreshToken",{refreshToken:t,deviceId:n});return console.log("Token refreshed successfully",i.data),wc.dispatch(va(i.data.accessToken)),wc.dispatch(ya(i.data.refreshToken)),e.headers||(e.headers={}),e.headers.Authorization="Bearer ".concat(i.data.accessToken),this.onRefreshed(i.data.accessToken),!0}catch(i){return console.error("Failed to refresh token:",i),!i.response||401!==i.response.status&&403!==i.response.status?(console.error("Network error during token refresh:",i),ot.error("Network error. Please check your connection.")):(console.log("Session expired. Logging out."),this.logout("Session expired. Please log in again.")),!1}finally{this.refreshingToken=!1}}onRefreshed(e){this.refreshSubscribers.forEach((t=>t(e))),this.refreshSubscribers=[]}logout(e){wc.dispatch(ga()),Ju.disconnect(),ot.info(e||"Logged out successfully.")}isAuthenticated(){return!!wc.getState().auth.token}};var td=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===nd}(e)}(e)};var nd="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function id(e,t){return!1!==t.clone&&t.isMergeableObject(e)?sd((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function rd(e,t,n){return e.concat(t).map((function(e){return id(e,n)}))}function sd(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||rd,n.isMergeableObject=n.isMergeableObject||td;var i=Array.isArray(t);return i===Array.isArray(e)?i?n.arrayMerge(e,t,n):function(e,t,n){var i={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){i[t]=id(e[t],n)})),Object.keys(t).forEach((function(r){n.isMergeableObject(t[r])&&e[r]?i[r]=sd(e[r],t[r],n):i[r]=id(t[r],n)})),i}(e,t,n):id(t,n)}sd.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return sd(e,n,t)}),{})};const od=sd;const ad="object"==typeof global&&global&&global.Object===Object&&global;var ld="object"==typeof self&&self&&self.Object===Object&&self;const cd=ad||ld||Function("return this")();const ud=cd.Symbol;var dd=Object.prototype,hd=dd.hasOwnProperty,pd=dd.toString,gd=ud?ud.toStringTag:void 0;const fd=function(e){var t=hd.call(e,gd),n=e[gd];try{e[gd]=void 0;var i=!0}catch(rre){}var r=pd.call(e);return i&&(t?e[gd]=n:delete e[gd]),r};var md=Object.prototype.toString;const vd=function(e){return md.call(e)};var yd=ud?ud.toStringTag:void 0;const Cd=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":yd&&yd in Object(e)?fd(e):vd(e)};const wd=function(e,t){return function(n){return e(t(n))}};const bd=wd(Object.getPrototypeOf,Object);const Sd=function(e){return null!=e&&"object"==typeof e};var Ed=Function.prototype,xd=Object.prototype,Ad=Ed.toString,Td=xd.hasOwnProperty,_d=Ad.call(Object);const Rd=function(e){if(!Sd(e)||"[object Object]"!=Cd(e))return!1;var t=bd(e);if(null===t)return!0;var n=Td.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ad.call(n)==_d};const Dd=function(){this.__data__=[],this.size=0};const Md=function(e,t){return e===t||e!==e&&t!==t};const Pd=function(e,t){for(var n=e.length;n--;)if(Md(e[n][0],t))return n;return-1};var Id=Array.prototype.splice;const Nd=function(e){var t=this.__data__,n=Pd(t,e);return!(n<0)&&(n==t.length-1?t.pop():Id.call(t,n,1),--this.size,!0)};const kd=function(e){var t=this.__data__,n=Pd(t,e);return n<0?void 0:t[n][1]};const Od=function(e){return Pd(this.__data__,e)>-1};const Ld=function(e,t){var n=this.__data__,i=Pd(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};function Fd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Fd.prototype.clear=Dd,Fd.prototype.delete=Nd,Fd.prototype.get=kd,Fd.prototype.has=Od,Fd.prototype.set=Ld;const Bd=Fd;const Vd=function(){this.__data__=new Bd,this.size=0};const Gd=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const Hd=function(e){return this.__data__.get(e)};const Wd=function(e){return this.__data__.has(e)};const jd=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const Ud=function(e){if(!jd(e))return!1;var t=Cd(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const zd=cd["__core-js_shared__"];var Yd=function(){var e=/[^.]+$/.exec(zd&&zd.keys&&zd.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const qd=function(e){return!!Yd&&Yd in e};var Kd=Function.prototype.toString;const Xd=function(e){if(null!=e){try{return Kd.call(e)}catch(rre){}try{return e+""}catch(rre){}}return""};var Qd=/^\[object .+?Constructor\]$/,Zd=Function.prototype,$d=Object.prototype,Jd=Zd.toString,eh=$d.hasOwnProperty,th=RegExp("^"+Jd.call(eh).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const nh=function(e){return!(!jd(e)||qd(e))&&(Ud(e)?th:Qd).test(Xd(e))};const ih=function(e,t){return null==e?void 0:e[t]};const rh=function(e,t){var n=ih(e,t);return nh(n)?n:void 0};const sh=rh(cd,"Map");const oh=rh(Object,"create");const ah=function(){this.__data__=oh?oh(null):{},this.size=0};const lh=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var ch=Object.prototype.hasOwnProperty;const uh=function(e){var t=this.__data__;if(oh){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ch.call(t,e)?t[e]:void 0};var dh=Object.prototype.hasOwnProperty;const hh=function(e){var t=this.__data__;return oh?void 0!==t[e]:dh.call(t,e)};const ph=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=oh&&void 0===t?"__lodash_hash_undefined__":t,this};function gh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}gh.prototype.clear=ah,gh.prototype.delete=lh,gh.prototype.get=uh,gh.prototype.has=hh,gh.prototype.set=ph;const fh=gh;const mh=function(){this.size=0,this.__data__={hash:new fh,map:new(sh||Bd),string:new fh}};const vh=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const yh=function(e,t){var n=e.__data__;return vh(t)?n["string"==typeof t?"string":"hash"]:n.map};const Ch=function(e){var t=yh(this,e).delete(e);return this.size-=t?1:0,t};const wh=function(e){return yh(this,e).get(e)};const bh=function(e){return yh(this,e).has(e)};const Sh=function(e,t){var n=yh(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};function Eh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Eh.prototype.clear=mh,Eh.prototype.delete=Ch,Eh.prototype.get=wh,Eh.prototype.has=bh,Eh.prototype.set=Sh;const xh=Eh;const Ah=function(e,t){var n=this.__data__;if(n instanceof Bd){var i=n.__data__;if(!sh||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new xh(i)}return n.set(e,t),this.size=n.size,this};function Th(e){var t=this.__data__=new Bd(e);this.size=t.size}Th.prototype.clear=Vd,Th.prototype.delete=Gd,Th.prototype.get=Hd,Th.prototype.has=Wd,Th.prototype.set=Ah;const _h=Th;const Rh=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e};const Dh=function(){try{var e=rh(Object,"defineProperty");return e({},"",{}),e}catch(rre){}}();const Mh=function(e,t,n){"__proto__"==t&&Dh?Dh(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var Ph=Object.prototype.hasOwnProperty;const Ih=function(e,t,n){var i=e[t];Ph.call(e,t)&&Md(i,n)&&(void 0!==n||t in e)||Mh(e,t,n)};const Nh=function(e,t,n,i){var r=!n;n||(n={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=i?i(n[a],e[a],a,n,e):void 0;void 0===l&&(l=e[a]),r?Mh(n,a,l):Ih(n,a,l)}return n};const kh=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i};const Oh=function(e){return Sd(e)&&"[object Arguments]"==Cd(e)};var Lh=Object.prototype,Fh=Lh.hasOwnProperty,Bh=Lh.propertyIsEnumerable,Vh=Oh(function(){return arguments}())?Oh:function(e){return Sd(e)&&Fh.call(e,"callee")&&!Bh.call(e,"callee")};const Gh=Vh;const Hh=Array.isArray;const Wh=function(){return!1};var jh="object"==typeof exports&&exports&&!exports.nodeType&&exports,Uh=jh&&"object"==typeof module&&module&&!module.nodeType&&module,zh=Uh&&Uh.exports===jh?cd.Buffer:void 0;const Yh=(zh?zh.isBuffer:void 0)||Wh;var qh=/^(?:0|[1-9]\d*)$/;const Kh=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&qh.test(e))&&e>-1&&e%1==0&&e<t};const Xh=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var Qh={};Qh["[object Float32Array]"]=Qh["[object Float64Array]"]=Qh["[object Int8Array]"]=Qh["[object Int16Array]"]=Qh["[object Int32Array]"]=Qh["[object Uint8Array]"]=Qh["[object Uint8ClampedArray]"]=Qh["[object Uint16Array]"]=Qh["[object Uint32Array]"]=!0,Qh["[object Arguments]"]=Qh["[object Array]"]=Qh["[object ArrayBuffer]"]=Qh["[object Boolean]"]=Qh["[object DataView]"]=Qh["[object Date]"]=Qh["[object Error]"]=Qh["[object Function]"]=Qh["[object Map]"]=Qh["[object Number]"]=Qh["[object Object]"]=Qh["[object RegExp]"]=Qh["[object Set]"]=Qh["[object String]"]=Qh["[object WeakMap]"]=!1;const Zh=function(e){return Sd(e)&&Xh(e.length)&&!!Qh[Cd(e)]};const $h=function(e){return function(t){return e(t)}};var Jh="object"==typeof exports&&exports&&!exports.nodeType&&exports,ep=Jh&&"object"==typeof module&&module&&!module.nodeType&&module,tp=ep&&ep.exports===Jh&&ad.process;const np=function(){try{var e=ep&&ep.require&&ep.require("util").types;return e||tp&&tp.binding&&tp.binding("util")}catch(rre){}}();var ip=np&&np.isTypedArray;const rp=ip?$h(ip):Zh;var sp=Object.prototype.hasOwnProperty;const op=function(e,t){var n=Hh(e),i=!n&&Gh(e),r=!n&&!i&&Yh(e),s=!n&&!i&&!r&&rp(e),o=n||i||r||s,a=o?kh(e.length,String):[],l=a.length;for(var c in e)!t&&!sp.call(e,c)||o&&("length"==c||r&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Kh(c,l))||a.push(c);return a};var ap=Object.prototype;const lp=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ap)};const cp=wd(Object.keys,Object);var up=Object.prototype.hasOwnProperty;const dp=function(e){if(!lp(e))return cp(e);var t=[];for(var n in Object(e))up.call(e,n)&&"constructor"!=n&&t.push(n);return t};const hp=function(e){return null!=e&&Xh(e.length)&&!Ud(e)};const pp=function(e){return hp(e)?op(e):dp(e)};const gp=function(e,t){return e&&Nh(t,pp(t),e)};const fp=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var mp=Object.prototype.hasOwnProperty;const vp=function(e){if(!jd(e))return fp(e);var t=lp(e),n=[];for(var i in e)("constructor"!=i||!t&&mp.call(e,i))&&n.push(i);return n};const yp=function(e){return hp(e)?op(e,!0):vp(e)};const Cp=function(e,t){return e&&Nh(t,yp(t),e)};var wp="object"==typeof exports&&exports&&!exports.nodeType&&exports,bp=wp&&"object"==typeof module&&module&&!module.nodeType&&module,Sp=bp&&bp.exports===wp?cd.Buffer:void 0,Ep=Sp?Sp.allocUnsafe:void 0;const xp=function(e,t){if(t)return e.slice();var n=e.length,i=Ep?Ep(n):new e.constructor(n);return e.copy(i),i};const Ap=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t};const Tp=function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,s=[];++n<i;){var o=e[n];t(o,n,e)&&(s[r++]=o)}return s};const _p=function(){return[]};var Rp=Object.prototype.propertyIsEnumerable,Dp=Object.getOwnPropertySymbols,Mp=Dp?function(e){return null==e?[]:(e=Object(e),Tp(Dp(e),(function(t){return Rp.call(e,t)})))}:_p;const Pp=Mp;const Ip=function(e,t){return Nh(e,Pp(e),t)};const Np=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e};var kp=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Np(t,Pp(e)),e=bd(e);return t}:_p;const Op=kp;const Lp=function(e,t){return Nh(e,Op(e),t)};const Fp=function(e,t,n){var i=t(e);return Hh(e)?i:Np(i,n(e))};const Bp=function(e){return Fp(e,pp,Pp)};const Vp=function(e){return Fp(e,yp,Op)};const Gp=rh(cd,"DataView");const Hp=rh(cd,"Promise");const Wp=rh(cd,"Set");const jp=rh(cd,"WeakMap");var Up="[object Map]",zp="[object Promise]",Yp="[object Set]",qp="[object WeakMap]",Kp="[object DataView]",Xp=Xd(Gp),Qp=Xd(sh),Zp=Xd(Hp),$p=Xd(Wp),Jp=Xd(jp),eg=Cd;(Gp&&eg(new Gp(new ArrayBuffer(1)))!=Kp||sh&&eg(new sh)!=Up||Hp&&eg(Hp.resolve())!=zp||Wp&&eg(new Wp)!=Yp||jp&&eg(new jp)!=qp)&&(eg=function(e){var t=Cd(e),n="[object Object]"==t?e.constructor:void 0,i=n?Xd(n):"";if(i)switch(i){case Xp:return Kp;case Qp:return Up;case Zp:return zp;case $p:return Yp;case Jp:return qp}return t});const tg=eg;var ng=Object.prototype.hasOwnProperty;const ig=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ng.call(e,"index")&&(n.index=e.index,n.input=e.input),n};const rg=cd.Uint8Array;const sg=function(e){var t=new e.constructor(e.byteLength);return new rg(t).set(new rg(e)),t};const og=function(e,t){var n=t?sg(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)};var ag=/\w*$/;const lg=function(e){var t=new e.constructor(e.source,ag.exec(e));return t.lastIndex=e.lastIndex,t};var cg=ud?ud.prototype:void 0,ug=cg?cg.valueOf:void 0;const dg=function(e){return ug?Object(ug.call(e)):{}};const hg=function(e,t){var n=t?sg(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};const pg=function(e,t,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return sg(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return og(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return hg(e,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return lg(e);case"[object Symbol]":return dg(e)}};var gg=Object.create,fg=function(){function e(){}return function(t){if(!jd(t))return{};if(gg)return gg(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const mg=fg;const vg=function(e){return"function"!=typeof e.constructor||lp(e)?{}:mg(bd(e))};const yg=function(e){return Sd(e)&&"[object Map]"==tg(e)};var Cg=np&&np.isMap;const wg=Cg?$h(Cg):yg;const bg=function(e){return Sd(e)&&"[object Set]"==tg(e)};var Sg=np&&np.isSet;const Eg=Sg?$h(Sg):bg;var xg="[object Arguments]",Ag="[object Function]",Tg="[object Object]",_g={};_g[xg]=_g["[object Array]"]=_g["[object ArrayBuffer]"]=_g["[object DataView]"]=_g["[object Boolean]"]=_g["[object Date]"]=_g["[object Float32Array]"]=_g["[object Float64Array]"]=_g["[object Int8Array]"]=_g["[object Int16Array]"]=_g["[object Int32Array]"]=_g["[object Map]"]=_g["[object Number]"]=_g[Tg]=_g["[object RegExp]"]=_g["[object Set]"]=_g["[object String]"]=_g["[object Symbol]"]=_g["[object Uint8Array]"]=_g["[object Uint8ClampedArray]"]=_g["[object Uint16Array]"]=_g["[object Uint32Array]"]=!0,_g["[object Error]"]=_g[Ag]=_g["[object WeakMap]"]=!1;const Rg=function e(t,n,i,r,s,o){var a,l=1&n,c=2&n,u=4&n;if(i&&(a=s?i(t,r,s,o):i(t)),void 0!==a)return a;if(!jd(t))return t;var d=Hh(t);if(d){if(a=ig(t),!l)return Ap(t,a)}else{var h=tg(t),p=h==Ag||"[object GeneratorFunction]"==h;if(Yh(t))return xp(t,l);if(h==Tg||h==xg||p&&!s){if(a=c||p?{}:vg(t),!l)return c?Lp(t,Cp(a,t)):Ip(t,gp(a,t))}else{if(!_g[h])return s?t:{};a=pg(t,h,l)}}o||(o=new _h);var g=o.get(t);if(g)return g;o.set(t,a),Eg(t)?t.forEach((function(r){a.add(e(r,n,i,r,t,o))})):wg(t)&&t.forEach((function(r,s){a.set(s,e(r,n,i,s,t,o))}));var f=d?void 0:(u?c?Vp:Bp:c?yp:pp)(t);return Rh(f||t,(function(r,s){f&&(r=t[s=r]),Ih(a,s,e(r,n,i,s,t,o))})),a};const Dg=function(e){return Rg(e,5)};var Mg=n(2363),Pg=n.n(Mg);const Ig=function(e,t){};const Ng=function(e){return Rg(e,4)};const kg=function(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r};const Og=function(e){return"symbol"==typeof e||Sd(e)&&"[object Symbol]"==Cd(e)};function Lg(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=e.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(Lg.Cache||xh),n}Lg.Cache=xh;const Fg=Lg;const Bg=function(e){var t=Fg(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t};var Vg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gg=/\\(\\)?/g,Hg=Bg((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Vg,(function(e,n,i,r){t.push(i?r.replace(Gg,"$1"):n||e)})),t}));const Wg=Hg;const jg=function(e){if("string"==typeof e||Og(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var Ug=ud?ud.prototype:void 0,zg=Ug?Ug.toString:void 0;const Yg=function e(t){if("string"==typeof t)return t;if(Hh(t))return kg(t,e)+"";if(Og(t))return zg?zg.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};const qg=function(e){return null==e?"":Yg(e)};const Kg=function(e){return Hh(e)?kg(e,jg):Og(e)?[e]:Ap(Wg(qg(e)))};n(5914);function Xg(){return Xg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Xg.apply(this,arguments)}function Qg(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Zg(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function $g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Jg=(0,s.createContext)(void 0);Jg.displayName="FormikContext";var ef=Jg.Provider;Jg.Consumer;function tf(){var e=(0,s.useContext)(Jg);return e||Ig(!1),e}var nf=function(e){return Array.isArray(e)&&0===e.length},rf=function(e){return"function"===typeof e},sf=function(e){return null!==e&&"object"===typeof e},of=function(e){return String(Math.floor(Number(e)))===e},af=function(e){return"[object String]"===Object.prototype.toString.call(e)},lf=function(e){return 0===s.Children.count(e)},cf=function(e){return sf(e)&&rf(e.then)};function uf(e,t,n,i){void 0===i&&(i=0);for(var r=Kg(t);e&&i<r.length;)e=e[r[i++]];return i===r.length||e?void 0===e?n:e:n}function df(e,t,n){for(var i=Ng(e),r=i,s=0,o=Kg(t);s<o.length-1;s++){var a=o[s],l=uf(e,o.slice(0,s+1));if(l&&(sf(l)||Array.isArray(l)))r=r[a]=Ng(l);else{var c=o[s+1];r=r[a]=of(c)&&Number(c)>=0?[]:{}}}return(0===s?e:r)[o[s]]===n?e:(void 0===n?delete r[o[s]]:r[o[s]]=n,0===s&&void 0===n&&delete i[o[s]],i)}function hf(e,t,n,i){void 0===n&&(n=new WeakMap),void 0===i&&(i={});for(var r=0,s=Object.keys(e);r<s.length;r++){var o=s[r],a=e[o];sf(a)?n.get(a)||(n.set(a,!0),i[o]=Array.isArray(a)?[]:{},hf(a,t,n,i[o])):i[o]=t}return i}var pf={},gf={};function ff(e){var t=e.validateOnChange,n=void 0===t||t,i=e.validateOnBlur,r=void 0===i||i,o=e.validateOnMount,a=void 0!==o&&o,l=e.isInitialValid,c=e.enableReinitialize,u=void 0!==c&&c,d=e.onSubmit,h=Zg(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),p=Xg({validateOnChange:n,validateOnBlur:r,validateOnMount:a,onSubmit:d},h),g=(0,s.useRef)(p.initialValues),f=(0,s.useRef)(p.initialErrors||pf),m=(0,s.useRef)(p.initialTouched||gf),v=(0,s.useRef)(p.initialStatus),y=(0,s.useRef)(!1),C=(0,s.useRef)({});(0,s.useEffect)((function(){return y.current=!0,function(){y.current=!1}}),[]);var w=(0,s.useState)(0)[1],b=(0,s.useRef)({values:Dg(p.initialValues),errors:Dg(p.initialErrors)||pf,touched:Dg(p.initialTouched)||gf,status:Dg(p.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),S=b.current,E=(0,s.useCallback)((function(e){var t=b.current;b.current=function(e,t){switch(t.type){case"SET_VALUES":return Xg({},e,{values:t.payload});case"SET_TOUCHED":return Xg({},e,{touched:t.payload});case"SET_ERRORS":return Pg()(e.errors,t.payload)?e:Xg({},e,{errors:t.payload});case"SET_STATUS":return Xg({},e,{status:t.payload});case"SET_ISSUBMITTING":return Xg({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return Xg({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return Xg({},e,{values:df(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return Xg({},e,{touched:df(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return Xg({},e,{errors:df(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return Xg({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return Xg({},e,{touched:hf(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return Xg({},e,{isSubmitting:!1});default:return e}}(t,e),t!==b.current&&w((function(e){return e+1}))}),[]),x=(0,s.useCallback)((function(e,t){return new Promise((function(n,i){var r=p.validate(e,t);null==r?n(pf):cf(r)?r.then((function(e){n(e||pf)}),(function(e){i(e)})):n(r)}))}),[p.validate]),A=(0,s.useCallback)((function(e,t){var n=p.validationSchema,i=rf(n)?n(t):n,r=t&&i.validateAt?i.validateAt(t,e):function(e,t,n,i){void 0===n&&(n=!1);var r=vf(e);return t[n?"validateSync":"validate"](r,{abortEarly:!1,context:i||r})}(e,i);return new Promise((function(e,t){r.then((function(){e(pf)}),(function(n){"ValidationError"===n.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return df(t,e.path,e.message);var n=e.inner,i=Array.isArray(n),r=0;for(n=i?n:n[Symbol.iterator]();;){var s;if(i){if(r>=n.length)break;s=n[r++]}else{if((r=n.next()).done)break;s=r.value}var o=s;uf(t,o.path)||(t=df(t,o.path,o.message))}}return t}(n)):t(n)}))}))}),[p.validationSchema]),T=(0,s.useCallback)((function(e,t){return new Promise((function(n){return n(C.current[e].validate(t))}))}),[]),_=(0,s.useCallback)((function(e){var t=Object.keys(C.current).filter((function(e){return rf(C.current[e].validate)})),n=t.length>0?t.map((function(t){return T(t,uf(e,t))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(e){return e.reduce((function(e,n,i){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(e=df(e,t[i],n)),e}),{})}))}),[T]),R=(0,s.useCallback)((function(e){return Promise.all([_(e),p.validationSchema?A(e):{},p.validate?x(e):{}]).then((function(e){var t=e[0],n=e[1],i=e[2];return od.all([t,n,i],{arrayMerge:yf})}))}),[p.validate,p.validationSchema,_,x,A]),D=wf((function(e){return void 0===e&&(e=S.values),E({type:"SET_ISVALIDATING",payload:!0}),R(e).then((function(e){return y.current&&(E({type:"SET_ISVALIDATING",payload:!1}),E({type:"SET_ERRORS",payload:e})),e}))}));(0,s.useEffect)((function(){a&&!0===y.current&&Pg()(g.current,p.initialValues)&&D(g.current)}),[a,D]);var M=(0,s.useCallback)((function(e){var t=e&&e.values?e.values:g.current,n=e&&e.errors?e.errors:f.current?f.current:p.initialErrors||{},i=e&&e.touched?e.touched:m.current?m.current:p.initialTouched||{},r=e&&e.status?e.status:v.current?v.current:p.initialStatus;g.current=t,f.current=n,m.current=i,v.current=r;var s=function(){E({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:n,touched:i,status:r,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"===typeof e.submitCount?e.submitCount:0}})};if(p.onReset){var o=p.onReset(S.values,X);cf(o)?o.then(s):s()}else s()}),[p.initialErrors,p.initialStatus,p.initialTouched,p.onReset]);(0,s.useEffect)((function(){!0!==y.current||Pg()(g.current,p.initialValues)||u&&(g.current=p.initialValues,M(),a&&D(g.current))}),[u,p.initialValues,M,a,D]),(0,s.useEffect)((function(){u&&!0===y.current&&!Pg()(f.current,p.initialErrors)&&(f.current=p.initialErrors||pf,E({type:"SET_ERRORS",payload:p.initialErrors||pf}))}),[u,p.initialErrors]),(0,s.useEffect)((function(){u&&!0===y.current&&!Pg()(m.current,p.initialTouched)&&(m.current=p.initialTouched||gf,E({type:"SET_TOUCHED",payload:p.initialTouched||gf}))}),[u,p.initialTouched]),(0,s.useEffect)((function(){u&&!0===y.current&&!Pg()(v.current,p.initialStatus)&&(v.current=p.initialStatus,E({type:"SET_STATUS",payload:p.initialStatus}))}),[u,p.initialStatus,p.initialTouched]);var P=wf((function(e){if(C.current[e]&&rf(C.current[e].validate)){var t=uf(S.values,e),n=C.current[e].validate(t);return cf(n)?(E({type:"SET_ISVALIDATING",payload:!0}),n.then((function(e){return e})).then((function(t){E({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),E({type:"SET_ISVALIDATING",payload:!1})}))):(E({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),Promise.resolve(n))}return p.validationSchema?(E({type:"SET_ISVALIDATING",payload:!0}),A(S.values,e).then((function(e){return e})).then((function(t){E({type:"SET_FIELD_ERROR",payload:{field:e,value:uf(t,e)}}),E({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),I=(0,s.useCallback)((function(e,t){var n=t.validate;C.current[e]={validate:n}}),[]),N=(0,s.useCallback)((function(e){delete C.current[e]}),[]),k=wf((function(e,t){return E({type:"SET_TOUCHED",payload:e}),(void 0===t?r:t)?D(S.values):Promise.resolve()})),O=(0,s.useCallback)((function(e){E({type:"SET_ERRORS",payload:e})}),[]),L=wf((function(e,t){var i=rf(e)?e(S.values):e;return E({type:"SET_VALUES",payload:i}),(void 0===t?n:t)?D(i):Promise.resolve()})),F=(0,s.useCallback)((function(e,t){E({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})}),[]),B=wf((function(e,t,i){return E({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===i?n:i)?D(df(S.values,e,t)):Promise.resolve()})),V=(0,s.useCallback)((function(e,t){var n,i=t,r=e;if(!af(e)){e.persist&&e.persist();var s=e.target?e.target:e.currentTarget,o=s.type,a=s.name,l=s.id,c=s.value,u=s.checked,d=(s.outerHTML,s.options),h=s.multiple;i=t||(a||l),r=/number|range/.test(o)?(n=parseFloat(c),isNaN(n)?"":n):/checkbox/.test(o)?function(e,t,n){if("boolean"===typeof e)return Boolean(t);var i=[],r=!1,s=-1;if(Array.isArray(e))i=e,r=(s=e.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(t);if(t&&n&&!r)return i.concat(n);if(!r)return i;return i.slice(0,s).concat(i.slice(s+1))}(uf(S.values,i),u,c):d&&h?function(e){return Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}))}(d):c}i&&B(i,r)}),[B,S.values]),G=wf((function(e){if(af(e))return function(t){return V(t,e)};V(e)})),H=wf((function(e,t,n){return void 0===t&&(t=!0),E({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===n?r:n)?D(S.values):Promise.resolve()})),W=(0,s.useCallback)((function(e,t){e.persist&&e.persist();var n=e.target,i=n.name,r=n.id,s=(n.outerHTML,t||(i||r));H(s,!0)}),[H]),j=wf((function(e){if(af(e))return function(t){return W(t,e)};W(e)})),U=(0,s.useCallback)((function(e){rf(e)?E({type:"SET_FORMIK_STATE",payload:e}):E({type:"SET_FORMIK_STATE",payload:function(){return e}})}),[]),z=(0,s.useCallback)((function(e){E({type:"SET_STATUS",payload:e})}),[]),Y=(0,s.useCallback)((function(e){E({type:"SET_ISSUBMITTING",payload:e})}),[]),q=wf((function(){return E({type:"SUBMIT_ATTEMPT"}),D().then((function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var n;try{if(void 0===(n=Q()))return}catch(i){throw i}return Promise.resolve(n).then((function(e){return y.current&&E({type:"SUBMIT_SUCCESS"}),e})).catch((function(e){if(y.current)throw E({type:"SUBMIT_FAILURE"}),e}))}if(y.current&&(E({type:"SUBMIT_FAILURE"}),t))throw e}))})),K=wf((function(e){e&&e.preventDefault&&rf(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&rf(e.stopPropagation)&&e.stopPropagation(),q().catch((function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)}))})),X={resetForm:M,validateForm:D,validateField:P,setErrors:O,setFieldError:F,setFieldTouched:H,setFieldValue:B,setStatus:z,setSubmitting:Y,setTouched:k,setValues:L,setFormikState:U,submitForm:q},Q=wf((function(){return d(S.values,X)})),Z=wf((function(e){e&&e.preventDefault&&rf(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&rf(e.stopPropagation)&&e.stopPropagation(),M()})),$=(0,s.useCallback)((function(e){return{value:uf(S.values,e),error:uf(S.errors,e),touched:!!uf(S.touched,e),initialValue:uf(g.current,e),initialTouched:!!uf(m.current,e),initialError:uf(f.current,e)}}),[S.errors,S.touched,S.values]),J=(0,s.useCallback)((function(e){return{setValue:function(t,n){return B(e,t,n)},setTouched:function(t,n){return H(e,t,n)},setError:function(t){return F(e,t)}}}),[B,H,F]),ee=(0,s.useCallback)((function(e){var t=sf(e),n=t?e.name:e,i=uf(S.values,n),r={name:n,value:i,onChange:G,onBlur:j};if(t){var s=e.type,o=e.value,a=e.as,l=e.multiple;"checkbox"===s?void 0===o?r.checked=!!i:(r.checked=!(!Array.isArray(i)||!~i.indexOf(o)),r.value=o):"radio"===s?(r.checked=i===o,r.value=o):"select"===a&&l&&(r.value=r.value||[],r.multiple=!0)}return r}),[j,G,S.values]),te=(0,s.useMemo)((function(){return!Pg()(g.current,S.values)}),[g.current,S.values]),ne=(0,s.useMemo)((function(){return"undefined"!==typeof l?te?S.errors&&0===Object.keys(S.errors).length:!1!==l&&rf(l)?l(p):l:S.errors&&0===Object.keys(S.errors).length}),[l,te,S.errors,p]);return Xg({},S,{initialValues:g.current,initialErrors:f.current,initialTouched:m.current,initialStatus:v.current,handleBlur:j,handleChange:G,handleReset:Z,handleSubmit:K,resetForm:M,setErrors:O,setFormikState:U,setFieldTouched:H,setFieldValue:B,setFieldError:F,setStatus:z,setSubmitting:Y,setTouched:k,setValues:L,submitForm:q,validateForm:D,validateField:P,isValid:ne,dirty:te,unregisterField:N,registerField:I,getFieldProps:ee,getFieldMeta:$,getFieldHelpers:J,validateOnBlur:r,validateOnChange:n,validateOnMount:a})}function mf(e){var t=ff(e),n=e.component,i=e.children,r=e.render,o=e.innerRef;return(0,s.useImperativeHandle)(o,(function(){return t})),(0,s.createElement)(ef,{value:t},n?(0,s.createElement)(n,t):r?r(t):i?rf(i)?i(t):lf(i)?null:s.Children.only(i):null)}function vf(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=String(n);!0===Array.isArray(e[i])?t[i]=e[i].map((function(e){return!0===Array.isArray(e)||Rd(e)?vf(e):""!==e?e:void 0})):Rd(e[i])?t[i]=vf(e[i]):t[i]=""!==e[i]?e[i]:void 0}return t}function yf(e,t,n){var i=e.slice();return t.forEach((function(t,r){if("undefined"===typeof i[r]){var s=!1!==n.clone&&n.isMergeableObject(t);i[r]=s?od(Array.isArray(t)?[]:{},t,n):t}else n.isMergeableObject(t)?i[r]=od(e[r],t,n):-1===e.indexOf(t)&&i.push(t)})),i}var Cf="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?s.useLayoutEffect:s.useEffect;function wf(e){var t=(0,s.useRef)(e);return Cf((function(){t.current=e})),(0,s.useCallback)((function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.current.apply(void 0,n)}),[])}function bf(e){var t=tf(),n=t.getFieldProps,i=t.getFieldMeta,r=t.getFieldHelpers,o=t.registerField,a=t.unregisterField,l=sf(e)?e:{name:e},c=l.name,u=l.validate;(0,s.useEffect)((function(){return c&&o(c,{validate:u}),function(){c&&a(c)}}),[o,a,c,u]),c||Ig(!1);var d=(0,s.useMemo)((function(){return r(c)}),[r,c]);return[n(l),i(c),d]}function Sf(e){var t=e.validate,n=e.name,i=e.render,r=e.children,o=e.as,a=e.component,l=e.className,c=Zg(e,["validate","name","render","children","as","component","className"]),u=Zg(tf(),["validate","validationSchema"]);var d=u.registerField,h=u.unregisterField;(0,s.useEffect)((function(){return d(n,{validate:t}),function(){h(n)}}),[d,h,n,t]);var p=u.getFieldProps(Xg({name:n},c)),g=u.getFieldMeta(n),f={field:p,form:u};if(i)return i(Xg({},f,{meta:g}));if(rf(r))return r(Xg({},f,{meta:g}));if(a){if("string"===typeof a){var m=c.innerRef,v=Zg(c,["innerRef"]);return(0,s.createElement)(a,Xg({ref:m},p,v,{className:l}),r)}return(0,s.createElement)(a,Xg({field:p,form:u},c,{className:l}),r)}var y=o||"input";if("string"===typeof y){var C=c.innerRef,w=Zg(c,["innerRef"]);return(0,s.createElement)(y,Xg({ref:C},p,w,{className:l}),r)}return(0,s.createElement)(y,Xg({},p,c,{className:l}),r)}var Ef=(0,s.forwardRef)((function(e,t){var n=e.action,i=Zg(e,["action"]),r=null!=n?n:"#",o=tf(),a=o.handleReset,l=o.handleSubmit;return(0,s.createElement)("form",Xg({onSubmit:l,ref:t,onReset:a,action:r},i))}));Ef.displayName="Form";var xf=function(e,t,n){var i=Af(e);return i.splice(t,0,n),i},Af=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map((function(e){return parseInt(e)})).reduce((function(e,t){return t>e?t:e}),0);return Array.from(Xg({},e,{length:t+1}))}return[]},Tf=function(e,t){var n="function"===typeof e?e:t;return function(e){if(Array.isArray(e)||sf(e)){var t=Af(e);return n(t)}return e}},_f=function(e){function t(t){var n;return(n=e.call(this,t)||this).updateArrayField=function(e,t,i){var r=n.props,s=r.name;(0,r.formik.setFormikState)((function(n){var r=Tf(i,e),o=Tf(t,e),a=df(n.values,s,e(uf(n.values,s))),l=i?r(uf(n.errors,s)):void 0,c=t?o(uf(n.touched,s)):void 0;return nf(l)&&(l=void 0),nf(c)&&(c=void 0),Xg({},n,{values:a,errors:i?df(n.errors,s,l):n.errors,touched:t?df(n.touched,s,c):n.touched})}))},n.push=function(e){return n.updateArrayField((function(t){return[].concat(Af(t),[Dg(e)])}),!1,!1)},n.handlePush=function(e){return function(){return n.push(e)}},n.swap=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var i=Af(e),r=i[t];return i[t]=i[n],i[n]=r,i}(n,e,t)}),!0,!0)},n.handleSwap=function(e,t){return function(){return n.swap(e,t)}},n.move=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var i=Af(e),r=i[t];return i.splice(t,1),i.splice(n,0,r),i}(n,e,t)}),!0,!0)},n.handleMove=function(e,t){return function(){return n.move(e,t)}},n.insert=function(e,t){return n.updateArrayField((function(n){return xf(n,e,t)}),(function(t){return xf(t,e,null)}),(function(t){return xf(t,e,null)}))},n.handleInsert=function(e,t){return function(){return n.insert(e,t)}},n.replace=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var i=Af(e);return i[t]=n,i}(n,e,t)}),!1,!1)},n.handleReplace=function(e,t){return function(){return n.replace(e,t)}},n.unshift=function(e){var t=-1;return n.updateArrayField((function(n){var i=n?[e].concat(n):[e];return t=i.length,i}),(function(e){return e?[null].concat(e):[null]}),(function(e){return e?[null].concat(e):[null]})),t},n.handleUnshift=function(e){return function(){return n.unshift(e)}},n.handleRemove=function(e){return function(){return n.remove(e)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind($g(n)),n.pop=n.pop.bind($g(n)),n}Qg(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!Pg()(uf(e.formik.values,e.name),uf(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},n.remove=function(e){var t;return this.updateArrayField((function(n){var i=n?Af(n):[];return t||(t=i[e]),rf(i.splice)&&i.splice(e,1),rf(i.every)&&i.every((function(e){return void 0===e}))?[]:i}),!0,!0),t},n.pop=function(){var e;return this.updateArrayField((function(t){var n=t.slice();return e||(e=n&&n.pop&&n.pop()),n}),!0,!0),e},n.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},t=this.props,n=t.component,i=t.render,r=t.children,o=t.name,a=Xg({},e,{form:Zg(t.formik,["validate","validationSchema"]),name:o});return n?(0,s.createElement)(n,a):i?i(a):r?"function"===typeof r?r(a):lf(r)?null:s.Children.only(r):null},t}(s.Component);_f.defaultProps={validateOnChange:!0};const Rf="px-4 pr-6 py-2 border rounded-md w-full focus:ring-2 focus:ring-blue-500 text-sm text-gray-900 disabled:bg-gray-100 disabled:cursor-not-allowed",Df="text-red-500 text-sm",Mf="text-sm font-medium text-gray-700";var Pf=function(e){return e.BUTTON="button",e.SUBMIT="submit",e.RESET="reset",e}(Pf||{}),If=n(1864);const Nf=e=>{let{label:t,name:n,className:i="w-1/2",disabled:r=!1,required:s=!1,handleChange:o}=e;const[a,l,c]=bf(n);return(0,If.jsxs)("div",{className:"p-1 ".concat(i),children:[(0,If.jsxs)("div",{className:"flex items-center space-x-2 border p-2 rounded",children:[(0,If.jsx)("input",{type:"checkbox",id:n,...a,className:"rounded ".concat(Rf),disabled:r,checked:Boolean(a.value),onChange:e=>{c.setValue(e.target.checked),o&&o(e)}}),(0,If.jsx)("div",{className:"flex-1",children:(0,If.jsxs)("label",{htmlFor:n,className:"text-gray-700 text-sm font-bold break-words w-full",children:[t,s&&(0,If.jsx)("span",{className:"text-red-500",children:"*"})]})})]}),l.touched&&l.error&&(0,If.jsx)("span",{className:Df,children:"string"===typeof l.error?l.error:JSON.stringify(l.error)})]})};var kf,Of=new Uint8Array(16);function Lf(){if(!kf&&!(kf="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kf(Of)}const Ff=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const Bf=function(e){return"string"===typeof e&&Ff.test(e)};for(var Vf=[],Gf=0;Gf<256;++Gf)Vf.push((Gf+256).toString(16).substr(1));const Hf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Vf[e[t+0]]+Vf[e[t+1]]+Vf[e[t+2]]+Vf[e[t+3]]+"-"+Vf[e[t+4]]+Vf[e[t+5]]+"-"+Vf[e[t+6]]+Vf[e[t+7]]+"-"+Vf[e[t+8]]+Vf[e[t+9]]+"-"+Vf[e[t+10]]+Vf[e[t+11]]+Vf[e[t+12]]+Vf[e[t+13]]+Vf[e[t+14]]+Vf[e[t+15]]).toLowerCase();if(!Bf(n))throw TypeError("Stringified UUID is invalid");return n};const Wf=function(e,t,n){var i=(e=e||{}).random||(e.rng||Lf)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return Hf(i)},jf=e=>{let{label:t,name:n,options:i,isLoading:r=!1,handleDatalistChange:o,onDatalistFinalSelection:a,onDeleteSelection:l,className:c="w-1/2",disabled:u=!1,required:d=!1}=e;const[h,p,g]=bf(n),f=Wf(),[m,v]=(0,s.useState)(h.value||""),y="".concat(Rf);(0,s.useEffect)((()=>{v(h.value||"")}),[h.value]);const C=i.find((e=>e.value===h.value));return(0,If.jsxs)("div",{className:"p-1 ".concat(c),children:[(0,If.jsxs)("label",{htmlFor:n,className:Mf,children:[t,d&&(0,If.jsx)("span",{className:"text-red-500",children:"*"}),":"]}),(0,If.jsx)("datalist",{id:"".concat(f,"-datalist"),children:i.map((e=>(0,If.jsx)("option",{value:e.name},e.value)))}),C?(0,If.jsxs)("div",{className:"flex items-center border rounded overflow-hidden relative",children:[(0,If.jsx)("input",{id:"".concat(n,"-V"),type:"text",value:C.name,className:y+" border-r-0 rounded-none",disabled:!0}),(0,If.jsx)("div",{className:"absolute right-0 h-full flex items-center p-2",children:(0,If.jsx)("button",{type:"button",onClick:()=>{g.setValue(""),v(""),a&&a(""),l&&l()},className:"text-red-500 hover:text-red-700 focus:outline-none",children:(0,If.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,If.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})})]}):(0,If.jsxs)("div",{className:"relative",children:[(0,If.jsx)("input",{type:"text",id:n,...h,value:m,list:"".concat(f,"-datalist"),className:y,disabled:u,required:d,onChange:e=>{const{value:t}=e.target;v(t);const n=i.filter((e=>e.name.toLowerCase().includes(t.toLowerCase())));1===n.length&&n[0].name===t?(g.setValue(n[0].value),a&&a(n[0].value)):g.setValue(""),o&&o(t)},onBlur:()=>{const e=i.filter((e=>e.name.toLowerCase().includes(m.toLowerCase())));1===e.length&&e[0].name===m?(g.setValue(e[0].value),a&&a(e[0].value)):g.setValue("")}}),r&&(0,If.jsx)("div",{className:"absolute right-0 h-full flex items-center p-2",children:(0,If.jsxs)("svg",{className:"animate-spin h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,If.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,If.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]}),p.touched&&p.error&&(0,If.jsx)("span",{className:Df,children:"string"===typeof p.error?p.error:JSON.stringify(p.error)})]})},Uf=e=>{let{label:t,name:n,options:i,className:r="w-1/2",disabled:s=!1,required:o=!1,handleChange:a}=e;const[l,c,u]=bf(n),d="".concat(Rf);return(0,If.jsxs)("div",{className:"mb-4 p-1 ".concat(r),children:[(0,If.jsxs)("label",{htmlFor:n,className:Mf,children:[t,o&&(0,If.jsx)("span",{className:"text-red-500",children:"*"}),":"]}),(0,If.jsxs)("select",{id:n,...l,className:d,disabled:s,required:o,onChange:e=>{u.setValue(e.target.value),a&&a(e)},children:[(0,If.jsxs)("option",{value:"",children:["Select ",t]}),i.map((e=>(0,If.jsx)("option",{value:e.value,children:e.name},e.value)))]}),c.touched&&c.error&&(0,If.jsx)("span",{className:Df,children:"string"===typeof c.error?c.error:JSON.stringify(c.error)})]})},zf=e=>{let{label:t,name:n,className:i="w-1/2",disabled:r=!1,required:s=!1,handleChange:o}=e;const[a,l,c]=bf(n),u="".concat(Rf);return(0,If.jsxs)("div",{className:"p-1 ".concat(i),children:[(0,If.jsxs)("label",{htmlFor:n,className:Mf,children:[t,s&&(0,If.jsx)("span",{className:"text-red-500",children:"*"}),":"]}),(0,If.jsx)("textarea",{id:n,...a,className:u,disabled:r,required:s,onChange:e=>{c.setValue(e.target.value),o&&o(e)}}),l.touched&&l.error&&(0,If.jsx)("span",{className:Df,children:"string"===typeof l.error?l.error:JSON.stringify(l.error)})]})},Yf=e=>{let{label:t,name:n,type:i,className:r="w-1/2",disabled:s=!1,required:o=!1,handleChange:a}=e;const[l,c,u]=bf(n),d="".concat(Rf);return(0,If.jsxs)("div",{className:"p-1 ".concat(r),children:[(0,If.jsxs)("label",{htmlFor:n,className:Mf,children:[t,o&&(0,If.jsx)("span",{className:"text-red-500",children:"*"}),":"]}),(0,If.jsxs)("div",{children:[(0,If.jsx)("input",{type:i,id:n,...l,className:d,disabled:s,required:o,onChange:e=>{let{value:t}=e.target;"number"===i&&"string"===typeof t?(""===t||/^[0-9]*\.?[0-9]*$/.test(t))&&u.setValue(t):u.setValue(t),a&&a(e)}}),c.touched&&c.error&&(0,If.jsx)("span",{className:Df,children:"string"===typeof c.error?c.error:JSON.stringify(c.error)})]})]})},qf=e=>{let{type:t,label:n,name:i,className:r,disabled:s,required:o,options:a,isLoading:l,handleChange:c,handleDatalistChange:u,onDatalistFinalSelection:d,onDeleteSelection:h}=e;switch(t){case"checkbox":return(0,If.jsx)(Nf,{label:n,name:i,className:r,disabled:s,required:o,handleChange:c});case"select":return(0,If.jsx)(Uf,{label:n,name:i,options:a||[],className:r,disabled:s,required:o,handleChange:c});case"textarea":return(0,If.jsx)(zf,{label:n,name:i,className:r,disabled:s,required:o,handleChange:c});case"datalist":return(0,If.jsx)(jf,{label:n,name:i,options:a||[],isLoading:l,className:r,disabled:s,required:o,handleDatalistChange:u,onDatalistFinalSelection:d,onDeleteSelection:h});default:return(0,If.jsx)(Yf,{label:n,name:i,type:t,className:r,disabled:s,required:o,handleChange:c})}},Kf=(0,s.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Xf=(0,s.createContext)({}),Qf=(0,s.createContext)(null),Zf="undefined"!==typeof document,$f=Zf?s.useLayoutEffect:s.useEffect,Jf=(0,s.createContext)({strict:!1}),em=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tm="data-"+em("framerAppearId"),nm=!1,im=!1;class rm{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const sm=["read","resolveKeyframes","update","preRender","render","postRender"];function om(e,t){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=sm.reduce(((e,t)=>(e[t]=function(e){let t=new rm,n=new rm,i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:function(e){const s=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r,a=s?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),a.add(e)&&s&&r&&(i=t.order.length),e},cancel:e=>{n.remove(e),o.delete(e)},process:l=>{if(r)s=!0;else{if(r=!0,[t,n]=[n,t],n.clear(),i=t.order.length,i)for(let n=0;n<i;n++){const i=t.order[n];o.has(i)&&(a.schedule(i),e()),i(l)}r=!1,s&&(s=!1,a.process(l))}}};return a}((()=>n=!0)),e)),{}),o=e=>{s[e].process(r)},a=()=>{const s=im?r.timestamp:performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(s-r.timestamp,40),1),r.timestamp=s,r.isProcessing=!0,sm.forEach(o),r.isProcessing=!1,n&&t&&(i=!1,e(a))},l=sm.reduce(((t,o)=>{const l=s[o];return t[o]=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,i=!0,r.isProcessing||e(a)),l.schedule(t,s,o)},t}),{});return{schedule:l,cancel:e=>sm.forEach((t=>s[t].cancel(e))),state:r,steps:s}}const{schedule:am,cancel:lm}=om(queueMicrotask,!1);function cm(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function um(e,t,n){return(0,s.useCallback)((i=>{i&&e.mount&&e.mount(i),t&&(i?t.mount(i):t.unmount()),n&&("function"===typeof n?n(i):cm(n)&&(n.current=i))}),[t])}function dm(e){return"string"===typeof e||Array.isArray(e)}function hm(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const pm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gm=["initial",...pm];function fm(e){return hm(e.animate)||gm.some((t=>dm(e[t])))}function mm(e){return Boolean(fm(e)||e.variants)}function vm(e){const{initial:t,animate:n}=function(e,t){if(fm(e)){const{initial:t,animate:n}=e;return{initial:!1===t||dm(t)?t:void 0,animate:dm(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,s.useContext)(Xf));return(0,s.useMemo)((()=>({initial:t,animate:n})),[ym(t),ym(n)])}function ym(e){return Array.isArray(e)?e.join(" "):e}const Cm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},wm={};for(const n in Cm)wm[n]={isEnabled:e=>Cm[n].some((t=>!!e[t]))};const bm=(0,s.createContext)({}),Sm=(0,s.createContext)({}),Em=Symbol.for("motionComponentSymbol");function xm(e){let{preloadedFeatures:t,createVisualElement:n,useRender:i,useVisualState:r,Component:o}=e;t&&function(e){for(const t in e)wm[t]={...wm[t],...e[t]}}(t);const a=(0,s.forwardRef)((function(e,a){let l;const c={...(0,s.useContext)(Kf),...e,layoutId:Am(e)},{isStatic:u}=c,d=vm(e),h=r(e,u);if(!u&&Zf){d.visualElement=function(e,t,n,i){const{visualElement:r}=(0,s.useContext)(Xf),o=(0,s.useContext)(Jf),a=(0,s.useContext)(Qf),l=(0,s.useContext)(Kf).reducedMotion,c=(0,s.useRef)();i=i||o.renderer,!c.current&&i&&(c.current=i(e,{visualState:t,parent:r,props:n,presenceContext:a,blockInitialAnimation:!!a&&!1===a.initial,reducedMotionConfig:l}));const u=c.current;(0,s.useInsertionEffect)((()=>{u&&u.update(n,a)}));const d=(0,s.useRef)(Boolean(n[tm]&&!window.HandoffComplete));return $f((()=>{u&&(am.render(u.render),d.current&&u.animationState&&u.animationState.animateChanges())})),(0,s.useEffect)((()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))})),u}(o,h,c,n);const e=(0,s.useContext)(Sm),i=(0,s.useContext)(Jf).strict;d.visualElement&&(l=d.visualElement.loadFeatures(c,i,t,e))}return(0,If.jsxs)(Xf.Provider,{value:d,children:[l&&d.visualElement?(0,If.jsx)(l,{visualElement:d.visualElement,...c}):null,i(o,e,um(h,d.visualElement,a),h,u,d.visualElement)]})}));return a[Em]=o,a}function Am(e){let{layoutId:t}=e;const n=(0,s.useContext)(bm).id;return n&&void 0!==t?n+"-"+t:t}function Tm(e){function t(t){return xm(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const _m=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rm(e){return"string"===typeof e&&!e.includes("-")&&!!(_m.indexOf(e)>-1||/[A-Z]/u.test(e))}const Dm={};const Mm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Pm=new Set(Mm);function Im(e,t){let{layout:n,layoutId:i}=t;return Pm.has(e)||e.startsWith("origin")||(n||void 0!==i)&&(!!Dm[e]||"opacity"===e)}const Nm=e=>Boolean(e&&e.getVelocity),km={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Om=Mm.length;const Lm=e=>t=>"string"===typeof t&&t.startsWith(e),Fm=Lm("--"),Bm=Lm("var(--"),Vm=e=>!!Bm(e)&&Gm.test(e.split("/*")[0].trim()),Gm=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Hm=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Wm=(e,t,n)=>n>t?t:n<e?e:n,jm={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Um={...jm,transform:e=>Wm(0,1,e)},zm={...jm,default:1},Ym=e=>Math.round(1e5*e)/1e5,qm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,Km=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,Xm=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function Qm(e){return"string"===typeof e}const Zm=e=>({test:t=>Qm(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),$m=Zm("deg"),Jm=Zm("%"),ev=Zm("px"),tv=Zm("vh"),nv=Zm("vw"),iv={...Jm,parse:e=>Jm.parse(e)/100,transform:e=>Jm.transform(100*e)},rv={...jm,transform:Math.round},sv={borderWidth:ev,borderTopWidth:ev,borderRightWidth:ev,borderBottomWidth:ev,borderLeftWidth:ev,borderRadius:ev,radius:ev,borderTopLeftRadius:ev,borderTopRightRadius:ev,borderBottomRightRadius:ev,borderBottomLeftRadius:ev,width:ev,maxWidth:ev,height:ev,maxHeight:ev,size:ev,top:ev,right:ev,bottom:ev,left:ev,padding:ev,paddingTop:ev,paddingRight:ev,paddingBottom:ev,paddingLeft:ev,margin:ev,marginTop:ev,marginRight:ev,marginBottom:ev,marginLeft:ev,rotate:$m,rotateX:$m,rotateY:$m,rotateZ:$m,scale:zm,scaleX:zm,scaleY:zm,scaleZ:zm,skew:$m,skewX:$m,skewY:$m,distance:ev,translateX:ev,translateY:ev,translateZ:ev,x:ev,y:ev,z:ev,perspective:ev,transformPerspective:ev,opacity:Um,originX:iv,originY:iv,originZ:ev,zIndex:rv,backgroundPositionX:ev,backgroundPositionY:ev,fillOpacity:Um,strokeOpacity:Um,numOctaves:rv};function ov(e,t,n,i){const{style:r,vars:s,transform:o,transformOrigin:a}=e;let l=!1,c=!1,u=!0;for(const d in t){const e=t[d];if(Fm(d)){s[d]=e;continue}const n=sv[d],i=Hm(e,n);if(Pm.has(d)){if(l=!0,o[d]=i,!u)continue;e!==(n.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,a[d]=i):r[d]=i}if(t.transform||(l||i?r.transform=function(e,t,n,i){let{enableHardwareAcceleration:r=!0,allowTransformNone:s=!0}=t,o="";for(let a=0;a<Om;a++){const t=Mm[a];if(void 0!==e[t]){const n=km[t]||t;o+="".concat(n,"(").concat(e[t],") ")}}return r&&!e.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(e,n?"":o):s&&n&&(o="none"),o}(e.transform,n,u,i):r.transform&&(r.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const av=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function lv(e,t,n){for(const i in t)Nm(t[i])||Im(i,n)||(e[i]=t[i])}function cv(e,t,n){const i={};return lv(i,e.style||{},e),Object.assign(i,function(e,t,n){let{transformTemplate:i}=e;return(0,s.useMemo)((()=>{const e=av();return ov(e,t,{enableHardwareAcceleration:!n},i),Object.assign({},e.vars,e.style)}),[t])}(e,t,n)),i}function uv(e,t,n){const i={},r=cv(e,t,n);return e.drag&&!1!==e.dragListener&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=r,i}const dv=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function hv(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||dv.has(e)}let pv=e=>!hv(e);try{(gv=require("@emotion/is-prop-valid").default)&&(pv=e=>e.startsWith("on")?!hv(e):gv(e))}catch(ore){}var gv;function fv(e,t,n){return"string"===typeof e?e:ev.transform(t+n*e)}const mv={offset:"stroke-dashoffset",array:"stroke-dasharray"},vv={offset:"strokeDashoffset",array:"strokeDasharray"};function yv(e,t,n,i,r){let{attrX:s,attrY:o,attrScale:a,originX:l,originY:c,pathLength:u,pathSpacing:d=1,pathOffset:h=0,...p}=t;if(ov(e,p,n,r),i)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:g,style:f,dimensions:m}=e;g.transform&&(m&&(f.transform=g.transform),delete g.transform),m&&(void 0!==l||void 0!==c||f.transform)&&(f.transformOrigin=function(e,t,n){const i=fv(t,e.x,e.width),r=fv(n,e.y,e.height);return"".concat(i," ").concat(r)}(m,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==s&&(g.x=s),void 0!==o&&(g.y=o),void 0!==a&&(g.scale=a),void 0!==u&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const s=r?mv:vv;e[s.offset]=ev.transform(-i);const o=ev.transform(t),a=ev.transform(n);e[s.array]="".concat(o," ").concat(a)}(g,u,d,h,!1)}const Cv=()=>({...av(),attrs:{}}),wv=e=>"string"===typeof e&&"svg"===e.toLowerCase();function bv(e,t,n,i){const r=(0,s.useMemo)((()=>{const n=Cv();return yv(n,t,{enableHardwareAcceleration:!1},wv(i),e.transformTemplate),{...n.attrs,style:{...n.style}}}),[t]);if(e.style){const t={};lv(t,e.style,e),r.style={...t,...r.style}}return r}function Sv(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,i,r,o)=>{let{latestValues:a}=r;const l=(Rm(t)?bv:uv)(n,a,o,t),c=function(e,t,n){const i={};for(const r in e)"values"===r&&"object"===typeof e.values||(pv(r)||!0===n&&hv(r)||!t&&!hv(r)||e.draggable&&r.startsWith("onDrag"))&&(i[r]=e[r]);return i}(n,"string"===typeof t,e),u=t!==s.Fragment?{...c,...l,ref:i}:{},{children:d}=n,h=(0,s.useMemo)((()=>Nm(d)?d.get():d),[d]);return(0,s.createElement)(t,{...u,children:h})}}function Ev(e,t,n,i){let{style:r,vars:s}=t;Object.assign(e.style,r,i&&i.getProjectionStyles(n));for(const o in s)e.style.setProperty(o,s[o])}const xv=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Av(e,t,n,i){Ev(e,t,void 0,i);for(const r in t.attrs)e.setAttribute(xv.has(r)?r:em(r),t.attrs[r])}function Tv(e,t,n){var i;const{style:r}=e,s={};for(const o in r)(Nm(r[o])||t.style&&Nm(t.style[o])||Im(o,e)||void 0!==(null===(i=null===n||void 0===n?void 0:n.getValue(o))||void 0===i?void 0:i.liveStyle))&&(s[o]=r[o]);return s}function _v(e,t,n){const i=Tv(e,t,n);for(const r in e)if(Nm(e[r])||Nm(t[r])){i[-1!==Mm.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return i}function Rv(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach(((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()})),t}function Dv(e,t,n,i){if("function"===typeof t){const[r,s]=Rv(i);t=t(void 0!==n?n:e.custom,r,s)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[r,s]=Rv(i);t=t(void 0!==n?n:e.custom,r,s)}return t}const Mv=e=>Array.isArray(e),Pv=e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue),Iv=e=>Mv(e)?e[e.length-1]||0:e;function Nv(e){const t=Nm(e)?e.get():e;return Pv(t)?t.toValue():t}const kv=e=>(t,n)=>{const i=(0,s.useContext)(Xf),r=(0,s.useContext)(Qf),o=()=>function(e,t,n,i){let{scrapeMotionValuesFromProps:r,createRenderState:s,onMount:o}=e;const a={latestValues:Ov(t,n,i,r),renderState:s()};return o&&(a.mount=e=>o(t,e,a)),a}(e,t,i,r);return n?o():function(e){const t=(0,s.useRef)(null);return null===t.current&&(t.current=e()),t.current}(o)};function Ov(e,t,n,i){const r={},s=i(e,{});for(const h in s)r[h]=Nv(s[h]);let{initial:o,animate:a}=e;const l=fm(e),c=mm(e);t&&c&&!l&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===a&&(a=t.animate));let u=!!n&&!1===n.initial;u=u||!1===o;const d=u?a:o;if(d&&"boolean"!==typeof d&&!hm(d)){(Array.isArray(d)?d:[d]).forEach((t=>{const n=Dv(e,t);if(!n)return;const{transitionEnd:i,transition:s,...o}=n;for(const e in o){let t=o[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(r[e]=t)}for(const e in i)r[e]=i[e]}))}return r}const Lv=e=>e,{schedule:Fv,cancel:Bv,state:Vv,steps:Gv}=om("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Lv,!0),Hv={useVisualState:kv({scrapeMotionValuesFromProps:_v,createRenderState:Cv,onMount:(e,t,n)=>{let{renderState:i,latestValues:r}=n;Fv.read((()=>{try{i.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(rre){i.dimensions={x:0,y:0,width:0,height:0}}})),Fv.render((()=>{yv(i,r,{enableHardwareAcceleration:!1},wv(t.tagName),e.transformTemplate),Av(t,i)}))}})},Wv={useVisualState:kv({scrapeMotionValuesFromProps:Tv,createRenderState:av})};function jv(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}const Uv=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function zv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e["".concat(t,"X")],y:e["".concat(t,"Y")]}}}const Yv=e=>t=>Uv(t)&&e(t,zv(t));function qv(e,t,n,i){return jv(e,t,Yv(n),i)}const Kv=(e,t)=>n=>t(e(n)),Xv=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Kv)};function Qv(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const Zv=Qv("dragHorizontal"),$v=Qv("dragVertical");function Jv(e){let t=!1;if("y"===e)t=$v();else if("x"===e)t=Zv();else{const e=Zv(),n=$v();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function ey(){const e=Jv(!0);return!e||(e(),!1)}class ty{constructor(e){this.isMounted=!1,this.node=e}update(){}}function ny(e,t){const n=t?"pointerenter":"pointerleave",i=t?"onHoverStart":"onHoverEnd";return qv(e.current,n,((n,r)=>{if("touch"===n.pointerType||ey())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t);const o=s[i];o&&Fv.postRender((()=>o(n,r)))}),{passive:!e.getProps()[i]})}const iy=(e,t)=>!!t&&(e===t||iy(e,t.parentElement));function ry(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,zv(n))}const sy=new WeakMap,oy=new WeakMap,ay=e=>{const t=sy.get(e.target);t&&t(e)},ly=e=>{e.forEach(ay)};function cy(e,t,n){const i=function(e){let{root:t,...n}=e;const i=t||document;oy.has(i)||oy.set(i,{});const r=oy.get(i),s=JSON.stringify(n);return r[s]||(r[s]=new IntersectionObserver(ly,{root:t,...n})),r[s]}(t);return sy.set(e,n),i.observe(e),()=>{sy.delete(e),i.unobserve(e)}}const uy={some:0,all:1};const dy={inView:{Feature:class extends ty{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:r}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof i?i:uy[i]};return cy(this.node.current,s,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:i}=this.node.getProps(),s=t?n:i;s&&s(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends ty{constructor(){super(...arguments),this.removeStartListeners=Lv,this.removeEndListeners=Lv,this.removeAccessibleListeners=Lv,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=qv(window,"pointerup",((e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:i,globalTapTarget:r}=this.node.getProps(),s=r||iy(this.node.current,e.target)?n:i;s&&Fv.update((()=>s(e,t)))}),{passive:!(n.onTap||n.onPointerUp)}),r=qv(window,"pointercancel",((e,t)=>this.cancelPress(e,t)),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Xv(i,r),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=jv(this.node.current,"keydown",(e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=jv(this.node.current,"keyup",(e=>{"Enter"===e.key&&this.checkPressEnd()&&ry("up",((e,t)=>{const{onTap:n}=this.node.getProps();n&&Fv.postRender((()=>n(e,t)))}))})),ry("down",((e,t)=>{this.startPress(e,t)}))})),t=jv(this.node.current,"blur",(()=>{this.isPressing&&ry("cancel",((e,t)=>this.cancelPress(e,t)))}));this.removeAccessibleListeners=Xv(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Fv.postRender((()=>n(e,t)))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ey()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Fv.postRender((()=>n(e,t)))}mount(){const e=this.node.getProps(),t=qv(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=jv(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Xv(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends ty{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(rre){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xv(jv(this.node.current,"focus",(()=>this.onFocus())),jv(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends ty{mount(){this.unmount=Xv(ny(this.node,!0),ny(this.node,!1))}unmount(){}}}};function hy(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function py(e,t,n){const i=e.getProps();return Dv(i,t,void 0!==n?n:i.custom,e)}const gy=e=>1e3*e,fy=e=>e/1e3,my={type:"spring",stiffness:500,damping:25,restSpeed:10},vy={type:"keyframes",duration:.8},yy={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Cy=(e,t)=>{let{keyframes:n}=t;return n.length>2?vy:Pm.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:my:yy};function wy(e,t){return e[t]||e.default||e}const by=!1,Sy=e=>null!==e;function Ey(e,t,n){let{repeat:i,repeatType:r="loop"}=t;const s=e.filter(Sy),o=i&&"loop"!==r&&i%2===1?0:s.length-1;return o&&void 0!==n?n:s[o]}let xy;function Ay(){xy=void 0}const Ty={now:()=>(void 0===xy&&Ty.set(Vv.isProcessing||im?Vv.timestamp:performance.now()),xy),set:e=>{xy=e,queueMicrotask(Ay)}},_y=e=>/^0[^.\s]+$/u.test(e);function Ry(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||_y(e))}let Dy=Lv,My=Lv;const Py=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Iy=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ny(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;My(n<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[i,r]=function(e){const t=Iy.exec(e);if(!t)return[,];const[,n,i,r]=t;return["--".concat(null!==n&&void 0!==n?n:i),r]}(e);if(!i)return;const s=window.getComputedStyle(t).getPropertyValue(i);if(s){const e=s.trim();return Py(e)?parseFloat(e):e}return Vm(r)?Ny(r,t,n+1):r}const ky=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Oy=e=>e===jm||e===ev,Ly=(e,t)=>parseFloat(e.split(", ")[t]),Fy=(e,t)=>(n,i)=>{let{transform:r}=i;if("none"===r||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return Ly(s[1],t);{const t=r.match(/^matrix\((.+)\)$/u);return t?Ly(t[1],e):0}},By=new Set(["x","y","z"]),Vy=Mm.filter((e=>!By.has(e)));const Gy={width:(e,t)=>{let{x:n}=e,{paddingLeft:i="0",paddingRight:r="0"}=t;return n.max-n.min-parseFloat(i)-parseFloat(r)},height:(e,t)=>{let{y:n}=e,{paddingTop:i="0",paddingBottom:r="0"}=t;return n.max-n.min-parseFloat(i)-parseFloat(r)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:i}=t;return parseFloat(i)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:i}=t;return parseFloat(i)+(n.max-n.min)},x:Fy(4,13),y:Fy(5,14)};Gy.translateX=Gy.x,Gy.translateY=Gy.y;const Hy=e=>t=>t.test(e),Wy=[jm,ev,Jm,$m,nv,tv,{test:e=>"auto"===e,parse:e=>e}],jy=e=>Wy.find(Hy(e)),Uy=new Set;let zy=!1,Yy=!1;function qy(){if(Yy){const e=Array.from(Uy).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),n=new Map;t.forEach((e=>{const t=function(e){const t=[];return Vy.forEach((n=>{const i=e.getValue(n);void 0!==i&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))})),t}(e);t.length&&(n.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=n.get(e);t&&t.forEach((t=>{let[n,i]=t;var r;null===(r=e.getValue(n))||void 0===r||r.set(i)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}Yy=!1,zy=!1,Uy.forEach((e=>e.complete())),Uy.clear()}function Ky(){Uy.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(Yy=!0)}))}class Xy{constructor(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=r,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Uy.add(this),zy||(zy=!0,Fv.read(Ky),Fv.resolveKeyframes(qy))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;for(let r=0;r<e.length;r++)if(null===e[r])if(0===r){const r=null===i||void 0===i?void 0:i.get(),s=e[e.length-1];if(void 0!==r)e[0]=r;else if(n&&t){const i=n.readValue(t,s);void 0!==i&&null!==i&&(e[0]=i)}void 0===e[0]&&(e[0]=s),i&&void 0===r&&i.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Uy.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Uy.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Qy=(e,t)=>n=>Boolean(Qm(n)&&Xm.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Zy=(e,t,n)=>i=>{if(!Qm(i))return i;const[r,s,o,a]=i.match(qm);return{[e]:parseFloat(r),[t]:parseFloat(s),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},$y={...jm,transform:e=>Math.round((e=>Wm(0,255,e))(e))},Jy={test:Qy("rgb","red"),parse:Zy("red","green","blue"),transform:e=>{let{red:t,green:n,blue:i,alpha:r=1}=e;return"rgba("+$y.transform(t)+", "+$y.transform(n)+", "+$y.transform(i)+", "+Ym(Um.transform(r))+")"}};const eC={test:Qy("#"),parse:function(e){let t="",n="",i="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}},transform:Jy.transform},tC={test:Qy("hsl","hue"),parse:Zy("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:i,alpha:r=1}=e;return"hsla("+Math.round(t)+", "+Jm.transform(Ym(n))+", "+Jm.transform(Ym(i))+", "+Ym(Um.transform(r))+")"}},nC={test:e=>Jy.test(e)||eC.test(e)||tC.test(e),parse:e=>Jy.test(e)?Jy.parse(e):tC.test(e)?tC.parse(e):eC.parse(e),transform:e=>Qm(e)?e:e.hasOwnProperty("red")?Jy.transform(e):tC.transform(e)};const iC="number",rC="color",sC="var",oC="var(",aC="${}",lC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function cC(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},r=[];let s=0;const o=t.replace(lC,(e=>(nC.test(e)?(i.color.push(s),r.push(rC),n.push(nC.parse(e))):e.startsWith(oC)?(i.var.push(s),r.push(sC),n.push(e)):(i.number.push(s),r.push(iC),n.push(parseFloat(e))),++s,aC))).split(aC);return{values:n,split:o,indexes:i,types:r}}function uC(e){return cC(e).values}function dC(e){const{split:t,types:n}=cC(e),i=t.length;return e=>{let r="";for(let s=0;s<i;s++)if(r+=t[s],void 0!==e[s]){const t=n[s];r+=t===iC?Ym(e[s]):t===rC?nC.transform(e[s]):e[s]}return r}}const hC=e=>"number"===typeof e?0:e;const pC={test:function(e){var t,n;return isNaN(e)&&Qm(e)&&((null===(t=e.match(qm))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Km))||void 0===n?void 0:n.length)||0)>0},parse:uC,createTransformer:dC,getAnimatableNone:function(e){const t=uC(e);return dC(e)(t.map(hC))}},gC=new Set(["brightness","contrast","saturate","opacity"]);function fC(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[i]=n.match(qm)||[];if(!i)return e;const r=n.replace(i,"");let s=gC.has(t)?1:0;return i!==n&&(s*=100),t+"("+s+r+")"}const mC=/\b([a-z-]*)\(.*?\)/gu,vC={...pC,getAnimatableNone:e=>{const t=e.match(mC);return t?t.map(fC).join(" "):e}},yC={...sv,color:nC,backgroundColor:nC,outlineColor:nC,fill:nC,stroke:nC,borderColor:nC,borderTopColor:nC,borderRightColor:nC,borderBottomColor:nC,borderLeftColor:nC,filter:vC,WebkitFilter:vC},CC=e=>yC[e];function wC(e,t){let n=CC(e);return n!==vC&&(n=pC),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const bC=new Set(["auto","none","0"]);class SC extends Xy{constructor(e,t,n,i){super(e,t,n,i,null===i||void 0===i?void 0:i.owner,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let n=e[a];if("string"===typeof n&&(n=n.trim(),Vm(n))){const i=Ny(n,t.current);void 0!==i&&(e[a]=i),a===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!ky.has(n)||2!==e.length)return;const[i,r]=e,s=jy(i),o=jy(r);if(s!==o)if(Oy(s)&&Oy(o))for(let a=0;a<e.length;a++){const t=e[a];"string"===typeof t&&(e[a]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)Ry(e[i])&&n.push(i);n.length&&function(e,t,n){let i,r=0;for(;r<e.length&&!i;){const t=e[r];"string"===typeof t&&!bC.has(t)&&cC(t).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=wC(n,i)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Gy[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];void 0!==i&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t.current)return;const r=t.getValue(n);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=Gy[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach((e=>{let[n,i]=e;t.getValue(n).set(i)})),this.resolveNoneKeyframes()}}function EC(e){let t;return()=>(void 0===t&&(t=e()),t)}const xC=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!pC.test(e)&&"0"!==e||e.startsWith("url(")));class AC{constructor(e){let{autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}=e;this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:t,delay:n,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}get resolved(){return this._resolved||this.hasAttemptedResolve||(Ky(),qy()),this._resolved}onKeyframesResolved(e,t){this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:r,delay:s,onComplete:o,onUpdate:a,isGenerator:l}=this.options;if(!l&&!function(e,t,n,i){const r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;const s=e[e.length-1],o=xC(r,t),a=xC(s,t);return Dy(o===a,"You are trying to animate ".concat(t,' from "').concat(r,'" to "').concat(s,'". ').concat(r," is not an animatable value - to enable this animation set ").concat(r," to a value animatable to ").concat(s," via the `style` property.")),!(!o||!a)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||"spring"===n&&i)}(e,n,i,r)){if(by||!s)return null===a||void 0===a||a(Ey(e,this.options,t)),null===o||void 0===o||o(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(e,t);!1!==c&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}updateFinishedPromise(){this.currentFinishedPromise=new Promise((e=>{this.resolveFinishedPromise=e}))}}function TC(e,t){return t?e*(1e3/t):0}const _C=5;function RC(e,t,n){const i=Math.max(t-_C,0);return TC(n-e(i),t-i)}const DC=.001,MC=.01,PC=10,IC=.05,NC=1;function kC(e){let t,n,{duration:i=800,bounce:r=.25,velocity:s=0,mass:o=1}=e;Dy(i<=gy(PC),"Spring duration must be 10 seconds or less");let a=1-r;a=Wm(IC,NC,a),i=Wm(MC,PC,fy(i)),a<1?(t=e=>{const t=e*a,n=t*i,r=t-s,o=LC(e,a),l=Math.exp(-n);return DC-r/o*l},n=e=>{const n=e*a*i,r=n*s+s,o=Math.pow(a,2)*Math.pow(e,2)*i,l=Math.exp(-n),c=LC(Math.pow(e,2),a);return(-t(e)+DC>0?-1:1)*((r-o)*l)/c}):(t=e=>Math.exp(-e*i)*((e-s)*i+1)-DC,n=e=>Math.exp(-e*i)*(i*i*(s-e)));const l=function(e,t,n){let i=n;for(let r=1;r<OC;r++)i-=e(i)/t(i);return i}(t,n,5/i);if(i=gy(i),isNaN(l))return{stiffness:100,damping:10,duration:i};{const e=Math.pow(l,2)*o;return{stiffness:e,damping:2*a*Math.sqrt(o*e),duration:i}}}const OC=12;function LC(e,t){return e*Math.sqrt(1-t*t)}const FC=["duration","bounce"],BC=["stiffness","damping","mass"];function VC(e,t){return t.some((t=>void 0!==e[t]))}function GC(e){let{keyframes:t,restDelta:n,restSpeed:i,...r}=e;const s=t[0],o=t[t.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!VC(e,BC)&&VC(e,FC)){const n=kC(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}({...r,velocity:-fy(r.velocity||0)}),g=h||0,f=c/(2*Math.sqrt(l*u)),m=o-s,v=fy(Math.sqrt(l/u)),y=Math.abs(m)<5;let C;if(i||(i=y?.01:2),n||(n=y?.005:.5),f<1){const e=LC(v,f);C=t=>{const n=Math.exp(-f*v*t);return o-n*((g+f*v*m)/e*Math.sin(e*t)+m*Math.cos(e*t))}}else if(1===f)C=e=>o-Math.exp(-v*e)*(m+(g+v*m)*e);else{const e=v*Math.sqrt(f*f-1);C=t=>{const n=Math.exp(-f*v*t),i=Math.min(e*t,300);return o-n*((g+f*v*m)*Math.sinh(i)+e*m*Math.cosh(i))/e}}return{calculatedDuration:p&&d||null,next:e=>{const t=C(e);if(p)a.done=e>=d;else{let r=g;0!==e&&(r=f<1?RC(C,e,t):0);const s=Math.abs(r)<=i,l=Math.abs(o-t)<=n;a.done=s&&l}return a.value=a.done?o:t,a}}}function HC(e){let{keyframes:t,velocity:n=0,power:i=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],p={done:!1,value:h},g=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let f=i*n;const m=h+f,v=void 0===a?m:a(m);v!==m&&(f=v-h);const y=e=>-f*Math.exp(-e/r),C=e=>v+y(e),w=e=>{const t=y(e),n=C(e);p.done=Math.abs(t)<=u,p.value=p.done?v:n};let b,S;const E=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(p.value)&&(b=e,S=GC({keyframes:[p.value,g(p.value)],velocity:RC(C,e,p.value),damping:s,stiffness:o,restDelta:u,restSpeed:d}))};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return S||void 0!==b||(t=!0,w(e),E(e)),void 0!==b&&e>=b?S.next(e-b):(!t&&w(e),p)}}}const WC=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,jC=1e-7,UC=12;function zC(e,t,n,i){if(e===t&&n===i)return Lv;const r=t=>function(e,t,n,i,r){let s,o,a=0;do{o=t+(n-t)/2,s=WC(o,i,r)-e,s>0?n=o:t=o}while(Math.abs(s)>jC&&++a<UC);return o}(t,0,1,e,n);return e=>0===e||1===e?e:WC(r(e),t,i)}const YC=zC(.42,0,1,1),qC=zC(0,0,.58,1),KC=zC(.42,0,.58,1),XC=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,QC=e=>t=>1-e(1-t),ZC=e=>1-Math.sin(Math.acos(e)),$C=QC(ZC),JC=XC(ZC),ew=zC(.33,1.53,.69,.99),tw=QC(ew),nw=XC(tw),iw={linear:Lv,easeIn:YC,easeInOut:KC,easeOut:qC,circIn:ZC,circInOut:JC,circOut:$C,backIn:tw,backInOut:nw,backOut:ew,anticipate:e=>(e*=2)<1?.5*tw(e):.5*(2-Math.pow(2,-10*(e-1)))},rw=e=>{if(Array.isArray(e)){My(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,i,r]=e;return zC(t,n,i,r)}return"string"===typeof e?(My(void 0!==iw[e],"Invalid easing type '".concat(e,"'")),iw[e]):e},sw=(e,t,n)=>{const i=t-e;return 0===i?1:(n-e)/i},ow=(e,t,n)=>e+(t-e)*n;function aw(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function lw(e,t){return n=>n>0?t:e}const cw=(e,t,n)=>{const i=e*e,r=n*(t*t-i)+i;return r<0?0:Math.sqrt(r)},uw=[eC,Jy,tC];function dw(e){const t=(e=>uw.find((t=>t.test(e))))(e);if(Dy(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead.")),!Boolean(t))return!1;let n=t.parse(e);return t===tC&&(n=function(e){let{hue:t,saturation:n,lightness:i,alpha:r}=e;t/=360,n/=100,i/=100;let s=0,o=0,a=0;if(n){const e=i<.5?i*(1+n):i+n-i*n,r=2*i-e;s=aw(r,e,t+1/3),o=aw(r,e,t),a=aw(r,e,t-1/3)}else s=o=a=i;return{red:Math.round(255*s),green:Math.round(255*o),blue:Math.round(255*a),alpha:r}}(n)),n}const hw=(e,t)=>{const n=dw(e),i=dw(t);if(!n||!i)return lw(e,t);const r={...n};return e=>(r.red=cw(n.red,i.red,e),r.green=cw(n.green,i.green,e),r.blue=cw(n.blue,i.blue,e),r.alpha=ow(n.alpha,i.alpha,e),Jy.transform(r))},pw=new Set(["none","hidden"]);function gw(e,t){return n=>ow(e,t,n)}function fw(e){return"number"===typeof e?gw:"string"===typeof e?Vm(e)?lw:nC.test(e)?hw:yw:Array.isArray(e)?mw:"object"===typeof e?nC.test(e)?hw:vw:lw}function mw(e,t){const n=[...e],i=n.length,r=e.map(((e,n)=>fw(e)(e,t[n])));return e=>{for(let t=0;t<i;t++)n[t]=r[t](e);return n}}function vw(e,t){const n={...e,...t},i={};for(const r in n)void 0!==e[r]&&void 0!==t[r]&&(i[r]=fw(e[r])(e[r],t[r]));return e=>{for(const t in i)n[t]=i[t](e);return n}}const yw=(e,t)=>{const n=pC.createTransformer(t),i=cC(e),r=cC(t);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?pw.has(e)&&!r.values.length||pw.has(t)&&!i.values.length?function(e,t){return pw.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Xv(mw(function(e,t){var n;const i=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const o=t.types[s],a=e.indexes[o][r[o]],l=null!==(n=e.values[a])&&void 0!==n?n:0;i[s]=l,r[o]++}return i}(i,r),r.values),n):(Dy(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),lw(e,t))};function Cw(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return ow(e,t,n);return fw(e)(e,t)}function ww(e,t){let{clamp:n=!0,ease:i,mixer:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;if(My(s===t.length,"Both input and output ranges must be the same length"),1===s)return()=>t[0];if(2===s&&e[0]===e[1])return()=>t[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const i=[],r=n||Cw,s=e.length-1;for(let o=0;o<s;o++){let n=r(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||Lv:t;n=Xv(e,n)}i.push(n)}return i}(t,i,r),a=o.length,l=t=>{let n=0;if(a>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const i=sw(e[n],e[n+1],t);return o[n](i)};return n?t=>l(Wm(e[0],e[s-1],t)):l}function bw(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const r=sw(0,t,i);e.push(ow(n,1,r))}}(t,e.length-1),t}function Sw(e,t){return e.map((()=>t||KC)).splice(0,e.length-1)}function Ew(e){let{duration:t=300,keyframes:n,times:i,ease:r="easeInOut"}=e;const s=(e=>Array.isArray(e)&&"number"!==typeof e[0])(r)?r.map(rw):rw(r),o={done:!1,value:n[0]},a=function(e,t){return e.map((e=>e*t))}(i&&i.length===n.length?i:bw(n),t),l=ww(a,n,{ease:Array.isArray(s)?s:Sw(n,s)});return{calculatedDuration:t,next:e=>(o.value=l(e),o.done=e>=t,o)}}const xw=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>Fv.update(t,!0),stop:()=>Bv(t),now:()=>Vv.isProcessing?Vv.timestamp:Ty.now()}},Aw={decay:HC,inertia:HC,tween:Ew,keyframes:Ew,spring:GC},Tw=e=>e/100;class _w extends AC{constructor(e){let{KeyframeResolver:t=Xy,...n}=e;super(n),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:i,motionValue:r,keyframes:s}=this.options,o=(e,t)=>this.onKeyframesResolved(e,t);i&&r&&r.owner?this.resolver=r.owner.resolveKeyframes(s,o,i,r):this.resolver=new t(s,o,i,r),this.resolver.scheduleResolve()}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:r,velocity:s=0}=this.options,o=Aw[t]||Ew;let a,l;o!==Ew&&"number"!==typeof e[0]&&(a=Xv(Tw,Cw(e[0],e[1])),e=[0,100]);const c=o({...this.options,keyframes:e});"mirror"===r&&(l=o({...this.options,keyframes:[...e].reverse(),velocity:-s})),null===c.calculatedDuration&&(c.calculatedDuration=function(e){let t=0,n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}(c));const{calculatedDuration:u}=c,d=u+i;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:a,calculatedDuration:u,resolvedDuration:d,totalDuration:d*(n+1)-i}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{resolved:n}=this;if(!n){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:i,generator:r,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:a,calculatedDuration:l,totalDuration:c,resolvedDuration:u}=n;if(null===this.startTime)return r.next(0);const{delay:d,repeat:h,repeatType:p,repeatDelay:g,onUpdate:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const m=this.currentTime-d*(this.speed>=0?1:-1),v=this.speed>=0?m<0:m>c;this.currentTime=Math.max(m,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let y=this.currentTime,C=r;if(h){const e=Math.min(this.currentTime,c)/u;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,h+1);Boolean(t%2)&&("reverse"===p?(n=1-n,g&&(n-=g/u)):"mirror"===p&&(C=s)),y=Wm(0,1,n)*u}const w=v?{done:!1,value:a[0]}:C.next(y);o&&(w.value=o(w.value));let{done:b}=w;v||null===l||(b=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const S=null===this.holdTime&&("finished"===this.state||"running"===this.state&&b);return S&&void 0!==i&&(w.value=Ey(a,this.options,i)),f&&f(w.value),S&&this.finish(),w}get duration(){const{resolved:e}=this;return e?fy(e.calculatedDuration):0}get time(){return fy(this.currentTime)}set time(e){e=gy(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=fy(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=xw,onPlay:t}=this.options;this.driver||(this.driver=e((e=>this.tick(e)))),t&&t();const n=this.driver.now();null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime&&"finished"!==this.state||(this.startTime=n),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Rw=e=>Array.isArray(e)&&"number"===typeof e[0];function Dw(e){return Boolean(!e||"string"===typeof e&&e in Pw||Rw(e)||Array.isArray(e)&&e.every(Dw))}const Mw=e=>{let[t,n,i,r]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(i,", ").concat(r,")")},Pw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Mw([0,.65,.55,1]),circOut:Mw([.55,0,1,.45]),backIn:Mw([.31,.01,.66,-.59]),backOut:Mw([.33,1.53,.69,.99])};function Iw(e){return Nw(e)||Pw.easeOut}function Nw(e){return e?Rw(e)?Mw(e):Array.isArray(e)?e.map(Iw):Pw[e]:void 0}const kw=EC((()=>Object.hasOwnProperty.call(Element.prototype,"animate"))),Ow=new Set(["opacity","clipPath","filter","transform"]);class Lw extends AC{constructor(e){super(e);const{name:t,motionValue:n,keyframes:i}=this.options;this.resolver=new SC(i,((e,t)=>this.onKeyframesResolved(e,t)),t,n),this.resolver.scheduleResolve()}initPlayback(e,t){var n;let{duration:i=300,times:r,ease:s,type:o,motionValue:a,name:l}=this.options;if(!(null===(n=a.owner)||void 0===n?void 0:n.current))return!1;if("spring"===(c=this.options).type||"backgroundColor"===c.name||!Dw(c.ease)){const{onComplete:t,onUpdate:n,motionValue:a,...l}=this.options,c=function(e,t){const n=new _w({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:e[0]};const r=[];let s=0;for(;!i.done&&s<2e4;)i=n.sample(s),r.push(i.value),s+=10;return{times:void 0,keyframes:r,duration:s-10,ease:"linear"}}(e,l);1===(e=c.keyframes).length&&(e[1]=e[0]),i=c.duration,r=c.times,s=c.ease,o="keyframes"}var c;const u=function(e,t,n){let{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const u=Nw(a);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:"reverse"===o?"alternate":"normal"})}(a.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return u.startTime=Ty.now(),this.pendingTimeline?(u.timeline=this.pendingTimeline,this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:n}=this.options;a.set(Ey(e,this.options,t)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:r,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return fy(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return fy(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=gy(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return Lv;const{animation:n}=t;n.timeline=e,n.onfinish=null}else this.pendingTimeline=e;return Lv}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:i,type:r,ease:s,times:o}=e;if("idle"!==t.playState&&"finished"!==t.playState){if(this.time){const{motionValue:e,onUpdate:t,onComplete:a,...l}=this.options,c=new _w({...l,keyframes:n,duration:i,type:r,ease:s,times:o,isGenerator:!0}),u=gy(this.time);e.setWithVelocity(c.sample(u-10).value,c.sample(u).value,10)}this.cancel()}}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:i,repeatType:r,damping:s,type:o}=e;return kw()&&n&&Ow.has(n)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!i&&"mirror"!==r&&0!==s&&"inertia"!==o}}const Fw=EC((()=>void 0!==window.ScrollTimeline));class Bw{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,t){return Promise.all(this.animations).then(e).catch(t)}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e){const t=this.animations.map((t=>{if(!Fw()||!t.attachTimeline)return t.pause(),function(e,t){let n;const i=()=>{const{currentTime:i}=t,r=(null===i?0:i.value)/100;n!==r&&e(r),n=r};return Fv.update(i,!0),()=>Bv(i)}((e=>{t.time=t.duration*e}),e);t.attachTimeline(e)}));return()=>{t.forEach(((e,t)=>{e&&e(),this.animations[t].stop()}))}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach((t=>t[e]()))}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const Vw=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return o=>{const a=wy(i,e)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c-=gy(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:r};(function(e){let{when:t,delay:n,delayChildren:i,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}=e;return!!Object.keys(d).length})(a)||(u={...u,...Cy(e,u)}),u.duration&&(u.duration=gy(u.duration)),u.repeatDelay&&(u.repeatDelay=gy(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(d=!0)),(by||nm)&&(d=!0,u.duration=0,u.delay=0),d&&!s&&void 0!==t.get()){const e=Ey(u.keyframes,a);if(void 0!==e)return Fv.update((()=>{u.onUpdate(e),u.onComplete()})),new Bw([])}return!s&&Lw.supports(u)?new Lw(u):new _w(u)}};function Gw(e){return Boolean(Nm(e)&&e.add)}function Hw(e,t){-1===e.indexOf(t)&&e.push(t)}function Ww(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class jw{constructor(){this.subscriptions=[]}add(e){return Hw(this.subscriptions,e),()=>Ww(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,n);else for(let r=0;r<i;r++){const i=this.subscriptions[r];i&&i(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Uw={current:void 0};class zw{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="11.2.10",this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=Ty.now();t.updatedAt!==i&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev&&t.events.change&&t.events.change.notify(t.current),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ty.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(e=>!isNaN(parseFloat(e)))(this.current))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new jw);const n=this.events[e].add(t);return"change"===e?()=>{n(),Fv.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Uw.current&&Uw.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Ty.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return TC(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yw(e,t){return new zw(e,t)}function qw(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Yw(n))}function Kw(e){return e.getProps()[tm]}function Xw(e,t){let{protectedKeys:n,needsAnimating:i}=e;const r=n.hasOwnProperty(t)&&!0!==i[t];return i[t]=!1,r}function Qw(e,t){let{delay:n=0,transitionOverride:i,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s;let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=t;const c=e.getValue("willChange");i&&(o=i);const u=[],d=r&&e.animationState&&e.animationState.getState()[r];for(const h in l){const t=e.getValue(h,null!==(s=e.latestValues[h])&&void 0!==s?s:null),i=l[h];if(void 0===i||d&&Xw(d,h))continue;const r={delay:n,elapsed:0,...wy(o||{},h)};let a=!1;if(window.HandoffAppearAnimations){const n=Kw(e);if(n){const e=window.HandoffAppearAnimations(n,h,t,Fv);null!==e&&(r.elapsed=e,a=!0)}}t.start(Vw(h,t,i,e.shouldReduceMotion&&Pm.has(h)?{type:!1}:r,e,a));const p=t.animation;p&&(Gw(c)&&(c.add(h),p.then((()=>c.remove(h)))),u.push(p))}return a&&Promise.all(u).then((()=>{Fv.update((()=>{a&&function(e,t){const n=py(e,t);let{transitionEnd:i={},transition:r={},...s}=n||{};s={...s,...i};for(const o in s)qw(e,o,Iv(s[o]))}(e,a)}))})),u}function Zw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;const r=py(e,t,"exit"===n.type?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(Qw(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:r=0,staggerChildren:o,staggerDirection:a}=s;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5?arguments[5]:void 0;const o=[],a=(e.variantChildren.size-1)*i,l=1===r?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i}:function(){return a-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i};return Array.from(e.variantChildren).sort($w).forEach(((e,i)=>{e.notify("AnimationStart",t),o.push(Zw(e,t,{...s,delay:n+l(i)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(o)}(e,t,r+i,o,a,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[e,t]="beforeChildren"===l?[o,a]:[a,o];return e().then((()=>t()))}return Promise.all([o(),a(n.delay)])}function $w(e,t){return e.sortNodePosition(t)}const Jw=[...pm].reverse(),eb=pm.length;function tb(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:i}=t;return function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map((t=>Zw(e,t,i)));n=Promise.all(r)}else if("string"===typeof t)n=Zw(e,t,i);else{const r="function"===typeof t?py(e,t,i.custom):t;n=Promise.all(Qw(e,r,i))}return n.then((()=>{Fv.postRender((()=>{e.notify("AnimationComplete",t)}))}))}(e,n,i)})))}function nb(e){let t=tb(e);const n={animate:rb(!0),whileInView:rb(),whileHover:rb(),whileTap:rb(),whileDrag:rb(),whileFocus:rb(),exit:rb()};let i=!0;const r=t=>(n,i)=>{var r;const s=py(e,i,"exit"===t?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);if(s){const{transition:e,transitionEnd:t,...i}=s;n={...n,...i,...t}}return n};function s(s){const o=e.getProps(),a=e.getVariantContext(!0)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<eb;t++){const h=Jw[t],p=n[h],g=void 0!==o[h]?o[h]:a[h],f=dm(g),m=h===s?p.isActive:null;!1===m&&(d=t);let v=g===a[h]&&g!==o[h]&&f;if(v&&i&&e.manuallyAnimateOnMount&&(v=!1),p.protectedKeys={...u},!p.isActive&&null===m||!g&&!p.prevProp||hm(g)||"boolean"===typeof g)continue;let y=ib(p.prevProp,g)||h===s&&p.isActive&&!v&&f||t>d&&f,C=!1;const w=Array.isArray(g)?g:[g];let b=w.reduce(r(h),{});!1===m&&(b={});const{prevResolvedValues:S={}}=p,E={...S,...b},x=t=>{y=!0,c.has(t)&&(C=!0,c.delete(t)),p.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in E){const t=b[e],n=S[e];if(u.hasOwnProperty(e))continue;let i=!1;i=Mv(t)&&Mv(n)?!hy(t,n):t!==n,i?void 0!==t&&null!==t?x(e):c.add(e):void 0!==t&&c.has(e)?x(e):p.protectedKeys[e]=!0}p.prevProp=g,p.prevResolvedValues=b,p.isActive&&(u={...u,...b}),i&&e.blockInitialAnimation&&(y=!1),!y||v&&!C||l.push(...w.map((e=>({animation:e,options:{type:h}}))))}if(c.size){const t={};c.forEach((n=>{const i=e.getBaseTarget(n),r=e.getValue(n);r&&(r.liveStyle=!0),t[n]=null!==i&&void 0!==i?i:null})),l.push({animation:t})}let h=Boolean(l.length);return!i||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(h=!1),i=!1,h?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,i){var r;if(n[t].isActive===i)return Promise.resolve();null===(r=e.variantChildren)||void 0===r||r.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,i)})),n[t].isActive=i;const o=s(t);for(const e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function ib(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!hy(t,e)}function rb(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let sb=0;const ob={animation:{Feature:class extends ty{constructor(e){super(e),e.animationState||(e.animationState=nb(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),hm(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends ty{constructor(){super(...arguments),this.id=sb++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then((()=>t(this.id)))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},ab=(e,t)=>Math.abs(e-t);class lb{constructor(e,t){let{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=db(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=ab(e.x,t.x),i=ab(e.y,t.y);return Math.sqrt(n**2+i**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:i}=e,{timestamp:r}=Vv;this.history.push({...i,timestamp:r});const{onStart:s,onMove:o}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=cb(t,this.transformPagePoint),Fv.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:i,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=db("pointercancel"===e.type?this.lastMoveEventInfo:cb(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),i&&i(e,s)},!Uv(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.contextWindow=i||window;const s=cb(zv(e),this.transformPagePoint),{point:o}=s,{timestamp:a}=Vv;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=t;l&&l(e,db(s,this.history)),this.removeListeners=Xv(qv(this.contextWindow,"pointermove",this.handlePointerMove),qv(this.contextWindow,"pointerup",this.handlePointerUp),qv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Bv(this.updatePoint)}}function cb(e,t){return t?{point:t(e.point)}:e}function ub(e,t){return{x:e.x-t.x,y:e.y-t.y}}function db(e,t){let{point:n}=e;return{point:n,delta:ub(n,pb(t)),offset:ub(n,hb(t)),velocity:gb(t,.1)}}function hb(e){return e[0]}function pb(e){return e[e.length-1]}function gb(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const r=pb(e);for(;n>=0&&(i=e[n],!(r.timestamp-i.timestamp>gy(t)));)n--;if(!i)return{x:0,y:0};const s=fy(r.timestamp-i.timestamp);if(0===s)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function fb(e){return e.max-e.min}function mb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function vb(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=i,e.originPoint=ow(t.min,t.max,e.origin),e.scale=fb(n)/fb(t),(mb(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ow(n.min,n.max,e.origin)-e.originPoint,(mb(e.translate)||isNaN(e.translate))&&(e.translate=0)}function yb(e,t,n,i){vb(e.x,t.x,n.x,i?i.originX:void 0),vb(e.y,t.y,n.y,i?i.originY:void 0)}function Cb(e,t,n){e.min=n.min+t.min,e.max=e.min+fb(t)}function wb(e,t,n){e.min=t.min-n.min,e.max=e.min+fb(t)}function bb(e,t,n){wb(e.x,t.x,n.x),wb(e.y,t.y,n.y)}function Sb(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Eb(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}const xb=.35;function Ab(e,t,n){return{min:Tb(e,t),max:Tb(e,n)}}function Tb(e,t){return"number"===typeof e?e:e[t]||0}const _b=()=>({x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}),Rb=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Db(e){return[e("x"),e("y")]}function Mb(e){let{top:t,left:n,right:i,bottom:r}=e;return{x:{min:n,max:i},y:{min:t,max:r}}}function Pb(e){return void 0===e||1===e}function Ib(e){let{scale:t,scaleX:n,scaleY:i}=e;return!Pb(t)||!Pb(n)||!Pb(i)}function Nb(e){return Ib(e)||kb(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function kb(e){return Ob(e.x)||Ob(e.y)}function Ob(e){return e&&"0%"!==e}function Lb(e,t,n){return n+t*(e-n)}function Fb(e,t,n,i,r){return void 0!==r&&(e=Lb(e,r,i)),Lb(e,n,i)+t}function Bb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e.min=Fb(e.min,t,n,i,r),e.max=Fb(e.max,t,n,i,r)}function Vb(e,t){let{x:n,y:i}=t;Bb(e.x,n.translate,n.scale,n.originPoint),Bb(e.y,i.translate,i.scale,i.originPoint)}function Gb(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Hb(e,t){e.min=e.min+t,e.max=e.max+t}function Wb(e,t,n){let[i,r,s]=n;const o=void 0!==t[s]?t[s]:.5,a=ow(e.min,e.max,o);Bb(e,t[i],t[r],a,t.scale)}const jb=["x","scaleX","originX"],Ub=["y","scaleY","originY"];function zb(e,t){Wb(e.x,t,jb),Wb(e.y,t,Ub)}function Yb(e,t){return Mb(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}const qb=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},Kb=new WeakMap;class Xb{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rb(),this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new lb(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(zv(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:i,onDragStart:r}=this.getProps();if(n&&!i&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Jv(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Db((e=>{let t=this.getAxisMotionValue(e).get()||0;if(Jm.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const i=n.layout.layoutBox[e];if(i){t=fb(i)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),r&&Fv.postRender((()=>r(e,t)));const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:i,onDirectionLock:r,onDrag:s}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:o}=t;if(i&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(o),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Db((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,contextWindow:qb(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:r}=this.getProps();r&&Fv.postRender((()=>r(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!Qb(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,t,n){let{min:i,max:r}=t;return void 0!==i&&e<i?e=n?ow(i,e,n.min):Math.max(e,i):void 0!==r&&e>r&&(e=n?ow(r,e,n.max):Math.min(e,r)),e}(s,this.constraints[e],this.elastic[e])),r.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,r=this.constraints;t&&cm(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!i)&&function(e,t){let{top:n,left:i,bottom:r,right:s}=t;return{x:Sb(e.x,i,s),y:Sb(e.y,n,r)}}(i.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xb;return!1===e?e=0:!0===e&&(e=xb),{x:Ab(e,"left","right"),y:Ab(e,"top","bottom")}}(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Db((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!cm(e))return!1;const n=e.current;My(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=function(e,t,n){const i=Yb(e,n),{scroll:r}=t;return r&&(Hb(i.x,r.offset.x),Hb(i.y,r.offset.y)),i}(n,i.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:Eb(e.x,t.x),y:Eb(e.y,t.y)}}(i.layout.layoutBox,r);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=Mb(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:r,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},l=Db((o=>{if(!Qb(o,t,this.currentDirection))return;let l=a&&a[o]||{};s&&(l={min:0,max:0});const c=i?200:1e6,u=i?40:1e7,d={type:"inertia",velocity:n?e[o]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...r,...l};return this.startAxisValueAnimation(o,d)}));return Promise.all(l).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(Vw(e,n,0,t,this.visualElement))}stopAnimation(){Db((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){Db((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Db((t=>{const{drag:n}=this.getProps();if(!Qb(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(t);if(i&&i.layout){const{min:n,max:s}=i.layout.layoutBox[t];r.set(e[t]-ow(n,s,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!cm(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Db((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();i[e]=function(e,t){let n=.5;const i=fb(e),r=fb(t);return r>i?n=sw(t.min,t.max-i,e.min):i>r&&(n=sw(e.min,e.max-r,t.min)),Wm(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Db((t=>{if(!Qb(t,e,null))return;const n=this.getAxisMotionValue(t),{min:r,max:s}=this.constraints[t];n.set(ow(r,s,i[t]))}))}addListeners(){if(!this.visualElement.current)return;Kb.set(this.visualElement,this);const e=qv(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();cm(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const r=jv(window,"resize",(()=>this.scalePositionWithinConstraints())),s=n.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Db((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{r(),e(),i(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:s=xb,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:r,dragElastic:s,dragMomentum:o}}}function Qb(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Zb=e=>(t,n)=>{e&&Fv.postRender((()=>e(t,n)))};const $b={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Jb(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const eS={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!ev.test(e))return e;e=parseFloat(e)}const n=Jb(e,t.target.x),i=Jb(e,t.target.y);return"".concat(n,"% ").concat(i,"%")}},tS={correct:(e,t)=>{let{treeScale:n,projectionDelta:i}=t;const r=e,s=pC.parse(e);if(s.length>5)return r;const o=pC.createTransformer(e),a="number"!==typeof s[0]?1:0,l=i.x.scale*n.x,c=i.y.scale*n.y;s[0+a]/=l,s[1+a]/=c;const u=ow(l,c,.5);return"number"===typeof s[2+a]&&(s[2+a]/=u),"number"===typeof s[3+a]&&(s[3+a]/=u),o(s)}};class nS extends s.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:r}=e;var s;s=rS,Object.assign(Dm,s),r&&(t.group&&t.group.add(r),n&&n.register&&i&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",(()=>{this.safeToRemove()})),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),$b.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:r}=this.props,s=n.projection;return s?(s.isPresent=r,i||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?s.promote():s.relegate()||Fv.postRender((()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),am.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function iS(e){const[t,n]=function(){const e=(0,s.useContext)(Qf);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,r=(0,s.useId)();return(0,s.useEffect)((()=>i(r)),[]),!t&&n?[!1,()=>n&&n(r)]:[!0]}(),i=(0,s.useContext)(bm);return(0,If.jsx)(nS,{...e,layoutGroup:i,switchLayoutGroup:(0,s.useContext)(Sm),isPresent:t,safeToRemove:n})}const rS={borderRadius:{...eS,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:eS,borderTopRightRadius:eS,borderBottomLeftRadius:eS,borderBottomRightRadius:eS,boxShadow:tS},sS=["TopLeft","TopRight","BottomLeft","BottomRight"],oS=sS.length,aS=e=>"string"===typeof e?parseFloat(e):e,lS=e=>"number"===typeof e||ev.test(e);function cS(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const uS=hS(0,.5,$C),dS=hS(.5,.95,Lv);function hS(e,t,n){return i=>i<e?0:i>t?1:n(sw(e,t,i))}function pS(e,t){e.min=t.min,e.max=t.max}function gS(e,t){pS(e.x,t.x),pS(e.y,t.y)}function fS(e,t,n,i,r){return e=Lb(e-=t,1/n,i),void 0!==r&&(e=Lb(e,1/r,i)),e}function mS(e,t,n,i,r){let[s,o,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Jm.test(t)&&(t=parseFloat(t),t=ow(o.min,o.max,t/100)-o.min);if("number"!==typeof t)return;let a=ow(s.min,s.max,i);e===s&&(a-=t),e.min=fS(e.min,t,n,a,r),e.max=fS(e.max,t,n,a,r)}(e,t[s],t[o],t[a],t.scale,i,r)}const vS=["x","scaleX","originX"],yS=["y","scaleY","originY"];function CS(e,t,n,i){mS(e.x,t,vS,n?n.x:void 0,i?i.x:void 0),mS(e.y,t,yS,n?n.y:void 0,i?i.y:void 0)}function wS(e){return 0===e.translate&&1===e.scale}function bS(e){return wS(e.x)&&wS(e.y)}function SS(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function ES(e){return fb(e.x)/fb(e.y)}class xS{constructor(){this.members=[]}add(e){Hw(this.members,e),e.scheduleRender()}remove(e){if(Ww(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let i=t;i>=0;i--){const e=this.members[i];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;!1===i&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function AS(e,t,n){let i="";const r=e.x.translate/t.x,s=e.y.translate/t.y,o=(null===n||void 0===n?void 0:n.z)||0;if((r||s||o)&&(i="translate3d(".concat(r,"px, ").concat(s,"px, ").concat(o,"px) ")),1===t.x&&1===t.y||(i+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{transformPerspective:e,rotate:t,rotateX:r,rotateY:s,skewX:o,skewY:a}=n;e&&(i="perspective(".concat(e,"px) ").concat(i)),t&&(i+="rotate(".concat(t,"deg) ")),r&&(i+="rotateX(".concat(r,"deg) ")),s&&(i+="rotateY(".concat(s,"deg) ")),o&&(i+="skewX(".concat(o,"deg) ")),a&&(i+="skewY(".concat(a,"deg) "))}const a=e.x.scale*t.x,l=e.y.scale*t.y;return 1===a&&1===l||(i+="scale(".concat(a,", ").concat(l,")")),i||"none"}const TS=(e,t)=>e.depth-t.depth;class _S{constructor(){this.children=[],this.isDirty=!1}add(e){Hw(this.children,e),this.isDirty=!0}remove(e){Ww(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(TS),this.isDirty=!1,this.children.forEach(e)}}const RS=["","X","Y","Z"],DS={visibility:"hidden"};let MS=0;const PS={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function IS(e,t,n,i){const{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),i&&(i[e]=0))}function NS(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return!1;const{visualElement:t}=e.options;return!!t&&(!!Kw(t)||!(!e.parent||e.parent.hasCheckedOptimisedAppear)&&NS(e.parent))}function kS(e){let{attachResizeListener:t,defaultParent:n,measureScroll:i,checkIsScrollRoot:r,resetTransform:s}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=MS++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{var e;this.projectionUpdateScheduled=!1,PS.totalNodes=PS.resolvedTargetDeltas=PS.recalculatedProjection=0,this.nodes.forEach(FS),this.nodes.forEach(US),this.nodes.forEach(zS),this.nodes.forEach(BS),e=PS,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new _S)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new jw),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t&&t.notify(...i)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var i;this.isSVG=(i=e)instanceof SVGElement&&"svg"!==i.tagName,this.instance=e;const{layoutId:r,layout:s,visualElement:o}=this.options;if(o&&!o.current&&o.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(s||r)&&(this.isLayoutDirty=!0),t){let n;const i=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=Ty.now(),i=r=>{let{timestamp:s}=r;const o=s-n;o>=t&&(Bv(i),e(o-t))};return Fv.read(i,!0),()=>Bv(i)}(i,250),$b.hasAnimatedSinceResize&&($b.hasAnimatedSinceResize=!1,this.nodes.forEach(jS))}))}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&o&&(r||s)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:i,layout:r}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||o.getDefaultTransition()||ZS,{onLayoutAnimationStart:a,onLayoutAnimationComplete:l}=o.getProps(),c=!this.targetLayout||!SS(this.targetLayout,r)||i,u=!n&&i;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e={...wy(s,"layout"),onPlay:a,onComplete:l};(o.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||jS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Bv(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(YS),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.HandoffCancelAllAnimations&&NS(this)&&window.HandoffCancelAllAnimations(),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(GS);this.isUpdating||this.nodes.forEach(HS),this.isUpdating=!1,this.nodes.forEach(WS),this.nodes.forEach(OS),this.nodes.forEach(LS),this.clearAllSnapshots();const e=Ty.now();Vv.delta=Wm(0,1e3/60,e-Vv.timestamp),Vv.timestamp=e,Vv.isProcessing=!0,Gv.update.process(Vv),Gv.preRender.process(Vv),Gv.render.process(Vv),Vv.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,am.read((()=>this.update())))}clearAllSnapshots(){this.nodes.forEach(VS),this.sharedNodes.forEach(qS)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fv.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fv.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Rb(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:r(this.instance),offset:i(this.instance)})}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!bS(this.projectionDelta),n=this.getTransformTemplate(),i=n?n(this.latestValues,""):void 0,r=i!==this.prevTransformTemplateValue;e&&(t||Nb(this.latestValues)||r)&&(s(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var i;return e&&(n=this.removeTransform(n)),eE((i=n).x),eE(i.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return Rb();const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(Hb(t.x,n.offset.x),Hb(t.y,n.offset.y)),t}removeElementScroll(e){const t=Rb();gS(t,e);for(let n=0;n<this.path.length;n++){const i=this.path[n],{scroll:r,options:s}=i;if(i!==this.root&&r&&s.layoutScroll){if(r.isRoot){gS(t,e);const{scroll:n}=this.root;n&&(Hb(t.x,-n.offset.x),Hb(t.y,-n.offset.y))}Hb(t.x,r.offset.x),Hb(t.y,r.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Rb();gS(n,e);for(let i=0;i<this.path.length;i++){const e=this.path[i];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&zb(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Nb(e.latestValues)&&zb(n,e.latestValues)}return Nb(this.latestValues)&&zb(n,this.latestValues),n}removeTransform(e){const t=Rb();gS(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Nb(e.latestValues))continue;Ib(e.latestValues)&&e.updateSnapshot();const i=Rb();gS(i,e.measurePageBox()),CS(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,i)}return Nb(this.latestValues)&&CS(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vv.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const i=Boolean(this.resumingFrom)||this!==n;if(!(e||i&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:r,layoutId:s}=this.options;if(this.layout&&(r||s)){if(this.resolvedRelativeTargetAt=Vv.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rb(),this.relativeTargetOrigin=Rb(),bb(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),gS(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var o,a,l;if(this.target||(this.target=Rb(),this.targetWithTransforms=Rb()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,l=this.relativeParent.target,Cb(o.x,a.x,l.x),Cb(o.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):gS(this.target,this.layout.layoutBox),Vb(this.target,this.targetDelta)):gS(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rb(),this.relativeTargetOrigin=Rb(),bb(this.relativeTargetOrigin,this.target,e.target),gS(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}PS.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Ib(this.parent.latestValues)&&!kb(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let i=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(i=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===Vv.timestamp&&(i=!1),i)return;const{layout:r,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!s)return;gS(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=n.length;if(!r)return;let s,o;t.x=t.y=1;for(let a=0;a<r;a++){s=n[a],o=s.projectionDelta;const r=s.instance;r&&r.style&&"contents"===r.style.display||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&zb(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Vb(e,o)),i&&Nb(s.latestValues)&&zb(e,s.latestValues))}t.x=Gb(t.x),t.y=Gb(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms=Rb());const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta=_b(),this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta=_b(),this.projectionDeltaWithTransform=_b());const c=this.projectionTransform;yb(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=AS(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===o&&this.treeScale.y===a||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),PS.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,i=n?n.latestValues:{},r={...this.latestValues},s=_b();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const o=Rb(),a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(QS));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;KS(s.x,e.x,n),KS(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bb(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,i){XS(e.x,t.x,n.x,i),XS(e.y,t.y,n.y,i)}(this.relativeTarget,this.relativeTargetOrigin,o,n),d&&function(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d=Rb()),gS(d,this.relativeTarget)),a&&(this.animationValues=r,function(e,t,n,i,r,s){r?(e.opacity=ow(0,void 0!==n.opacity?n.opacity:1,uS(i)),e.opacityExit=ow(void 0!==t.opacity?t.opacity:1,0,dS(i))):s&&(e.opacity=ow(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,i));for(let o=0;o<oS;o++){const r="border".concat(sS[o],"Radius");let s=cS(t,r),a=cS(n,r);void 0===s&&void 0===a||(s||(s=0),a||(a=0),0===s||0===a||lS(s)===lS(a)?(e[r]=Math.max(ow(aS(s),aS(a),i),0),(Jm.test(a)||Jm.test(s))&&(e[r]+="%")):e[r]=a)}(t.rotate||n.rotate)&&(e.rotate=ow(t.rotate||0,n.rotate||0,i))}(r,i,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Bv(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fv.update((()=>{$b.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const i=Nm(e)?e:Yw(e);return i.start(Vw("",i,t,n)),i.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:i,latestValues:r}=e;if(t&&n&&i){if(this!==e&&this.layout&&i&&tE(this.options.animationType,this.layout.layoutBox,i.layoutBox)){n=this.target||Rb();const t=fb(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const i=fb(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+i}gS(t,n),zb(t,r),yb(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new xS);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this.getStack();i&&i.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const i={};n.z&&IS("z",e,i,this.animationValues);for(let r=0;r<RS.length;r++)IS("rotate".concat(RS[r]),e,i,this.animationValues),IS("skew".concat(RS[r]),e,i,this.animationValues);e.render();for(const r in i)e.setStaticValue(r,i[r]),this.animationValues&&(this.animationValues[r]=i[r]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return DS;const i={visibility:""},r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=Nv(null===e||void 0===e?void 0:e.pointerEvents)||"",i.transform=r?r(this.latestValues,""):"none",i;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=Nv(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!Nb(this.latestValues)&&(t.transform=r?r({},""):"none",this.hasProjected=!1),t}const o=s.animationValues||s.latestValues;this.applyTransformsToTarget(),i.transform=AS(this.projectionDeltaWithTransform,this.treeScale,o),r&&(i.transform=r(o,i.transform));const{x:a,y:l}=this.projectionDelta;i.transformOrigin="".concat(100*a.origin,"% ").concat(100*l.origin,"% 0"),s.animationValues?i.opacity=s===this?null!==(n=null!==(t=o.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:i.opacity=s===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const c in Dm){if(void 0===o[c])continue;const{correct:e,applyTo:t}=Dm[c],n="none"===i.transform?o[c]:e(o[c],s);if(t){const e=t.length;for(let r=0;r<e;r++)i[t[r]]=n}else i[c]=n}return this.options.layoutId&&(i.pointerEvents=s===this?Nv(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(GS),this.root.sharedNodes.clear()}}}function OS(e){e.updateLayout()}function LS(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=e.layout,{animationType:r}=e.options,s=n.source!==e.layout.source;"size"===r?Db((e=>{const i=s?n.measuredBox[e]:n.layoutBox[e],r=fb(i);i.min=t[e].min,i.max=i.min+r})):tE(r,n.layoutBox,t)&&Db((i=>{const r=s?n.measuredBox[i]:n.layoutBox[i],o=fb(t[i]);r.max=r.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+o)}));const o=_b();yb(o,t,n.layoutBox);const a=_b();s?yb(a,e.applyTransform(i,!0),n.measuredBox):yb(a,t,n.layoutBox);const l=!bS(o);let c=!1;if(!e.resumeFrom){const i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){const{snapshot:r,layout:s}=i;if(r&&s){const o=Rb();bb(o,n.layoutBox,r.layoutBox);const a=Rb();bb(a,t,s.layoutBox),SS(o,a)||(c=!0),i.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function FS(e){PS.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function BS(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function VS(e){e.clearSnapshot()}function GS(e){e.clearMeasurements()}function HS(e){e.isLayoutDirty=!1}function WS(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function jS(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function US(e){e.resolveTargetDelta()}function zS(e){e.calcProjection()}function YS(e){e.resetSkewAndRotation()}function qS(e){e.removeLeadSnapshot()}function KS(e,t,n){e.translate=ow(t.translate,0,n),e.scale=ow(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function XS(e,t,n,i){e.min=ow(t.min,n.min,i),e.max=ow(t.max,n.max,i)}function QS(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const ZS={duration:.45,ease:[.4,0,.1,1]},$S=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),JS=$S("applewebkit/")&&!$S("chrome/")?Math.round:Lv;function eE(e){e.min=JS(e.min),e.max=JS(e.max)}function tE(e,t,n){return"position"===e||"preserve-aspect"===e&&!mb(ES(t),ES(n),.2)}const nE=kS({attachResizeListener:(e,t)=>jv(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),iE={current:void 0},rE=kS({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!iE.current){const e=new nE({});e.mount(window),e.setOptions({layoutScroll:!0}),iE.current=e}return iE.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),sE={pan:{Feature:class extends ty{constructor(){super(...arguments),this.removePointerDownListener=Lv}onPointerDown(e){this.session=new lb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qb(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Zb(e),onStart:Zb(t),onMove:n,onEnd:(e,t)=>{delete this.session,i&&Fv.postRender((()=>i(e,t)))}}}mount(){this.removePointerDownListener=qv(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends ty{constructor(e){super(e),this.removeGroupControls=Lv,this.removeListeners=Lv,this.controls=new Xb(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Lv}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:rE,MeasureLayout:iS}},oE={current:null},aE={current:!1};const lE=new WeakMap,cE=[...Wy,nC,pC],uE=Object.keys(wm),dE=uE.length,hE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],pE=gm.length;function gE(e){if(e)return!1!==e.options.allowProjection?e.projection:gE(e.parent)}class fE{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.resolveKeyframes=(e,t,n,i)=>new this.KeyframeResolver(e,t,n,i,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Fv.render(this.render,!1,!0);const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=fm(n),this.isVariantNode=mm(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const e=d[h];void 0!==l[h]&&Nm(e)&&(e.set(l[h],!1),Gw(u)&&u.add(h))}}mount(e){this.current=e,lE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),aE.current||function(){if(aE.current=!0,Zf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>oE.current=e.matches;e.addListener(t),t()}else oE.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||oE.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){var e;lE.delete(this.current),this.projection&&this.projection.unmount(),Bv(this.notifyUpdate),Bv(this.render),this.valueSubscriptions.forEach((e=>e())),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)null===(e=this.features[t])||void 0===e||e.unmount();this.current=null}bindToMotionValue(e,t){const n=Pm.has(e),i=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&Fv.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),r=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(()=>{i(),r(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,n,i){let r,s,{children:o,...a}=e;for(let l=0;l<dE;l++){const e=uE[l],{isEnabled:t,Feature:n,ProjectionNode:i,MeasureLayout:o}=wm[e];i&&(r=i),t(a)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),o&&(s=o))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&r){const{layoutId:e,layout:t,drag:n,dragConstraints:s,layoutScroll:o,layoutRoot:l}=a;this.projection=new r(this.latestValues,a["data-framer-portal-id"]?void 0:gE(this.parent)),this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(n)||s&&cm(s),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:i,layoutScroll:o,layoutRoot:l})}return s}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rb()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<hE.length;n++){const t=hE[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const i=e["on"+t];i&&(this.propEventSubscriptions[t]=this.on(t,i))}this.prevMotionValues=function(e,t,n){const{willChange:i}=t;for(const r in t){const s=t[r],o=n[r];if(Nm(s))e.addValue(r,s),Gw(i)&&i.add(r);else if(Nm(o))e.addValue(r,Yw(s,{owner:e})),Gw(i)&&i.remove(r);else if(o!==s)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{const t=e.getStaticValue(r);e.addValue(r,Yw(void 0!==t?t:s,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<pE;t++){const n=gm[t],i=this.props[n];(dm(i)||!1===i)&&(e[n]=i)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Yw(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let i=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==i&&null!==i&&("string"===typeof i&&(Py(i)||_y(i))?i=parseFloat(i):!(e=>cE.find(Hy(e)))(i)&&pC.test(t)&&(i=wC(e,t)),this.setBaseTarget(e,Nm(i)?i.get():i)),Nm(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let i;if("string"===typeof n||"object"===typeof n){const r=Dv(this.props,n,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);r&&(i=r[e])}if(n&&void 0!==i)return i;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||Nm(r)?void 0!==this.initialValues[e]&&void 0===i?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new jw),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.events[e].notify(...n)}}}class mE extends fE{constructor(){super(...arguments),this.KeyframeResolver=SC}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:i}=t;delete n[e],delete i[e]}}class vE extends mE{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(Pm.has(t)){const e=CC(t);return e&&e.default||0}{const i=(n=e,window.getComputedStyle(n)),r=(Fm(t)?i.getPropertyValue(t):i[t])||0;return"string"===typeof r?r.trim():r}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return Yb(e,n)}build(e,t,n,i){ov(e,t,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Tv(e,t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Nm(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent="".concat(e))})))}renderInstance(e,t,n,i){Ev(e,t,n,i)}}class yE extends mE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Pm.has(t)){const e=CC(t);return e&&e.default||0}return t=xv.has(t)?t:em(t),e.getAttribute(t)}measureInstanceViewportBox(){return Rb()}scrapeMotionValuesFromProps(e,t,n){return _v(e,t,n)}build(e,t,n,i){yv(e,t,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,n,i){Av(e,t,0,i)}mount(e){this.isSVGTag=wv(e.tagName),super.mount(e)}}const CE=(e,t)=>Rm(e)?new yE(t,{enableHardwareAcceleration:!1}):new vE(t,{allowProjection:e!==s.Fragment,enableHardwareAcceleration:!0}),wE={...ob,...dy,...sE,...{layout:{ProjectionNode:rE,MeasureLayout:iS}}},bE=Tm(((e,t)=>function(e,t,n,i){let{forwardMotionProps:r=!1}=t;return{...Rm(e)?Hv:Wv,preloadedFeatures:n,useRender:Sv(r),createVisualElement:i,Component:e}}(e,t,wE,CE)));var SE=function(e){return e.BUTTON="button",e.SUBMIT="submit",e.RESET="reset",e}(SE||{});const EE=e=>{let{onClick:t,disabled:n,className:i,type:r=SE.BUTTON,colorClassName:s="bg-primary text-white",hoverClassName:o="hover:bg-primary/80",focusClassName:a="focus:ring-secondary",children:l,loading:c=!1,loadingText:u="Loading..."}=e;return(0,If.jsx)(bE.button,{whileTap:{scale:.95},type:r,onClick:t,disabled:n||c,className:"font-bold py-2 px-4 rounded ".concat(s," ").concat(o," ").concat(a," ").concat(i),children:c?u:l})},xE=e=>{let{title:t,handleSubmit:n,buttonText:i,children:r,darkMode:s=!1,className:o="flex w-full flex-wrap",validationSchema:a,initialValues:l,debug:c=!1,loadingText:u="Submitting..."}=e;const d=s?"text-2xl font-bold mb-4 ml-2 w-full text-white":"text-2xl font-bold mb-4 ml-2 w-full";return(0,If.jsx)("div",{className:"w-full",children:(0,If.jsx)(mf,{initialValues:l,onSubmit:n,validationSchema:a,validateOnMount:!1,validateOnChange:!1,children:e=>{const{errors:n,isSubmitting:s}=e;return(0,If.jsxs)(Ef,{className:o,children:[(0,If.jsx)("h1",{className:d,children:t}),r(e),Object.keys(n).length>0&&c&&(0,If.jsx)("div",{className:"text-red-500",children:JSON.stringify(n,null,2)}),(0,If.jsx)("div",{className:"w-full ml-2",children:(0,If.jsx)(EE,{type:Pf.SUBMIT,className:"text-white font-bold py-2 px-4 rounded mt-4",colorClassName:Object.keys(n).length>0?"bg-red-500":"bg-green-500",hoverClassName:Object.keys(n).length>0?"hover:bg-red-700":"hover:bg-green-700",loading:s,loadingText:u,children:i})})]})}})})},AE={email:"system@example.com",password:"SystemPassword"},TE=bn({email:ln().email("Invalid email address").required("Email is required"),password:ln().required("Password is required")}),_E=()=>{const e=ne();return(0,If.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,If.jsx)("div",{className:"max-w-md w-full bg-white p-8 rounded-lg shadow-md border border-gray-300",children:(0,If.jsx)(xE,{initialValues:AE,validationSchema:TE,handleSubmit:async(t,n)=>{let{setSubmitting:i}=n;try{await ed.login(t.email,t.password),e("/dashboard")}catch(r){const e=r.message||"Login failed. Please check your credentials.";ot.error(e)}finally{i(!1)}},title:"Sign in to your account",buttonText:"Sign in",loadingText:"Signing In",children:e=>(0,If.jsxs)("div",{className:"space-y-6 w-full",children:[(0,If.jsx)(qf,{type:"email",label:"Email address",name:"email",required:!0,className:"w-full"}),(0,If.jsx)(qf,{type:"password",label:"Password",name:"password",required:!0,className:"w-full"})]})})})})};var RE=n(4202),DE=s,ME=Symbol.for("react-redux-context"),PE="undefined"!==typeof globalThis?globalThis:{};function IE(){var e;if(!DE.createContext)return{};const t=null!==(e=PE[ME])&&void 0!==e?e:PE[ME]=new Map;let n=t.get(DE.createContext);return n||(n=DE.createContext(null),t.set(DE.createContext,n)),n}var NE=IE(),kE=()=>{throw new Error("uSES not initialized!")};function OE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NE;return function(){return DE.useContext(e)}}var LE=OE(),FE=kE,BE=(e,t)=>e===t;function VE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NE;const t=e===NE?LE:OE(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:i=BE,devModeChecks:r={}}="function"===typeof n?{equalityFn:n}:n;const{store:s,subscription:o,getServerState:a,stabilityCheck:l,identityFunctionCheck:c}=t(),u=(DE.useRef(!0),DE.useCallback({[e.name]:t=>e(t)}[e.name],[e,l,r.stabilityCheck])),d=FE(o.addNestedSub,s.getState,a||s.getState,u,i);return DE.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var GE=VE();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function HE(e){e()}var WE={notify(){},get:()=>[]};function jE(e,t){let n,i=WE,r=0,s=!1;function o(){c.onStateChange&&c.onStateChange()}function a(){r++,n||(n=t?t.addNestedSub(o):e.subscribe(o),i=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){HE((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let i=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){i&&null!==e&&(i=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}())}function l(){r--,n&&0===r&&(n(),n=void 0,i.clear(),i=WE)}const c={addNestedSub:function(e){a();const t=i.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){i.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,a())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>i};return c}var UE=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),zE="undefined"!==typeof navigator&&"ReactNative"===navigator.product,YE=UE||zE?DE.useLayoutEffect:DE.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var qE=function(e){let{store:t,context:n,children:i,serverState:r,stabilityCheck:s="once",identityFunctionCheck:o="once"}=e;const a=DE.useMemo((()=>{const e=jE(t);return{store:t,subscription:e,getServerState:r?()=>r:void 0,stabilityCheck:s,identityFunctionCheck:o}}),[t,r,s,o]),l=DE.useMemo((()=>t.getState()),[t]);YE((()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,l]);const c=n||NE;return DE.createElement(c.Provider,{value:a},i)};function KE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NE;const t=e===NE?LE:OE(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var XE=KE();function QE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NE;const t=e===NE?XE:KE(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var ZE,$E=QE();ZE=RE.useSyncExternalStoreWithSelector,FE=ZE,(e=>{e})(s.useSyncExternalStore);const JE=e=>{let{text:t,progress:n,darkMode:i=!1,overlayMode:r=!1}=e;return(0,If.jsxs)(bE.div,{className:"fixed top-0 left-0 w-full h-full flex flex-col justify-center items-center \n                  ".concat(r?"bg-black bg-opacity-60":i?"bg-gray-900":"bg-white"," z-50"),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,If.jsxs)("div",{className:"relative flex justify-center items-center mb-20",children:[(0,If.jsx)("div",{className:"absolute border-t-4 border-b-4 border-opacity-30 \n                        ".concat(i?"border-blue-300":"border-blue-600"," rounded-full w-24 h-24 animate-spin")}),(0,If.jsx)("div",{className:"absolute border-t-4 border-b-4 border-opacity-30 \n                        ".concat(i?"border-blue-300":"border-blue-600"," rounded-full w-16 h-16 animate-spin-reverse")}),(0,If.jsx)("div",{className:"absolute border-t-4 border-b-4 border-opacity-30 \n                        ".concat(i?"border-blue-300":"border-blue-600"," rounded-full w-8 h-8 animate-spin")})]}),t&&(0,If.jsx)("p",{className:"".concat(i?"text-white":"text-black"," mt-4 text-lg font-semibold"),children:t}),void 0!==n&&(0,If.jsxs)("div",{className:"w-full max-w-xs mt-4",children:[(0,If.jsx)("div",{className:"".concat(i?"bg-gray-700":"bg-gray-300"," h-3 rounded-full overflow-hidden"),children:(0,If.jsx)("div",{className:"".concat("bg-blue-500"," h-full transition-all duration-500"),style:{width:"".concat(n,"%")}})}),(0,If.jsxs)("p",{className:"".concat(i?"text-white":"text-black"," text-sm mt-2 text-center"),children:[n,"%"]})]})]})};var ex,tx,nx=n(7957),ix=n.n(nx),rx=n(8591),sx=n.n(rx),ox=n(5289),ax=n.n(ox),lx=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(lx||{}),cx={rel:["amphtml","canonical","alternate"]},ux={type:["application/ld+json"]},dx={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},hx=Object.values(lx),px={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},gx=Object.entries(px).reduce(((e,t)=>{let[n,i]=t;return e[i]=n,e}),{}),fx="data-rh",mx="defaultTitle",vx="defer",yx="encodeSpecialCharacters",Cx="onChangeClientState",wx="titleTemplate",bx="prioritizeSeoTags",Sx=(e,t)=>{for(let n=e.length-1;n>=0;n-=1){const i=e[n];if(Object.prototype.hasOwnProperty.call(i,t))return i[t]}return null},Ex=e=>{let t=Sx(e,"title");const n=Sx(e,wx);if(Array.isArray(t)&&(t=t.join("")),n&&t)return n.replace(/%s/g,(()=>t));const i=Sx(e,mx);return t||i||void 0},xx=e=>Sx(e,Cx)||(()=>{}),Ax=(e,t)=>t.filter((t=>"undefined"!==typeof t[e])).map((t=>t[e])).reduce(((e,t)=>({...e,...t})),{}),Tx=(e,t)=>t.filter((e=>"undefined"!==typeof e.base)).map((e=>e.base)).reverse().reduce(((t,n)=>{if(!t.length){const i=Object.keys(n);for(let r=0;r<i.length;r+=1){const s=i[r].toLowerCase();if(-1!==e.indexOf(s)&&n[s])return t.concat(n)}}return t}),[]),_x=(e,t,n)=>{const i={};return n.filter((t=>{return!!Array.isArray(t[e])||("undefined"!==typeof t[e]&&(n="Helmet: ".concat(e,' should be of type "Array". Instead found type "').concat(typeof t[e],'"'),console&&"function"===typeof console.warn&&console.warn(n)),!1);var n})).map((t=>t[e])).reverse().reduce(((e,n)=>{const r={};n.filter((e=>{let n;const s=Object.keys(e);for(let i=0;i<s.length;i+=1){const r=s[i],o=r.toLowerCase();-1===t.indexOf(o)||"rel"===n&&"canonical"===e[n].toLowerCase()||"rel"===o&&"stylesheet"===e[o].toLowerCase()||(n=o),-1===t.indexOf(r)||"innerHTML"!==r&&"cssText"!==r&&"itemprop"!==r||(n=r)}if(!n||!e[n])return!1;const o=e[n].toLowerCase();return i[n]||(i[n]={}),r[n]||(r[n]={}),!i[n][o]&&(r[n][o]=!0,!0)})).reverse().forEach((t=>e.push(t)));const s=Object.keys(r);for(let t=0;t<s.length;t+=1){const e=s[t],n={...i[e],...r[e]};i[e]=n}return e}),[]).reverse()},Rx=(e,t)=>{if(Array.isArray(e)&&e.length)for(let n=0;n<e.length;n+=1){if(e[n][t])return!0}return!1},Dx=e=>Array.isArray(e)?e.join(""):e,Mx=(e,t)=>Array.isArray(e)?e.reduce(((e,n)=>(((e,t)=>{const n=Object.keys(e);for(let i=0;i<n.length;i+=1)if(t[n[i]]&&t[n[i]].includes(e[n[i]]))return!0;return!1})(n,t)?e.priority.push(n):e.default.push(n),e)),{priority:[],default:[]}):{default:e,priority:[]},Px=(e,t)=>({...e,[t]:void 0}),Ix=["noscript","script","style"],Nx=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},kx=e=>Object.keys(e).reduce(((t,n)=>{const i="undefined"!==typeof e[n]?"".concat(n,'="').concat(e[n],'"'):"".concat(n);return t?"".concat(t," ").concat(i):i}),""),Ox=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(((t,n)=>(t[px[n]||n]=e[n],t)),t)},Lx=(e,t)=>t.map(((t,n)=>{const i={key:n,[fx]:!0};return Object.keys(t).forEach((e=>{const n=px[e]||e;if("innerHTML"===n||"cssText"===n){const e=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:e}}else i[n]=t[e]})),s.createElement(e,i)})),Fx=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e){case"title":return{toComponent:()=>((e,t,n)=>{const i=Ox(n,{key:t,[fx]:!0});return[s.createElement("title",i,t)]})(0,t.title,t.titleAttributes),toString:()=>((e,t,n,i)=>{const r=kx(n),s=Dx(t);return r?"<".concat(e," ").concat(fx,'="true" ').concat(r,">").concat(Nx(s,i),"</").concat(e,">"):"<".concat(e," ").concat(fx,'="true">').concat(Nx(s,i),"</").concat(e,">")})(e,t.title,t.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Ox(t),toString:()=>kx(t)};default:return{toComponent:()=>Lx(e,t),toString:()=>function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.reduce(((t,i)=>{const r=i,s=Object.keys(r).filter((e=>!("innerHTML"===e||"cssText"===e))).reduce(((e,t)=>{const i="undefined"===typeof r[t]?t:"".concat(t,'="').concat(Nx(r[t],n),'"');return e?"".concat(e," ").concat(i):i}),""),o=r.innerHTML||r.cssText||"",a=-1===Ix.indexOf(e);return"".concat(t,"<").concat(e," ").concat(fx,'="true" ').concat(s).concat(a?"/>":">".concat(o,"</").concat(e,">"))}),"")}(e,t,n)}}},Bx=e=>{const{baseTag:t,bodyAttributes:n,encode:i=!0,htmlAttributes:r,noscriptTags:s,styleTags:o,title:a="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:u,metaTags:d,scriptTags:h}=e,p={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:p,linkTags:u,metaTags:d,scriptTags:h}=(e=>{let{metaTags:t,linkTags:n,scriptTags:i,encode:r}=e;const s=Mx(t,dx),o=Mx(n,cx),a=Mx(i,ux);return{priorityMethods:{toComponent:()=>[...Lx("meta",s.priority),...Lx("link",o.priority),...Lx("script",a.priority)],toString:()=>"".concat(Fx("meta",s.priority,r)," ").concat(Fx("link",o.priority,r)," ").concat(Fx("script",a.priority,r))},metaTags:s.default,linkTags:o.default,scriptTags:a.default}})(e)),{priority:p,base:Fx("base",t,i),bodyAttributes:Fx("bodyAttributes",n,i),htmlAttributes:Fx("htmlAttributes",r,i),link:Fx("link",u,i),meta:Fx("meta",d,i),noscript:Fx("noscript",s,i),script:Fx("script",h,i),style:Fx("style",o,i),title:Fx("title",{title:a,titleAttributes:l},i)}},Vx=[],Gx=!("undefined"===typeof window||!window.document||!window.document.createElement),Hx=class{constructor(e,t){An(this,"instances",[]),An(this,"canUseDOM",Gx),An(this,"context",void 0),An(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Vx:this.instances,add:e=>{(this.canUseDOM?Vx:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Vx:this.instances).indexOf(e);(this.canUseDOM?Vx:this.instances).splice(t,1)}}}),this.context=e,this.canUseDOM=t||!1,t||(e.helmet=Bx({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Wx=s.createContext({}),jx=(ex=class e extends s.Component{constructor(t){super(t),An(this,"helmetData",void 0),this.helmetData=new Hx(this.props.context||{},e.canUseDOM)}render(){return s.createElement(Wx.Provider,{value:this.helmetData.value},this.props.children)}},An(ex,"canUseDOM",Gx),ex),Ux=(e,t)=>{const n=document.head||document.querySelector("head"),i=n.querySelectorAll("".concat(e,"[").concat(fx,"]")),r=[].slice.call(i),s=[];let o;return t&&t.length&&t.forEach((t=>{const n=document.createElement(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))if("innerHTML"===e)n.innerHTML=t.innerHTML;else if("cssText"===e)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{const i=e,r="undefined"===typeof t[i]?"":t[i];n.setAttribute(e,r)}n.setAttribute(fx,"true"),r.some(((e,t)=>(o=t,n.isEqualNode(e))))?r.splice(o,1):s.push(n)})),r.forEach((e=>{var t;return null===(t=e.parentNode)||void 0===t?void 0:t.removeChild(e)})),s.forEach((e=>n.appendChild(e))),{oldTags:r,newTags:s}},zx=(e,t)=>{const n=document.getElementsByTagName(e)[0];if(!n)return;const i=n.getAttribute(fx),r=i?i.split(","):[],s=[...r],o=Object.keys(t);for(const a of o){const e=t[a]||"";n.getAttribute(a)!==e&&n.setAttribute(a,e),-1===r.indexOf(a)&&r.push(a);const i=s.indexOf(a);-1!==i&&s.splice(i,1)}for(let a=s.length-1;a>=0;a-=1)n.removeAttribute(s[a]);r.length===s.length?n.removeAttribute(fx):n.getAttribute(fx)!==o.join(",")&&n.setAttribute(fx,o.join(","))},Yx=(e,t)=>{const{baseTag:n,bodyAttributes:i,htmlAttributes:r,linkTags:s,metaTags:o,noscriptTags:a,onChangeClientState:l,scriptTags:c,styleTags:u,title:d,titleAttributes:h}=e;zx("body",i),zx("html",r),((e,t)=>{"undefined"!==typeof e&&document.title!==e&&(document.title=Dx(e)),zx("title",t)})(d,h);const p={baseTag:Ux("base",n),linkTags:Ux("link",s),metaTags:Ux("meta",o),noscriptTags:Ux("noscript",a),scriptTags:Ux("script",c),styleTags:Ux("style",u)},g={},f={};Object.keys(p).forEach((e=>{const{newTags:t,oldTags:n}=p[e];t.length&&(g[e]=t),n.length&&(f[e]=p[e].oldTags)})),t&&t(),l(e,g,f)},qx=null,Kx=e=>{qx&&cancelAnimationFrame(qx),e.defer?qx=requestAnimationFrame((()=>{Yx(e,(()=>{qx=null}))})):(Yx(e),qx=null)},Xx=class extends s.Component{constructor(){super(...arguments),An(this,"rendered",!1)}shouldComponentUpdate(e){return!ax()(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let n=null;const i=(r=e.get().map((e=>{const t={...e.props};return delete t.context,t})),{baseTag:Tx(["href"],r),bodyAttributes:Ax("bodyAttributes",r),defer:Sx(r,vx),encode:Sx(r,yx),htmlAttributes:Ax("htmlAttributes",r),linkTags:_x("link",["rel","href"],r),metaTags:_x("meta",["name","charset","http-equiv","property","itemprop"],r),noscriptTags:_x("noscript",["innerHTML"],r),onChangeClientState:xx(r),scriptTags:_x("script",["src","innerHTML"],r),styleTags:_x("style",["cssText"],r),title:Ex(r),titleAttributes:Ax("titleAttributes",r),prioritizeSeoTags:Rx(r,bx)});var r;jx.canUseDOM?Kx(i):Bx&&(n=Bx(i)),t(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Qx=(An(tx=class extends s.Component{shouldComponentUpdate(e){return!ix()(Px(this.props,"helmetData"),Px(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error("<".concat(e.type," /> elements are self-closing and can not contain children. Refer to our API for more information."))}}flattenArrayTypeChildren(e,t,n,i){return{...t,[e.type]:[...t[e.type]||[],{...n,...this.mapNestedChildrenToProps(e,i)}]}}mapObjectTypeChildren(e,t,n,i){switch(e.type){case"title":return{...t,[e.type]:i,titleAttributes:{...n}};case"body":return{...t,bodyAttributes:{...n}};case"html":return{...t,htmlAttributes:{...n}};default:return{...t,[e.type]:{...n}}}}mapArrayTypeChildrenToProps(e,t){let n={...t};return Object.keys(e).forEach((t=>{n={...n,[t]:e[t]}})),n}warnOnInvalidChildren(e,t){return sx()(hx.some((t=>e.type===t)),"function"===typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":"Only elements types ".concat(hx.join(", ")," are allowed. Helmet does not support rendering <").concat(e.type,"> elements. Refer to our API for more information.")),sx()(!t||"string"===typeof t||Array.isArray(t)&&!t.some((e=>"string"!==typeof e)),"Helmet expects a string as a child of <".concat(e.type,">. Did you forget to wrap your children in braces? ( <").concat(e.type,">{``}</").concat(e.type,"> ) Refer to our API for more information.")),!0}mapChildrenToProps(e,t){let n={};return s.Children.forEach(e,(e=>{if(!e||!e.props)return;const{children:i,...r}=e.props,s=Object.keys(r).reduce(((e,t)=>(e[gx[t]||t]=r[t],e)),{});let{type:o}=e;switch("symbol"===typeof o?o=o.toString():this.warnOnInvalidChildren(e,i),o){case"Symbol(react.fragment)":t=this.mapChildrenToProps(i,t);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(e,n,s,i);break;default:t=this.mapObjectTypeChildren(e,t,s,i)}})),this.mapArrayTypeChildrenToProps(n,t)}render(){const{children:e,...t}=this.props;let n={...t},{helmetData:i}=t;if(e&&(n=this.mapChildrenToProps(e,n)),i&&!(i instanceof Hx)){i=new Hx(i.context,!0),delete n.helmetData}return i?s.createElement(Xx,{...n,context:i.value}):s.createElement(Wx.Consumer,null,(e=>s.createElement(Xx,{...n,context:e})))}},"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),tx);const Zx=e=>{let{title:t,children:n}=e;return(0,If.jsxs)("div",{className:"w-full",children:[(0,If.jsxs)(Qx,{children:[(0,If.jsxs)("title",{children:["PMX - ",t]}),(0,If.jsx)("link",{rel:"icon",href:"/favicon.ico",type:"image/x-icon"})]}),(0,If.jsx)("h1",{className:"pl-20 text-2xl font-bold mb-4 w-full bg-gray-900 text-white p-6",children:t}),(0,If.jsx)("div",{className:"p-4 mx-auto",children:n})]})},$x=()=>{const{user:e,loading:t}=GE((e=>e.auth));if(t||!e)return(0,If.jsx)(JE,{});const n=e.role?(e=>{const t={};return Object.entries(e).forEach((e=>{let[n,i]=e;const[r]=n.split("_");t[r]||(t[r]=[]),t[r].push("".concat(n,": ").concat(i?"Allowed":"Denied"))})),t})(e.role.permissions):{};return(0,If.jsxs)(Zx,{title:"Profile Page",children:[(0,If.jsx)(Qx,{children:(0,If.jsx)("title",{children:"Profile Page"})}),(0,If.jsxs)("div",{className:"w-full max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-lg border border-gray-200",children:[(0,If.jsxs)("div",{className:"flex flex-col lg:flex-row items-center lg:items-start",children:[(0,If.jsx)("div",{className:"w-24 h-24 lg:w-32 lg:h-32 rounded-full overflow-hidden border-4 border-gray-300 bg-gray-100",children:(0,If.jsx)("img",{src:"/logo.png",alt:"Profile",className:"object-cover w-full h-full"})}),(0,If.jsxs)("div",{className:"mt-4 lg:ml-6 text-center lg:text-left",children:[(0,If.jsx)("h1",{className:"text-4xl font-semibold text-gray-800 mb-2",children:e.username}),(0,If.jsx)("p",{className:"text-gray-600 text-lg",children:e.email}),e.city&&e.country&&(0,If.jsxs)("p",{className:"text-gray-600 text-lg",children:[e.city.name,", ",e.country.name]}),e.role&&(0,If.jsx)("p",{className:"text-gray-600 text-lg",children:e.role.name})]})]}),(0,If.jsxs)("div",{className:"mt-8",children:[(0,If.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,If.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm",children:[(0,If.jsx)("p",{className:"text-gray-700 font-medium",children:"Phone Number:"}),(0,If.jsx)("p",{className:"text-gray-900 text-lg",children:e.phoneNumber})]}),(0,If.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm",children:[(0,If.jsx)("p",{className:"text-gray-700 font-medium",children:"Address:"}),(0,If.jsx)("p",{className:"text-gray-900 text-lg",children:e.address})]}),(0,If.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm",children:[(0,If.jsx)("p",{className:"text-gray-700 font-medium",children:"Zip Code:"}),(0,If.jsx)("p",{className:"text-gray-900 text-lg",children:e.zip})]})]}),e.role&&(0,If.jsxs)("div",{className:"mt-8",children:[(0,If.jsx)("p",{className:"text-gray-800 font-semibold text-2xl mb-4",children:"Permissions:"}),(0,If.jsx)("div",{className:"flex flex-wrap",children:Object.entries(n).map((e=>{let[t,n]=e;return(0,If.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm mb-4 w-full md:w-1/2 lg:w-1/3",children:[(0,If.jsxs)("p",{className:"text-gray-700 font-medium capitalize mb-2",children:[t," Permissions:"]}),(0,If.jsx)("ul",{className:"list-disc list-inside text-gray-900",children:n.map(((e,t)=>(0,If.jsx)("li",{className:"text-sm ".concat(e.includes("Denied")?"text-red-600":""),children:e},t)))})]},t)}))})]})]})]})]})},Jx=e=>{let{children:t}=e;const{token:n}=GE((e=>e.auth));return n?(0,If.jsx)(ye,{to:"/dashboard"}):(0,If.jsx)(If.Fragment,{children:t||(0,If.jsx)(Ce,{})})},eA=e=>{let{error:t,showLogoutButton:n=!1}=e;const{token:i}=GE((e=>e.auth));return(0,If.jsxs)(If.Fragment,{children:[(0,If.jsxs)(Qx,{children:[(0,If.jsxs)("title",{children:["PMX - ",401===t.status?"Authorization Error":403===t.status?"Permission Denied":500===t.status?"ERR_NETWORK"==t.code?"Network Error":"Server Error":t.status?"Error ".concat(t.status):"Error"]}),(0,If.jsx)("link",{rel:"icon",href:"/favicon.ico",type:"image/x-icon"})]}),(0,If.jsxs)(bE.div,{className:"w-full flex flex-col justify-center items-center bg-white z-50 min-h-screen",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,If.jsxs)("div",{className:"relative flex justify-center items-center mb-20",children:[(0,If.jsx)("div",{className:"absolute border-t-4 border-b-4 border-red-600 border-opacity-30 rounded-full w-24 h-24 animate-spin"}),(0,If.jsx)("div",{className:"absolute border-t-4 border-b-4 border-red-600 border-opacity-30 rounded-full w-16 h-16 animate-spin-reverse"}),(0,If.jsx)("div",{className:"absolute border-t-4 border-b-4 border-red-600 border-opacity-30 rounded-full w-8 h-8 animate-spin"})]}),t.message&&(0,If.jsx)("p",{className:"text-black mt-4 text-lg font-semibold text-center",children:t.message}),i&&n&&(0,If.jsx)("button",{onClick:()=>{ed.logout()},className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-md",children:"Logout"})]})]})},tA=e=>{let{children:t}=e;const{token:n,user:i,error:r,loading:s,fetchingCurrentUser:o}=GE((e=>e.auth));return n&&i?r?(0,If.jsx)(eA,{error:r,showLogoutButton:!0}):s||o?(0,If.jsx)(JE,{text:"Loading..."}):(0,If.jsx)(If.Fragment,{children:t||(0,If.jsx)(Ce,{})}):(0,If.jsx)(ye,{to:"/login"})},nA=e=>{let{requiredPermissions:t=[],children:n}=e;$E();const{user:i}=GE((e=>e.auth));if(t.length>0&&i){if(!t.every((e=>{var t;return null===(t=i.role)||void 0===t?void 0:t.permissions[e]})))return(0,If.jsx)(eA,{error:{status:403,message:"You do not have permission to view this page.",name:"PermissionError"}})}return(0,If.jsx)(If.Fragment,{children:n})};var iA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},rA=s.createContext&&s.createContext(iA),sA=["attr","size","title"];function oA(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aA(){return aA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},aA.apply(this,arguments)}function lA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function cA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lA(Object(n),!0).forEach((function(t){uA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uA(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dA(e){return e&&e.map(((e,t)=>s.createElement(e.tag,cA({key:t},e.attr),dA(e.child))))}function hA(e){return t=>s.createElement(pA,aA({attr:cA({},e.attr)},t),dA(e.child))}function pA(e){var t=t=>{var n,{attr:i,size:r,title:o}=e,a=oA(e,sA),l=r||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),s.createElement("svg",aA({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,a,{className:n,style:cA(cA({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&s.createElement("title",null,o),e.children)};return void 0!==rA?s.createElement(rA.Consumer,null,(e=>t(e))):t(iA)}function gA(e){return hA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M325.3 234.3L104.6 13l280.8 161.2-60.1 60.1zM47 0C34 6.8 25.3 19.2 25.3 35.3v441.3c0 16.1 8.7 28.5 21.7 35.3l256.6-256L47 0zm425.2 225.6l-58.9-34.1-65.7 64.5 65.7 64.5 60.1-34.1c18-14.3 18-46.5-1.2-60.8zM104.6 499l280.8-161.2-60.1-60.1L104.6 499z"},child:[]}]})(e)}function fA(e){return hA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(e)}function mA(e){return hA({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M425.7 256c-16.9 0-32.8-9-41.4-23.4L320 126l-64.2 106.6c-8.7 14.5-24.6 23.5-41.5 23.5-4.5 0-9-.6-13.3-1.9L64 215v178c0 14.7 10 27.5 24.2 31l216.2 54.1c10.2 2.5 20.9 2.5 31 0L551.8 424c14.2-3.6 24.2-16.4 24.2-31V215l-137 39.1c-4.3 1.3-8.8 1.9-13.3 1.9zm212.6-112.2L586.8 41c-3.1-6.2-9.8-9.8-16.7-8.9L320 64l91.7 152.1c3.8 6.3 11.4 9.3 18.5 7.3l197.9-56.5c9.9-2.9 14.7-13.9 10.2-23.1zM53.2 41L1.7 143.8c-4.6 9.2.3 20.2 10.1 23l197.9 56.5c7.1 2 14.7-1 18.5-7.3L320 64 69.8 32.1c-6.9-.8-13.5 2.7-16.6 8.9z"},child:[]}]})(e)}function vA(e){return hA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(e)}function yA(e){return hA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function CA(e){return hA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(e)}function wA(e){return hA({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M616 192H480V24c0-13.26-10.74-24-24-24H312c-13.26 0-24 10.74-24 24v72h-64V16c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v80h-64V16c0-8.84-7.16-16-16-16H80c-8.84 0-16 7.16-16 16v80H24c-13.26 0-24 10.74-24 24v360c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V216c0-13.26-10.75-24-24-24zM128 404c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm128 192c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm160 96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12V76c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm160 288c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40z"},child:[]}]})(e)}function bA(e){return hA({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function SA(e){return hA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(e)}function EA(e){return hA({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function xA(e){return hA({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(e)}function AA(e){return hA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M349.565 98.783C295.978 98.783 251.721 64 184.348 64c-24.955 0-47.309 4.384-68.045 12.013a55.947 55.947 0 0 0 3.586-23.562C118.117 24.015 94.806 1.206 66.338.048 34.345-1.254 8 24.296 8 56c0 19.026 9.497 35.825 24 45.945V488c0 13.255 10.745 24 24 24h16c13.255 0 24-10.745 24-24v-94.4c28.311-12.064 63.582-22.122 114.435-22.122 53.588 0 97.844 34.783 165.217 34.783 48.169 0 86.667-16.294 122.505-40.858C506.84 359.452 512 349.571 512 339.045v-243.1c0-23.393-24.269-38.87-45.485-29.016-34.338 15.948-76.454 31.854-116.95 31.854z"},child:[]}]})(e)}function TA(e){return hA({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function _A(e){return hA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M444.52 3.52L28.74 195.42c-47.97 22.39-31.98 92.75 19.19 92.75h175.91v175.91c0 51.17 70.36 67.17 92.75 19.19l191.9-415.78c15.99-38.39-25.59-79.97-63.97-63.97z"},child:[]}]})(e)}function RA(e){return hA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function DA(e){return hA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function MA(e){return hA({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(e)}function PA(e){return hA({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function IA(e){return hA({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M630.6 364.9l-90.3-90.2c-12-12-28.3-18.7-45.3-18.7h-79.3c-17.7 0-32 14.3-32 32v79.2c0 17 6.7 33.2 18.7 45.2l90.3 90.2c12.5 12.5 32.8 12.5 45.3 0l92.5-92.5c12.6-12.5 12.6-32.7.1-45.2zm-182.8-21c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24c0 13.2-10.7 24-24 24zm-223.8-88c70.7 0 128-57.3 128-128C352 57.3 294.7 0 224 0S96 57.3 96 128c0 70.6 57.3 127.9 128 127.9zm127.8 111.2V294c-12.2-3.6-24.9-6.2-38.2-6.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 287.9 0 348.1 0 422.3v41.6c0 26.5 21.5 48 48 48h352c15.5 0 29.1-7.5 37.9-18.9l-58-58c-18.1-18.1-28.1-42.2-28.1-67.9z"},child:[]}]})(e)}function NA(e){return hA({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function kA(e){return hA({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}function OA(e){return hA({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M504 352H136.4c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8H504c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm0 96H136.1c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm0-192H136.6c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8H504c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm106.5-139L338.4 3.7a48.15 48.15 0 0 0-36.9 0L29.5 117C11.7 124.5 0 141.9 0 161.3V504c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8V256c0-17.6 14.6-32 32.6-32h382.8c18 0 32.6 14.4 32.6 32v248c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8V161.3c0-19.4-11.7-36.8-29.5-44.3z"},child:[]}]})(e)}let LA=function(e){return e.CreateUser="create_user",e.ReadUser="read_user",e.UpdateUser="update_user",e.DeleteUser="delete_user",e.CreateRole="create_role",e.ReadRole="read_role",e.UpdateRole="update_role",e.DeleteRole="delete_role",e.CreateParcel="create_parcel",e.ReadParcel="read_parcel",e.UpdateParcel="update_parcel",e.DeleteParcel="delete_parcel",e.CreateWarehouse="create_warehouse",e.ReadWarehouse="read_warehouse",e.UpdateWarehouse="update_warehouse",e.DeleteWarehouse="delete_warehouse",e.CreateExchangeRate="create_exchange_rate",e.ReadExchangeRate="read_exchange_rate",e.UpdateExchangeRate="update_exchange_rate",e.DeleteExchangeRate="delete_exchange_rate",e.CreateCity="create_city",e.ReadCity="read_city",e.UpdateCity="update_city",e.DeleteCity="delete_city",e.CreateCountry="create_country",e.ReadCountry="read_country",e.UpdateCountry="update_country",e.DeleteCountry="delete_country",e.OfficeAcceptAllParcels="office_accept_all_parcels",e.ScanParcelByDriver="scan_parcel_by_driver",e.ScanParcelByWarehouse="scan_parcel_by_warehouse",e.DeliverParcel="deliver_parcel",e.CompletePayment="complete_payment",e.RescheduleParcel="reschedule_parcel",e.CancelParcel="cancel_parcel",e.GetInventory="get_inventory",e.GetShipperInventory="get_shipper_inventory",e}({});const FA={user:[LA.CreateUser,LA.ReadUser,LA.UpdateUser,LA.DeleteUser],role:[LA.CreateRole,LA.ReadRole,LA.UpdateRole,LA.DeleteRole],parcel:[LA.CreateParcel,LA.ReadParcel,LA.UpdateParcel,LA.DeleteParcel],warehouse:[LA.CreateWarehouse,LA.ReadWarehouse,LA.UpdateWarehouse,LA.DeleteWarehouse],exchangeRate:[LA.CreateExchangeRate,LA.ReadExchangeRate,LA.UpdateExchangeRate,LA.DeleteExchangeRate],city:[LA.CreateCity,LA.ReadCity,LA.UpdateCity,LA.DeleteCity],country:[LA.CreateCountry,LA.ReadCountry,LA.UpdateCountry,LA.DeleteCountry],driver:[LA.DeliverParcel,LA.RescheduleParcel,LA.CancelParcel,LA.GetInventory,LA.ScanParcelByDriver],office:[LA.ScanParcelByWarehouse,LA.CompletePayment,LA.OfficeAcceptAllParcels],shipper:[LA.GetShipperInventory]};let BA=function(e){return e.Admin="admin",e.Shipper="shipper",e.Driver="driver",e}({});const VA=[{title:"Dashboard Home",to:"/dashboard",requiredPermissions:[[]],icon:(0,If.jsx)(TA,{})},{title:"Profile",to:"/dashboard/profile",requiredPermissions:[[LA.ReadUser],[LA.UpdateUser]],icon:(0,If.jsx)(NA,{}),children:[{title:"View Profile",to:"/dashboard/profile/",requiredPermissions:[[LA.ReadUser]],icon:(0,If.jsx)(NA,{})},{title:"Edit Profile",to:"/dashboard/profile/edit",requiredPermissions:[[LA.UpdateUser]],icon:(0,If.jsx)(NA,{})}]},{title:"City",to:"/dashboard/city",requiredPermissions:[[LA.ReadCity]],icon:(0,If.jsx)(wA,{}),children:[{title:"Create City",to:"/dashboard/city/create",requiredPermissions:[[LA.CreateCity]],icon:(0,If.jsx)(wA,{})},{title:"View City",to:"/dashboard/city",requiredPermissions:[[LA.ReadCity]],icon:(0,If.jsx)(wA,{})}]},{title:"Country",to:"/dashboard/country",requiredPermissions:[[LA.ReadCountry]],icon:(0,If.jsx)(AA,{}),children:[{title:"Create Country",to:"/dashboard/country/create",requiredPermissions:[[LA.CreateCountry]],icon:(0,If.jsx)(AA,{})},{title:"View Country",to:"/dashboard/country",requiredPermissions:[[LA.ReadCountry]],icon:(0,If.jsx)(AA,{})}]},{title:"Parcel",to:"/dashboard/parcel",requiredPermissions:[[LA.ReadParcel]],icon:(0,If.jsx)(vA,{}),children:[{title:"Create Parcel",to:"/dashboard/parcel/create",requiredPermissions:[[LA.CreateParcel]],icon:(0,If.jsx)(vA,{})},{title:"CSV Create Parcel",to:"/dashboard/parcel/csvcreate",requiredPermissions:[[LA.CreateParcel]],icon:(0,If.jsx)(vA,{})},{title:"View Parcel",to:"/dashboard/parcel",requiredPermissions:[[LA.ReadParcel]],icon:(0,If.jsx)(vA,{})},{title:"Parcel Reception",to:"/dashboard/parcel-reception",requiredPermissions:[[LA.ReadParcel]],icon:(0,If.jsx)(vA,{})},{title:"Driver Reception",to:"/dashboard/driver-reception",requiredPermissions:[[LA.ReadParcel]],icon:(0,If.jsx)(vA,{})}]},{title:"Role",to:"/dashboard/role",requiredPermissions:[[LA.ReadRole]],icon:(0,If.jsx)(kA,{}),children:[{title:"Create Role",to:"/dashboard/role/create",requiredPermissions:[[LA.CreateRole]],icon:(0,If.jsx)(kA,{})},{title:"View Role",to:"/dashboard/role",requiredPermissions:[[LA.ReadRole]],icon:(0,If.jsx)(kA,{})}]},{title:"User",to:"/dashboard/user",requiredPermissions:[[LA.ReadUser]],icon:(0,If.jsx)(NA,{}),children:[{title:"Create User",to:"/dashboard/user/create",requiredPermissions:[[LA.CreateUser]],icon:(0,If.jsx)(NA,{})},{title:"View User",to:"/dashboard/user",requiredPermissions:[[LA.ReadUser]],icon:(0,If.jsx)(NA,{})}]},{title:"Warehouse",to:"/dashboard/warehouse",requiredPermissions:[[LA.ReadWarehouse]],icon:(0,If.jsx)(OA,{}),children:[{title:"Create Warehouse",to:"/dashboard/warehouse/create",requiredPermissions:[[LA.CreateWarehouse]],icon:(0,If.jsx)(OA,{})},{title:"View Warehouse",to:"/dashboard/warehouse",requiredPermissions:[[LA.ReadWarehouse]],icon:(0,If.jsx)(OA,{})}]}],GA={wrapper:"block cursor-pointer text-white flex items-center border-b",container:"block cursor-pointer text-white flex items-center border-b",active:"bg-gray-900",hover:"hover:bg-gray-700",childrenContainer:"ml-4",icon:"mr-3"};const HA=function(){return cd.Date.now()};var WA=/\s/;const jA=function(e){for(var t=e.length;t--&&WA.test(e.charAt(t)););return t};var UA=/^\s+/;const zA=function(e){return e?e.slice(0,jA(e)+1).replace(UA,""):e};var YA=/^[-+]0x[0-9a-f]+$/i,qA=/^0b[01]+$/i,KA=/^0o[0-7]+$/i,XA=parseInt;const QA=function(e){if("number"==typeof e)return e;if(Og(e))return NaN;if(jd(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=jd(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=zA(e);var n=qA.test(e);return n||KA.test(e)?XA(e.slice(2),n?2:8):YA.test(e)?NaN:+e};var ZA=Math.max,$A=Math.min;const JA=function(e,t,n){var i,r,s,o,a,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=i,s=r;return i=r=void 0,c=t,o=e.apply(s,n)}function g(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=s}function f(){var e=HA();if(g(e))return m(e);a=setTimeout(f,function(e){var n=t-(e-l);return d?$A(n,s-(e-c)):n}(e))}function m(e){return a=void 0,h&&i?p(e):(i=r=void 0,o)}function v(){var e=HA(),n=g(e);if(i=arguments,r=this,l=e,n){if(void 0===a)return function(e){return c=e,a=setTimeout(f,t),u?p(e):o}(l);if(d)return clearTimeout(a),a=setTimeout(f,t),p(l)}return void 0===a&&(a=setTimeout(f,t)),o}return t=QA(t)||0,jd(n)&&(u=!!n.leading,s=(d="maxWait"in n)?ZA(QA(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),v.cancel=function(){void 0!==a&&clearTimeout(a),c=0,i=l=r=a=void 0},v.flush=function(){return void 0===a?o:m(HA())},v};const eT=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return jd(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),JA(e,t,{leading:i,maxWait:t,trailing:r})};var tT=n(6778),nT=function(){return nT=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},nT.apply(this,arguments)},iT=null,rT=null;function sT(){if(null===iT){if("undefined"===typeof document)return iT=0;var e=document.body,t=document.createElement("div");t.classList.add("simplebar-hide-scrollbar"),e.appendChild(t);var n=t.getBoundingClientRect().right;e.removeChild(t),iT=n}return iT}function oT(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window}function aT(e){return e&&e.ownerDocument?e.ownerDocument:document}tT&&window.addEventListener("resize",(function(){rT!==window.devicePixelRatio&&(rT=window.devicePixelRatio,iT=null)}));var lT=function(e){return Array.prototype.reduce.call(e,(function(e,t){var n=t.name.match(/data-simplebar-(.+)/);if(n){var i=n[1].replace(/\W+(.)/g,(function(e,t){return t.toUpperCase()}));switch(t.value){case"true":e[i]=!0;break;case"false":e[i]=!1;break;case void 0:e[i]=!0;break;default:e[i]=t.value}}return e}),{})};function cT(e,t){var n;e&&(n=e.classList).add.apply(n,t.split(" "))}function uT(e,t){e&&t.split(" ").forEach((function(t){e.classList.remove(t)}))}function dT(e){return".".concat(e.split(" ").join("."))}var hT=Object.freeze({__proto__:null,addClasses:cT,classNamesToQuery:dT,getElementDocument:aT,getElementWindow:oT,getOptions:lT,removeClasses:uT}),pT=oT,gT=aT,fT=lT,mT=cT,vT=uT,yT=dT,CT=function(){function e(t,n){void 0===n&&(n={});var i=this;if(this.removePreventClickId=null,this.minScrollbarWidth=20,this.stopScrollDelay=175,this.isScrolling=!1,this.isMouseEntering=!1,this.isDragging=!1,this.scrollXTicking=!1,this.scrollYTicking=!1,this.wrapperEl=null,this.contentWrapperEl=null,this.contentEl=null,this.offsetEl=null,this.maskEl=null,this.placeholderEl=null,this.heightAutoObserverWrapperEl=null,this.heightAutoObserverEl=null,this.rtlHelpers=null,this.scrollbarWidth=0,this.resizeObserver=null,this.mutationObserver=null,this.elStyles=null,this.isRtl=null,this.mouseX=0,this.mouseY=0,this.onMouseMove=function(){},this.onWindowResize=function(){},this.onStopScrolling=function(){},this.onMouseEntered=function(){},this.onScroll=function(){var e=pT(i.el);i.scrollXTicking||(e.requestAnimationFrame(i.scrollX),i.scrollXTicking=!0),i.scrollYTicking||(e.requestAnimationFrame(i.scrollY),i.scrollYTicking=!0),i.isScrolling||(i.isScrolling=!0,mT(i.el,i.classNames.scrolling)),i.showScrollbar("x"),i.showScrollbar("y"),i.onStopScrolling()},this.scrollX=function(){i.axis.x.isOverflowing&&i.positionScrollbar("x"),i.scrollXTicking=!1},this.scrollY=function(){i.axis.y.isOverflowing&&i.positionScrollbar("y"),i.scrollYTicking=!1},this._onStopScrolling=function(){vT(i.el,i.classNames.scrolling),i.options.autoHide&&(i.hideScrollbar("x"),i.hideScrollbar("y")),i.isScrolling=!1},this.onMouseEnter=function(){i.isMouseEntering||(mT(i.el,i.classNames.mouseEntered),i.showScrollbar("x"),i.showScrollbar("y"),i.isMouseEntering=!0),i.onMouseEntered()},this._onMouseEntered=function(){vT(i.el,i.classNames.mouseEntered),i.options.autoHide&&(i.hideScrollbar("x"),i.hideScrollbar("y")),i.isMouseEntering=!1},this._onMouseMove=function(e){i.mouseX=e.clientX,i.mouseY=e.clientY,(i.axis.x.isOverflowing||i.axis.x.forceVisible)&&i.onMouseMoveForAxis("x"),(i.axis.y.isOverflowing||i.axis.y.forceVisible)&&i.onMouseMoveForAxis("y")},this.onMouseLeave=function(){i.onMouseMove.cancel(),(i.axis.x.isOverflowing||i.axis.x.forceVisible)&&i.onMouseLeaveForAxis("x"),(i.axis.y.isOverflowing||i.axis.y.forceVisible)&&i.onMouseLeaveForAxis("y"),i.mouseX=-1,i.mouseY=-1},this._onWindowResize=function(){i.scrollbarWidth=i.getScrollbarWidth(),i.hideNativeScrollbar()},this.onPointerEvent=function(e){var t,n;i.axis.x.track.el&&i.axis.y.track.el&&i.axis.x.scrollbar.el&&i.axis.y.scrollbar.el&&(i.axis.x.track.rect=i.axis.x.track.el.getBoundingClientRect(),i.axis.y.track.rect=i.axis.y.track.el.getBoundingClientRect(),(i.axis.x.isOverflowing||i.axis.x.forceVisible)&&(t=i.isWithinBounds(i.axis.x.track.rect)),(i.axis.y.isOverflowing||i.axis.y.forceVisible)&&(n=i.isWithinBounds(i.axis.y.track.rect)),(t||n)&&(e.stopPropagation(),"pointerdown"===e.type&&"touch"!==e.pointerType&&(t&&(i.axis.x.scrollbar.rect=i.axis.x.scrollbar.el.getBoundingClientRect(),i.isWithinBounds(i.axis.x.scrollbar.rect)?i.onDragStart(e,"x"):i.onTrackClick(e,"x")),n&&(i.axis.y.scrollbar.rect=i.axis.y.scrollbar.el.getBoundingClientRect(),i.isWithinBounds(i.axis.y.scrollbar.rect)?i.onDragStart(e,"y"):i.onTrackClick(e,"y")))))},this.drag=function(t){var n,r,s,o,a,l,c,u,d,h,p;if(i.draggedAxis&&i.contentWrapperEl){var g=i.axis[i.draggedAxis].track,f=null!==(r=null===(n=g.rect)||void 0===n?void 0:n[i.axis[i.draggedAxis].sizeAttr])&&void 0!==r?r:0,m=i.axis[i.draggedAxis].scrollbar,v=null!==(o=null===(s=i.contentWrapperEl)||void 0===s?void 0:s[i.axis[i.draggedAxis].scrollSizeAttr])&&void 0!==o?o:0,y=parseInt(null!==(l=null===(a=i.elStyles)||void 0===a?void 0:a[i.axis[i.draggedAxis].sizeAttr])&&void 0!==l?l:"0px",10);t.preventDefault(),t.stopPropagation();var C=("y"===i.draggedAxis?t.pageY:t.pageX)-(null!==(u=null===(c=g.rect)||void 0===c?void 0:c[i.axis[i.draggedAxis].offsetAttr])&&void 0!==u?u:0)-i.axis[i.draggedAxis].dragOffset,w=(C="x"===i.draggedAxis&&i.isRtl?(null!==(h=null===(d=g.rect)||void 0===d?void 0:d[i.axis[i.draggedAxis].sizeAttr])&&void 0!==h?h:0)-m.size-C:C)/(f-m.size)*(v-y);"x"===i.draggedAxis&&i.isRtl&&(w=(null===(p=e.getRtlHelpers())||void 0===p?void 0:p.isScrollingToNegative)?-w:w),i.contentWrapperEl[i.axis[i.draggedAxis].scrollOffsetAttr]=w}},this.onEndDrag=function(e){i.isDragging=!1;var t=gT(i.el),n=pT(i.el);e.preventDefault(),e.stopPropagation(),vT(i.el,i.classNames.dragging),i.onStopScrolling(),t.removeEventListener("mousemove",i.drag,!0),t.removeEventListener("mouseup",i.onEndDrag,!0),i.removePreventClickId=n.setTimeout((function(){t.removeEventListener("click",i.preventClick,!0),t.removeEventListener("dblclick",i.preventClick,!0),i.removePreventClickId=null}))},this.preventClick=function(e){e.preventDefault(),e.stopPropagation()},this.el=t,this.options=nT(nT({},e.defaultOptions),n),this.classNames=nT(nT({},e.defaultOptions.classNames),n.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}}},"object"!==typeof this.el||!this.el.nodeName)throw new Error("Argument passed to SimpleBar must be an HTML element instead of ".concat(this.el));this.onMouseMove=eT(this._onMouseMove,64),this.onWindowResize=JA(this._onWindowResize,64,{leading:!0}),this.onStopScrolling=JA(this._onStopScrolling,this.stopScrollDelay),this.onMouseEntered=JA(this._onMouseEntered,this.stopScrollDelay),this.init()}return e.getRtlHelpers=function(){if(e.rtlHelpers)return e.rtlHelpers;var t=document.createElement("div");t.innerHTML='<div class="simplebar-dummy-scrollbar-size"><div></div></div>';var n=t.firstElementChild,i=null===n||void 0===n?void 0:n.firstElementChild;if(!i)return null;document.body.appendChild(n),n.scrollLeft=0;var r=e.getOffset(n),s=e.getOffset(i);n.scrollLeft=-999;var o=e.getOffset(i);return document.body.removeChild(n),e.rtlHelpers={isScrollOriginAtZero:r.left!==s.left,isScrollingToNegative:s.left!==o.left},e.rtlHelpers},e.prototype.getScrollbarWidth=function(){try{return this.contentWrapperEl&&"none"===getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style?0:sT()}catch(rre){return sT()}},e.getOffset=function(e){var t=e.getBoundingClientRect(),n=gT(e),i=pT(e);return{top:t.top+(i.pageYOffset||n.documentElement.scrollTop),left:t.left+(i.pageXOffset||n.documentElement.scrollLeft)}},e.prototype.init=function(){tT&&(this.initDOM(),this.rtlHelpers=e.getRtlHelpers(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},e.prototype.initDOM=function(){var e,t;this.wrapperEl=this.el.querySelector(yT(this.classNames.wrapper)),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector(yT(this.classNames.contentWrapper)),this.contentEl=this.options.contentNode||this.el.querySelector(yT(this.classNames.contentEl)),this.offsetEl=this.el.querySelector(yT(this.classNames.offset)),this.maskEl=this.el.querySelector(yT(this.classNames.mask)),this.placeholderEl=this.findChild(this.wrapperEl,yT(this.classNames.placeholder)),this.heightAutoObserverWrapperEl=this.el.querySelector(yT(this.classNames.heightAutoObserverWrapperEl)),this.heightAutoObserverEl=this.el.querySelector(yT(this.classNames.heightAutoObserverEl)),this.axis.x.track.el=this.findChild(this.el,"".concat(yT(this.classNames.track)).concat(yT(this.classNames.horizontal))),this.axis.y.track.el=this.findChild(this.el,"".concat(yT(this.classNames.track)).concat(yT(this.classNames.vertical))),this.axis.x.scrollbar.el=(null===(e=this.axis.x.track.el)||void 0===e?void 0:e.querySelector(yT(this.classNames.scrollbar)))||null,this.axis.y.scrollbar.el=(null===(t=this.axis.y.track.el)||void 0===t?void 0:t.querySelector(yT(this.classNames.scrollbar)))||null,this.options.autoHide||(mT(this.axis.x.scrollbar.el,this.classNames.visible),mT(this.axis.y.scrollbar.el,this.classNames.visible))},e.prototype.initListeners=function(){var e,t=this,n=pT(this.el);if(this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("pointerdown",this.onPointerEvent,!0),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),null===(e=this.contentWrapperEl)||void 0===e||e.addEventListener("scroll",this.onScroll),n.addEventListener("resize",this.onWindowResize),this.contentEl){if(window.ResizeObserver){var i=!1,r=n.ResizeObserver||ResizeObserver;this.resizeObserver=new r((function(){i&&n.requestAnimationFrame((function(){t.recalculate()}))})),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),n.requestAnimationFrame((function(){i=!0}))}this.mutationObserver=new n.MutationObserver((function(){n.requestAnimationFrame((function(){t.recalculate()}))})),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})}},e.prototype.recalculate=function(){if(this.heightAutoObserverEl&&this.contentEl&&this.contentWrapperEl&&this.wrapperEl&&this.placeholderEl){var e=pT(this.el);this.elStyles=e.getComputedStyle(this.el),this.isRtl="rtl"===this.elStyles.direction;var t=this.contentEl.offsetWidth,n=this.heightAutoObserverEl.offsetHeight<=1,i=this.heightAutoObserverEl.offsetWidth<=1||t>0,r=this.contentWrapperEl.offsetWidth,s=this.elStyles.overflowX,o=this.elStyles.overflowY;this.contentEl.style.padding="".concat(this.elStyles.paddingTop," ").concat(this.elStyles.paddingRight," ").concat(this.elStyles.paddingBottom," ").concat(this.elStyles.paddingLeft),this.wrapperEl.style.margin="-".concat(this.elStyles.paddingTop," -").concat(this.elStyles.paddingRight," -").concat(this.elStyles.paddingBottom," -").concat(this.elStyles.paddingLeft);var a=this.contentEl.scrollHeight,l=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=n?"auto":"100%",this.placeholderEl.style.width=i?"".concat(t||l,"px"):"auto",this.placeholderEl.style.height="".concat(a,"px");var c=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=0!==t&&l>t,this.axis.y.isOverflowing=a>c,this.axis.x.isOverflowing="hidden"!==s&&this.axis.x.isOverflowing,this.axis.y.isOverflowing="hidden"!==o&&this.axis.y.isOverflowing,this.axis.x.forceVisible="x"===this.options.forceVisible||!0===this.options.forceVisible,this.axis.y.forceVisible="y"===this.options.forceVisible||!0===this.options.forceVisible,this.hideNativeScrollbar();var u=this.axis.x.isOverflowing?this.scrollbarWidth:0,d=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&l>r-d,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&a>c-u,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el&&(this.axis.x.scrollbar.el.style.width="".concat(this.axis.x.scrollbar.size,"px")),this.axis.y.scrollbar.el&&(this.axis.y.scrollbar.el.style.height="".concat(this.axis.y.scrollbar.size,"px")),this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")}},e.prototype.getScrollbarSize=function(e){var t,n;if(void 0===e&&(e="y"),!this.axis[e].isOverflowing||!this.contentEl)return 0;var i,r=this.contentEl[this.axis[e].scrollSizeAttr],s=null!==(n=null===(t=this.axis[e].track.el)||void 0===t?void 0:t[this.axis[e].offsetSizeAttr])&&void 0!==n?n:0,o=s/r;return i=Math.max(~~(o*s),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(i=Math.min(i,this.options.scrollbarMaxSize)),i},e.prototype.positionScrollbar=function(t){var n,i,r;void 0===t&&(t="y");var s=this.axis[t].scrollbar;if(this.axis[t].isOverflowing&&this.contentWrapperEl&&s.el&&this.elStyles){var o=this.contentWrapperEl[this.axis[t].scrollSizeAttr],a=(null===(n=this.axis[t].track.el)||void 0===n?void 0:n[this.axis[t].offsetSizeAttr])||0,l=parseInt(this.elStyles[this.axis[t].sizeAttr],10),c=this.contentWrapperEl[this.axis[t].scrollOffsetAttr];c="x"===t&&this.isRtl&&(null===(i=e.getRtlHelpers())||void 0===i?void 0:i.isScrollOriginAtZero)?-c:c,"x"===t&&this.isRtl&&(c=(null===(r=e.getRtlHelpers())||void 0===r?void 0:r.isScrollingToNegative)?c:-c);var u=c/(o-l),d=~~((a-s.size)*u);d="x"===t&&this.isRtl?-d+(a-s.size):d,s.el.style.transform="x"===t?"translate3d(".concat(d,"px, 0, 0)"):"translate3d(0, ".concat(d,"px, 0)")}},e.prototype.toggleTrackVisibility=function(e){void 0===e&&(e="y");var t=this.axis[e].track.el,n=this.axis[e].scrollbar.el;t&&n&&this.contentWrapperEl&&(this.axis[e].isOverflowing||this.axis[e].forceVisible?(t.style.visibility="visible",this.contentWrapperEl.style[this.axis[e].overflowAttr]="scroll",this.el.classList.add("".concat(this.classNames.scrollable,"-").concat(e))):(t.style.visibility="hidden",this.contentWrapperEl.style[this.axis[e].overflowAttr]="hidden",this.el.classList.remove("".concat(this.classNames.scrollable,"-").concat(e))),this.axis[e].isOverflowing?n.style.display="block":n.style.display="none")},e.prototype.showScrollbar=function(e){void 0===e&&(e="y"),this.axis[e].isOverflowing&&!this.axis[e].scrollbar.isVisible&&(mT(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!0)},e.prototype.hideScrollbar=function(e){void 0===e&&(e="y"),this.isDragging||this.axis[e].isOverflowing&&this.axis[e].scrollbar.isVisible&&(vT(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!1)},e.prototype.hideNativeScrollbar=function(){this.offsetEl&&(this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px",this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px")},e.prototype.onMouseMoveForAxis=function(e){void 0===e&&(e="y");var t=this.axis[e];t.track.el&&t.scrollbar.el&&(t.track.rect=t.track.el.getBoundingClientRect(),t.scrollbar.rect=t.scrollbar.el.getBoundingClientRect(),this.isWithinBounds(t.track.rect)?(this.showScrollbar(e),mT(t.track.el,this.classNames.hover),this.isWithinBounds(t.scrollbar.rect)?mT(t.scrollbar.el,this.classNames.hover):vT(t.scrollbar.el,this.classNames.hover)):(vT(t.track.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)))},e.prototype.onMouseLeaveForAxis=function(e){void 0===e&&(e="y"),vT(this.axis[e].track.el,this.classNames.hover),vT(this.axis[e].scrollbar.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)},e.prototype.onDragStart=function(e,t){var n;void 0===t&&(t="y"),this.isDragging=!0;var i=gT(this.el),r=pT(this.el),s=this.axis[t].scrollbar,o="y"===t?e.pageY:e.pageX;this.axis[t].dragOffset=o-((null===(n=s.rect)||void 0===n?void 0:n[this.axis[t].offsetAttr])||0),this.draggedAxis=t,mT(this.el,this.classNames.dragging),i.addEventListener("mousemove",this.drag,!0),i.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(i.addEventListener("click",this.preventClick,!0),i.addEventListener("dblclick",this.preventClick,!0)):(r.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},e.prototype.onTrackClick=function(e,t){var n,i,r,s,o=this;void 0===t&&(t="y");var a=this.axis[t];if(this.options.clickOnTrack&&a.scrollbar.el&&this.contentWrapperEl){e.preventDefault();var l=pT(this.el);this.axis[t].scrollbar.rect=a.scrollbar.el.getBoundingClientRect();var c=null!==(i=null===(n=this.axis[t].scrollbar.rect)||void 0===n?void 0:n[this.axis[t].offsetAttr])&&void 0!==i?i:0,u=parseInt(null!==(s=null===(r=this.elStyles)||void 0===r?void 0:r[this.axis[t].sizeAttr])&&void 0!==s?s:"0px",10),d=this.contentWrapperEl[this.axis[t].scrollOffsetAttr],h=("y"===t?this.mouseY-c:this.mouseX-c)<0?-1:1,p=-1===h?d-u:d+u,g=function(){o.contentWrapperEl&&(-1===h?d>p&&(d-=40,o.contentWrapperEl[o.axis[t].scrollOffsetAttr]=d,l.requestAnimationFrame(g)):d<p&&(d+=40,o.contentWrapperEl[o.axis[t].scrollOffsetAttr]=d,l.requestAnimationFrame(g)))};g()}},e.prototype.getContentElement=function(){return this.contentEl},e.prototype.getScrollElement=function(){return this.contentWrapperEl},e.prototype.removeListeners=function(){var e=pT(this.el);this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("pointerdown",this.onPointerEvent,!0),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl&&this.contentWrapperEl.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.onMouseMove.cancel(),this.onWindowResize.cancel(),this.onStopScrolling.cancel(),this.onMouseEntered.cancel()},e.prototype.unMount=function(){this.removeListeners()},e.prototype.isWithinBounds=function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height},e.prototype.findChild=function(e,t){var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return Array.prototype.filter.call(e.children,(function(e){return n.call(e,t)}))[0]},e.rtlHelpers=null,e.defaultOptions={forceVisible:!1,clickOnTrack:!0,scrollbarMinSize:25,scrollbarMaxSize:0,ariaLabel:"scrollable content",classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging",scrolling:"simplebar-scrolling",scrollable:"simplebar-scrollable",mouseEntered:"simplebar-mouse-entered"},scrollableNode:null,contentNode:null,autoHide:!0},e.getOptions=fT,e.helpers=hT,e}(),wT=function(){return wT=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},wT.apply(this,arguments)};var bT=s.forwardRef((function(e,t){var n=e.children,i=e.scrollableNodeProps,r=void 0===i?{}:i,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["children","scrollableNodeProps"]),a=s.useRef(),l=s.useRef(),c=s.useRef(),u={},d={};Object.keys(o).forEach((function(e){Object.prototype.hasOwnProperty.call(CT.defaultOptions,e)?u[e]=o[e]:d[e]=o[e]}));var h=wT(wT({},CT.defaultOptions.classNames),u.classNames),p=wT(wT({},r),{className:"".concat(h.contentWrapper).concat(r.className?" ".concat(r.className):""),tabIndex:0,role:"region","aria-label":u.ariaLabel||CT.defaultOptions.ariaLabel});return s.useEffect((function(){var e;return l.current=p.ref?p.ref.current:l.current,a.current&&(e=new CT(a.current,wT(wT(wT({},u),l.current&&{scrollableNode:l.current}),c.current&&{contentNode:c.current})),"function"===typeof t?t(e):t&&(t.current=e)),function(){null===e||void 0===e||e.unMount(),e=null,"function"===typeof t&&t(null)}}),[]),s.createElement("div",wT({"data-simplebar":"init",ref:a},d),s.createElement("div",{className:h.wrapper},s.createElement("div",{className:h.heightAutoObserverWrapperEl},s.createElement("div",{className:h.heightAutoObserverEl})),s.createElement("div",{className:h.mask},s.createElement("div",{className:h.offset},"function"===typeof n?n({scrollableNodeRef:l,scrollableNodeProps:wT(wT({},p),{ref:l}),contentNodeRef:c,contentNodeProps:{className:h.contentEl,ref:c}}):s.createElement("div",wT({},p),s.createElement("div",{className:h.contentEl},n)))),s.createElement("div",{className:h.placeholder})),s.createElement("div",{className:"".concat(h.track," simplebar-horizontal")},s.createElement("div",{className:h.scrollbar})),s.createElement("div",{className:"".concat(h.track," simplebar-vertical")},s.createElement("div",{className:h.scrollbar})))}));bT.displayName="SimpleBar";const ST=e=>{let{icon:t,title:n,to:i,requiredPermissions:r=[],isChild:s=!0}=e;const o=ee(),{user:a,loading:l}=GE((e=>e.auth));if(l)return null;if(!a||!a.role||"object"!==typeof a.role.permissions)return console.error("User role or permissions are not defined correctly",a),null;if(!r.some((e=>e.every((e=>{var t;return null===(t=a.role)||void 0===t?void 0:t.permissions[e]})))))return null;const c=o.pathname===i;return(0,If.jsx)("div",{children:(0,If.jsx)(bE.div,{whileTap:{scale:.95},className:"".concat(s?GA.container:GA.wrapper," ").concat(c?GA.active:GA.hover),style:{userSelect:"none"},children:(0,If.jsxs)(Pe,{to:i,className:"w-full flex items-center px-4 py-2",children:[(0,If.jsx)("div",{className:"text-xl mr-2",children:t}),(0,If.jsx)("span",{className:"ml-2",children:n})]})})})},ET=e=>{let{icon:t,title:n,to:i,children:r,requiredPermissions:o=[]}=e;const[a,l]=(0,s.useState)(!1),c=ee(),{user:u}=GE((e=>e.auth)),d=(0,s.useCallback)((()=>{l((e=>!e))}),[]),h=o.some((e=>e.every((e=>{var t;return null===u||void 0===u||null===(t=u.role)||void 0===t?void 0:t.permissions[e]})))),p=null===r||void 0===r?void 0:r.some((e=>{var t;return null===(t=e.requiredPermissions)||void 0===t?void 0:t.some((e=>e.every((e=>{var t;return null===u||void 0===u||null===(t=u.role)||void 0===t?void 0:t.permissions[e]}))))}));if(!h&&!p)return null;const g=null===r||void 0===r?void 0:r.some((e=>c.pathname===e.to));return(0,If.jsxs)("div",{children:[(0,If.jsx)(bE.div,{whileTap:{scale:.95},className:"".concat(GA.wrapper," ").concat(a||g?GA.active:GA.hover),onClick:d,style:{userSelect:"none"},children:(0,If.jsxs)("div",{className:"w-full flex items-center px-4 py-2",children:[(0,If.jsx)("div",{className:"mr-2 text-xl",children:a?(0,If.jsx)(CA,{}):(0,If.jsx)(yA,{})}),(0,If.jsx)("div",{className:"text-xl",children:t}),(0,If.jsx)("span",{className:"ml-2",children:n})]})}),a&&r&&(0,If.jsx)(bE.div,{initial:"collapsed",animate:"open",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.2},className:GA.childrenContainer,children:r.filter((e=>{var t;return null===(t=e.requiredPermissions)||void 0===t?void 0:t.some((e=>e.every((e=>{var t;return null===u||void 0===u||null===(t=u.role)||void 0===t?void 0:t.permissions[e]}))))})).map(((e,t)=>(0,If.jsx)(ST,{...e,isChild:!1},t)))})]})},xT=e=>{var t;let{isOpen:n}=e;const{user:i,loading:r}=GE((e=>e.auth));return(0,If.jsxs)("div",{className:"fixed inset-y-0 left-0 transform ".concat(n?"translate-x-0":"-translate-x-full"," transition-transform duration-300 ease-in-out bg-gray-800 w-72 z-50"),children:[i&&(0,If.jsxs)("div",{className:"p-4 text-white border-y-2 border-gray-400 bg-gray-500",children:[(0,If.jsxs)("div",{className:"flex items-center mb-4",children:[(0,If.jsx)(MA,{className:"text-2xl mr-2"}),(0,If.jsx)("span",{className:"text-xl",children:i.username})]}),(0,If.jsxs)("div",{className:"flex flex-col",children:[(0,If.jsxs)("div",{className:"flex items-center mb-2",children:[(0,If.jsx)(SA,{className:"text-xl mr-2"}),(0,If.jsx)("span",{children:i.email})]}),(0,If.jsxs)("div",{className:"flex items-center",children:[(0,If.jsx)(IA,{className:"text-xl mr-2"}),(0,If.jsxs)("span",{children:["@",null===(t=i.role)||void 0===t?void 0:t.name]})]})]})]}),(0,If.jsx)(bT,{style:{height:"calc(100vh - 200px)"},children:r?(0,If.jsx)(JE,{}):i?(0,If.jsx)("nav",{className:"p-4",children:VA.map(((e,t)=>e.children?(0,If.jsx)(ET,{...e},t):(0,If.jsx)(ST,{...e,isChild:!1},t)))}):(0,If.jsx)("div",{className:"p-4 text-center text-white",children:(0,If.jsx)(Pe,{to:"/login",className:"text-white underline",children:"Login"})})}),i&&(0,If.jsx)("div",{className:"p-4",children:(0,If.jsxs)("button",{className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-md w-full",onClick:()=>{ed.logout()},children:[(0,If.jsx)(RA,{className:"mr-2"}),"Logout"]})})]})},AT=e=>{let{children:t}=e;const[n,i]=(0,s.useState)(!0),[r,o]=(0,s.useState)(!0),{loading:a}=GE((e=>e.auth)),l=ee();(0,s.useEffect)((()=>{o(!0);const e=()=>o(!1);return e(),()=>e()}),[l]);const c=r||a;return(0,If.jsxs)("div",{className:"relative flex min-h-screen",children:[(0,If.jsx)("button",{className:"fixed top-0 left-0 z-60 flex items-center justify-center w-11 h-11 p-1 m-4 focus:outline-none bg-white border border-black rounded-full transition-all duration-300 ".concat(n?"translate-x-72":""),onClick:()=>{i((e=>!e))},children:n?(0,If.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,If.jsx)("path",{d:"M4 6H20M4 12H20M4 18H20",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}):(0,If.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",children:(0,If.jsx)("path",{d:"M4 6H20M4 12H14M4 18H9",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,If.jsx)(xT,{isOpen:n}),(0,If.jsxs)("div",{className:"flex-1 transition-all duration-300 ".concat(n?"ml-72":"ml-0"),children:[c&&(0,If.jsx)(JE,{}),!c&&(0,If.jsxs)(If.Fragment,{children:[t,(0,If.jsx)(Ce,{})]})]})]})},TT={header:{logo:{src:"/logo.svg",alt:"PMX Logo",title:"PMXLOGISTICS"},navItems:[{label:"Home",sectionId:"home"},{label:"Tracking",sectionId:"tracking"},{label:"Services",sectionId:"services"},{label:"About Us",sectionId:"aboutus"},{label:"Contact Us",sectionId:"contactus"}],socialLinks:[{icon:"FaLocationArrow",link:"https://maps.app.goo.gl/rhDVm5tmT26bCUHV9"}]},footer:{text:"&copy; 2024 PMXpress. All Rights Reserved.",subText:"Designed and developed by Zet (Startup Dev)"}},_T=()=>{const[e,t]=(0,s.useState)(!1),n=ee(),i=ne();(0,s.useEffect)((()=>{if(n.hash){const e=n.hash.replace("#","");o(e)}else window.scrollTo(0,0)}),[n]);const r=()=>{t(!e)},o=e=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})},a=e=>{"/"===n.pathname?o(e):i("/#".concat(e))};return(0,If.jsxs)("div",{className:"min-h-screen flex flex-col bg-white w-full overflow-x-hidden",children:[(0,If.jsxs)(Qx,{children:[(0,If.jsx)("title",{children:"PMXpress Logistic Service"}),(0,If.jsx)("link",{rel:"icon",href:"/favicon.ico",type:"image/x-icon"})]}),(0,If.jsxs)("header",{className:"bg-[#28305c] text-white py-3 shadow-lg fixed w-full z-50 max-w-full ",children:[(0,If.jsxs)("div",{className:"mx-auto flex justify-between items-center px-4 lg:px-8",children:[(0,If.jsx)("div",{className:"flex items-center space-x-4",children:(0,If.jsx)("img",{src:TT.header.logo.src,alt:TT.header.logo.alt,className:"h-10 w-48 object-contain"})}),(0,If.jsxs)("nav",{className:"hidden md:flex items-center space-x-6",children:[(0,If.jsx)("ul",{className:"flex space-x-6 text-white font-semibold",children:TT.header.navItems.map(((e,t)=>(0,If.jsx)("li",{children:(0,If.jsx)("button",{onClick:()=>a(e.sectionId),className:"hover:text-yellow-400 transition duration-300",children:e.label})},t)))}),(0,If.jsx)("div",{className:"flex space-x-4 ml-6",children:TT.header.socialLinks.map(((e,t)=>{const n="FaGooglePlay"===e.icon?gA:_A;return(0,If.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",className:"text-white hover:text-yellow-400 transition duration-300",children:(0,If.jsx)(n,{size:24})},t)}))})]}),(0,If.jsx)("div",{className:"md:hidden",children:(0,If.jsx)("button",{type:"button",className:"text-white focus:outline-none","aria-label":"Open menu",onClick:r,children:(0,If.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,If.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})})]}),e&&(0,If.jsx)("nav",{className:"md:hidden mt-4 bg-[#28305c] px-4",children:(0,If.jsx)("ul",{className:"space-y-4 text-white font-semibold",children:TT.header.navItems.map(((e,t)=>(0,If.jsx)("li",{children:(0,If.jsx)("button",{onClick:()=>{a(e.sectionId),r()},className:"block text-lg hover:text-yellow-400 transition duration-200",children:e.label})},t)))})})]}),(0,If.jsx)("main",{className:"w-full min-h-screen pt-16",children:(0,If.jsx)(Ce,{})}),(0,If.jsx)("footer",{className:"bg-[#212e5b] text-white p-6 text-center",children:(0,If.jsxs)("div",{className:"container mx-auto",children:[(0,If.jsx)("p",{className:"text-sm",children:TT.footer.text}),(0,If.jsx)("p",{className:"text-xs mt-1",children:TT.footer.subText})]})})]})},RT=()=>(0,If.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,If.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"Under Maintenance"}),(0,If.jsx)("p",{className:"text-lg text-gray-600",children:"This page is currently under maintenance. Please check back later."})]}),DT=e=>{let{currentCountry:t,onSuccess:n}=e;const i=$E(),r={code:t?t.code:"",name:t?t.name:""},s=bn().shape({code:ln().required("Code is required"),name:ln().required("Name is required")});return(0,If.jsx)(xE,{initialValues:r,validationSchema:s,handleSubmit:async(e,r)=>{let{setSubmitting:s}=r;const o={code:e.code,name:e.name};try{if(t&&t._id){const e=await i(Ha({...o,_id:t._id}));Ha.fulfilled.match(e)?(ot.success("Country updated successfully"),n()):Ha.rejected.match(e)&&ot.error("Failed to update country")}else{const e=await i(Ga(o));Ga.fulfilled.match(e)?(ot.success("Country created successfully"),n()):Ga.rejected.match(e)&&ot.error("Failed to create country")}}catch(a){ot.error("An error occurred")}finally{s(!1)}},title:"Country Form",buttonText:t?"Update":"Create",children:e=>(0,If.jsxs)(If.Fragment,{children:[(0,If.jsx)(Sf,{as:qf,type:"text",label:"Name",name:"name",required:!0}),(0,If.jsx)(Sf,{as:qf,type:"text",label:"Code",name:"code",required:!0})]})})},MT=()=>{const e=ne();return(0,If.jsx)(Zx,{title:"Create Country",children:(0,If.jsx)(DT,{onSuccess:()=>e("/dashboard/country")})})};var PT=Object.defineProperty,IT=Object.defineProperties,NT=Object.getOwnPropertyDescriptor,kT=Object.getOwnPropertyDescriptors,OT=Object.getOwnPropertySymbols,LT=Object.prototype.hasOwnProperty,FT=Object.prototype.propertyIsEnumerable,BT=(e,t,n)=>t in e?PT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,VT=(e,t)=>{for(var n in t||(t={}))LT.call(t,n)&&BT(e,n,t[n]);if(OT)for(var n of OT(t))FT.call(t,n)&&BT(e,n,t[n]);return e},GT=(e,t)=>IT(e,kT(t)),HT=(e,t)=>{for(var n in t)PT(e,n,{get:t[n],enumerable:!0})},WT=(e,t,n,i)=>{for(var r,s=i>1?void 0:i?NT(t,n):t,o=e.length-1;o>=0;o--)(r=e[o])&&(s=(i?r(t,n,s):r(s))||s);return i&&s&&PT(t,n,s),s},jT=(e,t)=>(n,i)=>t(n,i,e),UT={};function zT(e){return null==e||""===e?null:e}function YT(e){return null!=e&&(""!==e||arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function qT(e){return!YT(e)}function KT(e){return null==e||0===e.length}function XT(e){return null!=e&&"function"===typeof e.toString?e.toString():null}function QT(e){if(void 0===e)return;if(null===e||""===e)return null;if("number"===typeof e)return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function ZT(e){if(void 0!==e)return null!==e&&""!==e&&("boolean"===typeof e?e:/true/i.test(e))}function $T(e){if(null!=e&&""!==e)return e}function JT(e,t){return(e?JSON.stringify(e):null)===(t?JSON.stringify(t):null)}function e_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=null==e,r=null==t;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),i&&r)return 0;if(i)return-1;if(r)return 1;function s(e,t){return e>t?1:e<t?-1:0}if("string"!==typeof e)return s(e,t);if(!n)return s(e,t);try{return e.localeCompare(t)}catch(rre){return s(e,t)}}function t_(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach((e=>t.push(e))),t}return Object.values(e)}HT(UT,{attrToBoolean:()=>ZT,attrToNumber:()=>QT,attrToString:()=>$T,defaultComparator:()=>e_,exists:()=>YT,jsonEquals:()=>JT,makeNull:()=>zT,missing:()=>qT,missingOrEmpty:()=>KT,toStringOrNull:()=>XT,values:()=>t_});var n_=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=XT(e);let n=0;for(;;){let i;if(e?(i=e,0!==n&&(i+="_"+n)):t?(i=t,0!==n&&(i+="_"+n)):i=n,!this.existingKeys[i])return this.existingKeys[i]=!0,String(i);n++}}},i_={};function r_(e,t){if(null!=e)if(Array.isArray(e))for(let n=0;n<e.length;n++)t(n.toString(),e[n]);else for(const[n,i]of Object.entries(e))t(n,i)}function s_(e){const t={},n=Object.keys(e);for(let i=0;i<n.length;i++){const r=n[i],s=e[r];t[r]=s}return t}function o_(e,t){if(!e)return;const n=e,i={};return Object.keys(n).forEach((e=>{if(t&&t.indexOf(e)>=0)return;const r=n[e],s=d_(r)&&r.constructor===Object;i[e]=s?o_(r):r})),i}function a_(e){if(!e)return[];const t=Object;if("function"===typeof t.values)return t.values(e);const n=[];for(const i in e)e.hasOwnProperty(i)&&e.propertyIsEnumerable(i)&&n.push(e[i]);return n}function l_(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];YT(t)&&r_(t,((t,r)=>{let s=e[t];if(s!==r){if(i){if(null==s&&null!=r){"object"===typeof r&&r.constructor===Object&&(s={},e[t]=s)}}d_(r)&&d_(s)&&!Array.isArray(s)?l_(s,r,n,i):(n||void 0!==r)&&(e[t]=r)}}))}function c_(e,t,n){if(!t||!e)return;if(!n)return e[t];const i=t.split(".");let r=e;for(let s=0;s<i.length;s++){if(null==r)return;r=r[i[s]]}return r}function u_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;Object.keys(e).forEach((n=>{"object"!==typeof e[n]||t.includes(n)||(e[n]=void 0)}));const i=Object.getPrototypeOf(e),r={};Object.getOwnPropertyNames(i).forEach((e=>{if("function"===typeof i[e]&&!t.includes(e)){const t=()=>{console.warn((e=>"AG Grid: Grid API function ".concat(e,"() cannot be called as the grid has been destroyed.\n    It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.\n    To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ").concat(n))(e))};r[e]={value:t,writable:!0}}})),Object.defineProperties(e,r)}function d_(e){return"object"===typeof e&&null!==e}HT(i_,{cloneObject:()=>s_,deepCloneDefinition:()=>o_,getAllValuesInObject:()=>a_,getValueUsingField:()=>c_,isNonNullObject:()=>d_,iterateObject:()=>r_,mergeDeep:()=>l_,removeAllReferences:()=>u_});var h_={};HT(h_,{compose:()=>__,debounce:()=>x_,doOnce:()=>g_,errorOnce:()=>m_,executeAfter:()=>E_,executeInAWhile:()=>C_,executeNextVMTurn:()=>S_,getFunctionName:()=>v_,isFunction:()=>y_,noop:()=>R_,throttle:()=>A_,waitUntil:()=>T_,warnOnce:()=>f_});var p_={};function g_(e,t){p_[t]||(e(),p_[t]=!0)}function f_(e){g_((()=>console.warn("AG Grid: "+e)),e)}function m_(e){g_((()=>console.error("AG Grid: "+e)),e)}function v_(e){if(e.name)return e.name;const t=/function\s+([^\(]+)/.exec(e.toString());return t&&2===t.length?t[1].trim():null}function y_(e){return!!(e&&e.constructor&&e.call&&e.apply)}function C_(e){E_(e,400)}var w_=[],b_=!1;function S_(e){w_.push(e),b_||(b_=!0,window.setTimeout((()=>{const e=w_.slice();w_.length=0,b_=!1,e.forEach((e=>e()))}),0))}function E_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.length>0&&window.setTimeout((()=>e.forEach((e=>e()))),t)}function x_(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];const o=this;window.clearTimeout(n),n=window.setTimeout((function(){e.apply(o,r)}),t)}}function A_(e,t){let n=0;return function(){const i=(new Date).getTime();if(!(i-n<t)){n=i;for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];e.apply(this,s)}}}function T_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=arguments.length>3?arguments[3]:void 0;const r=(new Date).getTime();let s=null,o=!1;const a=()=>{const a=(new Date).getTime()-r>n;(e()||a)&&(t(),o=!0,null!=s&&(window.clearInterval(s),s=null),a&&i&&console.warn(i))};a(),o||(s=window.setInterval(a,10))}function __(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((e,t)=>t(e)),e)}var R_=()=>{},D_=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(D_||{}),M_=class e{static register(t){e.__register(t,!0,void 0)}static registerModules(t){e.__registerModules(t,!0,void 0)}static __register(t,n,i){e.runVersionChecks(t),void 0!==i?(e.areGridScopedModules=!0,void 0===e.gridModulesMap[i]&&(e.gridModulesMap[i]={}),e.gridModulesMap[i][t.moduleName]=t):e.globalModulesMap[t.moduleName]=t,e.setModuleBased(n)}static __unRegisterGridModules(t){delete e.gridModulesMap[t]}static __registerModules(t,n,i){e.setModuleBased(n),t&&t.forEach((t=>e.__register(t,n,i)))}static isValidModuleVersion(t){const[n,i]=t.version.split(".")||[],[r,s]=e.currentModuleVersion.split(".")||[];return n===r&&i===s}static runVersionChecks(t){if(e.currentModuleVersion||(e.currentModuleVersion=t.version),t.version?e.isValidModuleVersion(t)||console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '".concat(t.moduleName,"' is version ").concat(t.version," but the other modules are version ").concat(this.currentModuleVersion,". Please update all modules to the same version.")):console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '".concat(t.moduleName,"' is incompatible. Please update all modules to the same version.")),t.validate){const e=t.validate();if(!e.isValid){const t=e;console.error("AG Grid: ".concat(t.message))}}}static setModuleBased(t){void 0===e.moduleBased?e.moduleBased=t:e.moduleBased!==t&&g_((()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information.")}),"ModulePackageCheck")}static __setIsBundled(){e.isBundled=!0}static __assertRegistered(t,n,i){var r;if(this.__isRegistered(t,i))return!0;const s=n+t;let o;if(e.isBundled)o="AG Grid: unable to use ".concat(n," as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:\n        \n        <script src=\"https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js\"><\/script>\n        \nFor more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise");else if(e.moduleBased||void 0===e.moduleBased){let s=null==(r=Object.entries(D_).find((e=>{let[n,i]=e;return i===t})))?void 0:r[0];o="AG Grid: unable to use ".concat(n," as the ").concat(s," is not registered").concat(e.areGridScopedModules?" for gridId: ".concat(i):"",". Check if you have registered the module:\n           \n    import { ModuleRegistry } from '@ag-grid-community/core';\n    import { ").concat(s," } from '").concat(t,"';\n    \n    ModuleRegistry.registerModules([ ").concat(s," ]);\n\nFor more info see: https://www.ag-grid.com/javascript-grid/modules/")}else o="AG Grid: unable to use ".concat(n," as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:\n            \n    import 'ag-grid-enterprise';");return g_((()=>{console.warn(o)}),s),!1}static __isRegistered(t,n){var i;return!!e.globalModulesMap[t]||!!(null==(i=e.gridModulesMap[n])?void 0:i[t])}static __getRegisteredModules(t){return[...t_(e.globalModulesMap),...t_(e.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){var n;return t_(null!=(n=e.gridModulesMap[t])?n:{})||[]}static __isPackageBased(){return!e.moduleBased}};M_.globalModulesMap={},M_.gridModulesMap={},M_.areGridScopedModules=!1;var P_=M_,I_=class{constructor(e,t){if(this.beanWrappers={},this.destroyed=!1,!e||!e.beanClasses)return;this.contextParams=e,this.logger=t,this.logger.log(">> creating ag-Application Context"),this.createBeans();const n=this.getBeanInstances();this.wireBeans(n),this.logger.log(">> ag-Application Context ready - component is alive")}getBeanInstances(){return t_(this.beanWrappers).map((e=>e.beanInstance))}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.wireBeans([e],t),e}wireBeans(e,t){this.autoWireBeans(e),this.methodWireBeans(e),this.callLifeCycleMethods(e,"preConstructMethods"),YT(t)&&e.forEach(t),this.callLifeCycleMethods(e,"postConstructMethods")}createBeans(){this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),r_(this.beanWrappers,((e,t)=>{let n;t.bean.__agBeanMetaData&&t.bean.__agBeanMetaData.autowireMethods&&t.bean.__agBeanMetaData.autowireMethods.agConstructor&&(n=t.bean.__agBeanMetaData.autowireMethods.agConstructor);const i=this.getBeansForParameters(n,t.bean.name),r=new(t.bean.bind.apply(t.bean,[null,...i]));t.beanInstance=r}));const e=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: ".concat(e))}createBeanWrapper(e){const t=e.__agBeanMetaData;if(!t){let t;return t=e.prototype.constructor?v_(e.prototype.constructor):""+e,void console.error("Context item ".concat(t," is not a bean"))}const n={bean:e,beanInstance:null,beanName:t.beanName};this.beanWrappers[t.beanName]=n}autoWireBeans(e){e.forEach((e=>{this.forEachMetaDataInHierarchy(e,((t,n)=>{const i=t.agClassAttributes;i&&i.forEach((t=>{const i=this.lookupBeanInstance(n,t.beanName,t.optional);e[t.attributeName]=i}))}))}))}methodWireBeans(e){e.forEach((e=>{this.forEachMetaDataInHierarchy(e,((t,n)=>{r_(t.autowireMethods,((t,i)=>{if("agConstructor"===t)return;const r=this.getBeansForParameters(i,n);e[t].apply(e,r)}))}))}))}forEachMetaDataInHierarchy(e,t){let n=Object.getPrototypeOf(e);for(;null!=n;){const e=n.constructor;if(e.hasOwnProperty("__agBeanMetaData")){t(e.__agBeanMetaData,this.getBeanName(e))}n=Object.getPrototypeOf(n)}}getBeanName(e){if(e.__agBeanMetaData&&e.__agBeanMetaData.beanName)return e.__agBeanMetaData.beanName;const t=e.toString();return t.substring(9,t.indexOf("("))}getBeansForParameters(e,t){const n=[];return e&&r_(e,((e,i)=>{const r=this.lookupBeanInstance(t,i);n[Number(e)]=r})),n}lookupBeanInstance(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.destroyed)return this.logger.log("AG Grid: bean reference ".concat(t," is used after the grid is destroyed!")),null;if("context"===t)return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(t))return this.contextParams.providedBeanInstances[t];const i=this.beanWrappers[t];return i?i.beanInstance:(n||console.error("AG Grid: unable to find bean reference ".concat(t," while initialising ").concat(e)),null)}callLifeCycleMethods(e,t){e.forEach((e=>this.callLifeCycleMethodsOnBean(e,t)))}callLifeCycleMethodsOnBean(e,t,n){const i={};this.forEachMetaDataInHierarchy(e,(e=>{const r=e[t];r&&r.forEach((e=>{e!=n&&(i[e]=!0)}))}));Object.keys(i).forEach((t=>e[t]()))}getBean(e){return this.lookupBeanInstance("getBean",e,!0)}destroy(){if(this.destroyed)return;this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");const e=this.getBeanInstances();this.destroyBeans(e),this.contextParams.providedBeanInstances=null,P_.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}destroyBean(e){e&&this.destroyBeans([e])}destroyBeans(e){return e?(e.forEach((e=>{this.callLifeCycleMethodsOnBean(e,"preDestroyMethods","destroy");const t=e;"function"===typeof t.destroy&&t.destroy()})),[]):[]}isDestroyed(){return this.destroyed}getGridId(){return this.contextParams.gridId}};function N_(e,t,n){const i=H_(e.constructor);i.preConstructMethods||(i.preConstructMethods=[]),i.preConstructMethods.push(t)}function k_(e,t,n){const i=H_(e.constructor);i.postConstructMethods||(i.postConstructMethods=[]),i.postConstructMethods.push(t)}function O_(e,t,n){const i=H_(e.constructor);i.preDestroyMethods||(i.preDestroyMethods=[]),i.preDestroyMethods.push(t)}function L_(e){return t=>{H_(t).beanName=e}}function F_(e){return(t,n,i)=>{V_(t,e,!1,t,n,null)}}function B_(e){return(t,n,i)=>{V_(t,e,!0,t,n,null)}}function V_(e,t,n,i,r,s){if(null===t)return void console.error("AG Grid: Autowired name should not be null");if("number"===typeof s)return void console.error("AG Grid: Autowired should be on an attribute");const o=H_(e.constructor);o.agClassAttributes||(o.agClassAttributes=[]),o.agClassAttributes.push({attributeName:r,beanName:t,optional:n})}function G_(e){return(t,n,i)=>{const r="function"==typeof t?t:t.constructor;let s;if("number"===typeof i){let t;n?(s=H_(r),t=n):(s=H_(r),t="agConstructor"),s.autowireMethods||(s.autowireMethods={}),s.autowireMethods[t]||(s.autowireMethods[t]={}),s.autowireMethods[t][i]=e}}}function H_(e){return e.hasOwnProperty("__agBeanMetaData")||(e.__agBeanMetaData={}),e.__agBeanMetaData}var W_=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.frameworkOverrides=t,this.gos=e,n){const t=e.useAsyncEvents();this.addGlobalListener(n,t)}i&&this.addGlobalListener(i,!1)}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){const i=t?this.allAsyncListeners:this.allSyncListeners;let r=i.get(e);return!r&&n&&(r=new Set,i.set(e,r)),r}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.getListeners(e,n,!0).add(t)}removeEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.getListeners(e,n,!1);if(i&&(i.delete(t),0===i.size)){(n?this.allAsyncListeners:this.allSyncListeners).delete(e)}}addGlobalListener(e){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;this.gos&&this.gos.addGridCommonParams(t),this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){var n;const i=e.type;if(t&&"event"in e){const t=e.event;t instanceof Event&&(e.eventPath=t.composedPath())}const r=(n,i)=>n.forEach((n=>{if(!i.has(n))return;const r=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming((()=>n(e))):()=>n(e);t?this.dispatchAsync(r):r()})),s=null!=(n=this.getListeners(i,t,!1))?n:new Set,o=new Set(s);o.size>0&&r(o,s);new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach((n=>{const r=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming((()=>n(i,e))):()=>n(i,e);t?this.dispatchAsync(r):r()}))}dispatchAsync(e){this.asyncFunctionsQueue.push(e),this.scheduled||(this.frameworkOverrides.wrapIncoming((()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)})),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach((e=>e()))}};WT([jT(0,G_("gridOptionsService")),jT(1,G_("frameworkOverrides")),jT(2,G_("globalEventListener")),jT(3,G_("globalSyncEventListener"))],W_.prototype,"setBeans",1),W_=WT([L_("eventService")],W_);var j_=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=t=>{this.frameworkOverrides.wrapOutgoing((()=>e(t)))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(t,n)=>{this.frameworkOverrides.wrapOutgoing((()=>e(t,n)))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){var t;return null!=(t=this.wrappedListeners.get(e))?t:e}unwrapGlobal(e){var t;return null!=(t=this.wrappedGlobalListeners.get(e))?t:e}},U_={resizable:!0,sortable:!0},z_=0;function Y_(){return z_++}var q_=class e{constructor(e,t,n,i){this.instanceId=Y_(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new W_,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=i,this.setState(e)}getInstanceId(){return this.instanceId}setState(e){void 0!==e.sort?"asc"!==e.sort&&"desc"!==e.sort||(this.sort=e.sort):"asc"!==e.initialSort&&"desc"!==e.initialSort||(this.sort=e.initialSort);const t=e.sortIndex,n=e.initialSortIndex;void 0!==t?null!==t&&(this.sortIndex=t):null!==n&&(this.sortIndex=n);const i=e.hide,r=e.initialHide;this.visible=void 0!==i?!i:!r,void 0!==e.pinned?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const s=e.flex,o=e.initialFlex;void 0!==s?this.flex=s:void 0!==o&&(this.flex=o)}setColDef(e,t,n){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",n))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=YT(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=YT(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){var e,t;const n=this.colDef;this.minWidth=null!=(e=n.minWidth)?e:this.environment.getMinColWidth(),this.maxWidth=null!=(t=n.maxWidth)?t:Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=YT(this.colDef.tooltipField)||YT(this.colDef.tooltipValueGetter)||YT(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){var t,n;const i=null!=(t=e.minWidth)?t:this.environment.getMinColWidth(),r=null!=(n=e.maxWidth)?n:Number.MAX_SAFE_INTEGER;let s;const o=QT(e.width),a=QT(e.initialWidth);return s=null!=o?o:null!=a?a:200,Math.max(Math.min(s,r),i)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(qT(this.colDef)||qT(this.colDef.showRowGroup))return!1;const t=!0===this.colDef.showRowGroup,n=this.colDef.showRowGroup===e;return t||n}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(e,t){var n,i;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new j_(this.frameworkOverrides));const r=null!=(i=null==(n=this.frameworkEventListenerService)?void 0:n.wrap(t))?i:t;this.eventService.addEventListener(e,r)}removeEventListener(e,t){var n,i;const r=null!=(i=null==(n=this.frameworkEventListenerService)?void 0:n.unwrap(t))?i:t;this.eventService.removeEventListener(e,r)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if("boolean"===typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"===typeof this.colDef.suppressNavigable){const t=this.createColumnFunctionCallbackParams(e);return(0,this.colDef.suppressNavigable)(t)}return!1}isCellEditable(e){return!(e.group&&!this.gos.get("enableGroupEdit"))&&this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){var t;return null!=(t=this.colDef[e])?t:U_[e]}isColumnFunc(e,t){if("boolean"===typeof t)return t;if("function"===typeof t){return t(this.createColumnFunctionCallbackParams(e))}return!1}setMoving(e,t){this.moving=e,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.sort}isSortDescending(){return"desc"===this.sort}isSortNone(){return qT(this.sort)}isSorting(){return YT(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,n){this.filterActive!==e&&(this.filterActive=e,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const i=this.createColumnEvent("filterChanged",t);n&&l_(i,n),this.eventService.dispatchEvent(i)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){this.pinned=!0===e||"left"===e?"left":"right"===e?"right":null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,t){const n=!0===e;this.visible!==n&&(this.visible=n,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(qT(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(qT(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];null!=this.minWidth&&(e=Math.max(e,this.minWidth)),null!=this.maxWidth&&(e=Math.min(e,this.maxWidth)),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return null!=this.maxWidth&&e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){YT(this.minWidth)&&this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}getMenuTabs(e){f_("As of v31.1, 'getMenuTabs' is deprecated. Use 'getColDef().menuTabs ?? defaultValues' instead.");let t=this.getColDef().menuTabs;return null==t&&(t=e),t}dispatchStateUpdatedEvent(t){this.eventService.dispatchEvent({type:e.EVENT_STATE_UPDATED,key:t})}};q_.EVENT_MOVING_CHANGED="movingChanged",q_.EVENT_LEFT_CHANGED="leftChanged",q_.EVENT_WIDTH_CHANGED="widthChanged",q_.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",q_.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",q_.EVENT_VISIBLE_CHANGED="visibleChanged",q_.EVENT_FILTER_CHANGED="filterChanged",q_.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",q_.EVENT_SORT_CHANGED="sortChanged",q_.EVENT_COL_DEF_CHANGED="colDefChanged",q_.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",q_.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",q_.EVENT_PIVOT_CHANGED="columnPivotChanged",q_.EVENT_VALUE_CHANGED="columnValueChanged",q_.EVENT_STATE_UPDATED="columnStateUpdated",WT([F_("gridOptionsService")],q_.prototype,"gos",2),WT([F_("environment")],q_.prototype,"environment",2),WT([F_("columnHoverService")],q_.prototype,"columnHoverService",2),WT([F_("frameworkOverrides")],q_.prototype,"frameworkOverrides",2),WT([k_],q_.prototype,"initialise",1);var K_=q_,X_=class e{constructor(e,t,n,i){this.localEventService=new W_,this.expandable=!1,this.instanceId=Y_(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=n,this.level=i}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some((e=>e.isVisible()))}isPadding(){return this.padding}setExpanded(t){this.expanded=void 0!==t&&t;const n={type:e.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(n)}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(t){this.children&&this.children.forEach((n=>{n instanceof K_?t.push(n):n instanceof e&&n.addLeafColumns(t)}))}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach((t=>t.addEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach((t=>t.removeEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let t=!1,n=!1,i=!1;const r=this.findChildrenRemovingPadding();for(let e=0,o=r.length;e<o;e++){const s=r[e];if(!s.isVisible())continue;const o=s.getColumnGroupShow();"open"===o?(t=!0,i=!0):"closed"===o?(n=!0,i=!0):(t=!0,n=!0)}const s=t&&n&&i;if(this.expandable!==s){this.expandable=s;const t={type:e.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(t)}}findChildrenRemovingPadding(){const t=[],n=i=>{i.forEach((i=>{i instanceof e&&i.isPadding()?n(i.children):t.push(i)}))};return n(this.children),t}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}};X_.EVENT_EXPANDED_CHANGED="expandedChanged",X_.EVENT_EXPANDABLE_CHANGED="expandableChanged",WT([O_],X_.prototype,"destroy",1);var Q_=X_,Z_={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},$_={};HT($_,{addSafePassiveEventListener:()=>RR,createEventPath:()=>TR,getCtrlForEventTarget:()=>xR,getEventPath:()=>_R,isElementInEventPath:()=>AR,isEventSupported:()=>ER,isStopPropagationForAgGrid:()=>SR,stopPropagationForAgGrid:()=>bR});var J_={};function eR(e){return null!=e&&e.length>0}function tR(e){if(e&&e.length)return e[e.length-1]}function nR(e,t,n){return null==e&&null==t||null!=e&&null!=t&&e.length===t.length&&e.every(((e,i)=>n?n(e,t[i]):t[i]===e))}function iR(e,t){return nR(e,t)}function rR(e){return e.sort(((e,t)=>e-t))}function sR(e,t){if(e)for(let n=e.length-2;n>=0;n--){const i=e[n]===t,r=e[n+1]===t;i&&r&&e.splice(n+1,1)}}function oR(e,t){const n=e.indexOf(t);n>=0&&(e[n]=e[e.length-1],e.pop())}function aR(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function lR(e,t){for(let n=0;n<t.length;n++)oR(e,t[n])}function cR(e,t){for(let n=0;n<t.length;n++)aR(e,t[n])}function uR(e,t,n){e.splice(n,0,t)}function dR(e,t,n){if(null!=e&&null!=t)for(let i=t.length-1;i>=0;i--){uR(e,t[i],n)}}function hR(e,t,n){cR(e,t),t.slice().reverse().forEach((t=>uR(e,t,n)))}function pR(e,t){return e.indexOf(t)>-1}function gR(e){return[].concat.apply([],e)}function fR(e,t){null!=t&&null!=e&&t.forEach((t=>e.push(t)))}function mR(e){return e.map(XT)}function vR(e,t){if(null!=e)for(let n=e.length-1;n>=0;n--)t(e[n],n)}HT(J_,{areEqual:()=>nR,existsAndNotEmpty:()=>eR,flatten:()=>gR,forEachReverse:()=>vR,includes:()=>pR,insertArrayIntoArray:()=>dR,insertIntoArray:()=>uR,last:()=>tR,moveInArray:()=>hR,pushAll:()=>fR,removeAllFromArray:()=>cR,removeAllFromUnorderedArray:()=>lR,removeFromArray:()=>aR,removeFromUnorderedArray:()=>oR,removeRepeatsFromArray:()=>sR,shallowCompare:()=>iR,sortNumerically:()=>rR,toStrings:()=>mR});var yR="__ag_Grid_Stop_Propagation",CR=["touchstart","touchend","touchmove","touchcancel","scroll"],wR={};function bR(e){e[yR]=!0}function SR(e){return!0===e[yR]}var ER=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if("boolean"===typeof wR[t])return wR[t];const n=document.createElement(e[t]||"div");return wR[t="on"+t]=t in n}})();function xR(e,t,n){let i=t;for(;i;){const t=e.getDomData(i,n);if(t)return t;i=i.parentElement}return null}function AR(e,t){return!(!t||!e)&&_R(t).indexOf(e)>=0}function TR(e){const t=[];let n=e.target;for(;n;)t.push(n),n=n.parentElement;return t}function _R(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():TR(t)}function RR(e,t,n,i){const r=pR(CR,n)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,n,i,r)}var DR=class e{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:e.EVENT_DESTROYED})}addEventListener(e,t){this.localEventService||(this.localEventService=new W_),this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService&&this.localEventService.removeEventListener(e,t)}dispatchEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedListener(e,t,n){if(this.destroyed)return;e instanceof HTMLElement?RR(this.getFrameworkOverrides(),e,t,n):e.addEventListener(t,n);const i=()=>(e.removeEventListener(t,n),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==i)),null)}setupGridOptionListener(e,t){this.gos.addEventListener(e,t);const n=()=>(this.gos.removeEventListener(e,t),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==n)),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const n=e.join("-")+this.propertyListenerId++,i=e=>{if(e.changeSet){if(e.changeSet&&e.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=e.changeSet.id}const i={type:"gridPropertyChanged",changeSet:e.changeSet,source:e.source};t(i)};e.forEach((e=>this.setupGridOptionListener(e,i)))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.getContext()).createBean(e,n)}destroyBean(e,t){return(t||this.getContext()).destroyBean(e)}destroyBeans(e,t){if(e)for(let n=0;n<e.length;n++)this.destroyBean(e[n],t);return[]}};DR.EVENT_DESTROYED="destroyed",WT([F_("frameworkOverrides")],DR.prototype,"frameworkOverrides",2),WT([F_("context")],DR.prototype,"context",2),WT([F_("eventService")],DR.prototype,"eventService",2),WT([F_("gridOptionsService")],DR.prototype,"gos",2),WT([F_("localeService")],DR.prototype,"localeService",2),WT([F_("environment")],DR.prototype,"environment",2),WT([O_],DR.prototype,"destroy",1);var MR=DR,PR=class extends MR{setBeans(e){this.logger=e.create("ColumnFactory")}createColumnTree(e,t,n,i){const r=new n_,{existingCols:s,existingGroups:o,existingColKeys:a}=this.extractExistingTreeData(n);r.addExistingKeys(a);const l=this.recursivelyCreateColumns(e,0,t,s,r,o,i),c=this.findMaxDept(l,0);this.logger.log("Number of levels for grouped columns is "+c);const u=this.balanceColumnTree(l,0,c,r);return IR(null,u,((e,t)=>{e instanceof Q_&&e.setupExpandable(),e.setOriginalParent(t)})),{columnTree:u,treeDept:c}}extractExistingTreeData(e){const t=[],n=[],i=[];return e&&IR(null,e,(e=>{if(e instanceof Q_){const t=e;n.push(t)}else{const n=e;i.push(n.getId()),t.push(n)}})),{existingCols:t,existingGroups:n,existingColKeys:i}}createForAutoGroups(e,t){return e.map((e=>this.createAutoGroupTreeItem(t,e)))}createAutoGroupTreeItem(e,t){const n=this.findDepth(e);let i=t;for(let r=n-1;r>=0;r--){const e=new Q_(null,"FAKE_PATH_".concat(t.getId(),"}_").concat(r),!0,r);this.createBean(e),e.setChildren([i]),i.setOriginalParent(e),i=e}return 0===n&&t.setOriginalParent(null),i}findDepth(e){let t=0,n=e;for(;n&&n[0]&&n[0]instanceof Q_;)t++,n=n[0].getChildren();return t}balanceColumnTree(e,t,n,i){const r=[];for(let s=0;s<e.length;s++){const o=e[s];if(o instanceof Q_){const e=o,s=this.balanceColumnTree(e.getChildren(),t+1,n,i);e.setChildren(s),r.push(e)}else{let s,a;for(let e=n-1;e>=t;e--){const e=i.getUniqueKey(null,null),n=this.createMergedColGroupDef(null),r=new Q_(n,e,!0,t);this.createBean(r),a&&a.setChildren([r]),a=r,s||(s=a)}if(s&&a){r.push(s);if(e.some((e=>e instanceof Q_))){a.setChildren([o]);continue}a.setChildren(e);break}r.push(o)}}return r}findMaxDept(e,t){let n=t;for(let i=0;i<e.length;i++){const r=e[i];if(r instanceof Q_){const e=r,i=this.findMaxDept(e.getChildren(),t+1);n<i&&(n=i)}}return n}recursivelyCreateColumns(e,t,n,i,r,s,o){if(!e)return[];const a=new Array(e.length);for(let l=0;l<a.length;l++){const c=e[l];this.isColumnGroup(c)?a[l]=this.createColumnGroup(n,c,t,i,r,s,o):a[l]=this.createColumn(n,c,i,r,o)}return a}createColumnGroup(e,t,n,i,r,s,o){const a=this.createMergedColGroupDef(t),l=r.getUniqueKey(a.groupId||null,null),c=new Q_(a,l,!1,n);this.createBean(c);const u=this.findExistingGroup(t,s);u&&s.splice(u.idx,1);let d=null==u?void 0:u.group;d&&c.setExpanded(d.isExpanded());const h=this.recursivelyCreateColumns(a.children,n+1,e,i,r,s,o);return c.setChildren(h),c}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,n,i,r){const s=this.findExistingColumn(t,n);s&&(null==n||n.splice(s.idx,1));let o=null==s?void 0:s.column;if(o){const e=this.addColumnDefaultAndTypes(t,o.getColId());o.setColDef(e,t,r),this.applyColumnState(o,e,r)}else{const n=i.getUniqueKey(t.colId,t.field),r=this.addColumnDefaultAndTypes(t,n);o=new K_(r,t,n,e),this.context.createBean(o)}return this.dataTypeService.addColumnListeners(o),o}applyColumnState(e,t,n){const i=QT(t.flex);void 0!==i&&e.setFlex(i);if(e.getFlex()<=0){const i=QT(t.width);if(null!=i)e.setActualWidth(i,n);else{const t=e.getActualWidth();e.setActualWidth(t,n)}}void 0!==t.sort&&("asc"==t.sort||"desc"==t.sort?e.setSort(t.sort,n):e.setSort(void 0,n));const r=QT(t.sortIndex);void 0!==r&&e.setSortIndex(r);const s=ZT(t.hide);void 0!==s&&e.setVisible(!s,n),void 0!==t.pinned&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let n=0;n<t.length;n++){const i=t[n].getUserProvidedColDef();if(!i)continue;if(null!=e.colId){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(null!=e.field){if(i.field===e.field)return{idx:n,column:t[n]}}else if(i===e)return{idx:n,column:t[n]}}}findExistingGroup(e,t){if(null!=e.groupId)for(let n=0;n<t.length;n++){const i=t[n];if(i.getColGroupDef()&&i.getId()===e.groupId)return{idx:n,group:i}}}addColumnDefaultAndTypes(e,t){const n={};l_(n,this.gos.get("defaultColDef"),!1,!0);const i=this.dataTypeService.updateColDefAndGetColumnType(n,e,t);i&&this.assignColumnTypes(i,n),l_(n,e,!1,!0);const r=this.gos.get("autoGroupColumnDef"),s=this.gos.isColumnsSortingCoupledToGroup();return e.rowGroup&&r&&s&&l_(n,{sort:r.sort,initialSort:r.initialSort},!1,!0),this.dataTypeService.validateColDef(n),n}assignColumnTypes(e,t){if(!e.length)return;const n=Object.assign({},Z_);r_(this.gos.get("columnTypes")||{},((e,t)=>{if(e in n)console.warn("AG Grid: the column type '".concat(e,"' is a default column type and cannot be overridden."));else{t.type&&f_("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),n[e]=t}})),e.forEach((e=>{const i=n[e.trim()];i?l_(t,i,!1,!0):console.warn("AG Grid: colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes")}))}isColumnGroup(e){return void 0!==e.children}};function IR(e,t,n){if(t)for(let i=0;i<t.length;i++){const r=t[i];r instanceof Q_&&IR(r,r.getChildren(),n),n(r,e)}}WT([F_("dataTypeService")],PR.prototype,"dataTypeService",2),WT([jT(0,G_("loggerFactory"))],PR.prototype,"setBeans",1),PR=WT([L_("columnFactory")],PR);var NR=class e{constructor(e,t,n,i){this.displayedChildren=[],this.localEventService=new W_,this.groupId=t,this.partId=n,this.providedColumnGroup=e,this.pinned=i}static createUniqueId(e,t){return e+"_"+t}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return e.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!(!e||0===e.length)&&e.every((e=>e.isMoving()))}checkLeft(){if(this.displayedChildren.forEach((t=>{t instanceof e&&t.checkLeft()})),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const e=tR(this.displayedChildren).getLeft();this.setLeft(e)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(t){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.localEventService.dispatchEvent(this.createAgEvent(e.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(e){return{type:e}}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(t){let n=!1;return this.children.forEach((i=>{t===i&&(n=!0),i instanceof e&&i.isChildInThisGroupDeepSearch(t)&&(n=!0)})),n}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach((t=>{e+=t.getActualWidth()})),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach((t=>{t.isResizable()&&(e=!0)})),e}getMinWidth(){let e=0;return this.displayedChildren.forEach((t=>{e+=t.getMinWidth()||0})),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(t){this.displayedChildren.forEach((n=>{n instanceof K_?t.push(n):n instanceof e&&n.addDisplayedLeafColumns(t)}))}addLeafColumns(t){this.children.forEach((n=>{n instanceof K_?t.push(n):n instanceof e&&n.addLeafColumns(t)}))}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return this.isPadding()&&e&&e.isPadding()?1+e.getPaddingLevel():0}calculateDisplayedColumns(){this.displayedChildren=[];let t=this;for(;null!=t&&t.isPadding();)t=t.getParent();if(!(!!t&&t.providedColumnGroup.isExpandable()))return this.displayedChildren=this.children,void this.localEventService.dispatchEvent(this.createAgEvent(e.EVENT_DISPLAYED_CHILDREN_CHANGED));this.children.forEach((n=>{if(n instanceof e&&(!n.displayedChildren||!n.displayedChildren.length))return;switch(n.getColumnGroupShow()){case"open":t.providedColumnGroup.isExpanded()&&this.displayedChildren.push(n);break;case"closed":t.providedColumnGroup.isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n)}})),this.localEventService.dispatchEvent(this.createAgEvent(e.EVENT_DISPLAYED_CHILDREN_CHANGED))}};NR.EVENT_LEFT_CHANGED="leftChanged",NR.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",WT([F_("gridOptionsService")],NR.prototype,"gos",2);var kR=NR,OR=class{};OR.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",OR.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",OR.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",OR.EVENT_PIVOT_MAX_COLUMNS_EXCEEDED="pivotMaxColumnsExceeded",OR.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",OR.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",OR.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",OR.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",OR.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",OR.EVENT_COLUMN_MOVED="columnMoved",OR.EVENT_COLUMN_VISIBLE="columnVisible",OR.EVENT_COLUMN_PINNED="columnPinned",OR.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",OR.EVENT_COLUMN_RESIZED="columnResized",OR.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",OR.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns",OR.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide",OR.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation",OR.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",OR.EVENT_COLUMN_HEADER_MOUSE_OVER="columnHeaderMouseOver",OR.EVENT_COLUMN_HEADER_MOUSE_LEAVE="columnHeaderMouseLeave",OR.EVENT_COLUMN_HEADER_CLICKED="columnHeaderClicked",OR.EVENT_COLUMN_HEADER_CONTEXT_MENU="columnHeaderContextMenu",OR.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",OR.EVENT_ROW_GROUP_OPENED="rowGroupOpened",OR.EVENT_ROW_DATA_UPDATED="rowDataUpdated",OR.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",OR.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",OR.EVENT_CHART_CREATED="chartCreated",OR.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",OR.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",OR.EVENT_CHART_DESTROYED="chartDestroyed",OR.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",OR.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged",OR.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",OR.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",OR.EVENT_MODEL_UPDATED="modelUpdated",OR.EVENT_CUT_START="cutStart",OR.EVENT_CUT_END="cutEnd",OR.EVENT_PASTE_START="pasteStart",OR.EVENT_PASTE_END="pasteEnd",OR.EVENT_FILL_START="fillStart",OR.EVENT_FILL_END="fillEnd",OR.EVENT_RANGE_DELETE_START="rangeDeleteStart",OR.EVENT_RANGE_DELETE_END="rangeDeleteEnd",OR.EVENT_UNDO_STARTED="undoStarted",OR.EVENT_UNDO_ENDED="undoEnded",OR.EVENT_REDO_STARTED="redoStarted",OR.EVENT_REDO_ENDED="redoEnded",OR.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart",OR.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd",OR.EVENT_CELL_CLICKED="cellClicked",OR.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",OR.EVENT_CELL_MOUSE_DOWN="cellMouseDown",OR.EVENT_CELL_CONTEXT_MENU="cellContextMenu",OR.EVENT_CELL_VALUE_CHANGED="cellValueChanged",OR.EVENT_CELL_EDIT_REQUEST="cellEditRequest",OR.EVENT_ROW_VALUE_CHANGED="rowValueChanged",OR.EVENT_CELL_FOCUSED="cellFocused",OR.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared",OR.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",OR.EVENT_ROW_SELECTED="rowSelected",OR.EVENT_SELECTION_CHANGED="selectionChanged",OR.EVENT_TOOLTIP_SHOW="tooltipShow",OR.EVENT_TOOLTIP_HIDE="tooltipHide",OR.EVENT_CELL_KEY_DOWN="cellKeyDown",OR.EVENT_CELL_MOUSE_OVER="cellMouseOver",OR.EVENT_CELL_MOUSE_OUT="cellMouseOut",OR.EVENT_FILTER_CHANGED="filterChanged",OR.EVENT_FILTER_MODIFIED="filterModified",OR.EVENT_FILTER_OPENED="filterOpened",OR.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged",OR.EVENT_SORT_CHANGED="sortChanged",OR.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",OR.EVENT_ROW_CLICKED="rowClicked",OR.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",OR.EVENT_GRID_READY="gridReady",OR.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed",OR.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",OR.EVENT_VIEWPORT_CHANGED="viewportChanged",OR.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",OR.EVENT_FIRST_DATA_RENDERED="firstDataRendered",OR.EVENT_DRAG_STARTED="dragStarted",OR.EVENT_DRAG_STOPPED="dragStopped",OR.EVENT_CHECKBOX_CHANGED="checkboxChanged",OR.EVENT_ROW_EDITING_STARTED="rowEditingStarted",OR.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",OR.EVENT_CELL_EDITING_STARTED="cellEditingStarted",OR.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",OR.EVENT_BODY_SCROLL="bodyScroll",OR.EVENT_BODY_SCROLL_END="bodyScrollEnd",OR.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",OR.EVENT_PAGINATION_CHANGED="paginationChanged",OR.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",OR.EVENT_STORE_REFRESHED="storeRefreshed",OR.EVENT_STATE_UPDATED="stateUpdated",OR.EVENT_COLUMN_MENU_VISIBLE_CHANGED="columnMenuVisibleChanged",OR.EVENT_CONTEXT_MENU_VISIBLE_CHANGED="contextMenuVisibleChanged",OR.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",OR.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED="columnContainerWidthChanged",OR.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",OR.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",OR.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",OR.EVENT_FLASH_CELLS="flashCells",OR.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",OR.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",OR.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",OR.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",OR.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",OR.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged",OR.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged",OR.EVENT_ROW_DRAG_ENTER="rowDragEnter",OR.EVENT_ROW_DRAG_MOVE="rowDragMove",OR.EVENT_ROW_DRAG_LEAVE="rowDragLeave",OR.EVENT_ROW_DRAG_END="rowDragEnd",OR.EVENT_GRID_STYLES_CHANGED="gridStylesChanged",OR.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",OR.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",OR.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",OR.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",OR.EVENT_STORE_UPDATED="storeUpdated",OR.EVENT_FILTER_DESTROYED="filterDestroyed",OR.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted",OR.EVENT_ROW_COUNT_READY="rowCountReady",OR.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged",OR.EVENT_DATA_TYPES_INFERRED="dataTypesInferred",OR.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged",OR.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected",OR.EVENT_SIDE_BAR_UPDATED="sideBarUpdated";var LR=new Set([OR.EVENT_GRID_PRE_DESTROYED,OR.EVENT_FILL_START]),FR=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let n;return n="number"!==typeof t?0:t+1,this.existingIds[e]=n,n}},BR="ag-Grid-AutoColumn",VR=class extends MR{createAutoGroupColumns(e){const t=[],n=this.gos.get("treeData");let i=this.gos.isGroupMultiAutoColumn();return n&&i&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),i=!1),i?e.forEach(((e,n)=>{t.push(this.createOneAutoGroupColumn(e,n))})):t.push(this.createOneAutoGroupColumn()),t}updateAutoGroupColumns(e,t){e.forEach(((e,n)=>this.updateOneAutoGroupColumn(e,n,t)))}createOneAutoGroupColumn(e,t){let n;n=e?"".concat(BR,"-").concat(e.getId()):BR;const i=this.createAutoGroupColDef(n,e,t);i.colId=n;const r=new K_(i,null,n,!0);return this.context.createBean(r),r}updateOneAutoGroupColumn(e,t,n){const i=e.getColDef(),r="string"==typeof i.showRowGroup?i.showRowGroup:void 0,s=null!=r?this.columnModel.getPrimaryColumn(r):void 0,o=this.createAutoGroupColDef(e.getId(),null!=s?s:void 0,t);e.setColDef(o,null,n),this.columnFactory.applyColumnState(e,o,n)}createAutoGroupColDef(e,t,n){let i=this.createBaseColDef(t);if(l_(i,this.gos.get("autoGroupColumnDef")),i=this.columnFactory.addColumnDefaultAndTypes(i,e),!this.gos.get("treeData")){qT(i.field)&&qT(i.valueGetter)&&qT(i.filterValueGetter)&&"agGroupColumnFilter"!==i.filter&&(i.filter=!1)}n&&n>0&&(i.headerCheckboxSelection=!1);const r=this.gos.isColumnsSortingCoupledToGroup(),s=i.valueGetter||null!=i.field;return r&&!s&&(i.sortIndex=void 0,i.initialSort=void 0),i}createBaseColDef(e){const t=this.gos.get("autoGroupColumnDef"),n={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(t&&(t.cellRenderer||t.cellRendererSelector)||(n.cellRenderer="agGroupCellRenderer"),e){const t=e.getColDef();Object.assign(n,{headerName:this.columnModel.getDisplayNameForColumn(e,"header"),headerValueGetter:t.headerValueGetter}),t.cellRenderer&&Object.assign(n,{cellRendererParams:{innerRenderer:t.cellRenderer,innerRendererParams:t.cellRendererParams}}),n.showRowGroup=e.getColId()}else n.showRowGroup=!0;return n}};WT([F_("columnModel")],VR.prototype,"columnModel",2),WT([F_("columnFactory")],VR.prototype,"columnFactory",2),VR=WT([L_("autoGroupColService")],VR);var GR={};HT(GR,{camelCaseToHumanText:()=>YR,camelCaseToHyphenated:()=>qR,capitalise:()=>UR,escapeString:()=>zR,utf8_encode:()=>jR});var HR=/[&<>"']/g,WR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function jR(e){const t=String.fromCharCode;function n(e,n){return t(e>>n&63|128)}function i(e){if(e>=0&&e<=31&&10!==e){const t=e.toString(16).toUpperCase().padStart(4,"0");return"_x".concat(t,"_")}if(0==(4294967168&e))return t(e);let i="";return 0==(4294965248&e)?i=t(e>>6&31|192):0==(4294901760&e)?(!function(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}(e),i=t(e>>12&15|224),i+=n(e,6)):0==(4292870144&e)&&(i=t(e>>18&7|240),i+=n(e,12),i+=n(e,6)),i+=t(63&e|128),i}const r=function(e){const t=[];if(!e)return[];const n=e.length;let i,r,s=0;for(;s<n;)i=e.charCodeAt(s++),i>=55296&&i<=56319&&s<n?(r=e.charCodeAt(s++),56320==(64512&r)?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),s--)):t.push(i);return t}(e),s=r.length;let o,a=-1,l="";for(;++a<s;)o=r[a],l+=i(o);return l}function UR(e){return e[0].toUpperCase()+e.substring(1).toLowerCase()}function zR(e,t){if(null==e)return null;const n=e.toString().toString();return t?n:n.replace(HR,(e=>WR[e]))}function YR(e){if(!e||null==e)return null;return e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map((e=>e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):""))).join(" ")}function qR(e){return e.replace(/[A-Z]/g,(e=>"-".concat(e.toLocaleLowerCase())))}var KR={};function XR(e){const t=new Map;return e.forEach((e=>t.set(e[0],e[1]))),t}function QR(e,t){const n=new Map;return e.forEach((e=>n.set(t(e),e))),n}function ZR(e){const t=[];return e.forEach(((e,n)=>t.push(n))),t}HT(KR,{convertToMap:()=>XR,keys:()=>ZR,mapById:()=>QR});var $R=class extends MR{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.changeEventsDispatching=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}init(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation");const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],(e=>this.buildAutoGroupColumns(JR(e.source)))),this.addManagedPropertyListener("autoGroupColumnDef",(e=>this.onAutoGroupColumnDefChanged(JR(e.source)))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],(e=>this.onSharedColDefChanged(JR(e.source)))),this.addManagedPropertyListener("pivotMode",(e=>this.setPivotMode(this.gos.get("pivotMode"),JR(e.source)))),this.addManagedListener(this.eventService,OR.EVENT_FIRST_DATA_RENDERED,(()=>this.onFirstDataRendered()))}buildAutoGroupColumns(e){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns(e))}onAutoGroupColumnDefChanged(e){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,e)}onSharedColDefChanged(e){this.gridColumns&&(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,e),this.createColumnsFromColumnDefs(!0,e))}setColumnDefs(e,t){const n=!!this.columnDefs;this.columnDefs=e,this.createColumnsFromColumnDefs(n,t)}recreateColumnDefs(e){this.onSharedColDefChanged(e)}destroyOldColumns(e,t){const n={};if(!e)return;IR(null,e,(e=>{n[e.getInstanceId()]=e})),t&&IR(null,t,(e=>{n[e.getInstanceId()]=null}));const i=Object.values(n).filter((e=>null!=e));this.destroyBeans(i)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(e,t){const n=e?this.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;const i=this.primaryColumns,r=this.primaryColumnTree,s=this.columnFactory.createColumnTree(this.columnDefs,!0,r,t);this.destroyOldColumns(this.primaryColumnTree,s.columnTree),this.primaryColumnTree=s.columnTree,this.primaryHeaderRowCount=s.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach((e=>this.primaryColumnsMap[e.getId()]=e)),this.extractRowGroupColumns(t,i),this.extractPivotColumns(t,i),this.extractValueColumns(t,i),this.ready=!0;const o=void 0===this.gridColsArePrimary;(this.gridColsArePrimary||o||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),e&&this.gridColsArePrimary&&!this.gos.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(t),this.checkViewportColumns()),this.dispatchEverythingChanged(t),this.changeEventsDispatching=!0,n&&n(),this.changeEventsDispatching=!1,this.dispatchNewColumnsLoaded(t)}shouldRowModelIgnoreRefresh(){return this.changeEventsDispatching}dispatchNewColumnsLoaded(e){const t={type:OR.EVENT_NEW_COLUMNS_LOADED,source:e};this.eventService.dispatchEvent(t),"gridInitializing"===e&&this.onColumnsReady()}dispatchEverythingChanged(e){const t={type:OR.EVENT_COLUMN_EVERYTHING_CHANGED,source:e};this.eventService.dispatchEvent(t)}orderGridColumnsLikePrimary(){const e=this.primaryColumns;if(!e)return;const t=e.filter((e=>this.gridColumns.indexOf(e)>=0)),n=this.gridColumns.filter((e=>t.indexOf(e)<0));this.gridColumns=[...n,...t],this.gridColumns=this.placeLockedColumns(this.gridColumns)}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gos.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}checkViewportColumns(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(null==this.displayedColumnsCenter)return;if(!this.extractViewport())return;const t={type:OR.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(t)}setViewportPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(e!==this.scrollWidth||t!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=t,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(n))}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(e){return!e||!this.gos.get("treeData")||(f_("Pivot mode not available with treeData."),!1)}setPivotMode(e,t){if(e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode))return;if(this.pivotMode=e,!this.gridColumns)return;this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(t);const n={type:OR.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(n)}getSecondaryPivotColumn(e,t){if(qT(this.secondaryColumns))return null;const n=this.getPrimaryColumn(t);let i=null;return this.secondaryColumns.forEach((t=>{const r=t.getColDef().pivotKeys,s=t.getColDef().pivotValueColumn;nR(r,e)&&s===n&&(i=t)})),i}setBeans(e){this.logger=e.create("columnModel")}setFirstRightAndLastLeftPinned(e){let t,n;this.gos.get("enableRtl")?(t=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,n=this.displayedColumnsRight?tR(this.displayedColumnsRight):null):(t=this.displayedColumnsLeft?tR(this.displayedColumnsLeft):null,n=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach((i=>{i.setLastLeftPinned(i===t,e),i.setFirstRightPinned(i===n,e)}))}autoSizeColumns(e){if(this.shouldQueueResizeOperations)return void this.resizeOperationQueue.push((()=>this.autoSizeColumns(e)));const{columns:t,skipHeader:n,skipHeaderGroups:i,stopAtGroup:r,source:s="api"}=e;this.animationFrameService.flushAllFrames();const o=[];let a=-1;const l=null!=n?n:this.gos.get("skipHeaderOnAutoSize"),c=null!=i?i:l;for(;0!==a;)a=0,this.actionOnGridColumns(t,(e=>{if(o.indexOf(e)>=0)return!1;const t=this.autoWidthCalculator.getPreferredWidthForColumn(e,l);if(t>0){const n=this.normaliseColumnWidth(e,t);e.setActualWidth(n,s),o.push(e),a++}return!0}),s);c||this.autoSizeColumnGroupsByColumns(t,s,r),this.dispatchColumnResizedEvent(o,!0,"autosizeColumns")}dispatchColumnResizedEvent(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e&&e.length){const r={type:OR.EVENT_COLUMN_RESIZED,columns:e,column:1===e.length?e[0]:null,flexColumns:i,finished:t,source:n};this.eventService.dispatchEvent(r)}}dispatchColumnChangedEvent(e,t,n){const i={type:e,columns:t,column:t&&1==t.length?t[0]:null,source:n};this.eventService.dispatchEvent(i)}dispatchColumnMovedEvent(e){const{movedColumns:t,source:n,toIndex:i,finished:r}=e,s={type:OR.EVENT_COLUMN_MOVED,columns:t,column:t&&1===t.length?t[0]:null,toIndex:i,finished:r,source:n};this.eventService.dispatchEvent(s)}dispatchColumnPinnedEvent(e,t){if(!e.length)return;const n=1===e.length?e[0]:null,i=this.getCommonValue(e,(e=>e.getPinned())),r={type:OR.EVENT_COLUMN_PINNED,pinned:null!=i?i:null,columns:e,column:n,source:t};this.eventService.dispatchEvent(r)}dispatchColumnVisibleEvent(e,t){if(!e.length)return;const n=1===e.length?e[0]:null,i=this.getCommonValue(e,(e=>e.isVisible())),r={type:OR.EVENT_COLUMN_VISIBLE,visible:i,columns:e,column:n,source:t};this.eventService.dispatchEvent(r)}autoSizeColumn(e,t,n){e&&this.autoSizeColumns({columns:[e],skipHeader:n,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,n){const i=new Set;let r;this.getGridColumns(e).forEach((e=>{let t=e.getParent();for(;t&&t!=n;)t.isPadding()||i.add(t),t=t.getParent()}));for(const s of i){for(const e of this.ctrlsService.getHeaderRowContainerCtrls())if(r=e.getHeaderCtrlForColumn(s),r)break;r&&r.resizeLeafColumnsToFit(t)}return[]}autoSizeAllColumns(e,t){if(this.shouldQueueResizeOperations)return void this.resizeOperationQueue.push((()=>this.autoSizeAllColumns(e,t)));const n=this.getAllDisplayedColumns();this.autoSizeColumns({columns:n,skipHeader:t,source:e})}getColumnsFromTree(e){const t=[],n=e=>{for(let i=0;i<e.length;i++){const r=e[i];r instanceof K_?t.push(r):r instanceof Q_&&n(r.getChildren())}};return n(e),t}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(e){return this.getAllDisplayedColumns().indexOf(e)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(e,t,n,i){const r=[];let s=null;for(let o=0;o<t.length;o++){const a=t[o],l=t.length-o,c=Math.min(a.getColSpan(e),l),u=[a];if(c>1){const e=c-1;for(let n=1;n<=e;n++)u.push(t[o+n]);o+=e}let d;if(n?(d=!1,u.forEach((e=>{n(e)&&(d=!0)}))):d=!0,d){if(0===r.length&&s){!!i&&i(a)&&r.push(s)}r.push(a)}s=a}return r}getViewportCenterColumnsForRow(e){if(!this.colSpanActive)return this.viewportColumnsCenter;const t=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,t,(e=>{const t=e.getLeft();return YT(t)&&t>this.viewportLeft}))}isColumnAtEdge(e,t){const n=this.getAllDisplayedColumns();if(!n.length)return!1;const i="first"===t;let r;if(e instanceof kR){const t=e.getDisplayedLeafColumns();if(!t.length)return!1;r=i?t[0]:tR(t)}else r=e;return(i?n[0]:tR(n))===r}getAriaColumnIndex(e){let t;return t=e instanceof kR?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}isColumnInHeaderViewport(e){return!!e.isAutoHeaderHeight()||this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,n=t+e.getActualWidth(),i=this.viewportLeft-200,r=this.viewportRight+200;return!(t<i&&n<i)&&!(t>r&&n>r)}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(e,t,n,i,r,s){if(!e||KT(e))return;let o=!1;if(e.forEach((e=>{if(!e)return;const r=this.getPrimaryColumn(e);if(r){if(n){if(t.indexOf(r)>=0)return;t.push(r)}else{if(t.indexOf(r)<0)return;aR(t,r)}i(r),o=!0}})),!o)return;this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(s);const a={type:r,columns:t,column:1===t.length?t[0]:null,source:s};this.eventService.dispatchEvent(a)}setRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,OR.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),t)}setRowGroupActive(e,t,n){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,n),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.setColumnsVisible([t],!1,n),e||this.gos.get("suppressMakeColumnVisibleAfterUnGroup")||this.setColumnsVisible([t],!0,n))}addRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),OR.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}removeRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),OR.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}addPivotColumns(e,t){this.updatePrimaryColumnList(e,this.pivotColumns,!0,(e=>e.setPivotActive(!0,t)),OR.EVENT_COLUMN_PIVOT_CHANGED,t)}setPivotColumns(e,t){this.setPrimaryColumnList(e,this.pivotColumns,OR.EVENT_COLUMN_PIVOT_CHANGED,!0,((e,n)=>{n.setPivotActive(e,t)}),t)}removePivotColumns(e,t){this.updatePrimaryColumnList(e,this.pivotColumns,!1,(e=>e.setPivotActive(!1,t)),OR.EVENT_COLUMN_PIVOT_CHANGED,t)}setPrimaryColumnList(e,t,n,i,r,s){if(!this.gridColumns)return;const o=new Map;t.forEach(((e,t)=>o.set(e,t))),t.length=0,YT(e)&&e.forEach((e=>{const n=this.getPrimaryColumn(e);n&&t.push(n)})),t.forEach(((e,t)=>{const n=o.get(e);void 0!==n?i&&n!==t||o.delete(e):o.set(e,0)})),(this.primaryColumns||[]).forEach((e=>{const n=t.indexOf(e)>=0;r(n,e)})),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(s),this.dispatchColumnChangedEvent(n,[...o.keys()],s)}setValueColumns(e,t){this.setPrimaryColumnList(e,this.valueColumns,OR.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),t)}setValueActive(e,t,n){if(e!==t.isValueActive()&&(t.setValueActive(e,n),e&&!t.getAggFunc()&&this.aggFuncService)){const e=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(e)}}addValueColumns(e,t){this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),OR.EVENT_COLUMN_VALUE_CHANGED,t)}removeValueColumns(e,t){this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),OR.EVENT_COLUMN_VALUE_CHANGED,t)}normaliseColumnWidth(e,t){const n=e.getMinWidth();YT(n)&&t<n&&(t=n);const i=e.getMaxWidth();return YT(i)&&e.isGreaterThanMax(t)&&(t=i),t}getPrimaryOrGridColumn(e){return this.getPrimaryColumn(e)||this.getGridColumn(e)}setColumnWidths(e,t,n,i){const r=[];e.forEach((e=>{const n=this.getPrimaryOrGridColumn(e.key);if(!n)return;r.push({width:e.newWidth,ratios:[1],columns:[n]});if("shift"===this.gos.get("colResizeDefault")&&(t=!t),t){const t=this.getDisplayedColAfter(n);if(!t)return;const i=n.getActualWidth()-e.newWidth,s=t.getActualWidth()+i;r.push({width:s,ratios:[1],columns:[t]})}})),0!==r.length&&this.resizeColumnSets({resizeSets:r,finished:n,source:i})}checkMinAndMaxWidthsForSet(e){const{columns:t,width:n}=e;let i=0,r=0,s=!0;t.forEach((e=>{const t=e.getMinWidth();i+=t||0;const n=e.getMaxWidth();YT(n)&&n>0?r+=n:s=!1}));return n>=i&&(!s||n<=r)}resizeColumnSets(e){const{resizeSets:t,finished:n,source:i}=e;if(!(!t||t.every((e=>this.checkMinAndMaxWidthsForSet(e))))){if(n){const e=t&&t.length>0?t[0].columns:null;this.dispatchColumnResizedEvent(e,n,i)}return}const r=[],s=[];t.forEach((e=>{const{width:t,columns:n,ratios:o}=e,a={},l={};n.forEach((e=>s.push(e)));let c=!0,u=0;for(;c;){if(u++,u>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}c=!1;const e=[];let i=0,r=t;n.forEach(((t,n)=>{if(l[t.getId()])r-=a[t.getId()];else{e.push(t);const r=o[n];i+=r}}));const s=1/i;e.forEach(((n,i)=>{let u;i===e.length-1?u=r:(u=Math.round(o[i]*t*s),r-=u);const d=n.getMinWidth(),h=n.getMaxWidth();YT(d)&&u<d?(u=d,l[n.getId()]=!0,c=!0):YT(h)&&h>0&&u>h&&(u=h,l[n.getId()]=!0,c=!0),a[n.getId()]=u}))}n.forEach((e=>{const t=a[e.getId()];e.getActualWidth()!==t&&(e.setActualWidth(t,i),r.push(e))}))}));const o=r.length>0;let a=[];o&&(a=this.refreshFlexedColumns({resizingCols:s,skipSetLeft:!0}),this.setLeftValues(i),this.updateBodyWidths(),this.checkViewportColumns());const l=s.concat(a);(o||n)&&this.dispatchColumnResizedEvent(l,n,i,a)}setColumnAggFunc(e,t,n){if(!e)return;const i=this.getPrimaryColumn(e);i&&(i.setAggFunc(t),this.dispatchColumnChangedEvent(OR.EVENT_COLUMN_VALUE_CHANGED,[i],n))}moveRowGroupColumn(e,t,n){if(this.isRowGroupEmpty())return;const i=this.rowGroupColumns[e],r=this.rowGroupColumns.slice(e,t);this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(t,0,i);const s={type:OR.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:r,column:1===r.length?r[0]:null,source:n};this.eventService.dispatchEvent(s)}moveColumns(e,t,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!this.gridColumns)return;if(this.columnAnimationService.start(),t>this.gridColumns.length-e.length)return console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+t),void console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");const r=this.getGridColumns(e);!this.doesMovePassRules(r,t)||(hR(this.gridColumns,r,t),this.updateDisplayedColumns(n),this.dispatchColumnMovedEvent({movedColumns:r,source:n,toIndex:t,finished:i}),this.columnAnimationService.finish())}doesMovePassRules(e,t){const n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){return!!this.doesMovePassMarryChildren(e)&&!!this.doesMovePassLockedPositions(e)}getProposedColumnOrder(e,t){const n=this.gridColumns.slice();return hR(n,e,t),n}sortColumnsLikeGridColumns(e){if(!e||e.length<=1)return;const t=e.filter((e=>this.gridColumns.indexOf(e)<0)).length>0;t||e.sort(((e,t)=>this.gridColumns.indexOf(e)-this.gridColumns.indexOf(t)))}doesMovePassLockedPositions(e){let t=0,n=!0;return e.forEach((e=>{const i=(r=e.getColDef().lockPosition)?!0===r||"left"===r?0:2:1;var r;i<t&&(n=!1),t=i})),n}doesMovePassMarryChildren(e){let t=!0;return IR(null,this.gridBalancedTree,(n=>{if(!(n instanceof Q_))return;const i=n,r=i.getColGroupDef();if(!(r&&r.marryChildren))return;const s=[];i.getLeafColumns().forEach((t=>{const n=e.indexOf(t);s.push(n)}));Math.max.apply(Math,s)-Math.min.apply(Math,s)>i.getLeafColumns().length-1&&(t=!1)})),t}moveColumnByIndex(e,t,n){if(!this.gridColumns)return;const i=this.gridColumns[e];this.moveColumns([i],t,n)}getColumnDefs(){if(!this.primaryColumns)return;const e=this.primaryColumns.slice();return this.gridColsArePrimary?e.sort(((e,t)=>this.gridColumns.indexOf(e)-this.gridColumns.indexOf(t))):this.lastPrimaryOrder&&e.sort(((e,t)=>this.lastPrimaryOrder.indexOf(e)-this.lastPrimaryOrder.indexOf(t))),this.columnDefFactory.buildColumnDefs(e,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){const e=this.getWidthOfColsInList(this.displayedColumnsCenter),t=this.getWidthOfColsInList(this.displayedColumnsLeft),n=this.getWidthOfColsInList(this.displayedColumnsRight);this.bodyWidthDirty=this.bodyWidth!==e;if(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n){this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n;const i={type:OR.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED};this.eventService.dispatchEvent(i);const r={type:OR.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(r)}}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns:null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns:null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){var e;return null!=(e=this.gridColumns)?e:[]}isRowGroupEmpty(){return KT(this.rowGroupColumns)}setColumnsVisible(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;this.applyColumnState({state:e.map((e=>({colId:"string"===typeof e?e:e.getColId(),hide:!t})))},n)}setColumnsPinned(e,t,n){if(!this.gridColumns)return;if(this.gos.isDomLayout("print"))return void console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");let i;this.columnAnimationService.start(),i=!0===t||"left"===t?"left":"right"===t?"right":null,this.actionOnGridColumns(e,(e=>e.getPinned()!==i&&(e.setPinned(i),!0)),n,(()=>({type:OR.EVENT_COLUMN_PINNED,pinned:i,column:null,columns:null,source:n}))),this.columnAnimationService.finish()}actionOnGridColumns(e,t,n,i){if(KT(e))return;const r=[];if(e.forEach((e=>{if(!e)return;const n=this.getGridColumn(e);if(!n)return;!1!==t(n)&&r.push(n)})),r.length&&(this.updateDisplayedColumns(n),YT(i)&&i)){const e=i();e.columns=r,e.column=1===r.length?r[0]:null,this.eventService.dispatchEvent(e)}}getDisplayedColBefore(e){const t=this.getAllDisplayedColumns(),n=t.indexOf(e);return n>0?t[n-1]:null}getDisplayedColAfter(e){const t=this.getAllDisplayedColumns(),n=t.indexOf(e);return n<t.length-1?t[n+1]:null}getDisplayedGroupAtDirection(e,t){const n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),r="After"===t?tR(i):i[0],s="getDisplayedCol".concat(t);for(;;){const t=this[s](r);if(!t)return null;const i=this.getColumnGroupAtLevel(t,n);if(i!==e)return i}}getColumnGroupAtLevel(e,t){let n,i,r=e.getParent();for(;;){if(n=r.getProvidedColumnGroup().getLevel(),i=r.getPaddingLevel(),n+i<=t)break;r=r.getParent()}return r}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(e){const t=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,n=e.isPivotActive()?this.pivotColumns.indexOf(e):null,i=e.isValueActive()?e.getAggFunc():null,r=null!=e.getSort()?e.getSort():null,s=null!=e.getSortIndex()?e.getSortIndex():null,o=null!=e.getFlex()&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:r,sortIndex:s,aggFunc:i,rowGroup:e.isRowGroupActive(),rowGroupIndex:t,pivot:e.isPivotActive(),pivotIndex:n,flex:o}}getColumnState(){if(qT(this.primaryColumns)||!this.isAlive())return[];const e=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(e),e}orderColumnStateList(e){const t=XR(this.gridColumns.map(((e,t)=>[e.getColId(),t])));e.sort(((e,n)=>(t.has(e.colId)?t.get(e.colId):-1)-(t.has(n.colId)?t.get(n.colId):-1)))}resetColumnState(e){if(KT(this.primaryColumns))return;const t=this.getColumnsFromTree(this.primaryColumnTree),n=[];let i=1e3,r=1e3,s=[];this.groupAutoColumns&&(s=s.concat(this.groupAutoColumns)),t&&(s=s.concat(t)),s.forEach((e=>{const t=this.getColumnStateFromColDef(e);qT(t.rowGroupIndex)&&t.rowGroup&&(t.rowGroupIndex=i++),qT(t.pivotIndex)&&t.pivot&&(t.pivotIndex=r++),n.push(t)})),this.applyColumnState({state:n,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(e,t)=>null!=e?e:null!=t?t:null,n=e.getColDef(),i=t(n.sort,n.initialSort),r=t(n.sortIndex,n.initialSortIndex),s=t(n.hide,n.initialHide),o=t(n.pinned,n.initialPinned),a=t(n.width,n.initialWidth),l=t(n.flex,n.initialFlex);let c=t(n.rowGroupIndex,n.initialRowGroupIndex),u=t(n.rowGroup,n.initialRowGroup);null!=c||null!=u&&0!=u||(c=null,u=null);let d=t(n.pivotIndex,n.initialPivotIndex),h=t(n.pivot,n.initialPivot);null!=d||null!=h&&0!=h||(d=null,h=null);const p=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:i,sortIndex:r,hide:s,pinned:o,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:h,pivotIndex:d,aggFunc:p}}applyColumnState(e,t){if(KT(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const n=(n,i,r)=>{const s=this.compareColumnStatesAndDispatchEvents(t);this.autoGroupsNeedBuilding=!0;const o=i.slice(),a={},l={},c=[],u=[];let d=0;const h=this.rowGroupColumns.slice(),p=this.pivotColumns.slice();n.forEach((n=>{const i=n.colId||"";if(i.startsWith(BR))return c.push(n),void u.push(n);const s=r(i);s?(this.syncColumnWithStateItem(s,n,e.defaultState,a,l,!1,t),aR(o,s)):(u.push(n),d+=1)}));const g=n=>this.syncColumnWithStateItem(n,null,e.defaultState,a,l,!1,t);o.forEach(g);const f=(e,t,n,i)=>{const r=e[n.getId()],s=e[i.getId()],o=null!=r,a=null!=s;if(o&&a)return r-s;if(o)return-1;if(a)return 1;const l=t.indexOf(n),c=t.indexOf(i),u=l>=0;return u&&c>=0?l-c:u?-1:1};this.rowGroupColumns.sort(f.bind(this,a,h)),this.pivotColumns.sort(f.bind(this,l,p)),this.updateGridColumns();const m=this.groupAutoColumns?this.groupAutoColumns.slice():[];return c.forEach((n=>{const i=this.getAutoColumn(n.colId);aR(m,i),this.syncColumnWithStateItem(i,n,e.defaultState,null,null,!0,t)})),m.forEach(g),this.applyOrderAfterApplyState(e),this.updateDisplayedColumns(t),this.dispatchEverythingChanged(t),s(),{unmatchedAndAutoStates:u,unmatchedCount:d}};this.columnAnimationService.start();let{unmatchedAndAutoStates:i,unmatchedCount:r}=n(e.state||[],this.primaryColumns||[],(e=>this.getPrimaryColumn(e)));return(i.length>0||YT(e.defaultState))&&(r=n(i,this.secondaryColumns||[],(e=>this.getSecondaryColumn(e))).unmatchedCount),this.columnAnimationService.finish(),0===r}applyOrderAfterApplyState(e){if(!e.applyOrder||!e.state)return;let t=[];const n={};e.state.forEach((e=>{if(!e.colId||n[e.colId])return;const i=this.gridColumnsMap[e.colId];i&&(t.push(i),n[e.colId]=!0)}));let i=0;this.gridColumns.forEach((e=>{const r=e.getColId();if(null!=n[r])return;r.startsWith(BR)?uR(t,e,i++):t.push(e)})),t=this.placeLockedColumns(t),this.doesMovePassMarryChildren(t)?this.gridColumns=t:console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.")}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},n=this.getColumnState(),i={};return n.forEach((e=>{i[e.colId]=e})),()=>{const r=this.getPrimaryAndSecondaryAndAutoColumns(),s=(t,n,i,r)=>{if(nR(n.map(r),i.map(r)))return;const s=new Set(n);i.forEach((e=>{s.delete(e)||s.add(e)}));const o=[...s],a={type:t,columns:o,column:1===o.length?o[0]:null,source:e};this.eventService.dispatchEvent(a)},o=e=>{const t=[];return r.forEach((n=>{const r=i[n.getColId()];r&&e(r,n)&&t.push(n)})),t},a=e=>e.getColId();s(OR.EVENT_COLUMN_ROW_GROUP_CHANGED,t.rowGroupColumns,this.rowGroupColumns,a),s(OR.EVENT_COLUMN_PIVOT_CHANGED,t.pivotColumns,this.pivotColumns,a);const l=o(((e,t)=>{const n=null!=e.aggFunc,i=n!=t.isValueActive(),r=n&&e.aggFunc!=t.getAggFunc();return i||r}));l.length>0&&this.dispatchColumnChangedEvent(OR.EVENT_COLUMN_VALUE_CHANGED,l,e);this.dispatchColumnResizedEvent(o(((e,t)=>e.width!=t.getActualWidth())),!0,e);this.dispatchColumnPinnedEvent(o(((e,t)=>e.pinned!=t.getPinned())),e);this.dispatchColumnVisibleEvent(o(((e,t)=>e.hide==t.isVisible())),e);const c=o(((e,t)=>e.sort!=t.getSort()||e.sortIndex!=t.getSortIndex()));c.length>0&&this.sortController.dispatchSortChangedEvents(e,c),this.normaliseColumnMovedEventForColumnState(n,e)}}getCommonValue(e,t){if(!e||0==e.length)return;const n=t(e[0]);for(let i=1;i<e.length;i++)if(n!==t(e[i]))return;return n}normaliseColumnMovedEventForColumnState(e,t){const n=this.getColumnState(),i={};n.forEach((e=>i[e.colId]=e));const r={};e.forEach((e=>{i[e.colId]&&(r[e.colId]=!0)}));const s=e.filter((e=>r[e.colId])),o=n.filter((e=>r[e.colId])),a=[];o.forEach(((e,t)=>{const n=s&&s[t];if(n&&n.colId!==e.colId){const e=this.getGridColumn(n.colId);e&&a.push(e)}})),a.length&&this.dispatchColumnMovedEvent({movedColumns:a,source:t,finished:!0})}syncColumnWithStateItem(e,t,n,i,r,s,o){var a;if(!e)return;const l=(e,i)=>{const r={value1:void 0,value2:void 0};let s=!1;return t&&(void 0!==t[e]&&(r.value1=t[e],s=!0),YT(i)&&void 0!==t[i]&&(r.value2=t[i],s=!0)),!s&&n&&(void 0!==n[e]&&(r.value1=n[e]),YT(i)&&void 0!==n[i]&&(r.value2=n[i])),r},c=l("hide").value1;void 0!==c&&e.setVisible(!c,o);const u=l("pinned").value1;void 0!==u&&e.setPinned(u);const d=null!=(a=e.getColDef().minWidth)?a:this.environment.getMinColWidth(),h=l("flex").value1;if(void 0!==h&&e.setFlex(h),null==h){const t=l("width").value1;null!=t&&null!=d&&t>=d&&e.setActualWidth(t,o)}const p=l("sort").value1;void 0!==p&&("desc"===p||"asc"===p?e.setSort(p,o):e.setSort(void 0,o));const g=l("sortIndex").value1;if(void 0!==g&&e.setSortIndex(g),s||!e.isPrimary())return;const f=l("aggFunc").value1;void 0!==f&&("string"===typeof f?(e.setAggFunc(f),e.isValueActive()||(e.setValueActive(!0,o),this.valueColumns.push(e))):(YT(f)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,o),aR(this.valueColumns,e))));const{value1:m,value2:v}=l("rowGroup","rowGroupIndex");void 0===m&&void 0===v||("number"===typeof v||m?(e.isRowGroupActive()||(e.setRowGroupActive(!0,o),this.rowGroupColumns.push(e)),i&&"number"===typeof v&&(i[e.getId()]=v)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,o),aR(this.rowGroupColumns,e)));const{value1:y,value2:C}=l("pivot","pivotIndex");void 0===y&&void 0===C||("number"===typeof C||y?(e.isPivotActive()||(e.setPivotActive(!0,o),this.pivotColumns.push(e)),r&&"number"===typeof C&&(r[e.getId()]=C)):e.isPivotActive()&&(e.setPivotActive(!1,o),aR(this.pivotColumns,e)))}getGridColumns(e){return this.getColumns(e,this.getGridColumn.bind(this))}getColumns(e,t){const n=[];return e&&e.forEach((e=>{const i=t(e);i&&n.push(i)})),n}getColumnWithValidation(e){if(null==e)return null;const t=this.getGridColumn(e);return t||console.warn("AG Grid: could not find column "+e),t}getPrimaryColumn(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)}lookupGridColumn(e){return this.gridColumnsMap[e]}getSecondaryColumn(e){return this.secondaryColumns?this.getColumn(e,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(e,t,n){if(!e||!n)return null;if("string"==typeof e&&n[e])return n[e];for(let i=0;i<t.length;i++)if(this.columnsMatch(t[i],e))return t[i];return this.getAutoColumn(e)}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(!0===t)return this.rowGroupColumns.slice(0);const n=this.getPrimaryColumn(t);return n?[n]:null}getAutoColumn(e){return this.groupAutoColumns&&YT(this.groupAutoColumns)&&!qT(this.groupAutoColumns)&&this.groupAutoColumns.find((t=>this.columnsMatch(t,e)))||null}columnsMatch(e,t){const n=e===t,i=e.getColDef()===t,r=e.getColId()==t;return n||i||r}getDisplayNameForColumn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;const i=this.getHeaderName(e.getColDef(),e,null,null,t);return n?this.wrapHeaderNameWithAggFunc(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,n){const i=t?t.getColGroupDef():null;return i?this.getHeaderName(i,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,i,r){const s=e.headerValueGetter;if(s){const o=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:n,providedColumnGroup:i,location:r});return"function"===typeof s?s(o):"string"===typeof s?this.expressionService.evaluate(s,o):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}return null!=e.headerName?e.headerName:e.field?YR(e.field):""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const n=e.getColDef().pivotValueColumn;let i,r=null;if(YT(n)){const s=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&1===this.valueColumns.length,o=void 0!==e.getColDef().pivotTotalColumnIds;if(s&&!o)return t;r=n?n.getAggFunc():null,i=!0}else{const t=e.isValueActive(),n=this.pivotMode||!this.isRowGroupEmpty();t&&n?(r=e.getAggFunc(),i=!0):i=!1}if(i){const e="string"===typeof r?r:"func",n=this.localeService.getLocaleTextFunc()(e,e);return"".concat(n,"(").concat(t,")")}return t}getColumnGroup(e,t){if(!e)return null;if(e instanceof kR)return e;const n=this.getAllDisplayedTrees(),i="number"===typeof t;let r=null;return eD(n,!1,(n=>{if(n instanceof kR){const s=n;let o;o=i?e===s.getGroupId()&&t===s.getPartId():e===s.getGroupId(),o&&(r=s)}})),r}isReady(){return this.ready}extractValueColumns(e,t){this.valueColumns=this.extractColumns(t,this.valueColumns,((t,n)=>t.setValueActive(n,e)),(()=>{}),(()=>{}),(e=>{const t=e.aggFunc;return null===t||""===t?null:void 0!==t?!!t:void 0}),(e=>null!=e.initialAggFunc&&""!=e.initialAggFunc)),this.valueColumns.forEach((e=>{const t=e.getColDef();null!=t.aggFunc&&""!=t.aggFunc?e.setAggFunc(t.aggFunc):e.getAggFunc()||e.setAggFunc(t.initialAggFunc)}))}extractRowGroupColumns(e,t){this.rowGroupColumns=this.extractColumns(t,this.rowGroupColumns,((t,n)=>t.setRowGroupActive(n,e)),(e=>e.rowGroupIndex),(e=>e.initialRowGroupIndex),(e=>e.rowGroup),(e=>e.initialRowGroup))}extractColumns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;const a=[],l=[];(this.primaryColumns||[]).forEach((n=>{const c=e.indexOf(n)<0,u=n.getColDef(),d=ZT(s(u)),h=ZT(o(u)),p=QT(i(u)),g=QT(r(u));let f;if(f=void 0!==d?d:void 0!==p?null!==p&&p>=0:c?void 0!==h?h:!!(void 0!==g)&&(null!=g&&g>=0):t.indexOf(n)>=0,f){(c?null!=p||null!=g:null!=p)?a.push(n):l.push(n)}}));const c=e=>{const t=i(e.getColDef()),n=r(e.getColDef());return null!=t?t:n};a.sort(((e,t)=>{const n=c(e),i=c(t);return n===i?0:n<i?-1:1}));const u=[].concat(a);return t.forEach((e=>{l.indexOf(e)>=0&&u.push(e)})),l.forEach((e=>{u.indexOf(e)<0&&u.push(e)})),t.forEach((e=>{u.indexOf(e)<0&&n(e,!1)})),u.forEach((e=>{t.indexOf(e)<0&&n(e,!0)})),u}extractPivotColumns(e,t){this.pivotColumns=this.extractColumns(t,this.pivotColumns,((t,n)=>t.setPivotActive(n,e)),(e=>e.pivotIndex),(e=>e.initialPivotIndex),(e=>e.pivot),(e=>e.initialPivot))}resetColumnGroupState(e){if(!this.primaryColumnTree)return;const t=[];IR(null,this.primaryColumnTree,(e=>{if(e instanceof Q_){const n=e.getColGroupDef(),i={groupId:e.getGroupId(),open:n?n.openByDefault:void 0};t.push(i)}})),this.setColumnGroupState(t,e)}getColumnGroupState(){const e=[];return IR(null,this.gridBalancedTree,(t=>{t instanceof Q_&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})})),e}setColumnGroupState(e,t){if(!this.gridBalancedTree)return;this.columnAnimationService.start();const n=[];if(e.forEach((e=>{const t=e.groupId,i=e.open,r=this.getProvidedColumnGroup(t);r&&r.isExpanded()!==i&&(this.logger.log("columnGroupOpened("+r.getGroupId()+","+i+")"),r.setExpanded(i),n.push(r))})),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t),n.length){const e={type:OR.EVENT_COLUMN_GROUP_OPENED,columnGroup:1===Q_.length?n[0]:void 0,columnGroups:n};this.eventService.dispatchEvent(e)}this.columnAnimationService.finish()}setColumnGroupOpened(e,t,n){let i;i=e instanceof Q_?e.getId():e||"",this.setColumnGroupState([{groupId:i,open:t}],n)}getProvidedColumnGroup(e){"string"!==typeof e&&console.error("AG Grid: group key must be a string");let t=null;return IR(null,this.gridBalancedTree,(n=>{n instanceof Q_&&n.getId()===e&&(t=n)})),t}calculateColumnsForDisplay(){let e;return e=this.pivotMode&&qT(this.secondaryColumns)?this.gridColumns.filter((e=>{const t=this.groupAutoColumns&&pR(this.groupAutoColumns,e),n=this.valueColumns&&pR(this.valueColumns,e);return t||n})):this.gridColumns.filter((e=>this.groupAutoColumns&&pR(this.groupAutoColumns,e)||e.isVisible())),e}checkColSpanActiveInCols(e){let t=!1;return e.forEach((e=>{YT(e.getColDef().colSpan)&&(t=!0)})),t}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};this.gridColumns.forEach((e=>{const t=e.getColDef(),n=t.showRowGroup;t&&YT(n)&&(this.groupDisplayColumns.push(e),"string"===typeof n?this.groupDisplayColumnsMap[n]=e:!0===n&&this.getRowGroupColumns().forEach((t=>{this.groupDisplayColumnsMap[t.getId()]=e})))}))}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(e){return this.groupDisplayColumnsMap[e]}updateDisplayedColumns(e){const t=this.calculateColumnsForDisplay();this.buildDisplayedTrees(t),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)}isSecondaryColumnsPresent(){return YT(this.secondaryColumns)}setSecondaryColumns(e,t){if(!this.gridColumns)return;const n=e;if(n||!qT(this.secondaryColumns)){if(n){this.processSecondaryColumnDefinitions(e);const n=this.columnFactory.createColumnTree(e,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0,t);this.destroyOldColumns(this.secondaryBalancedTree,n.columnTree),this.secondaryBalancedTree=n.columnTree,this.secondaryHeaderRowCount=n.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach((e=>this.secondaryColumnsMap[e.getId()]=e)),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(t)}}processSecondaryColumnDefinitions(e){const t=this.gos.get("processPivotResultColDef"),n=this.gos.get("processPivotResultColGroupDef");if(!t&&!n)return;const i=e=>{e.forEach((e=>{if(YT(e.children)){const t=e;n&&n(t),i(t.children)}else{t&&t(e)}}))};e&&i(e)}updateGridColumns(){const e=this.gridBalancedTree;this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns;if(this.createGroupAutoColumnsIfNeeded()){const e=XR(this.groupAutoColumns.map((e=>[e,!0])));this.lastPrimaryOrder&&(this.lastPrimaryOrder=this.lastPrimaryOrder.filter((t=>!e.has(t))),this.lastPrimaryOrder=[...this.groupAutoColumns,...this.lastPrimaryOrder]),this.lastSecondaryOrder&&(this.lastSecondaryOrder=this.lastSecondaryOrder.filter((t=>!e.has(t))),this.lastSecondaryOrder=[...this.groupAutoColumns,...this.lastSecondaryOrder])}let t;if(this.secondaryColumns&&this.secondaryBalancedTree){const e=this.secondaryColumns.some((e=>void 0!==this.gridColumnsMap[e.getColId()]));this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,e&&(t=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,t=this.lastPrimaryOrder);if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(t),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach((e=>this.gridColumnsMap[e.getId()]=e)),this.setAutoHeightActive(),!nR(e,this.gridBalancedTree)){const e={type:OR.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(e)}}setAutoHeightActive(){if(this.autoHeightActive=this.gridColumns.filter((e=>e.isAutoHeight())).length>0,this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;this.gos.isRowModelType("clientSide")||this.gos.isRowModelType("serverSide")||f_("autoHeight columns only work with Client Side Row Model and Server Side Row Model.")}}orderGridColsLike(e){if(qT(e))return;const t=XR(e.map(((e,t)=>[e,t])));let n=!0;if(this.gridColumns.forEach((e=>{t.has(e)&&(n=!1)})),n)return;const i=XR(this.gridColumns.map((e=>[e,!0]))),r=e.filter((e=>i.has(e))),s=XR(r.map((e=>[e,!0]))),o=this.gridColumns.filter((e=>!s.has(e))),a=r.slice();o.forEach((e=>{let t=e.getOriginalParent();if(!t)return void a.push(e);const n=[];for(;!n.length&&t;){t.getLeafColumns().forEach((e=>{const t=a.indexOf(e)>=0,i=n.indexOf(e)<0;t&&i&&n.push(e)})),t=t.getOriginalParent()}if(!n.length)return void a.push(e);const i=n.map((e=>a.indexOf(e))),r=Math.max(...i);uR(a,e,r+1)})),this.gridColumns=a}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var e;let t=null!=(e=this.isPivotMode()&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.secondaryColumns:this.primaryColumns)?e:[];this.groupAutoColumns&&(t=t.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?t:t.filter((e=>e.isVisible()||e.isRowGroupActive()))}placeLockedColumns(e){const t=[],n=[],i=[];return e.forEach((e=>{const r=e.getColDef().lockPosition;"right"===r?i.push(e):"left"===r||!0===r?t.push(e):n.push(e)})),[...t,...n,...i]}addAutoGroupToGridColumns(){if(qT(this.groupAutoColumns))return this.destroyOldColumns(this.groupAutoColsBalancedTree),void(this.groupAutoColsBalancedTree=null);this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;const e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,e),this.groupAutoColsBalancedTree=e,this.gridBalancedTree=e.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.ariaOrderColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();const t={type:OR.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(t)}deriveDisplayedColumns(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinColumnsAriaOrder(),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter((e=>e.isAutoHeight()))}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinColumnsAriaOrder(){const e=this.getAllGridColumns(),t=[],n=[],i=[];for(const r of e){const e=r.getPinned();e?!0===e||"left"===e?t.push(r):i.push(r):n.push(r)}this.ariaOrderColumns=t.concat(n).concat(i)}joinDisplayedColumns(){this.gos.get("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(e){if(!this.primaryColumns)return;const t=this.getPrimaryAndSecondaryAndAutoColumns().slice(0),n=this.gos.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach((i=>{if(n){let t=this.getWidthOfColsInList(i);i.forEach((n=>{t-=n.getActualWidth(),n.setLeft(t,e)}))}else{let t=0;i.forEach((n=>{n.setLeft(t,e),t+=n.getActualWidth()}))}lR(t,i)})),t.forEach((t=>{t.setLeft(null,e)}))}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach((e=>{e.forEach((e=>{if(e instanceof kR){e.checkLeft()}}))}))}derivedDisplayedColumnsFromDisplayedTree(e,t){t.length=0,eD(e,!0,(e=>{e instanceof K_&&t.push(e)}))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}extractViewportColumns(){this.isColumnVirtualisationSuppressed()?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(e,t){let n;switch(e){case"left":n=this.viewportRowLeft[t];break;case"right":n=this.viewportRowRight[t];break;default:n=this.viewportRowCenter[t]}return qT(n)&&(n=[]),n}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};const e={};this.headerViewportColumns.forEach((t=>e[t.getId()]=!0));const t=(n,i,r)=>{let s=!1;for(let o=0;o<n.length;o++){const a=n[o];let l=!1;if(a instanceof K_)l=!0===e[a.getId()];else{const e=a.getDisplayedChildren();e&&(l=t(e,i,r+1))}l&&(s=!0,i[r]||(i[r]=[]),i[r].push(a))}return s};t(this.displayedTreeLeft,this.viewportRowLeft,0),t(this.displayedTreeRight,this.viewportRowRight,0),t(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){this.extractViewportColumns();const e=this.viewportColumns.map((e=>"".concat(e.getId(),"-").concat(e.getPinned()||"normal"))).join("#"),t=this.viewportColumnsHash!==e;return t&&(this.viewportColumnsHash=e,this.calculateHeaderRows()),t}refreshFlexedColumns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;const n=e.source?e.source:"flex";if(null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let i=-1;if(e.resizingCols){const t=new Set(e.resizingCols);let n=this.displayedColumnsCenter;for(let e=n.length-1;e>=0;e--)if(t.has(n[e])){i=e;break}}let r=0,s=[],o=0,a=0;for(let h=0;h<this.displayedColumnsCenter.length;h++){this.displayedColumnsCenter[h].getFlex()&&h>i?(s.push(this.displayedColumnsCenter[h]),a+=this.displayedColumnsCenter[h].getFlex(),o+=null!=(t=this.displayedColumnsCenter[h].getMinWidth())?t:0):r+=this.displayedColumnsCenter[h].getActualWidth()}if(!s.length)return[];let l=[];r+o>this.flexViewportWidth&&(s.forEach((e=>{var t;return e.setActualWidth(null!=(t=e.getMinWidth())?t:0,n)})),l=s,s=[]);const c=[];let u;e:for(;;){u=this.flexViewportWidth-r;const e=u/a;for(let t=0;t<s.length;t++){const i=s[t],o=e*i.getFlex();let u=0;const d=i.getMinWidth(),h=i.getMaxWidth();if(YT(d)&&o<d?u=d:YT(h)&&o>h&&(u=h),u){i.setActualWidth(u,n),oR(s,i),a-=i.getFlex(),l.push(i),r+=i.getActualWidth();continue e}c[t]=Math.round(o)}break}let d=u;return s.forEach(((e,t)=>{e.setActualWidth(Math.min(c[t],d),n),l.push(e),d-=c[t]})),e.skipSetLeft||this.setLeftValues(n),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.dispatchColumnResizedEvent(l,!0,n,s),s}sizeColumnsToFit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sizeColumnsToFit",n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;var r,s,o,a,l;if(this.shouldQueueResizeOperations)return void this.resizeOperationQueue.push((()=>this.sizeColumnsToFit(e,t,n,i)));const c={};i&&(null==(r=null==i?void 0:i.columnLimits)||r.forEach((e=>{var t=e,{key:n}=t,i=((e,t)=>{var n={};for(var i in e)LT.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&OT)for(var i of OT(e))t.indexOf(i)<0&&FT.call(e,i)&&(n[i]=e[i]);return n})(t,["key"]);c["string"===typeof n?n:n.getColId()]=i})));const u=this.getAllDisplayedColumns(),d=e===this.getWidthOfColsInList(u);if(e<=0||!u.length||d)return;const h=[],p=[];u.forEach((e=>{!0===e.getColDef().suppressSizeToFit?p.push(e):h.push(e)}));const g=h.slice(0);let f=!1;const m=e=>{aR(h,e),p.push(e)};for(h.forEach((e=>{var n,r;e.resetActualWidth(t);const s=null==c?void 0:c[e.getId()],o=null!=(n=null==s?void 0:s.minWidth)?n:null==i?void 0:i.defaultMinWidth,a=null!=(r=null==s?void 0:s.maxWidth)?r:null==i?void 0:i.defaultMaxWidth,l=e.getActualWidth();"number"===typeof o&&l<o?e.setActualWidth(o,t,!0):"number"===typeof a&&l>a&&e.setActualWidth(a,t,!0)}));!f;){f=!0;const n=e-this.getWidthOfColsInList(p);if(n<=0)h.forEach((e=>{var n,r;const s=null!=(r=null==(n=null==c?void 0:c[e.getId()])?void 0:n.minWidth)?r:null==i?void 0:i.defaultMinWidth;"number"!==typeof s?e.setMinimum(t):e.setActualWidth(s,t,!0)}));else{const e=n/this.getWidthOfColsInList(h);let r=n;for(let n=h.length-1;n>=0;n--){const u=h[n],d=null==c?void 0:c[u.getId()],p=null!=(s=null==d?void 0:d.minWidth)?s:null==i?void 0:i.defaultMinWidth,g=null!=(o=null==d?void 0:d.maxWidth)?o:null==i?void 0:i.defaultMaxWidth,v=null!=(a=u.getMinWidth())?a:0,y=null!=(l=u.getMaxWidth())?l:Number.MAX_VALUE,C="number"===typeof p&&p>v?p:u.getMinWidth(),w="number"===typeof g&&g<y?g:u.getMaxWidth();let b=Math.round(u.getActualWidth()*e);YT(C)&&b<C?(b=C,m(u),f=!1):YT(w)&&b>w?(b=w,m(u),f=!1):0===n&&(b=r),u.setActualWidth(b,t,!0),r-=b}}}g.forEach((e=>{e.fireColumnWidthChangedEvent(t)})),this.setLeftValues(t),this.updateBodyWidths(),n||this.dispatchColumnResizedEvent(g,!0,t)}buildDisplayedTrees(e){const t=[],n=[],i=[];e.forEach((e=>{switch(e.getPinned()){case"left":t.push(e);break;case"right":n.push(e);break;default:i.push(e)}}));const r=new FR;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(t,r,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(n,r,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(i,r,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};const e=e=>{this.displayedColumnsAndGroupsMap[e.getUniqueId()]=e};eD(this.displayedTreeCentre,!1,e),eD(this.displayedTreeLeft,!1,e),eD(this.displayedTreeRight,!1,e)}isDisplayed(e){return this.displayedColumnsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){eD(this.getAllDisplayedTrees(),!1,(e=>{e instanceof kR&&e.calculateDisplayedColumns()}))}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){const e=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;const t=this.gos.isGroupUseEntireRow(this.pivotMode),n=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.gos.get("treeData"))&&!n&&!t){const t=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(t,this.groupAutoColumns)||e)return this.groupAutoColumns=t,!0}else this.groupAutoColumns=null;return!1}isGroupSuppressAutoColumn(){if("custom"===this.gos.get("groupDisplayType"))return!0;return"custom"===this.gos.get("treeDataDisplayType")}autoColsEqual(e,t){return nR(e,t,((e,t)=>e.getColId()===t.getColId()))}getWidthOfColsInList(e){return e.reduce(((e,t)=>e+t.getActualWidth()),0)}getFirstDisplayedColumn(){const e=this.gos.get("enableRtl"),t=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&t.reverse();for(let n=0;n<t.length;n++){const i=this[t[n]]();if(i.length)return e?tR(i):i[0]}return null}setColumnHeaderHeight(e,t){if(e.setAutoHeaderHeight(t)){const t={type:OR.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(t)}}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.getAllDisplayedColumns().filter((e=>e.isAutoHeaderHeight())).map((e=>e.getAutoHeaderHeight()||0));return Math.max(e,...t)}getHeaderHeight(){var e;return null!=(e=this.gos.get("headerHeight"))?e:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var e;return null!=(e=this.gos.get("floatingFiltersHeight"))?e:this.getHeaderHeight()}getGroupHeaderHeight(){var e;return null!=(e=this.gos.get("groupHeaderHeight"))?e:this.getHeaderHeight()}getPivotHeaderHeight(){var e;return null!=(e=this.gos.get("pivotHeaderHeight"))?e:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var e;return null!=(e=this.gos.get("pivotGroupHeaderHeight"))?e:this.getGroupHeaderHeight()}queueResizeOperations(){this.shouldQueueResizeOperations=!0}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach((e=>e())),this.resizeOperationQueue=[]}resetColumnDefIntoColumn(e,t){const n=e.getUserProvidedColDef();if(!n)return!1;const i=this.columnFactory.addColumnDefaultAndTypes(n,e.getColId());return e.setColDef(i,n,t),!0}isColumnGroupingLocked(e){const t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||0===t)return!1;if(-1===t)return!0;return t>this.rowGroupColumns.findIndex((t=>t.getColId()===e.getColId()))}generateColumnStateForRowGroupAndPivotIndexes(e,t){let n={};const i=(e,t,i,r,s,o)=>{if(!t.length||!this.primaryColumns)return[];const a=Object.keys(e),l=new Set(a),c=new Set(a),u=new Set(t.map((e=>{const t=e.getColId();return c.delete(t),t})).concat(a)),d=[],h={};let p=0;for(let n=0;n<this.primaryColumns.length;n++){const e=this.primaryColumns[n].getColId();u.has(e)&&(d.push(e),h[e]=p++)}let g=1e3,f=!1,m=0;const v=t=>{const n=h[t];for(let i=m;i<n;i++){const t=d[i];c.has(t)&&(e[t][s]=g++,c.delete(t))}m=n};t.forEach((t=>{const a=t.getColId();if(l.has(a))v(a),e[a][s]=g++;else{const l=t.getColDef();if(null===l[s]||void 0===l[s]&&null==l[o]){if(!f){l[i]||void 0===l[i]&&l[r]?v(a):(c.forEach((t=>{e[t][s]=g+h[t]})),g+=d.length,f=!0)}n[a]||(n[a]={colId:a}),n[a][s]=g++}}}))};return i(e,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),i(t,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(n)}onColumnsReady(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout((()=>{if("fitGridWidth"===t){const{columnLimits:t,defaultMinWidth:n,defaultMaxWidth:i}=e,r=null==t?void 0:t.map((e=>{let{colId:t,minWidth:n,maxWidth:i}=e;return{key:t,minWidth:n,maxWidth:i}}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:n,defaultMaxWidth:i,columnLimits:r})}else"fitProvidedWidth"===t&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")}))}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if("fitCellContents"!==(null==e?void 0:e.type))return;const{colIds:t,skipHeader:n}=e;setTimeout((()=>{t?this.autoSizeColumns({columns:t,skipHeader:n,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",n)}))}};function JR(e){return"gridOptionsUpdated"===e?"gridOptionsChanged":e}function eD(e,t,n){if(e)for(let i=0;i<e.length;i++){const r=e[i];if(r instanceof kR){eD(t?r.getDisplayedChildren():r.getChildren(),t,n)}n(r)}}WT([F_("expressionService")],$R.prototype,"expressionService",2),WT([F_("columnFactory")],$R.prototype,"columnFactory",2),WT([F_("displayedGroupCreator")],$R.prototype,"displayedGroupCreator",2),WT([F_("ctrlsService")],$R.prototype,"ctrlsService",2),WT([F_("autoWidthCalculator")],$R.prototype,"autoWidthCalculator",2),WT([F_("columnAnimationService")],$R.prototype,"columnAnimationService",2),WT([F_("autoGroupColService")],$R.prototype,"autoGroupColService",2),WT([F_("valueCache")],$R.prototype,"valueCache",2),WT([F_("animationFrameService")],$R.prototype,"animationFrameService",2),WT([F_("sortController")],$R.prototype,"sortController",2),WT([F_("columnDefFactory")],$R.prototype,"columnDefFactory",2),WT([B_("aggFuncService")],$R.prototype,"aggFuncService",2),WT([k_],$R.prototype,"init",1),WT([O_],$R.prototype,"destroyColumns",1),WT([jT(0,G_("loggerFactory"))],$R.prototype,"setBeans",1),$R=WT([L_("columnModel")],$R);var tD=class extends MR{createDisplayedGroups(e,t,n,i){const r=this.mapOldGroupsById(i),s=[];let o=e;for(;o.length;){const e=o;o=[];let i=0;const a=a=>{const l=i;i=a;const c=e[l],u=(c instanceof kR?c.getProvidedColumnGroup():c).getOriginalParent();if(null==u){for(let t=l;t<a;t++)s.push(e[t]);return}const d=this.createColumnGroup(u,t,r,n);for(let t=l;t<a;t++)d.addChild(e[t]);o.push(d)};for(let t=1;t<e.length;t++){const n=e[t],r=(n instanceof kR?n.getProvidedColumnGroup():n).getOriginalParent(),s=e[i];r!==(s instanceof kR?s.getProvidedColumnGroup():s).getOriginalParent()&&a(t)}i<e.length&&a(e.length)}return this.setupParentsIntoColumns(s,null),s}createColumnGroup(e,t,n,i){const r=e.getGroupId(),s=t.getInstanceIdForKey(r);let o=n[kR.createUniqueId(r,s)];return o&&o.getProvidedColumnGroup()!==e&&(o=null),YT(o)?o.reset():(o=new kR(e,r,s,i),this.context.createBean(o)),o}mapOldGroupsById(e){const t={},n=e=>{e.forEach((e=>{if(e instanceof kR){const i=e;t[e.getUniqueId()]=i,n(i.getChildren())}}))};return e&&n(e),t}setupParentsIntoColumns(e,t){e.forEach((e=>{if(e.setParent(t),e instanceof kR){const t=e;this.setupParentsIntoColumns(t.getChildren(),t)}}))}};tD=WT([L_("displayedGroupCreator")],tD);var nD={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},iD=class{};iD.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"],iD.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"],iD.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],iD.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"],iD.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval"],iD.OTHER_PROPERTIES=["suppressStickyTotalRow"],iD.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"],iD.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"],iD.FUNCTION_PROPERTIES=[...iD.FUNCTIONAL_PROPERTIES,...iD.CALLBACK_PROPERTIES],iD.ALL_PROPERTIES=[...iD.ARRAY_PROPERTIES,...iD.OBJECT_PROPERTIES,...iD.STRING_PROPERTIES,...iD.NUMBER_PROPERTIES,...iD.FUNCTION_PROPERTIES,...iD.BOOLEAN_PROPERTIES,...iD.OTHER_PROPERTIES];var rD=iD,sD=class e{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}static getGridOptionKeys(){return this.ALL_PROPERTIES_AND_CALLBACKS}static combineAttributesAndGridOptions(t,n){"object"!==typeof t&&(t={});const i=VT({},t);return e.getGridOptionKeys().forEach((t=>{const r=n[t];"undefined"!==typeof r&&r!==e.VUE_OMITTED_PROPERTY&&(i[t]=r)})),i}static processOnChange(t,n,i){if(!t)return;const r={};let s=!1;if(Object.keys(t).filter((t=>e.ALL_PROPERTIES_AND_CALLBACKS_SET.has(t))).forEach((e=>{r[e]=t[e],s=!0})),!s)return;n.__internalUpdateGridOptions(r,!0);const o={type:OR.EVENT_COMPONENT_STATE_CHANGED};r_(r,((e,t)=>{o[e]=t})),n.dispatchEvent(o)}};sD.EVENTS=t_(OR),sD.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY",sD.EXCLUDED_INTERNAL_EVENTS=[OR.EVENT_SCROLLBAR_WIDTH_CHANGED,OR.EVENT_CHECKBOX_CHANGED,OR.EVENT_HEIGHT_SCALE_CHANGED,OR.EVENT_BODY_HEIGHT_CHANGED,OR.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,OR.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,OR.EVENT_SCROLL_VISIBILITY_CHANGED,OR.EVENT_COLUMN_HOVER_CHANGED,OR.EVENT_FLASH_CELLS,OR.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,OR.EVENT_DISPLAYED_ROWS_CHANGED,OR.EVENT_LEFT_PINNED_WIDTH_CHANGED,OR.EVENT_RIGHT_PINNED_WIDTH_CHANGED,OR.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,OR.EVENT_STORE_UPDATED,OR.EVENT_COLUMN_PANEL_ITEM_DRAG_START,OR.EVENT_COLUMN_PANEL_ITEM_DRAG_END,OR.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,OR.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,OR.EVENT_FULL_WIDTH_ROW_FOCUSED,OR.EVENT_HEADER_HEIGHT_CHANGED,OR.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,OR.EVENT_CELL_FOCUS_CLEARED,OR.EVENT_GRID_STYLES_CHANGED,OR.EVENT_FILTER_DESTROYED,OR.EVENT_ROW_DATA_UPDATE_STARTED,OR.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,OR.EVENT_DATA_TYPES_INFERRED,OR.EVENT_FIELD_VALUE_CHANGED,OR.EVENT_FIELD_PICKER_VALUE_SELECTED,OR.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,OR.EVENT_SUPPRESS_MENU_HIDE_CHANGED,OR.EVENT_SUPPRESS_FIELD_DOT_NOTATION,OR.EVENT_ROW_COUNT_READY,OR.EVENT_SIDE_BAR_UPDATED],sD.PUBLIC_EVENTS=sD.EVENTS.filter((e=>!pR(sD.EXCLUDED_INTERNAL_EVENTS,e))),sD.EVENT_CALLBACKS=sD.EVENTS.map((e=>sD.getCallbackForEvent(e))),sD.BOOLEAN_PROPERTIES=rD.BOOLEAN_PROPERTIES,sD.ALL_PROPERTIES=rD.ALL_PROPERTIES,sD.ALL_PROPERTIES_AND_CALLBACKS=[...sD.ALL_PROPERTIES,...sD.EVENT_CALLBACKS],sD.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(sD.ALL_PROPERTIES_AND_CALLBACKS);var oD=sD,aD=class extends MR{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(e){e&&e.forEach((e=>this.addComponent(e)))}addComponent(e){const t=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[t]=e.componentClass}getComponentClass(e){return this.componentsMappedByName[e]}};aD=WT([L_("agStackComponentsRegistry")],aD);var lD={};function cD(e,t,n){null==n||"string"===typeof n&&""==n?dD(e,t):uD(e,t,n)}function uD(e,t,n){e.setAttribute(hD(t),n.toString())}function dD(e,t){e.removeAttribute(hD(t))}function hD(e){return"aria-".concat(e)}function pD(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function gD(e){let t;return t="asc"===e?"ascending":"desc"===e?"descending":"mixed"===e?"other":"none",t}function fD(e){return parseInt(e.getAttribute("aria-level"),10)}function mD(e){return parseInt(e.getAttribute("aria-posinset"),10)}function vD(e){return e.getAttribute("aria-label")}function yD(e,t){cD(e,"label",t)}function CD(e,t){cD(e,"labelledby",t)}function wD(e,t){cD(e,"describedby",t)}function bD(e,t){cD(e,"live",t)}function SD(e,t){cD(e,"atomic",t)}function ED(e,t){cD(e,"relevant",t)}function xD(e,t){cD(e,"level",t)}function AD(e,t){cD(e,"disabled",t)}function TD(e,t){cD(e,"hidden",t)}function _D(e,t){cD(e,"activedescendant",t)}function RD(e,t){uD(e,"expanded",t)}function DD(e){dD(e,"expanded")}function MD(e,t){uD(e,"setsize",t)}function PD(e,t){uD(e,"posinset",t)}function ID(e,t){uD(e,"multiselectable",t)}function ND(e,t){uD(e,"rowcount",t)}function kD(e,t){uD(e,"rowindex",t)}function OD(e,t){uD(e,"colcount",t)}function LD(e,t){uD(e,"colindex",t)}function FD(e,t){uD(e,"colspan",t)}function BD(e,t){uD(e,"sort",t)}function VD(e){dD(e,"sort")}function GD(e,t){cD(e,"selected",t)}function HD(e,t){uD(e,"checked",void 0===t?"mixed":t)}function WD(e,t){cD(e,"controls",t.id),CD(t,e.id)}function jD(e,t){return void 0===t?e("ariaIndeterminate","indeterminate"):!0===t?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}HT(lD,{getAriaCheckboxStateName:()=>jD,getAriaLabel:()=>vD,getAriaLevel:()=>fD,getAriaPosInSet:()=>mD,getAriaSortState:()=>gD,removeAriaExpanded:()=>DD,removeAriaSort:()=>VD,setAriaActiveDescendant:()=>_D,setAriaAtomic:()=>SD,setAriaChecked:()=>HD,setAriaColCount:()=>OD,setAriaColIndex:()=>LD,setAriaColSpan:()=>FD,setAriaControls:()=>WD,setAriaDescribedBy:()=>wD,setAriaDisabled:()=>AD,setAriaExpanded:()=>RD,setAriaHidden:()=>TD,setAriaLabel:()=>yD,setAriaLabelledBy:()=>CD,setAriaLevel:()=>xD,setAriaLive:()=>bD,setAriaMultiSelectable:()=>ID,setAriaPosInSet:()=>PD,setAriaRelevant:()=>ED,setAriaRole:()=>pD,setAriaRowCount:()=>ND,setAriaRowIndex:()=>kD,setAriaSelected:()=>GD,setAriaSetSize:()=>MD,setAriaSort:()=>BD});var UD,zD,YD,qD,KD,XD,QD,ZD,$D={};function JD(){return void 0===UD&&(UD=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),UD}function eM(){if(void 0===zD)if(JD()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(zD=null!=e[1]?parseFloat(e[1]):0)}else zD=0;return zD}function tM(){if(void 0===YD){const e=window;YD=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return YD}function nM(){return void 0===qD&&(qD=/(firefox)/i.test(navigator.userAgent)),qD}function iM(){return void 0===KD&&(KD=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),KD}function rM(){return void 0===XD&&(XD=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),XD}function sM(){return!JD()||eM()>=15}function oM(e){if(!e)return null;const t=e.tabIndex,n=e.getAttribute("tabIndex");return-1!==t||null!==n&&(""!==n||nM())?t.toString():null}function aM(){if(!document.body)return-1;let e=1e6;const t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){const i=2*e;if(n.style.height=i+"px",i>t||n.clientHeight!==i)break;e=i}return document.body.removeChild(n),e}function lM(){var e,t,n;return null!=(n=null==(e=document.body)?void 0:e.clientWidth)?n:window.innerHeight||(null==(t=document.documentElement)?void 0:t.clientWidth)||-1}function cM(){var e,t,n;return null!=(n=null==(e=document.body)?void 0:e.clientHeight)?n:window.innerHeight||(null==(t=document.documentElement)?void 0:t.clientHeight)||-1}function uM(){return null==ZD&&dM(),ZD}function dM(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;0===n&&0===t.clientWidth&&(n=null),t.parentNode&&t.parentNode.removeChild(t),null!=n&&(ZD=n,QD=0===n)}function hM(){return null==QD&&dM(),QD}HT($D,{browserSupportsPreventScroll:()=>sM,getBodyHeight:()=>cM,getBodyWidth:()=>lM,getMaxDivHeight:()=>aM,getSafariVersion:()=>eM,getScrollbarWidth:()=>uM,getTabIndex:()=>oM,isBrowserChrome:()=>tM,isBrowserFirefox:()=>nM,isBrowserSafari:()=>JD,isIOSUserAgent:()=>rM,isInvisibleScrollbar:()=>hM,isMacOsUserAgent:()=>iM});var pM={};HT(pM,{dateToFormattedString:()=>xM,parseDateTimeFromString:()=>AM,serialiseDate:()=>SM});var gM={};function fM(e,t){return e.toString().padStart(t,"0")}function mM(e,t){const n=[];for(let i=e;i<=t;i++)n.push(i);return n}function vM(e){return"string"===typeof e&&(e=parseInt(e,10)),"number"===typeof e?Math.floor(e):null}function yM(e,t){let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(255&e),e>>>=8;return n}function CM(e,t,n){return"number"!==typeof e?"":wM(Math.round(100*e)/100,t,n)}function wM(e,t,n){return"number"!==typeof e?"":e.toString().replace(".",n).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1".concat(t))}function bM(e){return null==e?null:e.reduce(((e,t)=>e+t),0)}function SM(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map((e=>fM(e,2))).join(n);return t&&(i+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map((e=>fM(e,2))).join(":")),i}HT(gM,{cleanNumber:()=>vM,createArrayOfNumbers:()=>mM,decToHex:()=>yM,formatNumberCommas:()=>wM,formatNumberTwoDecimalPlacesAndCommas:()=>CM,padStartWidthZeros:()=>fM,sum:()=>bM});var EM=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function xM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";const n=fM(e.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>"".concat(e.getFullYear()),MMMM:()=>i[e.getMonth()],MMM:()=>i[e.getMonth()].slice(0,3),MM:()=>fM(e.getMonth()+1,2),Mo:()=>"".concat(e.getMonth()+1).concat(EM(e.getMonth()+1)),M:()=>"".concat(e.getMonth()+1),Do:()=>"".concat(e.getDate()).concat(EM(e.getDate())),DD:()=>fM(e.getDate(),2),D:()=>"".concat(e.getDate()),dddd:()=>r[e.getDay()],ddd:()=>r[e.getDay()].slice(0,3),dd:()=>r[e.getDay()].slice(0,2),do:()=>"".concat(e.getDay()).concat(EM(e.getDay())),d:()=>"".concat(e.getDay())},o=new RegExp(Object.keys(s).join("|"),"g");return t.replace(o,(e=>e in s?s[e]():e))}function AM(e){if(!e)return null;const[t,n]=e.split(" ");if(!t)return null;const i=t.split("-").map((e=>parseInt(e,10)));if(3!==i.filter((e=>!isNaN(e))).length)return null;const[r,s,o]=i,a=new Date(r,s-1,o);if(a.getFullYear()!==r||a.getMonth()!==s-1||a.getDate()!==o)return null;if(!n||"00:00:00"===n)return a;const[l,c,u]=n.split(":").map((e=>parseInt(e,10)));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),u>=0&&u<60&&a.setSeconds(u),a}var TM,_M={};function RM(e,t,n){const i=e.parentElement;let r=i&&i.firstChild;for(;r;)t&&r.classList.toggle(t,r===e),n&&r.classList.toggle(n,r!==e),r=r.nextSibling}HT(_M,{FOCUSABLE_EXCLUDE:()=>MM,FOCUSABLE_SELECTOR:()=>DM,addOrRemoveAttribute:()=>uP,addStylesToElement:()=>JM,bindCellRendererToHtmlElement:()=>hP,clearElement:()=>zM,copyNodeList:()=>lP,ensureDomOrder:()=>QM,formatSize:()=>oP,getAbsoluteHeight:()=>VM,getAbsoluteWidth:()=>GM,getElementRectWithOffset:()=>HM,getElementSize:()=>LM,getInnerHeight:()=>FM,getInnerWidth:()=>BM,getScrollLeft:()=>jM,insertWithDomOrder:()=>$M,isElementChildOfClass:()=>OM,isFocusableFormField:()=>PM,isHorizontalScrollShowing:()=>eP,isInDOM:()=>qM,isNodeOrElement:()=>aP,isRtlNegativeScroll:()=>WM,isVerticalScrollShowing:()=>tP,isVisible:()=>KM,iterateNamedNodeMap:()=>cP,loadTemplate:()=>XM,nodeListForEach:()=>dP,radioCssClass:()=>RM,removeFromParent:()=>YM,setDisabled:()=>kM,setDisplayed:()=>IM,setDomChildOrder:()=>ZM,setElementHeight:()=>rP,setElementWidth:()=>nP,setFixedHeight:()=>sP,setFixedWidth:()=>iP,setScrollLeft:()=>UM,setVisible:()=>NM});var DM="[tabindex], input, select, button, textarea, [href]",MM="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function PM(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,n=t.call(e,"input, select, button, textarea"),i=t.call(e,MM),r=KM(e);return n&&!i&&r}function IM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:i}=n;e.classList.toggle("ag-hidden",!t),i||TD(e,!t)}function NM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:i}=n;e.classList.toggle("ag-invisible",!t),i||TD(e,!t)}function kM(e,t){const n="disabled",i=t?e=>e.setAttribute(n,""):e=>e.removeAttribute(n);i(e),dP(e.querySelectorAll("input"),(e=>i(e)))}function OM(e,t,n){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,"number"==typeof n){if(++i>n)break}else if(e===n)break}return!1}function LM(e){const{height:t,width:n,borderTopWidth:i,borderRightWidth:r,borderBottomWidth:s,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:d,marginRight:h,marginBottom:p,marginLeft:g,boxSizing:f}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(n||"0"),borderTopWidth:parseFloat(i||"0"),borderRightWidth:parseFloat(r||"0"),borderBottomWidth:parseFloat(s||"0"),borderLeftWidth:parseFloat(o||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(g||"0"),boxSizing:f}}function FM(e){const t=LM(e);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom:t.height}function BM(e){const t=LM(e);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight:t.width}function VM(e){const t=LM(e),n=t.marginBottom+t.marginTop;return Math.ceil(e.offsetHeight+n)}function GM(e){const t=LM(e),n=t.marginLeft+t.marginRight;return Math.ceil(e.offsetWidth+n)}function HM(e){const t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:r,borderBottomWidth:s}=LM(e);return{top:t.top+(n||0),left:t.left+(i||0),right:t.right+(r||0),bottom:t.bottom+(s||0)}}function WM(){if("boolean"===typeof TM)return TM;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(e),e.scrollLeft=1,TM=0===Math.floor(e.scrollLeft),document.body.removeChild(e),TM}function jM(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n),tM()&&!WM()&&(n=e.scrollWidth-e.clientWidth-n)),n}function UM(e,t,n){n&&(WM()?t*=-1:(JD()||tM())&&(t=e.scrollWidth-e.clientWidth-t)),e.scrollLeft=t}function zM(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function YM(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function qM(e){return!!e.offsetParent}function KM(e){const t=e;if(t.checkVisibility)return t.checkVisibility({checkVisibilityCSS:!0});return!(!qM(e)||"visible"!==window.getComputedStyle(e).visibility)}function XM(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function QM(e,t,n){n&&n.nextSibling===t||(n?n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t))}function ZM(e,t){for(let n=0;n<t.length;n++){const i=t[n],r=e.children[n];r!==i&&e.insertBefore(i,r)}}function $M(e,t,n){n?n.insertAdjacentElement("afterend",t):e.firstChild?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)}function JM(e,t){if(t)for(const[n,i]of Object.entries(t)){if(!n||!n.length||null==i)continue;const t=qR(n),r=i.toString(),s=r.replace(/\s*!important/g,""),o=s.length!=r.length?"important":void 0;e.style.setProperty(t,s,o)}}function eP(e){return e.clientWidth<e.scrollWidth}function tP(e){return e.clientHeight<e.scrollHeight}function nP(e,t){"flex"===t?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):iP(e,t)}function iP(e,t){t=oP(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function rP(e,t){"flex"===t?(e.style.removeProperty("height"),e.style.removeProperty("minHeight"),e.style.removeProperty("maxHeight"),e.style.flex="1 1 auto"):sP(e,t)}function sP(e,t){t=oP(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function oP(e){return"number"===typeof e?"".concat(e,"px"):e}function aP(e){return e instanceof Node||e instanceof HTMLElement}function lP(e){if(null==e)return[];const t=[];return dP(e,(e=>t.push(e))),t}function cP(e,t){if(e)for(let n=0;n<e.length;n++){const i=e[n];t(i.name,i.value)}}function uP(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n.toString())}function dP(e,t){if(null!=e)for(let n=0;n<e.length;n++)t(e[n])}function hP(e,t){e.then((e=>{const n=e.getGui();null!=n&&("object"===typeof n?t.appendChild(n):t.innerHTML=n)}))}var pP={};function gP(e,t,n){const i={},r=e.filter((e=>!t.some((t=>t===e))));return r.length>0&&r.forEach((e=>i[e]=fP(e,n).values)),i}function fP(e,t,n,i){let r=t.map(((t,n)=>({value:t,relevance:mP(e.toLowerCase(),t.toLocaleLowerCase()),idx:n})));if(r.sort(((e,t)=>t.relevance-e.relevance)),n&&(r=r.filter((e=>0!==e.relevance))),r.length>0&&i&&i>0){const e=r[0].relevance*i;r=r.filter((t=>e-t.relevance<0))}const s=[],o=[];for(const a of r)s.push(a.value),o.push(a.idx);return{values:s,indices:o}}function mP(e,t){const n=e.replace(/\s/g,""),i=t.replace(/\s/g,"");let r=0,s=-1;for(let o=0;o<n.length;o++){const e=i.indexOf(n[o],s+1);-1!==e&&(s=e,r+=100-100*s/1e4*100)}return r}HT(pP,{fuzzyCheckStrings:()=>gP,fuzzySuggestions:()=>fP});var vP={};HT(vP,{createIcon:()=>CP,createIconNoSpan:()=>wP,iconNameClassMap:()=>yP});var yP={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus"};function CP(e,t,n){const i=wP(e,t,n);if(i){const{className:e}=i;if("string"===typeof e&&e.indexOf("ag-icon")>-1||"object"===typeof e&&e["ag-icon"])return i}const r=document.createElement("span");return r.appendChild(i),r}function wP(e,t,n,i){let r=null;const s=n&&n.getColDef().icons;if(s&&(r=s[e]),t&&!r){const n=t.get("icons");n&&(r=n[e])}if(!r){const t=document.createElement("span");let n=yP[e];return n||(i?n=e:(console.warn("AG Grid: Did not find icon ".concat(e)),n="")),t.setAttribute("class","ag-icon ag-icon-".concat(n)),t.setAttribute("unselectable","on"),pD(t,"presentation"),t}{let e;if("function"===typeof r)e=r();else{if("string"!==typeof r)throw new Error("icon from grid options needs to be a string or a function");e=r}if("string"===typeof e)return XM(e);if(aP(e))return e;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}}var bP={};HT(bP,{isDeleteKey:()=>NP,isEventFromPrintableCharacter:()=>DP,isUserSuppressingHeaderKeyboardEvent:()=>PP,isUserSuppressingKeyboardEvent:()=>MP,normaliseQwertyAzerty:()=>IP});var SP=class{};SP.BACKSPACE="Backspace",SP.TAB="Tab",SP.ENTER="Enter",SP.ESCAPE="Escape",SP.SPACE=" ",SP.LEFT="ArrowLeft",SP.UP="ArrowUp",SP.RIGHT="ArrowRight",SP.DOWN="ArrowDown",SP.DELETE="Delete",SP.F2="F2",SP.PAGE_UP="PageUp",SP.PAGE_DOWN="PageDown",SP.PAGE_HOME="Home",SP.PAGE_END="End",SP.A="KeyA",SP.C="KeyC",SP.D="KeyD",SP.V="KeyV",SP.X="KeyX",SP.Y="KeyY",SP.Z="KeyZ";var EP=65,xP=67,AP=86,TP=68,_P=90,RP=89;function DP(e){if(e.altKey||e.ctrlKey||e.metaKey)return!1;return 1===e.key.length}function MP(e,t,n,i,r){const s=i?i.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const o=e.addGridCommonParams({event:t,editing:r,column:i,node:n,data:n.data,colDef:i.getColDef()});if(s){if(s(o))return!0}return!1}function PP(e,t,n,i){const r=i.getDefinition(),s=r&&r.suppressHeaderKeyboardEvent;if(!YT(s))return!1;return!!s(e.addGridCommonParams({colDef:r,column:i,headerRowIndex:n,event:t}))}function IP(e){const{keyCode:t}=e;let n;switch(t){case EP:n=SP.A;break;case xP:n=SP.C;break;case AP:n=SP.V;break;case TP:n=SP.D;break;case _P:n=SP.Z;break;case RP:n=SP.Y;break;default:n=e.code}return n}function NP(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e===SP.DELETE||!t&&e===SP.BACKSPACE&&iM()}var kP={};function OP(e,t,n){if(0===n)return!1;const i=Math.abs(e.clientX-t.clientX),r=Math.abs(e.clientY-t.clientY);return Math.max(i,r)<=n}HT(kP,{areEventsNear:()=>OP});var LP={};function FP(e,t){if(!e)return!1;const n=(e,n)=>{const i=t[e.id],r=t[n.id],s=void 0!==i,o=void 0!==r;return s&&o?i-r:!s&&!o?e.__objectId-n.__objectId:s?1:-1};let i,r,s=!1;for(let o=0;o<e.length-1;o++)if(i=e[o],r=e[o+1],n(i,r)>0){s=!0;break}return!!s&&(e.sort(n),!0)}HT(LP,{sortRowNodesByOrder:()=>FP});var BP={};function VP(e){const t=new Set;return e.forEach((e=>t.add(e))),t}HT(BP,{convertToSet:()=>VP});var GP=VT(VT(VT(VT(VT(VT(VT(VT(VT(VT(VT(VT(VT(VT(VT(VT(VT(VT({},lD),J_),$D),pM),_M),$_),h_),pP),UT),vP),bP),KR),kP),gM),i_),LP),BP),GR),HP=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},WP=class e{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e((e=>this.onDone(e)),(e=>this.onReject(e)))}static all(t){return new e((e=>{let n=t.length;const i=new Array(n);t.forEach(((t,r)=>{t.then((t=>{i[r]=t,n--,0===n&&e(i)}))}))}))}static resolve(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new e((e=>e(t)))}then(t){return new e((e=>{1===this.status?e(t(this.resolution)):this.waiters.push((n=>e(t(n))))}))}resolveNow(e,t){return 1===this.status?t(this.resolution):e}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach((t=>t(e)))}onReject(e){console.warn("TBI")}},jP=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1)return void t.forEach((e=>this.addCssClass(e)));if(!0!==this.cssClassStates[e]&&e.length){const t=this.getGui();t&&t.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1)return void t.forEach((e=>this.removeCssClass(e)));if(!1!==this.cssClassStates[e]&&e.length){const t=this.getGui();t&&t.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return!!t&&t.classList.contains(e)}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const n=(e||"").split(" ");if(n.length>1)return void n.forEach((e=>this.addOrRemoveCssClass(e,t)))}if(this.cssClassStates[e]!==t&&e.length){const n=this.getGui();n&&n.classList.toggle(e,t),this.cssClassStates[e]=t}}},UP=class e extends MR{constructor(e,t,n,i){super(),this.parentComp=e,this.tooltipShowDelayOverride=t,this.tooltipHideDelayOverride=n,this.shouldDisplayTooltip=i,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.INTERACTIVE_HIDE_DELAY=100,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.parentComp.getGui();0===this.tooltipTrigger&&(this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this))),1===this.tooltipTrigger&&(this.addManagedListener(e,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(e,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)))}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return t<0&&f_("".concat(e," should not be lower than 0")),Math.max(200,t)}getTooltipDelay(e){var t,n;return"show"===e?null!=(t=this.tooltipShowDelayOverride)?t:this.getGridOptionsTooltipDelay("tooltipShowDelay"):null!=(n=this.tooltipHideDelayOverride)?n:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return e&&"hover"!==e?1:0}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),rM()||(e.isLocked?this.showTooltipTimeoutId=window.setTimeout((()=>{this.prepareToShowTooltip(t)}),this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(t))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&2===this.state&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var t;const n=e.relatedTarget,i=this.parentComp.getGui(),r=null==(t=this.tooltipComp)?void 0:t.getGui();this.isInteractingWithTooltip||i.contains(n)||this.interactionEnabled&&(null==r?void 0:r.contains(n))||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(t){if(0!=this.state||e.isLocked)return;let n=0;t&&(n=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),n),this.state=1}isLastTooltipHiddenRecently(){return(new Date).getTime()-e.lastTooltipHideTime<this.SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(){2===this.state&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const e=VT({},this.parentComp.getTooltipParams());if(!YT(e.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip())return void this.setToDoNothing();this.state=2,this.tooltipInstanceCount++;const t=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(t)}hideTooltip(t){if(!t&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),e.lastTooltipHideTime=(new Date).getTime());const n={type:OR.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(n),this.state=0}newTooltipComponentCallback(e,t){if(2!==this.state||this.tooltipInstanceCount!==e)return void this.getContext().destroyBean(t);const n=t.getGui();this.tooltipComp=t,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),0===this.tooltipTrigger&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");const i=this.localeService.getLocaleTextFunc(),r=this.popupService.addPopup({eChild:n,ariaLabel:i("ariaLabelTooltip","Tooltip")});r&&(this.tooltipPopupDestroyFunc=r.hideFunc),this.positionTooltip(),1===this.tooltipTrigger&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,OR.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,OR.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(0===this.tooltipTrigger?(this.tooltipMouseEnterListener=this.addManagedListener(n,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(n,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(n,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(n,"focusout",this.onTooltipFocusOut.bind(this))||null));const s={type:OR.EVENT_TOOLTIP_SHOW,tooltipGui:n,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(s),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(e){var t;const n=this.parentComp.getGui(),i=null==(t=this.tooltipComp)?void 0:t.getGui(),r=e.relatedTarget;(null==i?void 0:i.contains(r))||(this.isInteractingWithTooltip=!1,n.contains(r)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(GT(VT({},e),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(GT(VT({},e),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,n=0===this.tooltipTrigger?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout((()=>{e(),this.getContext().destroyBean(t)}),n),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach((e=>{e&&e()})),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){e.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout((()=>{this.unlockService(),this.setToDoNothing()}),this.INTERACTIVE_HIDE_DELAY)}unlockService(){e.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};UP.isLocked=!1,WT([F_("popupService")],UP.prototype,"popupService",2),WT([F_("userComponentFactory")],UP.prototype,"userComponentFactory",2),WT([k_],UP.prototype,"postConstruct",1);var zP=UP,YP=class extends MR{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",n=this.ctrl.getGui();n&&(null!=e&&""!=e?n.setAttribute(t,e):n.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var e,t,n,i;if(null!=this.tooltipManager)return;const r={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new zP(r,null==(t=(e=this.ctrl).getTooltipShowDelayOverride)?void 0:t.call(e),null==(i=(n=this.ctrl).getTooltipHideDelayOverride)?void 0:i.call(n),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const e=this.ctrl,t=e.getColumn?e.getColumn():void 0,n=e.getColDef?e.getColDef():void 0,i=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:n,column:t,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:i,data:i?i.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:()=>{var e;return null==(e=this.tooltipManager)?void 0:e.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}};WT([F_("beans")],YP.prototype,"beans",2),WT([k_],YP.prototype,"postConstruct",1);var qP=new HP,KP=class e extends MR{constructor(e){super(),this.displayed=!0,this.visible=!0,this.compId=qP.next(),this.cssClassManager=new jP((()=>this.eGui)),e&&this.setTemplate(e)}preConstructOnComponent(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e){const{newTooltipText:t,showDelayOverride:n,hideDelayOverride:i,location:r,shouldDisplayTooltip:s}=e||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==t&&(this.tooltipText=t);const o=()=>this.tooltipText;null!=t&&(this.tooltipFeature=this.createBean(new YP({getTooltipValue:o,getGui:()=>this.getGui(),getLocation:()=>null!=r?r:"UNKNOWN",getColDef:null==e?void 0:e.getColDef,getColumn:null==e?void 0:e.getColumn,getTooltipShowDelayOverride:null!=n?()=>n:void 0,getTooltipHideDelayOverride:null!=i?()=>i:void 0,shouldDisplayTooltip:s})))}createChildComponentsFromTags(e,t){lP(e.childNodes).forEach((n=>{if(!(n instanceof HTMLElement))return;const i=this.createComponentFromElement(n,(e=>{e.getGui()&&this.copyAttributesFromNode(n,e.getGui())}),t);if(i){if(i.addItems&&n.children.length){this.createChildComponentsFromTags(n,t);const e=Array.prototype.slice.call(n.children);i.addItems(e)}this.swapComponentForNode(i,e,n)}else n.childNodes&&this.createChildComponentsFromTags(n,t)}))}createComponentFromElement(t,n,i){const r=t.nodeName,s=i?i[t.getAttribute("ref")]:void 0,o=this.agStackComponentsRegistry.getComponentClass(r);if(o){e.elementGettingCreated=t;const i=new o(s);return i.setParentComponent(this),this.createBean(i,null,n),i}return null}copyAttributesFromNode(e,t){cP(e.attributes,((e,n)=>t.setAttribute(e,n)))}swapComponentForNode(e,t,n){const i=e.getGui();t.replaceChild(i,n),t.insertBefore(document.createComment(n.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,n)}swapInComponentForQuerySelectors(e,t){const n=this;this.iterateOverQuerySelectors((i=>{n[i.attributeName]===t&&(n[i.attributeName]=e)}))}iterateOverQuerySelectors(e){let t=Object.getPrototypeOf(this);for(;null!=t;){const n=t.__agComponentMetaData,i=v_(t.constructor);n&&n[i]&&n[i].querySelectors&&n[i].querySelectors.forEach((t=>e(t))),t=Object.getPrototypeOf(t)}}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach((e=>e.setAttribute("tabindex",t.toString())))}setTemplate(e,t){const n=XM(e);this.setTemplateFromElement(n,t)}setTemplateFromElement(e,t){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),t)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;const e=this;this.iterateOverQuerySelectors((t=>{const n=n=>e[t.attributeName]=n;if(t.refSelector&&this.getAttribute("ref")===t.refSelector)n(this.eGui);else{const e=this.eGui.querySelector(t.querySelector);e&&n(e.__agComponent||e)}}))}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}queryForHtmlInputElement(e){return this.eGui.querySelector(e)}appendChild(e,t){if(null!=e)if(t||(t=this.eGui),aP(e))t.appendChild(e);else{const n=e;t.appendChild(n.getGui())}}isDisplayed(){return this.displayed}setVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.visible){this.visible=e;const{skipAriaHidden:n}=t;NM(this.eGui,e,{skipAriaHidden:n})}}setDisplayed(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t!==this.displayed){this.displayed=t;const{skipAriaHidden:i}=n;IM(this.eGui,t,{skipAriaHidden:i});const r={type:e.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(r)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),super.destroy()}addGuiEventListener(e,t,n){this.eGui.addEventListener(e,t,n),this.addDestroyFunc((()=>this.eGui.removeEventListener(e,t)))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)}getAttribute(e){const{eGui:t}=this;return t?t.getAttribute(e):null}getRefElement(e){return this.queryForHtmlElement('[ref="'.concat(e,'"]'))}};KP.EVENT_DISPLAYED_CHANGED="displayedChanged",WT([F_("agStackComponentsRegistry")],KP.prototype,"agStackComponentsRegistry",2),WT([N_],KP.prototype,"preConstructOnComponent",1),WT([N_],KP.prototype,"createChildComponentsPreConstruct",1);var XP=KP;function QP(e){return ZP.bind(this,"[ref=".concat(e,"]"),e)}function ZP(e,t,n,i,r){null!==e?"number"!==typeof r?function(e,t,n){const i=function(e,t){e.__agComponentMetaData||(e.__agComponentMetaData={});e.__agComponentMetaData[t]||(e.__agComponentMetaData[t]={});return e.__agComponentMetaData[t]}(e,v_(e.constructor));i[t]||(i[t]=[]);i[t].push(n)}(n,"querySelectors",{attributeName:i,querySelector:e,refSelector:t}):console.error("AG Grid: QuerySelector should be on an attribute"):console.error("AG Grid: QuerySelector selector should not be null")}var $P=class extends XP{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel("".concat(t," ").concat(n("ariaFilterInput","Filter Input")))}onParentModelChanged(e){null!=e?this.params.parentFilterInstance((t=>{if(t.getModelAsString){const n=t.getModelAsString(e);this.eFloatingFilterText.setValue(n)}})):this.eFloatingFilterText.setValue("")}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}};WT([QP("eFloatingFilterText")],$P.prototype,"eFloatingFilterText",2),WT([F_("columnModel")],$P.prototype,"columnModel",2);var JP=class{constructor(e,t,n,i,r){this.alive=!0,this.context=e,this.eParent=i;t.getDateCompDetails(n).newAgStackInstance().then((t=>{this.alive?(this.dateComp=t,t&&(i.appendChild(t.getGui()),t.afterGuiAttached&&t.afterGuiAttached(),this.tempValue&&t.setDate(this.tempValue),null!=this.disabled&&this.setDateCompDisabled(this.disabled),null==r||r(this))):e.destroyBean(t)}))}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){IM(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&"function"===typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(e)}updateParams(e){var t,n;let i=!1;if((null==(t=this.dateComp)?void 0:t.refresh)&&"function"===typeof this.dateComp.refresh){null!==this.dateComp.refresh(e)&&(i=!0)}if(!i&&(null==(n=this.dateComp)?void 0:n.onParamsUpdated)&&"function"===typeof this.dateComp.onParamsUpdated){null!==this.dateComp.onParamsUpdated(e)&&f_("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}}setDateCompDisabled(e){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(e)}},eI=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach((e=>{if("string"===typeof e)return;[["displayKey"],["displayName"],["predicate","test"]].every((t=>!!t.some((t=>null!=e[t]))||(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '".concat(t,"'")),!1)))?this.customFilterOptions[e.displayKey]=e:this.filterOptions=this.filterOptions.filter((t=>t===e))||[]}))}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const e=this.filterOptions[0];"string"===typeof e?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},tI={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},nI=class e extends MR{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.eFocusableElement=e,this.callbacks=t,this.callbacks=VT({shouldStopEventPropagation:()=>!1,onTabKeyDown:e=>{if(e.defaultPrevented)return;const t=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e.shiftKey);t&&(t.focus(),e.preventDefault())}},t)}postConstruct(){this.eFocusableElement.classList.add(e.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(e){this.addManagedListener(e,"keydown",(e=>{e.defaultPrevented||SR(e)||(this.callbacks.shouldStopEventPropagation(e)?bR(e):e.key===SP.TAB?this.callbacks.onTabKeyDown(e):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(e))}))}};nI.FOCUS_MANAGED_CLASS="ag-focus-managed",WT([F_("focusService")],nI.prototype,"focusService",2),WT([k_],nI.prototype,"postConstruct",1);var iI=nI,rI="ag-resizer-wrapper",sI='<div class="'.concat(rI,'">\n        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>'),oI=class extends MR{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,n=t/2-this.getWidth()/2,i=e/2-this.getHeight()/2;this.offsetElement(n,i)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:n,width:i,minHeight:r,height:s,x:o,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0;const u=KM(this.element);if(u){const e=this.findBoundaryElement(),t=window.getComputedStyle(e);if(null!=t.minWidth){const n=e.offsetWidth-this.element.offsetWidth;c=parseInt(t.minWidth,10)-n}if(null!=t.minHeight){const n=e.offsetHeight-this.element.offsetHeight;l=parseInt(t.minHeight,10)-n}}if(this.minHeight=r||l,this.minWidth=n||c,i&&this.setWidth(i),s&&this.setHeight(s),i&&s||this.refreshSize(),e)this.center();else if(o||a)this.offsetElement(o,a);else if(u&&t){let e=this.boundaryEl,t=!0;if(e||(e=this.findBoundaryElement(),t=!1),e){const n=parseFloat(e.style.top),i=parseFloat(e.style.left);t?this.offsetElement(isNaN(i)?0:i,isNaN(n)?0:n):this.setPosition(i,n)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const n=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(n),this.moveElementDragListener=n):(this.dragService.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"===typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach((t=>{const n=!!e[t],i=this.getResizerElement(t),r={dragStartPixels:0,eElement:i,onDragStart:e=>this.onResizeStart(e,t),onDragging:this.onResize.bind(this),onDragStop:e=>this.onResizeEnd(e,t)};(n||!this.isAlive()&&!n)&&(n?(this.dragService.addDragSource(r),this.resizeListeners.push(r),i.style.pointerEvents="all"):i.style.pointerEvents="none",this.resizable[t]=n)}))}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;-1!==t&&(this.element.style.width="".concat(t,"px")),-1!==e&&(this.element.style.height="".concat(e,"px"))}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,n=this.element;let i=!1;if("string"===typeof e&&-1!==e.indexOf("%"))sP(n,e),e=VM(n),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const t=this.getAvailableHeight();t&&e>t&&(e=t)}this.getHeight()!==e&&(i?(n.style.maxHeight="unset",n.style.minHeight="unset"):t?sP(n,e):(n.style.height="".concat(e,"px"),n.style.flex="0 0 auto",this.lastSize.height="number"===typeof e?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:n}=this.offsetParent;if(!n)return null;const i=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),s=e?this.position.y:i.top,o=e?0:r.top;let a=0;if(t){const e=this.element.parentElement;if(e){const{bottom:t}=e.getBoundingClientRect();a=t-i.bottom}}return n+o-s-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:n}=this.config;let i=!1;if("string"===typeof e&&-1!==e.indexOf("%"))iP(t,e),e=GM(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:t}=this.offsetParent,i=n?this.position.x:this.element.getBoundingClientRect().left;t&&e+i>t&&(e=t-i)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?iP(t,e):(t.style.width="".concat(e,"px"),t.style.flex=" unset",this.lastSize.width="number"===typeof e?e:parseFloat(e)))}offsetElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{forcePopupParentAsOffsetParent:n}=this.config,i=n?this.boundaryEl:this.element;i&&(this.popupService.positionPopup({ePopup:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(i.style.left),parseFloat(i.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const e=this.getAvailableHeight();this.element.style.setProperty("max-height","".concat(e,"px"))};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:n,isTop:i,anywhereWithin:r,topBuffer:s}=e,o=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(t,!!n,!!r,o)?0:o,movementY:this.shouldSkipY(t,!!i,s,a)?0:a}}shouldSkipX(e,t,n,i){const r=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:r.left;let l=a<=0&&s.left>=e.clientX||s.right<=e.clientX&&s.right<=o.right;return!!l||(l=t?i<0&&e.clientX>a+s.left||i>0&&e.clientX<a+s.left:n?i<0&&e.clientX>o.right||i>0&&e.clientX<a+s.left:i<0&&e.clientX>o.right||i>0&&e.clientX<o.right,l)}shouldSkipY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const r=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:r.top;let l=a<=0&&s.top>=e.clientY||s.bottom<=e.clientY&&s.bottom<=o.bottom;return!!l||(l=t?i<0&&e.clientY>a+s.top+n||i>0&&e.clientY<a+s.top:i<0&&e.clientY>o.bottom||i>0&&e.clientY<o.bottom,l)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const t=(new DOMParser).parseFromString(sI,"text/html").body;e.appendChild(t.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(".".concat(rI));e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:n,forcePopupParentAsOffsetParent:i}=this.config;n||i||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter((e=>!e.classList.contains("ag-hidden"))):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i],s=!!r.style.flex&&"0 0 auto"!==r.style.flex;if(r===this.element)continue;let o=this.minHeight||0,a=this.minWidth||0;if(s){const e=window.getComputedStyle(r);e.minHeight&&(o=parseInt(e.minHeight,10)),e.minWidth&&(a=parseInt(e.minWidth,10))}else o=r.offsetHeight,a=r.offsetWidth;t+=o,n+=a}return{height:t,width:n}}applySizeToSiblings(e){let t=null;const n=this.getSiblings();if(n){for(let i=0;i<n.length;i++){const r=n[i];r!==t&&(e?r.style.height="".concat(r.offsetHeight,"px"):r.style.width="".concat(r.offsetWidth,"px"),r.style.flex="0 0 auto",r===this.element&&(t=n[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some((e=>e))}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:n}=this.config,{isTop:i,isRight:r,isBottom:s,isLeft:o}=this.currentResizer,a=r||o,l=s||i,{movementX:c,movementY:u}=this.calculateMouseMovement({e:e,isLeft:o,isTop:i}),d=this.position.x,h=this.position.y;let p=0,g=0;if(a&&c){const e=o?-1:1,t=this.getWidth(),n=t+c*e;let i=!1;o&&(p=t-n,(d+p<=0||n<=this.minWidth)&&(i=!0,p=0)),i||this.setWidth(n)}if(l&&u){const e=i?-1:1,t=this.getHeight(),n=t+u*e;let r=!1;i?(g=t-n,(h+g<=0||n<=this.minHeight)&&(r=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&t<n&&this.getMinSizeOfSiblings().height+n>this.element.parentElement.offsetHeight&&(r=!0),r||this.setHeight(n)}this.updateDragStartPosition(e.clientX,e.clientY),((t||n)&&p||g)&&this.offsetElement(d+p,h+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:n}=this.position;let i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());const{movementX:r,movementY:s}=this.calculateMouseMovement({e:e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+r,n+s),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}};WT([F_("popupService")],oI.prototype,"popupService",2),WT([F_("resizeObserverService")],oI.prototype,"resizeObserverService",2),WT([F_("dragService")],oI.prototype,"dragService",2);var aI=class e extends XP{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.buttonListeners=[]}postConstruct(){this.resetTemplate(),this.createManagedBean(new iI(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new oI(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const n='\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-'.concat(this.getCssIdentifier(),'-body-wrapper" ref="eFilterBody">\n                    ').concat(this.createBodyTemplate(),"\n                </div>\n            </form>");this.setTemplate(n,e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then((()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()}))}setParams(t){this.providedFilterParams=t,this.applyActive=e.isUseApplyButton(t),this.resetButtonsPanel()}updateParams(t){this.providedFilterParams=t,this.applyActive=e.isUseApplyButton(t),this.resetUiToActiveModel(this.getModel(),(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()}))}resetButtonsPanel(){const{buttons:e}=this.providedFilterParams,t=e&&e.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(zM(this.eButtonsPanel),this.buttonListeners.forEach((e=>null==e?void 0:e())),this.buttonListeners=[]):t&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!t)return void(this.eButtonsPanel&&YM(this.eButtonsPanel));const n=document.createDocumentFragment(),i=e=>{let t,i;switch(e){case"apply":t=this.translate("applyFilter"),i=e=>this.onBtApply(!1,!1,e);break;case"clear":t=this.translate("clearFilter"),i=()=>this.onBtClear();break;case"reset":t=this.translate("resetFilter"),i=()=>this.onBtReset();break;case"cancel":t=this.translate("cancelFilter"),i=e=>{this.onBtCancel(e)};break;default:return void console.warn("AG Grid: Unknown button type specified")}const r=XM('<button\n                    type="'.concat("apply"===e?"submit":"button",'"\n                    ref="').concat(e,'FilterButton"\n                    class="ag-button ag-standard-button ag-filter-apply-panel-button"\n                >').concat(t,"\n                </button>"));this.buttonListeners.push(this.addManagedListener(r,"click",i)),n.append(r)};VP(e).forEach((e=>i(e))),this.eButtonsPanel.append(n),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const t=e.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),n=x_(this.checkApplyDebounce.bind(this),t);this.onBtApplyDebounce=()=>{this.debouncePending=!0,n()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(null!=e?this.setModelIntoUi(e):this.resetUiToDefaults()).then((()=>{this.updateUiVisibility(),this.applyModel("api")}))}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),(()=>{this.handleCancelEnd(e)}))}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const n=()=>{this.onUiChanged(!1,"prevent"),null==t||t()};null!=e?this.setModelIntoUi(e).then(n):this.resetUiToDefaults().then(n)}onBtClear(){this.resetUiToDefaults().then((()=>this.onUiChanged()))}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(){const e=this.getModelFromUi();if(!this.isModelValid(e))return!1;const t=this.appliedModel;return this.appliedModel=e,!this.areModelsEqual(t,e)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(n&&n.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")){const n="columnFilter";this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:n})}const{closeOnApply:i}=this.providedFilterParams;i&&this.applyActive&&!e&&!t&&this.close(n)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,n=t&&t.key;let i;"Enter"!==n&&"Space"!==n||(i={keyboardEvent:t}),this.hidePopup(i),this.hidePopup=null}onUiChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const e=this.isModelValid(this.getModelFromUi()),t=this.getRefElement("applyFilterButton");t&&kM(t,!e)}e&&!t||"immediately"===t?this.onBtApply(e):(this.applyActive||t)&&"debounce"!==t||this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(null==e?void 0:e.container)}refreshFilterResizer(e){if(!this.positionableFeature||"toolPanel"===e)return;const t="floatingFilter"===e||"columnFilter"===e,{positionableFeature:n,gos:i}=this;t?(n.restoreLastSize(),n.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}static getDebounceMs(t,n){return e.isUseApplyButton(t)?(null!=t.debounceMs&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):null!=t.debounceMs?t.debounceMs:n}static isUseApplyButton(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}refresh(e){return this.providedFilterParams=e,!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,tI[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}};WT([F_("rowModel")],aI.prototype,"rowModel",2),WT([QP("eFilterBody")],aI.prototype,"eFilterBody",2),WT([k_],aI.prototype,"postConstruct",1);var lI=aI,cI=class extends XP{constructor(e,t){super(t),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:n,labelAlignment:i,disabled:r}=this.config;null!=r&&this.setDisabled(r),null!=e&&this.setLabelSeparator(e),null!=t&&this.setLabel(t),null!=n&&this.setLabelWidth(n),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){zM(this.eLabel),"string"===typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(IM(this.eLabel,!1),pD(this.eLabel,"presentation")):(IM(this.eLabel,!0),pD(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){return this.eLabel.id=this.eLabel.id||"ag-".concat(this.getCompId(),"-label"),this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){const t=this.getGui().classList;return t.toggle("ag-label-align-left","left"===e),t.toggle("ag-label-align-right","right"===e),t.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||nP(this.eLabel,e),this}setDisabled(e){e=!!e;const t=this.getGui();return kM(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}};WT([k_],cI.prototype,"postConstruct",1);var uI=class extends cI{constructor(e,t,n){super(e,t),this.className=n}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:n}=this.config;null!=e&&this.setWidth(e),null!=t&&this.setValue(t),null!=n&&this.onValueChange(n),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId();null!==vD(e)?CD(e,""):CD(e,null!=t?t:"")}setAriaLabel(e){return yD(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListener(this,OR.EVENT_FIELD_VALUE_CHANGED,(()=>e(this.getValue()))),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return iP(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e||(this.previousValue=this.value,this.value=e,t||this.dispatchEvent({type:OR.EVENT_FIELD_VALUE_CHANGED})),this}},dI=class extends uI{constructor(e){if(super(e,(null==e?void 0:e.template)||'\n    <div class="ag-picker-field" role="presentation">\n        <div ref="eLabel"></div>\n            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">\n            <div ref="eDisplayField" class="ag-picker-field-display"></div>\n            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n        </div>\n    </div>',null==e?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.ariaRole=null==e?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:n,variableWidth:i,minPickerWidth:r,maxPickerWidth:s}=e;null!=t&&(this.pickerGap=t),this.variableWidth=!!i,null!=n&&this.setPickerMaxHeight(n),null!=r&&this.setPickerMinWidth(r),null!=s&&this.setPickerMaxWidth(s)}postConstruct(){super.postConstruct(),this.setupAria();const e="ag-".concat(this.getCompId(),"-display");this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedListener(t,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));const{pickerIcon:n,inputWidth:i}=this.config;if(n){const e=wP(n,this.gos);e&&this.eIcon.appendChild(e)}null!=i&&this.setInputWidth(i)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),RD(e,!1),this.ariaRole&&pD(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(null==e?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case SP.UP:case SP.DOWN:case SP.ENTER:case SP.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case SP.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.gos.getDocument(),t=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(this.eventService,OR.EVENT_BODY_SCROLL,(()=>{this.hidePicker()})));const n=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:r,modalPicker:s=!0}=this.config,o={modal:s,eChild:t,closeOnEsc:!0,closedCallback:()=>{const t=this.gos.getActiveDomElement(),n=!t||t===e.body;this.beforeHidePicker(),n&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:n(i,r)},a=this.popupService.addPopup(o),{maxPickerHeight:l,minPickerWidth:c,maxPickerWidth:u,variableWidth:d}=this;d?(c&&(t.style.minWidth=c),t.style.width=oP(GM(this.eWrapper)),u&&(t.style.maxWidth=u)):nP(t,null!=u?u:GM(this.eWrapper));const h=null!=l?l:"".concat(FM(this.popupService.getPopupParent()),"px");return t.style.setProperty("max-height",h),t.style.position="absolute",this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,n=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:n,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;RD(this.getAriaElement(),e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(null==(t=this.pickerComponent)?void 0:t.getGui().contains(e.relatedTarget))||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return nP(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return"number"===typeof e&&(e="".concat(e,"px")),this.minPickerWidth=null==e?void 0:e,this}setPickerMaxWidth(e){return"number"===typeof e&&(e="".concat(e,"px")),this.maxPickerWidth=null==e?void 0:e,this}setPickerMaxHeight(e){return"number"===typeof e&&(e="".concat(e,"px")),this.maxPickerHeight=null==e?void 0:e,this}destroy(){this.hidePicker(),super.destroy()}};WT([F_("popupService")],dI.prototype,"popupService",2),WT([QP("eLabel")],dI.prototype,"eLabel",2),WT([QP("eWrapper")],dI.prototype,"eWrapper",2),WT([QP("eDisplayField")],dI.prototype,"eDisplayField",2),WT([QP("eIcon")],dI.prototype,"eIcon",2);var hI=class e extends XP{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super('<div class="ag-list ag-'.concat(e,'-list" role="listbox"></div>')),this.cssIdentifier=e,this.unFocusable=t,this.options=[],this.itemEls=[]}init(){const e=this.getGui();this.addManagedListener(e,"mouseleave",(()=>this.clearHighlighted())),this.unFocusable||this.addManagedListener(e,"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){const t=e.key;switch(t){case SP.ENTER:if(this.highlightedEl){const e=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(e)}else this.setValue(this.getValue());break;case SP.DOWN:case SP.UP:e.preventDefault(),this.navigate(t);break;case SP.PAGE_DOWN:case SP.PAGE_UP:case SP.PAGE_HOME:case SP.PAGE_END:e.preventDefault(),this.navigateToPage(t)}}navigate(e){const t=e===SP.DOWN;let n;if(this.highlightedEl){let e=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);e=Math.min(Math.max(e,0),this.itemEls.length-1),n=this.itemEls[e]}else n=this.itemEls[t?0:this.itemEls.length-1];this.highlightItem(n)}navigateToPage(e){if(!this.highlightedEl||0===this.itemEls.length)return;const t=this.itemEls.indexOf(this.highlightedEl),n=this.options.length-1,i=this.itemEls[0].clientHeight,r=Math.floor(this.getGui().clientHeight/i);let s=-1;e===SP.PAGE_HOME?s=0:e===SP.PAGE_END?s=n:e===SP.PAGE_DOWN?s=Math.min(t+r,n):e===SP.PAGE_UP&&(s=Math.max(t-r,0)),-1!==s&&this.highlightItem(this.itemEls[s])}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){const{value:t,text:n}=e,i=n||t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach((e=>{YM(e)})),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach(((t,n)=>{PD(t,n+1),MD(t,e.length)}))}renderOption(e,t){const n=this.gos.getDocument(),i=n.createElement("div");pD(i,"option"),i.classList.add("ag-list-item","ag-".concat(this.cssIdentifier,"-list-item"));const r=n.createElement("span");i.appendChild(r),r.textContent=t,this.unFocusable||(i.tabIndex=-1),this.itemEls.push(i),this.addManagedListener(i,"mousemove",(()=>this.highlightItem(i))),this.addManagedListener(i,"mousedown",(t=>{t.preventDefault(),this.setValue(e)})),this.createManagedBean(new YP({getTooltipValue:()=>t,getGui:()=>i,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>r.scrollWidth>r.clientWidth})),this.getGui().appendChild(i)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(t),this;const n=this.options.findIndex((t=>t.value===e));if(-1!==n){const e=this.options[n];this.value=e.value,this.displayValue=e.text,this.highlightItem(this.itemEls[n]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex((e=>e.value===this.value));-1!==e&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(t){if(!KM(t))return;this.clearHighlighted(),this.highlightedEl=t,this.highlightedEl.classList.add(e.ACTIVE_CLASS),GD(this.highlightedEl,!0);const n=this.getGui(),{scrollTop:i,clientHeight:r}=n,{offsetTop:s,offsetHeight:o}=t;(s+o>i+r||s<i)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){this.highlightedEl&&KM(this.highlightedEl)&&(this.highlightedEl.classList.remove(e.ACTIVE_CLASS),GD(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchEvent({type:OR.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()}fireItemSelected(){this.dispatchEvent({type:e.EVENT_ITEM_SELECTED})}};hI.EVENT_ITEM_SELECTED="selectedItem",hI.ACTIVE_CLASS="ag-active-item",WT([k_],hI.prototype,"init",1);var pI=hI,gI=class e extends dI{constructor(e){super(VT({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:n}=this.config;null!=e&&this.addOptions(e),null!=t&&this.setValue(t,!0),n&&null==t&&(this.eDisplayField.textContent=n),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new pI("select",!0)),this.listComponent.setParentComponent(this);const t=this.listComponent.getAriaElement(),n="ag-select-list-".concat(this.listComponent.getCompId());t.setAttribute("id",n),WD(this.getAriaElement(),t),this.listComponent.addManagedListener(this.listComponent,pI.EVENT_ITEM_SELECTED,(()=>{this.hidePicker(),this.dispatchEvent({type:e.EVENT_ITEM_SELECTED})})),this.listComponent.addManagedListener(this.listComponent,OR.EVENT_FIELD_VALUE_CHANGED,(()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}))}createPickerComponent(){return this.listComponent}onKeyDown(e){var t;const{key:n}=e;switch(n===SP.TAB&&this.hidePicker(),n){case SP.ENTER:case SP.UP:case SP.DOWN:case SP.PAGE_UP:case SP.PAGE_DOWN:case SP.PAGE_HOME:case SP.PAGE_END:e.preventDefault(),this.isPickerDisplayed?null==(t=this.listComponent)||t.handleKeyDown(e):super.onKeyDown(e);break;case SP.ESCAPE:super.onKeyDown(e)}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return null==(e=this.listComponent)||e.clearOptions(),this}setValue(e,t,n){if(this.value===e||!this.listComponent)return this;n||this.listComponent.setValue(e,!0);if(this.listComponent.getValue()===this.getValue())return this;let i=this.listComponent.getDisplayValue();return null==i&&this.config.placeholder&&(i=this.config.placeholder),this.eDisplayField.textContent=i,this.setTooltip({newTooltipText:null!=i?i:null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),super.destroy()}};gI.EVENT_ITEM_SELECTED="selectedItem";var fI=gI,mI=class extends uI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input";super(e,'\n            <div role="presentation">\n                <div ref="eLabel" class="ag-input-field-label"></div>\n                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <'.concat(i,' ref="eInput" class="ag-input-field-input"></').concat(i,">\n                </div>\n            </div>"),t),this.inputType=n,this.displayFieldTag=i}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add("".concat(this.className,"-label")),this.eWrapper.classList.add("".concat(this.className,"-input-wrapper")),this.eInput.classList.add("".concat(this.className,"-input")),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||"ag-".concat(this.getCompId(),"-input");const{inputName:e,inputWidth:t}=this.config;null!=e&&this.setInputName(e),null!=t&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedListener(this.eInput,"input",(e=>this.setValue(e.target.value)))}setInputType(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return nP(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return uP(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return yD(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return kM(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(!0===e)uP(this.eInput,"autocomplete",null);else{const t="string"===typeof e?e:"off";uP(this.eInput,"autocomplete",t)}return this}};WT([QP("eLabel")],mI.prototype,"eLabel",2),WT([QP("eWrapper")],mI.prototype,"eWrapper",2),WT([QP("eInput")],mI.prototype,"eInput",2);var vI=class extends mI{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-checkbox",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"checkbox"),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;"boolean"===typeof e&&this.setReadOnly(e),"boolean"===typeof t&&this.setPassive(t)}addInputListeners(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected="boolean"===typeof e?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=void 0===e,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,n){this.dispatchEvent({type:OR.EVENT_FIELD_VALUE_CHANGED,selected:e,previousValue:t,event:n});const i=this.getInputElement(),r={type:OR.EVENT_CHECKBOX_CHANGED,id:i.id,name:i.name,selected:e,previousValue:t};this.eventService.dispatchEvent(r)}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",!0===e),this.eWrapper.classList.toggle("ag-indeterminate",null==e)}},yI=class extends vI{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedListener(this.eventService,OR.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},CI=class{constructor(e,t,n){this.localeService=e,this.optionsFactory=t,this.valueFormatter=n}getModelAsString(e){if(!e)return null;const t=null!=e.operator,n=this.localeService.getLocaleTextFunc();if(t){const t=e;let{conditions:i}=t;if(!i){const{condition1:e,condition2:n}=t;i=[e,n]}const r=i.map((e=>this.getModelAsString(e))),s="AND"===t.operator?"andCondition":"orCondition";return r.join(" ".concat(n(s,tI[s])," "))}if(e.type===bI.BLANK||e.type===bI.NOT_BLANK)return n(e.type,e.type);{const t=e,i=this.optionsFactory.getCustomOption(t.type),{displayKey:r,displayName:s,numberOfInputs:o}=i||{};return r&&s&&0===o?(n(r,s),s):this.conditionToString(t,i)}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){var t;return this.valueFormatter?null!=(t=this.valueFormatter(null!=e?e:null))?t:"":String(e)}},wI=class e extends lI{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(t){const n=this.optionsFactory.getCustomOption(t);if(n){const{numberOfInputs:e}=n;return null!=e?e:1}const i=[e.EMPTY,e.NOT_BLANK,e.BLANK];return t&&i.indexOf(t)>=0?0:t===e.IN_RANGE?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach(((t,n)=>{0===n?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)}))}getModelFromUi(){const e=this.getUiCompleteConditions();return 0===e.length?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:e[0],condition2:e[1],conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map((e=>e.getValue()))}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return 0===this.eJoinOperatorsOr.length?this.defaultJoinOperator:!0===this.eJoinOperatorsOr[0].getValue()?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const n=!e.operator,i=!t.operator;if(!n&&i||n&&!i)return!1;let r;if(n){const n=e,i=t;r=this.areSimpleModelsEqual(n,i)}else{const n=e,i=t;r=n.operator===i.operator&&nR(n.conditions,i.conditions,((e,t)=>this.areSimpleModelsEqual(e,t)))}return r}shouldRefresh(e){var t,n,i;const r=this.getModel(),s=r?null!=(t=r.conditions)?t:[r]:null,o=null!=(i=null==(n=e.filterOptions)?void 0:n.map((e=>"string"===typeof e?e:e.displayKey)))?i:this.getDefaultFilterOptions();return!(s&&!s.every((e=>void 0!==o.find((t=>t===e.type)))))&&!("number"===typeof e.maxNumConditions&&s&&s.length>e.maxNumConditions)}refresh(e){if(!this.shouldRefresh(e))return!1;return!!super.refresh(e)&&(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let t=e;t.conditions||(t.conditions=[t.condition1,t.condition2]);const n=this.validateAndUpdateConditions(t.conditions),i=this.getNumConditions();if(n<i)this.removeConditionsAndOperators(n);else if(n>i)for(let e=i;e<n;e++)this.createJoinOperatorPanel(),this.createOption();const r="OR"===t.operator;this.eJoinOperatorsAnd.forEach((e=>e.setValue(!r,!0))),this.eJoinOperatorsOr.forEach((e=>e.setValue(r,!0))),t.conditions.forEach(((e,t)=>{this.eTypes[t].setValue(e.type,!0),this.setConditionIntoUi(e,t)}))}else{const t=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(t.type,!0),this.setConditionIntoUi(t,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),WP.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),f_('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){var t;const n=this.getModel();if(null==n)return!0;const{operator:i}=n,r=[];if(i){const e=n;r.push(...null!=(t=e.conditions)?t:[])}else r.push(n);return r[i&&"OR"===i?"some":"every"]((t=>this.individualConditionPasses(e,t)))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new eI,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){var t,n;null!=e.suppressAndOrCondition&&f_('Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),null!=e.alwaysShowBothConditions&&f_('Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),this.maxNumConditions=null!=(t=e.maxNumConditions)?t:e.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(f_('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=null!=(n=e.numAlwaysVisibleConditions)?n:e.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(f_('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(f_('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new fI);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const n=this.getNumConditions()-1;this.forEachPositionInput(n,(e=>this.resetInput(e))),this.addChangedListeners(e,n)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),n=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const i=this.eJoinOperatorPanels.length-1,r=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,r),this.resetJoinOperatorOr(n,i,r),this.isReadOnly()||(t.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(e,t,n){const i=this.createManagedBean(new yI);return e.push(i),i.addCssClass("ag-filter-condition-operator"),i.addCssClass("ag-filter-condition-operator-".concat(n)),t.appendChild(i.getGui()),i}getDefaultJoinOperator(e){return"AND"===e||"OR"===e?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map((e=>"string"===typeof e?this.createBoilerplateListOption(e):this.createCustomListOption(e)))}putOptionsIntoDropdown(e){this.filterListOptions.forEach((t=>{e.addOption(t)})),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:n?this.localeService.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(t)}}isAllowTwoConditions(){return this.maxNumConditions>=2}createBodyTemplate(){return""}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){var e;let t=-1,n=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?t=i:n=!1;if(this.shouldAddNewConditionAtEnd(n))this.createJoinOperatorPanel(),this.createOption();else{const n=null!=(e=this.lastUiCompletePosition)?e:this.getNumConditions()-2;if(t<n){this.removeConditionsAndOperators(n+1);const e=t+1,i=n-e;i>0&&this.removeConditionsAndOperators(e,i),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=t}updateConditionStatusesAndValues(e,t){this.eTypes.forEach(((t,n)=>{const i=this.isConditionDisabled(n,e);t.setDisabled(i||this.filterListOptions.length<=1),1===n&&(kM(this.eJoinOperatorPanels[0],i),this.eJoinOperatorsAnd[0].setDisabled(i),this.eJoinOperatorsOr[0].setDisabled(i))})),this.eConditionBodies.forEach(((e,t)=>{IM(e,this.isConditionBodyVisible(t))}));const n="OR"===(null!=t?t:this.getJoinOperator());this.eJoinOperatorsAnd.forEach(((e,t)=>{e.setValue(!n,!0)})),this.eJoinOperatorsOr.forEach(((e,t)=>{e.setValue(n,!0)})),this.forEachInput(((t,n,i,r)=>{this.setElementDisplayed(t,n<r),this.setElementDisabled(t,this.isConditionDisabled(i,e))})),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const n=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,n,t),this.removeComponents(this.eJoinOperatorsAnd,n,t),this.removeComponents(this.eJoinOperatorsOr,n,t)}removeElements(e,t,n){this.removeItems(e,t,n).forEach((e=>YM(e)))}removeComponents(e,t,n){this.removeItems(e,t,n).forEach((e=>{YM(e.getGui()),this.destroyBean(e)}))}removeItems(e,t,n){return null==n?e.splice(t):e.splice(t,n)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!(null==e?void 0:e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{const e=this.getInputs(0)[0];if(!e)return;e instanceof mI&&e.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,n=-1,i=!1;const r=this.getJoinOperator();for(let o=this.getNumConditions()-1;o>=0;o--)if(this.isConditionUiComplete(o))-1===t&&(t=o,n=o);else{const e=o<t;(o>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(o-1)||e)&&(this.removeConditionsAndOperators(o,1),i=!0,e&&n--)}let s=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),s=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),s=!0),s&&this.updateConditionStatusesAndValues(n,r),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getPlaceholderText(e,t){let n=this.translate(e);if(y_(this.filterPlaceholder)){const e=this.filterPlaceholder,i=this.eTypes[t].getValue();n=e({filterOptionKey:i,filterOption:this.translate(i),placeholder:n})}else"string"===typeof this.filterPlaceholder&&(n=this.filterPlaceholder);return n}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput(((t,n,i,r)=>{if(!(t instanceof mI))return;const s=0===n&&r>1?"inRangeStart":0===n?"filterOoo":"inRangeEnd",o=0===n&&r>1?e("ariaFilterFromValue","Filter from value"):0===n?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(s,i)),t.setInputAriaLabel(o)}))}setElementValue(e,t,n){e instanceof mI&&e.setValue(null!=t?String(t):null,!0)}setElementDisplayed(e,t){e instanceof XP&&IM(e.getGui(),t)}setElementDisabled(e,t){e instanceof XP&&kM(e.getGui(),t)}attachElementOnChange(e,t){e instanceof mI&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach(((t,n)=>{this.forEachPositionTypeInput(n,t,e)}))}forEachPositionInput(e,t){const n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,t)}forEachPositionTypeInput(e,t,n){const i=this.getNumberOfInputs(t),r=this.getInputs(e);for(let s=0;s<r.length;s++){const t=r[s];null!=t&&n(t,s,e,i)}}isConditionDisabled(e,t){return!!this.isReadOnly()||0!==e&&e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(t){if(t>=this.getNumConditions())return!1;return this.getConditionType(t)!==e.EMPTY&&!this.getValues(t).some((e=>null==e))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach((e=>this.resetType(e))),this.eJoinOperatorsAnd.forEach(((e,t)=>this.resetJoinOperatorAnd(e,t,this.joinOperatorId+t))),this.eJoinOperatorsOr.forEach(((e,t)=>this.resetJoinOperatorOr(e,t,this.joinOperatorId+t))),this.joinOperatorId++,this.forEachInput((e=>this.resetInput(e))),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),WP.resolve()}resetType(e){const t=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(t).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,n){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),n)}resetJoinOperatorOr(e,t,n){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),n)}resetJoinOperator(e,t,n,i,r){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName("ag-simple-filter-and-or-".concat(this.getCompId(),"-").concat(r)).setLabel(i),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach(((e,t)=>this.updateJoinOperatorDisabled(e,t))),this.eJoinOperatorsOr.forEach(((e,t)=>this.updateJoinOperatorDisabled(e,t)))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const n=this.mapValuesFromModel(e);this.forEachInput(((e,i,r,s)=>{r===t&&this.setElementValue(e,null!=n[i]?n[i]:null)}))}setValueFromFloatingFilter(e){this.forEachInput(((t,n,i,r)=>{this.setElementValue(t,0===n&&0===i?e:null,!0)}))}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,(e=>{this.attachElementOnChange(e,this.listener)})))}individualConditionPasses(e,t){const n=this.getCellValue(e.node),i=this.mapValuesFromModel(t),r=this.optionsFactory.getCustomOption(t.type),s=this.evaluateCustomFilter(r,i,n);return null!=s?s:null==n?this.evaluateNullValue(t.type):this.evaluateNonNullValue(i,n,t,e)}evaluateCustomFilter(e,t,n){if(null==e)return;const{predicate:i}=e;return null==i||t.some((e=>null==e))?void 0:i(t,n)}isBlank(e){return null==e||"string"===typeof e&&0===e.trim().length}hasInvalidInputs(){return!1}};wI.EMPTY="empty",wI.BLANK="blank",wI.NOT_BLANK="notBlank",wI.EQUALS="equals",wI.NOT_EQUAL="notEqual",wI.LESS_THAN="lessThan",wI.LESS_THAN_OR_EQUAL="lessThanOrEqual",wI.GREATER_THAN="greaterThan",wI.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",wI.IN_RANGE="inRange",wI.CONTAINS="contains",wI.NOT_CONTAINS="notContains",wI.STARTS_WITH="startsWith",wI.ENDS_WITH="endsWith";var bI=wI,SI=class e extends bI{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(t){switch(t){case e.EQUALS:case e.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case e.GREATER_THAN:case e.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case e.LESS_THAN:case e.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case e.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case e.BLANK:return!0;case e.NOT_BLANK:return!1}return!1}evaluateNonNullValue(t,n,i){const r=this.comparator(),s=null!=t[0]?r(t[0],n):0;switch(i.type){case e.EQUALS:return 0===s;case e.NOT_EQUAL:return 0!==s;case e.GREATER_THAN:return s>0;case e.GREATER_THAN_OR_EQUAL:return s>=0;case e.LESS_THAN:return s<0;case e.LESS_THAN_OR_EQUAL:return s<=0;case e.IN_RANGE:{const e=r(t[1],n);return this.scalarFilterParams.inRangeInclusive?s>=0&&e<=0:s>0&&e<0}case e.BLANK:return this.isBlank(n);case e.NOT_BLANK:return!this.isBlank(n);default:return console.warn('AG Grid: Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},EI=1/0,xI=class extends CI{constructor(e,t,n){super(t,n),this.dateFilterParams=e}conditionToString(e,t){const{type:n}=e,{numberOfInputs:i}=t||{},r=n==bI.IN_RANGE||2===i,s=AM(e.dateFrom),o=AM(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(r){const e=null!==s?xM(s,a):"null",t=null!==o?xM(o,a):"null";return"".concat(e,"-").concat(t)}return null!=s?xM(s,a):"".concat(n)}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},AI=class e extends SI{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=1e3,this.maxValidYear=EI,this.minValidDate=null,this.maxValidDate=null}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:n,type:i}=e||{};return[t&&AM(t)||null,n&&AM(n)||null].slice(0,this.getNumberOfInputs(i))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){return null==t||t<e?-1:t>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(t,n)=>{if(null!=e[t]){if(!isNaN(e[t]))return null==e[t]?n:Number(e[t]);console.warn("AG Grid: DateFilter ".concat(t," is not a number"))}return n};this.minValidYear=t("minValidYear",1e3),this.maxValidYear=t("maxValidYear",EI),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:AM(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:AM(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new xI(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new JP(this.getContext(),this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc((()=>t.destroy())),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return e.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=this.gos.getDocument().createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,n,i){const r=this.gos.getDocument().createElement("div");r.classList.add("ag-filter-".concat(i)),r.classList.add("ag-filter-date-".concat(i)),t.push(r),e.appendChild(r),n.push(this.createDateCompWrapper(r))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,n){this.removeItems(e,t,n).forEach((e=>e.destroy()))}isValidDateValue(e){if(null===e)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput(((n,i,r,s)=>{r!==e||!t||i>=s||(t=t&&this.isValidDateValue(n.getDate()))})),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),n={},i=this.getValues(e);return i.length>0&&(n.dateFrom=SM(i[0])),i.length>1&&(n.dateTo=SM(i[1])),VT({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t},n)}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput((e=>{e.setInputPlaceholder(t),e.setInputAriaLabel(n)}))}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,((e,n,i,r)=>{n<r&&t.push(e.getDate())})),t}translate(e){return e===SI.LESS_THAN?super.translate("before"):e===SI.GREATER_THAN?super.translate("after"):super.translate(e)}getModelAsString(e){var t;return null!=(t=this.filterModelFormatter.getModelAsString(e))?t:""}};AI.DEFAULT_FILTER_OPTIONS=[SI.EQUALS,SI.NOT_EQUAL,SI.LESS_THAN,SI.GREATER_THAN,SI.IN_RANGE,SI.BLANK,SI.NOT_BLANK],WT([F_("userComponentFactory")],AI.prototype,"userComponentFactory",2);var TI=AI,_I=class extends XP{getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return null==e?void 0:e.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e)return void(this.lastType=this.optionsFactory.getDefaultOption());let t;if(e.operator){t=e.conditions[0]}else t=e;this.lastType=t.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const t=e;return this.isTypeEditable(t.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.optionsFactory=new eI,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const n=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(n)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:n}=t||{};return null==n||1==n}isTypeEditable(e){const t=[bI.IN_RANGE,bI.EMPTY,bI.BLANK,bI.NOT_BLANK];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){const t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();return"".concat(t," ").concat(n("ariaFilterInput","Filter Input"))}};WT([F_("columnModel")],_I.prototype,"columnModel",2);var RI=class extends _I{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>\n                <div ref="eDateWrapper" style="display: flex;"></div>\n            </div>')}getDefaultFilterOptions(){return TI.DEFAULT_FILTER_OPTIONS}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new xI(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const t=e;this.dateComp.setDate(AM(t.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){IM(this.eDateWrapper,e),IM(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=SM(this.dateComp.getDate());this.params.parentFilterInstance((t=>{if(t){const n=AM(e);t.onFloatingFilterChanged(this.getLastType()||null,n)}}))}getDateComponentParams(){const e=lI.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:x_(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new JP(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,(e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))})),this.addDestroyFunc((()=>this.dateComp.destroy()))}updateDateComponent(){const e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}};WT([F_("userComponentFactory")],RI.prototype,"userComponentFactory",2),WT([QP("eReadOnlyText")],RI.prototype,"eReadOnlyText",2),WT([QP("eDateWrapper")],RI.prototype,"eDateWrapper",2);var DI=class extends XP{constructor(){super('\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>\n            </div>')}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListener(t,"mousedown",(()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()})),this.addManagedListener(t,"input",(e=>{e.target===this.gos.getActiveDomElement()&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}))}setParams(e){const t=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&JD(),t.type=n?"date":"text";const{minValidYear:i,maxValidYear:r,minValidDate:s,maxValidDate:o}=e.filterParams||{};if(s&&i&&f_("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),o&&r&&f_("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),s&&o){const[e,t]=[s,o].map((e=>e instanceof Date?e:AM(e)));e&&t&&e.getTime()>t.getTime()&&f_("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}s?s instanceof Date?t.min=xM(s):t.min=s:i&&(t.min="".concat(i,"-01-01")),o?o instanceof Date?t.max=xM(o):t.max=o:r&&(t.max="".concat(r,"-12-31"))}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return AM(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(SM(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e&&e.suppressFocus||this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&null!=e.filterParams.browserDatePicker?e.filterParams.browserDatePicker:tM()||nM()||JD()&&eM()>=14.1}};WT([QP("eDateInput")],DI.prototype,"eDateInput",2);var MI=class extends mI{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-text-field",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text")}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=YT(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp("[".concat(this.config.allowedCharPattern,"]"));this.addManagedListener(this.eInput,"keydown",(t=>{DP(t)&&t.key&&!e.test(t.key)&&t.preventDefault()})),this.addManagedListener(this.eInput,"paste",(t=>{var n;const i=null==(n=t.clipboardData)?void 0:n.getData("text");i&&i.split("").some((t=>!e.test(t)))&&t.preventDefault()}))}},PI=class extends MI{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"blur",(()=>{const e=parseFloat(this.eInput.value),t=isNaN(e)?"":this.normalizeValue(e.toString());this.value!==t&&this.setValue(t)})),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any";const{precision:e,min:t,max:n,step:i}=this.config;"number"===typeof e&&this.setPrecision(e),"number"===typeof t&&this.setMin(t),"number"===typeof n&&this.setMax(n),"number"===typeof i&&this.setStep(i)}onWheel(e){this.gos.getActiveDomElement()===this.eInput&&e.preventDefault()}normalizeValue(e){if(""===e)return"";null!=this.precision&&(e=this.adjustPrecision(e));const t=parseFloat(e);return null!=this.min&&t<this.min?e=this.min.toString():null!=this.max&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(null==this.precision)return e;if(t){const t=parseFloat(e).toFixed(this.precision);return parseFloat(t).toString()}const n=String(e).split(".");if(n.length>1){if(n[1].length<=this.precision)return e;if(this.precision>0)return"".concat(n[0],".").concat(n[1].slice(0,this.precision))}return n[0]}setMin(e){return this.min===e||(this.min=e,uP(this.eInput,"min",e)),this}setMax(e){return this.max===e||(this.max=e,uP(this.eInput,"max",e)),this}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e||(this.step=e,uP(this.eInput,"step",e)),this}setValue(e,t){return this.setValueOrInputValue((e=>super.setValue(e,t)),(()=>this),e)}setStartValue(e){return this.setValueOrInputValue((e=>super.setValue(e,!0)),(e=>{this.eInput.value=e}),e)}setValueOrInputValue(e,t,n){if(YT(n)){let i=this.isScientificNotation(n);if(i&&this.eInput.validity.valid)return e(n);if(!i){i=(n=this.adjustPrecision(n))!=this.normalizeValue(n)}if(i)return t(n)}return e(n)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return"string"===typeof e&&e.includes("e")}},II=class extends CI{conditionToString(e,t){const{numberOfInputs:n}=t||{};return e.type==bI.IN_RANGE||2===n?"".concat(this.formatValue(e.filter),"-").concat(this.formatValue(e.filterTo)):null!=e.filter?this.formatValue(e.filter):"".concat(e.type)}};function NI(e){const{allowedCharPattern:t}=null!=e?e:{};return null!=t?t:null}var kI=class e extends SI{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern===e.allowedCharPattern&&super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:n,type:i}=e||{};return[this.processValue(t),this.processValue(n)].slice(0,this.getNumberOfInputs(i))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new II(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return e.DEFAULT_FILTER_OPTIONS}setElementValue(e,t,n){const i=!n&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(null!=t?t:null):t;super.setElementValue(e,i)}createValueElement(){const e=NI(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),pD(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,n,i){const r=this.createManagedBean(i?new MI({allowedCharPattern:i}):new PI);r.addCssClass("ag-filter-".concat(n)),r.addCssClass("ag-filter-filter"),t.push(r),e.appendChild(r.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,((e,n,i,r)=>{n<r&&t.push(this.processValue(this.stringToFloat(e.getValue())))})),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return null==e||isNaN(e)?null:e}stringToFloat(e){if("number"===typeof e)return e;let t=zT(e);return null!=t&&""===t.trim()&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):null==t||"-"===t.trim()?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),n={filterType:this.getFilterType(),type:t},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){var t;return null!=(t=this.filterModelFormatter.getModelAsString(e))?t:""}hasInvalidInputs(){let e=!1;return this.forEachInput((t=>{t.getInputElement().validity.valid||(e=!0)})),e}};kI.DEFAULT_FILTER_OPTIONS=[SI.EQUALS,SI.NOT_EQUAL,SI.GREATER_THAN,SI.GREATER_THAN_OR_EQUAL,SI.LESS_THAN,SI.LESS_THAN_OR_EQUAL,SI.IN_RANGE,SI.BLANK,SI.NOT_BLANK];var OI=kI,LI=class extends CI{conditionToString(e,t){const{numberOfInputs:n}=t||{};return e.type==bI.IN_RANGE||2===n?"".concat(e.filter,"-").concat(e.filterTo):null!=e.filter?"".concat(e.filter):"".concat(e.type)}},FI=class e extends bI{constructor(){super("textFilter"),this.eValuesFrom=[],this.eValuesTo=[]}static trimInput(e){const t=e&&e.trim();return""===t?e:t}getDefaultDebounceMs(){return 500}setParams(t){this.textFilterParams=t,super.setParams(t),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?e.DEFAULT_FORMATTER:e.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new LI(this.localeService,this.optionsFactory)}getTextMatcher(){const t=this.textFilterParams.textCustomComparator;return t?(GP.warnOnce("textCustomComparator is deprecated, use textMatcher instead."),e=>{let{filterOption:n,value:i,filterText:r}=e;return t(n,i,r)}):this.textFilterParams.textMatcher||e.DEFAULT_MATCHER}createCondition(e){const t=this.getConditionType(e),n={filterType:this.getFilterType(),type:t},i=this.getValuesWithSideEffects(e,!0);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(t,n){const i=[];return this.forEachPositionInput(t,((t,r,s,o)=>{var a;if(r<o){let r=zT(t.getValue());n&&this.textFilterParams.trimInput&&(r=null!=(a=e.trimInput(r))?a:null,t.setValue(r,!0)),i.push(r)}})),i}getDefaultFilterOptions(){return e.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),pD(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,n){const i=this.createManagedBean(new MI);i.addCssClass("ag-filter-".concat(n)),i.addCssClass("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:n,type:i}=e||{};return[t||null,n||null].slice(0,this.getNumberOfInputs(i))}evaluateNullValue(e){const t=[bI.NOT_EQUAL,bI.NOT_CONTAINS,bI.BLANK];return!!e&&t.indexOf(e)>=0}evaluateNonNullValue(e,t,n,i){const r=e.map((e=>this.formatter(e)))||[],s=this.formatter(t),{api:o,colDef:a,column:l,columnApi:c,context:u,textFormatter:d}=this.textFilterParams;if(n.type===bI.BLANK)return this.isBlank(t);if(n.type===bI.NOT_BLANK)return!this.isBlank(t);const h={api:o,colDef:a,column:l,columnApi:c,context:u,node:i.node,data:i.data,filterOption:n.type,value:s,textFormatter:d};return r.some((e=>this.matcher(GT(VT({},h),{filterText:e}))))}getModelAsString(e){var t;return null!=(t=this.filterModelFormatter.getModelAsString(e))?t:""}};FI.DEFAULT_FILTER_OPTIONS=[bI.CONTAINS,bI.NOT_CONTAINS,bI.EQUALS,bI.NOT_EQUAL,bI.STARTS_WITH,bI.ENDS_WITH,bI.BLANK,bI.NOT_BLANK],FI.DEFAULT_FORMATTER=e=>e,FI.DEFAULT_LOWERCASE_FORMATTER=e=>null==e?null:e.toString().toLowerCase(),FI.DEFAULT_MATCHER=e=>{let{filterOption:t,value:n,filterText:i}=e;if(null==i)return!1;switch(t){case FI.CONTAINS:return n.indexOf(i)>=0;case FI.NOT_CONTAINS:return n.indexOf(i)<0;case FI.EQUALS:return n===i;case FI.NOT_EQUAL:return n!=i;case FI.STARTS_WITH:return 0===n.indexOf(i);case FI.ENDS_WITH:const e=n.lastIndexOf(i);return e>=0&&e===n.length-i.length;default:return!1}};var BI=FI,VI=class extends MR{constructor(e){super(),this.params=e,this.valueChangedListener=()=>{}}setupGui(e){var t;this.eFloatingFilterTextInput=this.createManagedBean(new MI(null==(t=this.params)?void 0:t.config));const n=this.eFloatingFilterTextInput.getGui();e.appendChild(n),this.addManagedListener(n,"input",(e=>this.valueChangedListener(e))),this.addManagedListener(n,"keydown",(e=>this.valueChangedListener(e)))}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},GI=class extends _I{postConstruct(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>\n        ')}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){var t;this.params=e;const n=null!=(t=e.browserAutoComplete)&&t;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:n}),this.applyActive=lI.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){const e=lI.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),t=x_(this.syncUpWithParentFilter.bind(this),e);this.floatingFilterInputService.setValueChangedListener(t)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();zM(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){const t=e.key===SP.ENTER;if(this.applyActive&&!t)return;let n=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(n=BI.trimInput(n),this.floatingFilterInputService.setValue(n,!0)),this.params.parentFilterInstance((e=>{e&&e.onFloatingFilterChanged(this.getLastType()||null,n||null)}))}setEditable(e){this.floatingFilterInputService.setEditable(e)}};WT([QP("eFloatingFilterInputContainer")],GI.prototype,"eFloatingFilterInputContainer",2),WT([k_],GI.prototype,"postConstruct",1);var HI=class extends MR{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new PI),this.eFloatingFilterTextInput=this.createManagedBean(new MI),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),n=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(n),this.setupListeners(t,(e=>this.valueChangedListener(e))),this.setupListeners(n,(e=>this.valueChangedListener(e)))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListener(e,"input",t),this.addManagedListener(e,"keydown",t)}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},WI=class extends GI{init(e){var t;super.init(e),this.filterModelFormatter=new II(this.localeService,this.optionsFactory,null==(t=e.filterParams)?void 0:t.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){NI(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return OI.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=NI(e.filterParams),this.allowedCharPattern?this.createManagedBean(new VI({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new HI)}},jI=class extends GI{init(e){super.init(e),this.filterModelFormatter=new LI(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return BI.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new VI)}},UI=class e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.destroyFuncs=[],this.touching=!1,this.eventService=new W_,this.eElement=e,this.preventMouseClick=t;const n=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),r=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",n,{passive:!0}),this.eElement.addEventListener("touchmove",i,{passive:!0}),this.eElement.addEventListener("touchend",r,{passive:!1}),this.destroyFuncs.push((()=>{this.eElement.removeEventListener("touchstart",n,{passive:!0}),this.eElement.removeEventListener("touchmove",i,{passive:!0}),this.eElement.removeEventListener("touchend",r,{passive:!1})}))}getActiveTouch(e){for(let t=0;t<e.length;t++){if(e[t].identifier===this.touchStart.identifier)return e[t]}return null}addEventListener(e,t){this.eventService.addEventListener(e,t)}removeEventListener(e,t){this.eventService.removeEventListener(e,t)}onTouchStart(t){if(this.touching)return;this.touchStart=t.touches[0],this.touching=!0,this.moved=!1;const n=this.touchStart;window.setTimeout((()=>{const i=this.touchStart===n;if(this.touching&&i&&!this.moved){this.moved=!0;const n={type:e.EVENT_LONG_TAP,touchStart:this.touchStart,touchEvent:t};this.eventService.dispatchEvent(n)}}),500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!OP(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(t){if(this.touching){if(!this.moved){const t={type:e.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&t.cancelable&&t.preventDefault(),this.touching=!1}}checkForDoubleTap(){const t=(new Date).getTime();if(this.lastTapTime&&this.lastTapTime>0){if(t-this.lastTapTime>e.DOUBLE_TAP_MILLIS){const t={type:e.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(t),this.lastTapTime=null}else this.lastTapTime=t}else this.lastTapTime=t}destroy(){this.destroyFuncs.forEach((e=>e()))}};UI.EVENT_TAP="tap",UI.EVENT_DOUBLE_TAP="doubleTap",UI.EVENT_LONG_TAP="longTap",UI.DOUBLE_TAP_MILLIS=500;var zI=UI,YI=class e extends XP{constructor(t){super(),t||this.setTemplate(e.TEMPLATE)}attachCustomElements(e,t,n,i,r){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=r}setupSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),(this.column.isSortable()||this.column.getColDef().showRowGroup)&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedPropertyListener("unSortIcon",(()=>this.updateIcons())),this.addManagedListener(this.eventService,OR.EVENT_NEW_COLUMNS_LOADED,(()=>this.updateIcons())),this.addManagedListener(this.eventService,OR.EVENT_SORT_CHANGED,(()=>this.onSortChanged())),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_ROW_GROUP_CHANGED,(()=>this.onSortChanged())),this.onSortChanged())}addInIcon(e,t,n){if(null==t)return;const i=wP(e,this.gos,n);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t="asc"===e;IM(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t="desc"===e;IM(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),n=null===e||void 0===e;IM(this.eSortNone,!t&&n,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;this.gos.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedListener(this.eventService,OR.EVENT_SORT_CHANGED,(()=>this.updateMultiSortIndicator())),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_ROW_GROUP_CHANGED,(()=>this.updateMultiSortIndicator())),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e="mixed"===this.sortController.getDisplaySortForColumn(this.column);IM(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){var e;if(!this.eSortOrder)return;const t=this.sortController.getColumnsWithSortingOrdered(),n=null!=(e=this.sortController.getDisplaySortIndexForColumn(this.column))?e:-1,i=t.some((e=>{var t;return null!=(t=this.sortController.getDisplaySortIndexForColumn(e))&&t})),r=n>=0&&i;IM(this.eSortOrder,r,{skipAriaHidden:!0}),n>=0?this.eSortOrder.textContent=(n+1).toString():zM(this.eSortOrder)}};YI.TEMPLATE='<span class="ag-sort-indicator-container">\n            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>\n        </span>',WT([QP("eSortOrder")],YI.prototype,"eSortOrder",2),WT([QP("eSortAsc")],YI.prototype,"eSortAsc",2),WT([QP("eSortDesc")],YI.prototype,"eSortDesc",2),WT([QP("eSortMixed")],YI.prototype,"eSortMixed",2),WT([QP("eSortNone")],YI.prototype,"eSortNone",2),WT([F_("columnModel")],YI.prototype,"columnModel",2),WT([F_("sortController")],YI.prototype,"sortController",2);var qI=YI,KI=class e extends XP{constructor(){super(...arguments),this.lastMovingChanged=0}destroy(){super.destroy()}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&this.workOutSort()==this.currentSort&&this.shouldSuppressMenuHide()==this.currentSuppressMenuHide&&t.enableFilterButton==e.enableFilterButton&&t.enableFilterIcon==e.enableFilterIcon&&(this.setDisplayName(e),!0)}workOutTemplate(){var t;let n=null!=(t=this.params.template)?t:e.TEMPLATE;return n=n&&n.trim?n.trim():n,n}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=zR(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,n){if(null==t)return;const i=wP(e,this.gos,n);i&&t.appendChild(i)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const t=new zI(this.getGui(),!0),n=this.shouldSuppressMenuHide(),i=n&&YT(this.eMenu),r=i?new zI(this.eMenu,!0):t;if(this.params.enableMenu){const e=i?"EVENT_TAP":"EVENT_LONG_TAP",t=e=>this.params.showColumnMenuAfterMouseClick(e.touchStart);this.addManagedListener(r,zI[e],t)}if(this.params.enableSorting){const e=e=>{var t,i;const r=e.touchStart.target;n&&((null==(t=this.eMenu)?void 0:t.contains(r))||(null==(i=this.eFilterButton)?void 0:i.contains(r)))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListener(t,zI.EVENT_TAP,e)}if(this.params.enableFilterButton){const e=new zI(this.eFilterButton,!0);this.addManagedListener(e,"tap",(()=>this.params.showFilter(this.eFilterButton))),this.addDestroyFunc((()=>e.destroy()))}this.addDestroyFunc((()=>t.destroy())),i&&this.addDestroyFunc((()=>r.destroy()))}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return YM(this.eMenu),void(this.eMenu=void 0);const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedListener(this.eMenu,"click",(()=>this.params.showColumnMenu(this.eMenu))),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){var t,n,i,r;const{column:s}=this.params,o=this.menuService.isLegacyMenuEnabled();if(e&&!o){if(this.menuService.isFilterMenuInHeaderEnabled(s))return this.params.showFilter(null!=(n=null!=(t=this.eFilterButton)?t:this.eMenu)?n:this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(null!=(r=null!=(i=this.eMenu)?i:this.eFilterButton)?r:this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new qI(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListener(this.params.column,K_.EVENT_MOVING_CHANGED,(()=>{this.lastMovingChanged=(new Date).getTime()})),this.eLabel&&this.addManagedListener(this.eLabel,"click",(e=>{const t=this.params.column.isMoving(),n=(new Date).getTime()-this.lastMovingChanged<50;if(!(t||n)){const t="ctrl"===this.gos.get("multiSortKey")?e.ctrlKey||e.metaKey:e.shiftKey;this.params.progressSort(t)}}));const e=()=>{if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.params.column.getColDef().showRowGroup){const e=this.columnModel.getSourceColumnsForGroupColumn(this.params.column),t=!(null==e?void 0:e.every((e=>this.params.column.getSort()==e.getSort())));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",t)}};this.addManagedListener(this.eventService,OR.EVENT_SORT_CHANGED,e),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedListener(this.eFilterButton,"click",(()=>this.params.showFilter(this.eFilterButton))):this.eFilterButton=void 0}configureFilter(e,t,n){if(!e)return YM(t),!1;const{column:i}=this.params;return this.addInIcon("filter",t,i),this.addManagedListener(i,K_.EVENT_FILTER_CHANGED,n),n(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();IM(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){var t,n,i,r;return e?null!=(n=null!=(t=this.eFilterButton)?t:this.eMenu)?n:this.getGui():null!=(r=null!=(i=this.eMenu)?i:this.eFilterButton)?r:this.getGui()}};KI.TEMPLATE='<div class="ag-cell-label-container" role="presentation">\n            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n            <span ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>\n            <div ref="eLabel" class="ag-header-cell-label" role="presentation">\n                <span ref="eText" class="ag-header-cell-text"></span>\n                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n            </div>\n        </div>',WT([F_("sortController")],KI.prototype,"sortController",2),WT([F_("menuService")],KI.prototype,"menuService",2),WT([F_("columnModel")],KI.prototype,"columnModel",2),WT([QP("eFilter")],KI.prototype,"eFilter",2),WT([QP("eFilterButton")],KI.prototype,"eFilterButton",2),WT([QP("eSortIndicator")],KI.prototype,"eSortIndicator",2),WT([QP("eMenu")],KI.prototype,"eMenu",2),WT([QP("eLabel")],KI.prototype,"eLabel",2),WT([QP("eText")],KI.prototype,"eText",2),WT([QP("eSortOrder")],KI.prototype,"eSortOrder",2),WT([QP("eSortAsc")],KI.prototype,"eSortAsc",2),WT([QP("eSortDesc")],KI.prototype,"eSortDesc",2),WT([QP("eSortMixed")],KI.prototype,"eSortMixed",2),WT([QP("eSortNone")],KI.prototype,"eSortNone",2);var XI=KI,QI=class e extends XP{constructor(){super(e.TEMPLATE)}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&f_("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");const e=e=>{if(SR(e))return;const t=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),t,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e);const t=e=>{bR(e)};this.addManagedListener(this.eCloseIcon,"dblclick",t),this.addManagedListener(this.eOpenIcon,"dblclick",t),this.addManagedListener(this.getGui(),"dblclick",e),this.updateIconVisibility();const n=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(n,Q_.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(n,Q_.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))}addTouchAndClickListeners(e,t){const n=new zI(e,!0);this.addManagedListener(n,zI.EVENT_TAP,t),this.addDestroyFunc((()=>n.destroy())),this.addManagedListener(e,"click",t)}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const e=this.params.columnGroup.isExpanded();IM(this.eOpenIcon,e),IM(this.eCloseIcon,!e)}else IM(this.eOpenIcon,!1),IM(this.eCloseIcon,!1)}addInIcon(e,t){const n=wP(e,this.gos,null);n&&this.getRefElement(t).appendChild(n)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable())return IM(this.eOpenIcon,!1),void IM(this.eCloseIcon,!1)}setupLabel(){var e;const{displayName:t,columnGroup:n}=this.params;if(YT(t)){const e=zR(t,!0);this.getRefElement("agLabel").textContent=e}this.addOrRemoveCssClass("ag-sticky-label",!(null==(e=n.getColGroupDef())?void 0:e.suppressStickyLabel))}};QI.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">\n            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>',WT([F_("columnModel")],QI.prototype,"columnModel",2),WT([QP("agOpened")],QI.prototype,"eOpenIcon",2),WT([QP("agClosed")],QI.prototype,"eCloseIcon",2);var ZI=QI,$I=class extends XP{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},JI=class e extends $I{constructor(){super(e.TEMPLATE)}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),YT(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===SP.LEFT||t===SP.UP||t===SP.RIGHT||t===SP.DOWN||e.shiftKey&&t===SP.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return YT(e)||YT(this.params.value)?this.params.parseValue(e):this.params.value}};JI.TEMPLATE='<div class="ag-large-text">\n            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',WT([QP("eTextArea")],JI.prototype,"eTextArea",2);var eN=JI,tN=class extends $I{constructor(){super('<div class="ag-cell-edit-wrapper">\n                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>\n            </div>'),this.startedByEnter=!1}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueService:n,gos:i}=this,{values:r,value:s,eventKey:o}=e;if(qT(r))return void console.warn("AG Grid: no values found for select cellEditor");this.startedByEnter=null!=o&&o===SP.ENTER;let a=!1;r.forEach((i=>{const r={value:i},o=n.formatValue(e.column,null,i),l=null!==o&&void 0!==o;r.text=l?o:i,t.addOption(r),a=a||s===i})),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=e;null!=l&&t.setPickerGap(l),null!=u&&t.setPickerMaxHeight(u),null!=c&&t.setPickerMaxWidth(c),"fullRow"!==i.get("editType")&&this.addManagedListener(this.eSelect,fI.EVENT_ITEM_SELECTED,(()=>e.stopEditing()))}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout((()=>{this.isAlive()&&this.eSelect.showPicker()}))}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}};WT([F_("valueService")],tN.prototype,"valueService",2),WT([QP("eSelect")],tN.prototype,"eSelect",2);var nN=class extends $I{constructor(e){super('\n            <div class="ag-cell-edit-wrapper">\n                '.concat(e.getTemplate(),"\n            </div>")),this.cellEditorInput=e}init(e){this.params=e;const t=this.eInput;let n;if(this.cellEditorInput.init(t,e),e.cellStartedEdit){this.focusAfterAttached=!0;const t=e.eventKey;t===SP.BACKSPACE||e.eventKey===SP.DELETE?n="":t&&1===t.length?n=t:(n=this.cellEditorInput.getStartValue(),t!==SP.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,n=this.cellEditorInput.getStartValue();null!=n&&t.setStartValue(n),this.addManagedListener(t.getGui(),"keydown",(e=>{const{key:t}=e;t!==SP.PAGE_UP&&t!==SP.PAGE_DOWN||e.preventDefault()}))}afterGuiAttached(){var e,t;const n=this.localeService.getLocaleTextFunc(),i=this.eInput;if(i.setInputAriaLabel(n("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;JD()||i.getFocusableElement().focus();const r=i.getInputElement();this.highlightAllOnFocus?r.select():null==(t=(e=this.cellEditorInput).setCaret)||t.call(e)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),n=e.getInputElement();t.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}};WT([QP("eInput")],nN.prototype,"eInput",2);var iN=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'}init(e,t){this.eInput=e,this.params=t,null!=t.maxLength&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return YT(e)||YT(this.params.value)?this.params.parseValue(e):this.params.value}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=YT(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},rN=class extends nN{constructor(){super(new iN)}},sN=class extends XP{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const n=document.createElement("span");n.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(n),this.setTemplateFromElement(e)}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const n=Math.abs(t),i=e.formatValue(n),r=YT(i)?i:n,s=t>=0;this.eDelta.textContent=s?"\u2191"+r:"\u2193"+r,this.eDelta.classList.toggle("ag-value-change-delta-up",s),this.eDelta.classList.toggle("ag-value-change-delta-down",!s)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.hideDeltaValue()}),2e3)}))}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),zM(this.eDelta)}refresh(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.value;if(n===this.lastValue)return!1;if(YT(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:YT(e.value)?this.eValue.textContent=n:zM(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering())return!1;if("number"===typeof n&&"number"===typeof this.lastValue){const t=n-this.lastValue;this.showDelta(e,t)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=n,!0}};WT([F_("filterManager")],sN.prototype,"filterManager",2);var oN=class extends XP{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")}),50),window.setTimeout((()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)}),3e3)}))}refresh(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.value;return qT(n)&&(n=""),n!==this.lastValue&&(!this.filterManager.isSuppressFlashingCellsBecauseFiltering()&&(t||this.addSlideAnimation(),this.lastValue=n,YT(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:YT(e.value)?this.eCurrent.textContent=n:zM(this.eCurrent),!0))}};WT([F_("filterManager")],oN.prototype,"filterManager",2);var aN=class e{constructor(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=e.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){const n=this.data;this.data=e,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const i=this.createDataChangedEvent(e,n,t);this.dispatchLocalEvent(i)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,n,i){return{type:e.EVENT_DATA_CHANGED,node:this,oldData:n,newData:t,update:i}}createLocalRowEvent(e){return{type:e,node:this}}getRowIndexString(){return"top"===this.rowPinned?"t-"+this.rowIndex:"bottom"===this.rowPinned?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new e(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(e,t){const n=YT(this.id)?this.createDaemonNode():null,i=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,n);const r=this.createDataChangedEvent(e,i,!1);this.dispatchLocalEvent(r)}checkRowSelectable(){const e=this.beans.gos.get("isRowSelectable");this.setRowSelectable(!e||e(this))}setRowSelectable(t,n){if(this.selectable!==t){if(this.selectable=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_SELECTABLE_CHANGED)),n)return;if(this.beans.gos.get("groupSelectsChildren")){const e=this.calculateSelectedFromChildren();return void this.setSelectedParams({newValue:null!=e&&e,source:"selectableChanged"})}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){const n=this.beans.gos.getCallback("getRowId");if(n)if(this.data){const t=this.getGroupKeys(!0);this.id=n({data:this.data,parentKeys:t.length>0?t:void 0,level:this.level}),null!==this.id&&"string"===typeof this.id&&this.id.startsWith(e.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row IDs cannot start with ".concat(e.ID_PREFIX_ROW_GROUP,", this is a reserved prefix for AG Grid's row grouping feature.")),null!==this.id&&"string"!==typeof this.id&&(this.id=""+this.id)}else this.id=void 0;else this.id=t}getGroupKeys(){const e=[];let t=this;for(arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(t=t.parent);t&&t.level>=0;)e.push(t.key),t=t.parent;return e.reverse(),e}isPixelInRange(e){return!(!YT(this.rowTop)||!YT(this.rowHeight))&&(e>=this.rowTop&&e<this.rowTop+this.rowHeight)}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_FIRST_CHILD_CHANGED)))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_LAST_CHILD_CHANGED)))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_CHILD_INDEX_CHANGED)))}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_TOP_CHANGED)),this.setDisplayed(null!==t))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_DISPLAYED_CHANGED)))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_DRAGGING_CHANGED)))}setHighlighted(t){t!==this.highlighted&&(this.highlighted=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_HIGHLIGHT_CHANGED)))}setHovered(e){this.hovered!==e&&(this.hovered=e)}isHovered(){return this.hovered}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_ALL_CHILDREN_COUNT_CHANGED)))}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_MASTER_CHANGED)))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_GROUP_CHANGED)))}setRowHeight(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.rowHeight=t,this.rowHeightEstimated=n,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_HEIGHT_CHANGED))}setRowAutoHeight(e,t){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[t.getId()]=e,null!=e&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=x_(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let e=!1,t=!0,n=0;const i=this.__autoHeights;if(null==i)return;if(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach((r=>{let s=i[r.getId()];if(null==s){if(!this.beans.columnModel.isColSpanActive())return void(e=!0);{let t=[];switch(r.getPinned()){case"left":t=this.beans.columnModel.getDisplayedLeftColumnsForRow(this);break;case"right":t=this.beans.columnModel.getDisplayedRightColumnsForRow(this);break;case null:t=this.beans.columnModel.getViewportCenterColumnsForRow(this)}if(t.includes(r))return void(e=!0);s=-1}}else t=!1;s>n&&(n=s)})),e)return;if((t||n<10)&&(n=this.beans.gos.getRowHeightForNode(this).height),n==this.rowHeight)return;this.setRowHeight(n);const r=this.beans.rowModel;r.onRowHeightChangedDebounced&&r.onRowHeightChangedDebounced()}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_ROW_INDEX_CHANGED)))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_UI_LEVEL_CHANGED)))}setExpanded(t,n,i){if(this.expanded===t)return;this.expanded=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_EXPANDED_CHANGED));const r=Object.assign({},this.createGlobalRowEvent(OR.EVENT_ROW_GROUP_OPENED),{expanded:t,event:n||null});this.beans.rowNodeEventThrottle.dispatchExpanded(r,i),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(e){return this.beans.gos.addGridCommonParams({type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}dispatchLocalEvent(e){this.eventService&&this.eventService.dispatchEvent(e)}setDataValue(e,t,n){const i=(()=>{var t;return"string"!==typeof e?e:null!=(t=this.beans.columnModel.getGridColumn(e))?t:this.beans.columnModel.getPrimaryColumn(e)})(),r=this.getValueFromValueService(i);if(this.beans.gos.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(i,r,t,n),!1;const s=this.beans.valueService.setValue(this,i,t,n);return this.dispatchCellChangedEvent(i,t,r),this.checkRowSelectable(),s}getValueFromValueService(e){var t,n;const i=this.leafGroup&&this.beans.columnModel.isPivotMode(),r=this.group&&this.expanded&&!this.footer&&!i;let s=!1;const o=null!=(t=this.beans.gos.get("groupTotalRow"))?t:this.beans.gos.get("groupIncludeFooter");if("function"!==typeof o)s=!!o;else{s=!!(null!=(n=this.beans.gos.getCallback("groupTotalRow"))?n:this.beans.gos.getCallback("groupIncludeFooter"))({node:this})}const a=this.beans.gos.get("groupSuppressBlankHeader"),l=r&&s&&!a;return this.beans.valueService.getValue(e,this,!1,l)}dispatchEventForSaveValueReadOnly(e,t,n,i){const r=this.beans.gos.addGridCommonParams({type:OR.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:e,colDef:e.getColDef(),data:this.data,node:this,oldValue:t,newValue:n,value:n,source:i});this.beans.eventService.dispatchEvent(r)}setGroupValue(e,t){const n=this.beans.columnModel.getGridColumn(e);qT(this.groupData)&&(this.groupData={});const i=n.getColId(),r=this.groupData[i];r!==t&&(this.groupData[i]=t,this.dispatchCellChangedEvent(n,t,r))}setAggData(e){const t=this.aggData;if(this.aggData=e,this.eventService){const n=e=>{const n=this.aggData?this.aggData[e]:void 0,i=t?t[e]:void 0;if(n===i)return;const r=this.beans.columnModel.lookupGridColumn(e);r&&this.dispatchCellChangedEvent(r,n,i)};for(const e in this.aggData)n(e);for(const t in e)t in this.aggData||n(t)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gos.isRowModelType("serverSide")){const e=this.beans.gos.get("treeData"),n=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(e?!!n&&n(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(e.EVENT_HAS_CHILDREN_CHANGED)))}hasChildren(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return this.group&&KT(this.childrenAfterGroup)}dispatchCellChangedEvent(t,n,i){const r={type:e.EVENT_CELL_CHANGED,node:this,column:t,newValue:n,oldValue:i};this.dispatchLocalEvent(r)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return!this.footer&&(this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master)}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(e){this.childrenAfterGroup&&this.childrenAfterGroup.forEach((t=>t.depthFirstSearch(e))),e(this)}calculateSelectedFromChildren(){var e;let t=!1,n=!1,i=!1;if(!(null==(e=this.childrenAfterGroup)?void 0:e.length))return this.selectable?this.selected:null;for(let r=0;r<this.childrenAfterGroup.length;r++){const e=this.childrenAfterGroup[r];let s=e.isSelected();if(!e.selectable){const t=e.calculateSelectedFromChildren();if(null===t)continue;s=t}switch(s){case!0:t=!0;break;case!1:n=!0;break;default:i=!0}}return i||t&&n?void 0:!!t||!n&&(this.selectable?this.selected:null)}setSelectedInitialValue(e){this.selected=e}selectThisNode(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";const r=!this.selectable&&t,s=this.selected===t;if(r||s)return!1;this.selected=t,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(e.EVENT_ROW_SELECTED));const o=this.sibling;o&&o.footer&&o.eventService&&o.dispatchLocalEvent(o.createLocalRowEvent(e.EVENT_ROW_SELECTED));const a=GT(VT({},this.createGlobalRowEvent(OR.EVENT_ROW_SELECTED)),{event:n||null,source:i});return this.beans.eventService.dispatchEvent(a),!0}setSelected(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";"boolean"!==typeof n?this.setSelectedParams({newValue:e,clearSelection:t,rangeSelect:!1,source:n}):console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.")}setSelectedParams(e){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):void 0===this.id?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(GT(VT({},e),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return"top"===this.rowPinned||"bottom"===this.rowPinned}isParentOfNode(e){let t=this.parent;for(;t;){if(t===e)return!0;t=t.parent}return!1}addEventListener(e,t){var n,i;this.eventService||(this.eventService=new W_),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new j_(this.beans.frameworkOverrides));const r=null!=(i=null==(n=this.frameworkEventListenerService)?void 0:n.wrap(t))?i:t;this.eventService.addEventListener(e,r)}removeEventListener(e,t){var n,i;if(!this.eventService)return;const r=null!=(i=null==(n=this.frameworkEventListenerService)?void 0:n.unwrap(t))?i:t;this.eventService.removeEventListener(e,r),this.eventService.noRegisteredListenersExist()&&(this.eventService=null)}onMouseEnter(){this.dispatchLocalEvent(this.createLocalRowEvent(e.EVENT_MOUSE_ENTER))}onMouseLeave(){this.dispatchLocalEvent(this.createLocalRowEvent(e.EVENT_MOUSE_LEAVE))}getFirstChildOfFirstChild(e){let t=this,n=!0,i=!1,r=null;for(;n&&!i;){const s=t.parent;YT(s)&&t.firstChild?s.rowGroupColumn===e&&(i=!0,r=s):n=!1,t=s}return i?r:null}isFullWidthCell(){if(this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this})}getRoute(){if(null==this.key)return;const e=[];let t=this;for(;null!=t.key;)e.push(t.key),t=t.parent;return e.reverse()}createFooter(){if(this.sibling)return;const t=new Set(["eventService","__objectId","sticky"]),n=new e(this.beans);Object.keys(this).forEach((e=>{t.has(e)||(n[e]=this[e])})),n.footer=!0,n.setRowTop(null),n.setRowIndex(null),n.oldRowTop=null,n.id="rowGroupFooter_"+this.id,n.sibling=this,this.sibling=n}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};aN.ID_PREFIX_ROW_GROUP="row-group-",aN.ID_PREFIX_TOP_PINNED="t-",aN.ID_PREFIX_BOTTOM_PINNED="b-",aN.OBJECT_ID_SEQUENCE=0,aN.EVENT_ROW_SELECTED="rowSelected",aN.EVENT_DATA_CHANGED="dataChanged",aN.EVENT_CELL_CHANGED="cellChanged",aN.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",aN.EVENT_MASTER_CHANGED="masterChanged",aN.EVENT_GROUP_CHANGED="groupChanged",aN.EVENT_MOUSE_ENTER="mouseEnter",aN.EVENT_MOUSE_LEAVE="mouseLeave",aN.EVENT_HEIGHT_CHANGED="heightChanged",aN.EVENT_TOP_CHANGED="topChanged",aN.EVENT_DISPLAYED_CHANGED="displayedChanged",aN.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",aN.EVENT_LAST_CHILD_CHANGED="lastChildChanged",aN.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",aN.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",aN.EVENT_EXPANDED_CHANGED="expandedChanged",aN.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",aN.EVENT_SELECTABLE_CHANGED="selectableChanged",aN.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",aN.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",aN.EVENT_DRAGGING_CHANGED="draggingChanged";var lN=aN,cN=class extends XP{constructor(){super('\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),n=jD(e,t),[i,r]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],s=e(i,r);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel("".concat(s," (").concat(n,")"))}onClicked(e,t,n){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:n.shiftKey,groupSelectsFiltered:t,event:n,source:"checkboxSelected"})}init(e){this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",(e=>{bR(e)})),this.addManagedListener(this.eCheckbox.getInputElement(),"click",(e=>{bR(e);const t=this.gos.get("groupSelectsFiltered"),n=this.eCheckbox.getValue();if(this.shouldHandleIndeterminateState(n,t)){0===this.onClicked(!0,t,e||{})&&this.onClicked(!1,t,e)}else n?this.onClicked(!1,t,e):this.onClicked(!0,t,e||{})})),this.addManagedListener(this.rowNode,lN.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this));if(this.gos.get("isRowSelectable")||"function"===typeof this.getIsVisible()){const e=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.rowNode,lN.EVENT_DATA_CHANGED,e),this.addManagedListener(this.rowNode,lN.EVENT_CELL_CHANGED,e),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(void 0===this.eCheckbox.getPreviousValue()||void 0===e)&&this.gos.isRowModelType("clientSide")}showOrHideSelect(){var e,t,n;let i=this.rowNode.selectable;const r=this.getIsVisible();if(i)if("function"===typeof r){const t=null==(e=this.overrides)?void 0:e.callbackParams;if(this.column){const e=this.column.createColumnFunctionCallbackParams(this.rowNode);i=r(VT(VT({},t),e))}else i=r(GT(VT({},t),{node:this.rowNode,data:this.rowNode.data}))}else i=null!=r&&r;if(null==(t=this.column)?void 0:t.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!i),this.setVisible(!0),void this.setDisplayed(!0);(null==(n=this.overrides)?void 0:n.removeHidden)?this.setDisplayed(i):this.setVisible(i)}getIsVisible(){var e,t;return this.overrides?this.overrides.isVisible:null==(t=null==(e=this.column)?void 0:e.getColDef())?void 0:t.checkboxSelection}};WT([QP("eCheckbox")],cN.prototype,"eCheckbox",2),WT([k_],cN.prototype,"postConstruct",1);var uN=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(uN||{}),dN=class extends MR{constructor(){super(...arguments),this.dragSourceAndParamsList=[],this.dropTargets=[]}init(){this.ePinnedIcon=CP("columnMovePin",this.gos,null),this.eHideIcon=CP("columnMoveHide",this.gos,null),this.eMoveIcon=CP("columnMoveMove",this.gos,null),this.eLeftIcon=CP("columnMoveLeft",this.gos,null),this.eRightIcon=CP("columnMoveRight",this.gos,null),this.eGroupIcon=CP("columnMoveGroup",this.gos,null),this.eAggregateIcon=CP("columnMoveValue",this.gos,null),this.ePivotIcon=CP("columnMovePivot",this.gos,null),this.eDropNotAllowedIcon=CP("dropNotAllowed",this.gos,null)}addDragSource(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:n,dragSource:e}),this.dragService.addDragSource(n)}removeDragSource(e){const t=this.dragSourceAndParamsList.find((t=>t.dragSource===e));t&&(this.dragService.removeDragSource(t.params),aR(this.dragSourceAndParamsList,t))}clearDragSourceParamsList(){this.dragSourceAndParamsList.forEach((e=>this.dragService.removeDragSource(e.params))),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=void 0,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(e){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){const t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()}onDragging(e,t){var n,i,r,s;const o=this.getHorizontalDirection(e),a=this.getVerticalDirection(e);this.eventLastTime=e,this.positionGhost(e);const l=this.dropTargets.filter((t=>this.isMouseOnDropTarget(e,t))),c=this.findCurrentDropTarget(e,l);if(c!==this.lastDropTarget)this.leaveLastTargetIfExists(e,o,a,t),null!==this.lastDropTarget&&null===c&&(null==(i=(n=this.dragSource).onGridExit)||i.call(n,this.dragItem)),null===this.lastDropTarget&&null!==c&&(null==(s=(r=this.dragSource).onGridEnter)||s.call(r,this.dragItem)),this.enterDragTargetIfExists(c,e,o,a,t),this.lastDropTarget=c;else if(c&&c.onDragging){const n=this.createDropTargetEvent(c,e,o,a,t);c.onDragging(n)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,n=[[e.getContainer()]];return t?n.concat(t):n}allContainersIntersect(e,t){for(const n of t){const t=n.getBoundingClientRect();if(0===t.width||0===t.height)return!1;const i=e.clientX>=t.left&&e.clientX<t.right,r=e.clientY>=t.top&&e.clientY<t.bottom;if(!i||!r)return!1}return!0}isMouseOnDropTarget(e,t){const n=this.getAllContainersFromDropTarget(t);let i=!1;for(const r of n)if(this.allContainersIntersect(e,r)){i=!0;break}return!(t.targetContainsSource&&!t.getContainer().contains(this.dragSource.eElement))&&(i&&t.isInterestedIn(this.dragSource.type,this.dragSource.eElement))}findCurrentDropTarget(e,t){const n=t.length;if(0===n)return null;if(1===n)return t[0];const i=this.gos.getRootNode().elementsFromPoint(e.clientX,e.clientY);for(const r of i)for(const e of t){if(-1!==gR(this.getAllContainersFromDropTarget(e)).indexOf(r))return e}return null}enterDragTargetIfExists(e,t,n,i,r){if(e){if(e.onDragEnter){const s=this.createDropTargetEvent(e,t,n,i,r);e.onDragEnter(s)}this.setGhostIcon(e.getIconName?e.getIconName():null)}}leaveLastTargetIfExists(e,t,n,i){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){const r=this.createDropTargetEvent(this.lastDropTarget,e,t,n,i);this.lastDropTarget.onDragLeave(r)}this.setGhostIcon(null)}}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter((t=>t.getContainer()!==e.getContainer()))}hasExternalDropZones(){return this.dropTargets.some((e=>e.external))}findExternalZone(e){return this.dropTargets.filter((e=>e.external)).find((t=>t.getContainer()===e.getContainer()))||null}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,n=e.clientX;return t===n?null:t>n?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,n=e.clientY;return t===n?null:t>n?0:1}createDropTargetEvent(e,t,n,i,r){const s=e.getContainer(),o=s.getBoundingClientRect(),{gridApi:a,columnApi:l,dragItem:c,dragSource:u}=this;return{event:t,x:t.clientX-o.left,y:t.clientY-o.top,vDirection:i,hDirection:n,dragSource:u,fromNudge:r,dragItem:c,api:a,columnApi:l,dropZoneTarget:s}}positionGhost(e){const t=this.eGhost;if(!t)return;const n=t.getBoundingClientRect().height,i=lM()-2,r=cM()-2,s=HM(t.offsetParent),{clientY:o,clientX:a}=e;let l=o-s.top-n/2,c=a-s.left-10;const u=this.gos.getDocument(),d=u.defaultView||window,h=d.pageYOffset||u.documentElement.scrollTop,p=d.pageXOffset||u.documentElement.scrollLeft;i>0&&c+t.clientWidth>i+p&&(c=i+p-t.clientWidth),c<0&&(c=0),r>0&&l+t.clientHeight>r+h&&(l=r+h-t.clientHeight),l<0&&(l=0),t.style.left="".concat(c,"px"),t.style.top="".concat(l,"px")}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=XM(dN.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);const{theme:e}=this.environment.getTheme();e&&this.eGhost.classList.add(e),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);const t=this.eGhost.querySelector(".ag-dnd-ghost-label");let n=this.dragSource.dragItemName;y_(n)&&(n=n()),t.innerHTML=zR(n)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";const i=this.gos.getDocument();let r=null,s=null;try{r=i.fullscreenElement}catch(rre){}finally{r||(r=this.gos.getRootNode());const e=r.querySelector("body");s=e||(r instanceof ShadowRoot?r:r instanceof Document?null==r?void 0:r.documentElement:r)}this.eGhostParent=s,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")}setGhostIcon(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];zM(this.eGhostIcon);let n=null;switch(e||(e=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():dN.ICON_NOT_ALLOWED),e){case dN.ICON_PINNED:n=this.ePinnedIcon;break;case dN.ICON_MOVE:n=this.eMoveIcon;break;case dN.ICON_LEFT:n=this.eLeftIcon;break;case dN.ICON_RIGHT:n=this.eRightIcon;break;case dN.ICON_GROUP:n=this.eGroupIcon;break;case dN.ICON_AGGREGATE:n=this.eAggregateIcon;break;case dN.ICON_PIVOT:n=this.ePivotIcon;break;case dN.ICON_NOT_ALLOWED:n=this.eDropNotAllowedIcon;break;case dN.ICON_HIDE:n=this.eHideIcon}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",t),n===this.eHideIcon&&this.gos.get("suppressDragLeaveHidesColumns")||n&&this.eGhostIcon.appendChild(n)}};dN.ICON_PINNED="pinned",dN.ICON_MOVE="move",dN.ICON_LEFT="left",dN.ICON_RIGHT="right",dN.ICON_GROUP="group",dN.ICON_AGGREGATE="aggregate",dN.ICON_PIVOT="pivot",dN.ICON_NOT_ALLOWED="notAllowed",dN.ICON_HIDE="hide",dN.GHOST_TEMPLATE='<div class="ag-dnd-ghost ag-unselectable">\n            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n            <div class="ag-dnd-ghost-label"></div>\n        </div>',WT([F_("dragService")],dN.prototype,"dragService",2),WT([F_("mouseEventService")],dN.prototype,"mouseEventService",2),WT([F_("columnApi")],dN.prototype,"columnApi",2),WT([F_("gridApi")],dN.prototype,"gridApi",2),WT([k_],dN.prototype,"init",1),WT([O_],dN.prototype,"clearDragSourceParamsList",1),dN=WT([L_("dragAndDropService")],dN);var hN=class extends XP{constructor(e,t,n,i,r,s){super(),this.cellValueFn=e,this.rowNode=t,this.column=n,this.customGui=i,this.dragStartPixels=r,this.suppressVisibilityChange=s,this.dragSource=null}isCustomGui(){return null!=this.customGui}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(wP("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gos.get("rowDragManaged")?new fN(this,this.beans,this.rowNode,this.column):new gN(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const e=this.beans.selectionService.getSelectedNodes();return-1!==e.indexOf(this.rowNode)?e:[this.rowNode]}checkCompatibility(){const e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&f_("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this.dragSource&&this.removeDragSource();const t=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:this.getGui(),dragItemName:()=>{var e;const n=this.getDragItem(),i=(null==(e=n.rowNodes)?void 0:e.length)||1,r=this.getRowDragText(this.column);return r?r(n,i):1===i?this.cellValueFn():"".concat(i," ").concat(t("rowDragRows","rows"))},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}removeDragSource(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null}};WT([F_("beans")],hN.prototype,"beans",2),WT([k_],hN.prototype,"postConstruct",1),WT([O_],hN.prototype,"removeDragSource",1);var pN=class extends MR{constructor(e,t,n){super(),this.parent=e,this.rowNode=t,this.column=n}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let e=!0,n=!1;this.column&&(e=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),n=y_(this.column.getColDef().rowDrag)),n?(this.parent.setDisplayed(!0,t),this.parent.setVisible(e,t)):(this.parent.setDisplayed(e,t),this.parent.setVisible(!0,t))}}},gN=class extends pN{constructor(e,t,n,i){super(e,n,i),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,OR.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}};WT([k_],gN.prototype,"postConstruct",1);var fN=class extends pN{constructor(e,t,n,i){super(e,n,i),this.beans=t}postConstruct(){this.addManagedListener(this.beans.eventService,OR.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,OR.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,OR.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,OR.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),t=e&&e.shouldPreventRowMove(),n=this.gos.get("suppressRowDrag"),i=this.beans.dragAndDropService.hasExternalDropZones(),r=t&&!i||n;this.setDisplayedOrVisible(r)}};WT([k_],fN.prototype,"postConstruct",1);var mN=class extends MR{init(e,t,n,i,r,s,o){var a,l,c,u;this.params=o,this.eGui=t,this.eCheckbox=n,this.eExpanded=i,this.eContracted=r,this.comp=e,this.compClass=s;const{node:d,value:h,colDef:p}=o,g=this.isTopLevelFooter();if(!g){if(this.isEmbeddedRowMismatch())return;if(d.footer&&this.gos.get("groupHideOpenParents")){if((p&&p.showRowGroup)!==(d.rowGroupColumn&&d.rowGroupColumn.getColId()))return}}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!g){const e=o.node.footer&&o.node.rowGroupIndex===this.columnModel.getRowGroupColumns().findIndex((e=>{var t;return e.getColId()===(null==(t=o.colDef)?void 0:t.showRowGroup)})),t="multipleColumns"!=this.gos.get("groupDisplayType")||this.gos.get("treeData")||this.gos.get("showOpenedGroup")&&!o.node.footer&&(!o.node.group||null!=o.node.rowGroupIndex&&o.node.rowGroupIndex>this.columnModel.getRowGroupColumns().findIndex((e=>{var t;return e.getColId()===(null==(t=o.colDef)?void 0:t.showRowGroup)}))),n=!d.group&&((null==(a=this.params.colDef)?void 0:a.field)||(null==(l=this.params.colDef)?void 0:l.valueGetter)),i=this.isExpandable(),r=this.columnModel.isPivotMode()&&d.leafGroup&&(null==(c=d.rowGroupColumn)?void 0:c.getColId())===(null==(u=o.column)?void 0:u.getColDef().showRowGroup);if(!this.showingValueForOpenedParent&&!i&&!n&&!t&&!e&&!r)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()}getCellAriaRole(){var e,t;const n=null==(e=this.params.colDef)?void 0:e.cellAriaRole,i=null==(t=this.params.column)?void 0:t.getColDef().cellAriaRole;return n||i||"gridcell"}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){const{node:e,eGridCell:t}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable())return void DD(t);const n=()=>{RD(t,!!e.expanded)};this.expandListener=this.addManagedListener(e,lN.EVENT_EXPANDED_CHANGED,n)||null,n()}isTopLevelFooter(){if(!this.gos.getGrandTotalRow())return!1;if(null!=this.params.value||-1!=this.params.node.level)return!1;const e=this.params.colDef;if(null==e)return!0;if(!0===e.showRowGroup)return!0;const t=this.columnModel.getRowGroupColumns();if(!t||0===t.length)return!0;return t[0].getId()===e.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gos.get("embedFullWidthRows"))return!1;const e="left"===this.params.pinned,t="right"===this.params.pinned,n=!e&&!t;return this.gos.get("enableRtl")?this.columnModel.isPinningLeft()?!t:!n:this.columnModel.isPinningLeft()?!e:!n}findDisplayedGroupNode(){const e=this.params.column,t=this.params.node;if(this.showingValueForOpenedParent){let n=t.parent;for(;null!=n;){if(n.rowGroupColumn&&e.isRowGroupDisplayed(n.rowGroupColumn.getId())){this.displayedGroupNode=n;break}n=n.parent}}qT(this.displayedGroupNode)&&(this.displayedGroupNode=t)}setupShowingValueForOpenedParent(){const e=this.params.node,t=this.params.column;if(!this.gos.get("groupHideOpenParents"))return void(this.showingValueForOpenedParent=!1);if(!e.groupData)return void(this.showingValueForOpenedParent=!1);if(null!=e.rowGroupColumn){const n=e.rowGroupColumn.getId();if(t.isRowGroupDisplayed(n))return void(this.showingValueForOpenedParent=!1)}const n=null!=e.groupData[t.getId()];this.showingValueForOpenedParent=n}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){var e;const t=this.adjustParamsWithDetailsFromRelatedColumn(),n=this.getInnerCompDetails(t),{valueFormatted:i,value:r}=t;let s=i;if(null==s){const t=this.displayedGroupNode.rowGroupColumn&&(null==(e=this.params.column)?void 0:e.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));if(""===this.displayedGroupNode.key&&this.displayedGroupNode.group&&t){s=this.localeService.getLocaleTextFunc()("blanks","(Blanks)")}else s=null!=r?r:null}this.comp.setInnerRenderer(n,s)}adjustParamsWithDetailsFromRelatedColumn(){const e=this.displayedGroupNode.rowGroupColumn,t=this.params.column;if(!e)return this.params;if(null!=t){if(!t.isRowGroupDisplayed(e.getId()))return this.params}const n=this.params,{value:i,node:r}=this.params,s=this.valueService.formatValue(e,r,i);return GT(VT({},n),{valueFormatted:s})}addFooterValue(){let e=this.params.totalValueGetter;if(!e){const t=this.params.footerValueGetter;t&&(e=t,f_("As of v31.3, footerValueGetter is deprecated. Use `totalValueGetter` instead."))}let t="";if(e){const n=s_(this.params);n.value=this.params.value,"function"===typeof e?t=e(n):"string"===typeof e?t=this.expressionService.evaluate(e,n):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else{t=this.localeService.getLocaleTextFunc()("footerTotal","Total")+" "+(null!=this.params.value?this.params.value:"")}const n=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(n,t)}getInnerCompDetails(e){if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gos.get("groupRowRendererParams"),e);const t=this.userComponentFactory.getInnerRendererDetails(e,e),n=e=>e&&e.componentClass==this.compClass;if(t&&!n(t))return t;const i=this.displayedGroupNode.rowGroupColumn,r=i?i.getColDef():void 0;if(!r)return;const s=this.userComponentFactory.getCellRendererDetails(r,e);if(s&&!n(s))return s;if(n(s)&&r.cellRendererParams&&r.cellRendererParams.innerRenderer){return this.userComponentFactory.getInnerRendererDetails(r.cellRendererParams,e)}}addChildCount(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,lN.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())}updateChildCount(){const e=this.displayedGroupNode.allChildrenCount,t=this.isShowRowGroupForThisRow()&&null!=e&&e>=0?"(".concat(e,")"):"";this.comp.setChildCount(t)}isShowRowGroupForThisRow(){if(this.gos.get("treeData"))return!0;const e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;const t=this.params.column;return null==t||t.isRowGroupDisplayed(e.getId())}addExpandAndContract(){var e;const t=this.params,n=wP("groupExpanded",this.gos,null),i=wP("groupContracted",this.gos,null);n&&this.eExpanded.appendChild(n),i&&this.eContracted.appendChild(i);const r=t.eGridCell;(null==(e=this.params.column)?void 0:e.isCellEditable(t.node))&&this.gos.get("enableGroupEdit")||!this.isExpandable()||t.suppressDoubleClickExpand||this.addManagedListener(r,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(r,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(t.node,lN.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();const s=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,lN.EVENT_ALL_CHILDREN_COUNT_CHANGED,s),this.addManagedListener(this.displayedGroupNode,lN.EVENT_MASTER_CHANGED,s),this.addManagedListener(this.displayedGroupNode,lN.EVENT_GROUP_CHANGED,s),this.addManagedListener(this.displayedGroupNode,lN.EVENT_HAS_CHILDREN_CHANGED,s)}onExpandClicked(e){SR(e)||(bR(e),this.onExpandOrContract(e))}onExpandOrContract(e){const t=this.displayedGroupNode,n=!t.expanded;!n&&t.sticky&&this.scrollToStickyNode(t),t.setExpanded(n,e)}scrollToStickyNode(e){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(e.rowTop-e.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;const e=this.displayedGroupNode,t=this.columnModel.isPivotMode()&&e.leafGroup;if(!(e.isExpandable()&&!e.footer&&!t))return!1;const n=this.params.column;if(null!=n&&"string"===typeof n.getColDef().showRowGroup){return this.isShowRowGroupForThisRow()}return!0}showExpandAndContractIcons(){const{params:e,displayedGroupNode:t,columnModel:n}=this,{node:i}=e,r=this.isExpandable();if(r){const e=!!this.showingValueForOpenedParent||i.expanded;this.comp.setExpandedDisplayed(e),this.comp.setContractedDisplayed(!e)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);const s=n.isPivotMode(),o=s&&t.leafGroup,a=r&&!o,l=i.footer&&-1===i.level;this.comp.addOrRemoveCssClass("ag-cell-expandable",a),this.comp.addOrRemoveCssClass("ag-row-group",a),s?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",o):l||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!a)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){const e=this.params.node;this.params.suppressPadding||(this.addManagedListener(e,lN.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())}setIndent(){if(this.gos.get("groupHideOpenParents"))return;const e=this.params,t=e.node,n=!!e.colDef,i=this.gos.get("treeData"),r=!n||i||!0===e.colDef.showRowGroup?t.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+r,this.comp.addOrRemoveCssClass(this.indentClass,!0)}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;const e=new hN((()=>this.params.value),this.params.node);this.createManagedBean(e,this.context),this.eGui.insertAdjacentElement("afterbegin",e.getGui())}isUserWantsSelected(){const e=this.params.checkbox;return"function"===typeof e||!0===e}addCheckboxIfNeeded(){const e=this.displayedGroupNode,t=this.isUserWantsSelected()&&!e.footer&&!e.rowPinned&&!e.detail;if(t){const e=new cN;this.getContext().createBean(e),e.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(e.getGui()),this.addDestroyFunc((()=>this.getContext().destroyBean(e)))}this.comp.setCheckboxVisible(t)}onKeyDown(e){if(!(e.key===SP.ENTER)||this.params.suppressEnterExpand)return;this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(e)}onCellDblClicked(e){if(SR(e))return;AR(this.eExpanded,e)||AR(this.eContracted,e)||this.onExpandOrContract(e)}};WT([F_("expressionService")],mN.prototype,"expressionService",2),WT([F_("valueService")],mN.prototype,"valueService",2),WT([F_("columnModel")],mN.prototype,"columnModel",2),WT([F_("userComponentFactory")],mN.prototype,"userComponentFactory",2),WT([F_("ctrlsService")],mN.prototype,"ctrlsService",2);var vN=class e extends XP{constructor(){super(e.TEMPLATE)}init(e){const t={setInnerRenderer:(e,t)=>this.setRenderDetails(e,t),setChildCount:e=>this.eChildCount.textContent=e,addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setContractedDisplayed:e=>IM(this.eContracted,e),setExpandedDisplayed:e=>IM(this.eExpanded,e),setCheckboxVisible:e=>this.eCheckbox.classList.toggle("ag-invisible",!e)},n=this.createManagedBean(new mN),i=!e.colDef,r=this.getGui();n.init(t,r,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),i&&pD(r,n.getCellAriaRole())}setRenderDetails(e,t){if(e){const t=e.newAgStackInstance();if(!t)return;t.then((e=>{if(!e)return;const t=()=>this.context.destroyBean(e);this.isAlive()?(this.eValue.appendChild(e.getGui()),this.addDestroyFunc(t)):t()}))}else this.eValue.innerText=t}destroy(){this.getContext().destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}};vN.TEMPLATE='<span class="ag-cell-wrapper">\n            <span class="ag-group-expanded" ref="eExpanded"></span>\n            <span class="ag-group-contracted" ref="eContracted"></span>\n            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>\n            <span class="ag-group-value" ref="eValue"></span>\n            <span class="ag-group-child-count" ref="eChildCount"></span>\n        </span>',WT([QP("eExpanded")],vN.prototype,"eExpanded",2),WT([QP("eContracted")],vN.prototype,"eContracted",2),WT([QP("eCheckbox")],vN.prototype,"eCheckbox",2),WT([QP("eValue")],vN.prototype,"eValue",2),WT([QP("eChildCount")],vN.prototype,"eChildCount",2);var yN=vN,CN=class e extends XP{constructor(){super(e.TEMPLATE)}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=wP("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}};CN.TEMPLATE='<div class="ag-loading">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',WT([QP("eLoadingIcon")],CN.prototype,"eLoadingIcon",2),WT([QP("eLoadingText")],CN.prototype,"eLoadingText",2);var wN=CN,bN=class e extends XP{constructor(){super(e.TEMPLATE)}init(e){const t="ag-cell-skeleton-renderer-".concat(this.getCompId());this.getGui().setAttribute("id",t),this.addDestroyFunc((()=>CD(e.eParentOfValue))),CD(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");yD(this.getGui(),t)}setupLoading(){const e=this.gos.getDocument().createElement("div");e.classList.add("ag-skeleton-effect"),this.getGui().appendChild(e);const t=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");yD(this.getGui(),t)}refresh(e){return!1}destroy(){super.destroy()}};bN.TEMPLATE='<div class="ag-skeleton-container"></div>';var SN=bN,EN=class e extends XP{constructor(){super()}destroy(){super.destroy()}init(t){const n=this.gos.get("overlayLoadingTemplate");if(this.setTemplate(null!=n?n:e.DEFAULT_LOADING_OVERLAY_TEMPLATE),!n){const e=this.localeService.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("loadingOoo","Loading...")}))}}};EN.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>';var xN=EN,AN=class e extends XP{constructor(){super()}destroy(){super.destroy()}init(t){const n=this.gos.get("overlayNoRowsTemplate");if(this.setTemplate(null!=n?n:e.DEFAULT_NO_ROWS_TEMPLATE),!n){const e=this.localeService.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("noRowsToShow","No Rows To Show")}))}}};AN.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center"></span>';var TN=AN,_N=class extends $I{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=zR(t,!0)}},RN=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'}init(e,t){this.eInput=e,this.params=t,null!=t.max&&e.setMax(t.max),null!=t.min&&e.setMin(t.min),null!=t.precision&&e.setPrecision(t.precision),null!=t.step&&e.setStep(t.step);const n=e.getInputElement();t.preventStepping?e.addManagedListener(n,"keydown",this.preventStepping):t.showStepperButtons&&n.classList.add("ag-number-field-input-stepper")}preventStepping(e){e.key!==SP.UP&&e.key!==SP.DOWN||e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!YT(e)&&!YT(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(null==t)return t;if("string"===typeof t){if(""===t)return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}},DN=class extends nN{constructor(){super(new RN)}},MN=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,t){this.eInput=e,this.params=t,null!=t.min&&e.setMin(t.min),null!=t.max&&e.setMax(t.max),null!=t.step&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return YT(e)||YT(this.params.value)?null!=e?e:null:this.params.value}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return SM(e,!1)}},PN=class extends nN{constructor(){super(new MN)}},IN=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,t){this.eInput=e,this.params=t,null!=t.min&&e.setMin(t.min),null!=t.max&&e.setMax(t.max),null!=t.step&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return YT(e)||YT(this.params.value)?this.params.parseValue(null!=e?e:""):this.params.value}getStartValue(){var e,t;return SM(null!=(t=this.parseDate(null!=(e=this.params.value)?e:void 0))?t:null,!1)}parseDate(e){return this.getDataTypeService().getDateParserFunction(this.params.column)(e)}formatDate(e){return this.getDataTypeService().getDateFormatterFunction(this.params.column)(e)}},NN=class extends nN{constructor(){super(new IN((()=>this.dataTypeService)))}};WT([F_("dataTypeService")],NN.prototype,"dataTypeService",2);var kN=class e extends XP{constructor(){super(e.TEMPLATE)}init(e){this.params=e,this.updateCheckbox(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),bD(t,"polite"),this.addManagedListener(t,"click",(e=>{if(bR(e),this.eCheckbox.isDisabled())return;const t=this.eCheckbox.getValue();this.onCheckboxChanged(t)})),this.addManagedListener(t,"dblclick",(e=>{bR(e)})),this.addManagedListener(this.params.eGridCell,"keydown",(e=>{if(e.key===SP.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===this.gos.getActiveDomElement()&&this.eCheckbox.toggle();const t=this.eCheckbox.getValue();this.onCheckboxChanged(t),e.preventDefault()}}))}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var t,n,i;let r,s=!0;if(e.node.group&&e.column){const n=e.column.getColId();n.startsWith(BR)?r=null==e.value||""===e.value?void 0:"true"===e.value:e.node.aggData&&void 0!==e.node.aggData[n]?r=null!=(t=e.value)?t:void 0:s=!1}else r=null!=(n=e.value)?n:void 0;if(!s)return void this.eCheckbox.setDisplayed(!1);this.eCheckbox.setValue(r);const o=null!=e.disabled?e.disabled:!(null==(i=e.column)?void 0:i.isCellEditable(e.node));this.eCheckbox.setDisabled(o);const a=this.localeService.getLocaleTextFunc(),l=jD(a,r),c=o?l:"".concat(a("ariaToggleCellValue","Press SPACE to toggle cell value")," (").concat(l,")");this.eCheckbox.setInputAriaLabel(c)}onCheckboxChanged(e){const{column:t,node:n,rowIndex:i,value:r}=this.params,s={type:OR.EVENT_CELL_EDITING_STARTED,column:t,colDef:null==t?void 0:t.getColDef(),data:n.data,node:n,rowIndex:i,rowPinned:n.rowPinned,value:r};this.eventService.dispatchEvent(s);const o=this.params.node.setDataValue(this.params.column,e,"edit"),a={type:OR.EVENT_CELL_EDITING_STOPPED,column:t,colDef:null==t?void 0:t.getColDef(),data:n.data,node:n,rowIndex:i,rowPinned:n.rowPinned,value:r,oldValue:r,newValue:e,valueChanged:o};this.eventService.dispatchEvent(a)}};kN.TEMPLATE='\n        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">\n            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n        </div>',WT([QP("eCheckbox")],kN.prototype,"eCheckbox",2);var ON=kN,LN=class extends $I{constructor(){super('\n            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')}init(e){var t;this.params=e;const n=null!=(t=e.value)?t:void 0;this.eCheckbox.setValue(n);this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(n),this.addManagedListener(this.eCheckbox,OR.EVENT_FIELD_VALUE_CHANGED,(e=>this.setAriaLabel(e.selected)))}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),n=jD(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel("".concat(i," (").concat(n,")"))}};WT([QP("eCheckbox")],LN.prototype,"eCheckbox",2);var FN=class extends XP{constructor(){super(),this.setTemplate("<div></div>")}init(e){var t;this.params=e,this.cssClassPrefix=null!=(t=this.params.cssClassPrefix)?t:"ag-menu-option",this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addIcon(){if(this.params.isCompact)return;const e=XM('<span ref="eIcon" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("icon"),'" role="presentation"></span>'));this.params.checked?e.appendChild(wP("check",this.gos)):this.params.icon&&(aP(this.params.icon)?e.appendChild(this.params.icon):"string"===typeof this.params.icon?e.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(e)}addName(){const e=XM('<span ref="eName" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("text"),'">').concat(this.params.name||"","</span>"));this.getGui().appendChild(e)}addShortcut(){if(this.params.isCompact)return;const e=XM('<span ref="eShortcut" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("shortcut"),'">').concat(this.params.shortcut||"","</span>"));this.getGui().appendChild(e)}addSubMenu(){const e=XM('<span ref="ePopupPointer" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("popup-pointer"),'"></span>')),t=this.getGui();if(this.params.subMenu){const n=this.gos.get("enableRtl")?"smallLeft":"smallRight";RD(t,!1),e.appendChild(wP(n,this.gos))}t.appendChild(e)}getClassName(e){return"".concat(this.cssClassPrefix,"-").concat(e)}destroy(){super.destroy()}},BN=class extends MR{constructor(){super(...arguments),this.agGridDefaults={agDateInput:DI,agColumnHeader:XI,agColumnGroupHeader:ZI,agSortIndicator:qI,agTextColumnFloatingFilter:jI,agNumberColumnFloatingFilter:WI,agDateColumnFloatingFilter:RI,agReadOnlyFloatingFilter:$P,agAnimateShowChangeCellRenderer:sN,agAnimateSlideCellRenderer:oN,agGroupCellRenderer:yN,agGroupRowRenderer:yN,agLoadingCellRenderer:wN,agSkeletonCellRenderer:SN,agCheckboxCellRenderer:ON,agCellEditor:rN,agTextCellEditor:rN,agNumberCellEditor:DN,agDateCellEditor:PN,agDateStringCellEditor:NN,agSelectCellEditor:tN,agLargeTextCellEditor:eN,agCheckboxCellEditor:LN,agTextColumnFilter:BI,agNumberColumnFilter:OI,agDateColumnFilter:TI,agLoadingOverlay:xN,agNoRowsOverlay:TN,agTooltipComponent:_N,agMenuItem:FN},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}init(){const e=this.gos.get("components");null!=e&&r_(e,((e,t)=>this.registerJsComponent(e,t)))}registerDefaultComponent(e,t){this.agGridDefaults[e]?console.error("Trying to overwrite a default component. You should call registerComponent"):this.agGridDefaults[e]=t}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const n=(e,t)=>({componentFromFramework:t,component:e}),i=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(null!=i)return n(i,!0);const r=this.jsComps[t];if(r){return n(r,this.getFrameworkOverrides().isFrameworkComponent(r))}const s=this.agGridDefaults[t];if(s)return n(s,!1);const o=this.enterpriseAgDefaultCompsModule[t];return o?P_.__assertRegistered(o,"AG Grid '".concat(e,"' component: ").concat(t),this.context.getGridId()):g_((()=>{this.warnAboutMissingComponent(e,t)}),"MissingComp"+t),null}warnAboutMissingComponent(e,t){const n=[...Object.keys(this.agGridDefaults).filter((e=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(e))),...Object.keys(this.jsComps)],i=fP(t,n,!0,.8).values;console.warn("AG Grid: Could not find '".concat(t,"' component. It was configured as \"").concat(e,": '").concat(t,"'\" but it wasn't found in the list of registered components.")),i.length>0&&console.warn("         Did you mean: [".concat(i.slice(0,3),"]?")),console.warn("If using a custom component check it has been registered as described in: ".concat(this.getFrameworkOverrides().getDocLink("components/")))}};WT([k_],BN.prototype,"init",1),BN=WT([L_("userComponentRegistry")],BN);var VN={propertyName:"dateComponent",cellRenderer:!1},GN={propertyName:"headerComponent",cellRenderer:!1},HN={propertyName:"headerGroupComponent",cellRenderer:!1},WN={propertyName:"cellRenderer",cellRenderer:!0},jN={propertyName:"loadingCellRenderer",cellRenderer:!0},UN={propertyName:"cellEditor",cellRenderer:!1},zN={propertyName:"innerRenderer",cellRenderer:!0},YN={propertyName:"loadingOverlayComponent",cellRenderer:!1},qN={propertyName:"noRowsOverlayComponent",cellRenderer:!1},KN={propertyName:"tooltipComponent",cellRenderer:!1},XN={propertyName:"filter",cellRenderer:!1},QN={propertyName:"floatingFilterComponent",cellRenderer:!1},ZN={propertyName:"toolPanel",cellRenderer:!1},$N={propertyName:"statusPanel",cellRenderer:!1},JN={propertyName:"fullWidthCellRenderer",cellRenderer:!0},ek={propertyName:"loadingCellRenderer",cellRenderer:!0},tk={propertyName:"groupRowRenderer",cellRenderer:!0},nk={propertyName:"detailCellRenderer",cellRenderer:!0},ik={propertyName:"menuItem",cellRenderer:!1},rk=class{static getFloatingFilterType(e){return this.filterToFloatingFilterMapping[e]}};rk.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"};var sk=class extends MR{getHeaderCompDetails(e,t){return this.getCompDetails(e,GN,"agColumnHeader",t)}getHeaderGroupCompDetails(e){const t=e.columnGroup.getColGroupDef();return this.getCompDetails(t,HN,"agColumnGroupHeader",e)}getFullWidthCellRendererDetails(e){return this.getCompDetails(this.gridOptions,JN,null,e,!0)}getFullWidthLoadingCellRendererDetails(e){return this.getCompDetails(this.gridOptions,ek,"agLoadingCellRenderer",e,!0)}getFullWidthGroupCellRendererDetails(e){return this.getCompDetails(this.gridOptions,tk,"agGroupRowRenderer",e,!0)}getFullWidthDetailCellRendererDetails(e){return this.getCompDetails(this.gridOptions,nk,"agDetailCellRenderer",e,!0)}getInnerRendererDetails(e,t){return this.getCompDetails(e,zN,null,t)}getFullWidthGroupRowInnerCellRenderer(e,t){return this.getCompDetails(e,zN,null,t)}getCellRendererDetails(e,t){return this.getCompDetails(e,WN,null,t)}getLoadingCellRendererDetails(e,t){return this.getCompDetails(e,jN,"agSkeletonCellRenderer",t,!0)}getCellEditorDetails(e,t){return this.getCompDetails(e,UN,"agCellEditor",t,!0)}getFilterDetails(e,t,n){return this.getCompDetails(e,XN,n,t,!0)}getDateCompDetails(e){return this.getCompDetails(this.gridOptions,VN,"agDateInput",e,!0)}getLoadingOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,YN,"agLoadingOverlay",e,!0)}getNoRowsOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,qN,"agNoRowsOverlay",e,!0)}getTooltipCompDetails(e){return this.getCompDetails(e.colDef,KN,"agTooltipComponent",e,!0)}getSetFilterCellRendererDetails(e,t){return this.getCompDetails(e,WN,null,t)}getFloatingFilterCompDetails(e,t,n){return this.getCompDetails(e,QN,n,t)}getToolPanelCompDetails(e,t){return this.getCompDetails(e,ZN,null,t,!0)}getStatusPanelCompDetails(e,t){return this.getCompDetails(e,$N,null,t,!0)}getMenuItemCompDetails(e,t){return this.getCompDetails(e,ik,"agMenuItem",t,!0)}getCompDetails(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{propertyName:s,cellRenderer:o}=t;let{compName:a,jsComp:l,fwComp:c,paramsFromSelector:u,popupFromSelector:d,popupPositionFromSelector:h}=this.getCompKeys(e,t,i);const p=e=>{const t=this.userComponentRegistry.retrieve(s,e);t&&(l=t.componentFromFramework?void 0:t.component,c=t.componentFromFramework?t.component:void 0)};if(null!=a&&p(a),null==l&&null==c&&null!=n&&p(n),l&&o&&!this.agComponentUtils.doesImplementIComponent(l)&&(l=this.agComponentUtils.adaptFunction(s,l)),!l&&!c)return void(r&&console.error("AG Grid: Could not find component ".concat(a,", did you forget to configure this component?")));const g=this.mergeParamsWithApplicationProvidedParams(e,t,i,u),f=null==l,m=l||c;return{componentFromFramework:f,componentClass:m,params:g,type:t,popupFromSelector:d,popupPositionFromSelector:h,newAgStackInstance:()=>this.newAgStackInstance(m,f,g,t)}}getCompKeys(e,t,n){const{propertyName:i}=t;let r,s,o,a,l,c;if(e){const t=e,u=t[i+"Selector"],d=u?u(n):null,h=e=>{if("string"===typeof e)r=e;else if(null!=e&&!0!==e){this.getFrameworkOverrides().isFrameworkComponent(e)?o=e:s=e}};d?(h(d.component),a=d.params,l=d.popup,c=d.popupPosition):h(t[i])}return{compName:r,jsComp:s,fwComp:o,paramsFromSelector:a,popupFromSelector:l,popupPositionFromSelector:c}}newAgStackInstance(e,t,n,i){const r=i.propertyName;let s;if(!t)s=new e;else{const t=this.componentMetadataProvider.retrieve(r);s=this.frameworkComponentWrapper.wrap(e,t.mandatoryMethodList,t.optionalMethodList,i)}const o=this.initComponent(s,n);return null==o?WP.resolve(s):o.then((()=>s))}mergeParamsWithApplicationProvidedParams(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r=this.gos.getGridCommonParams();l_(r,n);const s=e&&e[t.propertyName+"Params"];if("function"===typeof s){l_(r,s(n))}else"object"===typeof s&&l_(r,s);return l_(r,i),r}initComponent(e,t){if(this.context.createBean(e),null!=e.init)return e.init(t)}getDefaultFloatingFilterType(e,t){if(null==e)return null;let n=null,{compName:i,jsComp:r,fwComp:s}=this.getCompKeys(e,XN);if(i)n=rk.getFloatingFilterType(i);else{null==r&&null==s&&!0===e.filter&&(n=t())}return n}};WT([F_("gridOptions")],sk.prototype,"gridOptions",2),WT([F_("agComponentUtils")],sk.prototype,"agComponentUtils",2),WT([F_("componentMetadataProvider")],sk.prototype,"componentMetadataProvider",2),WT([F_("userComponentRegistry")],sk.prototype,"userComponentRegistry",2),WT([B_("frameworkComponentWrapper")],sk.prototype,"frameworkComponentWrapper",2),sk=WT([L_("userComponentFactory")],sk);var ok=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=-1!==e.scrollAxis.indexOf("x"),this.scrollVertically=-1!==e.scrollAxis.indexOf("y"),this.scrollByTick=null!=e.scrollByTick?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.shouldSkipVerticalScroll();if(t&&this.shouldSkipHorizontalScroll())return;const n=this.scrollContainer.getBoundingClientRect(),i=this.scrollByTick;this.tickLeft=e.clientX<n.left+i,this.tickRight=e.clientX>n.right-i,this.tickUp=e.clientY<n.top+i&&!t,this.tickDown=e.clientY>n.bottom-i&&!t,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){let e;if(this.tickCount++,e=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},ak=class extends MR{constructor(e){super(),this.eContainer=e}postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady((e=>{const t=e.gridBodyCtrl;this.autoScrollService=new ok({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:e=>t.getScrollFeature().setVerticalScrollPosition(e),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})}))}getContainer(){return this.eContainer}isInterestedIn(e){return 2===e}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?dN.ICON_NOT_ALLOWED:dN.ICON_MOVE}shouldPreventRowMove(){if(this.columnModel.getRowGroupColumns().length)return!0;if(this.filterManager.isAnyFilterPresent())return!0;return!!this.sortController.isSortActive()}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const e=[...this.selectionService.getSelectedNodes()].sort(((e,t)=>null==e.rowIndex||null==t.rowIndex?0:this.getRowIndexNumber(e)-this.getRowIndexNumber(t)));if(-1!==e.indexOf(t))return e}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent(OR.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach((e=>{e.setDragging(!0)})),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}isDropZoneWithinThisGrid(e){const t=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:n}=e;return!t.contains(n)}onEnterOrDragging(e){this.dispatchGridEvent(OR.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const n=this.isFromThisGrid(e),i=this.gos.get("rowDragManaged"),r=e.dragItem.rowNodes;i&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!n?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(r[0],t):this.moveRows(r,t))}getRowIndexNumber(e){return parseInt(tR(e.getRowIndexString().split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),n=t&&1===t.highlighted,i=this.mouseEventService.getNormalisedPosition(e).y,r=e.dragItem.rowNodes;let s=n?1:0;if(this.isFromThisGrid(e))r.forEach((e=>{e.rowTop<i&&(s-=1)})),this.moveRows(r,i,s);else{const e=this.gos.getCallback("getRowId");let t=this.clientSideRowModel.getRowIndexAtPixel(i)+1;0===this.clientSideRowModel.getHighlightPosition(i)&&t--,this.clientSideRowModel.updateRowData({add:r.map((e=>e.data)).filter((t=>!this.clientSideRowModel.getRowNode(e?e({data:t,level:0}):t.id))),addIndex:t})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var i;this.clientSideRowModel.ensureRowsAtPixel(e,t,n)&&(this.focusService.clearFocusedCell(),null==(i=this.rangeService)||i.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer())return void f_("addRowDropZone - A container target needs to be provided");if(this.dragAndDropService.findExternalZone(e))return void console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=t=>{e.onDragEnter(this.draggingToRowDragEvent(OR.EVENT_ROW_DRAG_ENTER,t))}),e.onDragLeave&&(t.onDragLeave=t=>{e.onDragLeave(this.draggingToRowDragEvent(OR.EVENT_ROW_DRAG_LEAVE,t))}),e.onDragging&&(t.onDragging=t=>{e.onDragging(this.draggingToRowDragEvent(OR.EVENT_ROW_DRAG_MOVE,t))}),e.onDragStop&&(t.onDragStop=t=>{e.onDragStop(this.draggingToRowDragEvent(OR.EVENT_ROW_DRAG_END,t))})),this.dragAndDropService.addDropTarget(VT({isInterestedIn:e=>2===e,getIconName:()=>dN.ICON_MOVE,external:!0},t))}getRowDropZone(e){const t=this.getContainer.bind(this),n=this.onDragEnter.bind(this),i=this.onDragLeave.bind(this),r=this.onDragging.bind(this),s=this.onDragStop.bind(this);return e?{getContainer:t,onDragEnter:e.onDragEnter?t=>{n(t),e.onDragEnter(this.draggingToRowDragEvent(OR.EVENT_ROW_DRAG_ENTER,t))}:n,onDragLeave:e.onDragLeave?t=>{i(t),e.onDragLeave(this.draggingToRowDragEvent(OR.EVENT_ROW_DRAG_LEAVE,t))}:i,onDragging:e.onDragging?t=>{r(t),e.onDragging(this.draggingToRowDragEvent(OR.EVENT_ROW_DRAG_MOVE,t))}:r,onDragStop:e.onDragStop?t=>{s(t),e.onDragStop(this.draggingToRowDragEvent(OR.EVENT_ROW_DRAG_END,t))}:s,fromGrid:!0}:{getContainer:t,onDragEnter:n,onDragLeave:i,onDragging:r,onDragStop:s,fromGrid:!0}}draggingToRowDragEvent(e,t){const n=this.mouseEventService.getNormalisedPosition(t).y;let i,r,s=-1;switch(n>this.paginationProxy.getCurrentPageHeight()||(s=this.rowModel.getRowIndexAtPixel(n),i=this.rowModel.getRow(s)),t.vDirection){case 1:r="down";break;case 0:r="up";break;default:r=null}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:s,overNode:i,y:n,vDirection:r})}dispatchGridEvent(e,t){const n=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(n)}onDragLeave(e){this.dispatchGridEvent(OR.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent(OR.EVENT_ROW_DRAG_END,e),this.stopDragging(e),!this.gos.get("rowDragManaged")||!this.gos.get("suppressMoveWhenRowDragging")&&this.isFromThisGrid(e)||this.isDropZoneWithinThisGrid(e)||this.moveRowAndClearHighlight(e)}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach((e=>{e.setDragging(!1)}))}};WT([F_("dragAndDropService")],ak.prototype,"dragAndDropService",2),WT([F_("rowModel")],ak.prototype,"rowModel",2),WT([F_("paginationProxy")],ak.prototype,"paginationProxy",2),WT([F_("columnModel")],ak.prototype,"columnModel",2),WT([F_("focusService")],ak.prototype,"focusService",2),WT([F_("sortController")],ak.prototype,"sortController",2),WT([F_("filterManager")],ak.prototype,"filterManager",2),WT([F_("selectionService")],ak.prototype,"selectionService",2),WT([F_("mouseEventService")],ak.prototype,"mouseEventService",2),WT([F_("ctrlsService")],ak.prototype,"ctrlsService",2),WT([B_("rangeService")],ak.prototype,"rangeService",2),WT([k_],ak.prototype,"postConstruct",1);var lk=class extends MR{constructor(){super(...arguments),this.dragEndFunctions=[],this.dragSources=[]}removeAllListeners(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0}removeListener(e){const t=e.dragSource.eElement,n=e.mouseDownListener;if(t.removeEventListener("mousedown",n),e.touchEnabled){const n=e.touchStartListener;t.removeEventListener("touchstart",n,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find((t=>t.dragSource===e));t&&(this.removeListener(t),aR(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:n,includeTouch:i,stopPropagationForTouch:r}=e;n.addEventListener("mousedown",t);let s=null;const o=this.gos.get("suppressTouch");i&&!o&&(s=t=>{PM(t.target)||(t.cancelable&&(t.preventDefault(),r&&t.stopPropagation()),this.onTouchStart(e,t))},n.addEventListener("touchstart",s,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:s,touchEnabled:!!i})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const n=t.touches[0];this.touchLastTime=n,this.touchStart=n;const i=t=>this.onTouchUp(t,e.eElement),r=t.target,s=[{target:this.gos.getRootNode(),type:"touchmove",listener:e=>{e.cancelable&&e.preventDefault()},options:{passive:!1}},{target:r,type:"touchmove",listener:t=>this.onTouchMove(t,e.eElement),options:{passive:!0}},{target:r,type:"touchend",listener:i,options:{passive:!0}},{target:r,type:"touchcancel",listener:i,options:{passive:!0}}];this.addTemporaryEvents(s),0===e.dragStartPixels&&this.onCommonMove(n,this.touchStart,e.eElement)}onMouseDown(e,t){const n=t;if(e.skipMouseEvent&&e.skipMouseEvent(t))return;if(n._alreadyProcessedByDragService)return;if(n._alreadyProcessedByDragService=!0,0!==t.button)return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const i=this.gos.getRootNode(),r=[{target:i,type:"mousemove",listener:t=>this.onMouseMove(t,e.eElement)},{target:i,type:"mouseup",listener:t=>this.onMouseUp(t,e.eElement)},{target:i,type:"contextmenu",listener:e=>e.preventDefault()}];this.addTemporaryEvents(r),0===e.dragStartPixels&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach((e=>{const{target:t,type:n,listener:i,options:r}=e;t.addEventListener(n,i,r)})),this.dragEndFunctions.push((()=>{e.forEach((e=>{const{target:t,type:n,listener:i,options:r}=e;t.removeEventListener(n,i,r)}))}))}isEventNearStartEvent(e,t){const{dragStartPixels:n}=this.currentDragParams;return OP(e,t,YT(n)?n:4)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,n){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,t))return;this.dragging=!0;const i={type:OR.EVENT_DRAG_STARTED,target:n};this.eventService.dispatchEvent(i),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(e)}onTouchMove(e,t){const n=this.getFirstActiveTouch(e.touches);n&&this.onCommonMove(n,this.touchStart,t)}onMouseMove(e,t){var n;if(JD()){null==(n=this.gos.getDocument().getSelection())||n.removeAllRanges()}this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gos.get("enableCellTextSelection"),n="mousemove"===e.type;return t&&n&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const t=e.target,n=null==t?void 0:t.tagName.toLocaleLowerCase();return!!(null==n?void 0:n.match("^a$|textarea|input|select|button"))}onTouchUp(e,t){let n=this.getFirstActiveTouch(e.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);const n={type:OR.EVENT_DRAG_STOPPED,target:t};this.eventService.dispatchEvent(n)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach((e=>e())),this.dragEndFunctions.length=0}};WT([F_("mouseEventService")],lk.prototype,"mouseEventService",2),WT([O_],lk.prototype,"removeAllListeners",1),lk=WT([L_("dragService")],lk);var ck="ag-list-item-hovered",uk=class extends MR{constructor(e,t,n){super(),this.comp=e,this.virtualList=t,this.params=n,this.currentDragValue=null,this.lastHoveredListItem=null}postConstruct(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout((()=>{this.currentDragValue=null,this.moveBlocked=!1}),10)}createDropTarget(){const e={isInterestedIn:e=>e===this.params.dragSourceType,getIconName:()=>this.moveBlocked?dN.ICON_PINNED:dN.ICON_MOVE,getContainer:()=>this.comp.getGui(),onDragging:e=>this.onDragging(e),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave()};this.dragAndDropService.addDropTarget(e)}createAutoScrollService(){const e=this.virtualList.getGui();this.autoScrollService=new ok({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}onDragging(e){if(!this.currentDragValue||this.moveBlocked)return;const t=this.getListDragItem(e),n=this.virtualList.getComponentAt(t.rowIndex);if(!n)return;const i=n.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===t.rowIndex&&this.lastHoveredListItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=t,RM(i,ck),RM(i,"ag-item-highlight-".concat(t.position)))}getListDragItem(e){const t=this.virtualList.getGui(),n=parseFloat(window.getComputedStyle(t).paddingTop),i=this.virtualList.getRowHeight(),r=this.virtualList.getScrollTop(),s=Math.max(0,(e.y-n+r)/i),o=this.params.getNumRows(this.comp)-1,a=0|Math.min(o,s);return{rowIndex:a,position:Math.round(s)>s||s>o?"bottom":"top",component:this.virtualList.getComponentAt(a)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())}onDragLeave(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(".".concat(ck)).forEach((e=>{[ck,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach((t=>{e.classList.remove(t)}))})),this.lastHoveredListItem=null}};function dk(e){const t=e;return null!=t&&null!=t.getFrameworkComponentInstance?t.getFrameworkComponentInstance():e}WT([F_("dragAndDropService")],uk.prototype,"dragAndDropService",2),WT([k_],uk.prototype,"postConstruct",1);var hk=class{constructor(){this.detailGridInfoMap={},this.destroyCalled=!1}init(){switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel}this.ctrlsService.whenReady((e=>{this.gridBodyCtrl=e.gridBodyCtrl}))}__getAlignedGridService(){return this.alignedGridsService}getGridId(){return this.context.getGridId()}addDetailGridInfo(e,t){this.detailGridInfoMap[e]=t}removeDetailGridInfo(e){delete this.detailGridInfoMap[e]}getDetailGridInfo(e){return this.detailGridInfoMap[e]}forEachDetailGridInfo(e){let t=0;r_(this.detailGridInfoMap,((n,i)=>{YT(i)&&(e(i,t),t++)}))}getDataAsCsv(e){if(P_.__assertRegistered("@ag-grid-community/csv-export","api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(e)}exportDataAsCsv(e){P_.__assertRegistered("@ag-grid-community/csv-export","api.exportDataAsCsv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(e)}assertNotExcelMultiSheet(e,t){return!!P_.__assertRegistered("@ag-grid-enterprise/excel-export","api."+e,this.context.getGridId())&&(1!==this.excelCreator.getFactoryMode()||(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1))}getDataAsExcel(e){if(this.assertNotExcelMultiSheet("getDataAsExcel",e))return this.excelCreator.getDataAsExcel(e)}exportDataAsExcel(e){this.assertNotExcelMultiSheet("exportDataAsExcel",e)&&this.excelCreator.exportDataAsExcel(e)}getSheetDataForExcel(e){if(P_.__assertRegistered("@ag-grid-enterprise/excel-export","api.getSheetDataForExcel",this.context.getGridId()))return this.excelCreator.setFactoryMode(1),this.excelCreator.getSheetDataForExcel(e)}getMultipleSheetsAsExcel(e){if(P_.__assertRegistered("@ag-grid-enterprise/excel-export","api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(e)}exportMultipleSheetsAsExcel(e){P_.__assertRegistered("@ag-grid-enterprise/excel-export","api.exportMultipleSheetsAsExcel",this.context.getGridId())&&this.excelCreator.exportMultipleSheetsAsExcel(e)}setGridAriaProperty(e,t){if(!e)return;const n=this.ctrlsService.getGridBodyCtrl().getGui(),i="aria-".concat(e);null===t?n.removeAttribute(i):n.setAttribute(i,t)}logMissingRowModel(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];console.error("AG Grid: api.".concat(e," can only be called when gridOptions.rowModelType is ").concat(n.join(" or ")))}logDeprecation(e,t,n,i){f_("Since ".concat(e," api.").concat(t," is deprecated. Please use ").concat(n," instead. ").concat(null!=i?i:""))}getPinnedTopRowCount(){return this.pinnedRowModel.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.pinnedRowModel.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.pinnedRowModel.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.pinnedRowModel.getPinnedBottomRow(e)}expireValueCache(){this.valueCache.expire()}getVerticalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()}getHorizontalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()}refreshCells(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.frameworkOverrides.wrapIncoming((()=>this.rowRenderer.refreshCells(e)))}flashCells(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e=>f_("Since v31.1 api.flashCells parameter '".concat(e,"Delay' is deprecated. Please use '").concat(e,"Duration' instead."));YT(e.fadeDelay)&&t("fade"),YT(e.flashDelay)&&t("flash"),this.frameworkOverrides.wrapIncoming((()=>this.rowRenderer.flashCells(e)))}redrawRows(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e?e.rowNodes:void 0;this.frameworkOverrides.wrapIncoming((()=>this.rowRenderer.redrawRows(t)))}refreshHeader(){this.frameworkOverrides.wrapIncoming((()=>this.ctrlsService.getHeaderRowContainerCtrls().forEach((e=>e.refresh()))))}isAnyFilterPresent(){return this.filterManager.isAnyFilterPresent()}isColumnFilterPresent(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()}isQuickFilterPresent(){return this.filterManager.isQuickFilterPresent()}getModel(){return f_("Since v31.1 getModel() is deprecated. Please use the appropriate grid API methods instead."),this.rowModel}setRowNodeExpanded(e,t,n,i){this.expansionService.setRowNodeExpanded(e,t,n,i)}onGroupExpandedOrCollapsed(){qT(this.clientSideRowModel)?this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide"):this.expansionService.onGroupExpandedOrCollapsed()}refreshClientSideRowModel(e){qT(this.clientSideRowModel)?this.logMissingRowModel("refreshClientSideRowModel","clientSide"):this.clientSideRowModel.refreshModel(e)}isAnimationFrameQueueEmpty(){return this.animationFrameService.isQueueEmpty()}flushAllAnimationFrames(){this.animationFrameService.flushAllFrames()}getRowNode(e){return this.rowModel.getRowNode(e)}getSizesForCurrentTheme(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}}expandAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")}collapseAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!1):this.logMissingRowModel("collapseAll","clientSide","serverSide")}addRenderedRowListener(e,t,n){this.rowRenderer.addRenderedRowListener(e,t,n)}getQuickFilter(){return this.gos.get("quickFilterText")}getAdvancedFilterModel(){return P_.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null}setAdvancedFilterModel(e){this.filterManager.setAdvancedFilterModel(e)}showAdvancedFilterBuilder(){P_.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")}setNodesSelected(e){if(!e.nodes.every((e=>e.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):void 0!==e.id||(console.warn("AG Grid: cannot select node until id for node is known"),!1))))return;const{nodes:t,source:n,newValue:i}=e,r=t;this.selectionService.setNodesSelected({nodes:r,source:null!=n?n:"api",newValue:i})}selectAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"apiSelectAll";this.selectionService.selectAllRowNodes({source:e})}deselectAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"apiSelectAll";this.selectionService.deselectAllRowNodes({source:e})}selectAllFiltered(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"apiSelectAllFiltered";this.selectionService.selectAllRowNodes({source:e,justFiltered:!0})}deselectAllFiltered(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"apiSelectAllFiltered";this.selectionService.deselectAllRowNodes({source:e,justFiltered:!0})}getServerSideSelectionState(){return qT(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getSelectionState()}setServerSideSelectionState(e){qT(this.serverSideRowModel)?this.logMissingRowModel("setServerSideSelectionState","serverSide"):this.selectionService.setSelectionState(e,"api")}selectAllOnCurrentPage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"apiSelectAllCurrentPage";this.selectionService.selectAllRowNodes({source:e,justCurrentPage:!0})}deselectAllOnCurrentPage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"apiSelectAllCurrentPage";this.selectionService.deselectAllRowNodes({source:e,justCurrentPage:!0})}showLoadingOverlay(){this.overlayService.showLoadingOverlay()}showNoRowsOverlay(){this.overlayService.showNoRowsOverlay()}hideOverlay(){this.overlayService.hideOverlay()}getSelectedNodes(){return this.selectionService.getSelectedNodes()}getSelectedRows(){return this.selectionService.getSelectedRows()}getBestCostNodeSelection(){if(!qT(this.clientSideRowModel))return this.selectionService.getBestCostNodeSelection();this.logMissingRowModel("getBestCostNodeSelection","clientSide")}getRenderedNodes(){return this.rowRenderer.getRenderedNodes()}ensureColumnVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";this.frameworkOverrides.wrapIncoming((()=>this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(e,t)),"ensureVisible")}ensureIndexVisible(e,t){this.frameworkOverrides.wrapIncoming((()=>this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(e,t)),"ensureVisible")}ensureNodeVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.frameworkOverrides.wrapIncoming((()=>this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(e,t)),"ensureVisible")}forEachLeafNode(e){qT(this.clientSideRowModel)?this.logMissingRowModel("forEachLeafNode","clientSide"):this.clientSideRowModel.forEachLeafNode(e)}forEachNode(e,t){this.rowModel.forEachNode(e,t)}forEachNodeAfterFilter(e){qT(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilter","clientSide"):this.clientSideRowModel.forEachNodeAfterFilter(e)}forEachNodeAfterFilterAndSort(e){qT(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide"):this.clientSideRowModel.forEachNodeAfterFilterAndSort(e)}getFilterInstance(e,t){return f_("'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."),this.filterManager.getFilterInstance(e,t)}getColumnFilterInstance(e){return this.filterManager.getColumnFilterInstance(e)}destroyFilter(e){const t=this.columnModel.getPrimaryColumn(e);if(t)return this.filterManager.destroyFilter(t,"api")}getStatusPanel(e){if(!P_.__assertRegistered("@ag-grid-enterprise/status-bar","api.getStatusPanel",this.context.getGridId()))return;return dk(this.statusBarService.getStatusPanel(e))}getColumnDef(e){const t=this.columnModel.getPrimaryColumn(e);return t?t.getColDef():null}getColumnDefs(){return this.columnModel.getColumnDefs()}onFilterChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"api";this.filterManager.onFilterChanged({source:e})}onSortChanged(){this.sortController.onSortChanged("api")}setFilterModel(e){this.frameworkOverrides.wrapIncoming((()=>this.filterManager.setFilterModel(e)))}getFilterModel(){return this.filterManager.getFilterModel()}getColumnFilterModel(e){return this.filterManager.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.filterManager.setColumnFilterModel(e,t)}getFocusedCell(){return this.focusService.getFocusedCell()}clearFocusedCell(){return this.focusService.clearFocusedCell()}setFocusedCell(e,t,n){this.focusService.setFocusedCell({rowIndex:e,column:t,rowPinned:n,forceBrowserFocus:!0})}addRowDropZone(e){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(e)}removeRowDropZone(e){const t=this.dragAndDropService.findExternalZone(e);t&&this.dragAndDropService.removeDropTarget(t)}getRowDropZoneParams(e){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(e)}assertSideBarLoaded(e){return P_.__assertRegistered("@ag-grid-enterprise/side-bar","api."+e,this.context.getGridId())}isSideBarVisible(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarService.getSideBarComp().isDisplayed()}setSideBarVisible(e){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarService.getSideBarComp().setDisplayed(e)}setSideBarPosition(e){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarService.getSideBarComp().setSideBarPosition(e)}openToolPanel(e){this.assertSideBarLoaded("openToolPanel")&&this.sideBarService.getSideBarComp().openToolPanel(e,"api")}closeToolPanel(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarService.getSideBarComp().close("api")}getOpenedToolPanel(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarService.getSideBarComp().openedItem():null}refreshToolPanel(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarService.getSideBarComp().refresh()}isToolPanelShowing(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarService.getSideBarComp().isToolPanelShowing()}getToolPanelInstance(e){if(this.assertSideBarLoaded("getToolPanelInstance")){return dk(this.sideBarService.getSideBarComp().getToolPanelInstance(e))}}getSideBar(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarService.getSideBarComp().getDef()}resetRowHeights(){if(YT(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive())return void console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");this.clientSideRowModel.resetRowHeights()}}setRowCount(e,t){if(this.serverSideRowModel)return this.columnModel.isRowGroupEmpty()?void this.serverSideRowModel.setRowCount(e,t):void console.error("AG Grid: setRowCount cannot be used while using row grouping.");this.infiniteRowModel?this.infiniteRowModel.setRowCount(e,t):this.logMissingRowModel("setRowCount","infinite","serverSide")}onRowHeightChanged(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()}getValue(e,t){return this.logDeprecation("31.3","getValue","getCellValue"),this.getCellValue({colKey:e,rowNode:t})}getCellValue(e){var t;const{colKey:n,rowNode:i,useFormatter:r}=e;let s=null!=(t=this.columnModel.getPrimaryColumn(n))?t:this.columnModel.getGridColumn(n);if(qT(s))return null;const o=this.valueService.getValue(s,i);if(r){const e=this.valueService.formatValue(s,i,o);return null!=e?e:zR(o,!0)}return o}addEventListener(e,t){this.apiEventService.addEventListener(e,t)}addGlobalListener(e){this.apiEventService.addGlobalListener(e)}removeEventListener(e,t){this.apiEventService.removeEventListener(e,t)}removeGlobalListener(e){this.apiEventService.removeGlobalListener(e)}dispatchEvent(e){this.eventService.dispatchEvent(e)}destroy(){var e;const t="See ".concat(this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed"));if(this.destroyCalled)return;const n={type:OR.EVENT_GRID_PRE_DESTROYED,state:this.getState()};this.dispatchEvent(n),this.destroyCalled=!0,null==(e=this.ctrlsService.get("gridCtrl"))||e.destroyGridUi(),this.context.destroy(),this.detailGridInfoMap={},u_(this,["isDestroyed"],t)}isDestroyed(){return this.destroyCalled}resetQuickFilter(){this.filterManager.resetQuickFilterCache()}getCellRanges(){return this.rangeService?this.rangeService.getCellRanges():(P_.__assertRegistered("@ag-grid-enterprise/range-selection","api.getCellRanges",this.context.getGridId()),null)}addCellRange(e){this.rangeService?this.rangeService.addCellRange(e):P_.__assertRegistered("@ag-grid-enterprise/range-selection","api.addCellRange",this.context.getGridId())}clearRangeSelection(){this.rangeService&&this.rangeService.removeAllCellRanges(),P_.__assertRegistered("@ag-grid-enterprise/range-selection","gridApi.clearRangeSelection",this.context.getGridId())}undoCellEditing(){this.undoRedoService.undo("api")}redoCellEditing(){this.undoRedoService.redo("api")}getCurrentUndoSize(){return this.undoRedoService.getCurrentUndoStackSize()}getCurrentRedoSize(){return this.undoRedoService.getCurrentRedoStackSize()}assertChart(e,t){if(P_.__assertRegistered("@ag-grid-enterprise/charts","api."+e,this.context.getGridId()))return this.frameworkOverrides.wrapIncoming((()=>t()))}getChartModels(){return this.assertChart("getChartModels",(()=>this.chartService.getChartModels()))}getChartRef(e){return this.assertChart("getChartRef",(()=>this.chartService.getChartRef(e)))}getChartImageDataURL(e){return this.assertChart("getChartImageDataURL",(()=>this.chartService.getChartImageDataURL(e)))}downloadChart(e){return this.assertChart("downloadChart",(()=>this.chartService.downloadChart(e)))}openChartToolPanel(e){return this.assertChart("openChartToolPanel",(()=>this.chartService.openChartToolPanel(e)))}closeChartToolPanel(e){return this.assertChart("closeChartToolPanel",(()=>this.chartService.closeChartToolPanel(e.chartId)))}createRangeChart(e){return this.assertChart("createRangeChart",(()=>this.chartService.createRangeChart(e)))}createPivotChart(e){return this.assertChart("createPivotChart",(()=>this.chartService.createPivotChart(e)))}createCrossFilterChart(e){return this.assertChart("createCrossFilterChart",(()=>this.chartService.createCrossFilterChart(e)))}updateChart(e){return this.assertChart("updateChart",(()=>this.chartService.updateChart(e)))}restoreChart(e,t){return this.assertChart("restoreChart",(()=>this.chartService.restoreChart(e,t)))}assertClipboard(e,t){P_.__assertRegistered("@ag-grid-enterprise/clipboard","api"+e,this.context.getGridId())&&t()}copyToClipboard(e){this.assertClipboard("copyToClipboard",(()=>this.clipboardService.copyToClipboard(e)))}cutToClipboard(e){this.assertClipboard("cutToClipboard",(()=>this.clipboardService.cutToClipboard(e)))}copySelectedRowsToClipboard(e){this.assertClipboard("copySelectedRowsToClipboard",(()=>this.clipboardService.copySelectedRowsToClipboard(e)))}copySelectedRangeToClipboard(e){this.assertClipboard("copySelectedRangeToClipboard",(()=>this.clipboardService.copySelectedRangeToClipboard(e)))}copySelectedRangeDown(){this.assertClipboard("copySelectedRangeDown",(()=>this.clipboardService.copyRangeDown()))}pasteFromClipboard(){this.assertClipboard("pasteFromClipboard",(()=>this.clipboardService.pasteFromClipboard()))}showColumnMenuAfterButtonClick(e,t){f_("'showColumnMenuAfterButtonClick' is deprecated. Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere.");const n=this.columnModel.getGridColumn(e);this.menuService.showColumnMenu({column:n,buttonElement:t,positionBy:"button"})}showColumnMenuAfterMouseClick(e,t){f_("'showColumnMenuAfterMouseClick' is deprecated. Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere.");let n=this.columnModel.getGridColumn(e);n||(n=this.columnModel.getPrimaryColumn(e)),n?this.menuService.showColumnMenu({column:n,mouseEvent:t,positionBy:"mouse"}):console.error("AG Grid: column '".concat(e,"' not found"))}showContextMenu(e){const{rowNode:t,column:n,value:i,x:r,y:s}=e||{};let{x:o,y:a}=this.menuService.getContextMenuPosition(t,n);null!=r&&(o=r),null!=s&&(a=s),this.menuService.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:o,clientY:a}),rowNode:t,column:n,value:i})}showColumnChooser(e){this.menuService.showColumnChooser({chooserParams:e})}showColumnFilter(e){const t=this.columnModel.getGridColumn(e);t?this.menuService.showFilterMenu({column:t,containerType:"columnFilter",positionBy:"auto"}):console.error("AG Grid: column '".concat(e,"' not found"))}showColumnMenu(e){const t=this.columnModel.getGridColumn(e);t?this.menuService.showColumnMenu({column:t,positionBy:"auto"}):console.error("AG Grid: column '".concat(e,"' not found"))}hidePopupMenu(){this.menuService.hidePopupMenu()}hideColumnChooser(){this.menuService.hideColumnChooser()}tabToNextCell(e){return this.navigationService.tabToNextCell(!1,e)}tabToPreviousCell(e){return this.navigationService.tabToNextCell(!0,e)}getCellRendererInstances(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.rowRenderer.getCellRendererInstances(e).map(dk)}getCellEditorInstances(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.rowRenderer.getCellEditorInstances(e).map(dk)}getEditingCells(){return this.rowRenderer.getEditingCells()}stopEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.rowRenderer.stopEditing(e)}startEditingCell(e){const t=this.columnModel.getGridColumn(e.colKey);if(!t)return void console.warn("AG Grid: no column found for ".concat(e.colKey));const n={rowIndex:e.rowIndex,rowPinned:e.rowPinned||null,column:t};null==e.rowPinned&&this.ensureIndexVisible(e.rowIndex),this.ensureColumnVisible(e.colKey);const i=this.navigationService.getCellByPosition(n);i&&(this.focusService.isCellFocused(n)||this.focusService.setFocusedCell(n),i.startRowOrCellEdit(e.key))}addAggFunc(e,t){this.logDeprecation("v31.1","addAggFunc(key, func)","addAggFuncs({ key: func })"),this.aggFuncService&&this.aggFuncService.addAggFuncs({key:t})}addAggFuncs(e){this.aggFuncService&&this.aggFuncService.addAggFuncs(e)}clearAggFuncs(){this.aggFuncService&&this.aggFuncService.clear()}applyServerSideTransaction(e){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransaction(e);this.logMissingRowModel("applyServerSideTransaction","serverSide")}applyServerSideTransactionAsync(e,t){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransactionAsync(e,t);this.logMissingRowModel("applyServerSideTransactionAsync","serverSide")}applyServerSideRowData(e){var t,n;const i=null!=(t=e.startRow)?t:0,r=null!=(n=e.route)?n:[];i<0?console.warn("AG Grid: invalid value ".concat(e.startRow," for startRow, the value should be >= 0")):this.serverSideRowModel?this.serverSideRowModel.applyRowData(e.successParams,i,r):this.logMissingRowModel("setServerSideDatasource","serverSide")}retryServerSideLoads(){this.serverSideRowModel?this.serverSideRowModel.retryLoads():this.logMissingRowModel("retryServerSideLoads","serverSide")}flushServerSideAsyncTransactions(){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.flushAsyncTransactions();this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide")}applyTransaction(e){if(this.clientSideRowModel)return this.frameworkOverrides.wrapIncoming((()=>this.clientSideRowModel.updateRowData(e)));this.logMissingRowModel("applyTransaction","clientSide")}applyTransactionAsync(e,t){this.clientSideRowModel?this.frameworkOverrides.wrapIncoming((()=>this.clientSideRowModel.batchUpdateRowData(e,t))):this.logMissingRowModel("applyTransactionAsync","clientSide")}flushAsyncTransactions(){this.clientSideRowModel?this.frameworkOverrides.wrapIncoming((()=>this.clientSideRowModel.flushAsyncTransactions())):this.logMissingRowModel("flushAsyncTransactions","clientSide")}refreshInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")}purgeInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")}refreshServerSide(e){this.serverSideRowModel?this.serverSideRowModel.refreshStore(e):this.logMissingRowModel("refreshServerSide","serverSide")}getServerSideGroupLevelState(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])}getInfiniteRowCount(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")}isLastRowIndexKnown(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")}getCacheBlockState(){return this.rowNodeBlockLoader.getBlockState()}getFirstDisplayedRow(){return this.logDeprecation("v31.1","getFirstDisplayedRow","getFirstDisplayedRowIndex"),this.getFirstDisplayedRowIndex()}getFirstDisplayedRowIndex(){return this.rowRenderer.getFirstVirtualRenderedRow()}getLastDisplayedRow(){return this.logDeprecation("v31.1","getLastDisplayedRow","getLastDisplayedRowIndex"),this.getLastDisplayedRowIndex()}getLastDisplayedRowIndex(){return this.rowRenderer.getLastVirtualRenderedRow()}getDisplayedRowAtIndex(e){return this.rowModel.getRow(e)}getDisplayedRowCount(){return this.rowModel.getRowCount()}paginationIsLastPageFound(){return this.paginationProxy.isLastPageFound()}paginationGetPageSize(){return this.paginationProxy.getPageSize()}paginationGetCurrentPage(){return this.paginationProxy.getCurrentPage()}paginationGetTotalPages(){return this.paginationProxy.getTotalPages()}paginationGetRowCount(){return this.paginationProxy.getMasterRowCount()}paginationGoToNextPage(){this.paginationProxy.goToNextPage()}paginationGoToPreviousPage(){this.paginationProxy.goToPreviousPage()}paginationGoToFirstPage(){this.paginationProxy.goToFirstPage()}paginationGoToLastPage(){this.paginationProxy.goToLastPage()}paginationGoToPage(e){this.paginationProxy.goToPage(e)}sizeColumnsToFit(e){"number"===typeof e?this.columnModel.sizeColumnsToFit(e,"api"):this.gridBodyCtrl.sizeColumnsToFit(e)}setColumnGroupOpened(e,t){this.columnModel.setColumnGroupOpened(e,t,"api")}getColumnGroup(e,t){return this.columnModel.getColumnGroup(e,t)}getProvidedColumnGroup(e){return this.columnModel.getProvidedColumnGroup(e)}getDisplayNameForColumn(e,t){return this.columnModel.getDisplayNameForColumn(e,t)||""}getDisplayNameForColumnGroup(e,t){return this.columnModel.getDisplayNameForColumnGroup(e,t)||""}getColumn(e){return this.columnModel.getPrimaryColumn(e)}getColumns(){return this.columnModel.getAllPrimaryColumns()}applyColumnState(e){return this.columnModel.applyColumnState(e,"api")}getColumnState(){return this.columnModel.getColumnState()}resetColumnState(){this.columnModel.resetColumnState("api")}getColumnGroupState(){return this.columnModel.getColumnGroupState()}setColumnGroupState(e){this.columnModel.setColumnGroupState(e,"api")}resetColumnGroupState(){this.columnModel.resetColumnGroupState("api")}isPinning(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()}isPinningLeft(){return this.columnModel.isPinningLeft()}isPinningRight(){return this.columnModel.isPinningRight()}getDisplayedColAfter(e){return this.columnModel.getDisplayedColAfter(e)}getDisplayedColBefore(e){return this.columnModel.getDisplayedColBefore(e)}setColumnVisible(e,t){this.logDeprecation("v31.1","setColumnVisible(key,visible)","setColumnsVisible([key],visible)"),this.columnModel.setColumnsVisible([e],t,"api")}setColumnsVisible(e,t){this.columnModel.setColumnsVisible(e,t,"api")}setColumnPinned(e,t){this.logDeprecation("v31.1","setColumnPinned(key,pinned)","setColumnsPinned([key],pinned)"),this.columnModel.setColumnsPinned([e],t,"api")}setColumnsPinned(e,t){this.columnModel.setColumnsPinned(e,t,"api")}getAllGridColumns(){return this.columnModel.getAllGridColumns()}getDisplayedLeftColumns(){return this.columnModel.getDisplayedLeftColumns()}getDisplayedCenterColumns(){return this.columnModel.getDisplayedCenterColumns()}getDisplayedRightColumns(){return this.columnModel.getDisplayedRightColumns()}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getAllDisplayedVirtualColumns(){return this.columnModel.getViewportColumns()}moveColumn(e,t){this.logDeprecation("v31.1","moveColumn(key, toIndex)","moveColumns([key], toIndex)"),this.columnModel.moveColumns([e],t,"api")}moveColumnByIndex(e,t){this.columnModel.moveColumnByIndex(e,t,"api")}moveColumns(e,t){this.columnModel.moveColumns(e,t,"api")}moveRowGroupColumn(e,t){this.columnModel.moveRowGroupColumn(e,t,"api")}setColumnAggFunc(e,t){this.columnModel.setColumnAggFunc(e,t,"api")}setColumnWidth(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"api";this.logDeprecation("v31.1","setColumnWidth(col, width)","setColumnWidths([{key: col, newWidth: width}])"),this.columnModel.setColumnWidths([{key:e,newWidth:t}],!1,n,i)}setColumnWidths(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";this.columnModel.setColumnWidths(e,!1,t,n)}isPivotMode(){return this.columnModel.isPivotMode()}getPivotResultColumn(e,t){return this.columnModel.getSecondaryPivotColumn(e,t)}setValueColumns(e){this.columnModel.setValueColumns(e,"api")}getValueColumns(){return this.columnModel.getValueColumns()}removeValueColumn(e){this.logDeprecation("v31.1","removeValueColumn(colKey)","removeValueColumns([colKey])"),this.columnModel.removeValueColumns([e],"api")}removeValueColumns(e){this.columnModel.removeValueColumns(e,"api")}addValueColumn(e){this.logDeprecation("v31.1","addValueColumn(colKey)","addValueColumns([colKey])"),this.columnModel.addValueColumns([e],"api")}addValueColumns(e){this.columnModel.addValueColumns(e,"api")}setRowGroupColumns(e){this.columnModel.setRowGroupColumns(e,"api")}removeRowGroupColumn(e){this.logDeprecation("v31.1","removeRowGroupColumn(colKey)","removeRowGroupColumns([colKey])"),this.columnModel.removeRowGroupColumns([e],"api")}removeRowGroupColumns(e){this.columnModel.removeRowGroupColumns(e,"api")}addRowGroupColumn(e){this.logDeprecation("v31.1","addRowGroupColumn(colKey)","addRowGroupColumns([colKey])"),this.columnModel.addRowGroupColumns([e],"api")}addRowGroupColumns(e){this.columnModel.addRowGroupColumns(e,"api")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}setPivotColumns(e){this.columnModel.setPivotColumns(e,"api")}removePivotColumn(e){this.logDeprecation("v31.1","removePivotColumn(colKey)","removePivotColumns([colKey])"),this.columnModel.removePivotColumns([e],"api")}removePivotColumns(e){this.columnModel.removePivotColumns(e,"api")}addPivotColumn(e){this.logDeprecation("v31.1","addPivotColumn(colKey)","addPivotColumns([colKey])"),this.columnModel.addPivotColumns([e],"api")}addPivotColumns(e){this.columnModel.addPivotColumns(e,"api")}getPivotColumns(){return this.columnModel.getPivotColumns()}getLeftDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeLeft()}getCenterDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeCentre()}getRightDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeRight()}getAllDisplayedColumnGroups(){return this.columnModel.getAllDisplayedTrees()}autoSizeColumn(e,t){return this.logDeprecation("v31.1","autoSizeColumn(key, skipHeader)","autoSizeColumns([key], skipHeader)"),this.columnModel.autoSizeColumns({columns:[e],skipHeader:t,source:"api"})}autoSizeColumns(e,t){this.columnModel.autoSizeColumns({columns:e,skipHeader:t,source:"api"})}autoSizeAllColumns(e){this.columnModel.autoSizeAllColumns("api",e)}setPivotResultColumns(e){this.columnModel.setSecondaryColumns(e,"api")}getPivotResultColumns(){return this.columnModel.getSecondaryColumns()}getState(){return this.stateService.getState()}getGridOption(e){return this.gos.get(e)}setGridOption(e,t){this.updateGridOptions({[e]:t})}updateGridOptions(e){this.gos.updateGridOptions({options:e})}__internalUpdateGridOptions(e,t){this.gos.updateGridOptions({options:e,force:t,source:"gridOptionsUpdated"})}deprecatedUpdateGridOption(e,t){f_("set".concat(e.charAt(0).toUpperCase()).concat(e.slice(1,e.length)," is deprecated. Please use 'api.setGridOption('").concat(e,"', newValue)' or 'api.updateGridOptions({ ").concat(e,": newValue })' instead.")),this.setGridOption(e,t)}setPivotMode(e){this.deprecatedUpdateGridOption("pivotMode",e)}setPinnedTopRowData(e){this.deprecatedUpdateGridOption("pinnedTopRowData",e)}setPinnedBottomRowData(e){this.deprecatedUpdateGridOption("pinnedBottomRowData",e)}setPopupParent(e){this.deprecatedUpdateGridOption("popupParent",e)}setSuppressModelUpdateAfterUpdateTransaction(e){this.deprecatedUpdateGridOption("suppressModelUpdateAfterUpdateTransaction",e)}setDataTypeDefinitions(e){this.deprecatedUpdateGridOption("dataTypeDefinitions",e)}setPagination(e){this.deprecatedUpdateGridOption("pagination",e)}paginationSetPageSize(e){this.deprecatedUpdateGridOption("paginationPageSize",e)}setSideBar(e){this.deprecatedUpdateGridOption("sideBar",e)}setSuppressClipboardPaste(e){this.deprecatedUpdateGridOption("suppressClipboardPaste",e)}setGroupRemoveSingleChildren(e){this.deprecatedUpdateGridOption("groupRemoveSingleChildren",e)}setGroupRemoveLowestSingleChildren(e){this.deprecatedUpdateGridOption("groupRemoveLowestSingleChildren",e)}setGroupDisplayType(e){this.deprecatedUpdateGridOption("groupDisplayType",e)}setGroupIncludeFooter(e){this.deprecatedUpdateGridOption("groupIncludeFooter",e)}setGroupIncludeTotalFooter(e){this.deprecatedUpdateGridOption("groupIncludeTotalFooter",e)}setRowClass(e){this.deprecatedUpdateGridOption("rowClass",e)}setDeltaSort(e){this.deprecatedUpdateGridOption("deltaSort",e)}setSuppressRowDrag(e){this.deprecatedUpdateGridOption("suppressRowDrag",e)}setSuppressMoveWhenRowDragging(e){this.deprecatedUpdateGridOption("suppressMoveWhenRowDragging",e)}setSuppressRowClickSelection(e){this.deprecatedUpdateGridOption("suppressRowClickSelection",e)}setEnableAdvancedFilter(e){this.deprecatedUpdateGridOption("enableAdvancedFilter",e)}setIncludeHiddenColumnsInAdvancedFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInAdvancedFilter",e)}setAdvancedFilterParent(e){this.deprecatedUpdateGridOption("advancedFilterParent",e)}setAdvancedFilterBuilderParams(e){this.deprecatedUpdateGridOption("advancedFilterBuilderParams",e)}setQuickFilter(e){f_("setQuickFilter is deprecated. Please use 'api.setGridOption('quickFilterText', newValue)' or 'api.updateGridOptions({ quickFilterText: newValue })' instead."),this.gos.updateGridOptions({options:{quickFilterText:e}})}setExcludeHiddenColumnsFromQuickFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",!e)}setIncludeHiddenColumnsInQuickFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",e)}setQuickFilterParser(e){this.deprecatedUpdateGridOption("quickFilterParser",e)}setQuickFilterMatcher(e){this.deprecatedUpdateGridOption("quickFilterMatcher",e)}setAlwaysShowHorizontalScroll(e){this.deprecatedUpdateGridOption("alwaysShowHorizontalScroll",e)}setAlwaysShowVerticalScroll(e){this.deprecatedUpdateGridOption("alwaysShowVerticalScroll",e)}setFunctionsReadOnly(e){this.deprecatedUpdateGridOption("functionsReadOnly",e)}setColumnDefs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";f_("setColumnDefs is deprecated. Please use 'api.setGridOption('columnDefs', newValue)' or 'api.updateGridOptions({ columnDefs: newValue })' instead."),this.gos.updateGridOptions({options:{columnDefs:e},source:t})}setAutoGroupColumnDef(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";f_("setAutoGroupColumnDef is deprecated. Please use 'api.setGridOption('autoGroupColumnDef', newValue)' or 'api.updateGridOptions({ autoGroupColumnDef: newValue })' instead."),this.gos.updateGridOptions({options:{autoGroupColumnDef:e},source:t})}setDefaultColDef(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";f_("setDefaultColDef is deprecated. Please use 'api.setGridOption('defaultColDef', newValue)' or 'api.updateGridOptions({ defaultColDef: newValue })' instead."),this.gos.updateGridOptions({options:{defaultColDef:e},source:t})}setColumnTypes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";f_("setColumnTypes is deprecated. Please use 'api.setGridOption('columnTypes', newValue)' or 'api.updateGridOptions({ columnTypes: newValue })' instead."),this.gos.updateGridOptions({options:{columnTypes:e},source:t})}setTreeData(e){this.deprecatedUpdateGridOption("treeData",e)}setServerSideDatasource(e){this.deprecatedUpdateGridOption("serverSideDatasource",e)}setCacheBlockSize(e){this.deprecatedUpdateGridOption("cacheBlockSize",e)}setDatasource(e){this.deprecatedUpdateGridOption("datasource",e)}setViewportDatasource(e){this.deprecatedUpdateGridOption("viewportDatasource",e)}setRowData(e){this.deprecatedUpdateGridOption("rowData",e)}setEnableCellTextSelection(e){this.deprecatedUpdateGridOption("enableCellTextSelection",e)}setHeaderHeight(e){this.deprecatedUpdateGridOption("headerHeight",e)}setDomLayout(e){this.deprecatedUpdateGridOption("domLayout",e)}setFillHandleDirection(e){this.deprecatedUpdateGridOption("fillHandleDirection",e)}setGroupHeaderHeight(e){this.deprecatedUpdateGridOption("groupHeaderHeight",e)}setFloatingFiltersHeight(e){this.deprecatedUpdateGridOption("floatingFiltersHeight",e)}setPivotHeaderHeight(e){this.deprecatedUpdateGridOption("pivotHeaderHeight",e)}setPivotGroupHeaderHeight(e){this.deprecatedUpdateGridOption("pivotGroupHeaderHeight",e)}setAnimateRows(e){this.deprecatedUpdateGridOption("animateRows",e)}setIsExternalFilterPresent(e){this.deprecatedUpdateGridOption("isExternalFilterPresent",e)}setDoesExternalFilterPass(e){this.deprecatedUpdateGridOption("doesExternalFilterPass",e)}setNavigateToNextCell(e){this.deprecatedUpdateGridOption("navigateToNextCell",e)}setTabToNextCell(e){this.deprecatedUpdateGridOption("tabToNextCell",e)}setTabToNextHeader(e){this.deprecatedUpdateGridOption("tabToNextHeader",e)}setNavigateToNextHeader(e){this.deprecatedUpdateGridOption("navigateToNextHeader",e)}setRowGroupPanelShow(e){this.deprecatedUpdateGridOption("rowGroupPanelShow",e)}setGetGroupRowAgg(e){this.deprecatedUpdateGridOption("getGroupRowAgg",e)}setGetBusinessKeyForNode(e){this.deprecatedUpdateGridOption("getBusinessKeyForNode",e)}setGetChildCount(e){this.deprecatedUpdateGridOption("getChildCount",e)}setProcessRowPostCreate(e){this.deprecatedUpdateGridOption("processRowPostCreate",e)}setGetRowId(e){f_("getRowId is a static property and can no longer be updated.")}setGetRowClass(e){this.deprecatedUpdateGridOption("getRowClass",e)}setIsFullWidthRow(e){this.deprecatedUpdateGridOption("isFullWidthRow",e)}setIsRowSelectable(e){this.deprecatedUpdateGridOption("isRowSelectable",e)}setIsRowMaster(e){this.deprecatedUpdateGridOption("isRowMaster",e)}setPostSortRows(e){this.deprecatedUpdateGridOption("postSortRows",e)}setGetDocument(e){this.deprecatedUpdateGridOption("getDocument",e)}setGetContextMenuItems(e){this.deprecatedUpdateGridOption("getContextMenuItems",e)}setGetMainMenuItems(e){this.deprecatedUpdateGridOption("getMainMenuItems",e)}setProcessCellForClipboard(e){this.deprecatedUpdateGridOption("processCellForClipboard",e)}setSendToClipboard(e){this.deprecatedUpdateGridOption("sendToClipboard",e)}setProcessCellFromClipboard(e){this.deprecatedUpdateGridOption("processCellFromClipboard",e)}setProcessPivotResultColDef(e){this.deprecatedUpdateGridOption("processPivotResultColDef",e)}setProcessPivotResultColGroupDef(e){this.deprecatedUpdateGridOption("processPivotResultColGroupDef",e)}setPostProcessPopup(e){this.deprecatedUpdateGridOption("postProcessPopup",e)}setInitialGroupOrderComparator(e){this.deprecatedUpdateGridOption("initialGroupOrderComparator",e)}setGetChartToolbarItems(e){this.deprecatedUpdateGridOption("getChartToolbarItems",e)}setPaginationNumberFormatter(e){this.deprecatedUpdateGridOption("paginationNumberFormatter",e)}setGetServerSideGroupLevelParams(e){this.deprecatedUpdateGridOption("getServerSideGroupLevelParams",e)}setIsServerSideGroupOpenByDefault(e){this.deprecatedUpdateGridOption("isServerSideGroupOpenByDefault",e)}setIsApplyServerSideTransaction(e){this.deprecatedUpdateGridOption("isApplyServerSideTransaction",e)}setIsServerSideGroup(e){this.deprecatedUpdateGridOption("isServerSideGroup",e)}setGetServerSideGroupKey(e){this.deprecatedUpdateGridOption("getServerSideGroupKey",e)}setGetRowStyle(e){this.deprecatedUpdateGridOption("getRowStyle",e)}setGetRowHeight(e){this.deprecatedUpdateGridOption("getRowHeight",e)}};WT([F_("rowRenderer")],hk.prototype,"rowRenderer",2),WT([F_("navigationService")],hk.prototype,"navigationService",2),WT([F_("filterManager")],hk.prototype,"filterManager",2),WT([F_("columnModel")],hk.prototype,"columnModel",2),WT([F_("selectionService")],hk.prototype,"selectionService",2),WT([F_("gridOptionsService")],hk.prototype,"gos",2),WT([F_("valueService")],hk.prototype,"valueService",2),WT([F_("alignedGridsService")],hk.prototype,"alignedGridsService",2),WT([F_("eventService")],hk.prototype,"eventService",2),WT([F_("pinnedRowModel")],hk.prototype,"pinnedRowModel",2),WT([F_("context")],hk.prototype,"context",2),WT([F_("rowModel")],hk.prototype,"rowModel",2),WT([F_("sortController")],hk.prototype,"sortController",2),WT([F_("paginationProxy")],hk.prototype,"paginationProxy",2),WT([F_("focusService")],hk.prototype,"focusService",2),WT([F_("dragAndDropService")],hk.prototype,"dragAndDropService",2),WT([F_("menuService")],hk.prototype,"menuService",2),WT([F_("valueCache")],hk.prototype,"valueCache",2),WT([F_("animationFrameService")],hk.prototype,"animationFrameService",2),WT([F_("ctrlsService")],hk.prototype,"ctrlsService",2),WT([F_("overlayService")],hk.prototype,"overlayService",2),WT([F_("stateService")],hk.prototype,"stateService",2),WT([F_("expansionService")],hk.prototype,"expansionService",2),WT([F_("apiEventService")],hk.prototype,"apiEventService",2),WT([F_("frameworkOverrides")],hk.prototype,"frameworkOverrides",2),WT([F_("undoRedoService")],hk.prototype,"undoRedoService",2),WT([F_("rowNodeBlockLoader")],hk.prototype,"rowNodeBlockLoader",2),WT([B_("csvCreator")],hk.prototype,"csvCreator",2),WT([B_("excelCreator")],hk.prototype,"excelCreator",2),WT([B_("rangeService")],hk.prototype,"rangeService",2),WT([B_("clipboardService")],hk.prototype,"clipboardService",2),WT([B_("aggFuncService")],hk.prototype,"aggFuncService",2),WT([B_("statusBarService")],hk.prototype,"statusBarService",2),WT([B_("chartService")],hk.prototype,"chartService",2),WT([B_("ssrmTransactionManager")],hk.prototype,"serverSideTransactionManager",2),WT([B_("sideBarService")],hk.prototype,"sideBarService",2),WT([k_],hk.prototype,"init",1),hk=WT([L_("gridApi")],hk);var pk=class extends MR{constructor(){super(...arguments),this.quickFilter=null,this.quickFilterParts=null}postConstruct(){this.addManagedListener(this.eventService,OR.EVENT_COLUMN_PIVOT_MODE_CHANGED,(()=>this.resetQuickFilterCache())),this.addManagedListener(this.eventService,OR.EVENT_NEW_COLUMNS_LOADED,(()=>this.resetQuickFilterCache())),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_ROW_GROUP_CHANGED,(()=>this.resetQuickFilterCache())),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_VISIBLE,(()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()})),this.addManagedPropertyListener("quickFilterText",(e=>this.setQuickFilter(e.currentValue))),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],(()=>this.onQuickFilterColumnConfigChanged())),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],(()=>this.setQuickFilterParserAndMatcher()))}isQuickFilterPresent(){return null!==this.quickFilter}doesRowPassQuickFilter(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every((n=>t?this.doesRowPassQuickFilterCache(e,n):this.doesRowPassQuickFilterNoCache(e,n)))}resetQuickFilterCache(){this.rowModel.forEachNode((e=>e.quickFilterAggregateText=null))}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;this.quickFilterParts=e?t?t(e):e.split(" "):null}parseQuickFilter(e){return YT(e)?this.gos.isRowModelType("clientSide")?e.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(null!=e&&"string"!==typeof e)return void console.warn("AG Grid - Grid option quickFilterText only supports string inputs, received: ".concat(typeof e));const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchEvent({type:pk.EVENT_QUICK_FILTER_CHANGED}))}setQuickFilterParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),n=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,n&&(this.setQuickFilterParts(),this.dispatchEvent({type:pk.EVENT_QUICK_FILTER_CHANGED}))}onQuickFilterColumnConfigChanged(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:pk.EVENT_QUICK_FILTER_CHANGED})}doesRowPassQuickFilterNoCache(e,t){return this.columnModel.getAllColumnsForQuickFilter().some((n=>{const i=this.getQuickFilterTextForColumn(n,e);return YT(i)&&i.indexOf(t)>=0}))}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let n;e?(this.checkGenerateQuickFilterAggregateText(t),n=t.quickFilterAggregateText):n=this.getQuickFilterAggregateText(t);const{quickFilterParts:i,matcher:r}=this;return r(i,n)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let n=this.valueService.getValue(e,t,!0);const i=e.getColDef();if(i.getQuickFilterText){const r=this.gos.addGridCommonParams({value:n,node:t,data:t.data,column:e,colDef:i});n=i.getQuickFilterText(r)}return YT(n)?n.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.columnModel.getAllColumnsForQuickFilter().forEach((n=>{const i=this.getQuickFilterTextForColumn(n,e);YT(i)&&t.push(i)})),t.join(pk.QUICK_FILTER_SEPARATOR)}};pk.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged",pk.QUICK_FILTER_SEPARATOR="\n",WT([F_("valueService")],pk.prototype,"valueService",2),WT([F_("columnModel")],pk.prototype,"columnModel",2),WT([F_("rowModel")],pk.prototype,"rowModel",2),WT([k_],pk.prototype,"postConstruct",1),pk=WT([L_("quickFilterService")],pk);var gk=class extends MR{constructor(){super(...arguments),this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue=[]}init(){var e,t,n;this.addManagedListener(this.eventService,OR.EVENT_GRID_COLUMNS_CHANGED,(()=>this.onColumnsChanged())),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_VALUE_CHANGED,(()=>this.refreshFiltersForAggregations())),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_PIVOT_CHANGED,(()=>this.refreshFiltersForAggregations())),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_PIVOT_MODE_CHANGED,(()=>this.refreshFiltersForAggregations())),this.addManagedListener(this.eventService,OR.EVENT_NEW_COLUMNS_LOADED,(()=>this.updateAdvancedFilterColumns())),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_VISIBLE,(()=>this.updateAdvancedFilterColumns())),this.addManagedListener(this.eventService,OR.EVENT_ROW_DATA_UPDATED,(()=>this.onNewRowsLoaded("rowDataUpdated"))),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],(()=>{this.onFilterChanged({source:"api"})})),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",(()=>{this.updateAggFiltering(),this.onFilterChanged()})),this.addManagedPropertyListener("advancedFilterModel",(e=>this.setAdvancedFilterModel(e.currentValue))),this.addManagedListener(this.eventService,OR.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,(e=>{let{enabled:t}=e;return this.onAdvancedFilterEnabledChanged(t)})),this.addManagedListener(this.eventService,OR.EVENT_DATA_TYPES_INFERRED,(()=>this.processFilterModelUpdateQueue())),this.addManagedListener(this.quickFilterService,pk.EVENT_QUICK_FILTER_CHANGED,(()=>this.onFilterChanged({source:"quickFilter"}))),this.initialFilterModel=VT({},null!=(n=null==(t=null==(e=this.gos.get("initialState"))?void 0:e.filter)?void 0:t.filterModel)?n:{})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return"function"===typeof e&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return"function"===typeof t&&t(e)}setFilterModel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this.isAdvancedFilterEnabled())return void this.warnAdvancedFilters();if(this.dataTypeService.isPendingInference())return void this.filterModelUpdateQueue.push({model:e,source:t});const n=[],i=this.getFilterModel();if(e){const t=VP(Object.keys(e));this.allColumnFilters.forEach(((i,r)=>{const s=e[r];n.push(this.setModelOnFilterWrapper(i.filterPromise,s)),t.delete(r)})),t.forEach((t=>{const i=this.columnModel.getPrimaryColumn(t)||this.columnModel.getGridColumn(t);if(!i)return void console.warn("AG Grid: setFilterModel() - no column found for colId: "+t);if(!i.isFilterAllowed())return void console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+t);const r=this.getOrCreateFilterWrapper(i,"NO_UI");r?n.push(this.setModelOnFilterWrapper(r.filterPromise,e[t])):console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+t)}))}else this.allColumnFilters.forEach((e=>{n.push(this.setModelOnFilterWrapper(e.filterPromise,null))}));WP.all(n).then((()=>{const e=this.getFilterModel(),n=[];this.allColumnFilters.forEach(((t,r)=>{const s=i?i[r]:null,o=e?e[r]:null;GP.jsonEquals(s,o)||n.push(t.column)})),n.length>0&&this.onFilterChanged({columns:n,source:t})}))}setModelOnFilterWrapper(e,t){return new WP((n=>{e.then((e=>{"function"!==typeof e.setModel&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),n()),(e.setModel(t)||WP.resolve()).then((()=>n()))}))}))}getFilterModel(){const e={};return this.allColumnFilters.forEach(((t,n)=>{const i=this.getModelFromFilterWrapper(t);YT(i)&&(e[n]=i)})),e}getModelFromFilterWrapper(e){var t;const n=e.filterPromise.resolveNow(null,(e=>e));return null==n?null!=(t=this.initialFilterModel[e.column.getColId()])?t:null:"function"!==typeof n.getModel?(console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel"),null):n.getModel()}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){var t;e?this.allColumnFilters.size&&(this.allColumnFilters.forEach((e=>this.disposeFilterWrapper(e,"advancedFilterEnabled"))),this.onFilterChanged({source:"advancedFilter"})):(null==(t=this.advancedFilterService)?void 0:t.isFilterPresent())&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var e;return!!(null==(e=this.advancedFilterService)?void 0:e.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;const e=e=>!!e&&(e.isFilterActive?e.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1)),t=!!this.gos.getGroupAggFiltering(),n=e=>{if(!e.isPrimary())return!0;const n=!this.columnModel.isPivotActive();return!(!e.isValueActive()||!n)&&(!!this.columnModel.isPivotMode()||t)};this.allColumnFilters.forEach((t=>{if(t.filterPromise.resolveNow(!1,e)){const e=t.filterPromise.resolveNow(null,(e=>e));n(t.column)?this.activeAggregateFilters.push(e):this.activeColumnFilters.push(e)}}))}updateFilterFlagInColumns(e,t){this.allColumnFilters.forEach((n=>{const i=n.filterPromise.resolveNow(!1,(e=>e.isFilterActive()));n.column.setFilterActive(i,e,t)}))}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}doColumnFiltersPass(e,t,n){const{data:i,aggData:r}=e,s=n?this.activeAggregateFilters:this.activeColumnFilters,o=n?r:i;for(let a=0;a<s.length;a++){const n=s[a];if(null!=n&&n!==t){if("function"!==typeof n.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!n.doesFilterPass({node:e,data:o}))return!1}}return!0}resetQuickFilterCache(){this.quickFilterService.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gos.getGroupAggFiltering()&&this.onFilterChanged()}callOnFilterChangedOutsideRenderCycle(e){const t=()=>this.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}onFilterChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{source:t,filterInstance:n,additionalEventAttributes:i,columns:r}=e;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",i),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach((e=>{e.filterPromise&&e.filterPromise.then((e=>{e&&e!==n&&e.onAnyFilterChanged&&e.onAnyFilterChanged()}))}));const s={source:t,type:OR.EVENT_FILTER_CHANGED,columns:r||[]};i&&l_(s,i),this.processingFilterChange=!0,this.eventService.dispatchEvent(s),this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var e;return!(null!=(e=this.gos.get("allowShowChangeAfterFilter"))&&e)&&this.processingFilterChange}isQuickFilterPresent(){return this.quickFilterService.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gos.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode))&&!(this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode))&&(!(this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode))&&(!(this.isColumnFilterPresent()&&!this.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip))&&!(this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))))}onNewRowsLoaded(e){this.allColumnFilters.forEach((e=>{e.filterPromise.then((e=>{e.onNewRowsLoaded&&e.onNewRowsLoaded()}))})),this.updateFilterFlagInColumns(e,{afterDataChange:!0}),this.updateActiveFilters()}createValueGetter(e){return t=>{let{node:n}=t;return this.valueService.getValue(e,n,!0)}}createGetValue(e){return(t,n)=>{const i=n?this.columnModel.getGridColumn(n):e;return i?this.valueService.getValue(i,t,!0):void 0}}getFilterComponent(e,t){var n;if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])return(null==(n=this.getOrCreateFilterWrapper(e,t))?void 0:n.filterPromise)||null;const i=this.cachedFilter(e);return i?i.filterPromise:null}isFilterActive(e){const t=this.cachedFilter(e);return!!t&&t.filterPromise.resolveNow(!1,(e=>e.isFilterActive()))}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return null;let n=this.cachedFilter(e);return n||(n=this.createFilterWrapper(e,t),this.setColumnFilterWrapper(e,n)),n}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(P_.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))t="agSetColumnFilter";else{const n=this.dataTypeService.getBaseDataType(e);t="number"===n?"agNumberColumnFilter":"date"===n||"dateString"===n?"agDateColumnFilter":"agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(P_.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))t="agSetColumnFloatingFilter";else{const n=this.dataTypeService.getBaseDataType(e);t="number"===n?"agNumberColumnFloatingFilter":"date"===n||"dateString"===n?"agDateColumnFloatingFilter":"agTextColumnFloatingFilter"}return t}createFilterInstance(e){const t=this.getDefaultFilter(e),n=e.getColDef();let i;const r=GT(VT({},this.createFilterParams(e,n)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(i,e)(),filterChangedCallback:t=>this.filterChangedCallbackFactory(i,e)(t),doesRowPassOtherFilter:e=>this.doesRowPassOtherFilters(i,e)}),s=this.userComponentFactory.getFilterDetails(n,r,t);return s?{filterPromise:()=>{const e=s.newAgStackInstance();return e&&e.then((e=>i=e)),e},compDetails:s}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:s_(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e,t){var n;const i={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:r,compDetails:s}=this.createFilterInstance(e);return i.filterPromise=null!=(n=null==r?void 0:r())?n:null,i.compDetails=s,i}onColumnsChanged(){const e=[];this.allColumnFilters.forEach(((t,n)=>{let i;i=t.column.isPrimary()?this.columnModel.getPrimaryColumn(n):this.columnModel.getGridColumn(n),i&&i===t.column||(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(n))})),e.length>0?this.onFilterChanged({columns:e,source:"api"}):this.updateDependantFilters()}updateDependantFilters(){const e=this.columnModel.getGroupAutoColumns();null==e||e.forEach((e=>{"agGroupColumnFilter"===e.getColDef().filter&&this.getOrCreateFilterWrapper(e,"NO_UI")}))}isFilterAllowed(e){var t,n;if(this.isAdvancedFilterEnabled())return!1;if(!e.isFilterAllowed())return!1;const i=this.allColumnFilters.get(e.getColId());return null==(n=null==(t=null==i?void 0:i.filterPromise)?void 0:t.resolveNow(!0,(e=>"function"!==typeof(null==e?void 0:e.isFilterAllowed)||(null==e?void 0:e.isFilterAllowed()))))||n}getFloatingFilterCompDetails(e,t){const n=t=>{const n=this.getFilterComponent(e,"NO_UI");null!=n&&n.then((e=>{t(dk(e))}))},i=e.getColDef(),r=GT(VT({},this.createFilterParams(e,i)),{filterChangedCallback:()=>n((t=>this.filterChangedCallbackFactory(t,e)()))}),s=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(i,XN,r);let o=this.userComponentFactory.getDefaultFloatingFilterType(i,(()=>this.getDefaultFloatingFilter(e)));null==o&&(o="agReadOnlyFloatingFilter");const a={column:e,filterParams:s,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:n,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(i,a,o)}getCurrentFloatingFilterParentModel(e){const t=this.getFilterComponent(e,"NO_UI",!1);return t?t.resolveNow(null,(e=>e&&e.getModel())):null}destroyFilter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const n=e.getColId(),i=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialFilterModel[n],i&&(this.disposeFilterWrapper(i,t),this.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then((n=>{this.getContext().destroyBean(n),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId());const i={type:OR.EVENT_FILTER_DESTROYED,source:t,column:e.column};this.eventService.dispatchEvent(i)}))}filterModifiedCallbackFactory(e,t){return()=>{const n={type:OR.EVENT_FILTER_MODIFIED,column:t,filterInstance:e};this.eventService.dispatchEvent(n)}}filterChangedCallbackFactory(e,t){return n=>{var i;const r=null!=(i=null==n?void 0:n.source)?i:"api",s={filter:e,additionalEventAttributes:n,columns:[t],source:r};this.callOnFilterChangedOutsideRenderCycle(s)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const n=t.column,{compDetails:i}=n.isFilterAllowed()?this.createFilterInstance(n):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,i))return void this.destroyFilter(n,"paramsUpdated");const r=n.getColDef().filterParams;t.filterPromise?t.filterPromise.then((e=>{!1===(!(null==e?void 0:e.refresh)||e.refresh(VT(GT(VT({},this.createFilterParams(n,n.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(e,n),filterChangedCallback:this.filterChangedCallbackFactory(e,n),doesRowPassOtherFilter:t=>this.doesRowPassOtherFilters(e,t)}),r)))&&this.destroyFilter(n,"paramsUpdated")})):this.destroyFilter(n,"paramsUpdated")}setColumnFilterWrapper(e,t){const n=e.getColId();this.allColumnFilters.set(n,t),this.allColumnListeners.set(n,this.addManagedListener(e,K_.EVENT_COL_DEF_CHANGED,(()=>this.checkDestroyFilter(n))))}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:n}=e,{componentClass:i}=t;return!(n===i||(null==n?void 0:n.render)&&(null==i?void 0:i.render)&&n.render===i.render)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){this.isAdvancedFilterEnabled()&&(this.dataTypeService.isPendingInference()?this.advancedFilterModelUpdateQueue.push(e):(this.advancedFilterService.setModel(null!=e?e:null),this.onFilterChanged({source:"advancedFilter"})))}showAdvancedFilterBuilder(e){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(e,!0)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){if(this.isAdvancedFilterEnabled())return!1;return this.columnModel.getAllGridColumns().some((e=>e.getColDef().floatingFilter))}getFilterInstance(e,t){if(this.isAdvancedFilterEnabled())return void this.warnAdvancedFilters();const n=this.getFilterInstanceImpl(e,(e=>{if(!t)return;const n=dk(e);t(n)}));return dk(n)}getColumnFilterInstance(e){return new Promise((t=>{this.getFilterInstance(e,(e=>{t(e)}))}))}getFilterInstanceImpl(e,t){const n=this.columnModel.getPrimaryColumn(e);if(!n)return;const i=this.getFilterComponent(n,"NO_UI"),r=i&&i.resolveNow(null,(e=>e));return r?setTimeout(t,0,r):i&&i.then((e=>{t(e)})),r}warnAdvancedFilters(){f_("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){var t;null==(t=this.advancedFilterService)||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach((e=>{let{model:t,source:n}=e;return this.setFilterModel(t,n)})),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach((e=>{let{key:t,model:n,resolve:i}=e;this.setColumnFilterModel(t,n).then((()=>i()))})),this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue.forEach((e=>this.setAdvancedFilterModel(e))),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.isAdvancedFilterEnabled())return this.warnAdvancedFilters(),Promise.resolve();if(this.dataTypeService.isPendingInference()){let n=()=>{};const i=new Promise((e=>{n=e}));return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:n}),i}const n=this.columnModel.getPrimaryColumn(e),i=n?this.getOrCreateFilterWrapper(n,"NO_UI"):null;return i?(r=this.setModelOnFilterWrapper(i.filterPromise,t),new Promise((e=>{r.then((t=>e(t)))}))):Promise.resolve();var r}getFilterWrapper(e){var t;const n=this.columnModel.getPrimaryColumn(e);return n&&null!=(t=this.cachedFilter(n))?t:null}destroy(){super.destroy(),this.allColumnFilters.forEach((e=>this.disposeFilterWrapper(e,"gridDestroyed"))),this.allColumnListeners.clear()}};WT([F_("valueService")],gk.prototype,"valueService",2),WT([F_("columnModel")],gk.prototype,"columnModel",2),WT([F_("rowModel")],gk.prototype,"rowModel",2),WT([F_("userComponentFactory")],gk.prototype,"userComponentFactory",2),WT([F_("rowRenderer")],gk.prototype,"rowRenderer",2),WT([F_("dataTypeService")],gk.prototype,"dataTypeService",2),WT([F_("quickFilterService")],gk.prototype,"quickFilterService",2),WT([B_("advancedFilterService")],gk.prototype,"advancedFilterService",2),WT([k_],gk.prototype,"init",1),gk=WT([L_("filterManager")],gk);var fk=class extends XP{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}postConstruct(){this.createFilter(!0),this.addManagedListener(this.eventService,OR.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))}hasFilter(){return!!this.filterWrapper}getFilter(){var e,t;return null!=(t=null==(e=this.filterWrapper)?void 0:e.filterPromise)?t:null}afterInit(){var e,t,n;return null!=(n=null==(t=null==(e=this.filterWrapper)?void 0:e.filterPromise)?void 0:t.then((()=>{})))?n:WP.resolve()}afterGuiAttached(e){var t,n;null==(n=null==(t=this.filterWrapper)?void 0:t.filterPromise)||n.then((t=>{var n;null==(n=null==t?void 0:t.afterGuiAttached)||n.call(t,e)}))}afterGuiDetached(){var e,t;null==(t=null==(e=this.filterWrapper)?void 0:e.filterPromise)||t.then((e=>{var t;null==(t=null==e?void 0:e.afterGuiDetached)||t.call(e)}))}createFilter(e){var t;const{column:n,source:i}=this;this.filterWrapper=this.filterManager.getOrCreateFilterWrapper(n,i),(null==(t=this.filterWrapper)?void 0:t.filterPromise)&&this.filterWrapper.filterPromise.then((t=>{let r=t.getGui();if(YT(r)||console.warn("AG Grid: getGui method from filter returned ".concat(r,", it should be a DOM element or an HTML template string.")),"string"===typeof r&&(r=XM(r)),this.appendChild(r),e){const e={type:OR.EVENT_FILTER_OPENED,column:n,source:i,eGui:this.getGui()};this.eventService.dispatchEvent(e)}}))}onFilterDestroyed(e){"api"!==e.source&&"paramsUpdated"!==e.source||e.column.getId()!==this.column.getId()||!this.columnModel.getPrimaryColumn(this.column)||(zM(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}};WT([F_("filterManager")],fk.prototype,"filterManager",2),WT([F_("columnModel")],fk.prototype,"columnModel",2),WT([k_],fk.prototype,"postConstruct",1);var mk=class extends XP{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},vk=class e extends mk{constructor(t){super(e.TEMPLATE,t)}postConstruct(){const e=this.getGui(),t={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),addOrRemoveBodyCssClass:(e,t)=>this.eFloatingFilterBody.classList.toggle(e,t),setButtonWrapperDisplayed:e=>IM(this.eButtonWrapper,e),setCompDetails:e=>this.setCompDetails(e),getFloatingFilterComp:()=>this.compPromise,setWidth:t=>e.style.width=t,setMenuIcon:e=>this.eButtonShowMainFilter.appendChild(e)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(e){if(!e)return this.destroyFloatingFilterComp(),void(this.compPromise=null);this.compPromise=e.newAgStackInstance(),this.compPromise.then((e=>this.afterCompCreated(e)))}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){e&&(this.isAlive()?(this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()):this.destroyBean(e))}};vk.TEMPLATE='<div class="ag-header-cell ag-floating-filter" role="gridcell">\n            <div ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">\n                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',WT([QP("eFloatingFilterBody")],vk.prototype,"eFloatingFilterBody",2),WT([QP("eButtonWrapper")],vk.prototype,"eButtonWrapper",2),WT([QP("eButtonShowMainFilter")],vk.prototype,"eButtonShowMainFilter",2),WT([k_],vk.prototype,"postConstruct",1),WT([O_],vk.prototype,"destroyFloatingFilterComp",1);var yk=vk,Ck=class extends MR{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e},n=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(n,t)}getDomLayout(){var e;const t=null!=(e=this.gos.get("domLayout"))?e:"normal";return-1===["normal","print","autoHeight"].indexOf(t)?(f_("".concat(t," is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.")),"normal"):t}};WT([k_],Ck.prototype,"postConstruct",1);var wk=class extends MR{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=x_((()=>this.lastScrollSource[1]=null),500),this.resetLastVScrollDebounced=x_((()=>this.lastScrollSource[0]=null),500)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady((e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()}))}addScrollListener(){const{fakeHScrollComp:e,fakeVScrollComp:t}=this.ctrlsService.getParams();this.addManagedListener(this.centerRowsCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),e.onScrollCallback(this.onFakeHScroll.bind(this));const n=this.gos.get("debounceVerticalScrollbar"),i=n?x_(this.onVScroll.bind(this),100):this.onVScroll.bind(this),r=n?x_(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",i),t.onScrollCallback(r)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){if(null==this.centerRowsCtrl)return;void 0===e&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft());const t=this.enableRtl?e:-e,{topCenter:n,stickyTopCenter:i,stickyBottomCenter:r,centerHeader:s,bottomCenter:o,fakeHScrollComp:a}=this.ctrlsService.getParams();s.setHorizontalScroll(-t),o.setContainerTranslateX(t),n.setContainerTranslateX(t),i.setContainerTranslateX(t),r.setContainerTranslateX(t);const l=this.centerRowsCtrl.getViewportElement(),c=0===this.lastScrollSource[1];e=Math.abs(e),c?a.setScrollPosition(e):UM(l,e,this.enableRtl)}isControllingScroll(e,t){return null==this.lastScrollSource[t]?(this.lastScrollSource[t]=e,!0):this.lastScrollSource[t]===e}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(e){const t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;let i;i=0===e?jM(t,this.enableRtl):this.ctrlsService.get("fakeHScrollComp").getScrollPosition(),this.doHorizontalScroll(Math.round(i)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(e){let t;t=0===e?this.eBodyViewport.scrollTop:this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0)||(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,0===e?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:OR.EVENT_BODY_SCROLL,direction:1===e?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout((()=>{const e=GT(VT({},t),{type:OR.EVENT_BODY_SCROLL_END});this.eventService.dispatchEvent(e)}),100)}shouldBlockScrollUpdate(e,t){return!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&!rM())&&(0===e?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t))}shouldBlockVerticalScroll(e){const t=FM(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&WM()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(e=this.enableRtl&&WM()?e>0?0:n:Math.min(Math.max(e,0),n)),UM(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight;return{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.rowModel.getRowCount();let i=-1;for(let r=0;r<n;r++){const t=this.rowModel.getRow(r);if("function"===typeof e){if(t&&e(t)){i=r;break}}else if(e===t||e===t.data){i=r;break}}i>=0&&this.ensureIndexVisible(i,t)}ensureIndexVisible(e,t){if(this.gos.isDomLayout("print"))return;const n=this.paginationProxy.getRowCount();if("number"!==typeof e||e<0||e>=n)return void console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+e);const i=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming((()=>{i||this.paginationProxy.goToPageWithIndex(e);const n=this.ctrlsService.getGridBodyCtrl(),r=n.getStickyTopHeight(),s=n.getStickyBottomHeight(),o=this.paginationProxy.getRow(e);let a;do{const e=o.rowTop,n=o.rowHeight,i=this.paginationProxy.getPixelOffset(),l=o.rowTop-i,c=l+o.rowHeight,u=this.getVScrollPosition(),d=this.heightScaler.getDivStretchOffset(),h=u.top+d,p=u.bottom+d,g=p-h,f=this.heightScaler.getScrollPositionForPixel(l),m=this.heightScaler.getScrollPositionForPixel(c-g),v=Math.min((f+m)/2,l);let y=null;"top"===t?y=f:"bottom"===t?y=m:"middle"===t?y=v:h+r>l?y=f-r:p-s<c&&(y=m+s),null!==y&&(this.setVerticalScrollPosition(y),this.rowRenderer.redraw({afterScroll:!0})),a=e!==o.rowTop||n!==o.rowHeight}while(a);this.animationFrameService.flushAllFrames()}))}ensureColumnVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";const n=this.columnModel.getGridColumn(e);if(!n)return;if(n.isPinned())return;if(!this.columnModel.isColumnDisplayed(n))return;const i=this.getPositionedHorizontalScroll(n,t);this.getFrameworkOverrides().wrapIncoming((()=>{null!==i&&this.centerRowsCtrl.setCenterViewportScrollLeft(i),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}))}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming((()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()}))}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:n,columnAfterEnd:i}=this.isColumnOutsideViewport(e),r=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),s=this.centerRowsCtrl.getCenterWidth(),o=this.enableRtl;let a=(o?n:i)||r,l=o?i:n;"auto"!==t&&(a="start"===t,l="end"===t);const c="middle"===t;if(a||l||c){const{colLeft:t,colMiddle:n,colRight:i}=this.getColumnBounds(e);return c?n-s/2:a?o?i:t:o?t-s:i-s}return null}isColumnOutsideViewport(e){const{start:t,end:n}=this.getViewportBounds(),{colLeft:i,colRight:r}=this.getColumnBounds(e),s=this.enableRtl;return{columnBeforeStart:s?t>r:n<r,columnAfterEnd:s?n<i:t>i}}getColumnBounds(e){const t=this.enableRtl,n=this.columnModel.getBodyContainerWidth(),i=e.getActualWidth(),r=e.getLeft(),s=t?-1:1,o=t?n-r:r;return{colLeft:o,colMiddle:o+i/2*s,colRight:o+i*s}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}};WT([F_("ctrlsService")],wk.prototype,"ctrlsService",2),WT([F_("animationFrameService")],wk.prototype,"animationFrameService",2),WT([F_("paginationProxy")],wk.prototype,"paginationProxy",2),WT([F_("rowModel")],wk.prototype,"rowModel",2),WT([F_("rowContainerHeightService")],wk.prototype,"heightScaler",2),WT([F_("rowRenderer")],wk.prototype,"rowRenderer",2),WT([F_("columnModel")],wk.prototype,"columnModel",2),WT([k_],wk.prototype,"postConstruct",1);var bk="ag-force-vertical-scroll",Sk=class extends MR{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,n,i,r,s,o){this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=i,this.eBottom=r,this.eStickyTop=s,this.eStickyBottom=o,this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",(e=>this.setCellTextSelection(e.currentValue))),this.createManagedBean(new Ck(this.comp)),this.bodyScrollFeature=this.createManagedBean(new wk(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,r,s,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(i),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){this.addManagedListener(this.eventService,OR.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}addFocusListeners(e){e.forEach((e=>{this.addManagedListener(e,"focusin",(t=>{const{target:n}=t,i=OM(n,"ag-root",e);e.classList.toggle("ag-has-focus",!i)})),this.addManagedListener(e,"focusout",(t=>{const{target:n,relatedTarget:i}=t,r=e.contains(i),s=OM(i,"ag-root",e);OM(n,"ag-root",e)||r&&!s||e.classList.remove("ag-has-focus")}))}))}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.comp.setCellSelectableCss("ag-selectable",e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const t=e&&this.gos.getScrollbarWidth()||0,n=hM()?16:0,i="calc(100% + ".concat(t+n,"px)");this.animationFrameService.requestAnimationFrame((()=>this.comp.setBodyViewportWidth(i)))}onGridColumnsChanged(){const e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedListener(this.eGridBody,"dragstart",(e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}))}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const e=e=>{const n=e.relatedTarget;if(null===oM(n))return void this.rowRenderer.stopEditing();let i=t.some((e=>e.contains(n)))&&this.mouseEventService.isElementInThisGrid(n);if(!i){const e=this.popupService;i=e.getActivePopups().some((e=>e.contains(n)))||e.isElementWithinCustomPopup(n)}i||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach((t=>this.addManagedListener(t,"focusout",e)))}updateRowCount(){const e=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,n=-1===t?-1:e+t;this.comp.setRowCount(n)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?bk:null,n=this.gos.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||n&&tP(this.eBodyViewport)}setupRowAnimationCssClass(){const e=()=>{const e=this.gos.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),t=e?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(t,e)};e(),this.addManagedListener(this.eventService,OR.EVENT_HEIGHT_SCALE_CHANGED,e),this.addManagedPropertyListener("animateRows",e)}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",e),this.mockContextMenuForIPad(e),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyWheel.bind(this)),this.addManagedListener(this.eStickyBottom,"wheel",this.onStickyWheel.bind(this)),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){const e=this.eBodyViewport.querySelector(".ag-full-width-container"),t=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&t&&this.addManagedListener(e,"wheel",(e=>this.onFullWidthContainerWheel(e,t)))}onFullWidthContainerWheel(e,t){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),t.scrollBy({left:e.deltaX}))}onBodyViewportContextMenu(e,t,n){if(!e&&!n)return;if(this.gos.get("preventDefaultOnContextMenu")){(e||n).preventDefault()}const{target:i}=e||t;i!==this.eBodyViewport&&i!==this.ctrlsService.get("center").getViewportElement()||this.menuService.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!rM())return;const t=new zI(this.eBodyViewport);this.addManagedListener(t,zI.EVENT_LONG_TAP,(t=>{e(void 0,t.touchStart,t.touchEvent)})),this.addDestroyFunc((()=>t.destroy()))}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}onStickyWheel(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new ak(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}onPinnedRowDataChanged(){this.setFloatingHeights()}setFloatingHeights(){const{pinnedRowModel:e}=this;let t=e.getPinnedTopTotalHeight(),n=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(n),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(n?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyTopHeight("".concat(e,"px")),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyBottomHeight("".concat(e,"px")),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(e){const e=this.gos.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - ".concat(e,"px)")),this.comp.setStickyBottomWidth("calc(100% - ".concat(e,"px)"))}else this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%")}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const e=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+this.filterManager.getHeaderHeight(),t=this.pinnedRowModel.getPinnedTopTotalHeight();let n=0;e>0&&(n+=e),t>0&&(n+=t),n>0&&(n+=1),this.comp.setStickyTopTop("".concat(n,"px"))}setStickyBottomOffsetBottom(){const e=this.pinnedRowModel.getPinnedBottomTotalHeight()+(this.scrollVisibleService.isHorizontalScrollShowing()&&this.gos.getScrollbarWidth()||0);this.comp.setStickyBottomBottom("".concat(e,"px"))}sizeColumnsToFit(e,t){const n=this.isVerticalScrollShowing()?this.gos.getScrollbarWidth():0,i=BM(this.eGridBody)-n;i>0?this.columnModel.sizeColumnsToFit(i,"sizeColumnsToFit",!1,e):void 0===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,100)}),0):100===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,500)}),100):500===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,-1)}),500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}};WT([F_("animationFrameService")],Sk.prototype,"animationFrameService",2),WT([F_("rowContainerHeightService")],Sk.prototype,"rowContainerHeightService",2),WT([F_("ctrlsService")],Sk.prototype,"ctrlsService",2),WT([F_("columnModel")],Sk.prototype,"columnModel",2),WT([F_("scrollVisibleService")],Sk.prototype,"scrollVisibleService",2),WT([F_("menuService")],Sk.prototype,"menuService",2),WT([F_("headerNavigationService")],Sk.prototype,"headerNavigationService",2),WT([F_("dragAndDropService")],Sk.prototype,"dragAndDropService",2),WT([F_("pinnedRowModel")],Sk.prototype,"pinnedRowModel",2),WT([F_("rowRenderer")],Sk.prototype,"rowRenderer",2),WT([F_("popupService")],Sk.prototype,"popupService",2),WT([F_("mouseEventService")],Sk.prototype,"mouseEventService",2),WT([F_("rowModel")],Sk.prototype,"rowModel",2),WT([F_("filterManager")],Sk.prototype,"filterManager",2);var Ek="ag-cell-range-selected",xk=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(Ek,0!==this.rangeCount),this.cellComp.addOrRemoveCssClass("".concat(Ek,"-1"),1===this.rangeCount),this.cellComp.addOrRemoveCssClass("".concat(Ek,"-2"),2===this.rangeCount),this.cellComp.addOrRemoveCssClass("".concat(Ek,"-3"),3===this.rangeCount),this.cellComp.addOrRemoveCssClass("".concat(Ek,"-4"),this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),GD(this.eGui,this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),n=!t&&e.top,i=!t&&e.right,r=!t&&e.bottom,s=!t&&e.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",n),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",i),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",r),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",s)}isSingleCell(){const{rangeService:e}=this.beans;return 1===this.rangeCount&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every((e=>pR([1,0],e.type)))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,n=!1,i=!1,r=!1;const s=this.cellCtrl.getCellPosition().column,o=this.beans.columnModel;let a,l;e?(a=o.getDisplayedColAfter(s),l=o.getDisplayedColBefore(s)):(a=o.getDisplayedColBefore(s),l=o.getDisplayedColAfter(s));const c=this.rangeService.getCellRanges().filter((e=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),e)));a||(r=!0),l||(n=!0);for(let u=0;u<c.length&&!(t&&n&&i&&r);u++){const e=c[u],s=this.rangeService.getRangeStartRow(e),o=this.rangeService.getRangeEndRow(e);!t&&this.beans.rowPositionUtils.sameRow(s,this.cellCtrl.getCellPosition())&&(t=!0),!i&&this.beans.rowPositionUtils.sameRow(o,this.cellCtrl.getCellPosition())&&(i=!0),!r&&a&&e.columns.indexOf(a)<0&&(r=!0),!n&&l&&e.columns.indexOf(l)<0&&(n=!0)}return{top:t,right:n,bottom:i,left:r}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,t=this.rangeService.getCellRanges(),n=t.length;if(this.rangeCount<1||n<1)return!1;const i=tR(t),r=this.cellCtrl.getCellPosition(),s=e.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),o=e.get("enableRangeHandle");let a=1===n&&!this.cellCtrl.isEditing()&&(s||o);if(this.hasChartRange){const e=1===t[0].type&&this.rangeService.isCellInSpecificRange(r,t[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",e),a=0===i.type}return a&&null!=i.endRow&&this.rangeService.isContiguousRange(i)&&this.rangeService.isBottomRightCell(i,r)}addSelectionHandle(){const e=this.beans.gos,t=tR(this.rangeService.getCellRanges()).type,n=e.get("enableFillHandle")&&qT(t)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==n&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(n)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},Ak=class extends MR{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListener(this.beans.eventService,OR.EVENT_NEW_COLUMNS_LOADED,(()=>this.onNewColumnsLoaded()))}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();nR(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,OR.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width="".concat(e,"px")}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce(((e,t)=>e+t.getActualWidth()),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(1===e)t.push(this.column);else{let n=this.column;const i=this.column.getPinned();for(let r=0;n&&r<e&&(t.push(n),n=this.beans.columnModel.getDisplayedColAfter(n),n&&!qT(n))&&i===n.getPinned();r++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return e=this.beans.gos.get("enableRtl")&&this.colsSpanning?tR(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||"left"===this.column.getPinned())return e;const t=this.beans.columnModel.getDisplayedColumnsLeftWidth();if("right"===this.column.getPinned()){return t+this.beans.columnModel.getBodyContainerWidth()+(e||0)}return t+(e||0)}applyRowSpan(e){if(1===this.rowSpan&&!e)return;const t=this.beans.gos.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height="".concat(t,"px"),this.eGui.style.zIndex="1"}destroy(){super.destroy()}},Tk=class extends MR{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,n=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,n,(e=>this.cellComp.addOrRemoveCssClass(e,!0)),(e=>this.cellComp.addOrRemoveCssClass(e,!1))),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if("function"===typeof e.cellStyle){const n=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex});t=(0,e.cellStyle)(n)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach((e=>this.cellComp.addOrRemoveCssClass(e,!1))),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach((e=>this.cellComp.addOrRemoveCssClass(e,!0)))}destroy(){super.destroy()}},_k=class{postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gos.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)}};WT([F_("resizeObserverService")],_k.prototype,"resizeObserverService",2),WT([F_("paginationProxy")],_k.prototype,"paginationProxy",2),WT([F_("context")],_k.prototype,"context",2),WT([F_("gridOptionsService")],_k.prototype,"gos",2),WT([F_("environment")],_k.prototype,"environment",2),WT([F_("rowRenderer")],_k.prototype,"rowRenderer",2),WT([F_("valueService")],_k.prototype,"valueService",2),WT([F_("eventService")],_k.prototype,"eventService",2),WT([F_("columnModel")],_k.prototype,"columnModel",2),WT([F_("headerNavigationService")],_k.prototype,"headerNavigationService",2),WT([F_("navigationService")],_k.prototype,"navigationService",2),WT([F_("columnAnimationService")],_k.prototype,"columnAnimationService",2),WT([F_("focusService")],_k.prototype,"focusService",2),WT([F_("popupService")],_k.prototype,"popupService",2),WT([F_("stylingService")],_k.prototype,"stylingService",2),WT([F_("columnHoverService")],_k.prototype,"columnHoverService",2),WT([F_("userComponentFactory")],_k.prototype,"userComponentFactory",2),WT([F_("userComponentRegistry")],_k.prototype,"userComponentRegistry",2),WT([F_("animationFrameService")],_k.prototype,"animationFrameService",2),WT([F_("dragService")],_k.prototype,"dragService",2),WT([F_("dragAndDropService")],_k.prototype,"dragAndDropService",2),WT([F_("sortController")],_k.prototype,"sortController",2),WT([F_("filterManager")],_k.prototype,"filterManager",2),WT([F_("rowContainerHeightService")],_k.prototype,"rowContainerHeightService",2),WT([F_("frameworkOverrides")],_k.prototype,"frameworkOverrides",2),WT([F_("cellPositionUtils")],_k.prototype,"cellPositionUtils",2),WT([F_("rowPositionUtils")],_k.prototype,"rowPositionUtils",2),WT([F_("selectionService")],_k.prototype,"selectionService",2),WT([F_("rowCssClassCalculator")],_k.prototype,"rowCssClassCalculator",2),WT([F_("rowModel")],_k.prototype,"rowModel",2),WT([F_("ctrlsService")],_k.prototype,"ctrlsService",2),WT([F_("ctrlsFactory")],_k.prototype,"ctrlsFactory",2),WT([F_("agStackComponentsRegistry")],_k.prototype,"agStackComponentsRegistry",2),WT([F_("valueCache")],_k.prototype,"valueCache",2),WT([F_("rowNodeEventThrottle")],_k.prototype,"rowNodeEventThrottle",2),WT([F_("localeService")],_k.prototype,"localeService",2),WT([F_("syncService")],_k.prototype,"syncService",2),WT([F_("ariaAnnouncementService")],_k.prototype,"ariaAnnouncementService",2),WT([B_("rangeService")],_k.prototype,"rangeService",2),WT([B_("selectionHandleFactory")],_k.prototype,"selectionHandleFactory",2),WT([k_],_k.prototype,"postConstruct",1),_k=WT([L_("beans")],_k);var Rk=class extends _k{constructor(e,t,n){super(),this.cellCtrl=e,this.beans=t,this.column=n}onMouseEvent(e,t){if(!SR(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}}onCellClicked(e){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(e),void e.preventDefault();const{eventService:t,rangeService:n,gos:i}=this.beans,r=e.ctrlKey||e.metaKey;n&&r&&n.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&n.intersectLastRange(!0);const s=this.cellCtrl.createEvent(e,OR.EVENT_CELL_CLICKED);t.dispatchEvent(s);const o=this.column.getColDef();o.onCellClicked&&window.setTimeout((()=>{this.beans.frameworkOverrides.wrapOutgoing((()=>{o.onCellClicked(s)}))}),0);!((i.get("singleClickEdit")||o.singleClickEdit)&&!i.get("suppressClickEdit"))||e.shiftKey&&0!=(null==n?void 0:n.getCellRanges().length)||this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!rM()||ER("dblclick"))return!1;const e=(new Date).getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const t=this.column.getColDef(),n=this.cellCtrl.createEvent(e,OR.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(n),"function"===typeof t.onCellDoubleClicked&&window.setTimeout((()=>{this.beans.frameworkOverrides.wrapOutgoing((()=>{t.onCellDoubleClicked(n)}))}),0);!this.beans.gos.get("singleClickEdit")&&!this.beans.gos.get("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:n,shiftKey:i}=e,r=e.target,{cellCtrl:s,beans:o}=this,{eventService:a,rangeService:l,focusService:c}=o;if(this.isRightClickInExistingRange(e))return;const u=l&&0!=l.getCellRanges().length;if(!i||!u){const e=JD()&&!s.isEditing()&&!PM(r);s.focusCell(e)}if(i&&u&&!c.isCellFocused(s.getCellPosition())){e.preventDefault();const t=c.getFocusedCell();if(t){const{column:e,rowIndex:n,rowPinned:i}=t,r=o.rowRenderer.getRowByPosition({rowIndex:n,rowPinned:i}),s=null==r?void 0:r.getCellCtrl(e);(null==s?void 0:s.isEditing())&&s.stopEditing(),c.setFocusedCell({column:e,rowIndex:n,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(r)){if(l){const e=this.cellCtrl.getCellPosition();if(i)l.extendLatestRangeToCell(e);else{const i=t||n;l.setRangeToCell(e,i)}}a.dispatchEvent(this.cellCtrl.createEvent(e,OR.EVENT_CELL_MOUSE_DOWN))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const n=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),i=2===e.button||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(n&&i)return!0}return!1}containsWidget(e){return OM(e,"ag-selection-checkbox",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,OR.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,OR.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),n=t.contains(e.target),i=t.contains(e.relatedTarget);return n&&i}destroy(){}},Dk=class extends MR{constructor(e,t,n,i,r){super(),this.cellCtrl=e,this.beans=t,this.rowNode=i,this.rowCtrl=r}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case SP.ENTER:this.onEnterKeyDown(e);break;case SP.F2:this.onF2KeyDown(e);break;case SP.ESCAPE:this.onEscapeKeyDown(e);break;case SP.TAB:this.onTabKeyDown(e);break;case SP.BACKSPACE:case SP.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case SP.DOWN:case SP.UP:case SP.RIGHT:case SP.LEFT:this.onNavigationKeyDown(e,t)}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){var n;const{cellCtrl:i,beans:r,rowNode:s}=this,{gos:o,rangeService:a,eventService:l}=r;if(!i.isEditing()){if(l.dispatchEvent({type:OR.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),NP(e,o.get("enableCellEditingOnBackspace"))){if(a&&o.get("enableRangeSelection"))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const e=i.getColumn(),t=null!=(n=this.beans.valueService.parseValue(e,s,"",s.getValueFromValueService(e)))?n:null;s.setDataValue(e,t,"cellClear")}}else i.startRowOrCellEdit(e,t);l.dispatchEvent({type:OR.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const t=e.shiftKey?SP.UP:SP.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(SP.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(SP.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const t=e.key;" "===t?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(t,e),e.preventDefault())}onSpaceKeyDown(e){const{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&t.isRowSelection()){const n=this.rowNode.isSelected(),i=!n;if(i||!t.get("suppressRowDeselection")){const t=this.beans.gos.get("groupSelectsFiltered"),r=this.rowNode.setSelectedParams({newValue:i,rangeSelect:e.shiftKey,groupSelectsFiltered:t,event:e,source:"spaceKey"});void 0===n&&0===r&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:t,event:e,source:"spaceKey"})}}e.preventDefault()}destroy(){super.destroy()}},Mk=class extends XP{constructor(e,t,n){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=n}postConstruct(){this.getGui().appendChild(wP("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",(e=>{e.stopPropagation()})),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const n=()=>{try{const t=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",t),e.dataTransfer.setData("text/plain",t)}catch(rre){}};if(t){t(this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e}))}else n()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};WT([k_],Mk.prototype,"postConstruct",1);var Pk=class{static getHeaderClassesFromColDef(e,t,n,i){return qT(e)?[]:this.getColumnClassesFromCollDef(e.headerClass,e,t,n,i)}static getToolPanelClassesFromColDef(e,t,n,i){return qT(e)?[]:this.getColumnClassesFromCollDef(e.toolPanelClass,e,t,n,i)}static refreshFirstAndLastStyles(e,t,n){e.addOrRemoveCssClass("ag-column-first",n.isColumnAtEdge(t,"first")),e.addOrRemoveCssClass("ag-column-last",n.isColumnAtEdge(t,"last"))}static getClassParams(e,t,n,i){return t.addGridCommonParams({colDef:e,column:n,columnGroup:i})}static getColumnClassesFromCollDef(e,t,n,i,r){if(qT(e))return[];let s;if("function"===typeof e){s=e(this.getClassParams(t,n,i,r))}else s=e;return"string"===typeof s?[s]:Array.isArray(s)?[...s]:[]}},Ik=0,Nk=class e extends MR{constructor(e,t,n,i){super(),this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.column=e,this.rowNode=t,this.beans=n,this.rowCtrl=i,this.instanceId=e.getId()+"-"+Ik++,this.colIdSanitised=zR(this.column.getId()),n.gos.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new Ak(this,this.beans),this.addDestroyFunc((()=>{var e;null==(e=this.cellPositionFeature)||e.destroy(),this.cellPositionFeature=null})),this.cellCustomStyleFeature=new Tk(this,this.beans),this.addDestroyFunc((()=>{var e;null==(e=this.cellCustomStyleFeature)||e.destroy(),this.cellCustomStyleFeature=null})),this.cellMouseListenerFeature=new Rk(this,this.beans,this.column),this.addDestroyFunc((()=>{var e;null==(e=this.cellMouseListenerFeature)||e.destroy(),this.cellMouseListenerFeature=null})),this.cellKeyboardListenerFeature=new Dk(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc((()=>{var e;null==(e=this.cellKeyboardListenerFeature)||e.destroy(),this.cellKeyboardListenerFeature=null})),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc((()=>{this.disableTooltipFeature()})));this.beans.rangeService&&this.beans.gos.get("enableRangeSelection")&&(this.cellRangeFeature=new xk(this.beans,this),this.addDestroyFunc((()=>{var e;null==(e=this.cellRangeFeature)||e.destroy(),this.cellRangeFeature=null})))}enableTooltipFeature(e,t){const n="whenTruncated"===this.beans.gos.get("tooltipShowMode");t||!n||this.isCellRenderer()||(t=()=>{const e=this.getGui(),t=0===e.children.length?e:e.querySelector(".ag-cell-value");return!t||t.scrollWidth>t.clientWidth});const i={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:null!=e?()=>e:()=>{const e=this.column.getColDef(),t=this.rowNode.data;if(e.tooltipField&&YT(t))return c_(t,e.tooltipField,this.column.isTooltipFieldContainsDots());const n=e.tooltipValueGetter;return n?n(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:t};this.tooltipFeature=new YP(i,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(e,t,n,i,r){var s,o,a,l;this.cellComp=e,this.eGui=t,this.printLayout=i,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(n),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),null==(s=this.cellPositionFeature)||s.setComp(t),null==(o=this.cellCustomStyleFeature)||o.setComp(e),null==(a=this.tooltipFeature)||a.refreshToolTip(),null==(l=this.cellKeyboardListenerFeature)||l.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,t),r&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach((e=>e())),this.onCellCompAttachedFuncs=[])}setupAutoHeight(e){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!e)return;const t=e.parentElement,n=this.beans.gos.getRowHeightForNode(this.rowNode).height,i=r=>{if(this.editing)return;if(!this.isAlive())return;const{paddingTop:s,paddingBottom:o,borderBottomWidth:a,borderTopWidth:l}=LM(t),c=s+o+a+l,u=e.offsetHeight+c;if(r<5){const t=this.beans.gos.getDocument();if(!t||!t.contains(e)||0==u)return void window.setTimeout((()=>i(r+1)),0)}const d=Math.max(u,n);this.rowNode.setRowAutoHeight(d,this.column)},r=()=>i(0);r();const s=this.beans.resizeObserverService.observeResize(e,r);this.addDestroyFunc((()=>{s(),this.rowNode.setRowAutoHeight(void 0,this.column)}))}getCellAriaRole(){var e;return null!=(e=this.column.getColDef().cellAriaRole)?e:"gridcell"}getInstanceId(){return this.instanceId}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){const e=this.column.getColDef();return null!=e.cellRenderer||null!=e.cellRendererSelector}getValueToDisplay(){var e;return null!=(e=this.valueFormatted)?e:this.value}showValue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getValueToDisplay();let i;if(this.rowNode.stub){const e=this.createCellRendererParams();i=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),e)}else if(this.isCellRenderer()){const e=this.createCellRendererParams();i=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),e)}this.cellComp.setRenderDetails(i,n,e),null==(t=this.cellRangeFeature)||t.refreshHandle()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return!(null!=this.rowNode.rowPinned)&&("function"===typeof e||!0===e)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),i=this.includeDndSource!=this.isIncludeControl(e.dndSource),r=this.isAutoHeight!=this.column.isAutoHeight();return t||n||i||r}startEditing(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!this.isCellEditable()||this.editing)return;if(!this.cellComp)return void this.onCellCompAttachedFuncs.push((()=>{this.startEditing(e,t,n)}));const i=this.createCellEditorParams(e,t),r=this.column.getColDef(),s=this.beans.userComponentFactory.getCellEditorDetails(r,i);this.editCompDetails=s;const o=null!=(null==s?void 0:s.popupFromSelector)?s.popupFromSelector:!!r.cellEditorPopup,a=null!=(null==s?void 0:s.popupPositionFromSelector)?s.popupPositionFromSelector:r.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(s,o,a,this.beans.gos.get("reactiveCustomComponents"));const l=this.createEvent(n,OR.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(l)}setEditing(e){var t;this.editing!==e&&(this.editing=e,null==(t=this.cellRangeFeature)||t.refreshHandle())}stopRowOrCellEdit(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"fullRow"===this.beans.gos.get("editType")?this.rowCtrl.stopEditing(e):this.stopEditing(e)}onPopupEditorClosed(){this.isEditing()&&this.stopEditingAndFocus()}takeValueFromCellEditor(e){const t={newValueExists:!1};if(e)return t;const n=this.cellComp.getCellEditor();if(!n)return t;if(n.isCancelAfterEnd&&n.isCancelAfterEnd())return t;return{newValue:n.getValue(),newValueExists:!0}}saveNewValue(e,t){if(t===e)return!1;this.suppressRefreshCell=!0;const n=this.rowNode.setDataValue(this.column,t,"edit");return this.suppressRefreshCell=!1,n}stopEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.editing)return!1;const{newValue:t,newValueExists:n}=this.takeValueFromCellEditor(e),i=this.rowNode.getValueFromValueService(this.column);let r=!1;return n&&(r=this.saveNewValue(i,t)),this.setEditing(!1),this.cellComp.setEditDetails(),this.editCompDetails=void 0,this.updateAndFormatValue(!1),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(i,t,!e&&!!r),r}dispatchEditingStoppedEvent(e,t,n){const i=GT(VT({},this.createEvent(null,OR.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:t,valueChanged:n});this.beans.eventService.dispatchEvent(i)}createCellEditorParams(e,t){return this.beans.gos.addGridCommonParams({value:this.rowNode.getValueFromValueService(this.column),eventKey:e,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,cellStartedEdit:t,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)})}createCellRendererParams(){const e=this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:e=>this.beans.valueService.setValue(this.rowNode,this.column,e),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(e,t,n,i)=>this.registerRowDragger(e,t,i),setTooltip:(e,t)=>{var n;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,t),null==(n=this.tooltipFeature)||n.refreshToolTip()}});return e}parseValue(e){return this.beans.valueService.parseValue(this.column,this.rowNode,e,this.getValue())}setFocusOutOnEditor(){if(!this.editing)return;const e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}setFocusInOnEditor(){if(!this.editing)return;const e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;this.refreshShouldDestroy()?null==(t=this.rowCtrl)||t.recreateCell(this):this.refreshCell(e)}refreshCell(e){var t,n,i,r;if(this.suppressRefreshCell||this.editing)return;const s=this.column.getColDef(),o=null!=e&&!!e.newData,a=null!=e&&!!e.suppressFlash||!!s.suppressCellFlash,l=null==s.field&&null==s.valueGetter&&null==s.showRowGroup,c=e&&e.forceRefresh||l||o,u=!!this.cellComp,d=this.updateAndFormatValue(u);if(u){if(c||d){this.showValue(o);const e=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!a&&!e&&(this.beans.gos.get("enableCellChangeFlash")||s.enableCellChangeFlash)&&this.flashCell(),null==(t=this.cellCustomStyleFeature)||t.applyUserStyles(),null==(n=this.cellCustomStyleFeature)||n.applyClassesFromColDef()}null==(i=this.tooltipFeature)||i.refreshToolTip(),null==(r=this.cellCustomStyleFeature)||r.applyCellClassRules()}}stopEditingAndFocus(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit(t)}navigateAfterEdit(e){if(this.beans.gos.get("enterNavigatesVerticallyAfterEdit")){const t=e?SP.UP:SP.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.getCellPosition(),!1)}}flashCell(e){var t,n;const i=null!=(t=null==e?void 0:e.flashDuration)?t:null==e?void 0:e.flashDelay,r=null!=(n=null==e?void 0:e.fadeDuration)?n:null==e?void 0:e.fadeDelay;this.animateCell("data-changed",i,r)}animateCell(e,t,n){if(!this.cellComp)return;const i="ag-cell-".concat(e),r="ag-cell-".concat(e,"-animation"),{gos:s}=this.beans;t||(t=s.get("cellFlashDuration")),YT(n)||(n=s.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(i,!0),this.cellComp.addOrRemoveCssClass(r,!1),this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(i,!1),this.cellComp.addOrRemoveCssClass(r,!0),this.eGui.style.transition="background-color ".concat(n,"ms"),window.setTimeout((()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.eGui.style.transition="")}),n))}),t)}))}onFlashCells(e){if(!this.cellComp)return;const t=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[t]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(e){var t;return null!=(t=this.callValueFormatter(e))?t:e}callValueFormatter(e){return this.beans.valueService.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,n=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),!e||(!this.valuesAreEqual(t,this.value)||this.valueFormatted!=n)}valuesAreEqual(e,t){const n=this.column.getColDef();return n.equals?n.equals(e,t):e===t}getComp(){return this.cellComp}getValue(){return this.value}addDomData(){const t=this.getGui();this.beans.gos.setDomData(t,e.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc((()=>this.beans.gos.setDomData(t,e.DOM_DATA_KEY_CELL_CTRL,null)))}createEvent(e,t){return this.beans.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex})}processCharacter(e){var t;null==(t=this.cellKeyboardListenerFeature)||t.processCharacter(e)}onKeyDown(e){var t;null==(t=this.cellKeyboardListenerFeature)||t.onKeyDown(e)}onMouseEvent(e,t){var n;null==(n=this.cellMouseListenerFeature)||n.onMouseEvent(e,t)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var e;this.cellComp&&(null==(e=this.cellPositionFeature)||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:e,column:t,beans:n}=this;Pk.refreshFirstAndLastStyles(e,t,n.columnModel)}refreshAriaColIndex(){const e=this.beans.columnModel.getAriaColumnIndex(this.column);LD(this.getGui(),e)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var e;return null==(e=this.cellPositionFeature)?void 0:e.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.cellComp?"fullRow"===this.beans.gos.get("editType")?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,t):this.onCellCompAttachedFuncs.push((()=>{this.startRowOrCellEdit(e,t)}))}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return null!=this.cellRangeFeature}focusCell(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;const e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",e)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",e)}onCellFocused(e){if(this.beans.gos.get("suppressCellFocus"))return;const t=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp)return void(t&&(null==e?void 0:e.forceBrowserFocus)&&(this.focusEventToRestore=e));if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass("ag-cell-focus",t),t&&e&&e.forceBrowserFocus){this.cellComp.getFocusableElement().focus({preventScroll:!!e.preventScrollOnBrowserFocus})}const n="fullRow"===this.beans.gos.get("editType");t||n||!this.editing||this.stopRowOrCellEdit(),t&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:zT(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);const e=1==this.column.isAutoHeight();this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",e),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!e)}onColumnHover(){if(!this.cellComp)return;if(!this.beans.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",e)}onColDefChanged(){if(!this.cellComp)return;if(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing){const e=this.getCellEditor();if(null==e?void 0:e.refresh){const{eventKey:t,cellStartedEdit:n}=this.editCompDetails.params,i=this.createCellEditorParams(t,n),r=this.column.getColDef(),s=this.beans.userComponentFactory.getCellEditorDetails(r,i);e.refresh(s.params)}}else this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){const e=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),n=this.createEvent(e,OR.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(n),t.onCellContextMenu&&window.setTimeout((()=>{this.beans.frameworkOverrides.wrapOutgoing((()=>{t.onCellContextMenu(n)}))}),0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const e=new cN;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=new Mk(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e}registerRowDragger(e,t,n){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(e,t);const i=this.createRowDragComp(e,t,n);i&&(this.customRowDragComp=i,this.addDestroyFunc((()=>{this.beans.context.destroyBean(i),this.customRowDragComp=null})))}createRowDragComp(e,t,n){const i=this.beans.gos.get("pagination"),r=this.beans.gos.get("rowDragManaged"),s=this.beans.gos.isRowModelType("clientSide");if(r){if(!s)return void f_("managed row dragging is only allowed in the Client Side Row Model");if(i)return void f_("managed row dragging is not possible when doing pagination")}const o=new hN((()=>this.value),this.rowNode,this.column,e,t,n);return this.beans.context.createBean(o),o}};Nk.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var kk=Nk,Ok=0,Lk=class e extends MR{constructor(e,t,n,i,r){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=t,this.gos=t.gos,this.rowNode=e,this.paginationPage=t.paginationProxy.getCurrentPage(),this.useAnimationFrameForCreate=i,this.printLayout=r,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+Ok++,this.rowId=zR(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=t.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gos.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!==typeof this.businessKeyForNodeFunc)return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=zR(e)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getInstanceId(){return this.instanceId}setComp(e,t,n){const i={rowComp:e,element:t,containerType:n};this.allRowGuis.push(i),"left"===n?this.leftGui=i:"right"===n?this.rightGui=i:"fullWidth"===n?this.fullWidthGui=i:this.centerGui=i,this.initialiseRowComp(i),"FullWidthLoading"===this.rowType||this.rowNode.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){switch(this.allRowGuis=this.allRowGuis.filter((t=>t.containerType!==e)),e){case"left":this.leftGui=void 0;break;case"right":this.rightGui=void 0;break;case"fullWidth":this.fullWidthGui=void 0;break;case"center":this.centerGui=void 0}}isCacheable(){return"FullWidthDetail"===this.rowType&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach((e=>e.element.style.display=t))}initialiseRowComp(t){const n=this.gos;this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),n.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const i=t.rowComp;this.getInitialRowClasses(t.containerType).forEach((e=>i.addOrRemoveCssClass(e,!0))),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&RD(t.element,1==this.rowNode.expanded),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),n.setDomData(t.element,e.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc((()=>n.setDomData(t.element,e.DOM_DATA_KEY_ROW_CTRL,null))),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t.element),this.isFullWidth()&&this.setupFullWidth(t),n.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask((()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)})),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){null!=this.businessKeySanitised&&e.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(e){this.rowId=zR(this.rowNode.id),null!=this.rowId&&e.setRowId(this.rowId)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(S_((()=>{this.onTopChanged()})),this.slideInAnimation[t]=!1);this.fadeInAnimation[t]&&(S_((()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)})),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){if(this.gos.get("enableRangeSelection"))return void f_("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");const t=this.beans.localeService.getLocaleTextFunc(),n=new hN((()=>"1 ".concat(t("rowDragRow","row"))),this.rowNode,void 0,e.element,void 0,!0),i=this.createBean(n,this.beans.context);this.rowDragComps.push(i)}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType);if("FullWidthDetail"==this.rowType&&!P_.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;const n=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(n)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var e,t;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map((e=>{var t;return null==(t=null==e?void 0:e.rowComp)?void 0:t.getFullWidthCellRenderer()})):[null==(t=null==(e=this.fullWidthGui)?void 0:e.rowComp)?void 0:t.getFullWidthCellRenderer()]}getCellElement(e){const t=this.getCellCtrl(e);return t?t.getGui():null}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){const e=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),t=!!this.centerGui,n=!!this.rightGui||!this.beans.columnModel.isPinningRight();return e&&t&&n}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow"),t=this.rowNode.isFullWidthCell(),n=this.gos.get("masterDetail")&&this.rowNode.detail,i=this.beans.columnModel.isPivotMode(),r=!!this.rowNode.group&&!this.rowNode.footer&&this.gos.isGroupUseEntireRow(i);this.rowType=e?"FullWidthLoading":n?"FullWidthDetail":t?"FullWidth":r?"FullWidthGroup":"Normal"}updateColumnLists(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isFullWidth())return;e||this.gos.get("suppressAnimationFrame")||this.printLayout?this.updateColumnListsImpl(t):this.updateColumnListsPending||(this.beans.animationFrameService.createTask((()=>{this.active&&this.updateColumnListsImpl(!0)}),this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i={list:[],map:{}},r=(e,t)=>{i.list.push(t),i.map[e]=t};return t.forEach((t=>{const n=t.getInstanceId();let i=e.map[n];i||(i=new kk(t,this.rowNode,this.beans,this)),r(n,i)})),e.list.forEach((e=>{if(null!=i.map[e.getColumn().getInstanceId()])return;this.isCellEligibleToBeRemoved(e,n)?e.destroy():r(e.getColumn().getInstanceId(),e)})),i}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach((t=>{const n=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(n,e)}))}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list;default:throw new Error("Unhandled case: ".concat(e))}}createAllCellCtrls(){const e=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const t=e.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t);const n=e.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const i=e.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,i,"right")}}isCellEligibleToBeRemoved(e,t){const n=!0;if(e.getColumn().getPinned()!=t)return n;const i=e.isEditing(),r=this.beans.focusService.isCellFocused(e.getCellPosition());if(i||r){const t=e.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(t)>=0)&&n}return n}getDomOrder(){return this.gos.get("ensureDomOrder")||this.gos.isDomLayout("print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",t),this.addManagedPropertyListener("ensureDomOrder",t)}setAnimateFlags(e){if(this.isSticky()||!e)return;const t=YT(this.rowNode.oldRowTop),n=this.beans.columnModel.isPinningLeft(),i=this.beans.columnModel.isPinningRight();if(t){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(this.slideInAnimation.fullWidth=!0);this.slideInAnimation.center=!0,this.slideInAnimation.left=n,this.slideInAnimation.right=i}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(this.fadeInAnimation.fullWidth=!0);this.fadeInAnimation.center=!0,this.fadeInAnimation.left=n,this.fadeInAnimation.right=i}}isEditing(){return this.editingRow}isFullWidth(){return"Normal"!==this.rowType}refreshFullWidth(){const e=(e,t)=>!e||e.rowComp.refreshFullWidth((()=>this.createFullWidthCompDetails(e.element,t).params)),t=e(this.fullWidthGui,null),n=e(this.centerGui,null),i=e(this.leftGui,"left"),r=e(this.rightGui,"right");return t&&n&&i&&r}addListeners(){this.addManagedListener(this.rowNode,lN.EVENT_HEIGHT_CHANGED,(()=>this.onRowHeightChanged())),this.addManagedListener(this.rowNode,lN.EVENT_ROW_SELECTED,(()=>this.onRowSelected())),this.addManagedListener(this.rowNode,lN.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,lN.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_CELL_CHANGED,this.postProcessCss.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_DRAGGING_CHANGED,this.postProcessRowDragging.bind(this)),this.addManagedListener(this.rowNode,lN.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));const e=this.beans.eventService;this.addManagedListener(e,OR.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(e,OR.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(e,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(e,OR.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(e,OR.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,OR.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,OR.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(e,OR.EVENT_MODEL_UPDATED,this.refreshFirstAndLastRowStyles.bind(this)),this.addManagedListener(e,OR.EVENT_COLUMN_MOVED,this.updateColumnLists.bind(this)),this.addDestroyFunc((()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))})),this.addManagedPropertyListeners(["rowDragEntireRow"],(()=>{this.gos.get("rowDragEntireRow")?this.allRowGuis.forEach((e=>{this.addRowDraggerToRow(e)})):(this.destroyBeans(this.rowDragComps,this.beans.context),this.rowDragComps=[])})),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListener(this.rowNode,lN.EVENT_ROW_INDEX_CHANGED,(()=>{this.getAllCellCtrls().forEach((e=>e.onRowIndexChanged()))})),this.addManagedListener(this.rowNode,lN.EVENT_CELL_CHANGED,(e=>{this.getAllCellCtrls().forEach((t=>t.onCellChanged(e)))}))}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell())this.beans.rowRenderer.redrawRow(this.rowNode);else if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode)}else this.getAllCellCtrls().forEach((t=>t.refreshCell({suppressFlash:!e.update,newData:!e.update}))),this.allRowGuis.forEach((e=>{this.setRowCompRowId(e.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(e.rowComp)})),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach((t=>{const n=0===e,i=1===e;t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",n),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",i)}))}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-dragging",e)))}updateExpandedCss(){const e=this.rowNode.isExpandable(),t=1==this.rowNode.expanded;this.allRowGuis.forEach((n=>{n.rowComp.addOrRemoveCssClass("ag-row-group",e),n.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&t),n.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!t),RD(n.element,e&&t)}))}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:zT(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.allRowGuis.find((t=>t.element.contains(e.target)));if(!((t?t.element:null)===e.target))return;const n=this.rowNode,i=this.beans.focusService.getFocusedCell(),r={rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:i&&i.column};this.beans.navigationService.navigateToNextCell(e,e.key,r,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||SR(e))return;const t=this.allRowGuis.find((t=>t.element.contains(e.target))),n=t?t.element:null,i=n===e.target;let r=null;i||(r=this.beans.focusService.findNextFocusableElement(n,!1,e.shiftKey)),(this.isFullWidth()&&i||!r)&&this.beans.navigationService.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var e;const t=null==(e=this.allRowGuis.find((e=>KM(e.element))))?void 0:e.element;return t?t.getBoundingClientRect().top:0}onFullWidthRowFocused(e){var t;const n=this.rowNode,i=!!e&&(this.isFullWidth()&&e.rowIndex===n.rowIndex&&e.rowPinned==n.rowPinned),r=this.fullWidthGui?this.fullWidthGui.element:null==(t=this.centerGui)?void 0:t.element;r&&(r.classList.toggle("ag-full-width-focus",i),i&&r.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const n={list:[],map:{}};return e.list.forEach((e=>{e!==t&&(n.list.push(e),n.map[e.getColumn().getInstanceId()]=e)})),n}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t)}}createRowEvent(e,t){return this.gos.addGridCommonParams({type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:t})}createRowEventWithSource(e,t){const n=this.createRowEvent(e,t);return n.source=this,n}onRowDblClick(e){if(SR(e))return;const t=this.createRowEventWithSource(OR.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(t)}onRowMouseDown(e){if(this.lastMouseDownOnDragger=OM(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode,n=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:t.rowIndex,column:n.getAllDisplayedColumns()[0],rowPinned:t.rowPinned,forceBrowserFocus:!0})}onRowClick(e){if(SR(e)||this.lastMouseDownOnDragger)return;const t=this.createRowEventWithSource(OR.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(t);const n=e.ctrlKey||e.metaKey,i=e.shiftKey;if(this.gos.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gos.get("suppressRowClickSelection"))return;const r=this.gos.get("rowMultiSelectWithClick"),s=!this.gos.get("suppressRowDeselection"),o="rowClicked";if(this.rowNode.isSelected())r?this.rowNode.setSelectedParams({newValue:!1,event:e,source:o}):n?s&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:o}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!i,rangeSelect:i,event:e,source:o});else{const t=!r&&!n;this.rowNode.setSelectedParams({newValue:!0,clearSelection:t,rangeSelect:i,event:e,source:o})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gos.isRowSelection()}setupDetailRowAutoHeight(e){if("FullWidthDetail"!==this.rowType)return;if(!this.gos.get("detailRowAutoHeight"))return;const t=()=>{const t=e.clientHeight;if(null!=t&&t>0){const e=()=>{this.rowNode.setRowHeight(t),this.beans.clientSideRowModel?this.beans.clientSideRowModel.onRowHeightChanged():this.beans.serverSideRowModel&&this.beans.serverSideRowModel.onRowHeightChanged()};window.setTimeout(e,0)}},n=this.beans.resizeObserverService.observeResize(e,t);this.addDestroyFunc(n),t()}createFullWidthCompDetails(e,t){const n=this.gos.addGridCommonParams({fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(e,t,n,i)=>this.addFullWidthRowDragging(e,t,n,i),setTooltip:(e,t)=>this.refreshRowTooltip(e,t)});switch(this.rowType){case"FullWidthDetail":return this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(n);case"FullWidthGroup":return this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(n);case"FullWidthLoading":return this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(n);default:return this.beans.userComponentFactory.getFullWidthCellRendererDetails(n)}}refreshRowTooltip(e,t){if(!this.fullWidthGui)return;const n={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>e,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:t};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new YP(n,this.beans))}addFullWidthRowDragging(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3?arguments[3]:void 0;if(!this.isFullWidth())return;const r=new hN((()=>n),this.rowNode,void 0,e,t,i);this.createBean(r,this.beans.context),this.addDestroyFunc((()=>{this.destroyBean(r,this.beans.context)}))}onUiLevelChanged(){const e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,n="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach((e=>{e.rowComp.addOrRemoveCssClass(t,!0),e.rowComp.addOrRemoveCssClass(n,!1)}))}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-first",e)))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach((e=>e.rowComp.addOrRemoveCssClass("ag-row-last",t))))}stopEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.stoppingRowEdit)return;const t=this.getAllCellCtrls(),n=this.editingRow;this.stoppingRowEdit=!0;let i=!1;for(const r of t){const t=r.stopEditing(e);n&&!e&&!i&&t&&(i=!0)}if(i){const e=this.createRowEvent(OR.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(e)}n&&this.setEditingRow(!1),this.stoppingRowEdit=!1}setInlineEditingCss(e){this.allRowGuis.forEach((t=>{t.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),t.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)}))}setEditingRow(e){this.editingRow=e,this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-editing",e)));const t=e?this.createRowEvent(OR.EVENT_ROW_EDITING_STARTED):this.createRowEvent(OR.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(t)}startRowEditing(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.editingRow)return;const i=this.getAllCellCtrls().reduce(((i,r)=>{const s=r===t;return s?r.startEditing(e,s,n):r.startEditing(null,s,n),!!i||r.isEditing()}),!1);i&&this.setEditingRow(!0)}getAllCellCtrls(){if(0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length)return this.centerCellCtrls.list;return[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);e&&e.length&&e.forEach((e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!0)))}))}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,(e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!0)))}),(e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!1)))}))}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,(e=>e.rowComp.setUserStyles(this.rowStyles)))}getPinnedForContainer(e){return"left"===e?"left":"right"===e?"right":null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),n={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:t};return this.beans.rowCssClassCalculator.getInitialRowClasses(n)}processStylesFromGridOptions(){const e=this.gos.get("rowStyle");if(e&&"function"===typeof e)return void console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");const t=this.gos.getCallback("getRowStyle");let n;if(t){n=t({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex})}return n||e?Object.assign({},e,n):this.emptyStyle}onRowSelected(e){const t=!!this.rowNode.isSelected();this.forEachGui(e,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-selected",t),GD(e.element,t);!e.element.contains(this.beans.gos.getActiveDomElement())||e!==this.centerGui&&e!==this.fullWidthGui||this.announceDescription()}))}announceDescription(){if(this.isRowSelectionBlocked())return;const e=this.rowNode.isSelected();if(e&&this.beans.gos.get("suppressRowDeselection"))return;const t=this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect","Press SPACE to ".concat(e?"deselect":"select"," this row."));this.beans.ariaAnnouncementService.announceValue(t)}addHoverFunctionality(e){this.active&&(this.addManagedListener(e,"mouseenter",(()=>this.rowNode.onMouseEnter())),this.addManagedListener(e,"mouseleave",(()=>this.rowNode.onMouseLeave())),this.addManagedListener(this.rowNode,lN.EVENT_MOUSE_ENTER,(()=>{this.beans.dragService.isDragging()||this.gos.get("suppressRowHoverHighlight")||(e.classList.add("ag-row-hover"),this.rowNode.setHovered(!0))})),this.addManagedListener(this.rowNode,lN.EVENT_MOUSE_LEAVE,(()=>{e.classList.remove("ag-row-hover"),this.rowNode.setHovered(!1)})))}roundRowTopToBounds(e){const t=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(t.top,!0)-100,i=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(n,e),i)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}onRowHeightChanged(e){if(null==this.rowNode.rowHeight)return;const t=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),i=this.gos.isGetRowHeightFunction()?this.gos.getRowHeightForNode(this.rowNode).height:void 0,r=i?"".concat(Math.min(n,i)-2,"px"):void 0;this.forEachGui(e,(e=>{e.element.style.height="".concat(t,"px"),r&&e.element.style.setProperty("--ag-line-height",r)}))}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}destroyFirstPass(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.active=!1,!e&&this.gos.isAnimateRows()&&!this.isSticky()){if(null!=this.rowNode.rowTop){const e=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(e)}else this.allRowGuis.forEach((e=>e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)))}this.rowNode.setHovered(!1);const t=this.createRowEvent(OR.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(t),this.beans.eventService.dispatchEvent(t),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const e=e=>(e.list.forEach((e=>e.destroy())),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),e.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)}))}onCellFocusChanged(){const e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;return e+this.beans.paginationProxy.getPixelOffset()*(t?1:-1)}setRowTop(e){if(!this.printLayout&&YT(e)){const t=this.applyPaginationOffset(e),n=this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeightService.getRealPixelPosition(t),i="".concat(n,"px");this.setRowTopStyle(i)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:"translateY(".concat(this.getInitialRowTopShared(e),")")}getInitialRowTopShared(e){if(this.printLayout)return"";let t;if(this.isSticky())t=this.rowNode.stickyRowTop;else{const n=this.slideInAnimation[e]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,i=this.applyPaginationOffset(n);t=this.rowNode.isRowPinned()?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}return t+"px"}setRowTopStyle(e){this.allRowGuis.forEach((t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform("translateY(".concat(e,")"))))}getRowNode(){return this.rowNode}getCellCtrl(e){let t=null;return this.getAllCellCtrls().forEach((n=>{n.getColumn()==e&&(t=n)})),null!=t||this.getAllCellCtrls().forEach((n=>{n.getColSpanningList().indexOf(e)>=0&&(t=n)})),t}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(e){const t=this.rowNode.getRowIndexString(),n=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),i=this.rowNode.rowIndex%2===0,r=n+this.rowNode.rowIndex+1;this.forEachGui(e,(e=>{e.rowComp.setRowIndex(t),e.rowComp.addOrRemoveCssClass("ag-row-even",i),e.rowComp.addOrRemoveCssClass("ag-row-odd",!i),kD(e.element,r)}))}};Lk.DOM_DATA_KEY_ROW_CTRL="renderedRow";var Fk=Lk,Bk=class extends MR{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedListener(this.element,e,t)}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",ER("touchstart")?"touchstart":"mousedown"].forEach((e=>{const t=this.processMouseEvent.bind(this,e);this.addManagedListener(this.element,e,t)}))}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||SR(t))return;const n=this.getRowForEvent(t),i=this.mouseEventService.getRenderedCellForEvent(t);"contextmenu"===e?this.handleContextMenuMouseEvent(t,void 0,n,i):(i&&i.onMouseEvent(e,t),n&&n.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!rM())return;const e=new zI(this.element);this.addManagedListener(e,zI.EVENT_LONG_TAP,(e=>{const t=this.getRowForEvent(e.touchEvent),n=this.mouseEventService.getRenderedCellForEvent(e.touchEvent);this.handleContextMenuMouseEvent(void 0,e.touchEvent,t,n)})),this.addDestroyFunc((()=>e.destroy()))}getRowForEvent(e){let t=e.target;for(;t;){const e=this.gos.getDomData(t,Fk.DOM_DATA_KEY_ROW_CTRL);if(e)return e;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,n,i){const r=n?n.getRowNode():null,s=i?i.getColumn():null;let o=null;if(s){const n=e||t;i.dispatchCellContextMenuEvent(null!=n?n:null),o=this.valueService.getValue(s,r)}const a=this.ctrlsService.getGridBodyCtrl(),l=i?i.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:r,column:s,value:o,anchorToElement:l})}getControlsForEventTarget(e){return{cellCtrl:xR(this.gos,e,kk.DOM_DATA_KEY_CELL_CTRL),rowCtrl:xR(this.gos,e,Fk.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):i&&i.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,n){const i=e.getRowNode(),r=e.getColumn(),s=e.isEditing();if(!MP(this.gos,n,i,r,s)&&"keydown"===t){!s&&this.navigationService.handlePageScrollingKey(n)||e.onKeyDown(n),this.doGridOperations(n,e.isEditing()),DP(n)&&e.processCharacter(n)}if("keydown"===t){const t=e.createEvent(n,OR.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(t)}}processFullWidthRowKeyboardEvent(e,t,n){const i=e.getRowNode(),r=this.focusService.getFocusedCell(),s=r&&r.column;if(!MP(this.gos,n,i,s,!1)){const i=n.key;if("keydown"===t)switch(i){case SP.PAGE_HOME:case SP.PAGE_END:case SP.PAGE_UP:case SP.PAGE_DOWN:this.navigationService.handlePageScrollingKey(n,!0);break;case SP.UP:case SP.DOWN:e.onKeyboardNavigate(n);break;case SP.TAB:e.onTabKeyDown(n)}}if("keydown"===t){const t=e.createRowEvent(OR.EVENT_CELL_KEY_DOWN,n);this.eventService.dispatchEvent(t)}}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey)return;if(t)return;if(!this.mouseEventService.isEventFromThisGrid(e))return;const n=IP(e);return n===SP.A?this.onCtrlAndA(e):n===SP.C?this.onCtrlAndC(e):n===SP.D?this.onCtrlAndD(e):n===SP.V?this.onCtrlAndV(e):n===SP.X?this.onCtrlAndX(e):n===SP.Y?this.onCtrlAndY():n===SP.Z?this.onCtrlAndZ(e):void 0}onCtrlAndA(e){const{pinnedRowModel:t,paginationProxy:n,rangeService:i}=this;if(i&&n.isRowsToRender()){const[e,n]=[t.isEmpty("top"),t.isEmpty("bottom")],r=e?null:"top";let s,o;n?(s=null,o=this.paginationProxy.getRowCount()-1):(s="bottom",o=t.getPinnedBottomRowData().length-1);const a=this.columnModel.getAllDisplayedColumns();if(KT(a))return;i.setCellRange({rowStartIndex:0,rowStartPinned:r,rowEndIndex:o,rowEndPinned:s,columnStart:a[0],columnEnd:tR(a)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);(null==t?void 0:t.isEditing())||(null==n?void 0:n.isEditing())||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);(null==t?void 0:t.isEditing())||(null==n?void 0:n.isEditing())||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);(null==t?void 0:t.isEditing())||(null==n?void 0:n.isEditing())||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){this.gos.get("undoRedoCellEditing")&&(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService.redo("ui")}};WT([F_("mouseEventService")],Bk.prototype,"mouseEventService",2),WT([F_("valueService")],Bk.prototype,"valueService",2),WT([F_("menuService")],Bk.prototype,"menuService",2),WT([F_("ctrlsService")],Bk.prototype,"ctrlsService",2),WT([F_("navigationService")],Bk.prototype,"navigationService",2),WT([F_("focusService")],Bk.prototype,"focusService",2),WT([F_("undoRedoService")],Bk.prototype,"undoRedoService",2),WT([F_("columnModel")],Bk.prototype,"columnModel",2),WT([F_("paginationProxy")],Bk.prototype,"paginationProxy",2),WT([F_("pinnedRowModel")],Bk.prototype,"pinnedRowModel",2),WT([B_("rangeService")],Bk.prototype,"rangeService",2),WT([B_("clipboardService")],Bk.prototype,"clipboardService",2),WT([k_],Bk.prototype,"postConstruct",1);var Vk=class extends MR{constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady((e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()})),this.addManagedListener(this.eventService,OR.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this)),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],(()=>{this.checkViewportAndScrolls()}))}listenForResize(){const e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=BM(this.gridBodyCtrl.getBodyViewportElement());if(e<=50)return;let t=this.getPinnedColumnsOverflowingViewport(e-50);const n=this.gos.getCallback("processUnpinnedColumns");if(t.length){if(n){t=n({columns:t,viewportWidth:e})}this.columnModel.setColumnsPinned(t,null,"viewportSizeFeature")}}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth()+this.pinnedWidthService.getPinnedLeftWidth();if(t<e)return[];const n=[...this.columnModel.getDisplayedLeftColumns()],i=[...this.columnModel.getDisplayedRightColumns()];let r=0,s=0;const o=[];let a=t-0-e;for(;(s<n.length||r<i.length)&&a>0;){if(r<i.length){const e=i[r++];a-=e.getActualWidth(),o.push(e)}if(s<n.length&&a>0){const e=n[s++];a-=e.getActualWidth(),o.push(e)}}return o}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=FM(this.gridBodyCtrl.getBodyViewportElement());if(this.bodyHeight!==e){this.bodyHeight=e;const t={type:OR.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(t)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(e,t)}};WT([F_("ctrlsService")],Vk.prototype,"ctrlsService",2),WT([F_("pinnedWidthService")],Vk.prototype,"pinnedWidthService",2),WT([F_("columnModel")],Vk.prototype,"columnModel",2),WT([F_("scrollVisibleService")],Vk.prototype,"scrollVisibleService",2),WT([k_],Vk.prototype,"postConstruct",1);var Gk=class extends MR{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,OR.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;IM(this.element,t),iP(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}};WT([F_("pinnedWidthService")],Gk.prototype,"pinnedWidthService",2),WT([k_],Gk.prototype,"postConstruct",1);var Hk=class extends MR{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,OR.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;IM(this.element,t),iP(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}};WT([F_("pinnedWidthService")],Hk.prototype,"pinnedWidthService",2),WT([k_],Hk.prototype,"postConstruct",1);var Wk=class extends MR{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedListener(this.eventService,OR.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=null!=e?"".concat(e,"px"):"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}};WT([F_("rowContainerHeightService")],Wk.prototype,"maxDivHeightScaler",2),WT([k_],Wk.prototype,"postConstruct",1);var jk=class extends MR{constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",(e=>{e.currentValue?this.enableFeature():this.disableFeature()})),this.addDestroyFunc((()=>this.disableFeature()));this.gos.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}};WT([F_("dragService")],jk.prototype,"dragService",2),WT([B_("rangeService")],jk.prototype,"rangeService",2),WT([k_],jk.prototype,"postConstruct",1);var Uk=class extends MR{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,OR.EVENT_LEFT_PINNED_WIDTH_CHANGED,e),this.addSpacer&&(this.addManagedListener(this.eventService,OR.EVENT_RIGHT_PINNED_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,OR.EVENT_SCROLL_VISIBILITY_CHANGED,e),this.addManagedListener(this.eventService,OR.EVENT_SCROLLBAR_WIDTH_CHANGED,e)),this.setWidth()}setWidth(){const{columnModel:e}=this,t=this.gos.isDomLayout("print"),n=e.getBodyContainerWidth(),i=e.getDisplayedColumnsLeftWidth(),r=e.getDisplayedColumnsRightWidth();let s;if(t)s=n+i+r;else if(s=n,this.addSpacer){0===(this.gos.get("enableRtl")?i:r)&&this.scrollVisibleService.isVerticalScrollShowing()&&(s+=this.gos.getScrollbarWidth())}this.callback(s)}};WT([F_("columnModel")],Uk.prototype,"columnModel",2),WT([F_("scrollVisibleService")],Uk.prototype,"scrollVisibleService",2),WT([k_],Uk.prototype,"postConstruct",1);var zk=(e=>(e.LEFT="left",e.RIGHT="right",e.CENTER="center",e.FULL_WIDTH="fullWidth",e.TOP_LEFT="topLeft",e.TOP_RIGHT="topRight",e.TOP_CENTER="topCenter",e.TOP_FULL_WIDTH="topFullWidth",e.STICKY_TOP_LEFT="stickyTopLeft",e.STICKY_TOP_RIGHT="stickyTopRight",e.STICKY_TOP_CENTER="stickyTopCenter",e.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",e.STICKY_BOTTOM_LEFT="stickyBottomLeft",e.STICKY_BOTTOM_RIGHT="stickyBottomRight",e.STICKY_BOTTOM_CENTER="stickyBottomCenter",e.STICKY_BOTTOM_FULL_WIDTH="stickyBottomFullWidth",e.BOTTOM_LEFT="bottomLeft",e.BOTTOM_RIGHT="bottomRight",e.BOTTOM_CENTER="bottomCenter",e.BOTTOM_FULL_WIDTH="bottomFullWidth",e))(zk||{});function Yk(e){switch(e){case"center":case"topCenter":case"stickyTopCenter":case"bottomCenter":case"stickyBottomCenter":return"center";case"left":case"topLeft":case"stickyTopLeft":case"bottomLeft":case"stickyBottomLeft":return"left";case"right":case"topRight":case"stickyTopRight":case"bottomRight":case"stickyBottomRight":return"right";case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":case"stickyBottomFullWidth":return"fullWidth";default:throw Error("Invalid Row Container Type")}}var qk=XR([["center","ag-center-cols-container"],["left","ag-pinned-left-cols-container"],["right","ag-pinned-right-cols-container"],["fullWidth","ag-full-width-container"],["topCenter","ag-floating-top-container"],["topLeft","ag-pinned-left-floating-top"],["topRight","ag-pinned-right-floating-top"],["topFullWidth","ag-floating-top-full-width-container"],["stickyTopCenter","ag-sticky-top-container"],["stickyTopLeft","ag-pinned-left-sticky-top"],["stickyTopRight","ag-pinned-right-sticky-top"],["stickyTopFullWidth","ag-sticky-top-full-width-container"],["stickyBottomCenter","ag-sticky-bottom-container"],["stickyBottomLeft","ag-pinned-left-sticky-bottom"],["stickyBottomRight","ag-pinned-right-sticky-bottom"],["stickyBottomFullWidth","ag-sticky-bottom-full-width-container"],["bottomCenter","ag-floating-bottom-container"],["bottomLeft","ag-pinned-left-floating-bottom"],["bottomRight","ag-pinned-right-floating-bottom"],["bottomFullWidth","ag-floating-bottom-full-width-container"]]),Kk=XR([["center","ag-center-cols-viewport"],["topCenter","ag-floating-top-viewport"],["stickyTopCenter","ag-sticky-top-viewport"],["bottomCenter","ag-floating-bottom-viewport"],["stickyBottomCenter","ag-sticky-bottom-viewport"]]),Xk=class e extends MR{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.isFullWithContainer="topFullWidth"===this.name||"stickyTopFullWidth"===this.name||"stickyBottomFullWidth"===this.name||"bottomFullWidth"===this.name||"fullWidth"===this.name}static getRowContainerCssClasses(e){return{container:qk.get(e),viewport:Kk.get(e)}}static getPinned(e){switch(e){case"bottomLeft":case"topLeft":case"stickyTopLeft":case"stickyBottomLeft":case"left":return"left";case"bottomRight":case"topRight":case"stickyTopRight":case"stickyBottomRight":case"right":return"right";default:return null}}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],(()=>this.viewportSizeFeature=this.createManagedBean(new Vk(this))))}registerWithCtrlsService(){switch(this.name){case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":case"stickyBottomFullWidth":return;default:this.ctrlsService.register(this.name,this)}}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,n){this.comp=e,this.eContainer=t,this.eViewport=n,this.createManagedBean(new Bk(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();const i=["topCenter","topLeft","topRight","bottomCenter","bottomLeft","bottomRight","center","left","right","stickyTopCenter","stickyTopLeft","stickyTopRight","stickyBottomCenter","stickyBottomLeft","stickyBottomRight"];this.forContainers(["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],(()=>{this.pinnedWidthFeature=this.createManagedBean(new Gk(this.eContainer)),this.addManagedListener(this.eventService,OR.EVENT_LEFT_PINNED_WIDTH_CHANGED,(()=>this.onPinnedWidthChanged()))})),this.forContainers(["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],(()=>{this.pinnedWidthFeature=this.createManagedBean(new Hk(this.eContainer)),this.addManagedListener(this.eventService,OR.EVENT_RIGHT_PINNED_WIDTH_CHANGED,(()=>this.onPinnedWidthChanged()))})),this.forContainers(["center","left","right","fullWidth"],(()=>this.createManagedBean(new Wk(this.eContainer,"center"===this.name?n:void 0)))),this.forContainers(i,(()=>this.createManagedBean(new jk(this.eContainer)))),this.forContainers(["center","topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],(()=>this.createManagedBean(new Uk((e=>this.comp.setContainerWidth("".concat(e,"px"))))))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,(()=>this.onDisplayedColumnsChanged())),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,(()=>this.onDisplayedColumnsWidthChanged())),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_ROWS_CHANGED,(e=>this.onDisplayedRowsChanged(e.afterScroll))),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(["stickyTopCenter","stickyTopLeft","stickyTopRight","stickyTopFullWidth","stickyBottomCenter","stickyBottomLeft","stickyBottomRight","stickyBottomFullWidth"].indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);const e=()=>{const e=this.gos.get("ensureDomOrder"),t=this.gos.isDomLayout("print");this.comp.setDomOrder(e||t)};this.addManagedPropertyListener("domLayout",e),e()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],(()=>{this.addManagedListener(this.eViewport,"scroll",(()=>this.eViewport.scrollLeft=0))}))}onDisplayedColumnsChanged(){this.forContainers(["center"],(()=>this.onHorizontalViewportChanged()))}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],(()=>this.onHorizontalViewportChanged()))}addPreventScrollWhileDragging(){const e=e=>{this.dragService.isDragging()&&e.cancelable&&e.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc((()=>this.eContainer.removeEventListener("touchmove",e)))}onHorizontalViewportChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(t,n,e)}getCenterWidth(){return BM(this.eViewport)}getCenterViewportScrollLeft(){return jM(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc((()=>t()))}isViewportInTheDOMTree(){return qM(this.eViewport)}getViewportScrollLeft(){return jM(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||eP(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform="translateX(".concat(e,"px)")}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){UM(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!e.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getRowCtrls();if(!this.visible||0===t.length)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});const n=this.gos.isDomLayout("print"),i=this.gos.get("embedFullWidthRows")||n,r=t.filter((e=>{const t=e.isFullWidth();return this.isFullWithContainer?!i&&t:i||!t}));this.comp.setRowCtrls({rowCtrls:r,useFlushSync:e})}getRowCtrls(){switch(this.name){case"topCenter":case"topLeft":case"topRight":case"topFullWidth":return this.rowRenderer.getTopRowCtrls();case"stickyTopCenter":case"stickyTopLeft":case"stickyTopRight":case"stickyTopFullWidth":return this.rowRenderer.getStickyTopRowCtrls();case"stickyBottomCenter":case"stickyBottomLeft":case"stickyBottomRight":case"stickyBottomFullWidth":return this.rowRenderer.getStickyBottomRowCtrls();case"bottomCenter":case"bottomLeft":case"bottomRight":case"bottomFullWidth":return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}}};WT([F_("dragService")],Xk.prototype,"dragService",2),WT([F_("ctrlsService")],Xk.prototype,"ctrlsService",2),WT([F_("columnModel")],Xk.prototype,"columnModel",2),WT([F_("resizeObserverService")],Xk.prototype,"resizeObserverService",2),WT([F_("rowRenderer")],Xk.prototype,"rowRenderer",2),WT([k_],Xk.prototype,"postConstruct",1);var Qk=Xk,Zk='<div class="ag-root ag-unselectable" role="treegrid">\n        <ag-header-root ref="gridHeader"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation">\n            <ag-row-container ref="topLeftContainer" name="'.concat("topLeft",'"></ag-row-container>\n            <ag-row-container ref="topCenterContainer" name="',"topCenter",'"></ag-row-container>\n            <ag-row-container ref="topRightContainer" name="',"topRight",'"></ag-row-container>\n            <ag-row-container ref="topFullWidthContainer" name="',"topFullWidth",'"></ag-row-container>\n        </div>\n        <div class="ag-body" ref="eBody" role="presentation">\n            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n                <ag-row-container ref="leftContainer" name="',"left",'"></ag-row-container>\n                <ag-row-container ref="centerContainer" name="',"center",'"></ag-row-container>\n                <ag-row-container ref="rightContainer" name="',"right",'"></ag-row-container>\n                <ag-row-container ref="fullWidthContainer" name="',"fullWidth",'"></ag-row-container>\n            </div>\n            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>\n        </div>\n        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">\n            <ag-row-container ref="stickyTopLeftContainer" name="',"stickyTopLeft",'"></ag-row-container>\n            <ag-row-container ref="stickyTopCenterContainer" name="',"stickyTopCenter",'"></ag-row-container>\n            <ag-row-container ref="stickyTopRightContainer" name="',"stickyTopRight",'"></ag-row-container>\n            <ag-row-container ref="stickyTopFullWidthContainer" name="',"stickyTopFullWidth",'"></ag-row-container>\n        </div>\n        <div class="ag-sticky-bottom" ref="eStickyBottom" role="presentation">\n            <ag-row-container ref="stickyBottomLeftContainer" name="',"stickyBottomLeft",'"></ag-row-container>\n            <ag-row-container ref="stickyBottomCenterContainer" name="',"stickyBottomCenter",'"></ag-row-container>\n            <ag-row-container ref="stickyBottomRightContainer" name="',"stickyBottomRight",'"></ag-row-container>\n            <ag-row-container ref="stickyBottomFullWidthContainer" name="',"stickyBottomFullWidth",'"></ag-row-container>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation">\n            <ag-row-container ref="bottomLeftContainer" name="',"bottomLeft",'"></ag-row-container>\n            <ag-row-container ref="bottomCenterContainer" name="',"bottomCenter",'"></ag-row-container>\n            <ag-row-container ref="bottomRightContainer" name="',"bottomRight",'"></ag-row-container>\n            <ag-row-container ref="bottomFullWidthContainer" name="',"bottomFullWidth",'"></ag-row-container>\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>'),$k=class extends XP{constructor(){super(Zk)}init(){const e=(e,t)=>{const n="".concat(e,"px");t.style.minHeight=n,t.style.height=n},t={setRowAnimationCssOnBodyViewport:(e,t)=>this.setRowAnimationCssOnBodyViewport(e,t),setColumnCount:e=>OD(this.getGui(),e),setRowCount:e=>ND(this.getGui(),e),setTopHeight:t=>e(t,this.eTop),setBottomHeight:t=>e(t,this.eBottom),setTopDisplay:e=>this.eTop.style.display=e,setBottomDisplay:e=>this.eBottom.style.display=e,setStickyTopHeight:e=>this.eStickyTop.style.height=e,setStickyTopTop:e=>this.eStickyTop.style.top=e,setStickyTopWidth:e=>this.eStickyTop.style.width=e,setStickyBottomHeight:e=>this.eStickyBottom.style.height=e,setStickyBottomBottom:e=>this.eStickyBottom.style.bottom=e,setStickyBottomWidth:e=>this.eStickyBottom.style.width=e,setColumnMovingCss:(e,t)=>this.addOrRemoveCssClass(e,t),updateLayoutClasses:(e,t)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach((e=>{e.toggle("ag-layout-auto-height",t.autoHeight),e.toggle("ag-layout-normal",t.normal),e.toggle("ag-layout-print",t.print)})),this.addOrRemoveCssClass("ag-layout-auto-height",t.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",t.normal),this.addOrRemoveCssClass("ag-layout-print",t.print)},setAlwaysVerticalScrollClass:(e,t)=>this.eBodyViewport.classList.toggle(bk,t),registerBodyViewportResizeListener:e=>{const t=this.resizeObserverService.observeResize(this.eBodyViewport,e);this.addDestroyFunc((()=>t()))},setPinnedTopBottomOverflowY:e=>this.eTop.style.overflowY=this.eBottom.style.overflowY=e,setCellSelectableCss:(e,t)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach((n=>n.classList.toggle(e,t)))},setBodyViewportWidth:e=>this.eBodyViewport.style.width=e};this.ctrl=this.createManagedBean(new Sk),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&this.gos.get("enableRangeSelection")||"multiple"===this.gos.get("rowSelection"))&&ID(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){const n=this.eBodyViewport.classList;n.toggle("ag-row-animation",t),n.toggle("ag-row-no-animation",!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}};WT([F_("resizeObserverService")],$k.prototype,"resizeObserverService",2),WT([B_("rangeService")],$k.prototype,"rangeService",2),WT([QP("eBodyViewport")],$k.prototype,"eBodyViewport",2),WT([QP("eStickyTop")],$k.prototype,"eStickyTop",2),WT([QP("eStickyBottom")],$k.prototype,"eStickyBottom",2),WT([QP("eTop")],$k.prototype,"eTop",2),WT([QP("eBottom")],$k.prototype,"eBottom",2),WT([QP("gridHeader")],$k.prototype,"headerRootComp",2),WT([QP("eBody")],$k.prototype,"eBody",2),WT([k_],$k.prototype,"init",1);var Jk=class extends MR{postConstruct(){this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn((()=>{this.columnAnimationService.executeLaterVMTurn((()=>this.updateImpl()))})):this.updateImpl()}updateImpl(){const e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t)}setScrollsVisible(e){if(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;const t={type:OR.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(t)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}};WT([F_("ctrlsService")],Jk.prototype,"ctrlsService",2),WT([F_("columnAnimationService")],Jk.prototype,"columnAnimationService",2),WT([k_],Jk.prototype,"postConstruct",1),Jk=WT([L_("scrollVisibleService")],Jk);var eO=class extends MR{constructor(){super(...arguments),this.gridInstanceId=eO.gridInstanceSequence.next()}stampTopLevelGridCompWithGridInstance(e){e[eO.GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(e){return xR(this.gos,e.target,kk.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(e){return this.isElementInThisGrid(e.target)}isElementInThisGrid(e){let t=e;for(;t;){const e=t[eO.GRID_DOM_KEY];if(YT(e)){return e===this.gridInstanceId}t=t.parentElement}return!1}getCellPositionForEvent(e){const t=this.getRenderedCellForEvent(e);return t?t.getCellPosition():null}getNormalisedPosition(e){const t=this.gos.isDomLayout("normal"),n=e;let i,r;if(null!=n.clientX||null!=n.clientY?(i=n.clientX,r=n.clientY):(i=n.x,r=n.y),t){const e=this.ctrlsService.getGridBodyCtrl(),t=e.getScrollFeature().getVScrollPosition();i+=e.getScrollFeature().getHScrollPosition().left,r+=t.top}return{x:i,y:r}}};eO.gridInstanceSequence=new HP,eO.GRID_DOM_KEY="__ag_grid_instance",WT([F_("ctrlsService")],eO.prototype,"ctrlsService",2),eO=WT([L_("mouseEventService")],eO);var tO=class extends MR{constructor(){super(),this.onPageDown=A_(this.onPageDown,100),this.onPageUp=A_(this.onPageUp,100)}postConstruct(){this.ctrlsService.whenReady((e=>{this.gridBodyCon=e.gridBodyCtrl}))}handlePageScrollingKey(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.key,i=e.altKey,r=e.ctrlKey||e.metaKey,s=!!this.rangeService&&e.shiftKey,o=this.mouseEventService.getCellPositionForEvent(e);let a=!1;switch(n){case SP.PAGE_HOME:case SP.PAGE_END:r||i||(this.onHomeOrEndKey(n),a=!0);break;case SP.LEFT:case SP.RIGHT:case SP.UP:case SP.DOWN:if(!o)return!1;!r||i||s||(this.onCtrlUpDownLeftRight(n,o),a=!0);break;case SP.PAGE_DOWN:case SP.PAGE_UP:r||i||(a=this.handlePageUpDown(n,o,t))}return a&&e.preventDefault(),a}handlePageUpDown(e,t,n){return n&&(t=this.focusService.getFocusedCell()),!!t&&(e===SP.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0)}navigateTo(e){var t;const{scrollIndex:n,scrollType:i,scrollColumn:r,focusIndex:s,focusColumn:o}=e;YT(r)&&!r.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(r),YT(n)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(n,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:o,rowPinned:null,forceBrowserFocus:!0}),null==(t=this.rangeService)||t.setRangeToCell({rowIndex:s,rowPinned:null,column:o})}onPageDown(e){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.getViewportHeight(),i=this.paginationProxy.getPixelOffset(),r=t.top+n,s=this.paginationProxy.getRowIndexAtPixel(r+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,s):this.navigateToNextPage(e,s)}onPageUp(e){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.paginationProxy.getPixelOffset(),i=t.top,r=this.paginationProxy.getRowIndexAtPixel(i+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,r,!0):this.navigateToNextPage(e,r,!0)}navigateToNextPage(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.getViewportHeight(),r=this.paginationProxy.getPageFirstRow(),s=this.paginationProxy.getPageLastRow(),o=this.paginationProxy.getPixelOffset(),a=this.paginationProxy.getRow(e.rowIndex),l=n?(null==a?void 0:a.rowHeight)-i-o:i-o,c=(null==a?void 0:a.rowTop)+l;let u,d=this.paginationProxy.getRowIndexAtPixel(c+o);if(d===e.rowIndex){const i=n?-1:1;t=d=e.rowIndex+i}n?(u="bottom",d<r&&(d=r),t<r&&(t=r)):(u="top",d>s&&(d=s),t>s&&(t=s)),this.isRowTallerThanView(d)&&(t=d,u="top"),this.navigateTo({scrollIndex:t,scrollType:u,scrollColumn:null,focusIndex:d,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout((()=>{const i=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})}),50)}getNextFocusIndexForAutoHeight(e){var t;const n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?-1:1,i=this.getViewportHeight(),r=this.paginationProxy.getPageLastRow();let s=0,o=e.rowIndex;for(;o>=0&&o<=r;){const e=this.paginationProxy.getRow(o);if(e){const n=null!=(t=e.rowHeight)?t:0;if(s+n>i)break;s+=n}o+=n}return Math.max(0,Math.min(o,r))}getViewportHeight(){const{gridBodyCtrl:e,center:t}=this.ctrlsService.getParams(),n=e.getScrollFeature().getVScrollPosition(),i=this.gos.getScrollbarWidth();let r=n.bottom-n.top;return t.isHorizontalScrollShowing()&&(r-=i),r}isRowTallerThanView(e){const t=this.paginationProxy.getRow(e);if(!t)return!1;const n=t.rowHeight;return"number"===typeof n&&n>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const n=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:i,column:r}=n;this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:r,focusIndex:i,focusColumn:r})}onHomeOrEndKey(e){const t=e===SP.PAGE_HOME,n=this.columnModel.getAllDisplayedColumns(),i=t?n[0]:tR(n),r=t?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:i,focusIndex:r,focusColumn:i})}onTabKeyDown(e,t){const n=t.shiftKey,i=this.tabToNextCellCommon(e,n,t);if(!1===i)if(n){const{rowIndex:n,rowPinned:i}=e.getRowPosition();(i?0===n:n===this.paginationProxy.getPageFirstRow())&&(0===this.gos.get("headerHeight")||this.gos.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof kk&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(n)&&t.preventDefault();else i&&t.preventDefault()}tabToNextCell(e,t){const n=this.focusService.getFocusedCell();if(!n)return!1;let i=this.getCellByPosition(n);return!!(i||(i=this.rowRenderer.getRowByPosition(n),i&&i.isFullWidth()))&&!!this.tabToNextCellCommon(i,e,t)}tabToNextCellCommon(e,t,n){let i,r=e.isEditing();if(!r&&e instanceof kk){const t=e.getRowCtrl();t&&(r=t.isEditing())}return i=r?"fullRow"===this.gos.get("editType")?this.moveToNextEditingRow(e,t,n):this.moveToNextEditingCell(e,t,n):this.moveToNextCellNotEditing(e,t),null===i?i:i||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=e.getCellPosition();e.getGui().focus(),e.stopEditing();const r=this.findNextCellToFocusOn(i,t,!0);return!1===r?null:null!=r&&(r.startEditing(null,!0,n),r.focusCell(!1),!0)}moveToNextEditingRow(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=e.getCellPosition(),r=this.findNextCellToFocusOn(i,t,!0);if(!1===r)return null;if(null==r)return!1;const s=r.getCellPosition(),o=this.isCellEditable(i),a=this.isCellEditable(s),l=s&&i.rowIndex===s.rowIndex&&i.rowPinned===s.rowPinned;if(o&&e.setFocusOutOnEditor(),!l){e.getRowCtrl().stopEditing();r.getRowCtrl().startRowEditing(void 0,void 0,n)}return a?(r.setFocusInOnEditor(),r.focusCell()):r.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const n=this.columnModel.getAllDisplayedColumns();let i;i=e instanceof Fk?GT(VT({},e.getRowPosition()),{column:t?n[0]:tR(n)}):e.getCellPosition();const r=this.findNextCellToFocusOn(i,t,!1);if(!1===r)return null;if(r instanceof kk)r.focusCell(!0);else if(r)return this.tryToFocusFullWidthRow(r.getRowPosition(),t);return YT(r)}findNextCellToFocusOn(e,t,n){var i;let r=e;for(;;){e!==r&&(e=r),t||(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextTabbedCell(r,t);const s=this.gos.getCallback("tabToNextCell");if(YT(s)){const i=s({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:r||null});if(!0===i||null===i)null===i&&f_("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),r=e;else{if(!1===i)return!1;i.floating&&(f_("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),i.rowPinned=i.floating),r={rowIndex:i.rowIndex,column:i.column,rowPinned:i.rowPinned}}}if(!r)return null;if(r.rowIndex<0){const e=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:e+r.rowIndex,column:r.column},fromCell:!0}),null}const o="fullRow"===this.gos.get("editType");if(n&&!o){if(!this.isCellEditable(r))continue}this.ensureCellVisible(r);const a=this.getCellByPosition(r);if(!a){const e=this.rowRenderer.getRowByPosition(r);if(!e||!e.isFullWidth()||n)continue;return e}if(!a.isSuppressNavigable())return null==(i=this.rangeService)||i.setRangeToCell(r),a}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return!!t&&e.column.isCellEditable(t)}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return"top"===e.rowPinned?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):"bottom"===e.rowPinned?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)}navigateToNextCell(e,t,n,i){let r=n,s=!1;for(;r&&(r===n||!this.isValidNavigateCell(r));)this.gos.get("enableRtl")?t===SP.LEFT&&(r=this.getLastCellOfColSpan(r)):t===SP.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextCellToFocus(t,r),s=qT(r);if(s&&e&&e.key===SP.UP&&(r={rowIndex:-1,rowPinned:null,column:n.column}),i){const i=this.gos.getCallback("navigateToNextCell");if(YT(i)){const s=i({key:t,previousCellPosition:n,nextCellPosition:r||null,event:e});YT(s)?(s.floating&&(f_("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),s.rowPinned=s.floating),r={rowPinned:s.rowPinned,rowIndex:s.rowIndex,column:s.column}):r=null}}if(!r)return;if(r.rowIndex<0){const t=this.headerNavigationService.getHeaderRowCount();return void this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:t+r.rowIndex,column:n.column},event:e||void 0,fromCell:!0})}const o=this.getNormalisedPosition(r);o?this.focusPosition(o):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.columnModel.getAllDisplayedColumns(),i=this.rowRenderer.getRowByPosition(e);if(!i||!i.isFullWidth())return!1;const r=this.focusService.getFocusedCell(),s={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?tR(n):n[0])};this.focusPosition(s);const o=null!=r&&this.rowPositionUtils.before(s,r),a={type:OR.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:s.column,isFullWidthCell:!0,floating:s.rowPinned,fromBelow:o};return this.eventService.dispatchEvent(a),!0}focusPosition(e){var t;this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),null==(t=this.rangeService)||t.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const n=t.getColSpanningList();return 1===n.length?e:{rowIndex:e.rowIndex,column:tR(n),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=this.gos.isGroupRowsSticky(),n=this.rowModel.getRow(e.rowIndex);!(t&&(null==n?void 0:n.sticky))&&qT(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}};WT([F_("mouseEventService")],tO.prototype,"mouseEventService",2),WT([F_("paginationProxy")],tO.prototype,"paginationProxy",2),WT([F_("focusService")],tO.prototype,"focusService",2),WT([F_("columnModel")],tO.prototype,"columnModel",2),WT([F_("rowModel")],tO.prototype,"rowModel",2),WT([F_("ctrlsService")],tO.prototype,"ctrlsService",2),WT([F_("rowRenderer")],tO.prototype,"rowRenderer",2),WT([F_("headerNavigationService")],tO.prototype,"headerNavigationService",2),WT([F_("rowPositionUtils")],tO.prototype,"rowPositionUtils",2),WT([F_("cellNavigationService")],tO.prototype,"cellNavigationService",2),WT([F_("pinnedRowModel")],tO.prototype,"pinnedRowModel",2),WT([B_("rangeService")],tO.prototype,"rangeService",2),WT([k_],tO.prototype,"postConstruct",1),tO=WT([L_("navigationService")],tO);var nO=class e extends $I{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gos.setDomData(this.getGui(),e.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params;this.addManagedListener(e,"keydown",(e=>{MP(this.gos,e,t.node,t.column,!0)||t.onKeyDown(e)}))}};nO.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",WT([k_],nO.prototype,"postConstruct",1);var iO=nO,rO=class extends XP{constructor(e,t,n,i,r){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=i,this.cellCtrl=t;const s=document.createElement("div");s.setAttribute("comp-id","".concat(this.getCompId())),this.setTemplateFromElement(s);const o=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);const a=(e,t)=>{null!=t&&""!=t?o.setAttribute(e,t):o.removeAttribute(e)};pD(o,t.getCellAriaRole()),a("col-id",t.getColumnIdSanitised());const l=t.getTabIndex();void 0!==l&&a("tabindex",l.toString());const c={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setUserStyles:e=>JM(o,e),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:e=>this.includeSelection=e,setIncludeRowDrag:e=>this.includeRowDrag=e,setIncludeDndSource:e=>this.includeDndSource=e,setRenderDetails:(e,t,n)=>this.setRenderDetails(e,t,n),setEditDetails:(e,t,n)=>this.setEditDetails(e,t,n),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(c,this.getGui(),this.eCellWrapper,n,r)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,n){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=null==this.firstRender;const i=this.refreshWrapper(!1);if(this.refreshEditStyles(!1),e){!(n||i)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e))}else this.destroyRenderer(),this.insertValueWithoutCellRenderer(t)}setEditDetails(e,t,n){e?this.createCellEditorInstance(e,t,n):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const t=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=t||this.forceWrapper,i=n&&null==this.eCellWrapper;if(i){const e=document.createElement("div");e.setAttribute("role","presentation"),e.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=e,this.getGui().appendChild(this.eCellWrapper)}const r=!n&&null!=this.eCellWrapper;r&&(YM(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!n);const s=!e&&n,o=s&&null==this.eCellValue;if(o){const e=document.createElement("span");e.setAttribute("role","presentation"),e.setAttribute("class","ag-cell-value"),this.eCellValue=e,this.eCellWrapper.appendChild(this.eCellValue)}const a=!s&&null!=this.eCellValue;a&&(YM(this.eCellValue),this.eCellValue=void 0);const l=i||r||o||a;return l&&this.removeControls(),e||t&&this.addControls(),l}addControls(){this.includeRowDrag&&null==this.rowDraggingComp&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&null==this.dndSourceComp&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&null==this.checkboxSelectionComp&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,n){const i=this.editorVersion,r=e.newAgStackInstance();if(!r)return;const{params:s}=e;r.then((e=>this.afterCellEditorCreated(i,e,s,t,n)));qT(this.cellEditor)&&s.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const t=this.getParentOfValue();zM(t);const n=null!=e?zR(e,!0):null;null!=n&&(t.textContent=n)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),YM(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),YM(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(null==this.cellRenderer||null==this.cellRenderer.refresh)return!1;if(this.cellRendererClass!==e.componentClass)return!1;const t=this.cellRenderer.refresh(e.params);return!0===t||void 0===t}createCellRendererInstance(e){const t=!this.beans.gos.get("suppressAnimationFrame"),n=this.rendererVersion,{componentClass:i}=e,r=()=>{if(this.rendererVersion!==n||!this.isAlive())return;const t=e.newAgStackInstance(),r=this.afterCellRendererCreated.bind(this,n,i);t&&t.then(r)};t&&this.firstRender?this.beans.animationFrameService.createTask(r,this.rowNode.rowIndex,"createTasksP2"):r()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,n){if(!this.isAlive()||e!==this.rendererVersion)this.beans.context.destroyBean(n);else if(this.cellRenderer=n,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui){const e=this.getParentOfValue();zM(e),e.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,n,i,r){if(e!==this.editorVersion)return void this.beans.context.destroyBean(t);if(t.isCancelBeforeStart&&t.isCancelBeforeStart())return this.beans.context.destroyBean(t),void this.cellCtrl.stopEditing(!0);if(!t.getGui)return console.warn("AG Grid: cellEditor for column ".concat(this.column.getId()," is missing getGui() method")),void this.beans.context.destroyBean(t);this.cellEditor=t,this.cellEditorGui=t.getGui();const s=i||void 0!==t.isPopup&&t.isPopup();s?this.addPopupCellEditor(n,r):this.addInCellEditor(),this.refreshEditStyles(!0,s),t.afterGuiAttached&&t.afterGuiAttached()}refreshEditStyles(e,t){var n;this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),null==(n=this.rowCtrl)||n.setInlineEditingCss(e)}addInCellEditor(){const e=this.getGui();if(e.contains(this.beans.gos.getActiveDomElement())&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui){this.getParentOfValue().appendChild(this.cellEditorGui)}}addPopupCellEditor(e,t){"fullRow"===this.beans.gos.get("editType")&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");const n=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new iO(e));const i=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&i.appendChild(this.cellEditorGui);const r=this.beans.popupService,s=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),o=null!=t?t:n.getPopupPosition?n.getPopupPosition():"over",a=this.beans.gos.get("enableRtl"),l={ePopup:i,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:o,alignSide:a?"right":"left",keepWithinBounds:!0},c=r.positionPopupByComponent.bind(r,l),u=this.beans.localeService.getLocaleTextFunc(),d=r.addPopup({modal:s,eChild:i,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:c,ariaLabel:u("ariaLabelCellEditor","Cell Editor")});d&&(this.hideEditorPopup=d.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const e=this.getGui();e.contains(this.beans.gos.getActiveDomElement())&&sM()&&e.focus({preventScroll:!0}),zM(this.getParentOfValue())}},sO=class extends XP{constructor(e,t,n){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;const i=document.createElement("div");i.setAttribute("comp-id","".concat(this.getCompId())),i.setAttribute("style",this.getInitialStyle(n)),this.setTemplateFromElement(i);const r=this.getGui(),s=r.style;this.domOrder=this.rowCtrl.getDomOrder(),pD(r,"row");const o=this.rowCtrl.getTabIndex();null!=o&&r.setAttribute("tabindex",o.toString());const a={setDomOrder:e=>this.domOrder=e,setCellCtrls:e=>this.setCellCtrls(e),showFullWidth:e=>this.showFullWidth(e),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setUserStyles:e=>JM(r,e),setTop:e=>s.top=e,setTransform:e=>s.transform=e,setRowIndex:e=>r.setAttribute("row-index",e),setRowId:e=>r.setAttribute("row-id",e),setRowBusinessKey:e=>r.setAttribute("row-business-key",e),refreshFullWidth:e=>this.refreshFullWidth(e)};e.setComp(a,this.getGui(),n),this.addDestroyFunc((()=>{e.unsetComp(n)}))}getInitialStyle(e){const t=this.rowCtrl.getInitialTransform(e);return t?"transform: ".concat(t):"top: ".concat(this.rowCtrl.getInitialRowTop(e))}showFullWidth(e){const t=e.newAgStackInstance();t&&t.then((e=>{if(this.isAlive()){const t=e.getGui();this.getGui().appendChild(t),this.rowCtrl.setupDetailRowAutoHeight(t),this.setFullWidthRowComp(e)}else this.beans.context.destroyBean(e)}))}setCellCtrls(e){const t=Object.assign({},this.cellComps);e.forEach((e=>{const n=e.getInstanceId();null==this.cellComps[n]?this.newCellComp(e):t[n]=null}));const n=a_(t).filter((e=>null!=e));this.destroyCells(n),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const t=[];e.forEach((e=>{const n=this.cellComps[e.getInstanceId()];n&&t.push(n.getGui())})),ZM(this.getGui(),t)}newCellComp(e){const t=new rO(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){const e=a_(this.cellComps).filter((e=>null!=e));this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc((()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)}))}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(e){e.forEach((e=>{if(!e)return;const t=e.getCtrl().getInstanceId();this.cellComps[t]===e&&(e.detach(),e.destroy(),this.cellComps[t]=null)}))}refreshFullWidth(e){const{fullWidthCellRenderer:t}=this;if(!t||!t.refresh)return!1;const n=e();return t.refresh(n)}};var oO=class extends XP{constructor(){super(function(){const e=XP.elementGettingCreated.getAttribute("name"),t=Qk.getRowContainerCssClasses(e);let n;return n="center"===e||"topCenter"===e||"stickyTopCenter"===e||"bottomCenter"===e||"stickyBottomCenter"===e?'<div class="'.concat(t.viewport,'" ref="eViewport" role="presentation">\n                <div class="').concat(t.container,'" ref="eContainer"></div>\n            </div>'):'<div class="'.concat(t.container,'" ref="eContainer"></div>'),n}()),this.rowComps={},this.name=XP.elementGettingCreated.getAttribute("name"),this.type=Yk(this.name)}postConstruct(){const e={setViewportHeight:e=>this.eViewport.style.height=e,setRowCtrls:e=>{let{rowCtrls:t}=e;return this.setRowCtrls(t)},setDomOrder:e=>{this.domOrder=e},setContainerWidth:e=>this.eContainer.style.width=e};this.createManagedBean(new Qk(this.name)).setComp(e,this.eContainer,this.eViewport)}preDestroy(){this.setRowCtrls([])}setRowCtrls(e){const t=VT({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;e.forEach((e=>{const n=e.getInstanceId(),i=t[n];if(i)this.rowComps[n]=i,delete t[n],this.ensureDomOrder(i.getGui());else{if(!e.getRowNode().displayed)return;const t=new sO(e,this.beans,this.type);this.rowComps[n]=t,this.appendRow(t.getGui())}})),a_(t).forEach((e=>{this.eContainer.removeChild(e.getGui()),e.destroy()})),pD(this.eContainer,"rowgroup")}appendRow(e){this.domOrder?$M(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(QM(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}};WT([F_("beans")],oO.prototype,"beans",2),WT([QP("eViewport")],oO.prototype,"eViewport",2),WT([QP("eContainer")],oO.prototype,"eContainer",2),WT([k_],oO.prototype,"postConstruct",1),WT([O_],oO.prototype,"preDestroy",1);var aO=class{constructor(e){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach((e=>{e.isPrimary()&&(e.isAnyFunctionActive()||(e.isAllowValue()?this.columnsToAggregate.push(e):e.isAllowRowGroup()?this.columnsToGroup.push(e):e.isAllowPivot()&&this.columnsToPivot.push(e)))}))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?dN.ICON_PINNED:dN.ICON_MOVE:null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};WT([F_("columnModel")],aO.prototype,"columnModel",2),WT([F_("gridOptionsService")],aO.prototype,"gos",2);var lO=class{static attemptMoveColumns(e){const{isFromHeader:t,hDirection:n,xPosition:i,fromEnter:r,fakeEvent:s,pinned:o,gos:a,columnModel:l}=e,c=0===n,u=1===n;let{allMovingColumns:d}=e;if(t){let e=[];d.forEach((t=>{var n;let i=null,r=t.getParent();for(;null!=r&&1===r.getDisplayedLeafColumns().length;)i=r,r=r.getParent();if(null!=i){(!!(null==(n=i.getColGroupDef())?void 0:n.marryChildren)?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns()).forEach((t=>{e.includes(t)||e.push(t)}))}else e.includes(t)||e.push(t)})),d=e}const h=d.slice();l.sortColumnsLikeGridColumns(h);const p=this.calculateValidMoves({movingCols:h,draggingRight:u,xPosition:i,pinned:o,gos:a,columnModel:l}),g=this.calculateOldIndex(h,l);if(0===p.length)return;const f=p[0];let m=null!==g&&!r;if(t&&(m=null!==g),m&&!s){if(c&&f>=g)return;if(u&&f<=g)return}const v=l.getAllDisplayedColumns();let y=[],C=null;for(let w=0;w<p.length;w++){const e=p[w],t=l.getProposedColumnOrder(h,e);if(!l.doesOrderPassRules(t))continue;const n=t.filter((e=>v.includes(e)));if(null===C)C=n;else if(!nR(n,C))break;const i=this.groupFragCount(t);y.push({move:e,fragCount:i})}return 0!==y.length?(y.sort(((e,t)=>e.fragCount-t.fragCount)),this.moveColumns(d,y[0].move,"uiColumnMoved",!1,l)):void 0}static moveColumns(e,t,n,i,r){return r.moveColumns(e,t,n,i),i?null:{columns:e,toIndex:t}}static calculateOldIndex(e,t){const n=t.getAllGridColumns(),i=rR(e.map((e=>n.indexOf(e)))),r=i[0];return tR(i)-r!==i.length-1?null:r}static groupFragCount(e){function t(e){let t=[],n=e.getOriginalParent();for(;null!=n;)t.push(n),n=n.getOriginalParent();return t}let n=0;for(let i=0;i<e.length-1;i++){let r=t(e[i]),s=t(e[i+1]);[r,s]=r.length>s.length?[r,s]:[s,r],r.forEach((e=>{-1===s.indexOf(e)&&n++}))}return n}static getDisplayedColumns(e,t){switch(t){case"left":return e.getDisplayedLeftColumns();case"right":return e.getDisplayedRightColumns();default:return e.getDisplayedCenterColumns()}}static calculateValidMoves(e){const{movingCols:t,draggingRight:n,xPosition:i,pinned:r,gos:s,columnModel:o}=e;if(s.get("suppressMovableColumns")||t.some((e=>e.getColDef().suppressMovable)))return[];const a=this.getDisplayedColumns(o,r),l=o.getAllGridColumns(),c=a.filter((e=>pR(t,e))),u=a.filter((e=>!pR(t,e))),d=l.filter((e=>!pR(t,e)));let h,p=0,g=i;if(n){let e=0;c.forEach((t=>e+=t.getActualWidth())),g-=e}if(g>0){for(let e=0;e<u.length;e++){if(g-=u[e].getActualWidth(),g<0)break;p++}n&&p++}if(p>0){const e=u[p-1];h=d.indexOf(e)+1}else h=d.indexOf(u[0]),-1===h&&(h=0);const f=[h],m=(e,t)=>e-t;if(n){let e=h+1;const t=l.length-1;for(;e<=t;)f.push(e),e++;f.sort(m)}else{let e=h;const t=l.length-1;let n=l[e];for(;e<=t&&a.indexOf(n)<0;)e++,f.push(e),n=l[e];e=h-1;const i=0;for(;e>=i;)f.push(e),e--;f.sort(m).reverse()}return f}static normaliseX(e,t,n,i,r){const s=r.getHeaderRowContainerCtrl(t).getViewport();if(n&&(e-=s.getBoundingClientRect().left),i.get("enableRtl")){e=s.clientWidth-e}return null==t&&(e+=r.get("center").getCenterViewportScrollLeft()),e}},cO=class{constructor(e){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!YT(e)}init(){this.ctrlsService.whenReady((e=>{this.gridBodyCon=e.gridBodyCtrl}))}getIconName(){return this.pinned?dN.ICON_PINNED:dN.ICON_MOVE}onDragEnter(e){const t=e.dragItem.columns;if(0===e.dragSource.type)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const n=e.dragItem.visibleState,i=(t||[]).filter((e=>n[e.getId()]));this.setColumnsVisible(i,!0,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged"),this.onDragging(e,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(e){const i=e.filter((e=>!e.getColDef().lockVisible));this.columnModel.setColumnsVisible(i,t,n)}}setColumnsPinned(e,t,n){if(e){const i=e.filter((e=>!e.getColDef().lockPinned));this.columnModel.setColumnsPinned(i,t,n)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(e){if(this.isCenterContainer){const t=this.ctrlsService.get("center"),n=t.getCenterViewportScrollLeft(),i=n+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<n+50,this.needToMoveLeft=e>i-50):(this.needToMoveLeft=e<n+50,this.needToMoveRight=e>i-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lastDraggingEvent,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i;if(arguments.length>3&&void 0!==arguments[3]&&arguments[3]){if(this.lastMovedInfo){const{columns:e,toIndex:t}=this.lastMovedInfo;lO.moveColumns(e,t,"uiColumnMoved",!0,this.columnModel)}return}if(this.lastDraggingEvent=e,qT(e.hDirection))return;const r=lO.normaliseX(e.x,this.pinned,!1,this.gos,this.ctrlsService);t||this.checkCenterForScrolling(r);const s=this.normaliseDirection(e.hDirection),o=e.dragSource.type,a=(null==(i=e.dragSource.getDragItem().columns)?void 0:i.filter((e=>!e.getColDef().lockPinned||e.getPinned()==this.pinned)))||[],l=lO.attemptMoveColumns({allMovingColumns:a,isFromHeader:1===o,hDirection:s,xPosition:r,pinned:this.pinned,fromEnter:t,fakeEvent:n,gos:this.gos,columnModel:this.columnModel});l&&(this.lastMovedInfo=l)}normaliseDirection(e){if(!this.gos.get("enableRtl"))return e;switch(e){case 0:return 1;case 1:return 0;default:console.error("AG Grid: Unknown direction ".concat(e))}}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(dN.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(dN.ICON_RIGHT,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(dN.ICON_MOVE))}moveInterval(){let e;this.intervalCount++,e=10+5*this.intervalCount,e>100&&(e=100);let t=null;const n=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),0!==t)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const e=this.lastDraggingEvent.dragItem.columns.filter((e=>!e.getColDef().lockPinned));if(e.length>0&&(this.dragAndDropService.setGhostIcon(dN.ICON_PINNED),this.failedMoveAttempts>7)){const t=this.needToMoveLeft?"left":"right";this.setColumnsPinned(e,t,"uiColumnDragged"),this.dragAndDropService.nudge()}}}};WT([F_("columnModel")],cO.prototype,"columnModel",2),WT([F_("dragAndDropService")],cO.prototype,"dragAndDropService",2),WT([F_("gridOptionsService")],cO.prototype,"gos",2),WT([F_("ctrlsService")],cO.prototype,"ctrlsService",2),WT([k_],cO.prototype,"init",1);var uO=class extends MR{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady((e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]]}}))}isInterestedIn(e){return 1===e||0===e&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}init(){this.moveColumnFeature=this.createManagedBean(new cO(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new aO(this.pinned)),this.dragAndDropService.addDropTarget(this)}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&0===e.dragSource.type}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}};WT([F_("dragAndDropService")],uO.prototype,"dragAndDropService",2),WT([F_("columnModel")],uO.prototype,"columnModel",2),WT([F_("ctrlsService")],uO.prototype,"ctrlsService",2),WT([k_],uO.prototype,"postConstruct",1),WT([k_],uO.prototype,"init",1);var dO=class e extends mk{constructor(t){super(e.TEMPLATE,t),this.headerCompVersion=0,this.column=t.getColumnGroupChild(),this.pinned=t.getPinned()}postConstruct(){const e=this.getGui();((t,n)=>{null!=n&&""!=n?e.setAttribute(t,n):e.removeAttribute(t)})("col-id",this.column.getColId());const t={setWidth:t=>e.style.width=t,addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setAriaSort:t=>t?BD(e,t):VD(e),setUserCompDetails:e=>this.setUserCompDetails(e),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(t,this.getGui(),this.eResize,this.eHeaderCompWrapper);const n=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",n)}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const t=this.headerCompVersion;e.newAgStackInstance().then((e=>this.afterCompCreated(t,e)))}afterCompCreated(e,t){e==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())):this.destroyBean(t)}};dO.TEMPLATE='<div class="ag-header-cell" role="columnheader">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n        </div>',WT([QP("eResize")],dO.prototype,"eResize",2),WT([QP("eHeaderCompWrapper")],dO.prototype,"eHeaderCompWrapper",2),WT([k_],dO.prototype,"postConstruct",1),WT([O_],dO.prototype,"destroyHeaderComp",1);var hO=dO,pO=class e extends mk{constructor(t){super(e.TEMPLATE,t)}postConstruct(){const e=this.getGui();e.setAttribute("col-id",this.ctrl.getColId());const t={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setResizableDisplayed:e=>IM(this.eResize,e),setWidth:t=>e.style.width=t,setAriaExpanded:t=>((t,n)=>void 0!=n?e.setAttribute(t,n):e.removeAttribute(t))("aria-expanded",t),setUserCompDetails:e=>this.setUserCompDetails(e),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(t,e,this.eResize)}setUserCompDetails(e){e.newAgStackInstance().then((e=>this.afterHeaderCompCreated(e)))}afterHeaderCompCreated(e){const t=()=>this.destroyBean(e);if(!this.isAlive())return void t();const n=this.getGui(),i=e.getGui();n.appendChild(i),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(n)}};pO.TEMPLATE='<div class="ag-header-group-cell" role="columnheader">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',WT([QP("eResize")],pO.prototype,"eResize",2),WT([k_],pO.prototype,"postConstruct",1);var gO=pO,fO=(e=>(e.COLUMN_GROUP="group",e.COLUMN="column",e.FLOATING_FILTER="filter",e))(fO||{}),mO=class extends XP{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate('<div class="'.concat(this.ctrl.getHeaderRowClass(),'" role="row"></div>'))}init(){kD(this.getGui(),this.ctrl.getAriaRowIndex());const e={setHeight:e=>this.getGui().style.height=e,setTop:e=>this.getGui().style.top=e,setHeaderCtrls:(e,t)=>this.setHeaderCtrls(e,t),setWidth:e=>this.getGui().style.width=e};this.ctrl.setComp(e)}destroyHeaderCtrls(){this.setHeaderCtrls([],!1)}setHeaderCtrls(e,t){if(!this.isAlive())return;const n=this.headerComps;if(this.headerComps={},e.forEach((e=>{const t=e.getInstanceId();let i=n[t];delete n[t],null==i&&(i=this.createHeaderComp(e),this.getGui().appendChild(i.getGui())),this.headerComps[t]=i})),r_(n,((e,t)=>{this.getGui().removeChild(t.getGui()),this.destroyBean(t)})),t){const e=a_(this.headerComps);e.sort(((e,t)=>e.getCtrl().getColumnGroupChild().getLeft()-t.getCtrl().getColumnGroupChild().getLeft()));const t=e.map((e=>e.getGui()));ZM(this.getGui(),t)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case"group":t=new gO(e);break;case"filter":t=new yk(e);break;default:t=new hO(e)}return this.createBean(t),t.setParentComponent(this),t}};WT([k_],mO.prototype,"init",1),WT([O_],mO.prototype,"destroyHeaderCtrls",1);var vO=0,yO=class e extends MR{constructor(e,t,n){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=e,this.parentRowCtrl=n,this.beans=t,this.instanceId=e.getUniqueId()+"-"+vO++}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],(()=>this.refreshTabIndex()))}shouldStopEventPropagation(e){const{headerRowIndex:t,column:n}=this.focusService.getFocusedHeader();return PP(this.gos,e,t,n)}getWrapperHasFocus(){return this.gos.getActiveDomElement()===this.eGui}setGui(e){this.eGui=e,this.addDomData(),this.addManagedListener(this.beans.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onDisplayedColumnsChanged(){this.comp&&this.column&&(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:n}=this;Pk.refreshFirstAndLastStyles(e,t,n.columnModel)}refreshAriaColIndex(){const{beans:e,column:t}=this,n=e.columnModel.getAriaColumnIndex(t);LD(this.eGui,n)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&(this.addManagedListener(this.eGui,"keydown",this.onGuiKeyDown.bind(this)),this.addManagedListener(this.eGui,"keyup",this.onGuiKeyUp.bind(this)))}refreshTabIndex(){this.gos.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(e){var t;const n=this.gos.getActiveDomElement(),i=e.key===SP.LEFT||e.key===SP.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),n!==this.eGui||!e.shiftKey&&!e.altKey)return;if((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),!i)return;const r=e.key===SP.LEFT!==this.gos.get("enableRtl"),s=uN[r?"Left":"Right"];if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const n=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(n,e.shiftKey),null==(t=this.resizeFeature)||t.toggleColumnResizing(!0)}else this.moveHeader(s)}getViewportAdjustedResizeDiff(e){let t=this.getResizeDiff(e);if(this.column.getPinned()){const e=this.pinnedWidthService.getPinnedLeftWidth(),n=this.pinnedWidthService.getPinnedRightWidth(),i=BM(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(e+n+t>i){if(!(i>e+n))return 0;t=i-e-n}}return t}getResizeDiff(e){let t=e.key===SP.LEFT!==this.gos.get("enableRtl");const n=this.column.getPinned(),i=this.gos.get("enableRtl");return n&&i!==("right"===n)&&(t=!t),(t?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=setTimeout((()=>{var e;null==(e=this.resizeFeature)||e.toggleColumnResizing(!1)}),150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case SP.PAGE_DOWN:case SP.PAGE_UP:case SP.PAGE_HOME:case SP.PAGE_END:t&&e.preventDefault()}}addDomData(){const t=e.DOM_DATA_KEY_HEADER_CTRL;this.gos.setDomData(this.eGui,t,this),this.addDestroyFunc((()=>this.gos.setDomData(this.eGui,t,null)))}getGui(){return this.eGui}focus(e){return!!this.eGui&&(this.lastFocusEvent=e||null,this.eGui.focus(),!0)}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,n){const i=null!=e?e:t;this.gos.get("preventDefaultOnContextMenu")&&i.preventDefault();const r=n instanceof K_?n:void 0;this.menuService.isHeaderContextMenuEnabled(r)&&this.menuService.showHeaderContextMenu(r,e,t),this.dispatchColumnMouseEvent(OR.EVENT_COLUMN_HEADER_CONTEXT_MENU,n)}dispatchColumnMouseEvent(e,t){const n={type:e,column:t};this.eventService.dispatchEvent(n)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};yO.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",WT([F_("pinnedWidthService")],yO.prototype,"pinnedWidthService",2),WT([F_("focusService")],yO.prototype,"focusService",2),WT([F_("userComponentFactory")],yO.prototype,"userComponentFactory",2),WT([F_("ctrlsService")],yO.prototype,"ctrlsService",2),WT([F_("dragAndDropService")],yO.prototype,"dragAndDropService",2),WT([F_("menuService")],yO.prototype,"menuService",2),WT([k_],yO.prototype,"postConstruct",1);var CO=yO,wO=class extends MR{constructor(e,t,n,i){super(),this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=i,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?tR(this.colsSpanning):this.columnOrGroup}postConstruct(){this.addManagedListener(this.columnOrGroup,K_.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))}setLeftFirstTime(){const e=this.beans.gos.get("suppressColumnMoveAnimation"),t=YT(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),n=e.getOldLeft(),i=this.modifyLeftForPrintLayout(e,n),r=this.modifyLeftForPrintLayout(e,t);this.setLeft(i),this.actualLeft=r,this.beans.columnAnimationService.executeNextVMTurn((()=>{this.actualLeft===r&&this.setLeft(r)}))}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!this.beans.gos.isDomLayout("print"))return t;if("left"===e.getPinned())return t;const n=this.beans.columnModel.getDisplayedColumnsLeftWidth();if("right"===e.getPinned()){return n+this.beans.columnModel.getBodyContainerWidth()+t}return n+t}setLeft(e){let t;if(YT(e)&&(this.eCell.style.left="".concat(e,"px")),this.columnOrGroup instanceof K_)t=this.columnOrGroup;else{const e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&FD(this.ariaEl,e.length),t=e[0]}}};WT([k_],wO.prototype,"postConstruct",1);var bO=class extends MR{constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}};WT([F_("columnHoverService")],bO.prototype,"columnHoverService",2),WT([k_],bO.prototype,"postConstruct",1);var SO=class extends CO{constructor(e,t,n){super(e,t,n),this.iconCreated=!1,this.column=e}setComp(e,t,n,i){this.comp=e,this.eButtonShowMainFilter=n,this.eFloatingFilterBody=i,this.setGui(t),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,K_.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,n=!!e.floatingFilter;this.active=t&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=wP("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(){this.createManagedBean(new iI(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();yD(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(this.gos.getActiveDomElement()===this.eGui)return;const t=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(t)return this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),void t.focus();const n=this.findNextColumnWithFloatingFilter(e.shiftKey);n&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:n},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.columnModel;let n=this.column;do{if(n=e?t.getDisplayedColBefore(n):t.getDisplayedColAfter(n),!n)break}while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case SP.UP:case SP.DOWN:t||e.preventDefault();case SP.LEFT:case SP.RIGHT:if(t)return;e.stopPropagation();case SP.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case SP.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const t=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),n=!!e.relatedTarget&&OM(e.relatedTarget,"ag-floating-filter");if(t&&n&&e.target===this.eGui){const e=this.lastFocusEvent,t=!(!e||e.key!==SP.TAB);if(e&&t){const t=e.shiftKey;this.focusService.focusInto(this.eGui,t)}}const i=this.getRowIndex();this.beans.focusService.setFocusedHeader(i,this.column)}setupHover(){this.createManagedBean(new bO([this.column],this.eGui));const e=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedListener(this.eventService,OR.EVENT_COLUMN_HOVER_CHANGED,e),e()}setupLeft(){const e=new wO(this.column,this.eGui,this.beans);this.createManagedBean(e)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;const e=this.beans.filterManager.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter()));e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;const{filterManager:e}=this.beans,t=t=>{if("filterDestroyed"===(null==t?void 0:t.source)&&this.context.isDestroyed())return;const n=this.comp.getFloatingFilterComp();n&&n.then((n=>{var i;if(n){const r=e.getCurrentFloatingFilterParentModel(this.column);n.onParentModelChanged(r,t?this.gos.addGridCommonParams({columns:null!=(i=t.columns)?i:[],type:OR.EVENT_FILTER_CHANGED,source:"api"===t.source?"api":"columnFilter"}):null)}}))};this.destroySyncListener=this.addManagedListener(this.column,K_.EVENT_FILTER_CHANGED,t),e.isFilterActive(this.column)&&t(null)}setupWidth(){const e=()=>{const e="".concat(this.column.getActualWidth(),"px");this.comp.setWidth(e)};this.addManagedListener(this.column,K_.EVENT_WIDTH_CHANGED,e),e()}setupFilterChangedListener(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,K_.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=this.beans.filterManager.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){var e,t;const n=this.active;this.setupActive();const i=!n&&this.active;n&&!this.active&&(null==(e=this.destroySyncListener)||e.call(this),null==(t=this.destroyFilterChangedListener)||t.call(this));const r=this.active?this.beans.filterManager.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter())):null,s=this.comp.getFloatingFilterComp();s&&r?s.then((e=>{var t;!e||this.beans.filterManager.areFilterCompsDifferent(null!=(t=this.userCompDetails)?t:null,r)?this.updateCompDetails(r,i):this.updateFloatingFilterParams(r)})):this.updateCompDetails(r,i)}updateCompDetails(e,t){this.isAlive()&&(this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(e){var t;if(!e)return;const n=e.params;null==(t=this.comp.getFloatingFilterComp())||t.then((e=>{let t=!1;if((null==e?void 0:e.refresh)&&"function"===typeof e.refresh){null!==e.refresh(n)&&(t=!0)}if(!t&&(null==e?void 0:e.onParamsUpdated)&&"function"===typeof e.onParamsUpdated){null!==e.onParamsUpdated(n)&&f_("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}}))}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},EO=class extends MR{constructor(e,t,n,i,r){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=i,this.ctrl=r}postConstruct(){const e=[];let t,n;const i=()=>{if(IM(this.eResize,t),!t)return;const i=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(i),n){const t=this.gos.get("skipHeaderOnAutoSize"),n=()=>{this.columnModel.autoSizeColumn(this.column,"uiColumnResized",t)};this.eResize.addEventListener("dblclick",n);const i=new zI(this.eResize);i.addEventListener(zI.EVENT_DOUBLE_TAP,n),e.push((()=>{this.eResize.removeEventListener("dblclick",n),i.removeEventListener(zI.EVENT_DOUBLE_TAP,n),i.destroy()}))}},r=()=>{e.forEach((e=>e())),e.length=0},s=()=>{const e=this.column.isResizable(),s=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(e!==t||s!==n)&&(t=e,n=s,r(),i())};s(),this.addDestroyFunc(r),this.ctrl.addRefreshFunction(s)}onResizing(e,t){const{column:n,lastResizeAmount:i,resizeStartWidth:r}=this,s=this.normaliseResizeAmount(t),o=[{key:n,newWidth:r+s}];if(this.column.getPinned()){if(this.pinnedWidthService.getPinnedLeftWidth()+this.pinnedWidthService.getPinnedRightWidth()+(s-i)>BM(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50)return}this.lastResizeAmount=s,this.columnModel.setColumnWidths(o,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const n="left"!==this.pinned,i="right"===this.pinned;return this.gos.get("enableRtl")?n&&(t*=-1):i&&(t*=-1),t}};WT([F_("horizontalResizeService")],EO.prototype,"horizontalResizeService",2),WT([F_("pinnedWidthService")],EO.prototype,"pinnedWidthService",2),WT([F_("ctrlsService")],EO.prototype,"ctrlsService",2),WT([F_("columnModel")],EO.prototype,"columnModel",2),WT([k_],EO.prototype,"postConstruct",1);var xO=class extends MR{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(this.gos.getActiveDomElement())&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new vI),this.cbSelectAll.addCssClass("ag-header-select-all"),pD(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,OR.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,OR.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),TD(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),t=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),n=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll","".concat(n," (").concat(t,")")):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel("".concat(n," (").concat(t,")")),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return!("multiple"!==this.gos.get("rowSelection"))||(console.warn("AG Grid: ".concat(e," is only available if using 'multiple' rowSelection.")),!1)}checkRightRowModelType(e){const t=this.rowModel.getType();return!("clientSide"!==t&&"serverSide"!==t)||(console.warn("AG Grid: ".concat(e," is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ").concat(t,".")),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox)return;if(!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),n=this.isCurrentPageOnly();let i="uiSelectAll";n?i="uiSelectAllCurrentPage":t&&(i="uiSelectAllFiltered");const r={source:i,justFiltered:t,justCurrentPage:n};e?this.selectionService.selectAllRowNodes(r):this.selectionService.deselectAllRowNodes(r)}isCheckboxSelection(){let e=this.column.getColDef().headerCheckboxSelection;if("function"===typeof e){e=e(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()}))}return!!e&&(this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"))}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}};WT([F_("rowModel")],xO.prototype,"rowModel",2),WT([F_("selectionService")],xO.prototype,"selectionService",2);var AO=class extends CO{constructor(e,t,n){super(e,t,n),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,n,i){this.comp=e,this.setGui(t),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(i),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new EO(this.getPinned(),this.column,n,e,this)),this.createManagedBean(new bO([this.column],t)),this.createManagedBean(new wO(this.column,t,this.beans)),this.createManagedBean(new iI(t,{shouldStopEventPropagation:e=>this.shouldStopEventPropagation(e),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListener(this.column,K_.EVENT_COL_DEF_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}resizeHeader(e,t){var n,i;if(!this.column.isResizable())return;const r=this.column.getActualWidth(),s=null!=(n=this.column.getMinWidth())?n:0,o=null!=(i=this.column.getMaxWidth())?i:Number.MAX_SAFE_INTEGER,a=Math.min(Math.max(r+e,s),o);this.beans.columnModel.setColumnWidths([{key:this.column,newWidth:a}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,column:n,gos:i,ctrlsService:r}=this,s=this.getPinned(),o=t.getBoundingClientRect().left,a=n.getActualWidth(),l=0===e!==i.get("enableRtl"),c=lO.normaliseX(l?o-20:o+a+20,s,!0,i,r);lO.attemptMoveColumns({allMovingColumns:[n],isFromHeader:!0,hDirection:e,xPosition:c,pinned:s,fromEnter:!1,fakeEvent:!1,gos:i,columnModel:this.beans.columnModel}),r.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(n,"auto")}setupUserComp(){const e=this.lookupUserCompDetails();this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,e)}createParams(){const e=this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:e=>{this.menuService.showColumnMenu({column:this.column,buttonElement:e,positionBy:"button"})},showColumnMenuAfterMouseClick:e=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:e,positionBy:"mouse"})},showFilter:e=>{this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{this.beans.sortController.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,t)=>{this.beans.sortController.setSortForColumn(this.column,e,!!t,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(e,t)=>{this.setupTooltip(e,t)}});return e}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new xO(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===SP.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===SP.ENTER&&this.onEnterKeyDown(e),e.key===SP.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const n=this.comp.getUserCompInstance();n&&n instanceof XI&&n.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const e=this.getRowIndex();this.focusService.setFocusedHeader(e,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const n="whenTruncated"===this.gos.get("tooltipShowMode"),i=this.eGui,r=this.column.getColDef();t||!n||r.headerComponent||(t=()=>{const e=i.querySelector(".ag-header-cell-text");return!e||e.scrollWidth>e.clientWidth});const s={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>i,getLocation:()=>"header",getTooltipValue:()=>{if(null!=e)return e;return this.column.getColDef().headerTooltip},shouldDisplayTooltip:t},o=this.createManagedBean(new YP(s));this.refreshFunctions.push((()=>o.refreshToolTip()))}setupClassesFromColDef(){const e=()=>{const e=this.column.getColDef(),t=Pk.getHeaderClassesFromColDef(e,this.gos,this.column,null),n=this.userHeaderClasses;this.userHeaderClasses=new Set(t),t.forEach((e=>{n.has(e)?n.delete(e):this.comp.addOrRemoveCssClass(e,!0)})),n.forEach((e=>this.comp.addOrRemoveCssClass(e,!1)))};this.refreshFunctions.push(e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:n,displayName:i,dragAndDropService:r,gos:s}=this,{columnModel:o}=n;let a=!this.gos.get("suppressDragLeaveHidesColumns");const l=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?dN.ICON_HIDE:dN.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(t),dragItemName:i,onDragStarted:()=>{a=!s.get("suppressDragLeaveHidesColumns"),t.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>t.setMoving(!1,"uiColumnMoved"),onGridEnter:e=>{var t;if(a){const n=(null==(t=null==e?void 0:e.columns)?void 0:t.filter((e=>!e.getColDef().lockVisible)))||[];o.setColumnsVisible(n,!0,"uiColumnMoved")}},onGridExit:e=>{var t;if(a){const n=(null==(t=null==e?void 0:e.columns)?void 0:t.filter((e=>!e.getColDef().lockVisible)))||[];o.setColumnsVisible(n,!1,"uiColumnMoved")}}};r.addDragSource(l,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(e){this.refreshFunctions.push(e)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach((e=>e()))}refreshHeaderComp(){const e=this.lookupUserCompDetails();!!(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass)&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();if(!t)return!1;if(!t.refresh)return!1;return t.refresh(e)}calculateDisplayName(){return this.beans.columnModel.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){const e=()=>{const e=this.column.getActualWidth();this.comp.setWidth("".concat(e,"px"))};this.addManagedListener(this.column,K_.EVENT_WIDTH_CHANGED,e),e()}setupMovingCss(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListener(this.column,K_.EVENT_MOVING_CHANGED,e),e()}setupMenuClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListener(this.column,K_.EVENT_MENU_VISIBLE_CHANGED,e),e()}setupSortableClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};e(),this.addRefreshFunction(e),this.addManagedListener(this.eventService,K_.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))}setupFilterClass(){const e=()=>{const e=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),this.refreshAria()};this.addManagedListener(this.column,K_.EVENT_FILTER_ACTIVE_CHANGED,e),e()}setupWrapTextClass(){const e=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};e(),this.addRefreshFunction(e)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:n,beans:i}=this;if(!t.isSpanHeaderHeight())return e.style.removeProperty("top"),e.style.removeProperty("height"),n.addOrRemoveCssClass("ag-header-span-height",!1),void n.addOrRemoveCssClass("ag-header-span-total",!1);const{numberOfParents:r,isSpanningTotal:s}=this.column.getColumnGroupPaddingInfo();n.addOrRemoveCssClass("ag-header-span-height",r>0);const{columnModel:o}=i,a=o.getColumnHeaderRowHeight();if(0===r)return n.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),void e.style.setProperty("height","".concat(a,"px"));n.addOrRemoveCssClass("ag-header-span-total",s);const l=r*(o.isPivotMode()?o.getPivotGroupHeaderHeight():o.getGroupHeaderHeight());e.style.setProperty("top","".concat(-l,"px")),e.style.setProperty("height","".concat(a+l,"px"))}setupAutoHeight(e){const{columnModel:t,resizeObserverService:n}=this.beans,i=n=>{if(!this.isAlive())return;const{paddingTop:r,paddingBottom:s,borderBottomWidth:o,borderTopWidth:a}=LM(this.getGui()),l=r+s+o+a,c=e.offsetHeight+l;if(n<5){const t=this.beans.gos.getDocument();if(!t||!t.contains(e)||0==c)return void window.setTimeout((()=>i(n+1)),0)}t.setColumnHeaderHeight(this.column,c)};let r,s=!1;const o=()=>{const e=this.column.isAutoHeaderHeight();e&&!s&&a(),!e&&s&&l()},a=()=>{s=!0,i(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),r=n.observeResize(e,(()=>i(0)))},l=()=>{s=!1,r&&r(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),r=void 0};o(),this.addDestroyFunc((()=>l())),this.addManagedListener(this.column,K_.EVENT_WIDTH_CHANGED,(()=>s&&i(0))),this.addManagedListener(this.eventService,K_.EVENT_SORT_CHANGED,(()=>{s&&window.setTimeout((()=>i(0)))})),this.addRefreshFunction(o)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(gD(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){null!=t?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(this.beans.gos.getActiveDomElement()))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort(((e,t)=>"filter"===e?-1:t.charCodeAt(0)-e.charCodeAt(0))).map((e=>this.ariaDescriptionProperties.get(e))).join(". ");this.beans.ariaAnnouncementService.announceValue(e)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){const e=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedListener(this.eventService,OR.EVENT_COLUMN_HOVER_CHANGED,e),e()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){const e=e=>this.handleMouseOverChange("mouseenter"===e.type);this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e),this.addManagedListener(this.getGui(),"click",(()=>this.dispatchColumnMouseEvent(OR.EVENT_COLUMN_HEADER_CLICKED,this.column))),this.addManagedListener(this.getGui(),"contextmenu",(e=>this.handleContextMenuMouseEvent(e,void 0,this.column)))}handleMouseOverChange(e){this.setActiveHeader(e);const t={type:e?OR.EVENT_COLUMN_HEADER_MOUSE_OVER:OR.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column};this.eventService.dispatchEvent(t)}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof XI?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},TO=class extends MR{constructor(e,t,n,i){super(),this.eResize=t,this.comp=e,this.pinned=n,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){const e=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",(()=>{const t=[];this.columnGroup.getDisplayedLeafColumns().forEach((e=>{e.getColDef().suppressAutoSize||t.push(e.getColId())})),t.length>0&&this.columnModel.autoSizeColumns({columns:t,skipHeader:e,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")}))}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"uiColumnResized";const i=this.normaliseDragChange(t),r=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(r,n,e)}getInitialValues(e){const t=this.getColumnsToResize(),n=this.getInitialSizeOfColumns(t),i={columnsToResize:t,resizeStartWidth:n,resizeRatios:this.getSizeRatiosOfColumns(t,n)};let r=null;if(e&&(r=this.columnModel.getDisplayedGroupAtDirection(this.columnGroup,"After")),r){const e=r.getDisplayedLeafColumns(),t=i.groupAfterColumns=e.filter((e=>e.isResizable())),n=i.groupAfterStartWidth=this.getInitialSizeOfColumns(t);i.groupAfterRatios=this.getSizeRatiosOfColumns(t,n)}else i.groupAfterColumns=void 0,i.groupAfterStartWidth=void 0,i.groupAfterRatios=void 0;return i}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:n,resizeRatios:i,groupAfterColumns:r,groupAfterStartWidth:s,groupAfterRatios:o}=e;this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=s,this.resizeTakeFromRatios=o}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var i,r,s;if(!this.resizeCols||!this.resizeRatios)return;const o={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:null!=(i=this.resizeTakeFromCols)?i:void 0,groupAfterStartWidth:null!=(r=this.resizeTakeFromStartWidth)?r:void 0,groupAfterRatios:null!=(s=this.resizeTakeFromRatios)?s:void 0};this.resizeColumns(o,e,t,n)}resizeColumns(e,t,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{columnsToResize:r,resizeStartWidth:s,resizeRatios:o,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,u=[];if(u.push({columns:r,ratios:o,width:t}),a){const e=t-s;u.push({columns:a,ratios:c,width:l-e})}this.columnModel.resizeColumnSets({resizeSets:u,finished:i,source:n}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter((e=>e.isResizable()))}getInitialSizeOfColumns(e){return e.reduce(((e,t)=>e+t.getActualWidth()),0)}getSizeRatiosOfColumns(e,t){return e.map((e=>e.getActualWidth()/t))}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?"left"!==this.pinned&&(t*=-1):"right"===this.pinned&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}};WT([F_("horizontalResizeService")],TO.prototype,"horizontalResizeService",2),WT([F_("autoWidthCalculator")],TO.prototype,"autoWidthCalculator",2),WT([F_("columnModel")],TO.prototype,"columnModel",2),WT([k_],TO.prototype,"postConstruct",1);var _O=class extends MR{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,kR.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach((t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push((()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)}))}))}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach((e=>e())),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth("".concat(e,"px")),this.comp.addOrRemoveCssClass("ag-hidden",0===e)}};WT([k_],_O.prototype,"postConstruct",1);var RO=class extends CO{constructor(e,t,n){super(e,t,n),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const e=this.getGui();this.setDragSource(e)}},this.column=e}setComp(e,t,n){this.comp=e,this.setGui(t),this.displayName=this.beans.columnModel.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc((()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))})),this.setupUserComp(),this.addHeaderMouseListeners();const i=this.getParentRowCtrl().getPinned(),r=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new bO(r,t)),this.createManagedBean(new wO(this.column,t,this.beans)),this.createManagedBean(new _O(e,this.column)),this.resizeFeature=this.createManagedBean(new TO(e,n,i,this.column)),this.createManagedBean(new iI(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener(OR.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(e,t){if(!this.resizeFeature)return;const n=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(n,n.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:n,column:i,gos:r,ctrlsService:s}=this,o=r.get("enableRtl"),a=0===e,l=this.getPinned(),c=n.getBoundingClientRect(),u=c.left,d=c.width,h=lO.normaliseX(a!==o?u-20:u+d+20,l,!0,r,s),p=i.getGroupId(),g=this.focusService.getFocusedHeader();lO.attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:e,xPosition:h,pinned:l,fromEnter:!1,fakeEvent:!1,gos:r,columnModel:t.columnModel});const f=i.getDisplayedLeafColumns(),m=a?f[0]:tR(f);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(m,"auto"),!this.isAlive()&&g&&this.restoreFocus(p,i,g)}restoreFocus(e,t,n){const i=t.getLeafColumns();if(!i.length)return;const r=i[0].getParent();if(!r)return;const s=this.findGroupWidthId(r,e);s&&this.focusService.focusHeaderPosition({headerPosition:GT(VT({},n),{column:s})})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(){const e=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:e=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),e,"gridInitializing")},setTooltip:(e,t)=>{this.setupTooltip(e,t)}}),t=this.userComponentFactory.getHeaderGroupCompDetails(e);this.comp.setUserCompDetails(t)}addHeaderMouseListeners(){const e=e=>this.handleMouseOverChange("mouseenter"===e.type);this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e),this.addManagedListener(this.getGui(),"click",(()=>this.dispatchColumnMouseEvent(OR.EVENT_COLUMN_HEADER_CLICKED,this.column.getProvidedColumnGroup()))),this.addManagedListener(this.getGui(),"contextmenu",(e=>this.handleContextMenuMouseEvent(e,void 0,this.column.getProvidedColumnGroup())))}handleMouseOverChange(e){const t={type:e?OR.EVENT_COLUMN_HEADER_MOUSE_OVER:OR.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(t)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const n=this.column.getColGroupDef(),i="whenTruncated"===this.gos.get("tooltipShowMode"),r=this.eGui;t||!i||(null==n?void 0:n.headerGroupComponent)||(t=()=>{const e=r.querySelector(".ag-header-group-text");return!e||e.scrollWidth>e.clientWidth});const s={getColumn:()=>this.column,getGui:()=>r,getLocation:()=>"headerGroup",getTooltipValue:()=>null!=e?e:n&&n.headerTooltip,shouldDisplayTooltip:t};n&&(s.getColDef=()=>n),this.createBean(new YP(s))}setupExpandable(){const e=this.column.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(e,Q_.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,Q_.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))}refreshExpanded(){const e=this.column;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=Pk.getHeaderClassesFromColDef(e,this.gos,null,this.column);if(this.column.isPadding()){t.push("ag-header-group-cell-no-group");this.column.getLeafColumns().every((e=>e.isSpanHeaderHeight()))&&t.push("ag-header-span-height")}else t.push("ag-header-group-cell-with-group");t.forEach((e=>this.comp.addOrRemoveCssClass(e,!0)))}setupMovingCss(){const e=this.column.getProvidedColumnGroup().getLeafColumns(),t=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());e.forEach((e=>{this.addManagedListener(e,K_.EVENT_MOVING_CHANGED,t)})),t()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const e=this.getRowIndex();this.beans.focusService.setFocusedHeader(e,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(this.expandable&&t&&e.key===SP.ENTER){const e=this.column,t=!e.isExpanded();this.beans.columnModel.setColumnGroupOpened(e.getProvidedColumnGroup(),t,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving())return;if(this.removeDragSource(),!e)return;const{beans:t,column:n,displayName:i,gos:r,dragAndDropService:s}=this,{columnModel:o}=t,a=n.getProvidedColumnGroup().getLeafColumns();let l=!r.get("suppressDragLeaveHidesColumns");const c=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?dN.ICON_HIDE:dN.ICON_NOT_ALLOWED,dragItemName:i,getDragItem:()=>this.getDragItemForGroup(n),onDragStarted:()=>{l=!r.get("suppressDragLeaveHidesColumns"),a.forEach((e=>e.setMoving(!0,"uiColumnDragged")))},onDragStopped:()=>a.forEach((e=>e.setMoving(!1,"uiColumnDragged"))),onGridEnter:e=>{var t;if(l){const n=(null==(t=null==e?void 0:e.columns)?void 0:t.filter((e=>!e.getColDef().lockVisible)))||[];o.setColumnsVisible(n,!0,"uiColumnMoved")}},onGridExit:e=>{var t;if(l){const n=(null==(t=null==e?void 0:e.columns)?void 0:t.filter((e=>!e.getColDef().lockVisible)))||[];o.setColumnsVisible(n,!1,"uiColumnMoved")}}};s.addDragSource(c,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),n={};t.forEach((e=>n[e.getId()]=e.isVisible()));const i=[];return this.beans.columnModel.getAllDisplayedColumns().forEach((e=>{t.indexOf(e)>=0&&(i.push(e),aR(t,e))})),t.forEach((e=>i.push(e))),{columns:i,visibleState:n}}isSuppressMoving(){let e=!1;this.column.getLeafColumns().forEach((t=>{(t.getColDef().suppressMovable||t.getColDef().lockPosition)&&(e=!0)}));return e||this.gos.get("suppressMovableColumns")}},DO=0,MO=class extends MR{constructor(e,t,n){super(),this.instanceId=DO++,this.rowIndex=e,this.pinned=t,this.type=n;const i="group"==n?"ag-header-row-column-group":"filter"==n?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass="ag-header-row ".concat(i)}postConstruct(){this.isPrintLayout=this.gos.isDomLayout("print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}getInstanceId(){return this.instanceId}setComp(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.comp=e,t&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){this.addManagedListener(this.eventService,OR.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_VIRTUAL_COLUMNS_CHANGED,(e=>this.onVirtualColumnsChanged(e.afterScroll))),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",(e=>this.isEnsureDomOrder=e.currentValue)),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))}getHeaderCellCtrl(e){if(this.headerCellCtrls)return t_(this.headerCellCtrls).find((t=>t.getColumnGroupChild()===e))}onDisplayedColumnsChanged(){this.isPrintLayout=this.gos.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth("".concat(e,"px"))}getWidthForRow(){const{columnModel:e}=this.beans;if(this.isPrintLayout){return null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null)}return e.getContainerWidth(this.pinned)}onRowHeightChanged(){var{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans;let n=e.getHeaderRowCount();const i=[];let r=0;t.hasFloatingFilters()&&(n++,r=1);const s=e.getColumnGroupHeaderRowHeight(),o=e.getColumnHeaderRowHeight(),a=n-(1+r);for(let c=0;c<a;c++)i.push(s);i.push(o);for(let c=0;c<r;c++)i.push(e.getFloatingFiltersHeight());let l=0;for(let c=0;c<this.rowIndex;c++)l+=i[c];return{topOffset:l,rowHeight:i[this.rowIndex]}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const i of t)this.recycleAndCreateHeaderCtrls(i,e);const n=e=>{const{focusService:t,columnModel:n}=this.beans;if(!t.isHeaderWrapperFocused(e))return!1;return n.isDisplayed(e.getColumnGroupChild())};if(e)for(const[i,r]of e){n(r)?this.headerCellCtrls.set(i,r):this.destroyBean(r)}return Array.from(this.headerCellCtrls.values())}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls)return;if(e.isEmptyGroup())return;const n=e.getUniqueId();let i;t&&(i=t.get(n),t.delete(n));if(i&&i.getColumnGroupChild()!=e&&(this.destroyBean(i),i=void 0),null==i)switch(this.type){case"filter":i=this.createBean(new SO(e,this.beans,this));break;case"group":i=this.createBean(new RO(e,this.beans,this));break;default:i=this.createBean(new AO(e,this.beans,this))}this.headerCellCtrls.set(n,i)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(null!=this.pinned)return[];let e=[];const t=this.getActualDepth(),{columnModel:n}=this.beans;return["left",null,"right"].forEach((i=>{const r=n.getVirtualHeaderGroupRow(i,t);e=e.concat(r)})),e}getActualDepth(){return"filter"==this.type?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())}focusHeader(e,t){if(!this.headerCellCtrls)return!1;const n=Array.from(this.headerCellCtrls.values()).find((t=>t.getColumnGroupChild()==e));return!!n&&n.focus(t)}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach((e=>{this.destroyBean(e)})),this.headerCellCtrls=void 0,super.destroy()}};WT([F_("beans")],MO.prototype,"beans",2),WT([k_],MO.prototype,"postConstruct",1);var PO=class extends MR{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,OR.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}setupDragAndDrop(e){const t=new uO(this.pinned,e);this.createManagedBean(t)}refresh(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=new HP,n=this.focusService.getFocusHeaderToUseAfterRefresh();(()=>{const e=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let n=0;n<e;n++){const e=this.createBean(new MO(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(e)}})(),(()=>{const n=t.next(),i=!this.hidden&&(null==this.columnsRowCtrl||!e||this.columnsRowCtrl.getRowIndex()!==n);(i||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),i&&(this.columnsRowCtrl=this.createBean(new MO(n,this.pinned,"column")))})(),(()=>{this.includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;const n=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void n();const i=t.next();if(this.filtersRowCtrl){const t=this.filtersRowCtrl.getRowIndex()!==i;e&&!t||n()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new MO(i,this.pinned,"filter")))})();const i=this.getAllCtrls();this.comp.setCtrls(i),this.restoreFocusOnHeader(n)}restoreFocusOnHeader(e){null!=e&&e.column.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const e=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new Uk((e=>this.comp.setCenterWidth("".concat(e,"px"))),!0))}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}setupPinnedWidth(){if(null==this.pinned)return;const e="left"===this.pinned,t="right"===this.pinned;this.hidden=!0;const n=()=>{const n=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(null==n)return;const i=0==n,r=this.hidden!==i,s=this.gos.get("enableRtl"),o=this.gos.getScrollbarWidth(),a=this.scrollVisibleService.isVerticalScrollShowing()&&(s&&e||!s&&t)?n+o:n;this.comp.setPinnedContainerWidth("".concat(a,"px")),this.comp.setDisplayed(!i),r&&(this.hidden=i,this.refresh())};this.addManagedListener(this.eventService,OR.EVENT_LEFT_PINNED_WIDTH_CHANGED,n),this.addManagedListener(this.eventService,OR.EVENT_RIGHT_PINNED_WIDTH_CHANGED,n),this.addManagedListener(this.eventService,OR.EVENT_SCROLL_VISIBILITY_CHANGED,n),this.addManagedListener(this.eventService,OR.EVENT_SCROLLBAR_WIDTH_CHANGED,n)}getHeaderCtrlForColumn(e){if(e instanceof K_){if(!this.columnsRowCtrl)return;return this.columnsRowCtrl.getHeaderCellCtrl(e)}if(0!==this.groupsRowCtrls.length)for(let t=0;t<this.groupsRowCtrls.length;t++){const n=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(n)return n}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const t=this.getAllCtrls()[e];return t?t.getType():void 0}focusHeader(e,t,n){const i=this.getAllCtrls()[e];return!!i&&i.focusHeader(t,n)}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}};WT([F_("ctrlsService")],PO.prototype,"ctrlsService",2),WT([F_("scrollVisibleService")],PO.prototype,"scrollVisibleService",2),WT([F_("pinnedWidthService")],PO.prototype,"pinnedWidthService",2),WT([F_("columnModel")],PO.prototype,"columnModel",2),WT([F_("focusService")],PO.prototype,"focusService",2),WT([F_("filterManager")],PO.prototype,"filterManager",2);var IO=class e extends XP{constructor(e){super(),this.headerRowComps={},this.rowCompsList=[],this.pinned=e}init(){this.selectAndSetTemplate();const e={setDisplayed:e=>this.setDisplayed(e),setCtrls:e=>this.setCtrls(e),setCenterWidth:e=>this.eCenterContainer.style.width=e,setViewportScrollLeft:e=>this.getGui().scrollLeft=e,setPinnedContainerWidth:e=>{const t=this.getGui();t.style.width=e,t.style.maxWidth=e,t.style.minWidth=e}};this.createManagedBean(new PO(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const t="left"==this.pinned,n="right"==this.pinned,i=t?e.PINNED_LEFT_TEMPLATE:n?e.PINNED_RIGHT_TEMPLATE:e.CENTER_TEMPLATE;this.setTemplate(i),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()}destroyRowComps(){this.setCtrls([])}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const t=this.headerRowComps;let n;this.headerRowComps={},this.rowCompsList=[];const i=e=>{const t=e.getGui();t.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(t),n&&QM(this.eRowContainer,t,n),n=t};e.forEach((e=>{const n=e.getInstanceId(),r=t[n];delete t[n];const s=r||this.createBean(new mO(e));this.headerRowComps[n]=s,this.rowCompsList.push(s),i(s)})),a_(t).forEach((e=>this.destroyRowComp(e)))}};IO.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="rowgroup"></div>',IO.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="rowgroup"></div>',IO.CENTER_TEMPLATE='<div class="ag-header-viewport" role="presentation">\n            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>\n        </div>',WT([QP("eCenterContainer")],IO.prototype,"eCenterContainer",2),WT([k_],IO.prototype,"init",1),WT([O_],IO.prototype,"destroyRowComps",1);var NO=IO,kO=class extends MR{constructor(){super(...arguments),this.currentHeaderRowWithoutSpan=-1}postConstruct(){this.ctrlsService.whenReady((e=>{this.gridBodyCon=e.gridBodyCtrl}));const e=this.gos.getDocument();this.addManagedListener(e,"mousedown",(()=>this.setCurrentHeaderRowWithoutSpan(-1)))}getHeaderRowCount(){const e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0}navigateVertically(e,t,n){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:i,column:r}=t,s=this.getHeaderRowCount(),o=0===e;let{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:c}=o?this.headerPositionUtils.getColumnVisibleParent(r,i):this.headerPositionUtils.getColumnVisibleChild(r,i),u=!1;return a<0&&(a=0,l=r,u=!0),a>=s?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):void 0!==c&&(this.currentHeaderRowWithoutSpan=c),!(!u&&!l)&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:n})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const i=this.focusService.getFocusedHeader(),r=2===e,s=this.gos.get("enableRtl");let o,a;if(-1!==this.currentHeaderRowWithoutSpan?i.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=i.headerRowIndex,r!==s?(a="Before",o=this.headerPositionUtils.findHeader(i,a)):(a="After",o=this.headerPositionUtils.findHeader(i,a)),o||!t)return this.focusService.focusHeaderPosition({headerPosition:o,direction:a,fromTab:t,allowUserOverride:!0,event:n});if(t){const e=this.gos.getCallback("tabToNextHeader");if(e)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:e,headerPosition:o,direction:a})}return this.focusNextHeaderRow(i,a,n)}focusNextHeaderRow(e,t,n){const i=e.headerRowIndex;let r,s=null;if("Before"===t?i>0&&(r=i-1,this.currentHeaderRowWithoutSpan-=1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"end")):(r=i+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),s=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"start")),!s)return!1;const{column:o,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(s.column,null==s?void 0:s.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"After";if(!e.getPinned()){if(e instanceof kR){const i=e.getDisplayedLeafColumns();t="Before"===n?tR(i):i[0]}else t=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(t)}}};WT([F_("focusService")],kO.prototype,"focusService",2),WT([F_("headerPositionUtils")],kO.prototype,"headerPositionUtils",2),WT([F_("ctrlsService")],kO.prototype,"ctrlsService",2),WT([k_],kO.prototype,"postConstruct",1),kO=WT([L_("headerNavigationService")],kO);var OO=class extends MR{setComp(e,t,n){this.comp=e,this.eGui=t,this.createManagedBean(new iI(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight();const i=this.onHeaderContextMenu.bind(this);this.addManagedListener(this.eGui,"contextmenu",i),this.mockContextMenuForIPad(i),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,e),this.addManagedListener(this.eventService,OR.EVENT_GRID_STYLES_CHANGED,e),this.addManagedListener(this.eventService,OR.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,e)}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:e}=this;let t,n=0,i=e.getHeaderRowCount();this.filterManager.hasFloatingFilters()&&(i++,n=1);const r=this.columnModel.getColumnGroupHeaderRowHeight(),s=this.columnModel.getColumnHeaderRowHeight(),o=i-(1+n);if(t=n*e.getFloatingFiltersHeight(),t+=o*r,t+=s,this.headerHeight===t)return;this.headerHeight=t;const a="".concat(t+1,"px");this.comp.setHeightAndMinHeight(a),this.eventService.dispatchEvent({type:OR.EVENT_HEADER_HEIGHT_CHANGED})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const e=this.columnModel.getAllDisplayedColumns().some((e=>e.isSpanHeaderHeight()));this.comp.addOrRemoveCssClass("ag-header-allow-overflow",e)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),n=e.shiftKey!==t?2:3;(this.headerNavigationService.navigateHorizontally(n,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case SP.LEFT:t=2;case SP.RIGHT:YT(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e);break;case SP.UP:t=0;case SP.DOWN:YT(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const{relatedTarget:t}=e;!t&&this.eGui.contains(this.gos.getActiveDomElement())||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,n){if(!e&&!n||!this.menuService.isHeaderContextMenuEnabled())return;const{target:i}=null!=e?e:t;i!==this.eGui&&i!==this.ctrlsService.getHeaderRowContainerCtrl().getViewport()||this.menuService.showHeaderContextMenu(void 0,e,n)}mockContextMenuForIPad(e){if(!rM())return;const t=new zI(this.eGui);this.addManagedListener(t,zI.EVENT_LONG_TAP,(t=>{e(void 0,t.touchStart,t.touchEvent)})),this.addDestroyFunc((()=>t.destroy()))}};WT([F_("headerNavigationService")],OO.prototype,"headerNavigationService",2),WT([F_("focusService")],OO.prototype,"focusService",2),WT([F_("columnModel")],OO.prototype,"columnModel",2),WT([F_("ctrlsService")],OO.prototype,"ctrlsService",2),WT([F_("filterManager")],OO.prototype,"filterManager",2),WT([F_("menuService")],OO.prototype,"menuService",2);var LO=class e extends XP{constructor(){super(e.TEMPLATE)}postConstruct(){const e={addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setHeightAndMinHeight:e=>{this.getGui().style.height=e,this.getGui().style.minHeight=e}};this.createManagedBean(new OO).setComp(e,this.getGui(),this.getFocusableElement());const t=e=>{this.createManagedBean(e),this.appendChild(e)};t(new NO("left")),t(new NO(null)),t(new NO("right"))}};LO.TEMPLATE='<div class="ag-header" role="presentation"/>',WT([k_],LO.prototype,"postConstruct",1);var FO=LO,BO=class extends MR{addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};this.dragService.addDragSource(t);return()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const n=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(n)}setResizeIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e,t){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}};WT([F_("dragService")],BO.prototype,"dragService",2),WT([F_("ctrlsService")],BO.prototype,"ctrlsService",2),BO=WT([L_("horizontalResizeService")],BO);var VO=class extends MR{hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,n){this.showPopup(e,(i=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:n,mouseEvent:t,ePopup:i})}),n,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,n){let i=-1,r="left";const s=this.menuService.isLegacyMenuEnabled();!s&&this.gos.get("enableRtl")&&(i=1,r="right");let o=s?void 0:4*i,a=s?void 0:4;this.showPopup(e,(i=>{this.popupService.positionPopupByComponent({type:n,eventSource:t,ePopup:i,nudgeX:o,nudgeY:a,alignSide:r,keepWithinBounds:!0,position:"under",column:e})}),n,t,s)}showPopup(e,t,n,i,r){const s=e?this.createBean(new fk(e,"COLUMN_MENU")):void 0;if(this.activeMenu=s,!(null==s?void 0:s.hasFilter())||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const o=document.createElement("div");let a;pD(o,"presentation"),o.classList.add("ag-menu"),r||o.classList.add("ag-filter-menu"),this.tabListener=this.addManagedListener(o,"keydown",(e=>this.trapFocusWithin(e,o))),o.appendChild(null==s?void 0:s.getGui());const l=this.menuService.isColumnMenuAnchoringEnabled()?null!=i?i:this.ctrlsService.getGridBodyCtrl().getGui():void 0,c=this.localeService.getLocaleTextFunc(),u=r&&"columnFilter"!==n?c("ariaLabelColumnMenu","Column Menu"):c("ariaLabelColumnFilter","Column Filter"),d=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:t=>{e.setMenuVisible(!1,"contextMenu");const r=t instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),r&&i&&KM(i)){const e=this.focusService.findTabbableParent(i);e&&e.focus()}null==s||s.afterGuiDetached(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,e)},positionCallback:()=>t(o),anchorToElement:l,ariaLabel:u});d&&(this.hidePopup=a=d.hideFunc),s.afterInit().then((()=>{t(o),s.afterGuiAttached({container:n,hidePopup:a})})),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,e)}trapFocusWithin(e,t){e.key!==SP.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,n){const i={type:OR.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:e,switchingTab:!1,key:t,column:null!=n?n:null};this.eventService.dispatchEvent(i)}isMenuEnabled(e){var t;return e.isFilterAllowed()&&(null!=(t=e.getColDef().menuTabs)?t:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}};WT([F_("filterManager")],VO.prototype,"filterManager",2),WT([F_("popupService")],VO.prototype,"popupService",2),WT([F_("focusService")],VO.prototype,"focusService",2),WT([F_("ctrlsService")],VO.prototype,"ctrlsService",2),WT([F_("menuService")],VO.prototype,"menuService",2),VO=WT([L_("filterMenuFactory")],VO);var GO=(e=>(e.TAB_GUARD="ag-tab-guard",e.TAB_GUARD_TOP="ag-tab-guard-top",e.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",e))(GO||{}),HO=class extends MR{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1;const{comp:t,eTopGuard:n,eBottomGuard:i,focusTrapActive:r,forceFocusOutWhenTabGuardsAreEmpty:s,focusInnerElement:o,onFocusIn:a,onFocusOut:l,shouldStopEventPropagation:c,onTabKeyDown:u,handleKeyDown:d,eFocusableElement:h}=e;this.comp=t,this.eTopGuard=n,this.eBottomGuard=i,this.providedFocusInnerElement=o,this.eFocusableElement=h,this.focusTrapActive=!!r,this.forceFocusOutWhenTabGuardsAreEmpty=!!s,this.providedFocusIn=a,this.providedFocusOut=l,this.providedShouldStopEventPropagation=c,this.providedOnTabKeyDown=u,this.providedHandleKeyDown=d}postConstruct(){this.createManagedBean(new iI(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach((e=>this.addManagedListener(e,"focus",this.onFocus.bind(this))))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.skipTabGuardFocus)return void(this.skipTabGuardFocus=!1);if(this.forceFocusOutWhenTabGuardsAreEmpty){if(0===this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){const t=this.gos.getDocument(),n=this.focusService.findFocusableElements(t.body,null,!0),i=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===i)return;let r,s;e?(r=0,s=i):(r=i+1,s=n.length);const o=n.slice(r,s),a=this.gos.get("tabIndex");o.sort(((e,t)=>{const n=parseInt(e.getAttribute("tabindex")||"0"),i=parseInt(t.getAttribute("tabindex")||"0");return i===a?1:n===a?-1:0===n?1:0===i?-1:n-i})),o[e?o.length-1:0].focus()}onFocusIn(e){this.focusTrapActive||(this.providedFocusIn&&this.providedFocusIn(e),this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive)return;if(e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout((()=>this.activateTabGuards()),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout((()=>{this.forcingFocusOut=!1,this.activateTabGuards()}))}isTabGuard(e){return e===this.eTopGuard||e===this.eBottomGuard}};WT([F_("focusService")],HO.prototype,"focusService",2),WT([k_],HO.prototype,"postConstruct",1);var WO=class extends XP{initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();const t=[this.eTopGuard,this.eBottomGuard],n={setTabIndex:e=>{t.forEach((t=>null!=e?t.setAttribute("tabindex",e):t.removeAttribute("tabindex")))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new HO({comp:n,focusTrapActive:!!e.focusTrapActive,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty:e.forceFocusOutWhenTabGuardsAreEmpty}))}createTabGuard(e){const t=document.createElement("div"),n="top"===e?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",n),pD(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];zM(this.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t){aP(e)||(e=e.getGui());const{eBottomGuard:n}=this;n?n.insertAdjacentElement("beforebegin",e):super.appendChild(e,t)}},jO=class e extends WO{constructor(t){super(e.getTemplate(t.cssClass)),this.items=[],this.tabbedItemScrollMap=new Map,this.params=t}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach((e=>this.addItem(e))),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc((()=>{var e,t,n;return null==(n=null==(t=null==(e=this.activeItem)?void 0:e.tabbedItem)?void 0:t.afterDetachedCallback)?void 0:n.call(t)}))}static getTemplate(e){return'<div class="ag-tabs '.concat(e,'">\n            <div ref="eHeader"></div>\n            <div ref="eBody" role="presentation" class="ag-tabs-body ').concat(e?"".concat(e,"-body"):"",'"></div>\n        </div>')}setupHeader(){const{enableCloseButton:e,cssClass:t}=this.params,n=(e,n)=>{e.classList.add("ag-tabs-".concat(n)),t&&e.classList.add("".concat(t,"-").concat(n))};e?(this.setupCloseButton(n),this.eTabHeader=this.gos.getDocument().createElement("div"),n(this.eHeader,"header-wrapper"),pD(this.eHeader,"presentation"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,pD(this.eTabHeader,"tablist"),n(this.eTabHeader,"header")}setupCloseButton(e){const t=this.gos.getDocument(),n=t.createElement("button");e(n,"close-button");const i=wP("close",this.gos,void 0,!0);yD(n,this.params.closeButtonAriaLabel),n.appendChild(i),this.addManagedListener(n,"click",(()=>{var e,t;return null==(t=(e=this.params).onCloseClicked)?void 0:t.call(e)}));const r=t.createElement("div");e(r,"close-button-wrapper"),pD(r,"presentation"),r.appendChild(n),this.eHeader.appendChild(r),this.eCloseButton=n}handleKeyDown(e){switch(e.key){case SP.RIGHT:case SP.LEFT:if(!this.eTabHeader.contains(this.gos.getActiveDomElement()))return;const t=e.key===SP.RIGHT,n=this.gos.get("enableRtl"),i=this.items.indexOf(this.activeItem),r=t!==n?Math.min(i+1,this.items.length-1):Math.max(i-1,0);if(i===r)return;e.preventDefault();const s=this.items[r];this.showItemWrapper(s),s.eHeaderButton.focus();break;case SP.UP:case SP.DOWN:e.stopPropagation()}}onTabKeyDown(e){var t,n,i,r;if(e.defaultPrevented)return;const{focusService:s,eHeader:o,eBody:a,activeItem:l,params:c}=this,{suppressTrapFocus:u,enableCloseButton:d}=c,h=this.gos.getActiveDomElement(),p=e.target,g=e.shiftKey;if(o.contains(h))return e.preventDefault(),void(d&&g&&!(null==(t=this.eCloseButton)?void 0:t.contains(h))?null==(n=this.eCloseButton)||n.focus():u&&g?null==(i=this.focusService.findFocusableElementBeforeTabGuard(this.gos.getDocument().body,p))||i.focus():this.focusBody(e.shiftKey));let f=null;if(s.isTargetUnderManagedComponent(a,p)&&(g&&(f=this.focusService.findFocusableElementBeforeTabGuard(a,p)),f||u||(f=l.eHeaderButton)),!f&&a.contains(h)&&(f=s.findNextFocusableElement(a,!1,g),!f))return e.preventDefault(),void(u&&!g?this.forceFocusOutOfContainer(g):d&&!g?null==(r=this.eCloseButton)||r.focus():this.focusHeader());f&&(e.preventDefault(),f.focus())}focusInnerElement(e){e?this.focusHeader():this.focusBody(!0)}focusHeader(e){this.activeItem.eHeaderButton.focus({preventScroll:e})}focusBody(e){this.focusService.focusInto(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){const t=document.createElement("span");pD(t,"tab"),t.setAttribute("tabindex","-1"),t.appendChild(e.title),t.classList.add("ag-tab"),this.eTabHeader.appendChild(t),yD(t,e.titleLabel);const n={tabbedItem:e,eHeaderButton:t};this.items.push(n),t.addEventListener("click",this.showItemWrapper.bind(this,n))}showItem(e){const t=this.items.find((t=>t.tabbedItem===e));t&&this.showItemWrapper(t)}showItemWrapper(e){var t,n,i,r,s,o;const{tabbedItem:a,eHeaderButton:l}=e;null==(n=(t=this.params).onItemClicked)||n.call(t,{item:a}),this.activeItem!==e?(this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),zM(this.eBody),a.bodyPromise.then((e=>{this.eBody.appendChild(e);const t=!this.focusService.isKeyboardMode();if(this.params.suppressFocusBodyOnOpen||this.focusService.focusInto(this.eBody,!1,t),a.afterAttachedCallback&&a.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){const t=a.getScrollableContainer&&a.getScrollableContainer()||e;this.lastScrollListener=this.addManagedListener(t,"scroll",(()=>{this.tabbedItemScrollMap.set(a.name,t.scrollTop)}));const n=this.tabbedItemScrollMap.get(a.name);void 0!==n&&setTimeout((()=>{t.scrollTop=n}),0)}})),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),null==(o=(s=this.activeItem.tabbedItem).afterDetachedCallback)||o.call(s)),l.classList.add("ag-tab-selected"),this.activeItem=e):null==(r=(i=this.params).onActiveItemClicked)||r.call(i)}};WT([F_("focusService")],jO.prototype,"focusService",2),WT([QP("eHeader")],jO.prototype,"eHeader",2),WT([QP("eBody")],jO.prototype,"eBody",2),WT([k_],jO.prototype,"postConstruct",1);var UO=class extends MR{constructor(){super(...arguments),this.polyfillFunctions=[]}observeResize(e,t){const n=this.gos.getWindow(),i=()=>{var n,i;let r=null!=(n=null==e?void 0:e.clientWidth)?n:0,s=null!=(i=null==e?void 0:e.clientHeight)?i:0,o=!0;const a=()=>{var n,i;if(o){const o=null!=(n=null==e?void 0:e.clientWidth)?n:0,l=null!=(i=null==e?void 0:e.clientHeight)?i:0;(o!==r||l!==s)&&(r=o,s=l,t()),this.doNextPolyfillTurn(a)}};return a(),()=>o=!1},r=this.gos.get("suppressBrowserResizeObserver");return!!n.ResizeObserver&&!r?(()=>{const i=new n.ResizeObserver(t);return i.observe(e),()=>i.disconnect()})():this.getFrameworkOverrides().wrapIncoming((()=>i()),"resize-observer")}doNextPolyfillTurn(e){this.polyfillFunctions.push(e),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;this.polyfillScheduled=!0,window.setTimeout((()=>{const e=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],e.forEach((e=>e()))}),50)}};UO=WT([L_("resizeObserverService")],UO);var zO=class extends MR{constructor(){super(...arguments),this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(e){const t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&0===e){const e=this.paginationProxy.getCurrentPage();e!==this.lastPage&&(this.lastPage=e,this.scrollGoingDown=!0)}this.lastScrollTop=e}init(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){!1===this.useAnimationFrame&&console.warn("AG Grid: AnimationFrameService.".concat(e," called but animation frames are off"))}createTask(e,t,n){this.verifyAnimationFrameOn(n);const i={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[n],i),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort(((e,n)=>e.index!==n.index?t*(n.index-e.index):n.createOrder-e.createOrder)),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,n=t.list,i=this.createTasksP2,r=i.list,s=this.destroyTasks,o=(new Date).getTime();let a=(new Date).getTime()-o;const l=e<=0,c=this.ctrlsService.getGridBodyCtrl();for(;l||a<e;){if(!c.getScrollFeature().scrollGridIfNeeded()){let e;if(n.length)this.sortTaskList(t),e=n.pop().task;else if(r.length)this.sortTaskList(i),e=r.pop().task;else{if(!s.length){this.cancelledTasks.clear();break}e=s.pop()}this.cancelledTasks.has(e)||e()}a=(new Date).getTime()-o}n.length||r.length||s.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=this.gos.getWindow();t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{this.isOn()?t||(t=!0,this.addDestroyTask((()=>{t=!1,e()}))):window.setTimeout(e,0)}}};WT([F_("ctrlsService")],zO.prototype,"ctrlsService",2),WT([F_("paginationProxy")],zO.prototype,"paginationProxy",2),WT([k_],zO.prototype,"init",1),zO=WT([L_("animationFrameService")],zO);var YO=class extends MR{postConstruct(){this.isClientSideRowModel="clientSide"===this.rowModel.getType()}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode((e=>{e.id&&t.has(e.id)&&(e.expanded=!0)})),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode((t=>{let{expanded:n,id:i}=t;n&&i&&e.push(i)})),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,n,i){e&&(n&&e.parent&&-1!==e.parent.level&&this.setRowNodeExpanded(e.parent,t,n,i),e.setExpanded(t,void 0,i))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}};WT([F_("rowModel")],YO.prototype,"rowModel",2),WT([k_],YO.prototype,"postConstruct",1),YO=WT([L_("expansionService")],YO);var qO=class extends MR{postConstruct(){var e;this.activeMenuFactory=null!=(e=this.enterpriseMenuFactory)?e:this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,n){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,n)}getContextMenuPosition(e,t){const n=this.getRowCtrl(e),i=this.getCellGui(n,t);if(!i)return n?{x:0,y:n.getRowYPosition()}:{x:0,y:0};const r=i.getBoundingClientRect();return{x:r.x+r.width/2,y:r.y+r.height/2}}showContextMenu(e){var t,n,i;const{column:r,rowNode:s}=e;let{anchorToElement:o,value:a}=e;s&&r&&null==a&&(a=s.getValueFromValueService(r)),null==o&&(o=this.getContextMenuAnchorElement(s,r)),null==(i=this.contextMenuFactory)||i.onContextMenu(null!=(t=e.mouseEvent)?t:null,null!=(n=e.touchEvent)?n:null,null!=s?s:null,null!=r?r:null,a,o)}showColumnChooser(e){var t;null==(t=this.columnChooserFactory)||t.showColumnChooser(e)}hidePopupMenu(){var e;null==(e=this.contextMenuFactory)||e.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var e;null==(e=this.columnChooserFactory)||e.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:n}=e.getColDef();return!(null!=n?n:t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&this.filterManager.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(null==e?void 0:e.getColDef().suppressHeaderContextMenu)&&"new"===this.getColumnMenuType()}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(rM()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return this.filterManager.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return"new"===this.getColumnMenuType()}isLegacyMenuEnabled(){return"legacy"===this.getColumnMenuType()}isFloatingFilterButtonEnabled(e){var t;const n=e.getColDef(),i=null==(t=n.floatingFilterComponentParams)?void 0:t.suppressFilterButton;return null!=i&&f_("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),null==n.suppressFloatingFilterButton?!i:!n.suppressFloatingFilterButton}getColumnMenuType(){var e;return null!=(e=this.gos.get("columnMenu"))?e:"legacy"}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?e:!this.gos.exists("suppressMenuHide")||e}showColumnMenuCommon(e,t,n,i){const{column:r,positionBy:s}=t;if("button"===s){const{buttonElement:s}=t;e.showMenuAfterButtonClick(r,s,n,i)}else if("mouse"===s){const{mouseEvent:s}=t;e.showMenuAfterMouseEvent(r,s,n,i)}else r&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(r,"auto"),this.animationFrameService.requestAnimationFrame((()=>{const t=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()).getHeaderCtrlForColumn(r);e.showMenuAfterButtonClick(r,t.getAnchorElementForMenu(i),n,!0)})))}getRowCtrl(e){const{rowIndex:t,rowPinned:n}=e||{};if(null!=t)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n})||void 0}getCellGui(e,t){if(!e||!t)return;const n=e.getCellCtrl(t);return(null==n?void 0:n.getGui())||void 0}getContextMenuAnchorElement(e,t){const n=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),i=this.getRowCtrl(e);if(!i)return n;const r=this.getCellGui(i,t);return r||(i.isFullWidth()?i.getFullWidthElement():n)}};WT([F_("filterMenuFactory")],qO.prototype,"filterMenuFactory",2),WT([F_("ctrlsService")],qO.prototype,"ctrlsService",2),WT([F_("animationFrameService")],qO.prototype,"animationFrameService",2),WT([F_("filterManager")],qO.prototype,"filterManager",2),WT([F_("rowRenderer")],qO.prototype,"rowRenderer",2),WT([B_("columnChooserFactory")],qO.prototype,"columnChooserFactory",2),WT([B_("contextMenuFactory")],qO.prototype,"contextMenuFactory",2),WT([B_("enterpriseMenuFactory")],qO.prototype,"enterpriseMenuFactory",2),WT([k_],qO.prototype,"postConstruct",1),qO=WT([L_("menuService")],qO);var KO=class extends MR{postConstruct(){this.ctrlsService.whenReady((e=>{this.centerRowContainerCtrl=e.center}))}getPreferredWidthForColumn(e,t){const n=this.getHeaderCellForColumn(e);if(!n)return-1;const i=this.rowRenderer.getAllCellsForColumn(e);return t||i.push(n),this.addElementsToContainerAndGetWidth(i)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const n=this.centerRowContainerCtrl.getContainerElement();e.forEach((e=>this.cloneItemIntoDummy(e,t))),n.appendChild(t);const i=t.offsetWidth;n.removeChild(t);return i+this.getAutoSizePadding()}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach((n=>{const i=n.getHtmlElementForColumnHeader(e);null!=i&&(t=i)})),t}cloneItemIntoDummy(e,t){const n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";const i=document.createElement("div"),r=i.classList;["ag-header-cell","ag-header-group-cell"].some((e=>n.classList.contains(e)))?(r.add("ag-header","ag-header-row"),i.style.position="static"):r.add("ag-row");let s=e.parentElement;for(;s;){if(["ag-header-row","ag-row"].some((e=>s.classList.contains(e)))){for(let e=0;e<s.classList.length;e++){const t=s.classList[e];"ag-row-position-absolute"!=t&&r.add(t)}break}s=s.parentElement}i.appendChild(n),t.appendChild(i)}};WT([F_("rowRenderer")],KO.prototype,"rowRenderer",2),WT([F_("ctrlsService")],KO.prototype,"ctrlsService",2),WT([F_("rowCssClassCalculator")],KO.prototype,"rowCssClassCalculator",2),WT([k_],KO.prototype,"postConstruct",1),KO=WT([L_("autoWidthCalculator")],KO);var XO=class extends MR{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.topContainerHeight=0,this.bottomContainerHeight=0}postConstruct(){this.isClientSide="clientSide"===this.rowModel.getType(),this.ctrlsService.whenReady((e=>{this.gridBodyCtrl=e.gridBodyCtrl}))}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){var t,n,i,r;if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){let s=null==(t=e.childStore)?void 0:t.getStoreBounds();return e.footer&&(s=null==(n=e.sibling.childStore)?void 0:n.getStoreBounds()),(null!=(i=null==s?void 0:s.heightPx)?i:0)+(null!=(r=null==s?void 0:s.topPx)?r:0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){const t=e.footer&&0===e.rowIndex,n=!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex);if(t||n){let t=e.footer?e.sibling:e;for(;t.isExpandable()&&t.expanded;)if(t.master)t=t.detailNode;else if(t.childrenAfterSort){if(0===t.childrenAfterSort.length)break;t=tR(t.childrenAfterSort)}return t.rowTop+t.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){const t="top"===e;let n=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,n);const i=t?this.rowRenderer.getFirstVisibleVerticalPixel():this.rowRenderer.getLastVisibleVerticalPixel(),r=new Set,s=e=>{if(r.add(e),t){const t=this.getLastPixelOfGroup(e),r=i+n+e.rowHeight;e.stickyRowTop=t<r?n+(t-r):n}else{const t=this.getFirstPixelOfGroup(e),r=i-(n+e.rowHeight);e.stickyRowTop=t>r?n-(t-r):n}n=0,r.forEach((e=>{const t=e.stickyRowTop+e.rowHeight;n<t&&(n=t)}))},o=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=e=>{if(!e.displayed)return!1;if(e.footer){if(!0===o)return!1;if("grand"===o&&-1===e.level)return!1;if("group"===o&&e.level>-1)return!1;return!r.has(e)}if(e.isExpandable()){if(!0===a)return!1;return!r.has(e)&&e.expanded}return!1};for(let c=0;c<100;c++){let e=i+n;t||(e=i-n);const r=this.rowModel.getRowIndexAtPixel(e),o=this.rowModel.getRow(r);if(null==o)break;const a=this.getStickyAncestors(o).find((e=>(t?e.rowIndex<r:e.rowIndex>r)&&l(e)));if(a){s(a);continue}if(!(t?o.rowTop<e:o.rowTop+o.rowHeight>e)||!l(o))break;s(o)}return t||r.forEach((e=>{e.stickyRowTop=n-(e.stickyRowTop+e.rowHeight)})),this.refreshNodesAndContainerHeight(e,r,n)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(!0===e)return!0;const t=!!this.gos.get("groupIncludeFooter")||"group"===e,n=!!this.gos.get("groupIncludeTotalFooter")||"grand"===e;return!(!t||!n)||(n?"grand":!!t&&"group")}canRowsBeSticky(){const e=this.gos.isGroupRowsSticky(),t=this.areFooterRowsStickySuppressed(),n=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!n)}getStickyAncestors(e){const t=[];let n=e.footer?e.sibling:e.parent;for(;n;)n.sibling&&t.push(n.sibling),t.push(n),n=n.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some((t=>t.getRowNode()===e))){for(let n=0;n<this.stickyTopRowCtrls.length;n++){const i=this.stickyTopRowCtrls[n].getRowNode();i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows()}else{for(let n=0;n<this.stickyBottomRowCtrls.length;n++){const i=this.stickyBottomRowCtrls[n].getRowNode();i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}}refreshNodesAndContainerHeight(e,t,n){const i="top"===e,r=i?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,s={},o=[];for(let d=0;d<r.length;d++){const e=r[d].getRowNode();!t.has(e)?(s[e.id]=r[d],e.sticky=!1):o.push(r[d])}const a=new Set;for(let d=0;d<o.length;d++)a.add(o[d].getRowNode());const l=[];t.forEach((e=>{a.has(e)||(e.sticky=!0,l.push(this.createRowCon(e,!1,!1)))}));let c=!!l.length||o.length!==r.length;i?this.topContainerHeight!==n&&(this.topContainerHeight=n,this.gridBodyCtrl.setStickyTopHeight(n),c=!0):this.bottomContainerHeight!==n&&(this.bottomContainerHeight=n,this.gridBodyCtrl.setStickyBottomHeight(n),c=!0),this.destroyRowCtrls(s,!1);const u=[...o,...l];return u.sort(((e,t)=>t.getRowNode().rowIndex-e.getRowNode().rowIndex)),i||u.reverse(),u.forEach((e=>e.setRowTop(e.getRowNode().stickyRowTop))),!!c&&(i?this.stickyTopRowCtrls=u:this.stickyBottomRowCtrls=u,!0)}};WT([F_("rowModel")],XO.prototype,"rowModel",2),WT([F_("rowRenderer")],XO.prototype,"rowRenderer",2),WT([F_("ctrlsService")],XO.prototype,"ctrlsService",2),WT([k_],XO.prototype,"postConstruct",1);var QO=class extends MR{constructor(){super(...arguments),this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach((e=>e.onRangeSelectionChanged()))},t=()=>{this.getAllCellCtrls().forEach((e=>e.updateRangeBordersIfRangeCount()))},n=()=>{this.eventService.addEventListener(OR.EVENT_RANGE_SELECTION_CHANGED,e),this.eventService.addEventListener(OR.EVENT_COLUMN_MOVED,t),this.eventService.addEventListener(OR.EVENT_COLUMN_PINNED,t),this.eventService.addEventListener(OR.EVENT_COLUMN_VISIBLE,t)},i=()=>{this.eventService.removeEventListener(OR.EVENT_RANGE_SELECTION_CHANGED,e),this.eventService.removeEventListener(OR.EVENT_COLUMN_MOVED,t),this.eventService.removeEventListener(OR.EVENT_COLUMN_PINNED,t),this.eventService.removeEventListener(OR.EVENT_COLUMN_VISIBLE,t)};this.addDestroyFunc((()=>i())),this.addManagedPropertyListener("enableRangeSelection",(e=>{e.currentValue?n():i()}));this.gos.get("enableRangeSelection")&&n()}}postConstruct(){this.ctrlsService.whenReady((e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()}))}initialise(){if(this.addManagedListener(this.eventService,OR.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],(()=>this.onDomLayoutChanged())),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],(()=>this.redraw())),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],(()=>this.redrawRows())),this.gos.isGroupRowsSticky()){const e=this.rowModel.getType();"clientSide"!==e&&"serverSide"!==e||(this.stickyRowFeature=this.createManagedBean(new XO(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gos.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=null!=e?e:3;this.cachedRowCtrls=new ZO(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const e=a_(this.rowCtrlsByRowIndex),t=a_(this.zombieRowCtrls),n=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach((t=>t.onCellFocused(e))),this.getFullWidthRowCtrls().forEach((t=>t.onFullWidthRowFocused(e)))}registerCellEventListeners(){this.addManagedListener(this.eventService,OR.EVENT_CELL_FOCUSED,(e=>{this.onCellFocusChanged(e)})),this.addManagedListener(this.eventService,OR.EVENT_CELL_FOCUS_CLEARED,(()=>{this.onCellFocusChanged()})),this.addManagedListener(this.eventService,OR.EVENT_FLASH_CELLS,(e=>{this.getAllCellCtrls().forEach((t=>t.onFlashCells(e)))})),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_HOVER_CHANGED,(()=>{this.getAllCellCtrls().forEach((e=>e.onColumnHover()))})),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,(()=>{this.getAllCellCtrls().forEach((e=>e.onDisplayedColumnsChanged()))})),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,(()=>{this.printLayout&&this.getAllCellCtrls().forEach((e=>e.onLeftChanged()))})),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,OR.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach((e=>e())),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();this.columnModel.getAllGridColumns().forEach((e=>{const t=t=>{this.getAllCellCtrls().forEach((n=>{n.getColumn()===e&&t(n)}))},n=()=>{t((e=>e.onLeftChanged()))},i=()=>{t((e=>e.onWidthChanged()))},r=()=>{t((e=>e.onFirstRightPinnedChanged()))},s=()=>{t((e=>e.onLastLeftPinnedChanged()))},o=()=>{t((e=>e.onColDefChanged()))};e.addEventListener("leftChanged",n),e.addEventListener("widthChanged",i),e.addEventListener("firstRightPinnedChanged",r),e.addEventListener("lastLeftPinnedChanged",s),e.addEventListener("colDefChanged",o),this.destroyFuncsForColumnListeners.push((()=>{e.removeEventListener("leftChanged",n),e.removeEventListener("widthChanged",i),e.removeEventListener("firstRightPinnedChanged",r),e.removeEventListener("lastLeftPinnedChanged",s),e.removeEventListener("colDefChanged",o)}))}))}onDomLayoutChanged(){const e=this.gos.isDomLayout("print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach((n=>{const i=n.getCellElement(e);i&&t.push(i)})),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){e.forEach((e=>{e.destroyFirstPass(),e.destroySecondPass()})),e.length=0,t&&t.forEach((t=>{const n=new Fk(t,this.beans,!1,!1,this.printLayout);e.push(n)}))}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else{if(null==(n=this.cachedRowCtrls)?void 0:n.has(e))return void this.cachedRowCtrls.removeRow(e);{const t=t=>{const n=t[e.rowIndex];n&&n.getRowNode()===e&&(n.destroyFirstPass(),n.destroySecondPass(),t[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":t(this.topRowCtrls);break;case"bottom":t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(null!=e)return null==e||e.forEach((e=>this.redrawRow(e,!0))),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=(null==e?void 0:e.suppressKeepFocus)?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==t)return null;const n=this.gos.getActiveDomElement(),i=this.gos.getDomData(n,kk.DOM_DATA_KEY_CELL_CTRL),r=this.gos.getDomData(n,Fk.DOM_DATA_KEY_ROW_CTRL);return i||r?t:null}redrawAfterModelUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const n=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&this.gos.isAnimateRows(),r=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(r,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=t&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,n=this.gos.get("suppressScrollOnNewData");t&&!n&&this.gridBodyCtrl.getScrollFeature().scrollToTop()}updateContainerHeights(){if(this.printLayout)return void this.rowContainerHeightService.setModelHeight(null);let e=this.paginationProxy.getCurrentPageHeight();0===e&&(e=1),this.rowContainerHeightService.setModelHeight(e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0}releaseLockOnRefresh(){this.refreshInProgress=!1}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&(this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged(this.beans.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"mock"})))}stopEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getAllRowCtrls().forEach((t=>{t.stopEditing(e)}))}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),n=t.length;for(let i=0;i<n;i++){const n=t[i].getAllCellCtrls(),r=n.length;for(let t=0;t<r;t++)e.push(n[t])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],n=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(const i in this.rowCtrlsByRowIndex)n.push(this.rowCtrlsByRowIndex[i]);return n}addRenderedRowListener(e,t,n){const i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,n)}flashCells(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getCellCtrls(e.rowNodes,e.columns).forEach((t=>t.flashCell(e)))}refreshCells(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach((e=>e.refreshOrDestroyCell(t))),e.rowNodes&&(this.getRowCtrls(e.rowNodes).forEach((e=>{if(!e.isFullWidth())return;e.refreshFullWidth()||this.redrawRow(e.getRowNode(),!0)})),this.dispatchDisplayedRowsChanged(!1))}getCellRendererInstances(e){var t;const n=this.getCellCtrls(e.rowNodes,e.columns).map((e=>e.getCellRenderer())).filter((e=>null!=e));if(null==(t=e.columns)?void 0:t.length)return n;const i=[],r=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach((e=>{if(r&&!this.isRowInMap(e.getRowNode(),r))return;if(!e.isFullWidth())return;const t=e.getFullWidthCellRenderers();for(let n=0;n<t.length;n++){const e=t[n];null!=e&&i.push(e)}})),[...i,...n]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach((e=>{const n=e.getCellEditor();n&&t.push(n)})),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach((t=>{if(t.isEditing()){const n=t.getCellPosition();e.push(n)}})),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach((e=>{const n=e.id;switch(e.rowPinned){case"top":t.top[n]=e;break;case"bottom":t.bottom[n]=e;break;default:t.normal[n]=e}})),t}isRowInMap(e,t){const n=e.id;switch(e.rowPinned){case"top":return null!=t.top[n];case"bottom":return null!=t.bottom[n];default:return null!=t.normal[n]}}getRowCtrls(e){const t=this.mapRowNodes(e),n=this.getAllRowCtrls();return e&&t?n.filter((e=>{const n=e.getRowNode();return this.isRowInMap(n,t)})):n}getCellCtrls(e,t){let n;YT(t)&&(n={},t.forEach((e=>{const t=this.columnModel.getGridColumn(e);YT(t)&&(n[t.getId()]=!0)})));const i=[];return this.getRowCtrls(e).forEach((e=>{e.getAllCellCtrls().forEach((e=>{const t=e.getColumn().getId();n&&!n[t]||i.push(e)}))})),i}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const e=[];r_(this.rowCtrlsByRowIndex,((t,n)=>{null==n.getRowNode().id&&e.push(t)})),this.removeRowCtrls(e);const t={};return r_(this.rowCtrlsByRowIndex,((e,n)=>{const i=n.getRowNode();t[i.id]=n})),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.forEach((e=>{const n=this.rowCtrlsByRowIndex[e];n&&(n.destroyFirstPass(t),n.destroySecondPass()),delete this.rowCtrlsByRowIndex[e]}))}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{afterScroll:t}=e;let n;this.stickyRowFeature&&sM()&&(n=this.getCellToRestoreFocusToAfterRefresh()||void 0);const i=this.firstRenderedRow,r=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let s=!1;this.stickyRowFeature&&(s=this.stickyRowFeature.checkStickyRows());const o=this.firstRenderedRow!==i||this.lastRenderedRow!==r;if((!t||s||o)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!s),null!=n)){const e=this.getCellToRestoreFocusToAfterRefresh();null!=n&&null==e&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(n))}}removeRowCompsNotToDraw(e,t){const n={};e.forEach((e=>n[e]=!0));const i=Object.keys(this.rowCtrlsByRowIndex).filter((e=>!n[e]));this.removeRowCtrls(i,t)}calculateIndexesToDraw(e){let t=mM(this.firstRenderedRow,this.lastRenderedRow);const n=(e,n)=>{const i=n.getRowNode().rowIndex;null!=i&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(n)&&t.push(i)};r_(this.rowCtrlsByRowIndex,n),r_(e,n),t.sort(((e,t)=>e-t));const i=[];for(let r=0;r<t.length;r++){const e=t[r],n=this.paginationProxy.getRow(e);n&&!n.sticky&&i.push(e)}return i}recycleRows(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.calculateIndexesToDraw(e);(this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(i,!t);const r=[];if(i.forEach((i=>{const s=this.createOrUpdateRowCtrl(i,e,t,n);YT(s)&&r.push(s)})),e){n&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask((()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t={type:OR.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){const e=this.columnModel.isPinningLeft(),t=this.columnModel.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach((t=>{const n=t.getRowNode().rowIndex;e.push(n.toString())})),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter((e=>{if(!e.isFullWidth())return!1;const n=e.getRowNode();return!(null!=t&&!this.isRowInMap(n,t))}))}createOrUpdateRowCtrl(e,t,n,i){let r,s=this.rowCtrlsByRowIndex[e];s||(r=this.paginationProxy.getRow(e),YT(r)&&YT(t)&&t[r.id]&&r.alreadyRendered&&(s=t[r.id],t[r.id]=null));if(!s){if(r||(r=this.paginationProxy.getRow(e)),!YT(r))return;s=this.createRowCon(r,n,i)}return r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=s,s}destroyRowCtrls(e,t){const n=[];r_(e,((e,i)=>{i&&(this.cachedRowCtrls&&i.isCacheable()?this.cachedRowCtrls.addRow(i):(i.destroyFirstPass(!t),t?(this.zombieRowCtrls[i.getInstanceId()]=i,n.push((()=>{i.destroySecondPass(),delete this.zombieRowCtrls[i.getInstanceId()]}))):i.destroySecondPass()))})),t&&(n.push((()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})),C_(n))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*this.gos.getRowHeightAsNumber()}workOutFirstAndLastRowsToRender(){let e,t;if(this.rowContainerHeightService.updateOffset(),this.paginationProxy.isRowsToRender())if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.paginationProxy.getPageFirstRow(),t=this.paginationProxy.getPageLastRow();else{const n=this.getRowBufferInPixels(),i=this.ctrlsService.getGridBodyCtrl(),r=this.gos.get("suppressRowVirtualisation");let s,o,a=!1;do{const e=this.paginationProxy.getPixelOffset(),{pageFirstPixel:t,pageLastPixel:l}=this.paginationProxy.getCurrentPagePixelRange(),c=this.rowContainerHeightService.getDivStretchOffset(),u=i.getScrollFeature().getVScrollPosition(),d=u.top,h=u.bottom;r?(s=t+c,o=l+c):(s=Math.max(d+e-n,t)+c,o=Math.min(h+e+n,l)+c),this.firstVisibleVPixel=Math.max(d+e,t)+c,this.lastVisibleVPixel=Math.min(h+e,l)+c,a=this.ensureAllRowsInRangeHaveHeightsCalculated(s,o)}while(a);let l=this.paginationProxy.getRowIndexAtPixel(s),c=this.paginationProxy.getRowIndexAtPixel(o);const u=this.paginationProxy.getPageFirstRow(),d=this.paginationProxy.getPageLastRow();l<u&&(l=u),c>d&&(c=d),e=l,t=c}else e=0,t=-1;const n=this.gos.isDomLayout("normal"),i=this.gos.get("suppressMaxRenderedRowRestriction"),r=Math.max(this.getRowBuffer(),500);n&&!i&&t-e>r&&(t=e+r);const s=e!==this.firstRenderedRow,o=t!==this.lastRenderedRow;if(s||o){this.firstRenderedRow=e,this.lastRenderedRow=t;const n={type:OR.EVENT_VIEWPORT_CHANGED,firstRow:e,lastRow:t};this.eventService.dispatchEvent(n)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;const e={type:OR.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame((()=>{this.beans.eventService.dispatchEvent(e)}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const n=this.paginationProxy.ensureRowHeightsValid(e,t,-1,-1);return n&&this.updateContainerHeights(),n}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const t=!1,n=e.getRowNode(),i=this.focusService.isRowNodeFocused(n),r=e.isEditing(),s=n.detail;if(!(i||r||s))return t;return!!this.paginationProxy.isRowPresent(n)||t}createRowCon(e,t,n){const i=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(i)return i;const r=this.gos.get("suppressAnimationFrame"),s=n&&!r&&!this.printLayout;return new Fk(e,this.beans,t,s,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.values(e).map((e=>e.getRowNode()))}getRowByPosition(e){let t;const{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find((e=>e.getRowNode().rowIndex===n))||null,t||(t=this.getStickyBottomRowCtrls().find((e=>e.getRowNode().rowIndex===n))||null))}return t}isRangeInRenderedViewport(e,t){if(null==e||null==t)return!1;const n=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!n}};WT([F_("animationFrameService")],QO.prototype,"animationFrameService",2),WT([F_("paginationProxy")],QO.prototype,"paginationProxy",2),WT([F_("columnModel")],QO.prototype,"columnModel",2),WT([F_("pinnedRowModel")],QO.prototype,"pinnedRowModel",2),WT([F_("rowModel")],QO.prototype,"rowModel",2),WT([F_("focusService")],QO.prototype,"focusService",2),WT([F_("beans")],QO.prototype,"beans",2),WT([F_("rowContainerHeightService")],QO.prototype,"rowContainerHeightService",2),WT([F_("ctrlsService")],QO.prototype,"ctrlsService",2),WT([k_],QO.prototype,"postConstruct",1),QO=WT([L_("rowRenderer")],QO);var ZO=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(e){if(null==e||null==e.id)return null;const t=this.entriesMap[e.id];if(!t)return null;this.removeFromCache(t),t.setCached(!1);return t.getRowNode()!=e?null:t}has(e){return null!=this.entriesMap[e.id]}removeRow(e){const t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],aR(this.entriesList,n)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],aR(this.entriesList,e)}getEntries(){return this.entriesList}},$O=class extends MR{init(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",(()=>this.setPinnedTopRowData())),this.addManagedPropertyListener("pinnedBottomRowData",(()=>this.setPinnedBottomRowData()))}isEmpty(e){return KT("top"===e?this.pinnedTopRows:this.pinnedBottomRows)}isRowsToRender(e){return!this.isEmpty(e)}getRowAtPixel(e,t){const n="top"===t?this.pinnedTopRows:this.pinnedBottomRows;if(KT(n))return 0;for(let i=0;i<n.length;i++){const t=n[i];if(t.rowTop+t.rowHeight-1>=e)return i}return n.length-1}setPinnedTopRowData(){const e=this.gos.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(e,!0);const t={type:OR.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)}setPinnedBottomRowData(){const e=this.gos.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(e,!1);const t={type:OR.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)}createNodesFromData(e,t){const n=[];if(e){let i=0;e.forEach(((e,r)=>{const s=new lN(this.beans);s.data=e;const o=t?lN.ID_PREFIX_TOP_PINNED:lN.ID_PREFIX_BOTTOM_PINNED;s.id=o+r,s.rowPinned=t?"top":"bottom",s.setRowTop(i),s.setRowHeight(this.gos.getRowHeightForNode(s).height),s.setRowIndex(r),i+=s.rowHeight,n.push(s)}))}return n}getPinnedTopRowData(){return this.pinnedTopRows}getPinnedBottomRowData(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(e){return this.pinnedTopRows[e]}getPinnedBottomRow(e){return this.pinnedBottomRows[e]}forEachPinnedTopRow(e){KT(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)}forEachPinnedBottomRow(e){KT(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(e){if(!e||0===e.length)return 0;const t=tR(e);return t.rowTop+t.rowHeight}};WT([F_("beans")],$O.prototype,"beans",2),WT([k_],$O.prototype,"init",1),$O=WT([L_("pinnedRowModel")],$O);var JO=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let n=0;n<e.children.length;n++)this.depthFirstSearchChangedPath(e.children[n],t);t(e.rowNode)}depthFirstSearchEverything(e,t,n){if(e.childrenAfterGroup)for(let i=0;i<e.childrenAfterGroup.length;i++){const r=e.childrenAfterGroup[i];r.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[i],t,n):n&&t(r)}t(e)}forEachChangedNodeDepthFirst(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){const e={rowNode:t,children:null};this.mapToItems[t.id]=e,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),t.forEach((e=>this.nodeIdsToColumns[n.id][e.getId()]=!0)),n=n.parent}linkPathItems(e,t){let n=e;for(let i=0;i<t;i++){const e=this.mapToItems[n.id],t=this.mapToItems[n.parent.id];t.children||(t.children=[]),t.children.push(e),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const n=this.nodeIdsToColumns[e.id];return t.filter((e=>n[e.getId()]))}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const n=this.nodeIdsToColumns[e.id];return t.filter((e=>!n[e.getId()]))}},eL=class e extends MR{constructor(t){super(),this.state=e.STATE_WAITING_TO_LOAD,this.version=0,this.id=t}getId(){return this.id}load(){this.state=e.STATE_LOADING,this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state=e.STATE_WAITING_TO_LOAD}getState(){return this.state}pageLoadFailed(t){this.isRequestMostRecentAndLive(t)&&(this.state=e.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,n){this.successCommon(e,{rowData:t,rowCount:n})}isRequestMostRecentAndLive(e){const t=e===this.version,n=this.isAlive();return t&&n}successCommon(t,n){this.dispatchLoadCompleted();this.isRequestMostRecentAndLive(t)&&(this.state=e.STATE_LOADED,this.processServerResult(n))}dispatchLoadCompleted(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n={type:e.EVENT_LOAD_COMPLETE,success:t,block:this};this.dispatchEvent(n)}};eL.EVENT_LOAD_COMPLETE="loadComplete",eL.STATE_WAITING_TO_LOAD="needsLoading",eL.STATE_LOADING="loading",eL.STATE_LOADED="loaded",eL.STATE_FAILED="failed";var tL=eL,nL=class extends MR{constructor(){super(...arguments),this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=GP.debounce(this.performCheckBlocksToLoad.bind(this),e))}setBeans(e){this.logger=e.create("RowNodeBlockLoader")}getMaxConcurrentDatasourceRequests(){const e=this.gos.get("maxConcurrentDatasourceRequests");return null==e?2:e<=0?void 0:e}addBlock(e){this.blocks.push(e),e.addEventListener(tL.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){GP.removeFromArray(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:nL.BLOCK_LOADED_EVENT}),0==this.activeBlockLoadsCount&&this.dispatchEvent({type:nL.BLOCK_LOADER_FINISHED_EVENT})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void this.logger.log("checkBlockToLoad: max loads exceeded");const e=this.getAvailableLoadingCount(),t=this.blocks.filter((e=>e.getState()===tL.STATE_WAITING_TO_LOAD)).slice(0,e);this.registerLoads(t.length),t.forEach((e=>e.load())),this.printCacheStatus()}getBlockState(){if(this.gos.isRowModelType("serverSide")){return this.rowModel.getBlockStates()}const e={};return this.blocks.forEach((t=>{const{id:n,state:i}=t.getBlockStateJson();e[n]=i})),e}printCacheStatus(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = ".concat(this.activeBlockLoadsCount,", blocks = ").concat(JSON.stringify(this.getBlockState())))}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return void 0!==this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}};nL.BLOCK_LOADED_EVENT="blockLoaded",nL.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",WT([F_("rowModel")],nL.prototype,"rowModel",2),WT([k_],nL.prototype,"postConstruct",1),WT([jT(0,G_("loggerFactory"))],nL.prototype,"setBeans",1),nL=WT([L_("rowNodeBlockLoader")],nL);var iL=class extends MR{constructor(){super(...arguments),this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.pixelOffset=0,this.masterRowCount=0}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,OR.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this)),this.onModelUpdated()}ensureRowHeightsValid(e,t,n,i){const r=this.rowModel.ensureRowHeightsValid(e,t,this.getPageFirstRow(),this.getPageLastRow());return r&&this.calculatePages(),r}isPaginateChildRows(){return!(!this.gos.get("groupRemoveSingleChildren")&&!this.gos.get("groupRemoveLowestSingleChildren"))||this.gos.get("paginateChildRows")}onModelUpdated(e){this.calculatePages();const t={type:OR.EVENT_PAGINATION_CHANGED,animate:!!e&&e.animate,newData:!!e&&e.newData,newPage:!!e&&e.newPage,newPageSize:!!e&&e.newPageSize,keepRenderedRows:!!e&&e.keepRenderedRows};this.eventService.dispatchEvent(t)}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages();const e={type:OR.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(e)}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){if(!this.active||this.currentPage===e||"number"!==typeof this.currentPage)return;this.currentPage=e,this.calculatePages();const t={type:OR.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!0,newPageSize:!1,keepRenderedRows:!1};this.eventService.dispatchEvent(t)}getPixelOffset(){return this.pixelOffset}getRow(e){return this.rowModel.getRow(e)}getRowNode(e){return this.rowModel.getRowNode(e)}getRowIndexAtPixel(e){return this.rowModel.getRowIndexAtPixel(e)}getCurrentPageHeight(){return qT(this.topRowBounds)||qT(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}}isRowPresent(e){if(!this.rowModel.isRowPresent(e))return!1;return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}isEmpty(){return this.rowModel.isEmpty()}isRowsToRender(){return this.rowModel.isRowsToRender()}forEachNode(e){return this.rowModel.forEachNode(e)}forEachNodeOnPage(e){const t=this.getPageFirstRow(),n=this.getPageLastRow();for(let i=t;i<=n;i++){const t=this.getRow(i);t&&e(t)}}getType(){return this.rowModel.getType()}getRowBounds(e){const t=this.rowModel.getRowBounds(e);return t.rowIndex=e,t}getPageFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getPageLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getRowCount(){return this.rowModel.getRowCount()}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){if(!this.active)return!0;return this.getPageForIndex(e.rowIndex)===this.currentPage}isLastPageFound(){return this.rowModel.isLastRowIndexKnown()}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return YT(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:YT(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:YT(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:YT(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}unsetAutoCalculatedPageSize(){if(void 0===this.pageSizeAutoCalculated)return;const e=this.pageSizeAutoCalculated;if(this.pageSizeAutoCalculated=void 0,this.pageSize===e)return;this.calculatePages();const t={type:OR.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!0,keepRenderedRows:!1};this.eventService.dispatchEvent(t)}setPageSize(e,t){const n=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,0!==this.currentPage&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,0!==this.currentPage&&this.goToFirstPage()}if(n!==this.pageSize){this.calculatePages();const e={type:OR.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!0,keepRenderedRows:!0};this.eventService.dispatchEvent(e)}}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(YT(this.topRowBounds)?this.topRowBounds.rowTop:0)}setPixelOffset(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:OR.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)return void this.setZeroRows();const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let n=this.pageSize*(this.currentPage+1)-1;if(n>e&&(n=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),n===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const e=this.rowModel.getTopLevelRowDisplayedIndex(n+1);this.bottomDisplayedRowIndex=e-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),0===this.masterRowCount)return void this.setZeroRows();const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}};WT([F_("rowModel")],iL.prototype,"rowModel",2),WT([k_],iL.prototype,"postConstruct",1),iL=WT([L_("paginationProxy")],iL);var rL=class extends MR{processAllCellClasses(e,t,n,i){this.processClassRules(void 0,e.cellClassRules,t,n,i),this.processStaticCellClasses(e,t,n)}processClassRules(e,t,n,i,r){if(null==t&&null==e)return;const s={},o={},a=(e,t)=>{e.split(" ").forEach((e=>{""!=e.trim()&&t(e)}))};if(t){const e=Object.keys(t);for(let i=0;i<e.length;i++){const r=e[i],l=t[r];let c;"string"===typeof l?c=this.expressionService.evaluate(l,n):"function"===typeof l&&(c=l(n)),a(r,(e=>{c?s[e]=!0:o[e]=!0}))}}e&&r&&Object.keys(e).forEach((e=>a(e,(e=>{s[e]||(o[e]=!0)})))),r&&Object.keys(o).forEach(r),Object.keys(s).forEach(i)}getStaticCellClasses(e,t){const{cellClass:n}=e;if(!n)return[];let i;if("function"===typeof n){i=n(t)}else i=n;return"string"===typeof i&&(i=[i]),i||[]}processStaticCellClasses(e,t,n){this.getStaticCellClasses(e,t).forEach((e=>{n(e)}))}};WT([F_("expressionService")],rL.prototype,"expressionService",2),rL=WT([L_("stylingService")],rL);var sL=class extends vI{constructor(e){super(e,"ag-toggle-button")}setValue(e,t){return super.setValue(e,t),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}},oL=class extends mI{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const n=super.setValue(e,t);return this.eInput.value=e,n}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},aL=class extends MI{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));const e=JD();this.addManagedListener(this.eInput,"mousedown",(()=>{this.isDisabled()||e||this.eInput.focus()})),this.eInput.step="any"}onWheel(e){this.gos.getActiveDomElement()===this.eInput&&e.preventDefault()}setMin(e){var t;const n=e instanceof Date?null!=(t=SM(null!=e?e:null,!1))?t:void 0:e;return this.min===n||(this.min=n,uP(this.eInput,"min",n)),this}setMax(e){var t;const n=e instanceof Date?null!=(t=SM(null!=e?e:null,!1))?t:void 0:e;return this.max===n||(this.max=n,uP(this.eInput,"max",n)),this}setStep(e){return this.step===e||(this.step=e,uP(this.eInput,"step",e)),this}getDate(){var e;if(this.eInput.validity.valid)return null!=(e=AM(this.getValue()))?e:void 0}setDate(e,t){this.setValue(SM(null!=e?e:null,!1),t)}},lL=class extends mI{constructor(e){super(e,"ag-range-field","range")}postConstruct(){super.postConstruct();const{min:e,max:t,step:n}=this.config;null!=e&&this.setMinValue(e),null!=t&&this.setMaxValue(t),this.setStep(n||1)}addInputListeners(){this.addManagedListener(this.eInput,"input",(e=>{const t=e.target.value;this.setValue(t)}))}setMinValue(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this}setMaxValue(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this}setStep(e){return this.eInput.setAttribute("step",e.toString()),this}setValue(e,t){null!=this.min&&(e=Math.max(parseFloat(e),this.min).toString()),null!=this.max&&(e=Math.min(parseFloat(e),this.max).toString());const n=super.setValue(e,t);return this.eInput.value=e,n}},cL=class extends XP{constructor(e,t){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=e,this.wrapperEl=t}postConstruct(){this.addManagedListener(this.getGui(),"click",this.onClick.bind(this))}setState(e){let t="";this.params.valueFormatter&&(t=this.params.valueFormatter(e));this.populateWithRenderer(e,t)||this.populateWithoutRenderer(e,t),this.value=e}highlightString(e){const{parsedValue:t}=this;if(this.params.cellRenderer||!YT(t))return;let n=YT(e);if(n){const i=null==t?void 0:t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(i>=0){const n=i+e.length,r=zR(t.slice(0,i),!0),s=zR(t.slice(i,n),!0),o=zR(t.slice(n));this.renderValueWithoutRenderer("".concat(r,'<span class="ag-rich-select-row-text-highlight">').concat(s,"</span>").concat(o))}else n=!1}n||this.renderValueWithoutRenderer(t)}updateHighlighted(e){var t;const n=this.getGui(),i="ag-rich-select-row-".concat(this.getCompId());if(null==(t=n.parentElement)||t.setAttribute("id",i),e){_D(this.getParentComponent().getAriaElement(),i),this.wrapperEl.setAttribute("data-active-option",i)}GD(n.parentElement,e),this.addOrRemoveCssClass("ag-rich-select-row-selected",e)}populateWithoutRenderer(e,t){const n=this.gos.getDocument(),i=this.getGui(),r=n.createElement("span");r.style.overflow="hidden",r.style.textOverflow="ellipsis";const s=zR(YT(t)?t:e,!0);this.parsedValue=YT(s)?s:null,i.appendChild(r),this.renderValueWithoutRenderer(s),this.setTooltip({newTooltipText:this.parsedValue,shouldDisplayTooltip:()=>r.scrollWidth>r.clientWidth})}renderValueWithoutRenderer(e){const t=this.getGui().querySelector("span");t&&(t.innerHTML=YT(e)?e:"&nbsp;")}populateWithRenderer(e,t){let n,i;return this.params.cellRenderer&&(i=this.userComponentFactory.getCellRendererDetails(this.params,{value:e,valueFormatted:t,setTooltip:(e,t)=>{this.setTooltip({newTooltipText:e,shouldDisplayTooltip:t})}})),i&&(n=i.newAgStackInstance()),n&&hP(n,this.getGui()),!!n&&(n.then((e=>{this.addDestroyFunc((()=>{this.getContext().destroyBean(e)}))})),!0)}onClick(){const e=this.getParentComponent(),t={type:OR.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};null==e||e.dispatchEvent(t)}};WT([F_("userComponentFactory")],cL.prototype,"userComponentFactory",2),WT([k_],cL.prototype,"postConstruct",1);var uL=class e extends WO{constructor(t){super(e.getTemplate((null==t?void 0:t.cssIdentifier)||"default")),this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0;const{cssIdentifier:n="default",ariaRole:i="listbox",listName:r}=t||{};this.cssIdentifier=n,this.ariaRole=i,this.listName=r}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.setAriaProperties(),this.addManagedListener(this.eventService,OR.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))}onGridStylesChanged(){this.rowHeight=this.getItemHeight(),this.refresh()}setAriaProperties(){const e=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),t=this.eContainer;pD(t,this.ariaRole),yD(t,e)}addResizeObserver(){const e=this.resizeObserverService.observeResize(this.getGui(),(()=>this.animationFrameService.requestAnimationFrame((()=>this.drawVirtualRows()))));this.addDestroyFunc(e)}focusInnerElement(e){this.focusRow(e?this.model.getRowCount()-1:0)}onFocusIn(e){const t=e.target;t.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=mD(t)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){switch(e.key){case SP.UP:case SP.DOWN:this.navigate(e.key===SP.UP)&&e.preventDefault();break;case SP.PAGE_HOME:case SP.PAGE_END:case SP.PAGE_UP:case SP.PAGE_DOWN:null!==this.navigateToPage(e.key)&&e.preventDefault()}}onTabKeyDown(e){this.navigate(e.shiftKey)?e.preventDefault():(bR(e),this.forceFocusOutOfContainer(e.shiftKey))}navigate(e){if(null==this.lastFocusedRowIndex)return!1;const t=this.lastFocusedRowIndex+(e?-1:1);return!(t<0||t>=this.model.getRowCount())&&(this.focusRow(t),!0)}navigateToPage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"focused",n=!1;"focused"===t&&(t=this.getLastFocusedRow(),n=!0);const i=this.model.getRowCount()-1;let r=-1;return e===SP.PAGE_HOME?r=0:e===SP.PAGE_END?r=i:e===SP.PAGE_DOWN?r=Math.min(t+this.pageSize,i):e===SP.PAGE_UP&&(r=Math.max(t-this.pageSize,0)),-1===r?null:(n?this.focusRow(r):this.ensureIndexVisible(r),r)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(e),this.animationFrameService.requestAnimationFrame((()=>{if(this.isScrolling=!1,!this.isAlive())return;const t=this.renderedRows.get(e);t&&t.eDiv.focus()})))}getComponentAt(e){const t=this.renderedRows.get(e);return t&&t.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach(((t,n)=>e(t.rowComponent,n)))}static getTemplate(e){return'<div class="ag-virtual-list-viewport ag-'.concat(e,'-virtual-list-viewport" role="presentation">\n                <div class="ag-virtual-list-container ag-').concat(e,'-virtual-list-container" ref="eContainer"></div>\n            </div>')}getItemHeight(){return this.isHeightFromTheme?this.environment.getListItemHeight():this.rowHeight}ensureIndexVisible(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.model.getRowCount();if("number"!==typeof e||e<0||e>=n)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e),!1;const i=e*this.rowHeight,r=i+this.rowHeight,s=this.getGui(),o=s.scrollTop,a=s.offsetHeight,l=o+a,c=t?0:this.rowHeight,u=l<r-c;if(o>i+c)return s.scrollTop=i,!0;if(u){const e=r-a;return s.scrollTop=e,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(null==this.model||!this.isAlive())return;const t=this.model.getRowCount();this.eContainer.style.height="".concat(t*this.rowHeight,"px"),T_((()=>this.eContainer.clientHeight>=t*this.rowHeight),(()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))}))}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&"function"===typeof this.model.areRowsEqual&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach(((e,t)=>this.removeRow(t)))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;const t=this.getGui(),n=t.scrollTop,i=n+t.offsetHeight,r=Math.floor(n/this.rowHeight),s=Math.floor(i/this.rowHeight);this.pageSize=Math.floor((i-n)/this.rowHeight),this.ensureRowsRendered(r,s,e)}ensureRowsRendered(e,t,n){this.renderedRows.forEach(((n,i)=>{(i<e||i>t)&&i!==this.lastFocusedRowIndex&&this.removeRow(i)})),n&&this.refreshRows();for(let i=e;i<=t;i++)this.renderedRows.has(i)||i<this.model.getRowCount()&&this.insertRow(i)}insertRow(e){const t=this.model.getRow(e),n=document.createElement("div");n.classList.add("ag-virtual-list-item","ag-".concat(this.cssIdentifier,"-virtual-list-item")),pD(n,"tree"===this.ariaRole?"treeitem":"option"),MD(n,this.model.getRowCount()),PD(n,e+1),n.setAttribute("tabindex","-1"),n.style.height="".concat(this.rowHeight,"px"),n.style.top="".concat(this.rowHeight*e,"px");const i=this.componentCreator(t,n);i.addGuiEventListener("focusin",(()=>this.lastFocusedRowIndex=e)),n.appendChild(i.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",n):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",n):this.eContainer.appendChild(n),this.renderedRows.set(e,{rowComponent:i,eDiv:n,value:t})}removeRow(e){const t=this.renderedRows.get(e);this.eContainer.removeChild(t.eDiv),this.destroyBean(t.rowComponent),this.renderedRows.delete(e)}refreshRows(){const e=this.model.getRowCount();this.renderedRows.forEach(((t,n)=>{var i,r;if(n>=e)this.removeRow(n);else{const e=this.model.getRow(n);(null==(r=(i=this.model).areRowsEqual)?void 0:r.call(i,t.value,e))?this.componentUpdater(e,t.rowComponent):this.removeRow(n)}}))}addScrollListener(){this.addGuiEventListener("scroll",(()=>this.drawVirtualRows()),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),super.destroy())}};WT([F_("resizeObserverService")],uL.prototype,"resizeObserverService",2),WT([F_("animationFrameService")],uL.prototype,"animationFrameService",2),WT([QP("eContainer")],uL.prototype,"eContainer",2),WT([k_],uL.prototype,"postConstruct",1);var dL=uL,hL=class extends dI{constructor(e){var t,n;super(GT(VT({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:null!=(t=null==e?void 0:e.template)?t:'\n    <div class="ag-picker-field" role="presentation">\n        <div ref="eLabel"></div>\n            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">\n            <div ref="eDisplayField" class="ag-picker-field-display"></div>\n            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n        </div>\n    </div>',modalPicker:!1},e),{maxPickerHeight:null!=(n=null==e?void 0:e.maxPickerHeight)?n:"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.highlightedItem=-1,this.lastRowHovered=-1,this.searchStringCreator=null;const{cellRowHeight:i,value:r,valueList:s,searchStringCreator:o}=e||{};null!=i&&(this.cellRowHeight=i),void 0!==r&&(this.value=r),null!=s&&(this.values=s),o&&(this.searchStringCreator=o)}postConstruct(){super.postConstruct(),this.createLoadingElement(),this.createListComponent();const{allowTyping:e,placeholder:t}=this.config;e?(this.eInput.setAutoComplete(!1).setInputPlaceholder(t),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{searchDebounceDelay:n=300}=this.config;this.clearSearchString=x_(this.clearSearchString,n),this.renderSelectedValue(),e&&(this.eInput.onValueChange((e=>this.searchTextFromString(e))),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}createLoadingElement(){const e=this.gos.getDocument(),t=this.localeService.getLocaleTextFunc(),n=e.createElement("div");n.classList.add("ag-loading-text"),n.innerText=t("loadingOoo","Loading..."),this.eLoading=n}createListComponent(){this.listComponent=this.createBean(new dL({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this));this.listComponent.setComponentUpdater(((e,t)=>{})),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,OR.EVENT_FIELD_PICKER_VALUE_SELECTED,(e=>{this.onListValueSelected(e.value,e.fromEnterKey)}));const{cellRowHeight:e}=this;e&&this.listComponent.setRowHeight(e);const t=this.listComponent.getGui(),n=this.listComponent.getAriaElement();this.addManagedListener(t,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(t,"mousedown",(e=>e.preventDefault())),t.classList.add("ag-rich-select-list");const i="ag-rich-select-list-".concat(this.listComponent.getCompId());n.setAttribute("id",i);yD(n,this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue)),WD(this.eWrapper,n)}renderSelectedValue(){const{value:e,eDisplayField:t,config:n}=this,{allowTyping:i,initialInputValue:r}=this.config,s=this.config.valueFormatter?this.config.valueFormatter(e):e;if(i)return void this.eInput.setValue(null!=r?r:s);let o,a;if(n.cellRenderer&&(o=this.userComponentFactory.getCellRendererDetails(this.config,{value:e,valueFormatted:s})),o&&(a=o.newAgStackInstance()),a)zM(t),hP(a,t),a.then((e=>{this.addDestroyFunc((()=>this.getContext().destroyBean(e)))}));else{if(YT(this.value))t.innerText=s,t.classList.remove("ag-display-as-placeholder");else{const{placeholder:e}=n;YT(e)?(t.innerHTML="".concat(zR(e)),t.classList.add("ag-display-as-placeholder")):zM(t)}this.setTooltip({newTooltipText:null!=s?s:null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth})}}getCurrentValueIndex(){const{currentList:e,value:t}=this;if(null==t||!e)return-1;for(let n=0;n<e.length;n++)if(e[n]===t)return n;return-1}highlightFilterMatch(){var e;null==(e=this.listComponent)||e.forEachRenderedRow(((e,t)=>{e.highlightString(this.searchString)}))}highlightSelectedValue(e){var t;null==e&&(e=this.getCurrentValueIndex()),this.highlightedItem=e,null==(t=this.listComponent)||t.forEachRenderedRow(((t,n)=>{const i=-1!==e&&this.highlightedItem===n;t.updateHighlighted(i)}))}setRowHeight(e){e!==this.cellRowHeight&&(this.cellRowHeight=e),this.listComponent&&this.listComponent.setRowHeight(e)}createPickerComponent(){const{values:e}=this;return e&&this.setValueList({valueList:e}),this.listComponent}setSearchStringCreator(e){this.searchStringCreator=e}setValueList(e){const{valueList:t,refresh:n}=e;this.listComponent&&this.currentList!==t&&(this.currentList=t,this.listComponent.setModel({getRowCount:()=>t.length,getRow:e=>t[e],areRowsEqual:(e,t)=>e===t}),n&&(this.values?this.listComponent.refresh(!0):(this.values=t,this.isPickerDisplayed&&this.showCurrentValueInPicker())))}showPicker(){super.showPicker(),this.showCurrentValueInPicker(),this.displayOrHidePicker()}showCurrentValueInPicker(){var e,t;if(!this.listComponent)return;if(!this.currentList)return void(this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading));(null==(e=this.eLoading)?void 0:e.offsetParent)&&(null==(t=this.eLoading.parentElement)||t.removeChild(this.eLoading));const n=this.getCurrentValueIndex();-1!==n?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(n),this.listComponent.refresh(!0),this.highlightSelectedValue(n)):this.listComponent.refresh()}beforeHidePicker(){this.highlightedItem=-1,super.beforeHidePicker()}onWrapperFocus(){if(!this.eInput)return;const e=this.eInput.getFocusableElement();e.focus(),e.select()}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}buildSearchStringFromKeyboardEvent(e){let{key:t}=e;if(t===SP.BACKSPACE)this.searchString=this.searchString.slice(0,-1),t="";else if(!DP(e))return;e.preventDefault(),this.searchTextFromCharacter(t)}searchTextFromCharacter(e){this.searchString+=e,this.runSearch(),this.clearSearchString()}searchTextFromString(e){null==e&&(e=""),this.searchString=e,this.runSearch()}buildSearchStrings(e){const{valueFormatter:t=(e=>e)}=this.config;let n;return"number"===typeof e[0]||"string"===typeof e[0]?n=e.map((e=>t(e))):"object"===typeof e[0]&&this.searchStringCreator&&(n=this.searchStringCreator(e)),n}getSuggestionsAndFilteredValues(e,t){let n=[],i=[];if(!e.length)return{suggestions:n,filteredValues:i};const{searchType:r="fuzzy",filterList:s}=this.config;if("fuzzy"===r){const e=fP(this.searchString,t,!0);n=e.values;const r=e.indices;if(s&&r.length)for(let t=0;t<r.length;t++)i.push(this.values[r[t]])}else n=t.filter(((e,t)=>{const n=e.toLocaleLowerCase(),o=this.searchString.toLocaleLowerCase(),a="match"===r?n.startsWith(o):-1!==n.indexOf(o);return s&&a&&i.push(this.values[t]),a}));return{suggestions:n,filteredValues:i}}filterListModel(e){const{filterList:t}=this.config;t&&(this.setValueList({valueList:e,refresh:!0}),this.alignPickerToComponent())}runSearch(){var e,t;const{values:n}=this,i=this.buildSearchStrings(n);if(!i)return void this.highlightSelectedValue(-1);const{suggestions:r,filteredValues:s}=this.getSuggestionsAndFilteredValues(this.searchString,i),{filterList:o,highlightMatch:a,searchType:l="fuzzy"}=this.config,c=s.length,u=!(!o||""===this.searchString);if(this.filterListModel(u?s:n),r.length){const e=u?0:i.indexOf(r[0]);this.selectListItem(e)}else if(this.highlightSelectedValue(-1),!u||c)null==(e=this.listComponent)||e.ensureIndexVisible(0);else if(u){this.getAriaElement().removeAttribute("data-active-option");const e=null==(t=this.listComponent)?void 0:t.getAriaElement();e&&_D(e,null)}a&&"fuzzy"!==l&&this.highlightFilterMatch(),this.displayOrHidePicker()}displayOrHidePicker(){var e;const t=null==(e=this.listComponent)?void 0:e.getGui(),n=!!this.currentList&&0===this.currentList.length;null==t||t.classList.toggle("ag-hidden",n)}clearSearchString(){this.searchString=""}selectListItem(e,t){if(!this.isPickerDisplayed||!this.currentList||!this.listComponent||e<0||e>=this.currentList.length)return;this.listComponent.ensureIndexVisible(e,!t)&&!t&&this.listComponent.refresh(!0),this.highlightSelectedValue(e)}setValue(e,t,n){const i=this.currentList?this.currentList.indexOf(e):-1;return-1===i?this:(this.value=e,n||this.selectListItem(i),this.renderSelectedValue(),super.setValue(e,t))}createRowComponent(e){const t=new cL(this.config,this.eWrapper);t.setParentComponent(this.listComponent),this.getContext().createBean(t),t.setState(e);const{highlightMatch:n,searchType:i="fuzzy"}=this.config;return n&&"fuzzy"!==i&&t.highlightString(this.searchString),t}getRowForMouseEvent(e){const{listComponent:t}=this;if(!t)return-1;const n=(null==t?void 0:t.getGui()).getBoundingClientRect(),i=t.getScrollTop(),r=e.clientY-n.top+i;return Math.floor(r/t.getRowHeight())}onPickerMouseMove(e){if(!this.listComponent)return;const t=this.getRowForMouseEvent(e);-1!==t&&t!=this.lastRowHovered&&(this.lastRowHovered=t,this.selectListItem(t,!0))}onNavigationKeyDown(e,t){e.preventDefault();const n=t===SP.DOWN;if(!this.isPickerDisplayed&&n)return void this.showPicker();const i=this.highlightedItem,r=-1===i?0:i+(n?1:-1);this.selectListItem(r)}onPageNavigation(e){var t;if(!this.isPickerDisplayed)return;const n=null==(t=this.listComponent)?void 0:t.navigateToPage(e,this.highlightedItem);null!=n&&this.animationFrameService.requestAnimationFrame((()=>{if(!this.isAlive())return null;this.highlightSelectedValue(n)}))}onEnterKeyDown(e){this.isPickerDisplayed&&(e.preventDefault(),this.currentList&&this.onListValueSelected(this.currentList[this.highlightedItem],!0))}onTabKeyDown(){this.isPickerDisplayed&&this.currentList&&this.setValue(this.currentList[this.highlightedItem],!1,!0)}onListValueSelected(e,t){this.setValue(e,!1,!0),this.dispatchPickerEvent(e,t),this.hidePicker()}dispatchPickerEvent(e,t){const n={type:OR.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:t,value:e};this.dispatchEvent(n)}getFocusableElement(){const{allowTyping:e}=this.config;return e?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(e){const t=e.key,{allowTyping:n}=this.config;switch(t){case SP.LEFT:case SP.RIGHT:n||e.preventDefault();break;case SP.PAGE_HOME:case SP.PAGE_END:if(n){e.preventDefault();const n=this.eInput.getInputElement(),i=t===SP.PAGE_HOME?0:n.value.length;n.setSelectionRange(i,i);break}case SP.PAGE_UP:case SP.PAGE_DOWN:e.preventDefault(),this.onPageNavigation(t);break;case SP.DOWN:case SP.UP:this.onNavigationKeyDown(e,t);break;case SP.ESCAPE:this.isPickerDisplayed&&(KM(this.listComponent.getGui())&&(e.preventDefault(),bR(e)),this.hidePicker());break;case SP.ENTER:this.onEnterKeyDown(e);break;case SP.TAB:this.onTabKeyDown();break;default:n||this.buildSearchStringFromKeyboardEvent(e)}}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,super.destroy()}};WT([F_("userComponentFactory")],hL.prototype,"userComponentFactory",2),WT([F_("animationFrameService")],hL.prototype,"animationFrameService",2),WT([QP("eInput")],hL.prototype,"eInput",2);var pL=class e extends cI{constructor(t){super(t,e.TEMPLATE),this.labelAlignment="top"}init(){this.eSlider.addCssClass("ag-slider-field");const{minValue:e,maxValue:t,textFieldWidth:n,step:i,value:r,onValueChange:s}=this.config;null!=e&&this.setMinValue(e),null!=t&&this.setMaxValue(t),null!=n&&this.setTextFieldWidth(n),null!=i&&this.setStep(i),null!=r&&this.setValue(r),null!=s&&this.onValueChange(s)}onValueChange(e){const t=OR.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,t,(()=>{const t=parseFloat(this.eText.getValue());this.eSlider.setValue(t.toString(),!0),e(t||0)})),this.addManagedListener(this.eSlider,t,(()=>{const t=this.eSlider.getValue();this.eText.setValue(t,!0),e(parseFloat(t))})),this}setSliderWidth(e){return this.eSlider.setWidth(e),this}setTextFieldWidth(e){return this.eText.setWidth(e),this}setMinValue(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this}setMaxValue(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this}getValue(){return this.eText.getValue()}setValue(e,t){return this.getValue()===e||(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),t||this.dispatchEvent({type:OR.EVENT_FIELD_VALUE_CHANGED})),this}setStep(e){return this.eSlider.setStep(e),this.eText.setStep(e),this}};pL.TEMPLATE='<div class="ag-slider">\n            <label ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range ref="eSlider"></ag-input-range>\n                <ag-input-number-field ref="eText"></ag-input-number-field>\n            </div>\n        </div>',WT([QP("eLabel")],pL.prototype,"eLabel",2),WT([QP("eSlider")],pL.prototype,"eSlider",2),WT([QP("eText")],pL.prototype,"eText",2),WT([k_],pL.prototype,"init",1);var gL=pL,fL=class e extends XP{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e.getTemplate(t)),this.params=t,this.suppressEnabledCheckbox=!0,this.suppressToggleExpandOnEnableChange=!1;const{enabled:n,items:i,suppressEnabledCheckbox:r,expanded:s,suppressToggleExpandOnEnableChange:o,useToggle:a}=t;this.cssIdentifier=t.cssIdentifier||"default",this.enabled=null==n||n,this.items=i||[],this.useToggle=null!=a&&a,this.alignItems=t.alignItems||"center",this.expanded=null==s||s,null!=r&&(this.suppressEnabledCheckbox=r),null!=o&&(this.suppressToggleExpandOnEnableChange=o)}static getTemplate(e){const t=e.cssIdentifier||"default",n=e.direction||"vertical";return'\n            <div class="ag-group ag-'.concat(t,'-group" role="presentation">\n                <div ref="eToolbar" class="ag-group-toolbar ag-').concat(t,'-group-toolbar">\n                    <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>\n                </div>\n                <div ref="eContainer" class="ag-group-container ag-group-container-').concat(n," ag-").concat(t,'-group-container"></div>\n            </div>\n        ')}postConstruct(){if(this.setupTitleBar(),this.items.length){const e=this.items;this.items=[],this.addItems(e)}const e=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.enabled&&this.setEnabled(this.enabled,void 0,!0),this.setAlignItems(this.alignItems);const{onEnableChange:t,suppressOpenCloseIcons:n}=this.params;this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(null!=n&&n),this.refreshChildDisplay(),IM(this.eContainer,this.expanded),this.cbGroupEnabled.onValueChange((e=>{this.setEnabled(e,!0,this.suppressToggleExpandOnEnableChange),this.dispatchEnableChangeEvent(e)})),null!=t&&this.onEnableChange(t)}refreshChildDisplay(){var e;IM(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),null==(e=this.eTitleBar)||e.refreshOnExpand(this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){this.alignItems!==e&&this.removeCssClass("ag-group-item-alignment-".concat(this.alignItems)),this.alignItems=e;const t="ag-group-item-alignment-".concat(this.alignItems);return this.addCssClass(t),this}toggleGroupExpand(t){var n;let i=!1;if((null==(n=this.eTitleBar)?void 0:n.isSuppressCollapse())&&!this.useToggle)t=!0,i=!0;else if(t=null!=t?t:!this.expanded,this.expanded===t)return this;return this.expanded=t,this.refreshChildDisplay(),IM(this.eContainer,t),i||this.dispatchEvent({type:t?e.EVENT_EXPANDED:e.EVENT_COLLAPSED}),this}addItems(e){e.forEach((e=>this.addItem(e)))}prependItem(e){this.insertItem(e,!0)}addItem(e){this.insertItem(e,!1)}insertItem(e,t){const n=this.eContainer,i=e instanceof XP?e.getGui():e;i.classList.add("ag-group-item","ag-".concat(this.cssIdentifier,"-group-item")),t?(n.insertAdjacentElement("afterbegin",i),this.items.unshift(i)):(n.appendChild(i),this.items.push(i))}hideItem(e,t){IM(this.items[t],!e)}getItemIndex(e){const t=e instanceof XP?e.getGui():e;return this.items.indexOf(t)}setTitle(e){var t;return null==(t=this.eTitleBar)||t.setTitle(e),this}addTitleBarWidget(e){var t;return null==(t=this.eTitleBar)||t.addWidget(e),this}addCssClassToTitleBar(e){var t;null==(t=this.eTitleBar)||t.addCssClass(e)}dispatchEnableChangeEvent(t){const n={type:e.EVENT_ENABLE_CHANGE,enabled:t};this.dispatchEvent(n)}setEnabled(e,t,n){var i;return this.enabled=e,this.refreshDisabledStyles(),n||this.toggleGroupExpand(e),t||(this.cbGroupEnabled.setValue(e),null==(i=this.eToggle)||i.setValue(e)),this}isEnabled(){return this.enabled}onEnableChange(t){return this.addManagedListener(this,e.EVENT_ENABLE_CHANGE,(e=>t(e.enabled))),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){var t;return null==(t=this.eTitleBar)||t.hideOpenCloseIcons(e),this}refreshDisabledStyles(){var e;const t=!this.enabled;this.eContainer.classList.toggle("ag-disabled",t),null==(e=this.eTitleBar)||e.refreshDisabledStyles(this.suppressEnabledCheckbox&&t),this.eContainer.classList.toggle("ag-disabled-group-container",t)}setupTitleBar(){const e=this.useToggle?this.createToggleTitleBar():this.createDefaultTitleBar();this.eToolbar.insertAdjacentElement("beforebegin",e.getGui())}createDefaultTitleBar(){const e=this.createManagedBean(new CL(this.params));return this.eTitleBar=e,e.refreshOnExpand(this.expanded),this.addManagedListener(e,CL.EVENT_EXPAND_CHANGED,(e=>this.toggleGroupExpand(e.expanded))),e}createToggleTitleBar(){var e;const t=this.createManagedBean(new sL({value:this.enabled,label:this.params.title,labelAlignment:"left",labelWidth:"flex",onValueChange:e=>{this.setEnabled(e,!0),this.dispatchEnableChangeEvent(e)}}));return t.addCssClass("ag-group-title-bar"),t.addCssClass("ag-".concat(null!=(e=this.params.cssIdentifier)?e:"default","-group-title-bar ag-unselectable")),this.eToggle=t,this.toggleGroupExpand(this.enabled),t}};fL.EVENT_EXPANDED="expanded",fL.EVENT_COLLAPSED="collapsed",fL.EVENT_ENABLE_CHANGE="enableChange",WT([QP("eToolbar")],fL.prototype,"eToolbar",2),WT([QP("cbGroupEnabled")],fL.prototype,"cbGroupEnabled",2),WT([QP("eContainer")],fL.prototype,"eContainer",2),WT([k_],fL.prototype,"postConstruct",1);var mL=fL,vL="ag-disabled-group-title-bar",yL=class e extends XP{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e.getTemplate(t)),this.suppressOpenCloseIcons=!1;const{title:n,suppressOpenCloseIcons:i}=t;n&&n.length>0&&(this.title=n),null!=i&&(this.suppressOpenCloseIcons=i)}static getTemplate(e){var t;const n=null!=(t=e.cssIdentifier)?t:"default";return'\n            <div class="ag-group-title-bar ag-'.concat(n,'-group-title-bar ag-unselectable" role="button">\n                <span class="ag-group-title-bar-icon ag-').concat(n,'-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>\n                <span class="ag-group-title-bar-icon ag-').concat(n,'-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>\n                <span ref="eTitle" class="ag-group-title ag-').concat(n,'-group-title"></span>\n            </div>\n        ')}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){this.eGroupClosedIcon.appendChild(CP("columnSelectClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild(CP("columnSelectOpen",this.gos,null)),this.addManagedListener(this.getGui(),"click",(()=>this.dispatchExpandChanged())),this.addManagedListener(this.getGui(),"keydown",(e=>{switch(e.key){case SP.ENTER:case SP.SPACE:e.preventDefault(),this.dispatchExpandChanged();break;case SP.RIGHT:case SP.LEFT:e.preventDefault(),this.dispatchExpandChanged(e.key===SP.RIGHT)}}))}refreshOnExpand(e){this.refreshAriaStatus(e),this.refreshOpenCloseIcons(e)}refreshAriaStatus(e){this.suppressOpenCloseIcons||RD(this.getGui(),e)}refreshOpenCloseIcons(e){const t=!this.suppressOpenCloseIcons;IM(this.eGroupOpenedIcon,t&&e),IM(this.eGroupClosedIcon,t&&!e)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(t){const n={type:e.EVENT_EXPAND_CHANGED,expanded:t};this.dispatchEvent(n)}setTitle(e){const t=this.getGui(),n=!!e&&e.length>0;e=n?e:void 0,this.eTitle.textContent=null!=e?e:"",IM(t,n),e!==this.title&&(this.title=e);const i=t.classList.contains(vL);return this.refreshDisabledStyles(i),this}addWidget(e){return this.getGui().appendChild(e),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(e){const t=this.getGui();e?(t.classList.add(vL),t.removeAttribute("tabindex")):(t.classList.remove(vL),"string"===typeof this.title?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex"))}};yL.EVENT_EXPAND_CHANGED="expandedChanged",WT([QP("eGroupOpenedIcon")],yL.prototype,"eGroupOpenedIcon",2),WT([QP("eGroupClosedIcon")],yL.prototype,"eGroupClosedIcon",2),WT([QP("eTitle")],yL.prototype,"eTitle",2),WT([k_],yL.prototype,"postConstruct",1);var CL=yL,wL=class extends WO{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;super('<div class="ag-menu-list" role="tree"></div>'),this.level=e,this.menuItems=[],this.params=null!=t?t:{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.handleFocusIn(e),onFocusOut:e=>this.handleFocusOut(e)})}onTabKeyDown(e){const t=this.getParentComponent(),n=t&&t.getGui();n&&n.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case SP.UP:case SP.RIGHT:case SP.DOWN:case SP.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case SP.ESCAPE:this.closeIfIsChild()&&bR(e)}}handleFocusIn(e){var t,n;const i=e.relatedTarget;(this.tabGuardCtrl.isTabGuard(i)||!this.getGui().contains(i)&&!(null==(n=null==(t=this.activeMenuItem)?void 0:t.getSubMenuGui())?void 0:n.contains(i)))&&(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(e){var t;const n=e.relatedTarget;!this.activeMenuItem||this.getGui().contains(n)||(null==(t=this.activeMenuItem.getSubMenuGui())?void 0:t.contains(n))||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){null!=e&&WP.all(e.map((e=>"separator"===e?WP.resolve({eGui:this.createSeparator()}):"string"===typeof e?(console.warn("AG Grid: unrecognised menu item ".concat(e)),WP.resolve({eGui:null})):this.addItem(e)))).then((e=>{e.forEach((e=>{(null==e?void 0:e.eGui)&&(this.appendChild(e.eGui),e.comp&&this.menuItems.push(e.comp))}))}))}addItem(e){const t=this.createManagedBean(new EL);return t.init({menuItemDef:e,isAnotherSubMenuOpen:()=>this.menuItems.some((e=>e.isSubMenuOpen())),level:this.level,contextParams:this.params}).then((()=>(t.setParentComponent(this),this.addManagedListener(t,EL.EVENT_CLOSE_MENU,(e=>{this.dispatchEvent(e)})),this.addManagedListener(t,EL.EVENT_MENU_ITEM_ACTIVATED,(e=>{this.activeMenuItem&&this.activeMenuItem!==e.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=e.menuItem})),{comp:t,eGui:t.getGui()})))}activateFirstItem(){const e=this.menuItems.filter((e=>!e.isDisabled()))[0];e&&e.activate()}createSeparator(){return XM('\n            <div class="ag-menu-separator" aria-hidden="true">\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n            </div>')}handleNavKey(e){switch(e){case SP.UP:case SP.DOWN:const t=this.findNextItem(e===SP.UP);return void(t&&t!==this.activeMenuItem&&t.activate())}e===(this.gos.get("enableRtl")?SP.RIGHT:SP.LEFT)?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){const t=this.getParentComponent();return!!(t&&t instanceof EL)&&(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus(),!0)}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){const t=this.menuItems.filter((e=>!e.isDisabled()));if(!t.length)return;if(!this.activeMenuItem)return e?tR(t):t[0];let n;e&&t.reverse();let i=!1;for(let r=0;r<t.length;r++){const e=t[r];if(i){n=e;break}e===this.activeMenuItem&&(i=!0)}return i&&!n?t[0]:n||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}};WT([F_("focusService")],wL.prototype,"focusService",2),WT([k_],wL.prototype,"postConstruct",1);var bL=class extends WO{constructor(e){super(),this.wrappedComponent=e,this.setTemplateFromElement(e.getGui())}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===SP.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){const e=this.parentComponent;e.closeSubMenu(),setTimeout((()=>e.getGui().focus()),0)}};WT([k_],bL.prototype,"postConstruct",1);var SL=class e extends MR{constructor(){super(...arguments),this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}init(e){var t,n;const{menuItemDef:i,isAnotherSubMenuOpen:r,level:s,childComponent:o,contextParams:a}=e;this.params=e.menuItemDef,this.level=s,this.isAnotherSubMenuOpen=r,this.childComponent=o,this.contextParams=a,this.cssClassPrefix=null!=(n=null==(t=this.params.menuItemParams)?void 0:t.cssClassPrefix)?n:"ag-menu-option";return this.userComponentFactory.getMenuItemCompDetails(this.params,GT(VT({},i),{level:s,isAnotherSubMenuOpen:r,openSubMenu:e=>this.openSubMenu(e),closeSubMenu:()=>this.closeSubMenu(),closeMenu:e=>this.closeMenu(e),updateTooltip:(e,t)=>this.refreshTooltip(e,t),onItemActivated:()=>this.onItemActivated()})).newAgStackInstance().then((e=>{var t;this.menuItemComp=e;const n=null==(t=e.configureDefaults)?void 0:t.call(e);n&&this.configureDefaults(!0===n?void 0:n)}))}addListeners(e,t){(null==t?void 0:t.suppressClick)||this.addManagedListener(e,"click",(e=>this.onItemSelected(e))),(null==t?void 0:t.suppressKeyboardSelect)||this.addManagedListener(e,"keydown",(e=>{e.key!==SP.ENTER&&e.key!==SP.SPACE||(e.preventDefault(),this.onItemSelected(e))})),(null==t?void 0:t.suppressMouseDown)||this.addManagedListener(e,"mousedown",(e=>{e.stopPropagation(),e.preventDefault()})),(null==t?void 0:t.suppressMouseOver)||(this.addManagedListener(e,"mouseenter",(()=>this.onMouseEnter())),this.addManagedListener(e,"mouseleave",(()=>this.onMouseLeave())))}isDisabled(){return!!this.params.disabled}openSubMenu(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var n,i;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;const r=XM('<div class="ag-menu" role="presentation"></div>');let s;this.eSubMenuGui=r;let o=()=>{this.subMenuIsOpening=!1};if(this.childComponent){const e=this.createBean(new bL(this.childComponent));e.setParentComponent(this);const t=e.getGui(),n="mouseenter",i=()=>this.cancelDeactivate();t.addEventListener(n,i),s=()=>t.removeEventListener(n,i),r.appendChild(t),this.childComponent.afterGuiAttached&&(o=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){const n=this.createBean(new wL(this.level+1,this.contextParams));n.setParentComponent(this),n.addMenuItems(this.params.subMenu),r.appendChild(n.getGui()),this.addManagedListener(n,e.EVENT_CLOSE_MENU,(e=>this.dispatchEvent(e))),n.addGuiEventListener("mouseenter",(()=>this.cancelDeactivate())),s=()=>this.destroyBean(n),t&&(o=()=>{n.activateFirstItem(),this.subMenuIsOpening=!1})}const a=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:this.eGui,ePopup:r}),l=this.localeService.getLocaleTextFunc(),c=this.popupService.addPopup({modal:!0,eChild:r,positionCallback:a,anchorToElement:this.eGui,ariaLabel:l("ariaLabelSubMenu","SubMenu"),afterGuiAttached:o});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var e,t;c&&c.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),s(),null==(t=(e=this.menuItemComp).setExpanded)||t.call(e,!1),this.eSubMenuGui=void 0},null==(i=(n=this.menuItemComp).setExpanded)||i.call(n,!0)}setAriaExpanded(e){this.suppressAria||RD(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e){var t,n;this.cancelActivate(),this.params.disabled||(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add("".concat(this.cssClassPrefix,"-active")),null==(n=(t=this.menuItemComp).setActive)||n.call(t,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),e&&this.params.subMenu&&window.setTimeout((()=>{this.isAlive()&&this.isActive&&this.openSubMenu()}),300),this.onItemActivated())}deactivate(){var e,t;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove("".concat(this.cssClassPrefix,"-active")),null==(t=(e=this.menuItemComp).setActive)||t.call(e,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){var t,n;null==(n=(t=this.menuItemComp).select)||n.call(t),this.params.action?this.getFrameworkOverrides().wrapOutgoing((()=>this.params.action(this.gos.addGridCommonParams(VT({},this.contextParams))))):this.openSubMenu(e&&"keydown"===e.type),this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect||this.closeMenu(e)}closeMenu(t){const n={type:e.EVENT_CLOSE_MENU};t&&(t instanceof MouseEvent?n.mouseEvent=t:n.keyboardEvent=t),this.dispatchEvent(n)}onItemActivated(){const t={type:e.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(t)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout((()=>this.activate(!0)),e.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout((()=>this.deactivate()),e.ACTIVATION_DELAY):this.deactivate()}configureDefaults(e){var t,n,i;if(!this.menuItemComp)return void setTimeout((()=>this.configureDefaults(e)));let r=this.menuItemComp.getGui();const s=null==(n=(t=this.menuItemComp).getRootElement)?void 0:n.call(t);s&&((null==e?void 0:e.suppressRootStyles)||r.classList.add("ag-menu-option-custom"),r=s),this.eGui=r,this.suppressRootStyles=!!(null==e?void 0:e.suppressRootStyles),this.suppressRootStyles||(r.classList.add(this.cssClassPrefix),null==(i=this.params.cssClasses)||i.forEach((e=>r.classList.add(e))),this.params.disabled&&r.classList.add("".concat(this.cssClassPrefix,"-disabled"))),(null==e?void 0:e.suppressTooltip)||this.refreshTooltip(this.params.tooltip),this.suppressAria=!!(null==e?void 0:e.suppressAria),this.suppressAria||(pD(r,"treeitem"),xD(r,this.level+1),this.params.disabled&&AD(r,!0)),(null==e?void 0:e.suppressTabIndex)||r.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(r,e),this.suppressFocus=!!(null==e?void 0:e.suppressFocus)}refreshTooltip(e,t){this.tooltip=e,this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),e&&this.menuItemComp&&(this.tooltipFeature=this.createBean(new YP({getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:t})))}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}};SL.EVENT_CLOSE_MENU="closeMenu",SL.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated",SL.ACTIVATION_DELAY=80,WT([F_("popupService")],SL.prototype,"popupService",2),WT([F_("userComponentFactory")],SL.prototype,"userComponentFactory",2);var EL=SL,xL=class e extends XP{constructor(t){super(e.getTemplate(t)),this.config=t,this.closable=!0}static getTemplate(e){const t=e.cssIdentifier||"default";return'<div class="ag-panel ag-'.concat(t,'-panel" tabindex="-1">\n            <div ref="eTitleBar" class="ag-panel-title-bar ag-').concat(t,'-panel-title-bar ag-unselectable">\n                <span ref="eTitle" class="ag-panel-title-bar-title ag-').concat(t,'-panel-title-bar-title"></span>\n                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-').concat(t,'-panel-title-bar-buttons"></div>\n            </div>\n            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-').concat(t,'-panel-content-wrapper"></div>\n        </div>')}postConstruct(){const{component:e,closable:t,hideTitleBar:n,title:i,minWidth:r=250,width:s,minHeight:o=250,height:a,centered:l,popup:c,x:u,y:d}=this.config;this.positionableFeature=new oI(this.getGui(),{minWidth:r,width:s,minHeight:o,height:a,centered:l,x:u,y:d,popup:c,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);const h=this.getGui();e&&this.setBodyComponent(e),n?IM(this.eTitleBar,!1):(i&&this.setTitle(i),this.setClosable(null!=t?t:this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",(e=>{if(h.contains(e.relatedTarget)||h.contains(this.gos.getActiveDomElement())||this.eTitleBarButtons.contains(e.target))return void e.preventDefault();const t=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");t&&t.focus()})),c&&this.positionableFeature.isPositioned()||(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){const e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(t){if(t!==this.closable&&(this.closable=t),t){const t=this.closeButtonComp=new XP(e.CLOSE_BTN_TEMPLATE);this.getContext().createBean(t);const n=t.getGui(),i=wP("close",this.gos);i.classList.add("ag-panel-title-bar-button-icon"),n.appendChild(i),this.addTitleBarButton(t),t.addManagedListener(n,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){const e=this.closeButtonComp.getGui();e.parentElement.removeChild(e),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,t){const n=this.eTitleBarButtons,i=n.children,r=i.length;null==t&&(t=r),t=Math.max(0,Math.min(t,r)),e.addCssClass("ag-panel-title-bar-button");const s=e.getGui();0===t?n.insertAdjacentElement("afterbegin",s):t===r?n.insertAdjacentElement("beforeend",s):i[t-1].insertAdjacentElement("afterend",s),e.setParentComponent(this)}getBodyHeight(){return FM(this.eContentWrapper)}getBodyWidth(){return BM(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const e=this.getGui();e&&KM(e)&&this.close(),super.destroy()}};xL.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',WT([QP("eContentWrapper")],xL.prototype,"eContentWrapper",2),WT([QP("eTitleBar")],xL.prototype,"eTitleBar",2),WT([QP("eTitleBarButtons")],xL.prototype,"eTitleBarButtons",2),WT([QP("eTitle")],xL.prototype,"eTitle",2),WT([k_],xL.prototype,"postConstruct",1);var AL=xL;WT([F_("popupService")],class extends AL{constructor(e){super(GT(VT({},e),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}postConstruct(){const e=this.getGui(),{movable:t,resizable:n,maximizable:i}=this.config;this.addCssClass("ag-dialog"),super.postConstruct(),this.addManagedListener(e,"focusin",(t=>{this.popupService.bringPopupToFront(e)})),t&&this.setMovable(t),i&&this.setMaximizable(i),n&&this.setResizable(n)}renderComponent(){const e=this.getGui(),{alwaysOnTop:t,modal:n,title:i,afterGuiAttached:r}=this.config,s=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({modal:n,eChild:e,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:t,ariaLabel:i||s("ariaLabelDialog","Dialog"),afterGuiAttached:r});o&&(this.close=o.hideFunc)}onClosed(e){var t,n;this.destroy(),null==(n=(t=this.config).closedCallback)||n.call(t,e)}toggleMaximize(){const e=this.positionableFeature.getPosition();if(this.isMaximized){const{x:e,y:t,width:n,height:i}=this.lastPosition;this.setWidth(n),this.setHeight(i),this.positionableFeature.offsetElement(e,t)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){IM(this.maximizeIcon,!this.isMaximized),IM(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach((e=>e())),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));const t=this.eTitleBar;if(!t||e===this.isMaximizable)return;const n=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),n.addManagedListener(n.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(n,0),this.maximizeListeners.push(this.addManagedListener(t,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",(()=>{this.isMaximized=!1,this.refreshMaximizeIcon()}))}buildMaximizeAndMinimizeElements(){const e=this.maximizeButtonComp=this.createBean(new XP('<div class="ag-dialog-button"></span>')),t=e.getGui();return this.maximizeIcon=wP("maximize",this.gos),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=wP("minimize",this.gos),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}}.prototype,"popupService",2);var TL=0,_L=class extends MR{constructor(){super(...arguments),this.popupList=[]}postConstruct(){this.ctrlsService.whenReady((e=>{this.gridCtrl=e.gridCtrl})),this.addManagedListener(this.eventService,OR.EVENT_GRID_STYLES_CHANGED,this.handleThemeChange.bind(this))}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:n}=e,i=this.getPopupIndex(n);if(-1!==i){this.popupList[i].alignedToElement=t}const r=t.getBoundingClientRect(),s=this.getParentRect(),o=this.keepXYWithinBounds(n,r.top-s.top,0),a=n.clientWidth>0?n.clientWidth:200;n.style.minWidth="".concat(a,"px");const l=s.right-s.left-a;let c;function u(){return r.right-s.left-2}function d(){return r.left-s.left-a}this.gos.get("enableRtl")?(c=d(),c<0&&(c=u(),this.setAlignedStyles(n,"left")),c>l&&(c=0,this.setAlignedStyles(n,"right"))):(c=u(),c>l&&(c=d(),this.setAlignedStyles(n,"right")),c<0&&(c=0,this.setAlignedStyles(n,"left"))),n.style.left="".concat(c,"px"),n.style.top="".concat(o,"px")}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:n,nudgeY:i,skipObserver:r}=e;this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:!0,skipObserver:r,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:r,eventSource:s,alignSide:o="left",position:a="over",column:l,rowNode:c,type:u}=e,d=s.getBoundingClientRect(),h=this.getParentRect(),p=this.getPopupIndex(t);if(-1!==p){this.popupList[p].alignedToElement=s}this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:r,updatePosition:()=>{let n,r=d.left-h.left;if("right"===o&&(r-=t.offsetWidth-d.width),"over"===a)n=d.top-h.top,this.setAlignedStyles(t,"over");else{this.setAlignedStyles(t,"under");n="under"===this.shouldRenderUnderOrAbove(t,d,h,e.nudgeY||0)?d.top-h.top+d.height:d.top-t.offsetHeight-2*(i||0)-h.top}return{x:r,y:n}},postProcessCallback:()=>this.callPostProcessPopup(u,t,s,null,l,c)})}shouldRenderUnderOrAbove(e,t,n,i){const r=n.bottom-t.bottom,s=t.top-n.top,o=e.offsetHeight+i;return r>o?"under":s>o||s>r?"above":"under"}setAlignedStyles(e,t){const n=this.getPopupIndex(e);if(-1===n)return;const i=this.popupList[n],{alignedToElement:r}=i;if(!r)return;["right","left","over","above","under"].forEach((t=>{r.classList.remove("ag-has-popup-positioned-".concat(t)),e.classList.remove("ag-popup-positioned-".concat(t))})),t&&(r.classList.add("ag-has-popup-positioned-".concat(t)),e.classList.add("ag-popup-positioned-".concat(t)))}callPostProcessPopup(e,t,n,i,r,s){const o=this.gos.getCallback("postProcessPopup");if(o){o({column:r,rowNode:s,ePopup:t,type:e,eventSource:n,mouseEvent:i})}}positionPopup(e){var t=this;const{ePopup:n,keepWithinBounds:i,nudgeX:r,nudgeY:s,skipObserver:o,updatePosition:a}=e,l={width:0,height:0},c=function(){let o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{x:c,y:u}=a();o&&n.clientWidth===l.width&&n.clientHeight===l.height||(l.width=n.clientWidth,l.height=n.clientHeight,r&&(c+=r),s&&(u+=s),i&&(c=t.keepXYWithinBounds(n,c,1),u=t.keepXYWithinBounds(n,u,0)),n.style.left="".concat(c,"px"),n.style.top="".concat(u,"px"),e.postProcessCallback&&e.postProcessCallback())};if(c(),!o){const e=this.resizeObserverService.observeResize(n,(()=>c(!0)));setTimeout((()=>e()),_L.WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map((e=>e.element))}getPopupList(){return this.popupList}getParentRect(){const e=this.gos.getDocument();let t=this.getPopupParent();return t===e.body?t=e.documentElement:"static"===getComputedStyle(t).position&&(t=t.offsetParent),HM(t)}keepXYWithinBounds(e,t,n){const i=0===n,r=i?"clientHeight":"clientWidth",s=i?"top":"left",o=i?"offsetHeight":"offsetWidth",a=i?"scrollTop":"scrollLeft",l=this.gos.getDocument(),c=l.documentElement,u=this.getPopupParent(),d=u.getBoundingClientRect(),h=l.documentElement.getBoundingClientRect(),p=u===l.body,g=e[o];let f=p?(i?VM:GM)(c)+c[a]:u[r];p&&(f-=Math.abs(h[s]-d[s]));const m=f-g;return Math.min(Math.max(t,0),Math.abs(m))}addPopup(e){const t=this.gos.getDocument(),{eChild:n,ariaLabel:i,alwaysOnTop:r,positionCallback:s,anchorToElement:o}=e;if(!t)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:()=>{}};const a=this.getPopupIndex(n);if(-1!==a){return{hideFunc:this.popupList[a].hideFunc}}this.initialisePopupPosition(n);const l=this.createPopupWrapper(n,i,!!r),c=this.addEventListenersToPopup(GT(VT({},e),{wrapperEl:l}));return s&&s(),this.addPopupToPopupList(n,l,c,o),{hideFunc:c}}initialisePopupPosition(e){const t=this.getPopupParent().getBoundingClientRect();YT(e.style.top)||(e.style.top="".concat(-1*t.top,"px")),YT(e.style.left)||(e.style.left="".concat(-1*t.left,"px"))}createPopupWrapper(e,t,n){const i=this.getPopupParent(),r=document.createElement("div"),{allThemes:s}=this.environment.getTheme();return s.length&&r.classList.add(...s),r.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||pD(e,"dialog"),yD(e,t),r.appendChild(e),i.appendChild(r),n?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),r}handleThemeChange(){const{allThemes:e}=this.environment.getTheme();for(const t of this.popupList){for(const e of Array.from(t.wrapper.classList))e.startsWith("ag-theme-")&&t.wrapper.classList.remove(e);e.length&&t.wrapper.classList.add(...e)}}addEventListenersToPopup(e){var t=this;const n=this.gos.getDocument(),i=this.getPopupParent(),{wrapperEl:r,eChild:s,closedCallback:o,afterGuiAttached:a,closeOnEsc:l,modal:c}=e;let u=!1;const d=e=>{if(!r.contains(this.gos.getActiveDomElement()))return;e.key!==SP.ESCAPE||SR(e)||g({keyboardEvent:e})},h=e=>g({mouseEvent:e}),p=e=>g({touchEvent:e}),g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mouseEvent:a,touchEvent:l,keyboardEvent:c,forceHide:g}=e;(g||!t.isEventFromCurrentPopup({mouseEvent:a,touchEvent:l},s)&&!u)&&(u=!0,i.removeChild(r),n.removeEventListener("keydown",d),n.removeEventListener("mousedown",h),n.removeEventListener("touchstart",p),n.removeEventListener("contextmenu",h),t.eventService.removeEventListener(OR.EVENT_DRAG_STARTED,h),o&&o(a||l||c),t.removePopupFromPopupList(s))};return a&&a({hidePopup:g}),window.setTimeout((()=>{l&&n.addEventListener("keydown",d),c&&(n.addEventListener("mousedown",h),this.eventService.addEventListener(OR.EVENT_DRAG_STARTED,h),n.addEventListener("touchstart",p),n.addEventListener("contextmenu",h))}),0),g}addPopupToPopupList(e,t,n,i){this.popupList.push({element:e,wrapper:t,hideFunc:n,instanceId:TL++,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i)}getPopupIndex(e){return this.popupList.findIndex((t=>t.element===e))}setPopupPositionRelatedToElement(e,t){const n=this.getPopupIndex(e);if(-1===n)return;const i=this.popupList[n];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then((e=>e&&e())),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;const r=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=r,i.isAnchored=!0,r}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter((t=>t.element!==e))}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),n=t.getBoundingClientRect(),{element:i,ePopup:r}=e,s=i.getBoundingClientRect(),o=n.top-s.top,a=n.left-s.left;let l=o,c=a;const u=r.style.top,d=parseInt(u.substring(0,u.length-1),10),h=r.style.left,p=parseInt(h.substring(0,h.length-1),10);return new WP((n=>{this.getFrameworkOverrides().setInterval((()=>{const n=t.getBoundingClientRect(),s=i.getBoundingClientRect();if(0==s.top&&0==s.left&&0==s.height&&0==s.width)return void e.hidePopup();const u=n.top-s.top;if(u!=l){const e=this.keepXYWithinBounds(r,d+o-u,0);r.style.top="".concat(e,"px")}l=u;const h=n.left-s.left;if(h!=c){const e=this.keepXYWithinBounds(r,p+a-h,1);r.style.left="".concat(e,"px")}c=h}),200).then((e=>{n((()=>{null!=e&&window.clearInterval(e)}))}))}))}hasAnchoredPopup(){return this.popupList.some((e=>e.isAnchored))}isEventFromCurrentPopup(e,t){const{mouseEvent:n,touchEvent:i}=e,r=n||i;if(!r)return!1;const s=this.getPopupIndex(t);if(-1===s)return!1;for(let o=s;o<this.popupList.length;o++){if(AR(this.popupList[o].element,r))return!0}return this.isElementWithinCustomPopup(r.target)}isElementWithinCustomPopup(e){const t=this.gos.getDocument();for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const n=this.getWrapper(e);n&&(n.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(n))}bringPopupToFront(e){const t=this.getPopupParent(),n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=n.length,r=Array.prototype.slice.call(t.querySelectorAll(".ag-popup.ag-always-on-top")),s=r.length,o=this.getWrapper(e);if(!o||i<=1||!t.contains(e))return;const a=n.indexOf(o),l=o.querySelectorAll("div"),c=[];if(l.forEach((e=>{0!==e.scrollTop&&c.push([e,e.scrollTop])})),s){o.classList.contains("ag-always-on-top")?a!==i-1&&tR(r).insertAdjacentElement("afterend",o):a!==i-s-1&&r[0].insertAdjacentElement("beforebegin",o)}else a!==i-1&&tR(n).insertAdjacentElement("afterend",o);for(;c.length;){const e=c.pop();e[0].scrollTop=e[1]}}};_L.WAIT_FOR_POPUP_CONTENT_RESIZE=200,WT([F_("focusService")],_L.prototype,"focusService",2),WT([F_("ctrlsService")],_L.prototype,"ctrlsService",2),WT([F_("resizeObserverService")],_L.prototype,"resizeObserverService",2),WT([k_],_L.prototype,"postConstruct",1),_L=WT([L_("popupService")],_L);var RL=class extends XP{constructor(){super('\n        <div class="ag-autocomplete-row" role="presentation">\n            <div class="ag-autocomplete-row-label"></div>\n        </div>'),this.hasHighlighting=!1}setState(e,t){this.value=e,this.render(),this.updateSelected(t)}updateSelected(e){this.addOrRemoveCssClass("ag-autocomplete-row-selected",e)}setSearchString(e){var t;let n=!1;if(YT(e)){const i=null==(t=this.value)?void 0:t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(i>=0){n=!0,this.hasHighlighting=!0;const t=i+e.length,r=zR(this.value.slice(0,i)),s=zR(this.value.slice(i,t)),o=zR(this.value.slice(t));this.getGui().lastElementChild.innerHTML="".concat(r,"<b>").concat(s,"</b>").concat(o)}}!n&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var e;this.getGui().lastElementChild.innerHTML=null!=(e=zR(this.value))?e:"&nbsp;"}},DL=class e extends $I{constructor(t){super(e.TEMPLATE),this.params=t,this.searchString=""}destroy(){super.destroy()}init(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new dL({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:e=>this.autocompleteEntries[e]});const e=this.virtualList.getGui();this.addManagedListener(e,"click",(()=>this.params.onConfirmed())),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",(e=>e.preventDefault())),this.setSelectedValue(0)}onNavigationKeyDown(e,t){e.preventDefault();const n=this.autocompleteEntries.indexOf(this.selectedValue),i=t===SP.UP?n-1:n+1;this.checkSetSelectedValue(i)}setSearch(e){this.searchString=e,YT(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(e,t){let n,i=!1;const r=e.toLocaleLowerCase(),s=t.filter((e=>{const t=e.toLocaleLowerCase().indexOf(r),s=0===t,o=t>=0;return o&&(!n||!i&&s||i===s&&e.length<n.length)&&(n=e,i=s),o}));return!n&&s.length&&(n=s[0]),{topMatch:n,allMatches:s}}runSearch(){var e,t;const{autocompleteEntries:n}=this.params,i=n.map((e=>{var t;return null!=(t=e.displayValue)?t:e.key}));let r,s;if(this.params.useFuzzySearch)r=fP(this.searchString,i,!0).values,s=r.length?r[0]:void 0;else{const e=this.runContainsSearch(this.searchString,i);r=e.allMatches,s=e.topMatch}let o=n.filter((e=>{let{key:t,displayValue:n}=e;return r.includes(null!=n?n:t)}));if(!o.length&&this.selectedValue&&(null==(t=null==(e=this.params)?void 0:e.forceLastSelection)?void 0:t.call(e,this.selectedValue,this.searchString))&&(o=[this.selectedValue]),this.autocompleteEntries=o,this.virtualList.refresh(),!s)return;const a=r.indexOf(s);this.checkSetSelectedValue(a)}updateSearchInList(){this.virtualList.forEachRenderedRow((e=>e.setSearchString(this.searchString)))}checkSetSelectedValue(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)}setSelectedValue(e){const t=this.autocompleteEntries[e];this.selectedValue!==t&&(this.selectedValue=t,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow(((t,n)=>{t.updateSelected(e===n)})))}createRowComponent(e){var t;const n=new RL;return this.getContext().createBean(n),n.setState(null!=(t=e.displayValue)?t:e.key,e===this.selectedValue),n}onMouseMove(e){const t=this.virtualList.getGui().getBoundingClientRect(),n=this.virtualList.getScrollTop(),i=e.clientY-t.top+n,r=Math.floor(i/this.virtualList.getRowHeight());this.checkSetSelectedValue(r)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var e;return this.autocompleteEntries.length&&null!=(e=this.selectedValue)?e:null}};DL.TEMPLATE='<div class="ag-autocomplete-list-popup">\n            <div ref="eList" class="ag-autocomplete-list"></div>\n        <div>',WT([QP("eList")],DL.prototype,"eList",2),WT([k_],DL.prototype,"init",1);var ML=DL,PL=class e extends XP{constructor(){super('\n            <div class="ag-autocomplete" role="presentation">\n                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>\n            </div>'),this.isListOpen=!1,this.lastPosition=0,this.valid=!0}postConstruct(){this.eAutocompleteInput.onValueChange((e=>this.onValueChanged(e))),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc((()=>{this.destroyBean(this.autocompleteList)})),this.addGuiEventListener("focusout",(()=>this.onFocusOut()))}onValueChanged(e){const t=zT(e);this.updateValue(t),this.updateAutocompleteList(t)}updateValue(t){this.updateLastPosition(),this.dispatchEvent({type:e.EVENT_VALUE_CHANGED,value:t}),this.validate(t)}updateAutocompleteList(e){var t,n,i,r;const s=null!=(n=null==(t=this.listGenerator)?void 0:t.call(this,e,this.lastPosition))?n:{enabled:!1};if(s.type&&s.type===(null==(i=this.autocompleteListParams)?void 0:i.type)||this.isListOpen&&this.closeList(),this.autocompleteListParams=s,null==(r=this.autocompleteListParams)?void 0:r.enabled){this.isListOpen||this.openList();const{searchString:e}=this.autocompleteListParams;this.autocompleteList.setSearch(null!=e?e:"")}else this.isListOpen&&this.closeList()}onKeyDown(e){const t=e.key;switch(this.updateLastPosition(),t){case SP.ENTER:this.onEnterKeyDown(e);break;case SP.TAB:this.onTabKeyDown(e);break;case SP.DOWN:case SP.UP:this.onUpDownKeyDown(e,t);break;case SP.LEFT:case SP.RIGHT:case SP.PAGE_HOME:case SP.PAGE_END:setTimeout((()=>{this.updatePositionAndList()}));break;case SP.ESCAPE:this.onEscapeKeyDown(e);break;case SP.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList())}}confirmSelection(){var t;const n=null==(t=this.autocompleteList)?void 0:t.getSelectedValue();n&&(this.closeList(),this.dispatchEvent({type:e.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:n,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())}onEnterKeyDown(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(e,t){var n;e.preventDefault(),this.isListOpen?null==(n=this.autocompleteList)||n.onNavigationKeyDown(e,t):this.forceOpenList()}onEscapeKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var e;this.updateLastPosition(),this.updateAutocompleteList(null!=(e=this.eAutocompleteInput.getValue())?e:null)}setCaret(e,t){const n=this.gos.getDocument(),i=this.gos.getActiveDomElement();!t||i&&i!==n.body||this.eAutocompleteInput.getFocusableElement().focus();const r=this.eAutocompleteInput.getInputElement();r.setSelectionRange(e,e),e===r.value.length&&(r.scrollLeft=r.scrollWidth)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var e;this.lastPosition=null!=(e=this.eAutocompleteInput.getInputElement().selectionStart)?e:0}validate(t){var n;this.validator&&(this.validationMessage=this.validator(t),this.eAutocompleteInput.getInputElement().setCustomValidity(null!=(n=this.validationMessage)?n:""),this.valid=!this.validationMessage,this.dispatchEvent({type:e.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new ML({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));const e=this.autocompleteList.getGui(),t={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gos.get("enableRtl")?"right":"left",keepWithinBounds:!0},n=this.popupService.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:()=>this.popupService.positionPopupByComponent(t),ariaLabel:this.listAriaLabel});this.hidePopup=n.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:e.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})}getValue(){return zT(this.eAutocompleteInput.getValue())}setInputPlaceholder(e){return this.eAutocompleteInput.setInputPlaceholder(e),this}setInputAriaLabel(e){return this.eAutocompleteInput.setInputAriaLabel(e),this}setListAriaLabel(e){return this.listAriaLabel=e,this}setListGenerator(e){return this.listGenerator=e,this}setValidator(e){return this.validator=e,this}isValid(){return this.valid}setValue(e){const{value:t,position:n,silent:i,updateListOnlyIfOpen:r,restoreFocus:s}=e;this.eAutocompleteInput.setValue(t,!0),this.setCaret(null!=n?n:this.lastPosition,s),i||this.updateValue(t),r&&!this.isListOpen||this.updateAutocompleteList(t)}setForceLastSelection(e){return this.forceLastSelection=e,this}setInputDisabled(e){return this.eAutocompleteInput.setDisabled(e),this}};PL.EVENT_VALUE_CHANGED="eventValueChanged",PL.EVENT_VALUE_CONFIRMED="eventValueConfirmed",PL.EVENT_OPTION_SELECTED="eventOptionSelected",PL.EVENT_VALID_CHANGED="eventValidChanged",WT([F_("popupService")],PL.prototype,"popupService",2),WT([QP("eAutocompleteInput")],PL.prototype,"eAutocompleteInput",2),WT([k_],PL.prototype,"postConstruct",1);var IL=PL,NL=class e extends XP{constructor(e,t,n,i){super(),this.dragSourceDropTarget=e,this.ghost=t,this.horizontal=n,this.template=i}init(){var t;this.setTemplate(null!=(t=this.template)?t:e.TEMPLATE);const n=this.getGui();this.addElementClasses(n),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(wP("columnDrag",this.gos)),this.eButton.appendChild(wP("cancel",this.gos)),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){const e=this.localeService.getLocaleTextFunc(),t=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(t,e),yD(this.getGui(),t.join(". "))}addAdditionalAriaInstructions(e,t){if(this.isRemovable()){const n=t("ariaDropZoneColumnComponentDescription","Press DELETE to remove");e.push(n)}}setupTooltip(){const e=()=>{const e=this.getTooltip();this.setTooltip({newTooltipText:e})};e(),this.addManagedListener(this.eventService,OR.EVENT_NEW_COLUMNS_LOADED,e)}getDragSourceId(){}getDefaultIconName(){return dN.ICON_NOT_ALLOWED}addDragSource(){const{dragAndDropService:e,eDragHandle:t}=this,n=this.createGetDragItem(),i=this.getDefaultIconName(),r={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:t,getDefaultIconName:()=>i,getDragItem:n,dragItemName:this.getDisplayName()};e.addDragSource(r,!0),this.addDestroyFunc((()=>e.removeDragSource(r)))}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){IM(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();const t={type:e.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",(e=>this.onKeyDown(e))),this.addManagedListener(this.eButton,"click",(e=>{this.dispatchEvent(t),e.stopPropagation()}));const n=new zI(this.eButton);this.addManagedListener(n,zI.EVENT_TAP,(()=>{this.dispatchEvent(t)})),this.addDestroyFunc(n.destroy.bind(n))}onKeyDown(t){t.key===SP.DELETE&&this.isRemovable()&&(t.preventDefault(),this.dispatchEvent({type:e.EVENT_COLUMN_REMOVE}))}getDisplayValue(){return this.getDisplayName()}setTextValue(){const e=zR(this.getDisplayValue());this.eText.innerHTML=e}addElementClasses(e,t){t=t?"-".concat(t):"";const n=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop-cell".concat(t),"ag-column-drop-".concat(n,"-cell").concat(t))}destroy(){super.destroy(),this.dragSourceDropTarget=null}};NL.EVENT_COLUMN_REMOVE="columnRemove",NL.TEMPLATE='<span role="option">\n          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n        </span>',WT([F_("dragAndDropService")],NL.prototype,"dragAndDropService",2),WT([QP("eText")],NL.prototype,"eText",2),WT([QP("eDragHandle")],NL.prototype,"eDragHandle",2),WT([QP("eButton")],NL.prototype,"eButton",2),WT([k_],NL.prototype,"init",1);var kL=NL,OL=class e extends XP{constructor(t){super('<div class="ag-unselectable" role="presentation"></div>'),this.horizontal=t,this.state=e.STATE_NOT_DRAGGING,this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=document.createElement("div"),this.addElementClasses(this.ePillDropList,"list"),pD(this.ePillDropList,"listbox")}isHorizontal(){return this.horizontal}toggleResizable(e){this.positionableFeature.setResizable(!!e&&{bottom:!0}),this.resizeEnabled=e}isSourceEventFromTarget(e){const{dropZoneTarget:t,dragSource:n}=e;return t.contains(n.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach((e=>e())),this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,zM(this.getGui()),zM(this.ePillDropList)}init(e){this.params=null!=e?e:{},this.createManagedBean(new iI(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new oI(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),yD(this.ePillDropList,this.getAriaLabel())}handleKeyDown(e){const t=!this.horizontal;let n=e.key===SP.DOWN,i=e.key===SP.UP;if(!t){const t=this.gos.get("enableRtl");n=!t&&e.key===SP.RIGHT||t&&e.key===SP.LEFT,i=!t&&e.key===SP.LEFT||t&&e.key===SP.RIGHT}if(!n&&!i)return;const r=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,i);r&&(e.preventDefault(),r.focus())}addElementClasses(e,t){t=t?"-".concat(t):"";const n=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop".concat(t),"ag-column-drop-".concat(n).concat(t))}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.dragAndDropService.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(e){const t=this.getNewInsertIndex(e);if(t<0)return!1;const n=this.minimumAllowedNewInsertIndex(),i=Math.max(n,t),r=i!==this.insertIndex;return r&&(this.insertIndex=i),r}getNewInsertIndex(e){const t=e.event,n=this.horizontal?t.clientX:t.clientY,i=this.childPillComponents.map((e=>e.getGui().getBoundingClientRect())),r=i.findIndex((e=>this.horizontal?e.right>n&&e.left<n:e.top<n&&e.bottom>n));if(-1===r){const e=this.gos.get("enableRtl");if(i.every((e=>n>(this.horizontal?e.right:e.bottom))))return e&&this.horizontal?0:this.childPillComponents.length;return i.every((e=>n<(this.horizontal?e.left:e.top)))?e&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=r?r+1:r}checkDragStartedBySelf(t){this.state===e.STATE_NOT_DRAGGING&&(this.state=e.STATE_REARRANGE_ITEMS,this.potentialDndItems=this.getItems(t.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(t),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}handleDragEnterEnd(e){}onDragEnter(t){const n=this.getItems(t.dragSource.getDragItem());this.state=e.STATE_NEW_ITEMS_IN;const i=n.filter((e=>this.isItemDroppable(e,t))),r=i.every((e=>-1!==this.childPillComponents.map((e=>e.getItem())).indexOf(e)));0!==i.length&&(this.potentialDndItems=i,r?this.state=e.STATE_NOT_DRAGGING:(this.handleDragEnterEnd(t),this.checkInsertIndex(t),this.refreshGui()))}isPotentialDndItems(){return eR(this.potentialDndItems)}handleDragLeaveEnd(e){}onDragLeave(t){if(this.state===e.STATE_REARRANGE_ITEMS){const e=this.getItems(t.dragSource.getDragItem());this.removeItems(e)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(t),this.potentialDndItems=[],this.refreshGui()),this.state=e.STATE_NOT_DRAGGING}refreshOnDragStop(){return!0}onDragStop(){if(this.isPotentialDndItems()){let t=!1;this.state===e.STATE_NEW_ITEMS_IN?(this.addItems(this.potentialDndItems),t=!0):t=this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],!this.refreshOnDragStop()&&t||this.refreshGui()}this.state=e.STATE_NOT_DRAGGING}removeItems(e){const t=this.getExistingItems().filter((t=>!pR(e,t)));this.updateItems(t)}addItems(e){if(!e)return;const t=this.getExistingItems().slice(),n=e.filter((e=>t.indexOf(e)<0));dR(t,n,this.insertIndex),this.updateItems(t)}addItem(e){this.insertIndex=this.getExistingItems().length,this.addItems([e]),this.refreshGui()}rearrangeItems(e){const t=this.getNonGhostItems().slice();return dR(t,e,this.insertIndex),!nR(t,this.getExistingItems())&&(this.updateItems(t),!0)}refreshGui(){const e=this.ePillDropList.scrollTop,t=this.resizeEnabled,n=this.getFocusedItem();let i=this.focusService.findNextFocusableElement();i||(i=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),this.isHorizontal()||(this.ePillDropList.scrollTop=e),t&&this.toggleResizable(t),this.focusService.isKeyboardMode()&&this.restoreFocus(n,i)}getFocusedItem(){const e=this.getGui(),t=this.gos.getActiveDomElement();if(!e.contains(t))return-1;return Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(t)}restoreFocus(e,t){const n=this.getGui(),i=Array.from(n.querySelectorAll(".ag-column-drop-cell"));if(-1===e)return;0===i.length&&t.focus();const r=i[Math.min(i.length-1,e)];r&&r.focus()}focusList(e){const t=e?this.childPillComponents.length-1:0;this.restoreFocus(t,this.getFocusableElement())}getNonGhostItems(){const e=this.getExistingItems();return this.isPotentialDndItems()?e.filter((e=>!pR(this.potentialDndItems,e))):e}addItemsToGui(){const e=this.getNonGhostItems().map((e=>this.createItemComponent(e,!1)));if(this.isPotentialDndItems()){const t=this.potentialDndItems.map((e=>this.createItemComponent(e,!0)));this.insertIndex>=e.length?e.push(...t):e.splice(this.insertIndex,0,...t)}this.appendChild(this.ePillDropList),e.forEach(((e,t)=>{t>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(e.getGui())})),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){this.childPillComponents.forEach(((e,t)=>{const n=e.getGui();PD(n,t+1),MD(n,this.childPillComponents.length)}))}createItemComponent(e,t){const n=this.createPillComponent(e,this.dropTarget,t,this.horizontal);return n.addEventListener(kL.EVENT_COLUMN_REMOVE,this.removeItems.bind(this,[e])),this.context.createBean(n),this.guiDestroyFunctions.push((()=>this.destroyBean(n))),t||this.childPillComponents.push(n),n}addIconAndTitleToGui(){const{title:e,icon:t}=this.params;if(!e||!t)return;const n=document.createElement("div");if(TD(n,!0),this.addElementClasses(n,"title-bar"),this.addElementClasses(t,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingItemsEmpty()),n.appendChild(t),!this.horizontal){const t=document.createElement("span");this.addElementClasses(t,"title"),t.innerHTML=e,n.appendChild(t)}this.appendChild(n)}isExistingItemsEmpty(){return 0===this.getExistingItems().length}addEmptyMessageToGui(){const{emptyMessage:e}=this.params;if(!e||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;const t=document.createElement("span");t.innerHTML=e,this.addElementClasses(t,"empty-message"),this.ePillDropList.appendChild(t)}addArrow(e){if(this.horizontal){const t=wP(this.gos.get("enableRtl")?"smallLeft":"smallRight",this.gos);this.addElementClasses(t,"cell-separator"),e.appendChild(t)}}};OL.STATE_NOT_DRAGGING="notDragging",OL.STATE_NEW_ITEMS_IN="newItemsIn",OL.STATE_REARRANGE_ITEMS="rearrangeItems",WT([F_("focusService")],OL.prototype,"focusService",2),WT([F_("dragAndDropService")],OL.prototype,"dragAndDropService",2);var LL=["touchstart","touchend","touchmove","touchcancel"],FL=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e()}setInterval(e,t){return new WP((n=>{n(window.setInterval(e,t))}))}addEventListener(e,t,n,i){const r=pR(LL,t);e.addEventListener(t,n,{capture:!!i,passive:r})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){const t="solid"===this.frameworkName?"react":this.frameworkName;return"https://www.ag-grid.com/".concat(t,"-data-grid").concat(e?"/".concat(e):"")}},BL=class extends MR{getNextCellToFocus(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const n=e===SP.UP,i=e===SP.DOWN,r=e===SP.LEFT;let s,o;if(n||i)o=n?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),s=t.column;else{const e=this.columnModel.getAllDisplayedColumns(),n=this.gos.get("enableRtl");o=t.rowIndex,s=r!==n?e[0]:tR(e)}return{rowIndex:o,rowPinned:null,column:s}}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,i=!1;for(;!i;){switch(e){case SP.UP:n=this.getCellAbove(n);break;case SP.DOWN:n=this.getCellBelow(n);break;case SP.RIGHT:n=this.gos.get("enableRtl")?this.getCellToLeft(n):this.getCellToRight(n);break;case SP.LEFT:n=this.gos.get("enableRtl")?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,console.warn("AG Grid: unknown key for navigation "+e)}i=!n||this.isCellGoodToFocusOn(n)}return n}isCellGoodToFocusOn(e){const t=e.column;let n;switch(e.rowPinned){case"top":n=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":n=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:n=this.rowModel.getRow(e.rowIndex)}if(!n)return!1;return!t.isSuppressNavigable(n)}getCellToLeft(e){if(!e)return null;const t=this.columnModel.getDisplayedColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.columnModel.getDisplayedColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,n=e.rowPinned;if(this.isLastRowInContainer(e))switch(n){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}const i=this.rowModel.getRow(e.rowIndex),r=this.getNextStickyPosition(i);return r||{rowIndex:t+1,rowPinned:n}}getNextStickyPosition(e,t){if(!this.gos.isGroupRowsSticky()||!e||!e.sticky)return;let n=[];n=this.rowRenderer.getStickyTopRowCtrls().some((t=>t.getRowNode().rowIndex===e.rowIndex))?[...this.rowRenderer.getStickyTopRowCtrls()].sort(((e,t)=>e.getRowNode().rowIndex-t.getRowNode().rowIndex)):[...this.rowRenderer.getStickyBottomRowCtrls()].sort(((e,t)=>t.getRowNode().rowIndex-e.getRowNode().rowIndex));const i=t?-1:1,r=n.findIndex((t=>t.getRowNode().rowIndex===e.rowIndex)),s=n[r+i];return s?{rowIndex:s.getRowNode().rowIndex,rowPinned:null}:void 0}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,n=e.rowIndex;if("top"===t){return this.pinnedRowModel.getPinnedTopRowData().length-1<=n}if("bottom"===t){return this.pinnedRowModel.getPinnedBottomRowData().length-1<=n}return this.paginationProxy.getPageLastRow()<=n}getRowAbove(e){const t=e.rowIndex,n=e.rowPinned;if(n?0===t:t===this.paginationProxy.getPageFirstRow())return"top"===n?null:n&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;const i=this.rowModel.getRow(e.rowIndex),r=this.getNextStickyPosition(i,!0);return r||{rowIndex:t-1,rowPinned:n}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const t=this.columnModel.getAllDisplayedColumns();let n=e.rowIndex,i=e.rowPinned,r=this.columnModel.getDisplayedColAfter(e.column);if(!r){r=t[0];const s=this.getRowBelow(e);if(qT(s))return null;if(!s.rowPinned&&!this.paginationProxy.isRowInPage(s))return null;n=s?s.rowIndex:null,i=s?s.rowPinned:null}return{rowIndex:n,column:r,rowPinned:i}}getNextTabbedCellBackwards(e){const t=this.columnModel.getAllDisplayedColumns();let n=e.rowIndex,i=e.rowPinned,r=this.columnModel.getDisplayedColBefore(e.column);if(!r){r=tR(t);const s=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(qT(s))return null;if(!s.rowPinned&&!this.paginationProxy.isRowInPage(s))return null;n=s?s.rowIndex:null,i=s?s.rowPinned:null}return{rowIndex:n,column:r,rowPinned:i}}};WT([F_("columnModel")],BL.prototype,"columnModel",2),WT([F_("rowModel")],BL.prototype,"rowModel",2),WT([F_("rowRenderer")],BL.prototype,"rowRenderer",2),WT([F_("pinnedRowModel")],BL.prototype,"pinnedRowModel",2),WT([F_("paginationProxy")],BL.prototype,"paginationProxy",2),BL=WT([L_("cellNavigationService")],BL);var VL=class extends MR{constructor(){super(...arguments),this.consuming=!1}setBeans(e){this.logger=e.create("AlignedGridsService")}getAlignedGridApis(){var e;let t=null!=(e=this.gos.get("alignedGrids"))?e:[];const n="function"===typeof t;"function"===typeof t&&(t=t());const i=()=>"See ".concat(this.getFrameworkOverrides().getDocLink("aligned-grids"));return t.map((e=>{var t;if(!e)return m_("alignedGrids contains an undefined option."),n||m_('You may want to configure via a callback to avoid setup race conditions:\n                     "alignedGrids: () => [linkedGrid]"'),void m_(i());if(e instanceof hk)return e;const r=e;return"current"in r?null==(t=r.current)?void 0:t.api:(r.api||m_("alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ".concat(i())),r.api)})).filter((e=>!!e&&!e.isDestroyed()))}init(){this.addManagedListener(this.eventService,OR.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach((t=>{if(t.isDestroyed())return;const n=t.__getAlignedGridService();e(n)}))}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent((t=>{t.onColumnEvent(e)}))}fireScrollEvent(e){"horizontal"===e.direction&&this.fireEvent((t=>{t.onScrollEvent(e)}))}onScrollEvent(e){this.onEvent((()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)}))}getMasterColumns(e){const t=[];return e.columns?e.columns.forEach((e=>{t.push(e)})):e.column&&t.push(e.column),t}getColumnIds(e){const t=[];return e.columns?e.columns.forEach((e=>{t.push(e.getColId())})):e.column&&t.push(e.column.getColId()),t}onColumnEvent(e){this.onEvent((()=>{switch(e.type){case OR.EVENT_COLUMN_MOVED:case OR.EVENT_COLUMN_VISIBLE:case OR.EVENT_COLUMN_PINNED:case OR.EVENT_COLUMN_RESIZED:const t=e;this.processColumnEvent(t);break;case OR.EVENT_COLUMN_GROUP_OPENED:const n=e;this.processGroupOpenedEvent(n);break;case OR.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}}))}processGroupOpenedEvent(e){e.columnGroups.forEach((t=>{let n=null;if(t){const e=t.getGroupId();n=this.columnModel.getProvidedColumnGroup(e)}t&&!n||(this.logger.log("onColumnEvent-> processing "+e+" expanded = "+t.isExpanded()),this.columnModel.setColumnGroupOpened(n,t.isExpanded(),"alignedGridChanged"))}))}processColumnEvent(e){var t;const n=e.column;let i=null;if(n&&(i=this.columnModel.getPrimaryColumn(n.getColId())),n&&!i)return;const r=this.getMasterColumns(e);switch(e.type){case OR.EVENT_COLUMN_MOVED:{const t=e,n=e.api.getColumnState().map((e=>({colId:e.colId})));this.columnModel.applyColumnState({state:n,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing ".concat(e.type," toIndex = ").concat(t.toIndex))}break;case OR.EVENT_COLUMN_VISIBLE:{const t=e,n=e.api.getColumnState().map((e=>({colId:e.colId,hide:e.hide})));this.columnModel.applyColumnState({state:n},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing ".concat(e.type," visible = ").concat(t.visible))}break;case OR.EVENT_COLUMN_PINNED:{const t=e,n=e.api.getColumnState().map((e=>({colId:e.colId,pinned:e.pinned})));this.columnModel.applyColumnState({state:n},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing ".concat(e.type," pinned = ").concat(t.pinned))}break;case OR.EVENT_COLUMN_RESIZED:const n=e,i={};r.forEach((t=>{this.logger.log("onColumnEvent-> processing ".concat(e.type," actualWidth = ").concat(t.getActualWidth())),i[t.getId()]={key:t.getColId(),newWidth:t.getActualWidth()}})),null==(t=n.flexColumns)||t.forEach((e=>{i[e.getId()]&&delete i[e.getId()]})),this.columnModel.setColumnWidths(Object.values(i),!1,n.finished,"alignedGridChanged")}const s=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach((e=>{e.setGridOption("alwaysShowVerticalScroll",s)}))}};WT([F_("columnModel")],VL.prototype,"columnModel",2),WT([F_("ctrlsService")],VL.prototype,"ctrlsService",2),WT([jT(0,G_("loggerFactory"))],VL.prototype,"setBeans",1),WT([k_],VL.prototype,"init",1),VL=WT([L_("alignedGridsService")],VL);var GL=class extends MR{constructor(){super(...arguments),this.selectedNodes=new Map,this.lastRowNode=null}init(){this.rowSelection=this.gos.get("rowSelection"),this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],(()=>{this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.rowSelection=this.gos.get("rowSelection"),this.deselectAllRowNodes({source:"api"})})),this.addManagedListener(this.eventService,OR.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))}destroy(){super.destroy(),this.resetNodes(),this.lastRowNode=null}isMultiselect(){return"multiple"===this.rowSelection}setNodesSelected(e){var t;const{newValue:n,clearSelection:i,suppressFinishActions:r,rangeSelect:s,nodes:o,event:a,source:l="api"}=e;if(0===o.length)return 0;if(o.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;const c=this.groupSelectsChildren&&!0===e.groupSelectsFiltered,u=o.map((e=>e.footer?e.sibling:e));if(s){if(o.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;let e=null;if("checkboxSelected"===l&&!1===n&&this.lastRowNode&&(this.lastRowNode.id?e=this.lastRowNode:this.lastRowNode=null),null==e&&(e=this.getLastSelectedNode()),e){const t=u[0];if(t!==e&&this.isMultiselect())return this.selectRange(t,e,n,l)}}this.lastRowNode=n?null:u[0];let d=0;for(let h=0;h<u.length;h++){const e=u[h];if(!(c&&e.group)){e.selectThisNode(n,a,l)&&d++}this.groupSelectsChildren&&(null==(t=e.childrenAfterGroup)?void 0:t.length)&&(d+=this.selectChildren(e,n,c,l))}if(!r){if(n&&(i||!this.isMultiselect())&&(d+=this.clearOtherNodes(u[0],l)),d>0){this.updateGroupsFromChildrenSelections(l);const e={type:OR.EVENT_SELECTION_CHANGED,source:l};this.eventService.dispatchEvent(e)}}return d}selectRange(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;const r=this.rowModel.getNodesInRangeForSelection(e,t);let s=0;r.forEach((e=>{if(e.group&&this.groupSelectsChildren)return;e.selectThisNode(n,void 0,i)&&s++})),this.updateGroupsFromChildrenSelections(i);const o={type:OR.EVENT_SELECTION_CHANGED,source:i};return this.eventService.dispatchEvent(o),s}selectChildren(e,t,n,i){const r=n?e.childrenAfterAggFilter:e.childrenAfterGroup;return qT(r)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:n,source:i,nodes:r})}getLastSelectedNode(){const e=Array.from(this.selectedNodes.keys());if(0==e.length)return null;const t=this.selectedNodes.get(tR(e));return t||null}getSelectedNodes(){const e=[];return this.selectedNodes.forEach((t=>{t&&e.push(t)})),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach((t=>{t&&t.data&&e.push(t.data)})),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach(((n,i)=>{n&&e(n)&&t.set(i,n)})),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren)return!1;if("clientSide"!==this.rowModel.getType())return!1;const n=this.rowModel.getRootNode();t||(t=new JO(!0,n)).setInactive();let i=!1;return t.forEachChangedNodeDepthFirst((t=>{if(t!==n){const n=t.calculateSelectedFromChildren();i=t.selectThisNode(null!==n&&n,void 0,e)||i}})),i}clearOtherNodes(e,t){const n=new Map;let i=0;return this.selectedNodes.forEach((r=>{if(r&&r.id!==e.id){const e=this.selectedNodes.get(r.id);i+=e.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&r.parent&&n.set(r.parent.id,r.parent)}})),n.forEach((e=>{const n=e.calculateSelectedFromChildren();e.selectThisNode(null!==n&&n,void 0,t)})),i}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(YT(t)&&e.id!==t.id&&t){const n=t.id;this.selectedNodes.get(n)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();if(this.resetNodes(),t){const t={type:OR.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(t)}}resetNodes(){var e;null==(e=this.selectedNodes)||e.clear()}getBestCostNodeSelection(){if("clientSide"!==this.rowModel.getType())return;const e=this.rowModel.getTopLevelNodes();if(null===e)return;const t=[];return function e(n){for(let i=0,r=n.length;i<r;i++){const r=n[i];if(r.isSelected())t.push(r);else{const t=r;t.group&&t.children&&e(t.children)}}}(e),t}isEmpty(){let e=0;return this.selectedNodes.forEach((t=>{t&&e++})),0===e}deselectAllRowNodes(e){const t=e=>e.selectThisNode(!1,void 0,i),n="clientSide"===this.rowModel.getType(),{source:i,justFiltered:r,justCurrentPage:s}=e;if(s||r){if(!n)return void console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");this.getNodesToSelect(r,s).forEach(t)}else this.selectedNodes.forEach((e=>{e&&t(e)})),this.reset(i);n&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(i);const o={type:OR.EVENT_SELECTION_CHANGED,source:i};this.eventService.dispatchEvent(o)}getSelectedCounts(e,t){let n=0,i=0;return this.getNodesToSelect(e,t).forEach((e=>{this.groupSelectsChildren&&e.group||(e.isSelected()?n++:e.selectable&&i++)})),{selectedCount:n,notSelectedCount:i}}getSelectAllState(e,t){const{selectedCount:n,notSelectedCount:i}=this.getSelectedCounts(e,t);return(0!==n||0!==i)&&(n>0&&i>0?null:n>0)}hasNodesToSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getNodesToSelect(e,t).filter((e=>e.selectable)).length>0}getNodesToSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not ".concat(this.rowModel.getType()));const n=[];if(t)return this.paginationProxy.forEachNodeOnPage((e=>{if(e.group)if(e.expanded)this.groupSelectsChildren||n.push(e);else{const t=e=>{var i;n.push(e),(null==(i=e.childrenAfterFilter)?void 0:i.length)&&e.childrenAfterFilter.forEach(t)};t(e)}else n.push(e)})),n;const i=this.rowModel;return e?(i.forEachNodeAfterFilter((e=>{n.push(e)})),n):(i.forEachNode((e=>{n.push(e)})),n)}selectAllRowNodes(e){if("clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not ".concat(this.rowModel.getType()));const{source:t,justFiltered:n,justCurrentPage:i}=e;this.getNodesToSelect(n,i).forEach((e=>e.selectThisNode(!0,void 0,t))),"clientSide"===this.rowModel.getType()&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t);const r={type:OR.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(r)}getSelectionState(){const e=[];return this.selectedNodes.forEach((t=>{(null==t?void 0:t.id)&&e.push(t.id)})),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return;const n=new Set(e),i=[];this.rowModel.forEachNode((e=>{n.has(e.id)&&i.push(e)})),this.setNodesSelected({newValue:!0,nodes:i,source:t})}};WT([F_("rowModel")],GL.prototype,"rowModel",2),WT([F_("paginationProxy")],GL.prototype,"paginationProxy",2),WT([k_],GL.prototype,"init",1),GL=WT([L_("selectionService")],GL);var HL=class{constructor(e){var t=this;this.viaApi=function(e){f_("Since v31, 'columnApi.".concat(e,"' is deprecated and moved to 'api.").concat(e,"'."));for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.api[e](...i)},this.api=e}sizeColumnsToFit(e){this.viaApi("sizeColumnsToFit",e)}setColumnGroupOpened(e,t){this.viaApi("setColumnGroupOpened",e,t)}getColumnGroup(e,t){return this.viaApi("getColumnGroup",e,t)}getProvidedColumnGroup(e){return this.viaApi("getProvidedColumnGroup",e)}getDisplayNameForColumn(e,t){return this.viaApi("getDisplayNameForColumn",e,t)}getDisplayNameForColumnGroup(e,t){return this.viaApi("getDisplayNameForColumnGroup",e,t)}getColumn(e){return this.viaApi("getColumn",e)}getColumns(){return this.viaApi("getColumns")}applyColumnState(e){return this.viaApi("applyColumnState",e)}getColumnState(){return this.viaApi("getColumnState")}resetColumnState(){this.viaApi("resetColumnState")}getColumnGroupState(){return this.viaApi("getColumnGroupState")}setColumnGroupState(e){this.viaApi("setColumnGroupState",e)}resetColumnGroupState(){this.viaApi("resetColumnGroupState")}isPinning(){return this.viaApi("isPinning")}isPinningLeft(){return this.viaApi("isPinningLeft")}isPinningRight(){return this.viaApi("isPinningRight")}getDisplayedColAfter(e){return this.viaApi("getDisplayedColAfter",e)}getDisplayedColBefore(e){return this.viaApi("getDisplayedColBefore",e)}setColumnVisible(e,t){this.viaApi("setColumnVisible",e,t)}setColumnsVisible(e,t){this.viaApi("setColumnsVisible",e,t)}setColumnPinned(e,t){this.viaApi("setColumnPinned",e,t)}setColumnsPinned(e,t){this.viaApi("setColumnsPinned",e,t)}getAllGridColumns(){return this.viaApi("getAllGridColumns")}getDisplayedLeftColumns(){return this.viaApi("getDisplayedLeftColumns")}getDisplayedCenterColumns(){return this.viaApi("getDisplayedCenterColumns")}getDisplayedRightColumns(){return this.viaApi("getDisplayedRightColumns")}getAllDisplayedColumns(){return this.viaApi("getAllDisplayedColumns")}getAllDisplayedVirtualColumns(){return this.viaApi("getAllDisplayedVirtualColumns")}moveColumn(e,t){this.viaApi("moveColumn",e,t)}moveColumnByIndex(e,t){this.viaApi("moveColumnByIndex",e,t)}moveColumns(e,t){this.viaApi("moveColumns",e,t)}moveRowGroupColumn(e,t){this.viaApi("moveRowGroupColumn",e,t)}setColumnAggFunc(e,t){this.viaApi("setColumnAggFunc",e,t)}setColumnWidth(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;this.viaApi("setColumnWidth",e,t,n,i)}setColumnWidths(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;this.viaApi("setColumnWidths",e,t,n)}setPivotMode(e){this.viaApi("setPivotMode",e)}isPivotMode(){return this.viaApi("isPivotMode")}getPivotResultColumn(e,t){return this.viaApi("getPivotResultColumn",e,t)}setValueColumns(e){this.viaApi("setValueColumns",e)}getValueColumns(){return this.viaApi("getValueColumns")}removeValueColumn(e){this.viaApi("removeValueColumn",e)}removeValueColumns(e){this.viaApi("removeValueColumns",e)}addValueColumn(e){this.viaApi("addValueColumn",e)}addValueColumns(e){this.viaApi("addValueColumns",e)}setRowGroupColumns(e){this.viaApi("setRowGroupColumns",e)}removeRowGroupColumn(e){this.viaApi("removeRowGroupColumn",e)}removeRowGroupColumns(e){this.viaApi("removeRowGroupColumns",e)}addRowGroupColumn(e){this.viaApi("addRowGroupColumn",e)}addRowGroupColumns(e){this.viaApi("addRowGroupColumns",e)}getRowGroupColumns(){return this.viaApi("getRowGroupColumns")}setPivotColumns(e){this.viaApi("setPivotColumns",e)}removePivotColumn(e){this.viaApi("removePivotColumn",e)}removePivotColumns(e){this.viaApi("removePivotColumns",e)}addPivotColumn(e){this.viaApi("addPivotColumn",e)}addPivotColumns(e){this.viaApi("addPivotColumns",e)}getPivotColumns(){return this.viaApi("getPivotColumns")}getLeftDisplayedColumnGroups(){return this.viaApi("getLeftDisplayedColumnGroups")}getCenterDisplayedColumnGroups(){return this.viaApi("getCenterDisplayedColumnGroups")}getRightDisplayedColumnGroups(){return this.viaApi("getRightDisplayedColumnGroups")}getAllDisplayedColumnGroups(){return this.viaApi("getAllDisplayedColumnGroups")}autoSizeColumn(e,t){return this.viaApi("autoSizeColumn",e,t)}autoSizeColumns(e,t){this.viaApi("autoSizeColumns",e,t)}autoSizeAllColumns(e){this.viaApi("autoSizeAllColumns",e)}setPivotResultColumns(e){this.viaApi("setPivotResultColumns",e)}getPivotResultColumns(){return this.viaApi("getPivotResultColumns")}};WT([F_("gridApi")],HL.prototype,"api",2),HL=WT([L_("columnApi")],HL);var WL=class extends MR{constructor(){super(...arguments),this.initialised=!1,this.isSsrm=!1}init(){this.isSsrm=this.gos.isRowModelType("serverSide"),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=e=>this.callColumnCellValueChangedHandler(e),t=this.gos.useAsyncEvents();this.eventService.addEventListener(OR.EVENT_CELL_VALUE_CHANGED,e,t),this.addDestroyFunc((()=>this.eventService.removeEventListener(OR.EVENT_CELL_VALUE_CHANGED,e,t))),this.addManagedPropertyListener("treeData",(e=>this.isTreeData=e.currentValue))}getValue(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.initialised||this.init(),!t)return;const r=e.getColDef(),s=r.field,o=e.getColId(),a=t.data;let l;const c=t.groupData&&void 0!==t.groupData[o],u=!i&&t.aggData&&void 0!==t.aggData[o],d=this.isSsrm&&i&&!!e.getColDef().aggFunc,h=this.isSsrm&&t.footer&&t.field&&(!0===e.getColDef().showRowGroup||e.getColDef().showRowGroup===t.field);if(n&&r.filterValueGetter?l=this.executeFilterValueGetter(r.filterValueGetter,a,e,t):this.isTreeData&&u?l=t.aggData[o]:this.isTreeData&&r.valueGetter?l=this.executeValueGetter(r.valueGetter,a,e,t):this.isTreeData&&s&&a?l=c_(a,s,e.isFieldContainsDots()):c?l=t.groupData[o]:u?l=t.aggData[o]:r.valueGetter?l=this.executeValueGetter(r.valueGetter,a,e,t):h?l=c_(a,t.field,e.isFieldContainsDots()):s&&a&&!d&&(l=c_(a,s,e.isFieldContainsDots())),this.cellExpressions&&"string"===typeof l&&0===l.indexOf("=")){const n=l.substring(1);l=this.executeValueGetter(n,a,e,t)}if(null==l){const n=this.getOpenedGroup(t,e);if(null!=n)return n}return l}parseValue(e,t,n,i){const r=e.getColDef(),s=this.gos.addGridCommonParams({node:t,data:null==t?void 0:t.data,oldValue:i,newValue:n,colDef:r,column:e}),o=r.valueParser;return YT(o)?"function"===typeof o?o(s):this.expressionService.evaluate(o,s):n}formatValue(e,t,n,i){let r,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=null;const a=e.getColDef();if(i?r=i:s&&(r=a.valueFormatter),r){const i=this.gos.addGridCommonParams({value:n,node:t,data:t?t.data:null,colDef:a,column:e});o="function"===typeof r?r(i):this.expressionService.evaluate(r,i)}else if(a.refData)return a.refData[n]||"";return null==o&&Array.isArray(n)&&(o=n.join(", ")),o}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup"))return;if(!t.getColDef().showRowGroup)return;const n=t.getColDef().showRowGroup;let i=e.parent;for(;null!=i;){if(i.rowGroupColumn&&(!0===n||n===i.rowGroupColumn.getColId()))return i.key;i=i.parent}}setValue(e,t,n,i){const r=this.columnModel.getPrimaryColumn(t);if(!e||!r)return!1;qT(e.data)&&(e.data={});const{field:s,valueSetter:o}=r.getColDef();if(qT(s)&&qT(o))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(r,n))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;const a=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(r,e),newValue:n,colDef:r.getColDef(),column:r});let l;if(a.newValue=n,l=YT(o)?"function"===typeof o?o(a):this.expressionService.evaluate(o,a):this.setValueUsingField(e.data,s,n,r.isFieldContainsDots()),void 0===l&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),a.newValue=this.getValue(r,e);const c={type:OR.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,api:a.api,columnApi:a.columnApi,colDef:a.colDef,context:a.context,data:e.data,node:e,oldValue:a.oldValue,newValue:a.newValue,value:a.newValue,source:i};return this.eventService.dispatchEvent(c),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;"function"===typeof t&&this.getFrameworkOverrides().wrapOutgoing((()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,columnApi:e.columnApi,context:e.context})}))}setValueUsingField(e,t,n,i){if(!t)return!1;let r=!1;if(i){const i=t.split(".");let s=e;for(;i.length>0&&s;){const e=i.shift();0===i.length?(r=s[e]===n,r||(s[e]=n)):s=s[e]}}else r=e[t]===n,r||(e[t]=n);return!r}executeFilterValueGetter(e,t,n,i){const r=this.gos.addGridCommonParams({data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)});return"function"===typeof e?e(r):this.expressionService.evaluate(e,r)}executeValueGetter(e,t,n,i){const r=n.getColId(),s=this.valueCache.getValue(i,r);if(void 0!==s)return s;const o=this.gos.addGridCommonParams({data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)});let a;return a="function"===typeof e?e(o):this.expressionService.evaluate(e,o),this.valueCache.setValue(i,r,a),a}getValueCallback(e,t){const n=this.columnModel.getPrimaryColumn(t);return n?this.getValue(n,e):null}getKeyForNode(e,t){const n=this.getValue(e,t),i=e.getColDef().keyCreator;let r=n;if(i){r=i(this.gos.addGridCommonParams({value:n,colDef:e.getColDef(),column:e,node:t,data:t.data}))}return"string"===typeof r||null==r||(r=String(r),"[object Object]"===r&&f_("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),r}};WT([F_("expressionService")],WL.prototype,"expressionService",2),WT([F_("columnModel")],WL.prototype,"columnModel",2),WT([F_("valueCache")],WL.prototype,"valueCache",2),WT([F_("dataTypeService")],WL.prototype,"dataTypeService",2),WT([k_],WL.prototype,"init",1),WL=WT([L_("valueService")],WL);var jL=class extends MR{constructor(){super(...arguments),this.expressionToFunctionCache={}}setBeans(e){this.logger=e.create("ExpressionService")}evaluate(e,t){if("string"===typeof e)return this.evaluateExpression(e,t);console.error("AG Grid: value should be either a string or a function",e)}evaluateExpression(e,t){try{const n=this.createExpressionFunction(e);return n(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.columnApi,t.getValue,t.column,t.columnGroup)}catch(rre){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",t),console.log("Exception = "+rre),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=n,n}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}};WT([jT(0,G_("loggerFactory"))],jL.prototype,"setBeans",1),jL=WT([L_("expressionService")],jL);var UL=class extends MR{setBeans(e){this.logging=e.get("debug")}create(e){return new zL(e,this.isLogging.bind(this))}isLogging(){return this.logging}};WT([jT(0,G_("gridOptionsService"))],UL.prototype,"setBeans",1),UL=WT([L_("loggerFactory")],UL);var zL=class{constructor(e,t){this.name=e,this.isLoggingFunc=t}isLogging(){return this.isLoggingFunc()}log(e){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+e)}},YL=class extends MR{setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:e=>1===e||0===e,getIconName:()=>dN.ICON_NOT_ALLOWED}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new Ck(this.view)),this.addRtlSupport();const i=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc((()=>i())),this.ctrlsService.register("gridCtrl",this)}isDetailGrid(){var e;const t=this.focusService.findTabbableParent(this.getGui());return(null==(e=null==t?void 0:t.getAttribute("row-id"))?void 0:e.startsWith("detail"))||!1}showDropZones(){return P_.__isRegistered("@ag-grid-enterprise/row-grouping",this.context.getGridId())}showSideBar(){return P_.__isRegistered("@ag-grid-enterprise/side-bar",this.context.getGridId())}showStatusBar(){return P_.__isRegistered("@ag-grid-enterprise/status-bar",this.context.getGridId())}showWatermark(){return P_.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId())}onGridSizeChanged(){const e={type:OR.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)}addRtlSupport(){const e=this.gos.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.view.getFocusableContainers(),n=this.gos.getActiveDomElement(),i=t.findIndex((e=>e.contains(n)))+(e?-1:1);return!(i<=0||i>=t.length)&&this.focusService.focusInto(t[i])}focusInnerElement(e){const t=this.view.getFocusableContainers(),n=this.columnModel.getAllDisplayedColumns();if(e){if(t.length>1)return this.focusService.focusInto(tR(t),!0);const e=tR(n);if(this.focusService.focusGridView(e,!0))return!0}if(0===this.gos.get("headerHeight")||this.gos.get("suppressHeaderFocus")){if(this.focusService.focusGridView(n[0]))return!0;for(let e=1;e<t.length;e++)if(this.focusService.focusInto(t[e]))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.view.forceFocusOutOfContainer(e)}};WT([F_("focusService")],YL.prototype,"focusService",2),WT([F_("resizeObserverService")],YL.prototype,"resizeObserverService",2),WT([F_("columnModel")],YL.prototype,"columnModel",2),WT([F_("ctrlsService")],YL.prototype,"ctrlsService",2),WT([F_("mouseEventService")],YL.prototype,"mouseEventService",2),WT([F_("dragAndDropService")],YL.prototype,"dragAndDropService",2);var qL=class extends WO{constructor(e){super(),this.eGridDiv=e}postConstruct(){this.logger=this.loggerFactory.create("GridComp");const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:e=>this.addCssClass(e),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:e=>{this.getGui().style.userSelect=null!=e?e:"",this.getGui().style.webkitUserSelect=null!=e?e:""},setCursor:e=>{this.getGui().style.cursor=null!=e?e:""}};this.ctrl=this.createManagedBean(new YL);const t=this.createTemplate();this.setTemplate(t),this.ctrl.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>this.ctrl.focusInnerElement(e),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc((()=>{this.eGridDiv.removeChild(e),this.logger.log("Grid removed from DOM")}))}updateLayoutClasses(e,t){const n=this.eRootWrapperBody.classList;n.toggle("ag-layout-auto-height",t.autoHeight),n.toggle("ag-layout-normal",t.normal),n.toggle("ag-layout-print",t.print),this.addOrRemoveCssClass("ag-layout-auto-height",t.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",t.normal),this.addOrRemoveCssClass("ag-layout-print",t.print)}createTemplate(){const e=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",t=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",n=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",i=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"";return'<div class="ag-root-wrapper" role="presentation">\n                '.concat(e,'\n                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">\n                    <ag-grid-body ref="gridBody"></ag-grid-body>\n                    ').concat(t,"\n                </div>\n                ").concat(n,"\n                <ag-pagination></ag-pagination>\n                ").concat(i,"\n            </div>")}getFocusableElement(){return this.eRootWrapperBody}getFocusableContainers(){const e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter((e=>KM(e)))}};WT([F_("loggerFactory")],qL.prototype,"loggerFactory",2),WT([QP("gridBody")],qL.prototype,"gridBodyComp",2),WT([QP("sideBar")],qL.prototype,"sideBarComp",2),WT([QP("rootWrapperBody")],qL.prototype,"eRootWrapperBody",2),WT([k_],qL.prototype,"postConstruct",1);var KL=class extends MR{progressSort(e,t,n){const i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,n)}setSortForColumn(e,t,n,i){"asc"!==t&&"desc"!==t&&(t=null);let r=[e];if(this.gos.isColumnsSortingCoupledToGroup()&&e.getColDef().showRowGroup){const t=this.columnModel.getSourceColumnsForGroupColumn(e),n=null==t?void 0:t.filter((e=>e.isSortable()));n&&(r=[e,...n])}r.forEach((e=>e.setSort(t,i)));const s=[];if(!((n||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"))){const e=this.clearSortBarTheseColumns(r,i);s.push(...e)}this.updateSortIndex(e),s.push(...r),this.dispatchSortChangedEvents(i,s)}updateSortIndex(e){const t=this.gos.isColumnsSortingCoupledToGroup(),n=this.columnModel.getGroupDisplayColumnForGroup(e.getId()),i=t&&n||e,r=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach((e=>e.setSortIndex(null)));const s=r.filter((e=>(!t||!e.getColDef().showRowGroup)&&e!==i));(i.getSort()?[...s,i]:s).forEach(((e,t)=>{e.setSortIndex(t)}))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter((e=>!!e.getSort()));return e&&e.length>0}dispatchSortChangedEvents(e,t){const n={type:OR.EVENT_SORT_CHANGED,source:e};t&&(n.columns=t),this.eventService.dispatchEvent(n)}clearSortBarTheseColumns(e,t){const n=[];return this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach((i=>{e.includes(i)||(i.getSort()&&n.push(i),i.setSort(void 0,t))})),n}getNextSortDirection(e){let t;if(t=e.getColDef().sortingOrder?e.getColDef().sortingOrder:this.gos.get("sortingOrder")?this.gos.get("sortingOrder"):KL.DEFAULT_SORTING_ORDER,!Array.isArray(t)||t.length<=0)return console.warn("AG Grid: sortingOrder must be an array with at least one element, currently it's ".concat(t)),null;const n=t.indexOf(e.getSort()),i=n<0,r=n==t.length-1;let s;return s=i||r?t[0]:t[n+1],KL.DEFAULT_SORTING_ORDER.indexOf(s)<0?(console.warn("AG Grid: invalid sort type "+s),null):s}getIndexedSortMap(){let e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter((e=>!!e.getSort()));if(this.columnModel.isPivotMode()){const t=this.gos.isColumnsSortingCoupledToGroup();e=e.filter((e=>{const n=!!e.getAggFunc(),i=!e.isPrimary(),r=t?this.columnModel.getGroupDisplayColumnForGroup(e.getId()):e.getColDef().showRowGroup;return n||i||r}))}const t=this.columnModel.getRowGroupColumns().filter((e=>!!e.getSort())),n={};e.forEach(((e,t)=>n[e.getId()]=t)),e.sort(((e,t)=>{const i=e.getSortIndex(),r=t.getSortIndex();if(null!=i&&null!=r)return i-r;if(null==i&&null==r){return n[e.getId()]>n[t.getId()]?1:-1}return null==r?-1:1}));const i=this.gos.isColumnsSortingCoupledToGroup()&&!!t.length;i&&(e=[...new Set(e.map((e=>{var t;return null!=(t=this.columnModel.getGroupDisplayColumnForGroup(e.getId()))?t:e})))]);const r=new Map;return e.forEach(((e,t)=>r.set(e,t))),i&&t.forEach((e=>{const t=this.columnModel.getGroupDisplayColumnForGroup(e.getId());r.set(e,r.get(t))})),r}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(((e,t)=>{let[n,i]=e,[r,s]=t;return i-s})).map((e=>{let[t]=e;return t}))}getSortModel(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),colId:e.getId()})))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),column:e})))}canColumnDisplayMixedSort(e){const t=this.gos.isColumnsSortingCoupledToGroup(),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){const t=this.columnModel.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(null==t?void 0:t.length))return e.getSort();const n=null!=e.getColDef().field||!!e.getColDef().valueGetter?[e,...t]:t,i=n[0].getSort();return n.every((e=>e.getSort()==i))?i:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}};KL.DEFAULT_SORTING_ORDER=["asc","desc",null],WT([F_("columnModel")],KL.prototype,"columnModel",2),KL=WT([L_("sortController")],KL);var XL=class extends MR{static addKeyboardModeEvents(e){this.instanceCount>0||(e.addEventListener("keydown",XL.toggleKeyboardMode),e.addEventListener("mousedown",XL.toggleKeyboardMode))}static removeKeyboardModeEvents(e){this.instanceCount>0||(e.addEventListener("keydown",XL.toggleKeyboardMode),e.addEventListener("mousedown",XL.toggleKeyboardMode))}static toggleKeyboardMode(e){const t=XL.keyboardModeActive,n="keydown"===e.type;n&&(e.ctrlKey||e.metaKey||e.altKey)||t!==n&&(XL.keyboardModeActive=n)}static unregisterGridCompController(e){XL.removeKeyboardModeEvents(e)}init(){const e=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,OR.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,OR.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_GROUP_OPENED,e),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady((e=>{this.gridCtrl=e.gridCtrl}))}registerKeyboardFocusEvents(){const e=this.gos.getDocument();XL.addKeyboardModeEvents(e),XL.instanceCount++,this.addDestroyFunc((()=>{XL.instanceCount--,XL.unregisterGridCompController(e)}))}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const e=this.focusedCellPosition.column,t=this.columnModel.getGridColumn(e.getId());e!==t&&this.clearFocusedCell()}isKeyboardMode(){return XL.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),Fk.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),CO.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(e,t){let n=e;for(;n;){if(this.gos.getDomData(n,t))return!1;n=n.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(e){return!!this.isCellRestoreFocused(e)&&(setTimeout((()=>{this.restoredFocusedCellPosition=null}),0),!0)}isCellRestoreFocused(e){return null!=this.restoredFocusedCellPosition&&this.cellPositionUtils.equals(e,this.restoredFocusedCellPosition)}setRestoreFocusedCell(e){"react"===this.getFrameworkOverrides().renderingEngine&&(this.restoredFocusedCellPosition=e)}getFocusEventParams(){const{rowIndex:e,rowPinned:t,column:n}=this.focusedCellPosition,i={rowIndex:e,rowPinned:t,column:n,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:t});return r&&(i.isFullWidthCell=r.isFullWidth()),i}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,null==this.focusedCellPosition)return;const e=VT({type:OR.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(e)}setFocusedCell(e){const{column:t,rowIndex:n,rowPinned:i,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:s=!1}=e,o=this.columnModel.getGridColumn(t);if(!o)return void(this.focusedCellPosition=null);this.focusedCellPosition=o?{rowIndex:n,rowPinned:zT(i),column:o}:null;const a=GT(VT({type:OR.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:r,preventScrollOnBrowserFocus:s,floating:null});this.eventService.dispatchEvent(a)}isCellFocused(e){return null!=this.focusedCellPosition&&this.cellPositionUtils.equals(e,this.focusedCellPosition)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(null==this.focusedHeaderPosition)return!1;const t=e.getColumnGroupChild(),n=e.getRowIndex(),i=e.getPinned(),{column:r,headerRowIndex:s}=this.focusedHeaderPosition;return t===r&&n===s&&i==r.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(e,t){this.focusedHeaderPosition={headerRowIndex:e,column:t}}focusHeaderPosition(e){if(this.gos.get("suppressHeaderFocus"))return!1;const{direction:t,fromTab:n,allowUserOverride:i,event:r,fromCell:s,rowWithoutSpanValue:o}=e;let{headerPosition:a}=e;if(s&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(a);if(i){const e=this.getFocusedHeader(),i=this.headerNavigationService.getHeaderRowCount();if(n){const n=this.gos.getCallback("tabToNextHeader");n&&(a=this.getHeaderPositionFromUserFunc({userFunc:n,direction:t,currentPosition:e,headerPosition:a,headerRowCount:i}))}else{const t=this.gos.getCallback("navigateToNextHeader");if(t&&r){a=t({key:r.key,previousHeaderPosition:e,nextHeaderPosition:a,headerRowCount:i,event:r})}}}return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:t,event:r,fromCell:s,rowWithoutSpanValue:o})}focusHeaderPositionFromUserFunc(e){if(this.gos.get("suppressHeaderFocus"))return!1;const{userFunc:t,headerPosition:n,direction:i,event:r}=e,s=this.getFocusedHeader(),o=this.headerNavigationService.getHeaderRowCount(),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:i,currentPosition:s,headerPosition:n,headerRowCount:o});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:i,event:r})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:n,currentPosition:i,headerPosition:r,headerRowCount:s}=e,o=t({backwards:"Before"===n,previousHeaderPosition:i,nextHeaderPosition:r,headerRowCount:s});return!0===o||null===o?(null===o&&f_("Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),i):!1===o?null:o}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:n,fromCell:i,rowWithoutSpanValue:r,event:s}=e;if(-1===t.headerRowIndex)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView(t.column);this.headerNavigationService.scrollToColumn(t.column,n);const o=this.ctrlsService.getHeaderRowContainerCtrl(t.column.getPinned()).focusHeader(t.headerRowIndex,t.column,s);return o&&(null!=r||i)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(null!=r?r:-1),o}focusFirstHeader(){let e=this.columnModel.getAllDisplayedColumns()[0];if(!e)return!1;e.getParent()&&(e=this.columnModel.getColumnGroupAtLevel(e,0));const t=this.headerPositionUtils.getHeaderIndexToFocus(e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){const t=this.headerNavigationService.getHeaderRowCount()-1,n=tR(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:n},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(e,t){return null!=this.focusedCellPosition&&(this.focusedCellPosition.rowIndex===e&&this.focusedCellPosition.rowPinned===zT(t))}findFocusableElements(e,t){const n=DM;let i=MM;t&&(i+=", "+t),arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(i+=', [tabindex="-1"]');const r=Array.prototype.slice.apply(e.querySelectorAll(n)).filter((e=>KM(e))),s=Array.prototype.slice.apply(e.querySelectorAll(i));if(!s.length)return r;return((e,t)=>e.filter((e=>-1===t.indexOf(e))))(r,s)}focusInto(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.findFocusableElements(e,null,n),r=t?tR(i):i[0];return!!r&&(r.focus({preventScroll:!0}),!0)}findFocusableElementBeforeTabGuard(e,t){if(!t)return null;const n=this.findFocusableElements(e),i=n.indexOf(t);if(-1===i)return null;let r=-1;for(let s=i-1;s>=0;s--)if(n[s].classList.contains("ag-tab-guard-top")){r=s;break}return r<=0?null:n[r-1]}findNextFocusableElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.eGridDiv,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const i=this.findFocusableElements(e,t?':not([tabindex="-1"])':null),r=this.gos.getActiveDomElement();let s;s=t?i.findIndex((e=>e.contains(r))):i.indexOf(r);const o=s+(n?-1:1);return o<0||o>=i.length?null:i[o]}isTargetUnderManagedComponent(e,t){if(!t)return!1;const n=e.querySelectorAll(".".concat(iI.FOCUS_MANAGED_CLASS));if(!n.length)return!1;for(let i=0;i<n.length;i++)if(n[i].contains(t))return!0;return!1}findTabbableParent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=0;for(;e&&null===oM(e)&&++n<=t;)e=e.parentElement;return null===oM(e)?null:e}focusGridView(e,t){var n;if(this.gos.get("suppressCellFocus"))return t?this.gos.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);const i=t?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!i)return!1;const{rowIndex:r,rowPinned:s}=i,o=this.getFocusedHeader();return!e&&o&&(e=o.column),!(null==r||!e)&&(this.navigationService.ensureCellVisible({rowIndex:r,column:e,rowPinned:s}),this.setFocusedCell({rowIndex:r,column:e,rowPinned:zT(s),forceBrowserFocus:!0}),null==(n=this.rangeService)||n.setRangeToCell({rowIndex:r,rowPinned:s,column:e}),!0)}focusNextGridCoreContainer(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(t||!this.gridCtrl.focusNextInnerContainer(e))||((t||!e&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(e),!1)}focusAdvancedFilter(e){var t,n;return this.advancedFilterFocusColumn=null==e?void 0:e.column,null!=(n=null==(t=this.advancedFilterService)?void 0:t.getCtrl().focusHeaderComp())&&n}focusNextFromAdvancedFilter(e,t){var n,i;const r=null!=(i=t?void 0:this.advancedFilterFocusColumn)?i:null==(n=this.columnModel.getAllDisplayedColumns())?void 0:n[0];return e?this.focusHeaderPosition({headerPosition:{column:r,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(r)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}};XL.keyboardModeActive=!1,XL.instanceCount=0,WT([F_("eGridDiv")],XL.prototype,"eGridDiv",2),WT([F_("columnModel")],XL.prototype,"columnModel",2),WT([F_("headerNavigationService")],XL.prototype,"headerNavigationService",2),WT([F_("headerPositionUtils")],XL.prototype,"headerPositionUtils",2),WT([F_("rowRenderer")],XL.prototype,"rowRenderer",2),WT([F_("rowPositionUtils")],XL.prototype,"rowPositionUtils",2),WT([F_("cellPositionUtils")],XL.prototype,"cellPositionUtils",2),WT([F_("navigationService")],XL.prototype,"navigationService",2),WT([F_("ctrlsService")],XL.prototype,"ctrlsService",2),WT([F_("filterManager")],XL.prototype,"filterManager",2),WT([B_("rangeService")],XL.prototype,"rangeService",2),WT([B_("advancedFilterService")],XL.prototype,"advancedFilterService",2),WT([k_],XL.prototype,"init",1),XL=WT([L_("focusService")],XL);var QL=class extends MR{setMouseOver(e){this.selectedColumns=e;const t={type:OR.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(t)}clearMouseOver(){this.selectedColumns=null;const e={type:OR.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}};QL=WT([L_("columnHoverService")],QL);var ZL=class extends MR{constructor(){super(...arguments),this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.ctrlsService.whenReady((e=>this.gridBodyCtrl=e.gridBodyCtrl))}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush((()=>{this.active=!1}))}executeNextVMTurn(e){this.active?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push((()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)}))}flush(e){if(0===this.executeNextFuncs.length&&0===this.executeLaterFuncs.length)return void e();const t=e=>{for(;e.length;){const t=e.pop();t&&t()}};this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>t(this.executeNextFuncs)),0),window.setTimeout((()=>{e(),t(this.executeLaterFuncs)}),200)}))}};WT([F_("ctrlsService")],ZL.prototype,"ctrlsService",2),WT([k_],ZL.prototype,"postConstruct",1),ZL=WT([L_("columnAnimationService")],ZL);var $L=class extends MR{postConstruct(){this.ctrlsService.whenReady((e=>{this.centerRowsCtrl=e.center,this.addManagedListener(this.eventService,OR.EVENT_BODY_HEIGHT_CHANGED,this.checkPageSize.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_SCROLL_VISIBILITY_CHANGED,this.checkPageSize.bind(this)),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()}))}notActive(){return!this.gos.get("paginationAutoPageSize")||null==this.centerRowsCtrl}onPaginationAutoSizeChanged(){this.notActive()?this.paginationProxy.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const t=this.gos.getRowHeightAsNumber(),n=Math.floor(e/t);this.paginationProxy.setPageSize(n,"autoCalculated")};this.isBodyRendered?x_((()=>t()),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};WT([F_("ctrlsService")],$L.prototype,"ctrlsService",2),WT([F_("paginationProxy")],$L.prototype,"paginationProxy",2),WT([k_],$L.prototype,"postConstruct",1),$L=WT([L_("paginationAutoPageSizeService")],$L);var JL=class extends MR{constructor(){super(...arguments),this.cacheVersion=0}init(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,n){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=n)}getValue(e,t){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[t]}};WT([k_],JL.prototype,"init",1),JL=WT([L_("valueCache")],JL);var eF=class extends MR{init(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,OR.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))}onCellValueChanged(e){"paste"!==e.source&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;const n=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const i=this.gos.get("aggregateOnlyChangedColumns"),r=new JO(i,this.clientSideRowModel.getRootNode());r.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(r),r.forEachChangedNodeDepthFirst((e=>{n.push(e)}))}this.rowRenderer.refreshCells({rowNodes:n})}};WT([F_("rowModel")],eF.prototype,"rowModel",2),WT([F_("rowRenderer")],eF.prototype,"rowRenderer",2),WT([k_],eF.prototype,"init",1),eF=WT([L_("changeDetectionService")],eF);var tF=class extends MR{adaptFunction(e,t){const n=this.componentMetadataProvider.retrieve(e);return n&&n.functionAdapter?n.functionAdapter(t):null}adaptCellRendererFunction(e){return class{refresh(e){return!1}getGui(){return this.eGui}init(t){const n=e(t),i=typeof n;this.eGui="string"!==i&&"number"!==i&&"boolean"!==i?null!=n?n:XM("<span></span>"):XM("<span>"+n+"</span>")}}}doesImplementIComponent(e){return!!e&&(e.prototype&&"getGui"in e.prototype)}};WT([F_("componentMetadataProvider")],tF.prototype,"componentMetadataProvider",2),tF=WT([L_("agComponentUtils")],tF);var nF=class extends MR{postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}};WT([F_("agComponentUtils")],nF.prototype,"agComponentUtils",2),WT([k_],nF.prototype,"postConstruct",1),nF=WT([L_("componentMetadataProvider")],nF);var iF={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:20,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:56,headerCellMinWidth:48,listItemHeight:32,rowHeight:48,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:32,headerCellMinWidth:24,listItemHeight:24,rowHeight:28,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:48,headerCellMinWidth:36,listItemHeight:24,rowHeight:42,chartMenuPanelWidth:240},"ag-theme-quartz":{headerHeight:48,headerCellMinWidth:36,listItemHeight:24,rowHeight:42,chartMenuPanelWidth:260}},rF={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},sF=class extends MR{constructor(){super(...arguments),this.calculatedSizes={},this.calculatedTheme=null}postConstruct(){var e;const t=null!=(e=this.getTheme().el)?e:this.eGridDiv;this.addManagedPropertyListener("rowHeight",(()=>this.refreshRowHeightVariable())),this.mutationObserver=new MutationObserver((()=>{this.calculatedSizes={},this.calculatedTheme=null,this.calculatedTheme=this.getTheme(),this.fireGridStylesChangedEvent()})),this.mutationObserver.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})}fireGridStylesChangedEvent(){const e={type:OR.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(e)}getSassVariable(e){const{themeFamily:t,el:n}=this.getTheme();if(!t||0!==t.indexOf("ag-theme"))return;this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[t]||(this.calculatedSizes[t]={});const i=this.calculatedSizes[t][e];return null!=i?i:(this.calculatedSizes[t][e]=this.calculateValueForSassProperty(e,t,n),this.calculatedSizes[t][e])}calculateValueForSassProperty(e,t,n){const i="ag-theme-"+(t.match("material")?"material":t.match("balham")?"balham":t.match("alpine")?"alpine":"custom"),r=iF[i][e],s=this.gos.getDocument();if(n||(n=this.eGridDiv),!rF[e])return r;const o=rF[e],a=s.createElement("div"),l=Array.from(n.classList);a.classList.add(t,...l),a.style.position="absolute";const c=o.reduce(((e,t)=>{const n=s.createElement("div");return n.style.position="static",n.classList.add(t),e.appendChild(n),n}),a);let u=0;if(s.body){s.body.appendChild(a);const t=-1!==e.toLowerCase().indexOf("height")?"height":"width";u=parseInt(window.getComputedStyle(c)[t],10),s.body.removeChild(a)}return u||r}isThemeDark(){const{theme:e}=this.getTheme();return!!e&&e.indexOf("dark")>=0}chartMenuPanelWidth(){return this.getSassVariable("chartMenuPanelWidth")}getTheme(){if(this.calculatedTheme)return this.calculatedTheme;const e=/\bag-(material|(?:theme-([\w\-]*)))\b/g;let t=this.eGridDiv,n=null,i=[];for(;t;){if(n=e.exec(t.className),n){const n=t.className.match(e);n&&(i=n);break}t=t.parentElement||void 0}if(!n)return{allThemes:i};const r=n[0];return this.calculatedTheme={theme:r,el:t,themeFamily:r.replace(/-dark$/,""),allThemes:i},this.calculatedTheme}getFromTheme(e,t){var n;return null!=(n=this.getSassVariable(t))?n:e}getDefaultRowHeight(){return this.getFromTheme(25,"rowHeight")}getListItemHeight(){return this.getFromTheme(20,"listItemHeight")}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(null==t||isNaN(t)||!isFinite(t))return null!==e&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const n="".concat(t,"px");return e!=n?(this.eGridDiv.style.setProperty("--ag-line-height",n),t):""!=e?parseFloat(e):-1}getMinColWidth(){const e=this.getFromTheme(null,"headerCellMinWidth");return YT(e)?Math.max(e,10):10}destroy(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),super.destroy()}};WT([F_("eGridDiv")],sF.prototype,"eGridDiv",2),WT([k_],sF.prototype,"postConstruct",1),sF=WT([L_("environment")],sF);var oF=class extends MR{constructor(){super(...arguments),this.scrollY=0,this.uiBodyHeight=0}agWire(e){this.logger=e.create("RowContainerHeightService")}postConstruct(){this.addManagedListener(this.eventService,OR.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=aM(),this.logger.log("maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.logger.log("Div Stretch Offset = ".concat(t," (").concat(this.pixelsToShave," * ").concat(e,")")),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:OR.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t="number"===typeof e?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:OR.EVENT_HEIGHT_SCALE_CHANGED}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=e/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*t}};WT([F_("ctrlsService")],oF.prototype,"ctrlsService",2),WT([jT(0,G_("loggerFactory"))],oF.prototype,"agWire",1),WT([k_],oF.prototype,"postConstruct",1),oF=WT([L_("rowContainerHeightService")],oF);var aF=class extends MR{init(){this.addManagedPropertyListener("isRowSelectable",(()=>this.updateSelectable()))}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=!!this.gos.get("rowSelection"),n=this.gos.get("isRowSelectable");if(!t||!n)return;const i=this.gos.get("groupSelectsChildren"),r="clientSide"===this.rowModel.getType()&&i,s=[],o=t=>{if(e&&!t.group)return;if(r&&t.group){const e=t.childrenAfterGroup.some((e=>!0===e.selectable));return void t.setRowSelectable(e,!0)}const i=!n||n(t);t.setRowSelectable(i,!0),!i&&t.isSelected()&&s.push(t)};if(r){const e=this.rowModel;new JO(!1,e.getRootNode()).forEachChangedNodeDepthFirst(o,!0,!0)}else this.rowModel.forEachNode(o);s.length&&this.selectionService.setNodesSelected({nodes:s,newValue:!1,source:"selectableChanged"}),r&&this.selectionService instanceof GL&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}};WT([F_("rowModel")],aF.prototype,"rowModel",2),WT([F_("selectionService")],aF.prototype,"selectionService",2),WT([k_],aF.prototype,"init",1),aF=WT([L_("selectableService")],aF);var lF=class extends XP{constructor(){super(),this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate());const{btFirst:t,btPrevious:n,btNext:i,btLast:r,pageSizeComp:s}=this;this.activateTabIndex([t,n,i,r]),t.insertAdjacentElement("afterbegin",wP(e?"last":"first",this.gos)),n.insertAdjacentElement("afterbegin",wP(e?"next":"previous",this.gos)),i.insertAdjacentElement("afterbegin",wP(e?"previous":"next",this.gos)),r.insertAdjacentElement("afterbegin",wP(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],(()=>this.onPageSizeRelatedOptionsChange())),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.onPaginationChanged()}onPaginationChanged(){const e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedListener(this.eventService,OR.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach((e=>{const{el:t,fn:n}=e;this.addManagedListener(t,"click",n),this.addManagedListener(t,"keydown",(e=>{e.key!==SP.ENTER&&e.key!==SP.SPACE||(e.preventDefault(),n())}))})),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()}setCurrentPageLabel(){const e=this.paginationProxy.getTotalPages()>0,t=this.paginationProxy.getCurrentPage(),n=e?t+1:0;this.lbCurrent.textContent=this.formatNumber(n)}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t){return t({value:e})}const n=this.localeService.getLocaleTextFunc();return wM(e,n("thousandSeparator",","),n("decimalSeparator","."))}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),n=e("to","to"),i=e("of","of"),r=e("firstPage","First Page"),s=e("previousPage","Previous Page"),o=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'.concat(l,'">\n                <ag-page-size-selector ref="pageSizeComp"></ag-page-size-selector>\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-').concat(l,'-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-').concat(l,'-to">').concat(n,'</span>\n                    <span id="ag-').concat(l,'-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-').concat(l,'-of">').concat(i,'</span>\n                    <span id="ag-').concat(l,'-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="').concat(r,'"></div>\n                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="').concat(s,'"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-').concat(l,'-start-page">').concat(t,'</span>\n                        <span id="ag-').concat(l,'-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-').concat(l,'-of-page">').concat(i,'</span>\n                        <span id="ag-').concat(l,'-of-page-number" ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="').concat(o,'"></div>\n                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="').concat(a,'"></div>\n                </span>\n            </div>')}onBtNext(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()}enableOrDisableButtons(){const e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.isLastPageFound(),n=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const i=this.isZeroPagesToDisplay(),r=e===n-1;this.nextButtonDisabled=r||i,this.lastButtonDisabled=!t||i||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){AD(e,t),e.classList.toggle("ag-disabled",t)}updateRowLabels(){const e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.getPageSize(),n=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;let r,s;if(this.isZeroPagesToDisplay()?r=s=0:(r=t*e+1,s=r+t-1,n&&s>i&&(s=i)),this.lbFirstRowOnPage.textContent=this.formatNumber(r),this.rowNodeBlockLoader.isLoading()){const e=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=e("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(s)}isZeroPagesToDisplay(){const e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages();return e&&0===t}setTotalLabels(){const e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages(),n=e?this.paginationProxy.getMasterRowCount():null;if(1===n){const e=this.paginationProxy.getRow(0);if(e&&e.group&&!(e.groupData||e.aggData))return void this.setTotalLabelsToZero()}if(e)this.lbTotal.textContent=this.formatNumber(t),this.lbRecordCount.textContent=this.formatNumber(n);else{const e=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=e,this.lbRecordCount.innerHTML=e}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}};WT([F_("paginationProxy")],lF.prototype,"paginationProxy",2),WT([F_("rowNodeBlockLoader")],lF.prototype,"rowNodeBlockLoader",2),WT([QP("btFirst")],lF.prototype,"btFirst",2),WT([QP("btPrevious")],lF.prototype,"btPrevious",2),WT([QP("btNext")],lF.prototype,"btNext",2),WT([QP("btLast")],lF.prototype,"btLast",2),WT([QP("lbRecordCount")],lF.prototype,"lbRecordCount",2),WT([QP("lbFirstRowOnPage")],lF.prototype,"lbFirstRowOnPage",2),WT([QP("lbLastRowOnPage")],lF.prototype,"lbLastRowOnPage",2),WT([QP("lbCurrent")],lF.prototype,"lbCurrent",2),WT([QP("lbTotal")],lF.prototype,"lbTotal",2),WT([QP("pageSizeComp")],lF.prototype,"pageSizeComp",2),WT([k_],lF.prototype,"postConstruct",1);var cF=class e extends XP{constructor(){super(e.TEMPLATE),this.inProgress=!1,this.destroyRequested=!1}updateLayoutClasses(e,t){const n=this.eOverlayWrapper.classList;n.toggle("ag-layout-auto-height",t.autoHeight),n.toggle("ag-layout-normal",t.normal),n.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new Ck(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n){this.inProgress||(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then((e=>{this.inProgress=!1,this.eOverlayWrapper.appendChild(e.getGui()),this.activeOverlay=e,this.updateListenerDestroyFunc=n,this.destroyRequested&&(this.destroyRequested=!1,this.destroyActiveOverlay())})),this.setDisplayed(!0,{skipAriaHidden:!0}))}destroyActiveOverlay(){var e;this.inProgress?this.destroyRequested=!0:this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),null==(e=this.updateListenerDestroyFunc)||e.call(this),zM(this.eOverlayWrapper))}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}};cF.TEMPLATE='\n        <div class="ag-overlay" role="presentation">\n            <div class="ag-overlay-panel" role="presentation">\n                <div class="ag-overlay-wrapper" ref="eOverlayWrapper" role="presentation"></div>\n            </div>\n        </div>',WT([F_("overlayService")],cF.prototype,"overlayService",2),WT([QP("eOverlayWrapper")],cF.prototype,"eOverlayWrapper",2),WT([k_],cF.prototype,"postConstruct",1);var uF=cF,dF=class extends MR{getFirstRow(){let e,t=0;return this.pinnedRowModel.getPinnedTopRowCount()?e="top":this.rowModel.getRowCount()?(e=null,t=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(e="bottom"),void 0===e?null:{rowIndex:t,rowPinned:e}}getLastRow(){let e,t=null;const n=this.pinnedRowModel.getPinnedBottomRowCount(),i=this.pinnedRowModel.getPinnedTopRowCount();return n?(t="bottom",e=n-1):this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageLastRow()):i&&(t="top",e=i-1),void 0===e?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t||!(e&&!t||!e&&t)&&(e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned)}before(e,t){switch(e.rowPinned){case"top":if("top"!==t.rowPinned)return!0;break;case"bottom":if("bottom"!==t.rowPinned)return!1;break;default:if(YT(t.rowPinned))return"top"!==t.rowPinned}return e.rowIndex<t.rowIndex}};WT([F_("rowModel")],dF.prototype,"rowModel",2),WT([F_("pinnedRowModel")],dF.prototype,"pinnedRowModel",2),WT([F_("paginationProxy")],dF.prototype,"paginationProxy",2),dF=WT([L_("rowPositionUtils")],dF);var hF=class extends MR{createId(e){const{rowIndex:t,rowPinned:n,column:i}=e;return this.createIdFromValues({rowIndex:t,column:i,rowPinned:n})}createIdFromValues(e){const{rowIndex:t,rowPinned:n,column:i}=e;return"".concat(t,".").concat(null==n?"null":n,".").concat(i.getId())}equals(e,t){const n=e.column===t.column,i=e.rowPinned===t.rowPinned,r=e.rowIndex===t.rowIndex;return n&&i&&r}};hF=WT([L_("cellPositionUtils")],hF);var pF=class{constructor(e){this.cellValueChanges=e}},gF=class extends pF{constructor(e,t,n,i){super(e),this.initialRange=t,this.finalRange=n,this.ranges=i}},fF=class e{constructor(t){this.actionStack=[],this.maxStackSize=t||e.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};fF.DEFAULT_STACK_SIZE=10;var mF=fF,vF=class extends MR{constructor(){super(...arguments),this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},n=null!==this.activeCellEdit&&this.cellPositionUtils.equals(this.activeCellEdit,t),i=null!==this.activeRowEdit&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(n||i||this.isPasting||this.isRangeInAction))return;const{rowPinned:r,rowIndex:s,column:o,oldValue:a,value:l}=e,c={rowPinned:r,rowIndex:s,columnId:o.getColId(),newValue:l,oldValue:a};this.cellValueChanges.push(c)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}init(){if(!this.gos.get("undoRedoCellEditing"))return;const e=this.gos.get("undoRedoCellEditingLimit");e<=0||(this.undoStack=new mF(e),this.redoStack=new mF(e),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,OR.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,OR.EVENT_MODEL_UPDATED,(e=>{e.keepUndoRedoStack||this.clearStacks()})),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,OR.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,OR.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady((e=>{this.gridBodyCtrl=e.gridBodyCtrl})))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){const t={type:OR.EVENT_UNDO_STARTED,source:e};this.eventService.dispatchEvent(t);const n=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),i={type:OR.EVENT_UNDO_ENDED,source:e,operationPerformed:n};this.eventService.dispatchEvent(i)}redo(e){const t={type:OR.EVENT_REDO_STARTED,source:e};this.eventService.dispatchEvent(t);const n=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),i={type:OR.EVENT_REDO_ENDED,source:e,operationPerformed:n};this.eventService.dispatchEvent(i)}undoRedo(e,t,n,i,r){if(!e)return!1;const s=e.pop();return!(!s||!s.cellValueChanges)&&(this.processAction(s,(e=>e[i]),r),s instanceof gF?this.processRange(this.rangeService,s.ranges||[s[n]]):this.processCell(s.cellValueChanges),t.push(s),!0)}processAction(e,t,n){e.cellValueChanges.forEach((e=>{const{rowIndex:i,rowPinned:r,columnId:s}=e,o={rowIndex:i,rowPinned:r},a=this.rowPositionUtils.getRowNode(o);a.displayed&&a.setDataValue(s,t(e),n)}))}processRange(e,t){let n;e.removeAllCellRanges(!0),t.forEach(((i,r)=>{if(!i)return;const s=i.startRow,o=i.endRow;r===t.length-1&&(n={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(n));const a={rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:i.startColumn,columns:i.columns};e.addCellRange(a)}))}processCell(e){const t=e[0],{rowIndex:n,rowPinned:i}=t,r={rowIndex:n,rowPinned:i},s=this.rowPositionUtils.getRowNode(r),o={rowPinned:t.rowPinned,rowIndex:s.rowIndex,columnId:t.columnId};this.setLastFocusedCell(o,this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:n,columnId:i,rowPinned:r}=e,s=this.gridBodyCtrl.getScrollFeature(),o=this.columnModel.getGridColumn(i);if(!o)return;s.ensureIndexVisible(n),s.ensureColumnVisible(o);const a={rowIndex:n,column:o,rowPinned:r};this.focusService.setFocusedCell(GT(VT({},a),{forceBrowserFocus:!0})),null==t||t.setRangeToCell(a)}addRowEditingListeners(){this.addManagedListener(this.eventService,OR.EVENT_ROW_EDITING_STARTED,(e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}})),this.addManagedListener(this.eventService,OR.EVENT_ROW_EDITING_STOPPED,(()=>{const e=new pF(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null}))}addCellEditingListeners(){this.addManagedListener(this.eventService,OR.EVENT_CELL_EDITING_STARTED,(e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}})),this.addManagedListener(this.eventService,OR.EVENT_CELL_EDITING_STOPPED,(e=>{this.activeCellEdit=null;if(e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const e=new pF(this.cellValueChanges);this.pushActionsToUndoStack(e)}}))}addPasteListeners(){this.addManagedListener(this.eventService,OR.EVENT_PASTE_START,(()=>{this.isPasting=!0})),this.addManagedListener(this.eventService,OR.EVENT_PASTE_END,(()=>{const e=new pF(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1}))}addFillListeners(){this.addManagedListener(this.eventService,OR.EVENT_FILL_START,(()=>{this.isRangeInAction=!0})),this.addManagedListener(this.eventService,OR.EVENT_FILL_END,(e=>{const t=new gF(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1}))}addCellKeyListeners(){this.addManagedListener(this.eventService,OR.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,(()=>{this.isRangeInAction=!0})),this.addManagedListener(this.eventService,OR.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,(()=>{let e;e=this.rangeService&&this.gos.get("enableRangeSelection")?new gF(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):new pF(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}))}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};WT([F_("focusService")],vF.prototype,"focusService",2),WT([F_("ctrlsService")],vF.prototype,"ctrlsService",2),WT([F_("cellPositionUtils")],vF.prototype,"cellPositionUtils",2),WT([F_("rowPositionUtils")],vF.prototype,"rowPositionUtils",2),WT([F_("columnModel")],vF.prototype,"columnModel",2),WT([B_("rangeService")],vF.prototype,"rangeService",2),WT([k_],vF.prototype,"init",1),vF=WT([L_("undoRedoService")],vF);var yF=class extends MR{findHeader(e,t){let n,i;if(e.column instanceof kR?n=this.columnModel.getDisplayedGroupAtDirection(e.column,t):(i="getDisplayedCol".concat(t),n=this.columnModel[i](e.column)),!n)return;let{headerRowIndex:r}=e;if("filter"!==this.getHeaderRowType(r)){const e=[n];for(;n.getParent();)n=n.getParent(),e.push(n);n=e[e.length-1-r]}const{column:s,headerRowIndex:o}=this.getHeaderIndexToFocus(n,r);return{column:s,headerRowIndex:o}}getHeaderIndexToFocus(e,t){let n;if(e instanceof kR&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const i=e;n=i.getLeafColumns()[0];let r=n;for(;r!==i;)t++,r=r.getParent()}return{column:n||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return!!e&&e.getLeafColumns().some((e=>e.isSpanHeaderHeight()))}getColumnVisibleParent(e,t){const n=this.getHeaderRowType(t),i="column"===n;let r="filter"===n?e:e.getParent(),s=t-1,o=s;if(i&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;r&&r.isPadding();)r=r.getParent(),s--;o=s,s<0&&(r=e,s=t,o=void 0)}return{column:r,headerRowIndex:s,headerRowIndexWithoutSpan:o}}getColumnVisibleChild(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"After";let i=e,r=t+1,s=r;if("group"===this.getHeaderRowType(t)){const t=e.getDisplayedLeafColumns(),s="After"===n?t[0]:tR(t),o=[];let a=s;for(;a.getParent()!==e;)a=a.getParent(),o.push(a);if(i=s,s.isSpanHeaderHeight())for(let e=o.length-1;e>=0;e--){const t=o[e];if(!t.isPadding()){i=t;break}r++}else i=tR(o),i||(i=s)}return{column:i,headerRowIndex:r,headerRowIndexWithoutSpan:s}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const n=this.columnModel.getAllDisplayedColumns(),i=n["start"===t?0:n.length-1];if(!i)return;const r=this.ctrlsService.getHeaderRowContainerCtrl(i.getPinned()).getRowType(e);if("group"==r){return{headerRowIndex:e,column:this.columnModel.getColumnGroupAtLevel(i,e)}}return{headerRowIndex:null==r?-1:e,column:i}}};WT([F_("columnModel")],yF.prototype,"columnModel",2),WT([F_("ctrlsService")],yF.prototype,"ctrlsService",2),yF=WT([L_("headerPositionUtils")],yF);var CF=class{buildColumnDefs(e,t,n){const i=[],r={};return e.forEach((e=>{let s=!0,o=this.createDefFromColumn(e,t,n),a=e.getOriginalParent(),l=null;for(;a;){let e=null;if(a.isPadding()){a=a.getOriginalParent();continue}const t=r[a.getGroupId()];if(t){t.children.push(o),s=!1;break}if(e=this.createDefFromGroup(a),e&&(e.children=[o],r[e.groupId]=e,o=e,a=a.getOriginalParent()),null!=a&&l===a){s=!1;break}l=a}s&&i.push(o)})),i}createDefFromGroup(e){const t=o_(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,n){const i=o_(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?n.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=!e.isVisible()||void 0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSort()?e.getSort():null,i.sortIndex=null!=e.getSortIndex()?e.getSortIndex():null,i}};CF=WT([L_("columnDefFactory")],CF);var wF=class{getInitialRowClasses(e){const t=[];return YT(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),fR(t,this.processClassesFromGridOptions(e.rowNode)),fR(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&("left"===e.pinned&&t.push("ag-cell-last-left-pinned"),"right"===e.pinned&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],n=e=>{"string"===typeof e?t.push(e):Array.isArray(e)&&e.forEach((e=>t.push(e)))},i=this.gos.get("rowClass");if(i){if("function"===typeof i)return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];n(i)}const r=this.gos.getCallback("getRowClass");if(r){n(r({data:e.data,node:e,rowIndex:e.rowIndex}))}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,(e=>{t.push(e)}),(e=>{})),t}processRowClassRules(e,t,n){const i=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),i,t,n)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}};WT([F_("stylingService")],wF.prototype,"stylingService",2),WT([F_("gridOptionsService")],wF.prototype,"gos",2),wF=WT([L_("rowCssClassCalculator")],wF);var bF=class extends MR{init(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",(e=>this.isAccentedSort=e.currentValue)),this.addManagedPropertyListener("autoGroupColumnDef",(()=>this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup()))}doFullSort(e,t){const n=e.map(((e,t)=>({currentPos:t,rowNode:e})));return n.sort(this.compareRowNodes.bind(this,t)),n.map((e=>e.rowNode))}compareRowNodes(e,t,n){const i=t.rowNode,r=n.rowNode;for(let s=0,o=e.length;s<o;s++){const t=e[s],n="desc"===t.sort,o=this.getValue(i,t.column),a=this.getValue(r,t.column);let l;const c=this.getComparator(t,i);l=c?c(o,a,i,r,n):GP.defaultComparator(o,a,this.isAccentedSort);if(!isNaN(l)&&0!==l)return"asc"===t.sort?l:-1*l}return t.currentPos-n.currentPos}getComparator(e,t){const n=e.column,i=n.getColDef().comparator;if(null!=i)return i;if(!n.getColDef().showRowGroup)return;const r=!t.group&&n.getColDef().field;if(!r)return;const s=this.columnModel.getPrimaryColumn(r);return s?s.getColDef().comparator:void 0}getValue(e,t){var n,i;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(this.gos.isGroupUseEntireRow(this.columnModel.isPivotActive())){const i=null==(n=e.allLeafChildren)?void 0:n[0];return i?this.valueService.getValue(t,i,!1,!1):void 0}const r=this.columnModel.getGroupDisplayColumnForGroup(t.getId());if(!r)return;return null==(i=e.groupData)?void 0:i[r.getId()]}return e.group&&t.getColDef().showRowGroup?void 0:this.valueService.getValue(t,e,!1,!1)}};WT([F_("valueService")],bF.prototype,"valueService",2),WT([F_("columnModel")],bF.prototype,"columnModel",2),WT([k_],bF.prototype,"init",1),bF=WT([L_("rowNodeSorter")],bF);var SF=class extends MR{constructor(){super(...arguments),this.params={},this.ready=!1,this.readyCallbacks=[]}checkReady(){const e=this.params;this.ready=null!=e.gridCtrl&&null!=e.gridBodyCtrl&&null!=e.center&&null!=e.left&&null!=e.right&&null!=e.bottomCenter&&null!=e.bottomLeft&&null!=e.bottomRight&&null!=e.topCenter&&null!=e.topLeft&&null!=e.topRight&&null!=e.stickyTopCenter&&null!=e.stickyTopLeft&&null!=e.stickyTopRight&&null!=e.stickyBottomCenter&&null!=e.stickyBottomLeft&&null!=e.stickyBottomRight&&null!=e.centerHeader&&null!=e.leftHeader&&null!=e.rightHeader&&null!=e.fakeHScrollComp&&null!=e.fakeVScrollComp&&null!=e.gridHeaderCtrl,this.ready&&(this.readyCallbacks.forEach((t=>t(e))),this.readyCallbacks.length=0)}whenReady(e){this.ready?e(this.params):this.readyCallbacks.push(e)}register(e,t){this.params[e]=t,this.checkReady()}registerHeaderContainer(e,t){switch(t){case"left":this.params.leftHeader=e;break;case"right":this.params.rightHeader=e;break;default:this.params.centerHeader=e}this.checkReady()}get(e){return this.params[e]}getParams(){return this.params}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){return[this.params.leftHeader,this.params.rightHeader,this.params.centerHeader]}getHeaderRowContainerCtrl(e){switch(e){case"left":return this.params.leftHeader;case"right":return this.params.rightHeader;default:return this.params.centerHeader}}};SF.NAME="ctrlsService",SF=WT([L_(SF.NAME)],SF);var EF=class extends MR{constructor(){super(...arguments),this.registry={}}register(e){this.registry[e.controllerName]=e.controllerClass}getInstance(e){const t=this.registry[e];if(null!=t)return new t}};EF=WT([L_("ctrlsFactory")],EF);var xF=class extends XP{constructor(e,t){super(e),this.direction=t,this.hideTimeout=null}postConstruct(){this.addManagedListener(this.eventService,OR.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",iM()||rM())}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=hM(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui();["mouseenter","mousedown","touchstart"].forEach((t=>this.addManagedListener(e,t,(()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0))))),["mouseleave","touchend"].forEach((t=>this.addManagedListener(e,t,(()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1)))))}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame((()=>this.setScrollVisible()))}hideAndShowInvisibleScrollAsNeeded(){this.addManagedListener(this.eventService,OR.EVENT_BODY_SCROLL,(e=>{e.direction===this.direction&&(null!==this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))})),this.addManagedListener(this.eventService,OR.EVENT_BODY_SCROLL_END,(()=>{this.hideTimeout=window.setTimeout((()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null}),400)}))}attemptSettingScrollPosition(e){const t=this.getViewport();T_((()=>KM(t)),(()=>this.setScrollPosition(e)),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedListener(this.getViewport(),"scroll",e)}};WT([QP("eViewport")],xF.prototype,"eViewport",2),WT([QP("eContainer")],xF.prototype,"eContainer",2),WT([F_("scrollVisibleService")],xF.prototype,"scrollVisibleService",2),WT([F_("ctrlsService")],xF.prototype,"ctrlsService",2),WT([F_("animationFrameService")],xF.prototype,"animationFrameService",2);var AF=class e extends xF{constructor(){super(e.TEMPLATE,"horizontal")}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,OR.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new Uk((e=>this.eContainer.style.width="".concat(e,"px")))),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom="".concat(e,"px")}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.columnModel.getDisplayedColumnsRightWidth();const n=!this.enableRtl&&e,i=this.gos.getScrollbarWidth();n&&(t+=i),iP(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let r=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(r+=i),iP(this.eLeftSpacer,r),this.eLeftSpacer.classList.toggle("ag-scroller-corner",r<=i)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=e&&this.gos.getScrollbarWidth()||0,r=n?0:0===i&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),sP(this.getGui(),r),sP(this.eViewport,r),sP(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return jM(this.getViewport(),this.enableRtl)}setScrollPosition(e){KM(this.getViewport())||this.attemptSettingScrollPosition(e),UM(this.getViewport(),e,this.enableRtl)}};AF.TEMPLATE='<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>\n        </div>',WT([QP("eLeftSpacer")],AF.prototype,"eLeftSpacer",2),WT([QP("eRightSpacer")],AF.prototype,"eRightSpacer",2),WT([F_("columnModel")],AF.prototype,"columnModel",2),WT([F_("pinnedRowModel")],AF.prototype,"pinnedRowModel",2),WT([k_],AF.prototype,"postConstruct",1);var TF=AF,_F=class extends MR{postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,OR.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=this.gos.isDomLayout("print"),t=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),n=e?0:this.columnModel.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:OR.EVENT_LEFT_PINNED_WIDTH_CHANGED})),n!=this.rightWidth&&(this.rightWidth=n,this.eventService.dispatchEvent({type:OR.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}};WT([F_("columnModel")],_F.prototype,"columnModel",2),WT([k_],_F.prototype,"postConstruct",1),_F=WT([L_("pinnedWidthService")],_F);var RF=class extends MR{constructor(){super(...arguments),this.events=[]}postConstruct(){"clientSide"==this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(null==this.clientSideRowModel)return void this.eventService.dispatchEvent(e);this.events.push(e);const n=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach((e=>this.eventService.dispatchEvent(e))),this.events=[]};t?n():(null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(n)),this.dispatchExpandedDebounced())}};WT([F_("animationFrameService")],RF.prototype,"animationFrameService",2),WT([F_("rowModel")],RF.prototype,"rowModel",2),WT([k_],RF.prototype,"postConstruct",1),RF=WT([L_("rowNodeEventThrottle")],RF);var DF=(e,t)=>{var n;return"clientSide"===(null!=(n=t.rowModelType)?n:"clientSide")?{module:"@ag-grid-enterprise/row-grouping"}:null},MF={enableRowGroup:DF,rowGroup:DF,rowGroupIndex:DF,enablePivot:DF,enableValue:DF,pivot:DF,pivotIndex:DF,aggFunc:DF,cellEditor:e=>"agRichSelect"===e.cellEditor||"agRichSelectCellEditor"===e.cellEditor?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{var t;const n=["columnsMenuTab","generalMenuTab"];return(null==(t=e.menuTabs)?void 0:t.some((e=>n.includes(e))))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(e,t)=>{let{rowSelection:n}=t;return"multiple"===n?null:"headerCheckboxSelection is only supported with rowSelection=multiple"}},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(e,t)=>{let{rowSelection:n}=t;return"multiple"===n?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"}},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(e,t)=>{let{rowSelection:n}=t;return"multiple"===n?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"}},children:()=>PF},PF={objectName:"colDef",allProperties:Object.keys({headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0}),docsUrl:"column-properties/",deprecations:{columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},dndSource:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."},dndSourceOnRowDrag:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."}},validations:MF},IF={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!1,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,suppressChartToolPanelsButton:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,functionsPassive:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1},NF={sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:e=>{var t;const n=null!=(t=e.rowModelType)?t:"clientSide";switch(n){case"clientSide":const t="treeData requires 'getDataPath' in the ".concat(n," row model.");return e.getDataPath?null:t;case"serverSide":const i="treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ".concat(n," row model.");return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:e=>{var t;switch(null!=(t=e.rowModelType)?t:"clientSide"){case"clientSide":return null;case"serverSide":const t="groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll";return e.suppressServerSideInfiniteScroll?t:null}return null}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},suppressParentsInRowNodes:{dependencies:{groupSelectsChildren:[void 0,!1]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>PF,defaultColDef:()=>PF,defaultColGroupDef:()=>PF,autoGroupColumnDef:()=>PF},kF={objectName:"gridOptions",allProperties:[...rD.ALL_PROPERTIES,...oD.EVENT_CALLBACKS],propertyExceptions:["api","columnApi"],docsUrl:"grid-options/",deprecations:{enableChartToolPanelsButton:{version:"29"},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",renamed:"enterNavigatesVertically"},enterMovesDownAfterEdit:{version:"30",renamed:"enterNavigatesVerticallyAfterEdit"},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."},advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."}},validations:NF},OF=class{constructor(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new W_,this.globalEventHandlerFactory=e=>(t,n)=>{if(this.destroyed)return;const i=LR.has(t);if(i&&!e||!i&&e)return;const r=oD.getCallbackForEvent(t),s=this.gridOptions[r];"function"===typeof s&&this.frameworkOverrides.wrapOutgoing((()=>{s(n)}))}}get context(){return this.gridOptions.context}init(){this.columnApi=new HL(this.api);const e=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),e),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth()}destroy(){this.destroyed=!0,this.columnApi=void 0}get(e){var t;return null!=(t=this.gridOptions[e])?t:IF[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return YT(this.gridOptions[e])}mergeGridCommonParams(e){if(e){return t=>{const n=t;return n.api=this.api,n.columnApi=this.columnApi,n.context=this.context,e(n)}}return e}static toBoolean(e){return"boolean"===typeof e?e:"string"===typeof e&&("TRUE"===e.toUpperCase()||""==e)}static toNumber(e){if("number"===typeof e)return e;if("string"===typeof e){const t=parseInt(e);if(isNaN(t))return;return t}}static toConstrainedNum(e,t){return n=>{const i=OF.toNumber(n);if(!(null==i||i<e||i>t))return i}}static getCoercedValue(e,t){const n=OF.PROPERTY_COERCIONS.get(e);return n?n(t):t}static getCoercedGridOptions(e){const t={};return Object.entries(e).forEach((e=>{let[n,i]=e;const r=OF.getCoercedValue(n,i);t[n]=r})),t}updateGridOptions(e){let{options:t,force:n,source:i="api"}=e;const r={id:OF.changeSetId++,properties:[]},s=[];Object.entries(t).forEach((e=>{let[t,o]=e;"api"===i&&nD[t]&&f_("".concat(t," is an initial property and cannot be updated."));const a=OF.getCoercedValue(t,o),l=n||"object"===typeof a&&"api"===i,c=this.gridOptions[t];if(l||c!==a){this.gridOptions[t]=a;const e={type:t,currentValue:a,previousValue:c,changeSet:r,source:i};s.push(e)}})),this.validationService.processGridOptions(this.gridOptions),r.properties=s.map((e=>e.type)),s.forEach((e=>{this.gridOptions.debug&&console.log("AG Grid: Updated property ".concat(e.type," from "),e.previousValue," to  ",e.currentValue),this.propertyEventService.dispatchEvent(e)}))}addEventListener(e,t){this.propertyEventService.addEventListener(e,t)}removeEventListener(e,t){this.propertyEventService.removeEventListener(e,t)}getScrollbarWidth(){if(null==this.scrollbarWidth){const e="number"===typeof this.gridOptions.scrollbarWidth&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:uM();null!=e&&(this.scrollbarWidth=e,this.eventService.dispatchEvent({type:OR.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth}isRowModelType(e){return this.gridOptions.rowModelType===e||"clientSide"===e&&qT(this.gridOptions.rowModelType)}isDomLayout(e){var t;return(null!=(t=this.gridOptions.domLayout)?t:"normal")===e}isRowSelection(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return"function"===typeof this.gridOptions.getRowHeight}getRowHeightForNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(null==n&&(n=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(t)return{height:n,estimated:!0};const i={node:e,data:e.data},r=this.getCallback("getRowHeight")(i);if(this.isNumeric(r))return 0===r&&f_("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,r),estimated:!1}}if(e.detail&&this.get("masterDetail"))return this.getMasterDetailRowHeight();return{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:n,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||qT(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();const e=this.environment.refreshRowHeightVariable();return-1!==e?e:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(e){return!isNaN(e)&&"number"===typeof e&&isFinite(e)}getDomDataKey(){return this.domDataKey}getDomData(e,t){const n=e[this.getDomDataKey()];return n?n[t]:void 0}setDomData(e,t,n){const i=this.getDomDataKey();let r=e[i];qT(r)&&(r={},e[i]=r),r[t]=n}getDocument(){let e=null;return this.gridOptions.getDocument&&YT(this.gridOptions.getDocument)?e=this.gridOptions.getDocument():this.eGridDiv&&(e=this.eGridDiv.ownerDocument),e&&YT(e)?e:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getActiveDomElement(){return this.getRootNode().activeElement}getAsyncTransactionWaitMillis(){return YT(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return!this.get("ensureDomOrder")&&this.get("animateRows")}isGroupRowsSticky(){return!(this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){const e=this.gridOptions.autoGroupColumnDef;return!(null==e?void 0:e.comparator)&&!this.get("treeData")}getGroupAggFiltering(){const e=this.gridOptions.groupAggFiltering;return"function"===typeof e?this.getCallback("groupAggFiltering"):!0===e?()=>!0:void 0}getGrandTotalRow(){const e=this.gridOptions.grandTotalRow;if(e)return e;return this.gridOptions.groupIncludeTotalFooter?"bottom":void 0}getGroupTotalRowCallback(){const e=this.get("groupTotalRow");if("function"===typeof e)return this.getCallback("groupTotalRow");if(e)return()=>e;const t=this.get("groupIncludeFooter");if("function"===typeof t){const e=this.getCallback("groupIncludeFooter");return t=>e(t)?"bottom":void 0}return()=>t?"bottom":void 0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?"multipleColumns"===this.gridOptions.groupDisplayType:this.get("groupHideOpenParents")}isGroupUseEntireRow(e){return!e&&"groupRows"===this.gridOptions.groupDisplayType}getGridCommonParams(){return{api:this.api,columnApi:this.columnApi,context:this.context}}addGridCommonParams(e){const t=e;return t.api=this.api,t.columnApi=this.columnApi,t.context=this.context,t}};OF.PROPERTY_COERCIONS=new Map([...rD.BOOLEAN_PROPERTIES.map((e=>[e,OF.toBoolean])),...rD.NUMBER_PROPERTIES.map((e=>[e,OF.toNumber])),["groupAggFiltering",e=>"function"===typeof e?e:OF.toBoolean(e)],["pageSize",OF.toConstrainedNum(1,Number.MAX_VALUE)],["autoSizePadding",OF.toConstrainedNum(0,Number.MAX_VALUE)],["keepDetailRowsCount",OF.toConstrainedNum(1,Number.MAX_VALUE)],["rowBuffer",OF.toConstrainedNum(0,Number.MAX_VALUE)],["infiniteInitialRowCount",OF.toConstrainedNum(1,Number.MAX_VALUE)],["cacheOverflowSize",OF.toConstrainedNum(1,Number.MAX_VALUE)],["cacheBlockSize",OF.toConstrainedNum(1,Number.MAX_VALUE)],["serverSideInitialRowCount",OF.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelPageSize",OF.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelBufferSize",OF.toConstrainedNum(0,Number.MAX_VALUE)]]),OF.changeSetId=0,WT([F_("gridOptions")],OF.prototype,"gridOptions",2),WT([F_("eventService")],OF.prototype,"eventService",2),WT([F_("environment")],OF.prototype,"environment",2),WT([F_("frameworkOverrides")],OF.prototype,"frameworkOverrides",2),WT([F_("eGridDiv")],OF.prototype,"eGridDiv",2),WT([F_("validationService")],OF.prototype,"validationService",2),WT([F_("gridApi")],OF.prototype,"api",2),WT([k_],OF.prototype,"init",1),WT([O_],OF.prototype,"destroy",1),OF=WT([L_("gridOptionsService")],OF);var LF=class extends MR{getLocaleTextFunc(){const e=this.gos.getCallback("getLocaleText");if(e)return(t,n,i)=>e({key:t,defaultValue:n,variableValues:i});const t=this.gos.get("localeText");return(e,n,i)=>{let r=t&&t[e];if(r&&i&&i.length){let e=0;for(;!(e>=i.length);){if(-1===r.indexOf("${variable}"))break;r=r.replace("${variable}",i[e++])}}return null!=r?r:n}}};LF=WT([L_("localeService")],LF);var FF=class e extends xF{constructor(){super(e.TEMPLATE,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new Wk(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedListener(this.eventService,OR.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,n=e&&this.gos.getScrollbarWidth()||0,i=0===n&&t?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),iP(this.getGui(),i),iP(this.eViewport,i),iP(this.eContainer,i),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,t=e.getGridBodyCtrl().getBodyViewportElement(),n=this.getScrollPosition(),i=t.scrollTop;n!=i&&this.setScrollPosition(i,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e,t){t||KM(this.getViewport())||this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}};FF.TEMPLATE='<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>\n            </div>\n        </div>',WT([k_],FF.prototype,"postConstruct",1);var BF=FF,VF={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},GF=["january","february","march","april","may","june","july","august","september","october","november","december"],HF=class extends MR{constructor(){super(...arguments),this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}init(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",(()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")})),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",(e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(JR(e.source))}))}processDataTypeDefinitions(){var e;const t=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(t).forEach((e=>{let[t,n]=e;this.dataTypeDefinitions[t]=GT(VT({},n),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)})}));const n=null!=(e=this.gos.get("dataTypeDefinitions"))?e:{};this.dataTypeMatchers={},Object.entries(n).forEach((e=>{let[i,r]=e;const s=this.processDataTypeDefinition(r,n,[i],t);s&&(this.dataTypeDefinitions[i]=s,r.dataTypeMatcher&&(this.dataTypeMatchers[i]=r.dataTypeMatcher))})),this.checkObjectValueHandlers(t),["dateString","text","number","boolean","date"].forEach((e=>{const n=this.dataTypeMatchers[e];n&&delete this.dataTypeMatchers[e],this.dataTypeMatchers[e]=null!=n?n:t[e].dataTypeMatcher}))}mergeDataTypeDefinitions(e,t){const n=VT(VT({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...this.convertColumnTypes(e.columnTypes),...this.convertColumnTypes(t.columnTypes)]),n}processDataTypeDefinition(e,t,n,i){let r;const s=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let n=i[s];const o=t[s];if(n&&o&&(n=o),!this.validateDataTypeDefinition(e,n,s))return;r=this.mergeDataTypeDefinitions(n,e)}else{if(n.includes(s))return void f_('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');const o=t[s];if(!this.validateDataTypeDefinition(e,o,s))return;const a=this.processDataTypeDefinition(o,t,[...n,s],i);if(!a)return;r=this.mergeDataTypeDefinitions(a,e)}return GT(VT({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)})}validateDataTypeDefinition(e,t,n){return t?t.baseDataType===e.baseDataType||(f_('The "baseDataType" property of a data type definition must match that of its parent.'),!1):(f_("The data type definition ".concat(n," does not exist.")),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{var n,i;if(null==(n=t.node)?void 0:n.group){const n=t.column.getAggFunc();if(n){if("first"===n||"last"===n)return e.valueFormatter(t);if("number"===e.baseDataType&&"count"!==n){if("number"===typeof t.value)return e.valueFormatter(t);if("object"===typeof t.value){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter(GT(VT({},t),{value:t.value.toNumber()}));if("value"in t.value)return e.valueFormatter(GT(VT({},t),{value:t.value.value}))}}}if(!this.gos.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()){if("string"!==typeof t.value||(null==(i=e.dataTypeMatcher)?void 0:i.call(e,t.value)))return e.valueFormatter(t);if(!this.gos.get("suppressGroupMaintainValueType"))return}return e.valueFormatter(t)}}updateColDefAndGetDataTypeDefinitionColumnType(e,t,n){let{cellDataType:i}=t;const{field:r}=t;if(void 0===i&&(i=e.cellDataType),null!=i&&!0!==i||(i=!!this.canInferCellDataType(e,t)&&this.inferCellDataType(r,n)),!i)return void(e.cellDataType=!1);const s=this.dataTypeDefinitions[i];if(s)return e.cellDataType=i,s.groupSafeValueFormatter&&(e.valueFormatter=s.groupSafeValueFormatter),s.valueParser&&(e.valueParser=s.valueParser),s.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,s,n),s.columnTypes;f_('Missing data type definition - "'.concat(i,'"'))}updateColDefAndGetColumnType(e,t,n){var i,r;const s=this.updateColDefAndGetDataTypeDefinitionColumnType(e,t,n),o=null!=(r=null!=(i=t.type)?i:s)?r:e.type;return e.type=o,o?this.convertColumnTypes(o):void 0}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const n=e=>{t.add(e.key)};e.addEventListener(K_.EVENT_STATE_UPDATED,n),this.columnStateUpdateListenerDestroyFuncs.push((()=>e.removeEventListener(K_.EVENT_STATE_UPDATED,n)))}canInferCellDataType(e,t){var n;if("clientSide"!==this.rowModel.getType())return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,i))return!1;const r=null===t.type?e.type:t.type;if(r){const e=null!=(n=this.gos.get("columnTypes"))?n:{};if(this.convertColumnTypes(r).some((t=>{const n=e[t.trim()];return n&&this.doColDefPropsPreventInference(n,i)})))return!1}return!this.doColDefPropsPreventInference(e,i)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some((n=>{let[i,r]=n;return this.doesColDefPropPreventInference(e,t,i,r)}))}doesColDefPropPreventInference(e,t,n,i){if(!t[n])return!1;const r=e[n];return null===r?(t[n]=!1,!1):void 0===i?!!r:r===i}inferCellDataType(e,t){var n;if(!e)return;let i;const r=this.getInitialData();if(r){const t=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=c_(r,e,t)}else this.initWaitForRowData(t);if(null==i)return;const[s]=null!=(n=Object.entries(this.dataTypeMatchers).find((e=>{let[t,n]=e;return n(i)})))?n:["object"];return s}getInitialData(){const e=this.gos.get("rowData");if(null==e?void 0:e.length)return e[0];if(this.initialData)return this.initialData;{const e=this.rowModel.getRootNode().allLeafChildren;if(null==e?void 0:e.length)return e[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const n=this.addManagedListener(this.eventService,OR.EVENT_ROW_DATA_UPDATE_STARTED,(e=>{const{firstRowData:i}=e;if(!i)return;null==n||n(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(i,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations();const r={type:OR.EVENT_DATA_TYPES_INFERRED};this.eventService.dispatchEvent(r)}))}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const n=[];this.columnStateUpdateListenerDestroyFuncs.forEach((e=>e())),this.columnStateUpdateListenerDestroyFuncs=[];const i={},r={};Object.entries(this.columnStateUpdatesPendingInference).forEach((e=>{let[s,o]=e;const a=this.columnModel.getGridColumn(s);if(!a)return;const l=a.getColDef();if(!this.columnModel.resetColumnDefIntoColumn(a,"cellDataTypeInferred"))return;const c=a.getColDef();if(t&&c.type&&c.type!==l.type){const e=this.getUpdatedColumnState(a,o);e.rowGroup&&null==e.rowGroupIndex&&(i[s]=e),e.pivot&&null==e.pivotIndex&&(r[s]=e),n.push(e)}})),t&&n.push(...this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(i,r)),n.length&&this.columnModel.applyColumnState({state:n},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const n=this.columnModel.getColumnStateFromColDef(e);return t.forEach((e=>{delete n[e],"rowGroup"===e?delete n.rowGroupIndex:"pivot"===e&&delete n.pivotIndex})),n}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,n=e.object;this.hasObjectValueParser=t.valueParser!==n.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==n.valueFormatter}convertColumnTypes(e){let t=[];if(e instanceof Array){e.some((e=>"string"!==typeof e))?console.warn("if colDef.type is supplied an array it should be of type 'string[]'"):t=e}else"string"===typeof e?t=e.split(","):console.warn("colDef.type should be of type 'string' | 'string[]'");return t}getDateStringTypeDefinition(e){var t;return e&&null!=(t=this.getDataTypeDefinition(e))?t:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return null==(t=this.getDataTypeDefinition(e))?void 0:t.baseDataType}checkType(e,t){var n;if(null==t)return!0;const i=null==(n=this.getDataTypeDefinition(e))?void 0:n.dataTypeMatcher;return!i||i(t)}validateColDef(e){"object"===e.cellDataType&&(e.valueFormatter!==this.dataTypeDefinitions.object.groupSafeValueFormatter||this.hasObjectValueFormatter||f_('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&f_('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}setColDefPropertiesForBaseDataType(e,t,n){const i=(e,n,i)=>{let r=e.getColDef().valueFormatter;return r===t.groupSafeValueFormatter&&(r=t.valueFormatter),this.valueService.formatValue(e,n,i,r)},r=P_.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()),s=this.localeService.getLocaleTextFunc(),o=t=>{const{filterParams:n}=e;e.filterParams="object"===typeof n?VT(VT({},n),t):t};switch(t.baseDataType){case"number":e.cellEditor="agNumberCellEditor",r&&o({comparator:(e,t)=>{const n=null==e?0:parseInt(e),i=null==t?0:parseInt(t);return n===i?0:n>i?1:-1}});break;case"boolean":e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=e=>!!e.colDef.editable&&e.event.key===SP.SPACE,o(r?{valueFormatter:e=>YT(e.value)?s(String(e.value),e.value?"True":"False"):s("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>!1===t,numberOfInputs:0}]});break;case"date":e.cellEditor="agDateCellEditor",e.keyCreator=e=>i(e.column,e.node,e.value),r&&o({valueFormatter:e=>{const t=i(e.column,e.node,e.value);return YT(t)?t:s("blanks","(Blanks)")},treeList:!0,treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=GF[Number(e)-1];return s(t,VF[t])}return null!=e?e:s("blanks","(Blanks)")}});break;case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=e=>i(e.column,e.node,e.value);const n=t.dateParser;o(r?{valueFormatter:e=>{const t=i(e.column,e.node,e.value);return YT(t)?t:s("blanks","(Blanks)")},treeList:!0,treeListPathGetter:e=>{const t=n(null!=e?e:void 0);return t?[String(t.getFullYear()),String(t.getMonth()+1),String(t.getDate())]:null},treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=GF[Number(e)-1];return s(t,VF[t])}return null!=e?e:s("blanks","(Blanks)")}}:{comparator:(e,t)=>{const i=n(t);return null==t||i<e?-1:i>e?1:0}});break}case"object":e.cellEditorParams={useFormatter:!0},e.comparator=(e,t)=>{const r=this.columnModel.getPrimaryColumn(n),s=null==r?void 0:r.getColDef();if(!r||!s)return 0;const o=null==e?"":i(r,null,e),a=null==t?"":i(r,null,t);return o===a?0:o>a?1:-1},e.keyCreator=e=>i(e.column,e.node,e.value),r?o({valueFormatter:e=>{const t=i(e.column,e.node,e.value);return YT(t)?t:s("blanks","(Blanks)")}}):e.filterValueGetter=e=>i(e.column,e.node,this.valueService.getValue(e.column,e.node))}}getDefaultDataTypes(){const e=e=>!!e.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>{var t,n;return""===(null==(n=null==(t=e.newValue)?void 0:t.trim)?void 0:n.call(t))?null:Number(e.newValue)},valueFormatter:e=>null==e.value?"":"number"!==typeof e.value||isNaN(e.value)?t("invalidNumber","Invalid Number"):String(e.value),dataTypeMatcher:e=>"number"===typeof e},text:{baseDataType:"text",valueParser:e=>""===e.newValue?null:XT(e.newValue),dataTypeMatcher:e=>"string"===typeof e},boolean:{baseDataType:"boolean",valueParser:e=>{var t,n;return null==e.newValue?e.newValue:""===(null==(n=null==(t=e.newValue)?void 0:t.trim)?void 0:n.call(t))?null:"true"===String(e.newValue).toLowerCase()},valueFormatter:e=>null==e.value?"":String(e.value),dataTypeMatcher:e=>"boolean"===typeof e},date:{baseDataType:"date",valueParser:e=>AM(null==e.newValue?null:String(e.newValue)),valueFormatter:e=>{var n;return null==e.value?"":e.value instanceof Date&&!isNaN(e.value.getTime())?null!=(n=SM(e.value,!1))?n:"":t("invalidDate","Invalid Date")},dataTypeMatcher:e=>e instanceof Date},dateString:{baseDataType:"dateString",dateParser:e=>{var t;return null!=(t=AM(e))?t:void 0},dateFormatter:e=>{var t;return null!=(t=SM(null!=e?e:null,!1))?t:void 0},valueParser:t=>e(String(t.newValue))?t.newValue:null,valueFormatter:t=>e(String(t.value))?t.value:"",dataTypeMatcher:t=>"string"===typeof t&&e(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>{var t;return null!=(t=XT(e.value))?t:""}}}}};WT([F_("rowModel")],HF.prototype,"rowModel",2),WT([F_("columnModel")],HF.prototype,"columnModel",2),WT([F_("valueService")],HF.prototype,"valueService",2),WT([k_],HF.prototype,"init",1),HF=WT([L_("dataTypeService")],HF);var WF=class extends MR{constructor(){super(...arguments),this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",(e=>this.setColumnDefs(e)))}start(){this.ctrlsService.whenReady((()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()}))}setColumnsAndData(e){this.columnModel.setColumnDefs(null!=e?e:[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();const e=P_.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId());new zL("AG Grid",(()=>this.gos.get("debug"))).log("initialised successfully, enterprise = ".concat(e))}dispatchGridReadyEvent(){const e={type:OR.EVENT_GRID_READY};this.eventService.dispatchEvent(e)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t)return this.waitingForColumns?(this.waitingForColumns=!1,void this.setColumnsAndData(t)):void this.columnModel.setColumnDefs(t,JR(e.source))}};WT([F_("ctrlsService")],WF.prototype,"ctrlsService",2),WT([F_("columnModel")],WF.prototype,"columnModel",2),WT([F_("rowModel")],WF.prototype,"rowModel",2),WT([k_],WF.prototype,"postConstruct",1),WF=WT([L_("syncService")],WF);var jF=class extends MR{constructor(){super(...arguments),this.manuallyDisplayed=!1}postConstruct(){this.addManagedListener(this.eventService,OR.EVENT_ROW_DATA_UPDATED,(()=>this.onRowDataUpdated())),this.addManagedListener(this.eventService,OR.EVENT_NEW_COLUMNS_LOADED,(()=>this.onNewColumnsLoaded()))}registerOverlayWrapperComp(e){this.overlayWrapperComp=e,(!this.gos.get("columnDefs")||this.gos.isRowModelType("clientSide")&&!this.gos.get("rowData"))&&this.showLoadingOverlay()}showLoadingOverlay(){if(this.gos.get("suppressLoadingOverlay"))return;const e=this.userComponentFactory.getLoadingOverlayCompDetails({});this.showOverlay(e,"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}showNoRowsOverlay(){if(this.gos.get("suppressNoRowsOverlay"))return;const e=this.userComponentFactory.getNoRowsOverlayCompDetails({});this.showOverlay(e,"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}showOverlay(e,t,n){const i=e.newAgStackInstance(),r=this.addManagedPropertyListener(n,(e=>{let{currentValue:t}=e;i.then((e=>{e.refresh&&e.refresh(this.gos.addGridCommonParams(VT({},null!=t?t:{})))}))}));this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.overlayWrapperComp.showOverlay(i,t,r)}hideOverlay(){this.manuallyDisplayed=!1,this.overlayWrapperComp.hideOverlay()}showOrHideOverlay(){const e=this.paginationProxy.isEmpty(),t=this.gos.get("suppressNoRowsOverlay");e&&!t?this.showNoRowsOverlay():this.hideOverlay()}onRowDataUpdated(){this.showOrHideOverlay()}onNewColumnsLoaded(){!this.columnModel.isReady()||this.paginationProxy.isEmpty()||this.manuallyDisplayed||this.hideOverlay()}};WT([F_("userComponentFactory")],jF.prototype,"userComponentFactory",2),WT([F_("paginationProxy")],jF.prototype,"paginationProxy",2),WT([F_("columnModel")],jF.prototype,"columnModel",2),WT([k_],jF.prototype,"postConstruct",1),jF=WT([L_("overlayService")],jF);var UF=class extends MR{constructor(){super(...arguments),this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=x_((()=>this.dispatchQueuedStateUpdateEvents()),0),this.onRowGroupOpenedDebounced=x_((()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),0),this.onRowSelectedDebounced=x_((()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())}),0),this.staleStateKeys=new Set}postConstruct(){var e;this.isClientSideRowModel="clientSide"===this.rowModel.getType(),this.cachedState=null!=(e=this.gos.get("initialState"))?e:{},this.ctrlsService.whenReady((()=>this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnGridReady()))));const t=this.addManagedListener(this.eventService,OR.EVENT_NEW_COLUMNS_LOADED,(e=>{let{source:n}=e;"gridInitializing"===n&&(null==t||t(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnColumnsInitialised())))})),n=this.addManagedListener(this.eventService,OR.EVENT_ROW_COUNT_READY,(()=>{null==n||n(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnRowCountReady()))})),i=this.addManagedListener(this.eventService,OR.EVENT_FIRST_DATA_RENDERED,(()=>{null==i||i(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnFirstDataRendered()))}))}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState()),this.addManagedListener(this.eventService,OR.EVENT_TOOL_PANEL_VISIBLE_CHANGED,(()=>this.updateCachedState("sideBar",this.getSideBarState()))),this.addManagedListener(this.eventService,OR.EVENT_SIDE_BAR_UPDATED,(()=>this.updateCachedState("sideBar",this.getSideBarState())))}setupStateOnColumnsInitialised(){var e;const t=null!=(e=this.gos.get("initialState"))?e:{};this.setColumnState(t),this.setColumnGroupState(t),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_VALUE_CHANGED,(()=>this.updateColumnState(["aggregation"]))),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_MOVED,(()=>this.updateColumnState(["columnOrder"]))),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_PINNED,(()=>this.updateColumnState(["columnPinning"]))),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_RESIZED,(()=>this.updateColumnState(["columnSizing"]))),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_VISIBLE,(()=>this.updateColumnState(["columnVisibility"]))),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_PIVOT_CHANGED,(()=>this.updateColumnState(["pivot"]))),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_PIVOT_MODE_CHANGED,(()=>this.updateColumnState(["pivot"]))),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_ROW_GROUP_CHANGED,(()=>this.updateColumnState(["rowGroup"]))),this.addManagedListener(this.eventService,OR.EVENT_SORT_CHANGED,(()=>this.updateColumnState(["sort"]))),this.addManagedListener(this.eventService,OR.EVENT_NEW_COLUMNS_LOADED,(()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]))),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_GROUP_OPENED,(()=>this.updateCachedState("columnGroup",this.getColumnGroupState())))}setupStateOnRowCountReady(){var e;const{filter:t,rowGroupExpansion:n,rowSelection:i,pagination:r}=null!=(e=this.gos.get("initialState"))?e:{},s=this.gos.get("advancedFilterModel");(t||s)&&this.setFilterState(t,s),n&&this.setRowGroupExpansionState(n),i&&this.setRowSelectionState(i),r&&this.setPaginationState(r),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedListener(this.eventService,OR.EVENT_FILTER_CHANGED,(()=>this.updateCachedState("filter",this.getFilterState()))),this.addManagedListener(this.eventService,OR.EVENT_ROW_GROUP_OPENED,(()=>this.onRowGroupOpenedDebounced())),this.addManagedListener(this.eventService,OR.EVENT_EXPAND_COLLAPSE_ALL,(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()))),this.addManagedListener(this.eventService,OR.EVENT_SELECTION_CHANGED,(()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()})),this.addManagedListener(this.eventService,OR.EVENT_PAGINATION_CHANGED,(e=>{(e.newPage||e.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}))}setupStateOnFirstDataRendered(){var e;const{scroll:t,rangeSelection:n,focusedCell:i,columnOrder:r}=null!=(e=this.gos.get("initialState"))?e:{};i&&this.setFocusedCellState(i),n&&this.setRangeSelectionState(n),t&&this.setScrollState(t),this.setColumnPivotState(!!(null==r?void 0:r.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedListener(this.eventService,OR.EVENT_CELL_FOCUSED,(()=>this.updateCachedState("focusedCell",this.getFocusedCellState()))),this.addManagedListener(this.eventService,OR.EVENT_RANGE_SELECTION_CHANGED,(e=>{e.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())})),this.addManagedListener(this.eventService,OR.EVENT_BODY_SCROLL_END,(()=>this.updateCachedState("scroll",this.getScrollState())))}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],n=[],i=[],r=[],s=[],o=[],a=[],l=[],c=[],u=this.columnModel.getColumnState();for(let d=0;d<u.length;d++){const{colId:e,sort:h,sortIndex:p,rowGroup:g,rowGroupIndex:f,aggFunc:m,pivot:v,pivotIndex:y,pinned:C,hide:w,width:b,flex:S}=u[d];c.push(e),h&&(t[null!=p?p:0]={colId:e,sort:h}),g&&(n[null!=f?f:0]=e),"string"===typeof m&&i.push({colId:e,aggFunc:m}),v&&(r[null!=y?y:0]=e),C&&("right"===C?o:s).push(e),w&&a.push(e),(S||b)&&l.push({colId:e,flex:null!=S?S:void 0,width:b})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:n.length?{groupColIds:n}:void 0,aggregation:i.length?{aggregationModel:i}:void 0,pivot:r.length||e?{pivotMode:e,pivotColIds:r}:void 0,columnPinning:s.length||o.length?{leftColIds:s,rightColIds:o}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(e){const{sort:t,rowGroup:n,aggregation:i,pivot:r,columnPinning:s,columnVisibility:o,columnSizing:a,columnOrder:l}=e,c={},u=e=>{let t=c[e];return t||(t={colId:e},c[e]=t,t)};t&&t.sortModel.forEach(((e,t)=>{let{colId:n,sort:i}=e;const r=u(n);r.sort=i,r.sortIndex=t})),n&&n.groupColIds.forEach(((e,t)=>{const n=u(e);n.rowGroup=!0,n.rowGroupIndex=t})),i&&i.aggregationModel.forEach((e=>{let{colId:t,aggFunc:n}=e;u(t).aggFunc=n})),r&&(r.pivotColIds.forEach(((e,t)=>{const n=u(e);n.pivot=!0,n.pivotIndex=t})),this.gos.updateGridOptions({options:{pivotMode:r.pivotMode},source:"gridInitializing"})),s&&(s.leftColIds.forEach((e=>{u(e).pinned="left"})),s.rightColIds.forEach((e=>{u(e).pinned="right"}))),o&&o.hiddenColIds.forEach((e=>{u(e).hide=!0})),a&&a.columnSizingModel.forEach((e=>{let{colId:t,flex:n,width:i}=e;const r=u(t);r.flex=null!=n?n:null,r.width=i}));const d=null==l?void 0:l.orderedColIds,h=!!(null==d?void 0:d.length),p=h?d.map((e=>u(e))):Object.values(c);if(p.length){this.columnStates=p;const e={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnModel.applyColumnState({state:p,applyOrder:h,defaultState:e},"gridInitializing")}}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const n=this.columnGroupStates;if(this.columnGroupStates=void 0,this.columnModel.isSecondaryColumnsPresent()){if(t){let n=[];for(const e of t)this.columnModel.getSecondaryColumn(e.colId)&&n.push(e);this.columnModel.applyColumnState({state:n,applyOrder:e},"gridInitializing")}n&&this.columnModel.setColumnGroupState(n,"gridInitializing")}}getColumnGroupState(){const e=this.columnModel.getColumnGroupState(),t=[];return e.forEach((e=>{let{groupId:n,open:i}=e;i&&t.push(n)})),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){var t;if(!e.hasOwnProperty("columnGroup"))return;const n=new Set(null==(t=e.columnGroup)?void 0:t.openColumnGroupIds),i=this.columnModel.getColumnGroupState().map((e=>{let{groupId:t}=e;const i=n.has(t);return i&&n.delete(t),{groupId:t,open:i}}));n.forEach((e=>{i.push({groupId:e,open:!0})})),i.length&&(this.columnGroupStates=i),this.columnModel.setColumnGroupState(i,"gridInitializing")}getFilterState(){var e;let t=this.filterManager.getFilterModel();t&&0===Object.keys(t).length&&(t=void 0);const n=null!=(e=this.filterManager.getAdvancedFilterModel())?e:void 0;return t||n?{filterModel:t,advancedFilterModel:n}:void 0}setFilterState(e,t){const{filterModel:n,advancedFilterModel:i}=null!=e?e:{advancedFilterModel:t};n&&this.filterManager.setFilterModel(n,"columnFilter"),i&&this.filterManager.setAdvancedFilterModel(i)}getRangeSelectionState(){var e;const t=null==(e=this.rangeService)?void 0:e.getCellRanges().map((e=>{const{id:t,type:n,startRow:i,endRow:r,columns:s,startColumn:o}=e;return{id:t,type:n,startRow:i,endRow:r,colIds:s.map((e=>e.getColId())),startColId:o.getColId()}}));return(null==t?void 0:t.length)?{cellRanges:t}:void 0}setRangeSelectionState(e){if(!this.gos.get("enableRangeSelection")||!this.rangeService)return;const t=[];e.cellRanges.forEach((e=>{const n=[];if(e.colIds.forEach((e=>{const t=this.columnModel.getGridColumn(e);t&&n.push(t)})),!n.length)return;let i=this.columnModel.getGridColumn(e.startColId);if(!i){const e=this.columnModel.getAllDisplayedColumns(),t=new Set(n);i=e.find((e=>t.has(e)))}t.push(GT(VT({},e),{columns:n,startColumn:i}))})),this.rangeService.setCellRanges(t)}getScrollState(){var e,t,n;if(!this.isClientSideRowModel)return;const i=null==(e=this.ctrlsService.getGridBodyCtrl())?void 0:e.getScrollFeature(),{left:r}=null!=(t=null==i?void 0:i.getHScrollPosition())?t:{left:0},{top:s}=null!=(n=null==i?void 0:i.getVScrollPosition())?n:{top:0};return s||r?{top:s,left:r}:void 0}setScrollState(e){var t;if(!this.isClientSideRowModel)return;const{top:n,left:i}=e;null==(t=this.ctrlsService.getGridBodyCtrl())||t.getScrollFeature().setScrollPosition(n,i)}getSideBarState(){var e,t;return null==(t=null==(e=this.sideBarService)?void 0:e.getSideBarComp())?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:n,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:n,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:n,rowPinned:i}=e;this.focusService.setFocusedCell({column:this.columnModel.getGridColumn(t),rowIndex:n,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const e=this.paginationProxy.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationProxy.getPageSize();if(e||t)return{page:e,pageSize:t}}setPaginationState(e){e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationProxy.setPageSize(e.pageSize,"initialState"),"number"===typeof e.page&&this.paginationProxy.setPage(e.page)}getRowSelectionState(){var e;const t=this.selectionService.getSelectionState();return!t||!Array.isArray(t)&&(!1===t.selectAll||!1===t.selectAllChildren)&&!(null==(e=null==t?void 0:t.toggledNodes)?void 0:e.length)?void 0:t}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let n=!1;Object.entries(t).forEach((e=>{let[t,i]=e;JT(i,this.cachedState[t])||(n=!0)})),this.cachedState=VT(VT({},this.cachedState),t),n&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const n=this.cachedState[e];this.setCachedStateValue(e,t),JT(t,n)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=GT(VT({},this.cachedState),{[e]:t})}refreshStaleState(){this.staleStateKeys.forEach((e=>{if("rowSelection"===e)this.setCachedStateValue(e,this.getRowSelectionState())})),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach((e=>this.queuedUpdateSources.add(e))),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();const t={type:OR.EVENT_STATE_UPDATED,sources:e,state:this.cachedState};this.eventService.dispatchEvent(t)}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout((()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))}))}};WT([F_("filterManager")],UF.prototype,"filterManager",2),WT([F_("ctrlsService")],UF.prototype,"ctrlsService",2),WT([F_("focusService")],UF.prototype,"focusService",2),WT([F_("columnModel")],UF.prototype,"columnModel",2),WT([F_("paginationProxy")],UF.prototype,"paginationProxy",2),WT([F_("rowModel")],UF.prototype,"rowModel",2),WT([F_("selectionService")],UF.prototype,"selectionService",2),WT([F_("expansionService")],UF.prototype,"expansionService",2),WT([F_("columnAnimationService")],UF.prototype,"columnAnimationService",2),WT([B_("sideBarService")],UF.prototype,"sideBarService",2),WT([B_("rangeService")],UF.prototype,"rangeService",2),WT([k_],UF.prototype,"postConstruct",1),UF=WT([L_("stateService")],UF);var zF=class extends MR{init(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,kF)}processColumnDefs(e){this.processOptions(e,PF)}processOptions(e,t){const{validations:n,deprecations:i,allProperties:r,propertyExceptions:s,objectName:o,docsUrl:a}=t;r&&!0!==this.gridOptions.suppressPropertyNamesCheck&&this.checkProperties(e,[...null!=s?s:[],...Object.keys(i)],r,o,a);const l=new Set;Object.keys(e).forEach((t=>{var r;const s=i[t];if(s)if("renamed"in s){const{renamed:n,version:i}=s;l.add("As of v".concat(i,", ").concat(String(t)," is deprecated. Please use ").concat(String(n)," instead.")),e[n]=e[t]}else{const{message:e,version:n}=s;l.add("As of v".concat(n,", ").concat(String(t)," is deprecated. ").concat(null!=e?e:""))}const o=e[t];if(null==o||!1===o)return;const a=n[t];let c;if(!a)return;if("function"===typeof a){const n=a(e,this.gridOptions);if(!n)return;if("objectName"in n){const i=e[t];return Array.isArray(i)?void i.forEach((e=>{this.processOptions(e,n)})):void this.processOptions(e[t],n)}c=n}else c=a;const{module:u,dependencies:d,supportedRowModels:h}=c;if(h){const e=null!=(r=this.gridOptions.rowModelType)?r:"clientSide";if(!h.includes(e))return void l.add("".concat(String(t)," is not supported with the '").concat(e,"' row model."))}if(u){const e=Array.isArray(u)?u:[u];let n=!0;if(e.forEach((e=>{P_.__assertRegistered(e,String(t),this.context.getGridId())||(n=!1,l.add("".concat(String(t)," is only available when ").concat(e," is loaded.")))})),!n)return}if(d){const n=this.checkForWarning(t,d,e);if(n)return void l.add(n)}})),l.size>0&&l.forEach((e=>{f_(e)}))}checkForWarning(e,t,n){if("function"===typeof t)return t(n,this.gridOptions);const i=Object.entries(t).find((e=>{let[t,i]=e;const r=n[t];return!i.includes(r)}));if(!i)return null;const[r,s]=i;return s.length>1?"'".concat(String(e),"' requires '").concat(r,"' to be one of [").concat(s.join(", "),"]."):"'".concat(String(e),"' requires '").concat(r,"' to be ").concat(s[0],".")}checkProperties(e,t,n,i,r){const s=gP(Object.getOwnPropertyNames(e),["__ob__","__v_skip","__metadata__",...t,...n],n);if(r_(s,((e,t)=>{f_("invalid ".concat(i," property '").concat(e,"' did you mean any of these: ").concat(t.slice(0,8).join(", ")))})),Object.keys(s).length>0&&r){const e=this.getFrameworkOverrides().getDocLink(r);f_("to see all the valid ".concat(i," properties please check: ").concat(e))}}};WT([F_("gridOptions")],zF.prototype,"gridOptions",2),WT([k_],zF.prototype,"init",1),zF=WT([L_("validationService")],zF);var YF=class extends MR{constructor(){super(...arguments),this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new j_(this.getFrameworkOverrides())}addEventListener(e,t){const n=this.frameworkEventWrappingService.wrap(t),i=this.gos.useAsyncEvents()&&!LR.has(e),r=i?this.asyncEventListeners:this.syncEventListeners;r.has(e)||r.set(e,new Set),r.get(e).add(n),this.eventService.addEventListener(e,n,i)}removeEventListener(e,t){var n;const i=this.frameworkEventWrappingService.unwrap(t),r=this.asyncEventListeners.get(e),s=!!(null==r?void 0:r.delete(i));s||null==(n=this.syncEventListeners.get(e))||n.delete(i),this.eventService.removeEventListener(e,i,s)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(this.gos.useAsyncEvents()){const n=(e,n)=>{LR.has(e)&&t(e,n)},i=(e,n)=>{LR.has(e)||t(e,n)};this.globalEventListenerPairs.set(e,{syncListener:n,asyncListener:i}),this.eventService.addGlobalListener(n,!1),this.eventService.addGlobalListener(i,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:n,asyncListener:i}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(n,!1),this.eventService.removeGlobalListener(i,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach(((e,n)=>{e.forEach((e=>this.eventService.removeEventListener(n,e,t))),e.clear()})),e.clear()}destroyGlobalListeners(e,t){e.forEach((e=>this.eventService.removeGlobalListener(e,t))),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach((e=>{let{syncListener:t,asyncListener:n}=e;this.eventService.removeGlobalListener(t,!1),this.eventService.removeGlobalListener(n,!0)})),this.globalEventListenerPairs.clear()}};WT([k_],YF.prototype,"postConstruct",1),YF=WT([L_("apiEventService")],YF);var qF=class extends XP{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationProxy.getPageSize()||(this.paginationProxy.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}init(){this.addManagedPropertyListener("paginationPageSizeSelector",(()=>{this.onPageSizeSelectorValuesChange()})),this.addManagedListener(this.eventService,OR.EVENT_PAGINATION_CHANGED,(e=>this.handlePaginationChanged(e)))}handlePaginationChanged(e){if(!this.selectPageSizeComp||!(null==e?void 0:e.newPageSize))return;const t=this.paginationProxy.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){zM(this.getGui()),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0)}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&!1!==this.gos.get("paginationPageSizeSelector")}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationProxy.getPageSize(),n=!t||!e.includes(t);n&&(e.unshift(""),f_("The paginationPageSize grid option is set to a value that is not in the list of page size options.\n                Please make sure that the paginationPageSize grid option is set to one of the values in the \n                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.")),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0);const i=this.localeService.getLocaleTextFunc(),r=i("pageSizeSelectorLabel","Page Size:"),s=e.map((e=>({value:String(e),text:String(e)}))),o=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new fI).addOptions(s).setValue(String(n?"":t)).setAriaLabel(o).setLabel(r).onValueChange((()=>this.handlePageSizeItemSelected())),this.hasEmptyOption=n}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get("paginationPageSizeSelector");return Array.isArray(t)&&this.validateValues(t)?[...t].sort(((e,t)=>e-t)):e}validateValues(e){if(!e.length)return f_("The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.\n                If you want to hide the page size selector, please set the paginationPageSizeSelector to false."),!1;for(let t=0;t<e.length;t++){const n=e[t],i=n>0;if(!("number"===typeof n))return f_("The paginationPageSizeSelector grid option contains a non-numeric value.\n                    Please make sure that all values in the paginationPageSizeSelector array are numbers."),!1;if(!i)return f_("The paginationPageSizeSelector grid option contains a negative number or zero.\n                    Please make sure that all values in the paginationPageSizeSelector array are positive."),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}};WT([F_("paginationProxy")],qF.prototype,"paginationProxy",2),WT([k_],qF.prototype,"init",1);var KF=class extends MR{constructor(){super(),this.descriptionContainer=null,this.announceValue=x_(this.announceValue.bind(this),200)}postConstruct(){const e=this.gos.getDocument(),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),bD(t,"polite"),ED(t,"additions text"),SD(t,!0),this.eGridDiv.appendChild(t)}announceValue(e){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout((()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)}),50))}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(zM(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null}};WT([F_("eGridDiv")],KF.prototype,"eGridDiv",2),WT([k_],KF.prototype,"postConstruct",1),KF=WT([L_("ariaAnnouncementService")],KF);var XF=class{};XF.gridOptions=void 0;var QF=1,ZF=class{create(e,t,n,i,r){var s;let o={};XF.gridOptions?(l_(o,XF.gridOptions,!0,!0),o=VT(VT({},o),t)):o=t;const a=OF.getCoercedGridOptions(o),l=!!a.debug,c=null!=(s=a.gridId)?s:String(QF++),u=this.getRegisteredModules(r,c),d=this.createBeansList(a.rowModelType,u,c),h=this.createProvidedBeans(e,a,r);if(!d)return void m_("Failed to create grid.");const p={providedBeanInstances:h,beanClasses:d,debug:l,gridId:c},g=new zL("Context",(()=>p.debug)),f=new I_(p,g),m=f.getBean("beans");this.registerModuleUserComponents(m,u),this.registerStackComponents(m,u),this.registerControllers(m,u),n(f),m.syncService.start(),i&&i(f);return f.getBean("gridApi")}registerControllers(e,t){t.forEach((t=>{t.controllers&&t.controllers.forEach((t=>e.ctrlsFactory.register(t)))}))}registerStackComponents(e,t){const n=this.createAgStackComponentsList(t);e.agStackComponentsRegistry.setupComponents(n)}getRegisteredModules(e,t){const n=e?e.modules:null,i=P_.__getRegisteredModules(t),r=[],s={},o=(e,t,n)=>{var i;s[(i=t).moduleName]||(s[i.moduleName]=!0,r.push(i),P_.__register(i,e,n)),t.dependantModules&&t.dependantModules.forEach((t=>o(e,t,n)))};return n&&n.forEach((e=>o(!0,e,t))),i&&i.forEach((e=>o(!P_.__isPackageBased(),e,void 0))),r}registerModuleUserComponents(e,t){this.extractModuleEntity(t,(e=>e.userComponents?e.userComponents:[])).forEach((t=>{e.userComponentRegistry.registerDefaultComponent(t.componentName,t.componentClass)}))}createProvidedBeans(e,t,n){let i=n?n.frameworkOverrides:null;qT(i)&&(i=new FL);const r={gridOptions:t,eGridDiv:e,globalEventListener:n?n.globalEventListener:null,globalSyncEventListener:n?n.globalSyncEventListener:null,frameworkOverrides:i};return n&&n.providedBeanInstances&&Object.assign(r,n.providedBeanInstances),r}createAgStackComponentsList(e){let t=[{componentName:"AgCheckbox",componentClass:vI},{componentName:"AgRadioButton",componentClass:yI},{componentName:"AgToggleButton",componentClass:sL},{componentName:"AgInputTextField",componentClass:MI},{componentName:"AgInputTextArea",componentClass:oL},{componentName:"AgInputNumberField",componentClass:PI},{componentName:"AgInputDateField",componentClass:aL},{componentName:"AgInputRange",componentClass:lL},{componentName:"AgRichSelect",componentClass:hL},{componentName:"AgSelect",componentClass:fI},{componentName:"AgSlider",componentClass:gL},{componentName:"AgGridBody",componentClass:$k},{componentName:"AgHeaderRoot",componentClass:FO},{componentName:"AgSortIndicator",componentClass:qI},{componentName:"AgPagination",componentClass:lF},{componentName:"AgPageSizeSelector",componentClass:qF},{componentName:"AgOverlayWrapper",componentClass:uF},{componentName:"AgGroupComponent",componentClass:mL},{componentName:"AgRowContainer",componentClass:oO},{componentName:"AgFakeHorizontalScroll",componentClass:TF},{componentName:"AgFakeVerticalScroll",componentClass:BF},{componentName:"AgAutocomplete",componentClass:IL}];const n=this.extractModuleEntity(e,(e=>e.agStackComponents?e.agStackComponents:[]));return t=t.concat(n),t}createBeansList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"clientSide",t=arguments.length>2?arguments[2]:void 0;const n=(arguments.length>1?arguments[1]:void 0).filter((t=>!t.rowModel||t.rowModel===e)),i={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!i[e])return void m_("Could not find row model for rowModelType = "+e);if(!P_.__assertRegistered(i[e],"rowModelType = '".concat(e,"'"),t))return;const r=[_k,dF,hF,yF,$L,hk,BN,tF,nF,UO,sk,oF,BO,LF,zF,$O,lk,tD,W_,OF,_L,GL,gk,$R,kO,iL,QO,jL,PR,VL,tO,JL,WL,UL,KO,VO,dN,HL,XL,eO,sF,BL,rL,Jk,KL,QL,ZL,aF,VR,eF,zO,vF,aD,CF,wF,nL,bF,SF,_F,RF,EF,HF,pk,WF,jF,UF,YO,YF,KF,qO],s=this.extractModuleEntity(n,(e=>e.beans?e.beans:[]));r.push(...s);const o=[];return r.forEach((e=>{o.indexOf(e)<0&&o.push(e)})),o}extractModuleEntity(e,t){return[].concat(...e.map(t))}},$F=class{wrap(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0;const r=this.createWrapper(e,i);return t.forEach((e=>{this.createMethod(r,e,!0)})),n.forEach((e=>{this.createMethod(r,e,!1)})),r}unwrap(e){return e}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&console.warn("AG Grid: Framework component is missing the method "+t+"()"),null)}}},JF=class{};JF.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"},JF.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"],JF.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var eB="undefined"===typeof global?{}:global;eB.HTMLElement="undefined"===typeof HTMLElement?{}:HTMLElement,eB.HTMLButtonElement="undefined"===typeof HTMLButtonElement?{}:HTMLButtonElement,eB.HTMLSelectElement="undefined"===typeof HTMLSelectElement?{}:HTMLSelectElement,eB.HTMLInputElement="undefined"===typeof HTMLInputElement?{}:HTMLInputElement,eB.Node="undefined"===typeof Node?{}:Node,eB.MouseEvent="undefined"===typeof MouseEvent?{}:MouseEvent;var tB=class e{constructor(t,n,i,r,s,o){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=t,this.gos=n,this.eventService=i,this.columnModel=r,this.beans=o,this.selectionService=s,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=e.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return GP.cloneObject(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(t){if("string"===typeof t)return void console.warn("AG Grid: rowData must be an array.");this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(t);const n=this.rootNode,i=this.rootNode.sibling;n.childrenAfterFilter=null,n.childrenAfterGroup=null,n.childrenAfterAggFilter=null,n.childrenAfterSort=null,n.childrenMapped=null,n.updateHasChildren(),this.nextId=0,this.allNodesMap={},t?n.allLeafChildren=t.map((t=>this.createNode(t,this.rootNode,e.TOP_LEVEL))):(n.allLeafChildren=[],n.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=n.childrenAfterFilter,i.childrenAfterGroup=n.childrenAfterGroup,i.childrenAfterAggFilter=n.childrenAfterAggFilter,i.childrenAfterSort=n.childrenAfterSort,i.childrenMapped=n.childrenMapped,i.allLeafChildren=n.allLeafChildren)}updateRowData(e,t){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const n={remove:[],update:[],add:[]},i=[];return this.executeRemove(e,n,i),this.executeUpdate(e,n,i),this.executeAdd(e,n),this.updateSelection(i,"rowDataChanged"),t&&GP.sortRowNodesByOrder(this.rootNode.allLeafChildren,t),n}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){const t={type:OR.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:(null==e?void 0:e.length)?e[0]:null};this.eventService.dispatchEvent(t)}updateSelection(e,t){const n=e.length>0;if(n&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),n){const e={type:OR.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(e)}}executeAdd(t,n){var i;const{add:r,addIndex:s}=t;if(GP.missingOrEmpty(r))return;const o=r.map((t=>this.createNode(t,this.rootNode,e.TOP_LEVEL)));if("number"===typeof s&&s>=0){const{allLeafChildren:e}=this.rootNode,t=e.length;let n=s;if(this.gos.get("treeData")&&s>0&&t>0)for(let o=0;o<t;o++)if((null==(i=e[o])?void 0:i.rowIndex)==s-1){n=o+1;break}const r=e.slice(0,n),a=e.slice(n,e.length);this.rootNode.allLeafChildren=[...r,...o,...a]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...o];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),n.add=o}executeRemove(e,t,n){const{remove:i}=e;if(GP.missingOrEmpty(i))return;const r={};i.forEach((e=>{const i=this.lookupRowNode(e);i&&(i.isSelected()&&n.push(i),i.clearRowTopAndRowIndex(),r[i.id]=!0,delete this.allNodesMap[i.id],t.remove.push(i))})),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter((e=>!r[e.id])),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(t,n,i){const{update:r}=t;GP.missingOrEmpty(r)||r.forEach((t=>{const r=this.lookupRowNode(t);r&&(r.updateData(t),!r.selectable&&r.isSelected()&&i.push(r),this.setMasterForRow(r,t,e.TOP_LEVEL,!1),n.update.push(r))}))}lookupRowNode(e){const t=this.gos.getCallback("getRowId");let n;if(t){const i=t({data:e,level:0});if(n=this.allNodesMap[i],!n)return console.error("AG Grid: could not find row id=".concat(i,", data item was not found for this id")),null}else if(n=this.rootNode.allLeafChildren.find((t=>t.data===e)),!n)return console.error("AG Grid: could not find data item as object was not found",e),console.error("Consider using getRowId to help the Grid find matching row data"),null;return n||null}createNode(e,t,n){const i=new lN(this.beans);i.group=!1,this.setMasterForRow(i,e,n,!0);const r=this.gos.get("suppressParentsInRowNodes");return t&&!r&&(i.parent=t),i.level=n,i.setDataAndId(e,this.nextId.toString()),this.allNodesMap[i.id]&&console.warn("AG Grid: duplicate node id '".concat(i.id,"' detected from getRowId callback, this could cause issues in your grid.")),this.allNodesMap[i.id]=i,this.nextId++,i}setMasterForRow(e,t,n,i){if(this.gos.get("treeData"))e.setMaster(!1),i&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const n=this.gos.get("isRowMaster");n?e.setMaster(n(t)):e.setMaster(!0)}else e.setMaster(!1);if(i){const t=this.columnModel.getRowGroupColumns(),i=n+(t?t.length:0);e.expanded=!!e.master&&this.isExpanded(i)}}}isExpanded(e){const t=this.gos.get("groupDefaultExpanded");return-1===t||e<t}};tB.TOP_LEVEL=0,tB.ROOT_NODE_ID="ROOT_NODE_ID";var nB=tB,iB=class extends MR{constructor(){super(...arguments),this.onRowHeightChanged_debounced=GP.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}init(){const e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),n=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedListener(this.eventService,OR.EVENT_NEW_COLUMNS_LOADED,n),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:"pivot"})),this.addManagedListener(this.eventService,OR.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,OR.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_GRID_READY,(()=>this.onGridReady())),this.addPropertyListeners(),this.rootNode=new lN(this.beans),this.nodeManager=new nB(this.rootNode,this.gos,this.eventService,this.columnModel,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),n=new Set(["excludeChildrenWhenTreeDataFiltering"]),i=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),r=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),s=new Set(["postSortRows","groupDisplayType","accentedSort"]),o=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...e,...t,...n,...i,...i,...r,...s,...o,...a];this.addManagedPropertyListeners(l,(l=>{var c;const u=null==(c=l.changeSet)?void 0:c.properties;if(!u)return;const d=e=>u.some((t=>e.has(t)));d(e)?this.setRowData(this.rootNode.allLeafChildren.map((e=>e.data))):d(t)?this.refreshModel({step:"group"}):d(n)?this.refreshModel({step:"filter"}):d(i)?this.refreshModel({step:"pivot"}):d(r)?this.refreshModel({step:"aggregate"}):d(s)?this.refreshModel({step:"sort"}):d(o)?this.refreshModel({step:"filter_aggregates"}):d(a)&&this.refreshModel({step:"map"})})),this.addManagedPropertyListener("rowHeight",(()=>this.resetRowHeights()))}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,n,i){let r,s=!1;do{r=!1;const o=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(o,n),c=Math.min(a,i);for(let e=l;e<=c;e++){const t=this.getRow(e);if(t.rowHeightEstimated){const e=this.gos.getRowHeightForNode(t);t.setRowHeight(e.height),r=!0,s=!0}}r&&this.setRowTopAndRowIndex()}while(r);return s}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const n=new Set,i=this.gos.isDomLayout("normal");for(let r=0;r<this.rowsToDisplay.length;r++){const s=this.rowsToDisplay[r];if(null!=s.id&&n.add(s.id),null==s.rowHeight){const t=this.gos.getRowHeightForNode(s,i,e);s.setRowHeight(t.height,t.estimated)}s.setRowTop(t),s.setRowIndex(r),t+=s.rowHeight}return n}clearRowTopAndRowIndex(e,t){const n=e.isActive(),i=e=>{e&&null!=e.id&&!t.has(e.id)&&e.clearRowTopAndRowIndex()},r=e=>{if(i(e),i(e.detailNode),i(e.sibling),e.hasChildren()&&e.childrenAfterGroup){const t=-1==e.level;n&&!t&&!e.expanded||e.childrenAfterGroup.forEach(r)}};r(this.rootNode)}ensureRowsAtPixel(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getRowIndexAtPixel(t),r=this.getRow(i),s=!this.gos.get("suppressAnimationFrame");return r!==e[0]&&(e.forEach((e=>{GP.removeFromArray(this.rootNode.allLeafChildren,e)})),e.forEach(((e,t)=>{GP.insertIntoArray(this.rootNode.allLeafChildren,e,Math.max(i+n,0)+t)})),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:s}),!0)}highlightRowAtPixel(e,t){const n=null!=t?this.getRowIndexAtPixel(t):null,i=null!=n?this.getRow(n):null;if(!i||!e||i===e||null==t)return void(this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null));const r=this.getHighlightPosition(t,i);this.lastHighlightedRow&&this.lastHighlightedRow!==i&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),i.setHighlighted(r),this.lastHighlightedRow=i}getHighlightPosition(e,t){if(!t){const n=this.getRowIndexAtPixel(e);if(!(t=this.getRow(n||0)))return 1}const{rowTop:n,rowHeight:i}=t;return e-n<i/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const e=this.rootNode.childrenAfterAggFilter;return e?e.length:0}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let t=this.rootNode.childrenAfterSort[e];if(this.gos.get("groupHideOpenParents"))for(;t.expanded&&t.childrenAfterSort&&t.childrenAfterSort.length>0;)t=t.childrenAfterSort[0];return t.rowIndex}getRowBounds(e){if(GP.missing(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=this.gos.isAnimateRows();this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=this.gos.isAnimateRows(),n=0===e.columns.length||e.columns.some((e=>e.isPrimary()))?"filter":"filter_aggregates";this.refreshModel({step:n,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=this.gos.isAnimateRows();this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const t=GP.missingOrEmpty(e),n=new JO(!1,this.rootNode);return(t||this.gos.get("treeData"))&&n.setInactive(),n}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;if(null==e.rowNodeTransactions)return!1;const t=e.rowNodeTransactions.filter((e=>null!=e.add&&e.add.length>0||null!=e.remove&&e.remove.length>0));return null==t||0==t.length}buildRefreshModelParams(e){let t="group";const n={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(GP.exists(e)&&(t=n[e]),GP.missing(t))return void console.error("AG Grid: invalid step ".concat(e,", available steps are ").concat(Object.keys(n).join(", ")));return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:!this.gos.get("suppressAnimationFrame")}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.shouldRowModelIgnoreRefresh())return;let t="object"===typeof e&&"step"in e?e:this.buildRefreshModelParams(e);if(!t)return;if(this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const n=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,t.rowNodeOrder,n,!!t.afterColumnsChanged);case"filter":this.doFilter(n);case"pivot":this.doPivot(n);case"aggregate":this.doAggregate(n);case"filter_aggregates":this.doFilterAggregates(n);case"sort":this.doSort(t.rowNodeTransactions,n);case"map":this.doRowsToDisplay()}const i=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(n,i),this.isRefreshingModel=!1;const r={type:OR.EVENT_MODEL_UPDATED,animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack};this.eventService.dispatchEvent(r)}isEmpty(){const e=GP.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return GP.missing(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return GP.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let n=!t,i=!1;const r=[],s=this.gos.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort((o=>{if(i)return;if(n&&(o===t||o===e)&&(i=!0,o.group&&s))return void r.push(...o.allLeafChildren);if(!n){if(o!==t&&o!==e)return;n=!0}(!o.group||!s)&&r.push(o)})),r}setDatasource(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;let t=0,n=this.rowsToDisplay.length-1;if(e<=0)return 0;if(GP.last(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let i=-1,r=-1;for(;;){const s=Math.floor((t+n)/2),o=this.rowsToDisplay[s];if(this.isRowInPixel(o,e))return s;o.rowTop<e?t=s+1:o.rowTop>e&&(n=s-1);if(i===t&&r===n)return s;i=t,r=n}}isRowInPixel(e,t){const n=e.rowTop,i=e.rowTop+e.rowHeight;return n<=t&&i>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(((t,n)=>e(t,n)))}forEachNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){const{nodes:t,callback:n,recursionType:i,includeFooterNodes:r}=e;let{index:s}=e;const o=e=>{var i;const o=null==(i=t[0])?void 0:i.parent;if(!o)return;const a=r&&this.gos.getGrandTotalRow(),l=this.gos.getGroupTotalRowCallback(),c=r&&l({node:o});o===this.rootNode?a===e&&(o.createFooter(),n(o.sibling,s++)):c===e&&(o.createFooter(),n(o.sibling,s++))};o("top");for(let a=0;a<t.length;a++){const e=t[a];if(n(e,s++),e.hasChildren()&&!e.footer){let t=null;switch(i){case 0:t=e.childrenAfterGroup;break;case 1:t=e.childrenAfterAggFilter;break;case 2:t=e.childrenAfterSort;break;case 3:t=e.leafGroup?null:e.childrenAfterSort}t&&(s=this.recursivelyWalkNodesAndCallback({nodes:[...t],callback:n,recursionType:i,index:s,includeFooterNodes:r}))}}return o("bottom"),s}doAggregate(e){var t;null==(t=this.aggregationStage)||t.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gos.get("treeData"),n=this.columnModel.isPivotActive(),i=r=>{r&&r.forEach((r=>{const s=()=>{r.expanded=e,i(r.childrenAfterGroup)};if(t){return void(GP.exists(r.childrenAfterGroup)&&s())}if(n){return void(!r.leafGroup&&s())}r.group&&s()}))};this.rootNode&&i(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"});const r=e?"expandAll":"collapseAll",s={type:OR.EVENT_EXPAND_COLLAPSE_ALL,source:r};this.eventService.dispatchEvent(s)}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,n,i){if(this.groupStage){if(e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodeOrder:t,changedPath:n}):this.groupStage.execute({rowNode:this.rootNode,changedPath:n,afterColumnsChanged:i}),this.gos.get("groupSelectsChildren")){if(this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",n)){const e={type:OR.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(e)}}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:OR.EVENT_ROW_COUNT_READY}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){var t;null==(t=this.pivotStage)||t.execute({rowNode:this.rootNode,changedPath:e})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(e){if("string"==typeof e&&0==e.indexOf(lN.ID_PREFIX_ROW_GROUP)){let t;return this.forEachNode((n=>{n.id===e&&(t=n)})),t}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){const e={type:OR.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(e),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];const e=this.gos.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout((()=>{this.executeBatchUpdateRowData()}),e)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const e=[],t=[];let n=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach((i=>{const r=this.nodeManager.updateRowData(i.rowDataTransaction,void 0);t.push(r),i.callback&&e.push(i.callback.bind(null,r)),"number"===typeof i.rowDataTransaction.addIndex&&(n=!0)})),this.commonUpdateRowData(t,void 0,n),e.length>0&&window.setTimeout((()=>{e.forEach((e=>e()))}),0),t.length>0){const e={type:OR.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:t};this.eventService.dispatchEvent(e)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e,t){this.valueCache.onDataChanged();const n=this.nodeManager.updateRowData(e,t),i="number"===typeof e.addIndex;return this.commonUpdateRowData([n],t,i),n}createRowNodeOrder(){if(this.gos.get("suppressMaintainUnsortedOrder"))return;const e={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let t=0;t<this.rootNode.allLeafChildren.length;t++){e[this.rootNode.allLeafChildren[t].id]=t}return e}commonUpdateRowData(e,t,n){if(!this.hasStarted)return;const i=!this.gos.get("suppressAnimationFrame");n&&(t=this.createRowNodeOrder());const r={type:OR.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(r),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode((t=>{t.setRowHeight(t.rowHeight,!0);const n=t.detailNode;n&&n.setRowHeight(n.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0})),e}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};WT([F_("columnModel")],iB.prototype,"columnModel",2),WT([F_("selectionService")],iB.prototype,"selectionService",2),WT([F_("valueCache")],iB.prototype,"valueCache",2),WT([F_("beans")],iB.prototype,"beans",2),WT([F_("filterStage")],iB.prototype,"filterStage",2),WT([F_("sortStage")],iB.prototype,"sortStage",2),WT([F_("flattenStage")],iB.prototype,"flattenStage",2),WT([B_("groupStage")],iB.prototype,"groupStage",2),WT([B_("aggregationStage")],iB.prototype,"aggregationStage",2),WT([B_("pivotStage")],iB.prototype,"pivotStage",2),WT([B_("filterAggregatesStage")],iB.prototype,"filterAggregatesStage",2),WT([k_],iB.prototype,"init",1),iB=WT([L_("rowModel")],iB);var rB=class extends MR{execute(e){const{changedPath:t}=e;this.filterService.filter(t)}};WT([F_("filterService")],rB.prototype,"filterService",2),rB=WT([L_("filterStage")],rB);var sB=class extends MR{execute(e){const t=this.sortController.getSortOptions(),n=GP.exists(t)&&t.length>0,i=n&&GP.exists(e.rowNodeTransactions)&&this.gos.get("deltaSort"),r=t.some((e=>this.gos.isColumnsSortingCoupledToGroup()?e.column.isPrimary()&&e.column.isRowGroupActive():!!e.column.getColDef().showRowGroup));this.sortService.sort(t,n,i,e.rowNodeTransactions,e.changedPath,r)}};WT([F_("sortService")],sB.prototype,"sortService",2),WT([F_("sortController")],sB.prototype,"sortController",2),sB=WT([L_("sortStage")],sB);var oB=class extends MR{execute(e){const t=e.rowNode,n=[],i=this.beans.columnModel.isPivotMode(),r=i&&t.leafGroup,s=r?[t]:t.childrenAfterSort,o=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(o,s,n,i,0);if(!r&&n.length>0&&o.grandTotalRow){t.createFooter();const e="top"===o.grandTotalRow;this.addRowNodeToRowsToDisplay(o,t.sibling,n,0,e)}return n}getFlattenDetails(){const e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gos.isGroupMultiAutoColumn(),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:this.gos.getGrandTotalRow(),groupTotalRow:this.gos.getGroupTotalRowCallback()}}recursivelyAddToRowsToDisplay(e,t,n,i,r){if(!GP.missingOrEmpty(t))for(let s=0;s<t.length;s++){const o=t[s],a=o.hasChildren(),l=i&&!a,c=e.groupRemoveSingleChildren&&a&&1===o.childrenAfterGroup.length,u=e.groupRemoveLowestSingleChildren&&a&&o.leafGroup&&1===o.childrenAfterGroup.length,d=i&&o.leafGroup,h=e.hideOpenParents&&o.expanded&&!o.master&&!d;if(!l&&!h&&!c&&!u&&this.addRowNodeToRowsToDisplay(e,o,n,r),!i||!o.leafGroup)if(a){const t=c||u;if(o.expanded||t){const s=e.groupTotalRow({node:o});s||o.destroyFooter();const a=t?r:r+1;"top"===s&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,n,a)),this.recursivelyAddToRowsToDisplay(e,o.childrenAfterSort,n,i,a),"bottom"===s&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,n,a))}}else if(o.master&&o.expanded){const t=this.createDetailNode(o);this.addRowNodeToRowsToDisplay(e,t,n,r)}}}addRowNodeToRowsToDisplay(e,t,n,i,r){r?n.unshift(t):n.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:i)}createDetailNode(e){if(GP.exists(e.detailNode))return e.detailNode;const t=new lN(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,GP.exists(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}};WT([F_("beans")],oB.prototype,"beans",2),oB=WT([L_("flattenStage")],oB);var aB=class extends MR{sort(e,t,n,i,r,s){const o=this.gos.get("groupMaintainOrder"),a=this.columnModel.getAllGridColumns().some((e=>e.isRowGroupActive()));let l={};n&&i&&(l=this.calculateDirtyNodes(i));const c=this.columnModel.isPivotMode(),u=this.gos.getCallback("postSortRows"),d=i=>{var d;this.pullDownGroupDataForHideOpenParents(i.childrenAfterAggFilter,!0);const h=c&&i.leafGroup;if(o&&a&&!i.leafGroup&&!s){const e=null==(d=this.columnModel.getRowGroupColumns())?void 0:d[i.level+1],t=null===(null==e?void 0:e.getSort()),n=i.childrenAfterAggFilter.slice(0);if(i.childrenAfterSort&&!t){const e={};i.childrenAfterSort.forEach(((t,n)=>{e[t.id]=n})),n.sort(((t,n)=>{var i,r;return(null!=(i=e[t.id])?i:0)-(null!=(r=e[n.id])?r:0)}))}i.childrenAfterSort=n}else i.childrenAfterSort=!t||h?i.childrenAfterAggFilter.slice(0):n?this.doDeltaSort(i,l,r,e):this.rowNodeSorter.doFullSort(i.childrenAfterAggFilter,e);if(i.sibling&&(i.sibling.childrenAfterSort=i.childrenAfterSort),this.updateChildIndexes(i),u){const e={nodes:i.childrenAfterSort};u(e)}};r&&r.forEachChangedNodeDepthFirst(d),this.updateGroupDataForHideOpenParents(r)}calculateDirtyNodes(e){const t={},n=e=>{e&&e.forEach((e=>t[e.id]=!0))};return e&&e.forEach((e=>{n(e.add),n(e.update),n(e.remove)})),t}doDeltaSort(e,t,n,i){const r=e.childrenAfterAggFilter,s=e.childrenAfterSort;if(!s)return this.rowNodeSorter.doFullSort(r,i);const o={},a=[];r.forEach((e=>{t[e.id]||!n.canSkip(e)?a.push(e):o[e.id]=!0}));const l=s.filter((e=>o[e.id])),c=(e,t)=>({currentPos:t,rowNode:e}),u=a.map(c).sort(((e,t)=>this.rowNodeSorter.compareRowNodes(i,e,t)));return this.mergeSortedArrays(i,u,l.map(c)).map((e=>{let{rowNode:t}=e;return t}))}mergeSortedArrays(e,t,n){const i=[];let r=0,s=0;for(;r<t.length&&s<n.length;){this.rowNodeSorter.compareRowNodes(e,t[r],n[s])<0?i.push(t[r++]):i.push(n[s++])}for(;r<t.length;)i.push(t[r++]);for(;s<n.length;)i.push(n[s++]);return i}updateChildIndexes(e){if(GP.missing(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let n=0;n<t.length;n++){const i=t[n],r=0===n,s=n===e.childrenAfterSort.length-1;i.setFirstChild(r),i.setLastChild(s),i.setChildIndex(n)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return GP.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=e=>{this.pullDownGroupDataForHideOpenParents(e.childrenAfterSort,!1),e.childrenAfterSort.forEach((e=>{e.hasChildren()&&t(e)}))};e&&e.executeFromRootNode((e=>t(e)))}pullDownGroupDataForHideOpenParents(e,t){this.gos.get("groupHideOpenParents")&&!GP.missing(e)&&e.forEach((e=>{this.columnModel.getGroupDisplayColumns().forEach((n=>{const i=n.getColDef().showRowGroup;if("string"!==typeof i)return void console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");const r=i,s=this.columnModel.getPrimaryColumn(r);if(!(s===e.rowGroupColumn))if(t)e.setGroupValue(n.getId(),void 0);else{const t=e.getFirstChildOfFirstChild(s);t&&e.setGroupValue(n.getId(),t.key)}}))}))}};WT([F_("columnModel")],aB.prototype,"columnModel",2),WT([F_("rowNodeSorter")],aB.prototype,"rowNodeSorter",2),aB=WT([L_("sortService")],aB);var lB=class extends MR{filter(e){const t=this.filterManager.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const n=(t,n)=>{t.hasChildren()?t.childrenAfterFilter=e&&!n?t.childrenAfterGroup.filter((e=>{const t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0,n=e.data&&this.filterManager.doesRowPassFilter({rowNode:e});return t||n})):t.childrenAfterGroup:t.childrenAfterFilter=t.childrenAfterGroup,t.sibling&&(t.sibling.childrenAfterFilter=t.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const e=(t,i)=>{if(t.childrenAfterGroup)for(let r=0;r<t.childrenAfterGroup.length;r++){const s=t.childrenAfterGroup[r],o=i||this.filterManager.doesRowPassFilter({rowNode:s});s.childrenAfterGroup?e(t.childrenAfterGroup[r],o):n(s,o)}n(t,i)},i=t=>e(t,!1);t.executeFromRootNode(i)}else{const e=e=>n(e,!1);t.forEachChangedNodeDepthFirst(e,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}};WT([F_("filterManager")],lB.prototype,"filterManager",2),lB=WT([L_("filterService")],lB);var cB=class extends MR{postConstruct(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",(()=>this.onRowDataUpdated())))}isActive(){const e=this.gos.exists("getRowId");return!this.gos.get("resetRowDataOnUpdate")&&e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const[n,i]=t;this.clientSideRowModel.updateRowData(n,i)}createTransactionForRowData(e){if(GP.missing(this.clientSideRowModel))return void console.error("AG Grid: ImmutableService only works with ClientSideRowModel");const t=this.gos.getCallback("getRowId");if(null==t)return void console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");const n={remove:[],update:[],add:[]},i=this.clientSideRowModel.getCopyOfNodesMap(),r=this.gos.get("suppressMaintainUnsortedOrder")?void 0:{};return GP.exists(e)&&e.forEach(((e,s)=>{const o=t({data:e,level:0}),a=i[o];if(r&&(r[o]=s),a){a.data!==e&&n.update.push(e),i[o]=void 0}else n.add.push(e)})),GP.iterateObject(i,((e,t)=>{t&&n.remove.push(t.data)})),[n,r]}onRowDataUpdated(){const e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}};WT([F_("rowModel")],cB.prototype,"rowModel",2),WT([F_("rowRenderer")],cB.prototype,"rowRenderer",2),WT([F_("selectionService")],cB.prototype,"selectionService",2),WT([k_],cB.prototype,"postConstruct",1);var uB={version:"31.3.2",moduleName:"@ag-grid-community/client-side-row-model",rowModel:"clientSide",beans:[iB,rB,sB,oB,aB,lB,cB=WT([L_("immutableService")],cB)]},dB=Object.defineProperty,hB=Object.getOwnPropertyDescriptor,pB=(e,t,n,i)=>{for(var r,s=i>1?void 0:i?hB(t,n):t,o=e.length-1;o>=0;o--)(r=e[o])&&(s=(i?r(t,n,s):r(s))||s);return i&&s&&dB(t,n,s),s},gB=class extends tL{constructor(e,t,n){super(e),this.parentCache=t,this.params=n,this.startRow=e*n.blockSize,this.endRow=this.startRow+n.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,n){GP.exists(t)?e.setDataAndId(t,n.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();GP.missing(this.params.datasource.getRows)?console.warn("AG Grid: datasource is missing getRows method"):window.setTimeout((()=>{this.params.datasource.getRows(e)}),0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,n){this.rowNodes.forEach(((i,r)=>{this.startRow+r<n&&e(i,t.next())}))}getLastAccessed(){return this.lastAccessed}getRow(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(this.lastAccessed=this.params.lastAccessedSequence.next());const t=e-this.startRow;return this.rowNodes[t]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,n=new lN(this.beans);n.setRowHeight(this.params.rowHeight),n.uiLevel=0,n.setRowIndex(t),n.setRowTop(this.params.rowHeight*t),this.rowNodes.push(n)}}processServerResult(e){this.rowNodes.forEach(((t,n)=>{const i=e.rowData?e.rowData[n]:void 0;!t.id&&t.alreadyRendered&&i&&(this.rowNodes[n]=new lN(this.beans),this.rowNodes[n].setRowIndex(t.rowIndex),this.rowNodes[n].setRowTop(t.rowTop),this.rowNodes[n].setRowHeight(t.rowHeight),t.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[n],i,this.startRow+n)}));const t=null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroyRowNodes(){this.rowNodes.forEach((e=>{e.clearRowTopAndRowIndex()}))}};pB([F_("beans")],gB.prototype,"beans",2),pB([k_],gB.prototype,"postConstruct",1),pB([O_],gB.prototype,"destroyRowNodes",1);var fB=class e extends MR{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}setBeans(e){this.logger=e.create("InfiniteCache")}getRow(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Math.floor(e/this.params.blockSize);let i=this.blocks[n];if(!i){if(t)return;i=this.createBlock(n)}return i.getRow(e)}createBlock(e){const t=this.createBean(new gB(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach((e=>e.setStateWaitingToLoad())),this.params.rowNodeBlockLoader.checkBlockToLoad())}destroyAllBlocks(){this.getBlocksInOrder().forEach((e=>this.destroyBlock(e)))}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.logger.log("onPageLoaded: page = ".concat(e.getId(),", lastRow = ").concat(t)),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(t){const n=this.getBlocksInOrder().filter((e=>e!=t));n.sort(((e,t)=>t.getLastAccessed()-e.getLastAccessed()));const i=this.params.maxBlocksInCache>0,r=i?this.params.maxBlocksInCache-1:null,s=e.MAX_EMPTY_BLOCKS_TO_KEEP-1;n.forEach(((e,t)=>{if(e.getState()===gB.STATE_WAITING_TO_LOAD&&t>=s||!!i&&t>=r){if(this.isBlockCurrentlyDisplayed(e))return;if(this.isBlockFocused(e))return;this.removeBlockFromCache(e)}}))}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;const n=e.getStartRow(),i=e.getEndRow();return t.rowIndex>=n&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),n=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,n)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if("number"===typeof t&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const t=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<t&&(this.rowCount=t)}}setRowCount(e,t){this.rowCount=e,GP.exists(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new HP;this.getBlocksInOrder().forEach((n=>n.forEachNode(e,t,this.rowCount)))}getBlocksInOrder(){const e=GP.getAllValuesInObject(this.blocks).sort(((e,t)=>e.getId()-t.getId()));return e}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();const e={type:OR.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach((t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)})),e.length>0&&e.forEach((e=>this.destroyBlock(e)))}purgeCache(){this.getBlocksInOrder().forEach((e=>this.removeBlockFromCache(e))),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const n=[];let i=-1,r=!1;const s=new HP;GP.missing(e)&&(r=!0);let o=!1;this.getBlocksInOrder().forEach((a=>{o||(r&&i+1!==a.getId()?o=!0:(i=a.getId(),a.forEachNode((i=>{const s=i===e||i===t;(r||s)&&n.push(i),s&&(r=!r)}),s,this.rowCount)))}));return o||r?[]:n}};fB.MAX_EMPTY_BLOCKS_TO_KEEP=2,pB([F_("rowRenderer")],fB.prototype,"rowRenderer",2),pB([F_("focusService")],fB.prototype,"focusService",2),pB([((e,t)=>(n,i)=>t(n,i,e))(0,G_("loggerFactory"))],fB.prototype,"setBeans",1),pB([O_],fB.prototype,"destroyAllBlocks",1);var mB=fB,vB=class extends MR{getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(e,t,n,i){return!1}init(){this.gos.isRowModelType("infinite")&&(this.rowHeight=this.gos.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc((()=>this.destroyCache())),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&GP.warnOnce("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroyDatasource(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedListener(this.eventService,OR.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,OR.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this)),this.addManagedPropertyListener("datasource",(()=>this.setDatasource(this.gos.get("datasource")))),this.addManagedPropertyListener("cacheBlockSize",(()=>this.resetCache())),this.addManagedPropertyListener("rowHeight",(()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()}))}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;e=!this.cacheParams||this.isSortModelDifferent(),e&&this.reset()}isSortModelDifferent(){return!GP.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;null!=this.gos.getCallback("getRowId")||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:OR.EVENT_MODEL_UPDATED,newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:this.gos.getRowHeightAsNumber(),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new HP},this.infiniteCache=this.createBean(new mB(this.cacheParams)),this.eventService.dispatchEventOnce({type:OR.EVENT_ROW_COUNT_READY});const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}updateRowHeights(){this.forEachNode((e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}));const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode((n=>{n.id===e&&(t=n)})),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(0!==this.rowHeight){const t=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return t>n?n:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};pB([F_("filterManager")],vB.prototype,"filterManager",2),pB([F_("sortController")],vB.prototype,"sortController",2),pB([F_("selectionService")],vB.prototype,"selectionService",2),pB([F_("rowRenderer")],vB.prototype,"rowRenderer",2),pB([F_("rowNodeBlockLoader")],vB.prototype,"rowNodeBlockLoader",2),pB([k_],vB.prototype,"init",1),pB([O_],vB.prototype,"destroyDatasource",1);var yB={version:"31.3.2",moduleName:"@ag-grid-community/infinite-row-model",rowModel:"infinite",beans:[vB=pB([L_("rowModel")],vB)]},CB=Object.defineProperty,wB=Object.defineProperties,bB=Object.getOwnPropertyDescriptor,SB=Object.getOwnPropertyDescriptors,EB=Object.getOwnPropertySymbols,xB=Object.prototype.hasOwnProperty,AB=Object.prototype.propertyIsEnumerable,TB=(e,t,n)=>t in e?CB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_B=(e,t)=>{for(var n in t||(t={}))xB.call(t,n)&&TB(e,n,t[n]);if(EB)for(var n of EB(t))AB.call(t,n)&&TB(e,n,t[n]);return e},RB=(e,t)=>wB(e,SB(t)),DB=(e,t,n,i)=>{for(var r,s=i>1?void 0:i?bB(t,n):t,o=e.length-1;o>=0;o--)(r=e[o])&&(s=(i?r(t,n,s):r(s))||s);return i&&s&&CB(t,n,s),s},MB=(e,t,n)=>new Promise(((i,r)=>{var s=e=>{try{a(n.next(e))}catch(rre){r(rre)}},o=e=>{try{a(n.throw(e))}catch(rre){r(rre)}},a=e=>e.done?i(e.value):Promise.resolve(e.value).then(s,o);a((n=n.apply(e,t)).next())})),PB=class{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return null!=e&&e.length||(e=this.getDefaultFileName()),-1===e.indexOf(".")?"".concat(e,".").concat(t):e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return"export.".concat(this.getDefaultFileExtension())}},IB=class{constructor(e){this.groupColumns=[];const{columnModel:t,valueService:n,gos:i,processCellCallback:r,processHeaderCallback:s,processGroupHeaderCallback:o,processRowGroupCallback:a}=e;this.columnModel=t,this.valueService=n,this.gos=i,this.processCellCallback=r,this.processHeaderCallback=s,this.processGroupHeaderCallback=o,this.processRowGroupCallback=a}prepare(e){this.groupColumns=e.filter((e=>!!e.getColDef().showRowGroup))}extractHeaderValue(e){const t=this.getHeaderName(this.processHeaderCallback,e);return null!=t?t:""}extractRowCellValue(e,t,n,i,r){const s=this.gos.get("groupHideOpenParents")&&!r.footer||!this.shouldRenderGroupSummaryCell(r,e,t)?this.valueService.getValue(e,r):this.createValueForGroupNode(e,r);return this.processCell({accumulatedRowIndex:n,rowNode:r,column:e,value:s,processCellCallback:this.processCellCallback,type:i})}shouldRenderGroupSummaryCell(e,t,n){var i;if(!(e&&e.group))return!1;if(-1!==this.groupColumns.indexOf(t)){if(null!=(null==(i=e.groupData)?void 0:i[t.getId()]))return!0;if(this.gos.isRowModelType("serverSide")&&e.group)return!0;if(e.footer&&-1===e.level){const e=t.getColDef();return null==e||!0===e.showRowGroup||e.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}const r=this.gos.isGroupUseEntireRow(this.columnModel.isPivotMode());return 0===n&&r}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnModel.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const n=this.gos.get("treeData"),i=this.gos.get("suppressGroupMaintainValueType"),r=t=>{var r,s;if(n||i)return t.key;const o=null==(r=t.groupData)?void 0:r[e.getId()];return o&&t.rowGroupColumn&&!1!==t.rowGroupColumn.getColDef().useValueFormatterForExport&&null!=(s=this.valueService.formatValue(t.rowGroupColumn,t,o))?s:o},s=t.footer,o=[r(t)];if(!this.gos.isGroupMultiAutoColumn())for(;t.parent;)t=t.parent,o.push(r(t));const a=o.reverse().join(" -> ");return s?"Total ".concat(a):a}processCell(e){var t;const{accumulatedRowIndex:n,rowNode:i,column:r,value:s,processCellCallback:o,type:a}=e;return o?{value:null!=(t=o(this.gos.addGridCommonParams({accumulatedRowIndex:n,column:r,node:i,value:s,type:a,parseValue:e=>this.valueService.parseValue(r,i,e,this.valueService.getValue(r,i)),formatValue:e=>{var t;return null!=(t=this.valueService.formatValue(r,i,e))?t:e}})))?t:""}:!1!==r.getColDef().useValueFormatterForExport?{value:null!=s?s:"",valueFormatted:this.valueService.formatValue(r,i,s)}:{value:null!=s?s:""}}},NB=class{static download(e,t){const n=document.defaultView||window;if(!n)return void console.warn("AG Grid: There is no `window` associated with the current `document`");const i=document.createElement("a"),r=n.URL.createObjectURL(t);i.setAttribute("href",r),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),document.body.removeChild(i),n.setTimeout((()=>{n.URL.revokeObjectURL(r)}),0)}},kB=class extends IB{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:n}=e;this.suppressQuotes=t,this.columnSeparator=n}addCustomContent(e){e&&("string"===typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach((e=>{this.beginNewLine(),e.forEach(((e,t)=>{0!==t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e.data.value||""),e.mergeAcross&&this.appendEmptyCells(e.mergeAcross)}))})))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,n,i){0!=n&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,n){var i;0!=t&&(this.result+=this.columnSeparator);const r=this.extractRowCellValue(e,t,t,"csv",n);this.result+=this.putInQuotes(null!=(i=r.valueFormatted)?i:r.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(null===e||void 0===e)return'""';let t;"string"===typeof e?t=e:"function"===typeof e.toString?t=e.toString():(console.warn("AG Grid: unknown value type during csv conversion"),t="");return'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1}},OB=class extends PB{postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return void console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");const t=this.getMergedParams(e),n=this.getData(t),i=new Blob(["\ufeff",n],{type:"text/plain"}),r="function"===typeof t.fileName?t.fileName(this.gos.getGridCommonParams()):t.fileName;NB.download(this.getFileName(r),i)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Object.assign({},e):this.getMergedParams(e);return this.getData(t)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,valueService:n,gos:i}=this,{processCellCallback:r,processHeaderCallback:s,processGroupHeaderCallback:o,processRowGroupCallback:a,suppressQuotes:l,columnSeparator:c}=e;return new kB({columnModel:t,valueService:n,gos:i,processCellCallback:r||void 0,processHeaderCallback:s||void 0,processGroupHeaderCallback:o||void 0,processRowGroupCallback:a||void 0,suppressQuotes:l||!1,columnSeparator:c||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};DB([F_("columnModel")],OB.prototype,"columnModel",2),DB([F_("valueService")],OB.prototype,"valueService",2),DB([F_("gridSerializer")],OB.prototype,"gridSerializer",2),DB([F_("gridOptionsService")],OB.prototype,"gos",2),DB([k_],OB.prototype,"postConstruct",1),OB=DB([L_("csvCreator")],OB);var LB=class extends MR{serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{allColumns:n,columnKeys:i,skipRowGroups:r}=t,s=this.getColumnsToExport(n,r,i);return GP.compose(this.prepareSession(s),this.prependContent(t),this.exportColumnGroups(t,s),this.exportHeaders(t,s),this.processPinnedTopRows(t,s),this.processRows(t,s),this.processPinnedBottomRows(t,s),this.appendContent(t))(e).parse()}processRow(e,t,n,i){const r=t.shouldRowBeSkipped||(()=>!1),s=this.gos.get("groupRemoveSingleChildren"),o=this.gos.get("groupRemoveLowestSingleChildren"),a=null!=t.rowPositions||!!t.onlySelected,l=this.gos.get("groupHideOpenParents")&&!a,c=this.columnModel.isPivotMode()?i.leafGroup:!i.group,u=!!i.footer,d=(t.skipRowGroups,o&&i.leafGroup),h=1===i.allChildrenCount&&(s||d);if(!c&&!u&&(t.skipRowGroups||h||l)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&"top"===i.rowPinned||t.skipPinnedBottom&&"bottom"===i.rowPinned)return;if(-1===i.level&&!c&&!u)return;if(r(this.gos.addGridCommonParams({node:i})))return;const p=e.onNewBodyRow(i);if(n.forEach(((e,t)=>{p.onColumn(e,t,i)})),t.getCustomContentBelowRow){const n=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:i}));n&&e.addCustomContent(n)}}appendContent(e){return t=>{const n=e.appendContent;return n&&t.addCustomContent(n),t}}prependContent(e){return t=>{const n=e.prependContent;return n&&t.addCustomContent(n),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return n=>{if(!e.skipColumnGroupHeaders){const i=new FR,r=this.displayedGroupCreator.createDisplayedGroups(t,i,null);this.recursivelyAddHeaderGroups(r,n,e.processGroupHeaderCallback)}return n}}exportHeaders(e,t){return n=>{if(!e.skipColumnHeaders){const e=n.onNewHeaderRow();t.forEach(((t,n)=>{e.onColumn(t,n,void 0)}))}return n}}processPinnedTopRows(e,t){return n=>{const i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter((e=>"top"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>this.pinnedRowModel.getPinnedTopRow(e.rowIndex))).forEach(i):this.pinnedRowModel.forEachPinnedTopRow(i),n}}processRows(e,t){return n=>{const i=this.rowModel,r=i.getType(),s="clientSide"===r,o="serverSide"===r,a=!s&&e.onlySelected,l=this.processRow.bind(this,n,e,t),{exportedRows:c="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter((e=>null==e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>i.getRow(e.rowIndex))).forEach(l);else if(this.columnModel.isPivotMode())s?i.forEachPivotNode(l,!0):o?i.forEachNodeAfterFilterAndSort(l,!0):i.forEachNode(l);else if(e.onlySelectedAllPages||a){const e=this.selectionService.getSelectedNodes();this.replicateSortedOrder(e),e.forEach(l)}else"all"===c?i.forEachNode(l):s||o?i.forEachNodeAfterFilterAndSort(l,!0):i.forEachNode(l);return n}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),n=(e,i)=>{var r,s,o,a;return null!=e.rowIndex&&null!=i.rowIndex?e.rowIndex-i.rowIndex:e.level===i.level?(null==(r=e.parent)?void 0:r.id)===(null==(s=i.parent)?void 0:s.id)?this.rowNodeSorter.compareRowNodes(t,{rowNode:e,currentPos:null!=(o=e.rowIndex)?o:-1},{rowNode:i,currentPos:null!=(a=i.rowIndex)?a:-1}):n(e.parent,i.parent):e.level>i.level?n(e.parent,i):n(e,i.parent)};e.sort(n)}processPinnedBottomRows(e,t){return n=>{const i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter((e=>"bottom"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>this.pinnedRowModel.getPinnedBottomRow(e.rowIndex))).forEach(i):this.pinnedRowModel.forEachPinnedBottomRow(i),n}}getColumnsToExport(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const i=this.columnModel.isPivotMode();if(n&&n.length)return this.columnModel.getGridColumns(n);const r=this.gos.get("treeData");let s=[];return s=e&&!i?this.columnModel.getAllGridColumns():this.columnModel.getAllDisplayedColumns(),t&&!r&&(s=s.filter((e=>e.getColId()!==BR))),s}recursivelyAddHeaderGroups(e,t,n){const i=[];e.forEach((e=>{const t=e;t.getChildren&&t.getChildren().forEach((e=>i.push(e)))})),e.length>0&&e[0]instanceof kR&&this.doAddHeaderHeader(t,e,n),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,n)}doAddHeaderHeader(e,t,n){const i=e.onNewHeaderGroupingRow();let r=0;t.forEach((e=>{const t=e;let s;s=n?n(this.gos.addGridCommonParams({columnGroup:t})):this.columnModel.getDisplayNameForColumnGroup(t,"header");const o=t.getLeafColumns().reduce(((e,t,n,i)=>{let r=GP.last(e);return"open"===t.getColumnGroupShow()?r&&null==r[1]||(r=[n],e.push(r)):r&&null==r[1]&&(r[1]=n-1),n===i.length-1&&r&&null==r[1]&&(r[1]=n),e}),[]);i.onColumn(t,s||"",r++,t.getLeafColumns().length-1,o)}))}};DB([F_("displayedGroupCreator")],LB.prototype,"displayedGroupCreator",2),DB([F_("columnModel")],LB.prototype,"columnModel",2),DB([F_("rowModel")],LB.prototype,"rowModel",2),DB([F_("pinnedRowModel")],LB.prototype,"pinnedRowModel",2),DB([F_("selectionService")],LB.prototype,"selectionService",2),DB([F_("rowNodeSorter")],LB.prototype,"rowNodeSorter",2),DB([F_("sortController")],LB.prototype,"sortController",2);var FB={version:"31.3.2",moduleName:"@ag-grid-community/csv-export",beans:[OB,LB=DB([L_("gridSerializer")],LB)]};function BB(e,t){let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(255&e),e>>>=8;return n}var VB=e=>{if(!e.length)return 0;let t=~0,n=0,i=0,r=0;for(let s=0;s<e.length;s++)n=e[s],i=255&(t^n),r=HB[i],t=t>>>8^r;return~t},GB=e=>e.length?VB("string"===typeof e?(new TextEncoder).encode(e):e):0,HB=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),WB=e=>MB(void 0,null,(function*(){const t=new Blob([e]),{size:n,content:i}=yield(r=t,MB(void 0,null,(function*(){let e=0;const t=[],n=new WritableStream({write:n=>{t.push(n),e+=n.length}}),i=new ReadableStream({start:e=>{const t=new FileReader;t.onload=t=>{var n;(null==(n=t.target)?void 0:n.result)&&e.enqueue(t.target.result),e.close()},t.readAsArrayBuffer(r)}}),s=new window.CompressionStream("deflate-raw");return yield i.pipeThrough(s).pipeTo(n),{size:e,content:new Blob(t)}})));var r;return{size:n,content:new Uint8Array(yield i.arrayBuffer())}})),{utf8_encode:jB}=GP,UB=(e,t)=>MB(void 0,null,(function*(){const{content:n}=e,{size:i,content:r}=n?qB(n):{size:0,content:Uint8Array.from([])};let s,o,a=!1;if("file"===e.type&&r&&i>0){const e=yield WB(r);s=e.content,o=e.size,a=!0}const l=YB(e,a,t,i,r,o);return RB(_B({},l),{content:s||r,isCompressed:a})})),zB=(e,t)=>{const{content:n}=e,{content:i}=n?qB(n):{content:Uint8Array.from([])},r=YB(e,!1,t,i.length,i,void 0);return RB(_B({},r),{content:i,isCompressed:!1})},YB=(e,t,n,i,r,s)=>{const{content:o,path:a,created:l}=e,c=(e=>{let t=e.getHours();return t<<=6,t|=e.getMinutes(),t<<=5,t|=e.getSeconds()/2,t})(l),u=(e=>{let t=e.getFullYear()-1980;return t<<=4,t|=e.getMonth()+1,t<<=5,t|=e.getDate(),t})(l),d=GB(r),h=void 0!==s?s:i,p=jB(a),g=p!==a;let f="";if(g){const e=BB(1,1)+BB(GB(p),4)+p;f="up"+BB(e.length,2)+e}const m="\x14\0"+(g?"\0\b":"\0\0")+BB(t?8:0,2)+BB(c,2)+BB(u,2)+BB(h?d:0,4)+BB(null!=s?s:i,4)+BB(i,4)+BB(p.length,2)+BB(f.length,2),v="PK\x03\x04"+m+p+f,y="PK\x01\x02\x14\0"+m+"\0\0\0\0\0\0"+(o?"\0\0\0\0":"\x10\0\0\0")+BB(n,4)+p+f;return{localFileHeader:Uint8Array.from(v,(e=>e.charCodeAt(0))),centralDirectoryHeader:Uint8Array.from(y,(e=>e.charCodeAt(0)))}},qB=e=>{let t;if("string"===typeof e){t=(e=>{const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})(atob(e.split(";base64,")[1]))}else t=e;return{size:t.length,content:t}},KB=class{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}static addFile(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.files.push({path:e,created:new Date,content:n?t:(new TextEncoder).encode(t),isBase64:n,type:"file"})}static getZipFile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/zip";return MB(this,null,(function*(){const t=yield this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})}))}static getUncompressedZipFile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/zip";const t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(e){let t=new Uint8Array(0),n=new Uint8Array(0),i=0,r=0;for(const a of e){const{localFileHeader:e,centralDirectoryHeader:s,content:o}=a,l=new Uint8Array(t.length+e.length);l.set(t),l.set(e,t.length),t=l;const c=new Uint8Array(t.length+o.length);c.set(t),c.set(o,t.length),t=c;const u=new Uint8Array(n.length+s.length);u.set(n),u.set(s,n.length),n=u,i+=e.length+o.length,r+=s.length}const s=((e,t,n)=>{const i="PK\x05\x06\0\0\0\0"+BB(e,2)+BB(e,2)+BB(t,4)+BB(n,4)+"\0\0";return Uint8Array.from(i,(e=>e.charCodeAt(0)))})(e.length,r,i),o=new Uint8Array(t.length+n.length+s.length);return o.set(t),o.set(n,t.length),o.set(s,t.length+n.length),o}static buildCompressedFileStream(){return MB(this,null,(function*(){const e=[...this.folders,...this.files],t=[];let n=0;for(const i of e){const e=yield UB(i,n),{localFileHeader:r,content:s}=e;t.push(e),n+=r.length+s.length}return this.packageFiles(t)}))}static buildFileStream(){const e=[...this.folders,...this.files],t=[];let n=0;for(const i of e){const e=zB(i,n),{localFileHeader:r,content:s}=e;t.push(e),n+=r.length+s.length}return this.packageFiles(t)}};KB.folders=[],KB.files=[],P_.__registerModules([uB,yB,FB],!1,void 0);var XB=n(3200),QB=Object.defineProperty,ZB=Object.defineProperties,$B=Object.getOwnPropertyDescriptors,JB=Object.getOwnPropertySymbols,eV=Object.prototype.hasOwnProperty,tV=Object.prototype.propertyIsEnumerable,nV=(e,t,n)=>t in e?QB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iV=(e,t)=>{for(var n in t||(t={}))eV.call(t,n)&&nV(e,n,t[n]);if(JB)for(var n of JB(t))tV.call(t,n)&&nV(e,n,t[n]);return e},rV=(e,t)=>ZB(e,$B(t)),sV=(0,s.createContext)({setMethods:()=>{}}),oV=(0,s.memo)((e=>{const{initialProps:t,addUpdateCallback:n,CustomComponentClass:i,setMethods:r}=e,[o,a]=(0,s.useState)(t);return(0,s.useEffect)((()=>{n((e=>a(e)))}),[]),s.createElement(sV.Provider,{value:{setMethods:r}},s.createElement(i,iV({},o)))})),aV=0;function lV(){return"agPortalKey_".concat(++aV)}var cV=class{constructor(e,t,n,i){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=n,this.suppressFallbackMethods=!!i,this.statelessComponent=this.isStateless(this.reactComponent),this.key=lV(),this.portalKey=lV(),this.instanceCreated=this.isStatelessComponent()?WP.resolve(!1):new WP((e=>{this.resolveInstanceCreated=e}))}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){return this.componentInstance&&"function"==typeof this.componentInstance.destroy&&this.componentInstance.destroy(),this.portalManager.destroyPortal(this.portal)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),n=document.createElement(t||"div");return n.classList.add("ag-react-container"),e.reactContainer=n,n}addParentContainerStyleAndClasses(){if(this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(GP.warnOnce('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses())){GP.warnOnce('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.');this.componentInstance.getReactContainerClasses().forEach((e=>this.eParentElement.classList.add(e)))}}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return"function"===typeof Symbol&&Symbol.for}isStateless(e){return"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&null!=t[e]||this.fallbackMethodAvailable(e)}callMethod(e,t){const n=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!n)return void setTimeout((()=>this.callMethod(e,t)));const i=n[e];return i?i.apply(n,t):this.fallbackMethodAvailable(e)?this.fallbackMethod(e,t&&t[0]?t[0]:{}):void 0}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.params=e,this.createOrUpdatePortal(e),new WP((e=>this.createReactComponent(e)))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=e=>{var t;this.componentInstance=e,this.addParentContainerStyleAndClasses(),null==(t=this.resolveInstanceCreated)||t.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,rV(iV({},e),{key:this.key})),this.portal=(0,l.createPortal)(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return(0,s.createElement)(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,(t=>{e(t)}))}isNullValue(){return this.valueRenderedIsNull(this.params)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!(this.isStatelessComponent()||!this.getFrameworkComponentInstance())}valueRenderedIsNull(e){if(!this.componentType.cellRenderer)return!1;const t=console.error;try{console.error=()=>{};return""===(0,XB.qV)((0,s.createElement)(this.reactComponent,e))}catch(n){}finally{console.error=t}return!1}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const n=this["".concat(e,"Component")];if(!this.suppressFallbackMethods&&n)return n.bind(this)(t)}fallbackMethodAvailable(e){if(this.suppressFallbackMethods)return!1;return!!this["".concat(e,"Component")]}};function uV(e,t,n){e.forEach((e=>{const i=t[e];i&&(n[e]=i)}))}var dV=class extends cV{constructor(){super(...arguments),this.awaitUpdateCallback=new WP((e=>{this.resolveUpdateCallback=e})),this.wrapperComponent=oV}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:e=>this.setMethods(e),addUpdateCallback:e=>{this.updateCallback=()=>(e(this.getProps()),new WP((e=>{setTimeout((()=>{e()}))}))),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,uV(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return rV(iV({},this.sourceParams),{key:this.key,ref:this.ref})}refreshProps(){return this.updateCallback?this.updateCallback():new WP((e=>this.awaitUpdateCallback.then((()=>{this.updateCallback().then((()=>e()))}))))}},hV=class extends dV{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},pV=class extends dV{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback()}isFilterActive(){return null!=this.model}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.model=e,this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}updateModel(e){this.setModel(e).then((()=>this.sourceParams.filterChangedCallback()))}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e}};function gV(e,t){e.parentFilterInstance((n=>{(n.setModel(t)||WP.resolve()).then((()=>{e.filterParams.filterChangedCallback()}))}))}var fV=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=e=>this.updateModel(e)}getProps(){return rV(iV({},this.floatingFilterParams),{model:this.model,onModelChange:this.onModelChange})}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){uV(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),gV(this.floatingFilterParams,e)}},mV=class extends dV{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),gV(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},vV=class extends dV{refresh(e){this.sourceParams=e,this.refreshProps()}},yV=class extends dV{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then((()=>this.sourceParams.onItemActivated()))}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},CV=class extends dV{refresh(e){this.sourceParams=e,this.refreshProps()}},wV=class extends dV{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},bV=class extends dV{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}},SV=class e{constructor(t,n,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=n||"div",this.refresher=t,this.maxComponentCreationTimeMs=i||e.MAX_COMPONENT_CREATION_TIME_IN_MS}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter((t=>t!==e)),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,n){this.portals=[...this.portals,e],this.waitForInstance(t,n),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout((()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)})),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();if(this.destroyed)t(null);else if(e.rendered())t(e);else{if(Date.now()-n>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return e.isNullValue()?void t(e):(console.error("AG Grid: React Component '".concat(e.getReactComponentName(),"' not created within ").concat(this.maxComponentCreationTimeMs,"ms.")),void console.error("    If the component is using `forwardRef` but not `useImperativeHandle`, add the following: `useImperativeHandle(ref, () => ({}));`"));window.setTimeout((()=>{this.waitForInstance(e,t,n)}))}}};SV.MAX_COMPONENT_CREATION_TIME_IN_MS=1e3;var EV=SV,xV=s.createContext({}),AV=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>null!=e&&""!==e)).join(" ")},TV=class e{constructor(){this.classesMap={};for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{this.classesMap[e]=!0}))}setClass(t,n){if(!!this.classesMap[t]==n)return this;const i=new e;return i.classesMap=iV({},this.classesMap),i.classesMap[t]=n,i}toString(){return Object.keys(this.classesMap).filter((e=>this.classesMap[e])).join(" ")}},_V=e=>"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===("function"===typeof Symbol&&Symbol.for?Symbol.for("react.memo"):60115),RV=null!=l.createRoot&&null!=l.flushSync,DV=!1;var MV=(e,t)=>{RV&&e&&!DV?l.flushSync(t):t()};function PV(e,t,n){if(null==t||null==e)return t;if(e===t||0===t.length&&0===e.length)return e;if(n||0===e.length&&t.length>0||e.length>0&&0===t.length)return t;const i=[],r=[],s=new Map,o=new Map;for(let a=0;a<t.length;a++){const e=t[a];o.set(e.getInstanceId(),e)}for(let a=0;a<e.length;a++){const t=e[a];s.set(t.getInstanceId(),t),o.has(t.getInstanceId())&&i.push(t)}for(let a=0;a<t.length;a++){const e=t[a],n=e.getInstanceId();s.has(n)||r.push(e)}return i.length===e.length&&0===r.length?e:0===i.length&&r.length===t.length?t:0===i.length?r:0===r.length?i:[...i,...r]}var IV=(e,t,n,i)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const r=e.newAgStackInstance();if(!r)return;let s,o,a=!1;return r.then((e=>{a?t.destroyBean(e):(s=e,o=s.getGui(),n.appendChild(o),NV(i,s))})),()=>{a=!0,s&&(o&&o.parentElement&&o.parentElement.removeChild(o),t.destroyBean(s),i&&NV(i,void 0))}},NV=(e,t)=>{if(e)if(e instanceof Function){e(t)}else{e.current=t}},kV=(0,s.forwardRef)(((e,t)=>{var n;const i=(0,s.useContext)(xV).context,r=(0,s.useRef)(null),o=(0,s.useRef)(null),a=(0,s.useRef)(null),l=(0,s.useRef)(null),c=(0,s.useRef)(null),u=(0,s.useRef)(),[d,h]=(0,s.useState)(),[p,g]=(0,s.useState)(),[f,m]=(0,s.useState)(),[v,y]=(0,s.useState)((()=>new TV)),[C,w]=(0,s.useState)((()=>new TV("ag-hidden"))),[b,S]=(0,s.useState)((()=>new TV("ag-hidden"))),[E,x]=(0,s.useState)((()=>new TV("ag-invisible")));(0,s.useImperativeHandle)(t,(()=>({refresh:()=>!1}))),(0,s.useLayoutEffect)((()=>IV(d,i,o.current)),[d]);const A=(0,s.useCallback)((t=>{if(r.current=t,!r.current)return i.destroyBean(u.current),void(u.current=null);const n={setInnerRenderer:(e,t)=>{h(e),m(t)},setChildCount:e=>g(e),addOrRemoveCssClass:(e,t)=>y((n=>n.setClass(e,t))),setContractedDisplayed:e=>S((t=>t.setClass("ag-hidden",!e))),setExpandedDisplayed:e=>w((t=>t.setClass("ag-hidden",!e))),setCheckboxVisible:e=>x((t=>t.setClass("ag-invisible",!e)))};u.current=i.createBean(new mN),u.current.init(n,r.current,a.current,l.current,c.current,kV,e)}),[]),T=(0,s.useMemo)((()=>"ag-cell-wrapper ".concat(v.toString())),[v]),_=(0,s.useMemo)((()=>"ag-group-expanded ".concat(C.toString())),[C]),R=(0,s.useMemo)((()=>"ag-group-contracted ".concat(b.toString())),[b]),D=(0,s.useMemo)((()=>"ag-group-checkbox ".concat(E.toString())),[E]),M=d&&d.componentFromFramework,P=M?d.componentClass:void 0,I=null==d&&null!=f,N=GP.escapeString(f,!0);return s.createElement("span",iV({className:T,ref:A},e.colDef?{}:{role:null==(n=u.current)?void 0:n.getCellAriaRole()}),s.createElement("span",{className:_,ref:l}),s.createElement("span",{className:R,ref:c}),s.createElement("span",{className:D,ref:a}),s.createElement("span",{className:"ag-group-value",ref:o},I&&s.createElement(s.Fragment,null,N),M&&s.createElement(P,iV({},d.params))),s.createElement("span",{className:"ag-group-child-count"},p))})),OV=kV,LV=(0,s.memo)((e=>{const{ctrl:t}=e,n=t.isAlive(),{context:i}=(0,s.useContext)(xV),r=n?t.getColId():void 0,[o,a]=(0,s.useState)(),l=(0,s.useRef)(null),c=(0,s.useRef)(null),u=(0,s.useRef)(null),d=(0,s.useRef)();let h=(0,s.useRef)();n&&!h.current&&(h.current=new jP((()=>l.current)));const p=(0,s.useCallback)((e=>{var i;if(l.current=e,!l.current||!n)return;const r={setWidth:e=>{l.current&&(l.current.style.width=e)},addOrRemoveCssClass:(e,t)=>h.current.addOrRemoveCssClass(e,t),setAriaSort:e=>{l.current&&(e?GP.setAriaSort(l.current,e):GP.removeAriaSort(l.current))},setUserCompDetails:e=>a(e),getUserCompInstance:()=>d.current||void 0};t.setComp(r,l.current,c.current,u.current);const s=t.getSelectAllGui();null==(i=c.current)||i.insertAdjacentElement("afterend",s)}),[]);(0,s.useLayoutEffect)((()=>IV(o,i,u.current,d)),[o]),(0,s.useEffect)((()=>{t.setDragSource(l.current)}),[o]);const g=(0,s.useMemo)((()=>!!((null==o?void 0:o.componentFromFramework)&&_V(o.componentClass))),[o]),f=o&&o.componentFromFramework,m=o&&o.componentClass;return s.createElement("div",{ref:p,className:"ag-header-cell","col-id":r,role:"columnheader"},s.createElement("div",{ref:c,className:"ag-header-cell-resize",role:"presentation"}),s.createElement("div",{ref:u,className:"ag-header-cell-comp-wrapper",role:"presentation"},f&&g&&s.createElement(m,iV({},o.params)),f&&!g&&s.createElement(m,rV(iV({},o.params),{ref:d}))))})),FV=(0,s.memo)((e=>{const{context:t}=(0,s.useContext)(xV),{ctrl:n}=e,[i,r]=(0,s.useState)((()=>new TV)),[o,a]=(0,s.useState)((()=>new TV)),[l,c]=(0,s.useState)("false"),[u,d]=(0,s.useState)(),[h,p]=(0,s.useState)(),g=(0,s.useMemo)((()=>n.getColId()),[]),f=(0,s.useRef)(null),m=(0,s.useRef)(null),v=(0,s.useRef)(),y=(0,s.useCallback)((e=>{if(f.current=e,!f.current)return;const t={setWidth:e=>{f.current&&(f.current.style.width=e)},addOrRemoveCssClass:(e,t)=>r((n=>n.setClass(e,t))),setUserCompDetails:e=>p(e),setResizableDisplayed:e=>{a((t=>t.setClass("ag-hidden",!e))),c(e?"false":"true")},setAriaExpanded:e=>d(e),getUserCompInstance:()=>v.current||void 0};n.setComp(t,f.current,m.current)}),[]);(0,s.useLayoutEffect)((()=>IV(h,t,f.current)),[h]),(0,s.useEffect)((()=>{f.current&&n.setDragSource(f.current)}),[h]);const C=(0,s.useMemo)((()=>!!((null==h?void 0:h.componentFromFramework)&&_V(h.componentClass))),[h]),w=(0,s.useMemo)((()=>"ag-header-group-cell "+i.toString()),[i]),b=(0,s.useMemo)((()=>"ag-header-cell-resize "+o.toString()),[o]),S=h&&h.componentFromFramework,E=h&&h.componentClass;return s.createElement("div",{ref:y,className:w,"col-id":g,role:"columnheader","aria-expanded":u},S&&C&&s.createElement(E,iV({},h.params)),S&&!C&&s.createElement(E,rV(iV({},h.params),{ref:v})),s.createElement("div",{ref:m,"aria-hidden":l,className:b}))}));function BV(){GP.warnOnce("Using custom components without `reactiveCustomComponents = true` is deprecated.")}var VV=(0,s.memo)((e=>{const{context:t,gos:n}=(0,s.useContext)(xV),[i,r]=(0,s.useState)((()=>new TV("ag-header-cell","ag-floating-filter"))),[o,a]=(0,s.useState)((()=>new TV)),[l,c]=(0,s.useState)((()=>new TV("ag-floating-filter-button","ag-hidden"))),[u,d]=(0,s.useState)("false"),[h,p]=(0,s.useState)(),[g,f]=(0,s.useState)(1),m=(0,s.useRef)(null),v=(0,s.useRef)(null),y=(0,s.useRef)(null),C=(0,s.useRef)(null),w=(0,s.useRef)(),b=(0,s.useRef)(),S=e=>{null!=e&&w.current&&w.current(e)},{ctrl:E}=e,x=(0,s.useCallback)((e=>{if(m.current=e,!m.current)return;b.current=new WP((e=>{w.current=e}));const t={addOrRemoveCssClass:(e,t)=>r((n=>n.setClass(e,t))),addOrRemoveBodyCssClass:(e,t)=>a((n=>n.setClass(e,t))),setButtonWrapperDisplayed:e=>{c((t=>t.setClass("ag-hidden",!e))),d(e?"false":"true")},setWidth:e=>{m.current&&(m.current.style.width=e)},setCompDetails:e=>p(e),getFloatingFilterComp:()=>b.current?b.current:null,setMenuIcon:e=>{var t;return null==(t=C.current)?void 0:t.appendChild(e)}};E.setComp(t,m.current,C.current,v.current)}),[]);(0,s.useLayoutEffect)((()=>IV(h,t,v.current,S)),[h]);const A=(0,s.useMemo)((()=>i.toString()),[i]),T=(0,s.useMemo)((()=>o.toString()),[o]),_=(0,s.useMemo)((()=>l.toString()),[l]),R=(0,s.useMemo)((()=>!!(h&&h.componentFromFramework&&_V(h.componentClass))),[h]),D=(0,s.useMemo)((()=>n.get("reactiveCustomComponents")),[]),M=(0,s.useMemo)((()=>{if(h){if(D){const e=new fV(h.params,(()=>f((e=>e+1))));return S(e),e}h.componentFromFramework&&BV()}}),[h]),P=null==M?void 0:M.getProps(),I=h&&h.componentFromFramework,N=h&&h.componentClass;return s.createElement("div",{ref:x,className:A,role:"gridcell"},s.createElement("div",{ref:v,className:T,role:"presentation"},I&&!D&&s.createElement(N,rV(iV({},h.params),{ref:R?()=>{}:S})),I&&D&&s.createElement(sV.Provider,{value:{setMethods:e=>M.setMethods(e)}},s.createElement(N,iV({},P)))),s.createElement("div",{ref:y,"aria-hidden":u,className:_,role:"presentation"},s.createElement("button",{ref:C,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))})),GV=(0,s.memo)((e=>{const{ctrl:t}=e,{topOffset:n,rowHeight:i}=(0,s.useMemo)((()=>t.getTopAndHeight()),[]),r=t.getAriaRowIndex(),o=t.getHeaderRowClass(),[a,l]=(0,s.useState)((()=>i+"px")),[c,u]=(0,s.useState)((()=>n+"px")),d=(0,s.useRef)(null),h=(0,s.useRef)(null),[p,g]=(0,s.useState)((()=>t.getHeaderCtrls())),f=(0,s.useRef)(null),m=(0,s.useCallback)((e=>{if(f.current=e,!e)return;const n={setHeight:e=>l(e),setTop:e=>u(e),setHeaderCtrls:(e,t,n)=>{h.current=d.current,d.current=e;const i=PV(h.current,e,t);i!==h.current&&MV(n,(()=>g(i)))},setWidth:e=>{f.current&&(f.current.style.width=e)}};t.setComp(n,!1)}),[]),v=(0,s.useMemo)((()=>({height:a,top:c})),[a,c]),y=(0,s.useCallback)((e=>{switch(t.getType()){case fO.COLUMN_GROUP:return s.createElement(FV,{ctrl:e,key:e.getInstanceId()});case fO.FLOATING_FILTER:return s.createElement(VV,{ctrl:e,key:e.getInstanceId()});default:return s.createElement(LV,{ctrl:e,key:e.getInstanceId()})}}),[]);return s.createElement("div",{ref:m,className:o,role:"row",style:v,"aria-rowindex":r},p.map(y))})),HV=(0,s.memo)((e=>{const[t,n]=(0,s.useState)(!0),[i,r]=(0,s.useState)([]),{context:o}=(0,s.useContext)(xV),a=(0,s.useRef)(null),l=(0,s.useRef)(null),c=(0,s.useRef)(null),u="left"===e.pinned,d="right"===e.pinned,h=!u&&!d,p=(0,s.useCallback)((t=>{if(a.current=t,!a.current)return o.destroyBean(c.current),void(c.current=null);const i={setDisplayed:n,setCtrls:e=>r(e),setCenterWidth:e=>{l.current&&(l.current.style.width=e)},setViewportScrollLeft:e=>{a.current&&(a.current.scrollLeft=e)},setPinnedContainerWidth:e=>{a.current&&(a.current.style.width=e,a.current.style.minWidth=e,a.current.style.maxWidth=e)}};c.current=o.createBean(new PO(e.pinned)),c.current.setComp(i,a.current)}),[]),g=t?"":"ag-hidden",f=()=>i.map((e=>s.createElement(GV,{ctrl:e,key:e.getInstanceId()})));return s.createElement(s.Fragment,null,u&&s.createElement("div",{ref:p,className:"ag-pinned-left-header "+g,"aria-hidden":!t,role:"rowgroup"},f()),d&&s.createElement("div",{ref:p,className:"ag-pinned-right-header "+g,"aria-hidden":!t,role:"rowgroup"},f()),h&&s.createElement("div",{ref:p,className:"ag-header-viewport "+g,role:"presentation"},s.createElement("div",{ref:l,className:"ag-header-container",role:"rowgroup"},f())))})),WV=(0,s.memo)((()=>{const[e,t]=(0,s.useState)((()=>new TV)),[n,i]=(0,s.useState)(),{context:r}=(0,s.useContext)(xV),o=(0,s.useRef)(null),a=(0,s.useRef)(null),l=(0,s.useCallback)((e=>{if(o.current=e,!e)return r.destroyBean(a.current),void(a.current=null);const n={addOrRemoveCssClass:(e,n)=>t((t=>t.setClass(e,n))),setHeightAndMinHeight:e=>i(e)};a.current=r.createBean(new OO),a.current.setComp(n,o.current,o.current)}),[]),c=(0,s.useMemo)((()=>"ag-header "+e.toString()),[e]),u=(0,s.useMemo)((()=>({height:n,minHeight:n})),[n]);return s.createElement("div",{ref:l,className:c,style:u,role:"presentation"},s.createElement(HV,{pinned:"left"}),s.createElement(HV,{pinned:null}),s.createElement(HV,{pinned:"right"}))})),jV=(e,t)=>{(0,s.useEffect)((()=>{const n=t.current;if(n){const t=n.parentElement;if(t){const i=document.createComment(e);return t.insertBefore(i,n),()=>{t.removeChild(i)}}}}),[e])},UV=(0,s.memo)((e=>{const[t,n]=(0,s.useState)(),{context:i,popupService:r,localeService:o,gos:a}=(0,s.useContext)(xV);return(e=>{const t=(0,s.useRef)(e),n=(0,s.useRef)(),i=(0,s.useRef)(!1),r=(0,s.useRef)(!1),[,o]=(0,s.useState)(0);i.current&&(r.current=!0),(0,s.useEffect)((()=>(i.current||(n.current=t.current(),i.current=!0),o((e=>e+1)),()=>{r.current&&n.current&&n.current()})),[])})((()=>{const{editDetails:t,cellCtrl:s,eParentCell:l}=e,{compDetails:c}=t,u=a.get("stopEditingWhenCellsLoseFocus"),d=i.createBean(new iO(c.params)),h=d.getGui();if(e.jsChildComp){const t=e.jsChildComp.getGui();t&&h.appendChild(t)}const p={column:s.getColumn(),rowNode:s.getRowNode(),type:"popupCellEditor",eventSource:l,ePopup:h,position:t.popupPosition,keepWithinBounds:!0},g=r.positionPopupByComponent.bind(r,p),f=o.getLocaleTextFunc(),m=r.addPopup({modal:u,eChild:h,closeOnEsc:!0,closedCallback:()=>{s.onPopupEditorClosed()},anchorToElement:l,positionCallback:g,ariaLabel:f("ariaLabelCellEditor","Cell Editor")}),v=m?m.hideFunc:void 0;return n(d),e.jsChildComp&&e.jsChildComp.afterGuiAttached&&e.jsChildComp.afterGuiAttached(),()=>{null!=v&&v(),i.destroyBean(d)}})),s.createElement(s.Fragment,null,t&&e.wrappedContent&&(0,l.createPortal)(e.wrappedContent,t.getGui()))})),zV=(e,t,n,i,r,o)=>{const{context:a}=(0,s.useContext)(xV),l=(0,s.useCallback)((()=>{const e=r.current;if(!e)return;const t=e.getGui();t&&t.parentElement&&t.parentElement.removeChild(t),a.destroyBean(e),r.current=void 0}),[]);(0,s.useEffect)((()=>{const i=null!=e,s=e&&e.compDetails&&!e.compDetails.componentFromFramework;if(!(i&&s&&!(t&&null==n)))return void l();const a=e.compDetails;if(r.current){const t=r.current,n=!!(null!=t.refresh&&0==e.force)&&t.refresh(a.params);if(!0===n||void 0===n)return;l()}const c=a.newAgStackInstance();if(!c)return;const u=c.resolveNow(null,(e=>e));if(!u)return;const d=u.getGui();if(!d)return;(t?n:o.current).appendChild(d),r.current=u}),[e,t,i]),(0,s.useEffect)((()=>l),[])},YV=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new WP((e=>{this.resolveInstanceCreated=e})),this.onValueChange=e=>this.updateValue(e),this.value=e.value}getProps(){return rV(iV({},this.cellEditorParams),{initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange})}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){uV(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}setRef(e){var t;this.componentInstance=e,null==(t=this.resolveInstanceCreated)||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},qV=(e,t,n)=>{const i=e.compProxy;return s.createElement(s.Fragment,null,!i&&s.createElement(t,rV(iV({},e.compDetails.params),{ref:n})),i&&((e,t,n)=>{const{compProxy:i}=e;n(i);const r=i.getProps(),o=_V(t);return s.createElement(sV.Provider,{value:{setMethods:e=>i.setMethods(e)}},o&&s.createElement(t,iV({},r)),!o&&s.createElement(t,rV(iV({},r),{ref:e=>i.setRef(e)})))})(e,t,n))},KV=(0,s.memo)((e=>{const{context:t}=(0,s.useContext)(xV),{cellCtrl:n,printLayout:i,editingRow:r}=e,o=n.getTabIndex(),a=n.getColumnIdSanitised(),l=n.getInstanceId(),[c,u]=(0,s.useState)((()=>n.isCellRenderer()?void 0:{compDetails:void 0,value:n.getValueToDisplay(),force:!1})),[d,h]=(0,s.useState)(),[p,g]=(0,s.useState)(1),[f,m]=(0,s.useState)(),[v,y]=(0,s.useState)(!1),[C,w]=(0,s.useState)(!1),[b,S]=(0,s.useState)(!1),[E,x]=(0,s.useState)(),A=(0,s.useMemo)((()=>n.isForceWrapper()),[n]),T=(0,s.useMemo)((()=>n.getCellAriaRole()),[n]),_=(0,s.useRef)(null),R=(0,s.useRef)(null),D=(0,s.useRef)(),M=(0,s.useRef)(),P=(0,s.useRef)(),I=(0,s.useRef)([]),N=(0,s.useRef)(),[k,O]=(0,s.useState)(0),L=(0,s.useCallback)((e=>{N.current=e,O((e=>e+1))}),[]),F=A||null!=c&&(v||b||C),B=(0,s.useCallback)(((e,t)=>{if(M.current=t,t){((e,t,n)=>{const i=n.getColumn();if(!e&&t.isPopup&&t.isPopup()){const e="AG Grid: Found an issue in column ".concat(i.getColId(),". If using React, specify an editor is a popup using colDef.cellEditorPopup=true. AG Grid React cannot depend on the editor component specifying if it's in a popup (via the isPopup() method on the editor), as React needs to know this information BEFORE the component is created.");GP.doOnce((()=>console.warn(e)),"jsEditorComp-isPopup-"+n.getColumn().getColId())}if(e&&t.getPopupPosition&&null!=t.getPopupPosition()){const e="AG Grid: Found an issue in column ".concat(i.getColId(),". If using React, specify an editor popup position using colDef.cellEditorPopupPosition=true. AG Grid React cannot depend on the editor component specifying it's position (via the getPopupPosition() method on the editor), as React needs to know this information BEFORE the component is created.");GP.doOnce((()=>console.warn(e)),"jsEditorComp-getPopupPosition-"+n.getColumn().getColId())}})(e,t,n);t.isCancelBeforeStart&&t.isCancelBeforeStart()&&setTimeout((()=>{n.stopEditing(!0),n.focusCell(!0)}))}}),[n]),V=(0,s.useCallback)((e=>B(!0,e)),[B]),G=(0,s.useCallback)((e=>B(!1,e)),[B]);let H=(0,s.useRef)();H.current||(H.current=new jP((()=>_.current))),zV(c,F,N.current,k,D,_);const W=(0,s.useRef)();(0,s.useLayoutEffect)((()=>{const e=W.current,t=c;if(W.current=c,null==e||null==e.compDetails||null==t||null==t.compDetails)return;const n=e.compDetails,i=t.compDetails;if(n.componentClass!=i.componentClass)return;if(null==R.current||null==R.current.refresh)return;1!=R.current.refresh(i.params)&&g((e=>e+1))}),[c]),(0,s.useLayoutEffect)((()=>{if(!(d&&!d.compDetails.componentFromFramework))return;const e=d.compDetails,n=!0===d.popup,i=(e=>{const t=e.newAgStackInstance();if(t)return t.resolveNow(null,(e=>e))})(e);if(!i)return;const r=i.getGui();if(B(n,i),!n){const e=(A?P:_).current;null==e||e.appendChild(r),i.afterGuiAttached&&i.afterGuiAttached()}return x(i),()=>{t.destroyBean(i),B(n,void 0),x(void 0),r&&r.parentElement&&r.parentElement.removeChild(r)}}),[d]);const j=(0,s.useCallback)((e=>{if(P.current=e,!P.current)return I.current.forEach((e=>e())),void(I.current=[]);const i=e=>{var n;if(e){const i=e.getGui();null==(n=P.current)||n.insertAdjacentElement("afterbegin",i),I.current.push((()=>{t.destroyBean(e),GP.removeFromParent(i)}))}return e};if(v){i(n.createSelectionCheckbox())}b&&i(n.createDndSource()),C&&i(n.createRowDragComp())}),[n,t,b,C,v]),U=(0,s.useCallback)((e=>{if(_.current=e,!_.current)return;if(!n)return;const t={addOrRemoveCssClass:(e,t)=>H.current.addOrRemoveCssClass(e,t),setUserStyles:e=>m(e),getFocusableElement:()=>_.current,setIncludeSelection:e=>y(e),setIncludeRowDrag:e=>w(e),setIncludeDndSource:e=>S(e),getCellEditor:()=>M.current||null,getCellRenderer:()=>R.current?R.current:D.current,getParentOfValue:()=>N.current?N.current:P.current?P.current:_.current,setRenderDetails:(e,t,n)=>{u((i=>(null==i?void 0:i.compDetails)!==e||(null==i?void 0:i.value)!==t||(null==i?void 0:i.force)!==n?{value:t,compDetails:e,force:n}:i))},setEditDetails:(e,t,n,i)=>{if(e){let r;i?r=new YV(e.params,(()=>g((e=>e+1)))):e.componentFromFramework&&BV(),h({compDetails:e,popup:t,popupPosition:n,compProxy:r}),t||u(void 0)}else h((e=>{(null==e?void 0:e.compProxy)&&(M.current=void 0)}))}},s=P.current||void 0;n.setComp(t,_.current,s,i,r)}),[]),z=(0,s.useMemo)((()=>!!(c&&c.compDetails&&c.compDetails.componentFromFramework&&_V(c.compDetails.componentClass))),[c]);(0,s.useLayoutEffect)((()=>{var e;_.current&&(H.current.addOrRemoveCssClass("ag-cell-value",!F),H.current.addOrRemoveCssClass("ag-cell-inline-editing",!!d&&!d.popup),H.current.addOrRemoveCssClass("ag-cell-popup-editing",!!d&&!!d.popup),H.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!d||!!d.popup),null==(e=n.getRowCtrl())||e.setInlineEditingCss(!!d),n.shouldRestoreFocus()&&!n.isEditing()&&_.current.focus({preventScroll:!0}))}));const Y=()=>s.createElement(s.Fragment,null,null!=c&&((e,t,n,i,r,o,a)=>{const{compDetails:l,value:c}=e,u=!l,d=l&&l.componentFromFramework,h=l&&l.componentClass,p=(null==c?void 0:c.toString)?c.toString():c,g=()=>s.createElement(s.Fragment,null,u&&s.createElement(s.Fragment,null,p),d&&!o&&s.createElement(h,rV(iV({},l.params),{key:t,ref:i})),d&&o&&s.createElement(h,rV(iV({},l.params),{key:t})));return s.createElement(s.Fragment,null,r?s.createElement("span",{role:"presentation",id:"cell-".concat(n),className:"ag-cell-value",ref:a},g()):g())})(c,p,l,R,F,z,L),null!=d&&((e,t,n,i,r,o)=>{const a=e.compDetails,l=a.componentClass,c=a.componentFromFramework&&!e.popup,u=a.componentFromFramework&&e.popup,d=!a.componentFromFramework&&e.popup;return s.createElement(s.Fragment,null,c&&qV(e,l,t),u&&s.createElement(UV,{editDetails:e,cellCtrl:r,eParentCell:i,wrappedContent:qV(e,l,n)}),d&&o&&s.createElement(UV,{editDetails:e,cellCtrl:r,eParentCell:i,jsChildComp:o}))})(d,G,V,_.current,n,E));return s.createElement("div",{ref:U,style:f,tabIndex:o,role:T,"col-id":a},F?s.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:j},Y()):Y())})),XV=(0,s.memo)((e=>{const{context:t,gos:n}=(0,s.useContext)(xV),{rowCtrl:i,containerType:r}=e,o=i.getTabIndex(),a=(0,s.useRef)(i.getDomOrder()),l=i.isFullWidth(),c=i.getRowNode().displayed,[u,d]=(0,s.useState)((()=>c?i.getRowIndex():null)),[h,p]=(0,s.useState)((()=>i.getRowId())),[g,f]=(0,s.useState)((()=>i.getBusinessKey())),[m,v]=(0,s.useState)((()=>i.getRowStyles())),y=(0,s.useRef)(null),C=(0,s.useRef)(null),[w,b]=(0,s.useState)((()=>null)),[S,E]=(0,s.useState)(),[x,A]=(0,s.useState)((()=>c?i.getInitialRowTop(r):void 0)),[T,_]=(0,s.useState)((()=>c?i.getInitialTransform(r):void 0)),R=(0,s.useRef)(null),D=(0,s.useRef)(),M=(0,s.useRef)(!1),[P,I]=(0,s.useState)(0);(0,s.useEffect)((()=>{var e;if(M.current)return;if(!S)return;if(P>10)return;const t=null==(e=R.current)?void 0:e.firstChild;t?(i.setupDetailRowAutoHeight(t),M.current=!0):I((e=>e+1))}),[S,P]);let N=(0,s.useRef)();N.current||(N.current=new jP((()=>R.current)));const k=(0,s.useCallback)((e=>{if(R.current=e,!R.current)return void i.unsetComp(r);if(!i.isAlive())return;const t={setTop:A,setTransform:_,addOrRemoveCssClass:(e,t)=>N.current.addOrRemoveCssClass(e,t),setDomOrder:e=>a.current=e,setRowIndex:d,setRowId:p,setRowBusinessKey:f,setUserStyles:v,setCellCtrls:(e,t)=>{C.current=y.current,y.current=e;const n=PV(C.current,e,a.current);n!==C.current&&MV(t,(()=>b(n)))},showFullWidth:e=>E(e),getFullWidthCellRenderer:()=>D.current,refreshFullWidth:e=>V.current?(E((t=>rV(iV({},t),{params:e()}))),!0):!(!D.current||!D.current.refresh)&&D.current.refresh(e())};i.setComp(t,R.current,r)}),[]);(0,s.useLayoutEffect)((()=>IV(S,t,R.current,D)),[S]);const O=(0,s.useMemo)((()=>{const e={top:x,transform:T};return Object.assign(e,m),e}),[x,T,m]),L=l&&S&&S.componentFromFramework,F=!l&&null!=w,B=(0,s.useMemo)((()=>!!((null==S?void 0:S.componentFromFramework)&&_V(S.componentClass))),[S]),V=(0,s.useRef)(!1);(0,s.useEffect)((()=>{V.current=B&&!!S&&!!n.get("reactiveCustomComponents")}),[B,S]);return s.createElement("div",{ref:k,role:"row",style:O,"row-index":u,"row-id":h,"row-business-key":g,tabIndex:o},F&&(null==w?void 0:w.map((e=>s.createElement(KV,{cellCtrl:e,editingRow:i.isEditing(),printLayout:i.isPrintLayout(),key:e.getInstanceId()})))),L&&(()=>{const e=S.componentClass;return s.createElement(s.Fragment,null,B&&s.createElement(e,iV({},S.params)),!B&&s.createElement(e,rV(iV({},S.params),{ref:D})))})())})),QV=(0,s.memo)((e=>{const{context:t}=(0,s.useContext)(xV),{name:n}=e,i=(0,s.useMemo)((()=>Yk(n)),[n]),r=(0,s.useRef)(null),o=(0,s.useRef)(null),a=(0,s.useRef)([]),l=(0,s.useRef)([]),[c,u]=(0,s.useState)((()=>[])),d=(0,s.useRef)(!1),h=(0,s.useRef)(),p=(0,s.useMemo)((()=>Qk.getRowContainerCssClasses(n)),[n]),g=(0,s.useMemo)((()=>AV(p.viewport)),[p]),f=(0,s.useMemo)((()=>AV(p.container)),[p]),m=n===zk.CENTER||n===zk.TOP_CENTER||n===zk.BOTTOM_CENTER||n===zk.STICKY_TOP_CENTER||n===zk.STICKY_BOTTOM_CENTER;jV(" AG Row Container "+n+" ",m?r:o);const v=(0,s.useCallback)((()=>m?null!=r.current&&null!=o.current:null!=o.current),[]),y=(0,s.useCallback)((()=>m?null==r.current&&null==o.current:null==o.current),[]),C=(0,s.useCallback)((()=>{if(y()&&(t.destroyBean(h.current),h.current=null),v()){const e=e=>{const t=PV(l.current,a.current,d.current);t!==l.current&&(l.current=t,MV(e,(()=>u(t))))},i={setViewportHeight:e=>{r.current&&(r.current.style.height=e)},setRowCtrls:t=>{let{rowCtrls:n,useFlushSync:i}=t;const r=!!i&&a.current.length>0&&n.length>0;a.current=n,e(r)},setDomOrder:t=>{d.current!=t&&(d.current=t,e(!1))},setContainerWidth:e=>{o.current&&(o.current.style.width=e)}};h.current=t.createBean(new Qk(n)),h.current.setComp(i,o.current,r.current)}}),[v,y]),w=(0,s.useCallback)((e=>{o.current=e,C()}),[C]),b=(0,s.useCallback)((e=>{r.current=e,C()}),[C]),S=()=>s.createElement("div",{className:f,ref:w,role:"rowgroup"},c.map((e=>s.createElement(XV,{rowCtrl:e,containerType:i,key:e.getInstanceId()}))));return s.createElement(s.Fragment,null,m?s.createElement("div",{className:g,ref:b,role:"presentation"},S()):S())})),ZV=(0,s.memo)((()=>{const{context:e,agStackComponentsRegistry:t,resizeObserverService:n}=(0,s.useContext)(xV),[i,r]=(0,s.useState)(""),[o,a]=(0,s.useState)(0),[l,c]=(0,s.useState)(0),[u,d]=(0,s.useState)("0px"),[h,p]=(0,s.useState)("0px"),[g,f]=(0,s.useState)("100%"),[m,v]=(0,s.useState)("0px"),[y,C]=(0,s.useState)("0px"),[w,b]=(0,s.useState)("100%"),[S,E]=(0,s.useState)(""),[x,A]=(0,s.useState)(""),[T,_]=(0,s.useState)(null),[R,D]=(0,s.useState)(""),[M,P]=(0,s.useState)(null),[I,N]=(0,s.useState)("ag-layout-normal");let k=(0,s.useRef)();k.current||(k.current=new jP((()=>O.current)));const O=(0,s.useRef)(null),L=(0,s.useRef)(null),F=(0,s.useRef)(null),B=(0,s.useRef)(null),V=(0,s.useRef)(null),G=(0,s.useRef)(null),H=(0,s.useRef)(null),W=(0,s.useRef)([]),j=(0,s.useRef)([]);jV(" AG Grid Body ",O),jV(" AG Pinned Top ",L),jV(" AG Sticky Top ",F),jV(" AG Middle ",G),jV(" AG Pinned Bottom ",H);const U=(0,s.useCallback)((i=>{if(O.current=i,!O.current)return e.destroyBeans(W.current),j.current.forEach((e=>e())),W.current=[],void(j.current=[]);if(!e)return;const s=n=>{const i=t.getComponentClass(n),r=e.createBean(new i);return W.current.push(r),r},o=(e,t)=>{e.appendChild(t),j.current.push((()=>e.removeChild(t)))};o(O.current,document.createComment(" AG Fake Horizontal Scroll ")),o(O.current,s("AG-FAKE-HORIZONTAL-SCROLL").getGui()),o(O.current,document.createComment(" AG Overlay Wrapper ")),o(O.current,s("AG-OVERLAY-WRAPPER").getGui()),V.current&&(o(V.current,document.createComment(" AG Fake Vertical Scroll ")),o(V.current,s("AG-FAKE-VERTICAL-SCROLL").getGui()));const l={setRowAnimationCssOnBodyViewport:r,setColumnCount:e=>{O.current&&GP.setAriaColCount(O.current,e)},setRowCount:e=>{O.current&&GP.setAriaRowCount(O.current,e)},setTopHeight:a,setBottomHeight:c,setStickyTopHeight:d,setStickyTopTop:p,setStickyTopWidth:f,setTopDisplay:E,setBottomDisplay:A,setColumnMovingCss:(e,t)=>k.current.addOrRemoveCssClass(e,t),updateLayoutClasses:N,setAlwaysVerticalScrollClass:_,setPinnedTopBottomOverflowY:D,setCellSelectableCss:(e,t)=>P(t?e:null),setBodyViewportWidth:e=>{G.current&&(G.current.style.width=e)},registerBodyViewportResizeListener:e=>{if(G.current){const t=n.observeResize(G.current,e);j.current.push((()=>t()))}},setStickyBottomHeight:v,setStickyBottomBottom:C,setStickyBottomWidth:b},u=e.createBean(new Sk);W.current.push(u),u.setComp(l,O.current,G.current,L.current,H.current,F.current,B.current)}),[]),z=(0,s.useMemo)((()=>AV("ag-root","ag-unselectable",I)),[I]),Y=(0,s.useMemo)((()=>AV("ag-body-viewport",i,I,T,M)),[i,I,T,M]),q=(0,s.useMemo)((()=>AV("ag-body",I)),[I]),K=(0,s.useMemo)((()=>AV("ag-floating-top",M)),[M]),X=(0,s.useMemo)((()=>AV("ag-sticky-top",M)),[M]),Q=(0,s.useMemo)((()=>AV("ag-sticky-bottom",M)),[M]),Z=(0,s.useMemo)((()=>AV("ag-floating-bottom",M)),[M]),$=(0,s.useMemo)((()=>({height:o,minHeight:o,display:S,overflowY:R})),[o,S,R]),J=(0,s.useMemo)((()=>({height:u,top:h,width:g})),[u,h,g]),ee=(0,s.useMemo)((()=>({height:m,bottom:y,width:w})),[m,y,w]),te=(0,s.useMemo)((()=>({height:l,minHeight:l,display:x,overflowY:R})),[l,x,R]),ne=e=>s.createElement(QV,{name:e,key:"".concat(e,"-container")}),ie=e=>{let{section:t,children:n,className:i,style:r}=e;return s.createElement("div",{ref:t,className:i,role:"presentation",style:r},n.map(ne))};return s.createElement("div",{ref:U,className:z,role:"treegrid"},s.createElement(WV,null),ie({section:L,className:K,style:$,children:[zk.TOP_LEFT,zk.TOP_CENTER,zk.TOP_RIGHT,zk.TOP_FULL_WIDTH]}),s.createElement("div",{className:q,ref:V,role:"presentation"},ie({section:G,className:Y,children:[zk.LEFT,zk.CENTER,zk.RIGHT,zk.FULL_WIDTH]})),ie({section:F,className:X,style:J,children:[zk.STICKY_TOP_LEFT,zk.STICKY_TOP_CENTER,zk.STICKY_TOP_RIGHT,zk.STICKY_TOP_FULL_WIDTH]}),ie({section:B,className:Q,style:ee,children:[zk.STICKY_BOTTOM_LEFT,zk.STICKY_BOTTOM_CENTER,zk.STICKY_BOTTOM_RIGHT,zk.STICKY_BOTTOM_FULL_WIDTH]}),ie({section:H,className:Z,style:te,children:[zk.BOTTOM_LEFT,zk.BOTTOM_CENTER,zk.BOTTOM_RIGHT,zk.BOTTOM_FULL_WIDTH]}))})),$V=(0,s.forwardRef)(((e,t)=>{const{children:n,eFocusableElement:i,onTabKeyDown:r,gridCtrl:o,forceFocusOutWhenTabGuardsAreEmpty:a}=e,{context:l}=(0,s.useContext)(xV),c=(0,s.useRef)(null),u=(0,s.useRef)(null),d=(0,s.useRef)(),h=e=>{const t=null==e?void 0:parseInt(e,10).toString();[c,u].forEach((e=>{var n,i;void 0===t?null==(n=e.current)||n.removeAttribute("tabindex"):null==(i=e.current)||i.setAttribute("tabindex",t)}))};(0,s.useImperativeHandle)(t,(()=>({forceFocusOutOfContainer(e){var t;null==(t=d.current)||t.forceFocusOutOfContainer(e)}})));const p=(0,s.useCallback)((()=>{if(!c.current&&!u.current)return l.destroyBean(d.current),void(d.current=null);if(c.current&&u.current){const e={setTabIndex:h};d.current=l.createBean(new HO({comp:e,eTopGuard:c.current,eBottomGuard:u.current,eFocusableElement:i,onTabKeyDown:r,forceFocusOutWhenTabGuardsAreEmpty:a,focusInnerElement:e=>o.focusInnerElement(e)}))}}),[]),g=(0,s.useCallback)((e=>{c.current=e,p()}),[p]),f=(0,s.useCallback)((e=>{u.current=e,p()}),[p]),m=e=>{const t="top"===e?GO.TAB_GUARD_TOP:GO.TAB_GUARD_BOTTOM;return s.createElement("div",{className:"".concat(GO.TAB_GUARD," ").concat(t),role:"presentation",ref:"top"===e?g:f})};return s.createElement(s.Fragment,null,m("top"),n,m("bottom"))})),JV=(0,s.memo)($V),eG=(0,s.memo)((e=>{let{context:t}=e;const[n,i]=(0,s.useState)(""),[r,o]=(0,s.useState)(""),[a,l]=(0,s.useState)(""),[c,u]=(0,s.useState)(null),[d,h]=(0,s.useState)(null),[p,g]=(0,s.useState)(!1),[f,m]=(0,s.useState)(),v=(0,s.useRef)(null),y=(0,s.useRef)(null),C=(0,s.useRef)(),[w,b]=(0,s.useState)(null),S=(0,s.useRef)((()=>{})),E=(0,s.useCallback)((()=>{}),[]),x=(0,s.useMemo)((()=>t.isDestroyed()?null:t.getBean("beans")),[t]);jV(" AG Grid ",y);const A=(0,s.useCallback)((e=>{if(y.current=e,!y.current)return t.destroyBean(v.current),void(v.current=null);if(t.isDestroyed())return;v.current=t.createBean(new YL);const n=v.current;S.current=n.focusInnerElement.bind(n);const r={destroyGridUi:()=>{},setRtlClass:i,forceFocusOutOfContainer:e=>{var t;null==(t=C.current)||t.forceFocusOutOfContainer(e)},updateLayoutClasses:l,getFocusableContainers:()=>{var e,t;const n=[],i=null==(e=y.current)?void 0:e.querySelector(".ag-root"),r=null==(t=y.current)?void 0:t.querySelector(".ag-side-bar:not(.ag-hidden)");return i&&n.push(i),r&&n.push(r),n},setCursor:u,setUserSelect:h};n.setComp(r,y.current,y.current),g(!0)}),[]);(0,s.useEffect)((()=>{if(!f||!x||!v.current||!w||!y.current)return;const e=v.current,n=[],{agStackComponentsRegistry:i}=x,r=i.getComponentClass("AG-GRID-HEADER-DROP-ZONES"),s=i.getComponentClass("AG-SIDE-BAR"),o=i.getComponentClass("AG-STATUS-BAR"),a=i.getComponentClass("AG-WATERMARK"),l=i.getComponentClass("AG-PAGINATION"),c=[],u=y.current;if(e.showDropZones()&&r){const e=t.createBean(new r),i=e.getGui();u.insertAdjacentElement("afterbegin",i),c.push(i),n.push(e)}if(e.showSideBar()&&s){const e=t.createBean(new s),i=e.getGui(),r=w.querySelector(".ag-tab-guard-bottom");r&&(r.insertAdjacentElement("beforebegin",i),c.push(i)),n.push(e)}if(e.showStatusBar()&&o){const e=t.createBean(new o),i=e.getGui();u.insertAdjacentElement("beforeend",i),c.push(i),n.push(e)}if(l){const e=t.createBean(new l),i=e.getGui();u.insertAdjacentElement("beforeend",i),c.push(i),n.push(e)}if(e.showWatermark()&&a){const e=t.createBean(new a),i=e.getGui();u.insertAdjacentElement("beforeend",i),c.push(i),n.push(e)}return()=>{t.destroyBeans(n),c.forEach((e=>{e.parentElement&&e.parentElement.removeChild(e)}))}}),[f,w,x]);const T=(0,s.useMemo)((()=>AV("ag-root-wrapper",n,r,a)),[n,r,a]),_=(0,s.useMemo)((()=>AV("ag-root-wrapper-body","ag-focus-managed",a)),[a]),R=(0,s.useMemo)((()=>({userSelect:null!=d?d:"",WebkitUserSelect:null!=d?d:"",cursor:null!=c?c:""})),[d,c]),D=(0,s.useCallback)((e=>{C.current=e,m(null!==e)}),[]);return s.createElement("div",{ref:A,className:T,style:R,role:"presentation"},s.createElement("div",{className:_,ref:b,role:"presentation"},p&&w&&x&&s.createElement(xV.Provider,{value:x},s.createElement(JV,{ref:D,eFocusableElement:w,onTabKeyDown:E,gridCtrl:v.current,forceFocusOutWhenTabGuardsAreEmpty:!0},s.createElement(ZV,null)))))})),tG=e=>{var t,n;const i=(0,s.useRef)(),r=(0,s.useRef)(null),o=(0,s.useRef)(null),a=(0,s.useRef)([]),l=(0,s.useRef)([]),c=(0,s.useRef)(e),u=(0,s.useRef)(!1),[d,h]=(0,s.useState)(void 0),[,p]=(0,s.useState)(0),g=(0,s.useCallback)((t=>{if(r.current=t,!r.current)return a.current.forEach((e=>e())),void(a.current.length=0);const n=e.modules||[];o.current||(o.current=new EV((()=>p((e=>e+1))),e.componentWrappingElement,e.maxComponentCreationTimeMs),a.current.push((()=>{var e;null==(e=o.current)||e.destroy(),o.current=null})));const s=oD.combineAttributesAndGridOptions(e.gridOptions,e),c={providedBeanInstances:{frameworkComponentWrapper:new nG(o.current,!!s.reactiveCustomComponents)},modules:n,frameworkOverrides:new rG},d=new ZF;i.current=d.create(r.current,s,(t=>{h(t),a.current.push((()=>{t.destroy()}));t.getBean(SF.NAME).whenReady((()=>{if(t.isDestroyed())return;const n=i.current;n&&e.setGridApi&&e.setGridApi(n,new HL(n))}))}),(e=>{e.getBean(SF.NAME).whenReady((()=>{l.current.forEach((e=>e())),l.current.length=0,u.current=!0}))}),c)}),[]),f=(0,s.useMemo)((()=>iV({height:"100%"},e.containerStyle||{})),[e.containerStyle]),m=(0,s.useCallback)((e=>{u.current?e():l.current.push(e)}),[]);return(0,s.useEffect)((()=>{const t=function(e,t){const n={};return Object.keys(t).forEach((i=>{const r=t[i];e[i]!==r&&(n[i]=r)})),n}(c.current,e);c.current=e,m((()=>{i.current&&oD.processOnChange(t,i.current)}))}),[e]),s.createElement("div",{style:f,className:e.className,ref:g},d&&!d.isDestroyed()?s.createElement(eG,{context:d}):null,null!=(n=null==(t=o.current)?void 0:t.getPortals())?n:null)};var nG=class extends $F{constructor(e,t){super(),this.parent=e,this.reactiveCustomComponents=t}createWrapper(e,t){if(this.reactiveCustomComponents){const n=(e=>{switch(e){case"filter":return pV;case"floatingFilterComponent":return mV;case"dateComponent":return hV;case"loadingOverlayComponent":return vV;case"noRowsOverlayComponent":return CV;case"statusPanel":return wV;case"toolPanel":return bV;case"menuItem":return yV}})(t.propertyName);if(n)return new n(e,this.parent,t)}else switch(t.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":BV()}const n=!t.cellRenderer&&"toolPanel"!==t.propertyName;return new cV(e,this.parent,t,n)}},iG=(0,s.forwardRef)(((e,t)=>{const{ctrlsFactory:n,context:i,gos:r,resizeObserverService:o,clientSideRowModel:a,serverSideRowModel:l}=(0,s.useContext)(xV),[c,u]=(0,s.useState)((()=>new TV)),[d,h]=(0,s.useState)((()=>new TV)),[p,g]=(0,s.useState)(),[f,m]=(0,s.useState)(),v=(0,s.useRef)(),y=(0,s.useRef)(null),C=(0,s.useRef)(),w=(0,s.useMemo)((()=>P_.__getGridRegisteredModules(e.api.getGridId())),[e]),b=(0,s.useMemo)((()=>c.toString()+" ag-details-row"),[c]),S=(0,s.useMemo)((()=>d.toString()+" ag-details-grid"),[d]);t&&(0,s.useImperativeHandle)(t,(()=>({refresh(){var e,t;return null!=(t=null==(e=v.current)?void 0:e.refresh())&&t}}))),e.template&&GP.warnOnce("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const E=(0,s.useCallback)((t=>{if(y.current=t,!y.current)return i.destroyBean(v.current),void(C.current&&C.current());const s={addOrRemoveCssClass:(e,t)=>u((n=>n.setClass(e,t))),addOrRemoveDetailGridCssClass:(e,t)=>h((n=>n.setClass(e,t))),setDetailGrid:e=>g(e),setRowData:e=>m(e),getGui:()=>y.current},c=n.getInstance("detailCellRenderer");if(c&&(i.createBean(c),c.init(s,e),v.current=c,r.get("detailRowAutoHeight"))){const t=()=>{if(null==y.current)return;const t=y.current.clientHeight;if(null!=t&&t>0){setTimeout((()=>{e.node.setRowHeight(t),a?a.onRowHeightChanged():l&&l.onRowHeightChanged()}),0)}};C.current=o.observeResize(y.current,t),t()}}),[]),x=(0,s.useCallback)(((e,t)=>{var n;null==(n=v.current)||n.registerDetailWithMaster(e,t)}),[]);return s.createElement("div",{className:b,ref:E},p&&s.createElement(tG,rV(iV({className:S},p),{modules:w,rowData:f,setGridApi:x})))})),rG=class extends FL{constructor(){super("react"),this.frameworkComponents={agGroupCellRenderer:OV,agGroupRowRenderer:OV,agDetailCellRenderer:iG},this.wrapIncoming=(e,t)=>{return"ensureVisible"===t?(n=e,DV||setTimeout((()=>DV=!1),0),DV=!0,n()):e();var n},this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}},sG=class extends s.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=(e,t)=>{this.api=e,this.columnApi=t,this.apiListeners.forEach((t=>t(e)))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return s.createElement(tG,rV(iV({},this.props),{setGridApi:this.setGridApi}))}};const oG=e=>{let{message:t}=e;return(0,If.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,If.jsx)("strong",{className:"font-bold",children:"Error: "}),(0,If.jsx)("span",{className:"block sm:inline",children:t})]})},aG="border border-gray-300 p-2 rounded-lg focus:outline-none focus:border-blue-500",lG="bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600",cG="bg-gray-500 hover:bg-gray-600 p-2 rounded text-white",uG="bg-gray-300 cursor-not-allowed",dG="px-2 py-1 rounded-lg border",hG="bg-white text-gray-500 border-gray-500 hover:bg-gray-500 hover:text-white hover:border-transparent",pG="bg-white text-blue-500 border-blue-500 hover:bg-blue-500 hover:text-white hover:border-transparent",gG="bg-white text-red-500 border-red-500 hover:bg-red-500 hover:text-white hover:border-transparent",fG="flex items-center space-x-2 h-full",mG="mb-4 flex justify-between items-center",vG="text-gray-700",yG=e=>{let{title:t,data:n,total:i,loading:r,error:o,fetchAction:a,deleteAction:l,columns:c,createLink:u,updateLink:d,viewLink:h}=e;const p=$E(),[g,f]=(0,s.useState)(""),[m,v]=(0,s.useState)(1),[y,C]=(0,s.useState)(10);(0,s.useEffect)((()=>{p(a({page:m,limit:y,query:g}))}),[p,a,m,y,g]);const w=n&&n.length>0?n.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(g.toLowerCase()))))):[],b=[...c,{headerName:"Actions",field:"actions",sortable:!1,filter:!1,pinned:"right",cellRenderer:e=>(0,If.jsxs)("div",{className:fG,children:[h&&(0,If.jsxs)(Pe,{to:h(e.data._id),className:"".concat(dG," ").concat(hG),children:[(0,If.jsx)(EA,{})," "]}),(0,If.jsxs)(Pe,{to:d(e.data._id),className:"".concat(dG," ").concat(pG),children:[(0,If.jsx)(bA,{})," "]}),(0,If.jsxs)("button",{onClick:()=>(e=>{p(l(e)),ot.success("".concat(t.slice(0,-1)," deleted successfully"))})(e.data._id),className:"".concat(dG," ").concat(gG),children:[(0,If.jsx)(DA,{})," "]})]})}],S=Math.max(Math.ceil(i/y),1);return(0,If.jsxs)(Zx,{title:t,children:[(0,If.jsxs)("div",{className:mG,children:[(0,If.jsx)("input",{type:"text",placeholder:"Search...",value:g,onChange:e=>f(e.target.value),className:aG}),(0,If.jsxs)(Pe,{to:u,className:lG,children:["Create ",t.slice(0,-1)]})]}),r&&(0,If.jsx)(JE,{}),o&&(0,If.jsx)(oG,{message:o.message}),!r&&!o&&(0,If.jsx)("div",{className:"ag-theme-alpine rounded-lg shadow-md overflow-hidden",children:(0,If.jsx)(sG,{rowData:w,columnDefs:b,pagination:!0,paginationPageSize:y,onPaginationChanged:e=>{v(e.api.paginationGetCurrentPage()+1),C(e.api.paginationGetPageSize())},paginationNumberFormatter:e=>"[".concat(e.value.toLocaleString(),"]"),domLayout:"autoHeight",suppressPaginationPanel:!0})}),(0,If.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,If.jsx)("button",{onClick:()=>v((e=>Math.max(e-1,1))),disabled:1===m||null!==o,className:"".concat(cG," ").concat(1===m||null!==o?uG:""),children:"Previous"}),(0,If.jsxs)("span",{className:vG,children:["Page ",o?0:m," of ",o?0:S]}),(0,If.jsx)("button",{onClick:()=>v((e=>Math.min(e+1,S))),disabled:m===S||null!==o,className:"".concat(cG," ").concat(m===S||null!==o?uG:""),children:"Next"})]})]})},CG=()=>{$E();const{countries:e,loading:t,error:n}=GE((e=>e.countries));return(0,If.jsx)(yG,{title:"Countries",data:e,loading:t,error:n,fetchAction:Ba,deleteAction:Wa,columns:[{headerName:"Id",field:"_id",sortable:!0,filter:!0},{headerName:"Name",field:"name",sortable:!0,filter:!0},{headerName:"Code",field:"code",sortable:!0,filter:!0}],createLink:"/dashboard/country/create",updateLink:e=>"/dashboard/country/update/".concat(e),total:e.length})},wG=()=>{const{id:e}=re(),[t,n]=(0,s.useState)(void 0),{countries:i,loading:r,error:o}=GE((e=>e.countries)),a=$E(),l=ne();if((0,s.useEffect)((()=>{(async()=>{const t=i.find((t=>t._id===e));if(t)n(t);else{const t=await a(Va(e));Va.fulfilled.match(t)&&n(t.payload.data)}})()}),[e,i,a]),r)return(0,If.jsx)(JE,{});if(o)return(0,If.jsx)(eA,{error:o});if(!t){const e={message:"Country not found",name:"NotFoundError",status:404,code:"COUNTRY_NOT_FOUND"};return(0,If.jsx)(eA,{error:e})}return(0,If.jsx)(Zx,{title:"Update Country",children:(0,If.jsx)(DT,{currentCountry:t,onSuccess:()=>l("/dashboard/country")})})},bG=e=>{let{name:t,onCountryChange:n,onCountryDelete:i,className:r}=e;const[o,a]=(0,s.useState)([]),[l,c]=(0,s.useState)(!1),u=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c(!0);try{const t=await ua.get("/countries?page=1&limit=100&query=".concat(e));a(t.data.countries)}catch(t){console.error("Failed to fetch countries",t)}finally{c(!1)}};(0,s.useEffect)((()=>{u()}),[]);return(0,If.jsx)(qf,{type:"datalist",label:"Country",name:t,options:o.map((e=>({value:e._id,name:e.name}))),handleChange:e=>{const{value:t}=e.target;u(t)},isLoading:l,onDatalistFinalSelection:e=>{n&&n(e)},onDeleteSelection:i,className:r})},SG=e=>{let{currentCity:t,onSuccess:n}=e;const i=$E(),r={name:t?t.name:"",countryId:t?t.countryId:""},s=bn().shape({name:ln().required("Name is required"),countryId:ln().required("Country is required")});return(0,If.jsx)(xE,{initialValues:r,validationSchema:s,handleSubmit:async(e,r)=>{let{setSubmitting:s}=r;const o={name:e.name,countryId:e.countryId};try{if(t&&t._id){const e=await i(Da({...o,_id:t._id}));Da.fulfilled.match(e)?(ot.success("City updated successfully"),n()):Da.rejected.match(e)&&ot.error("Failed to update city")}else{const e=await i(Ra(o));Ra.fulfilled.match(e)?(ot.success("City created successfully"),n()):Ra.rejected.match(e)&&ot.error("Failed to create city")}}catch(a){ot.error("An error occurred")}finally{s(!1)}},title:"City Form",buttonText:t?"Update":"Create",children:e=>(0,If.jsxs)(If.Fragment,{children:[(0,If.jsx)(Sf,{as:qf,type:"text",label:"Name",name:"name",required:!0}),(0,If.jsx)(Sf,{as:bG,name:"countryId"})]})})},EG=()=>{const e=ne();return(0,If.jsx)(Zx,{title:"Create City",children:(0,If.jsx)(SG,{onSuccess:()=>e("/dashboard/city")})})},xG=()=>{const{id:e}=re(),[t,n]=(0,s.useState)(void 0),{cities:i,loading:r,error:o}=GE((e=>e.cities)),a=$E(),l=ne();if((0,s.useEffect)((()=>{(async()=>{const t=i.find((t=>t._id===e));if(t)n(t);else{const t=await a(_a(e));_a.fulfilled.match(t)&&n(t.payload.data)}})()}),[e,i,a]),r)return(0,If.jsx)(JE,{});if(o)return(0,If.jsx)(eA,{error:o});if(!t){const e={message:"City not found",name:"NotFoundError",status:404,code:"CITY_NOT_FOUND"};return(0,If.jsx)(eA,{error:e})}return(0,If.jsx)(Zx,{title:"Update City",children:(0,If.jsx)(SG,{currentCity:t,onSuccess:()=>l("/dashboard/city")})})},AG=()=>{$E();const{cities:e,loading:t,error:n}=GE((e=>e.cities));return(0,If.jsx)(yG,{title:"Cities",data:e,loading:t,error:n,fetchAction:Ta,deleteAction:Ma,columns:[{headerName:"Id",field:"_id",sortable:!0,filter:!0},{headerName:"Name",field:"name",sortable:!0,filter:!0},{headerName:"Country",field:"country.name",sortable:!0,filter:!0}],createLink:"/dashboard/city/create",updateLink:e=>"/dashboard/city/update/".concat(e),total:e.length})},TG=()=>{const{roles:e,loading:t,error:n}=GE((e=>e.roles));return(0,If.jsx)(yG,{title:"Roles",data:e,loading:t,error:n,fetchAction:Tl,deleteAction:Ml,columns:[{headerName:"Id",field:"_id",sortable:!0,filter:!0},{headerName:"Name",field:"name",sortable:!0,filter:!0}],createLink:"/dashboard/role/create",updateLink:e=>"/dashboard/role/update/".concat(e),total:e.length})},_G=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object.fromEntries(Object.values(LA).map((t=>[t,e])))},RG=e=>{let{currentRole:t,onSuccess:n}=e;const i=$E(),r="6652283e71f2001edc9e2de0"===(null===t||void 0===t?void 0:t._id),s={name:t?t.name:"",permissions:r?_G(!0):t?t.permissions:_G(),roleType:null!==t&&void 0!==t&&t.isShipper?BA.Shipper:null!==t&&void 0!==t&&t.isDriver?BA.Driver:BA.Admin},o=bn({name:ln().required("Name is required"),roleType:ln().required("Role type is required")});return(0,If.jsx)(xE,{initialValues:s,validationSchema:o,handleSubmit:async(e,s)=>{let{setSubmitting:o}=s;if(r)return ot.error("Super Admin permissions cannot be modified."),void o(!1);const a=_G(),l=FA[e.roleType]||[],c={...a,...Object.fromEntries(Object.entries(e.permissions).map((e=>{let[t,n]=e;return[t,!!l.includes(t)&&n]})))},u={name:e.name,permissions:c,isShipper:e.roleType===BA.Shipper,isDriver:e.roleType===BA.Driver};try{if(t&&t._id){const e=await i(Dl({...u,_id:t._id}));Dl.fulfilled.match(e)?(ot.success("Role updated successfully"),n()):Dl.rejected.match(e)&&ot.error("Failed to update role")}else{const e=await i(Rl(u));Rl.fulfilled.match(e)?(ot.success("Role created successfully"),n()):Rl.rejected.match(e)&&ot.error("Failed to create role")}}catch(d){ot.error("An error occurred")}finally{o(!1)}},title:"Role Form",buttonText:t?"Update":"Create",children:e=>{return(0,If.jsx)(If.Fragment,{children:(0,If.jsxs)("div",{className:"mb-4 w-full flex flex-wrap",children:[(0,If.jsx)(Sf,{as:qf,type:"text",label:"Name",name:"name",required:!0,className:"w-full mb-4",disabled:r}),(0,If.jsxs)("div",{className:"mb-4 w-full",children:[(0,If.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Role Type"}),(0,If.jsxs)("div",{className:"flex items-center",children:[(0,If.jsx)(Sf,{type:"radio",name:"roleType",value:BA.Admin,className:"mr-2",disabled:r,onChange:t=>{e.setFieldValue("roleType",t.target.value);const n=_G(!1);if(t.target.value===BA.Admin)Object.keys(n).forEach((e=>{FA.driver.includes(e)||FA.shipper.includes(e)||(n[e]=!0)}));else{FA[t.target.value].forEach((e=>{n[e]=!0}))}e.setFieldValue("permissions",n)}}),(0,If.jsx)("label",{className:"mr-4",children:"Admin"}),(0,If.jsx)(Sf,{type:"radio",name:"roleType",value:BA.Shipper,className:"mr-2",disabled:r,onChange:t=>{e.setFieldValue("roleType",t.target.value);const n=_G(!1);FA[t.target.value].forEach((e=>{n[e]=!0})),e.setFieldValue("permissions",n)}}),(0,If.jsx)("label",{className:"mr-4",children:"Shipper"}),(0,If.jsx)(Sf,{type:"radio",name:"roleType",value:BA.Driver,className:"mr-2",disabled:r,onChange:t=>{e.setFieldValue("roleType",t.target.value);const n=_G(!1);FA[t.target.value].forEach((e=>{n[e]=!0})),e.setFieldValue("permissions",n)}}),(0,If.jsx)("label",{className:"mr-4",children:"Driver"})]})]}),(0,If.jsx)("div",{className:"mb-4 lg:col-span-2",children:(0,If.jsxs)("div",{className:"mt-4",children:[(0,If.jsx)("p",{className:"text-gray-700 font-semibold text-2xl mb-2 underline",children:"Permissions:"}),(t=e,(0,If.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(FA).map((e=>{let[n,i]=e;return(0,If.jsxs)("div",{className:"border rounded-lg p-4 shadow-sm",children:[(0,If.jsxs)("h3",{className:"text-lg font-semibold mb-2 capitalize",children:[n," Permissions:"]}),(0,If.jsx)("div",{className:"grid grid-cols-2 gap-4",children:i.map((e=>{const n=t.values.roleType===BA.Admin&&!FA.driver.includes(e)&&!FA.shipper.includes(e)||t.values.roleType===BA.Driver&&FA.driver.includes(e)||t.values.roleType===BA.Shipper&&FA.shipper.includes(e);return(0,If.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,If.jsx)(Sf,{type:"checkbox",name:"permissions.".concat(e),id:"permission-".concat(e),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:!n||r||t.values.roleType===BA.Admin&&(FA.driver.includes(e)||FA.shipper.includes(e)),checked:t.values.permissions[e]}),(0,If.jsx)("label",{htmlFor:"permission-".concat(e),className:"text-sm font-medium text-gray-700",children:e.replace(/_/g," ").toUpperCase()})]},e)}))})]},n)}))}))]})})]})});var t}})},DG=()=>{const{id:e}=re(),[t,n]=(0,s.useState)(void 0),{roles:i,loading:r,error:o}=GE((e=>e.roles)),a=$E(),l=ne();if((0,s.useEffect)((()=>{(async()=>{const t=i.find((t=>t._id===e));if(t)n(t);else{const t=await a(_l(e));_l.fulfilled.match(t)&&n(t.payload.data)}})()}),[e,i,a]),r)return(0,If.jsx)(JE,{});if(o)return(0,If.jsx)(eA,{error:o});if(!t){const e={message:"Role not found",name:"NotFoundError",status:404,code:"ROLE_NOT_FOUND"};return(0,If.jsx)(eA,{error:e})}return(0,If.jsx)(Zx,{title:"Update Role",children:(0,If.jsx)(RG,{currentRole:t,onSuccess:()=>l("/dashboard/role")})})},MG=()=>{const e=ne();return(0,If.jsx)(Zx,{title:"Create Role",children:(0,If.jsx)(RG,{onSuccess:()=>e("/dashboard/role")})})},PG=()=>{const{users:e,loading:t,error:n}=GE((e=>e.users));return(0,If.jsx)(yG,{title:"Users",data:e,loading:t,error:n,fetchAction:ic,deleteAction:ac,columns:[{headerName:"Id",field:"_id",sortable:!0,filter:!0},{headerName:"Username",field:"username",sortable:!0,filter:!0},{headerName:"Email",field:"email",sortable:!0,filter:!0},{headerName:"Role",field:"role.name",sortable:!0,filter:!0},{headerName:"City",field:"city.name",sortable:!0,filter:!0},{headerName:"Country",field:"country.name",sortable:!0,filter:!0}],createLink:"/dashboard/user/create",updateLink:e=>"/dashboard/user/update/".concat(e),total:e.length})},IG=e=>{let{name:t,className:n}=e;const[i,r]=(0,s.useState)([]),[o,a]=(0,s.useState)(!1),l=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";a(!0);try{const t=await ua.get("/roles?page=1&limit=100&query=".concat(e));r(t.data.roles)}catch(t){console.error("Failed to fetch roles",t)}finally{a(!1)}};(0,s.useEffect)((()=>{l();const e=e=>{r((t=>t.find((t=>t._id===e._id))?t.map((t=>t._id===e._id?e:t)):[...t,e]))},t=e=>{r((t=>t.filter((t=>t._id!==e))))};return Ju.onMessage(Xu.Updated,e),Ju.onMessage(Xu.Deleted,t),()=>{var n,i;null===(n=Ju.socket)||void 0===n||n.off(Xu.Updated,e),null===(i=Ju.socket)||void 0===i||i.off(Xu.Deleted,t)}}),[]);return(0,If.jsx)(qf,{type:"datalist",label:"Role",name:t,options:i.map((e=>({value:e._id,name:e.name}))),handleChange:e=>{const{value:t}=e.target;l(t)},isLoading:o,className:n})},NG=e=>{let{name:t,countryId:n,className:i}=e;const[r,o]=(0,s.useState)([]),[a,l]=(0,s.useState)(!1),c=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(n){l(!0);try{const t=await ua.get("/cities/country/".concat(n,"?page=1&limit=100&query=").concat(e));o(t.data.cities)}catch(t){console.error("Failed to fetch cities",t)}finally{l(!1)}}};(0,s.useEffect)((()=>{n&&c()}),[n]),(0,s.useEffect)((()=>{const e=e=>{o((t=>t.find((t=>t._id===e._id))?t.map((t=>t._id===e._id?e:t)):[...t,e]))},t=e=>{o((t=>t.filter((t=>t._id!==e))))};return Ju.onMessage(zu.Updated,e),Ju.onMessage(zu.Deleted,t),()=>{var n,i;null===(n=Ju.socket)||void 0===n||n.off(zu.Updated,e),null===(i=Ju.socket)||void 0===i||i.off(zu.Deleted,t)}}),[]);return(0,If.jsx)(qf,{type:"datalist",label:"City",name:t,options:r.map((e=>({value:e._id,name:e.name}))),disabled:null===n||void 0===n,handleChange:e=>{const{value:t}=e.target;c(t)},isLoading:a,className:i})},kG=e=>{let{countryField:t,cityField:n,className:i}=e;const{values:r,setFieldValue:o}=tf(),a=uf(r,t),[l,c]=(0,s.useState)(a||null);(0,s.useEffect)((()=>{c(a||null)}),[t,a]);return(0,If.jsxs)(If.Fragment,{children:[(0,If.jsx)(Sf,{as:bG,name:t,onCountryChange:e=>{c(e),o(t,e),o(n,null)},onCountryDelete:()=>{c(null),o(t,null),o(n,null)},className:i}),(0,If.jsx)(Sf,{as:NG,name:n,countryId:l,className:i})]})},OG=e=>{let{phoneNumberField:t,addressField:n,zipField:i,countryField:r,cityField:s,className:o}=e;return(0,If.jsxs)(If.Fragment,{children:[(0,If.jsx)(Sf,{as:qf,type:"text",label:"Phone Number",name:t,required:!0,className:o}),(0,If.jsx)(Sf,{as:qf,type:"text",label:"Address",name:n,required:!0,className:o}),(0,If.jsx)(Sf,{as:qf,type:"text",label:"Zip Code",name:i,required:!0,className:o}),(0,If.jsx)(Sf,{component:kG,countryField:r,cityField:s,className:o})]})},LG=e=>{let{currentUser:t,onSuccess:n}=e;const i=$E(),r={username:t?t.username:"",email:t?t.email:"",roleId:t?t.roleId:"",phoneNumber:t?t.phoneNumber:"",address:t?t.address:"",zip:t?t.zip:"",cityId:t?t.cityId:"",countryId:t?t.countryId:"",password:""},s=bn().shape({username:ln().required("Username is required"),email:ln().email("Invalid email").required("Email is required"),roleId:ln().required("Role is required"),phoneNumber:ln().required("Phone number is required"),address:ln().required("Address is required"),zip:ln().required("ZIP code is required"),cityId:ln().required("City is required"),countryId:ln().required("Country is required"),password:ln().when([],{is:()=>!t,then:e=>e.required("Password is required"),otherwise:e=>e.notRequired()})});return(0,If.jsx)(xE,{initialValues:r,validationSchema:s,handleSubmit:async(e,r)=>{let{setSubmitting:s}=r;try{if(t&&t._id){const r=await i(oc({id:t._id,user:e}));oc.fulfilled.match(r)?(ot.success("User updated successfully"),n()):oc.rejected.match(r)&&ot.error("Failed to update user")}else{const t=await i(sc(e));sc.fulfilled.match(t)?(ot.success("User created successfully"),n()):sc.rejected.match(t)&&ot.error("Failed to create user")}}catch(o){ot.error("An error occurred")}finally{s(!1)}},title:t?"Update User":"Create User",buttonText:t?"Update":"Create",children:e=>(0,If.jsxs)(If.Fragment,{children:[(0,If.jsx)(Sf,{as:qf,type:"text",label:"Username",name:"username",required:!0}),(0,If.jsx)(Sf,{as:qf,type:"email",label:"Email",name:"email",required:!0}),(0,If.jsx)(Sf,{as:IG,name:"roleId"}),(0,If.jsx)(Sf,{component:OG,phoneNumberField:"phoneNumber",addressField:"address",zipField:"zip",countryField:"countryId",cityField:"cityId"}),!t&&(0,If.jsx)(Sf,{as:qf,type:"password",label:"Password",name:"password",required:!0})]})})},FG=()=>{const e=ne();return(0,If.jsx)(Zx,{title:"Create User",children:(0,If.jsx)(LG,{onSuccess:()=>e("/dashboard/user")})})},BG=()=>{const{id:e}=re(),[t,n]=(0,s.useState)(void 0),{users:i,loading:r,error:o}=GE((e=>e.users)),a=$E(),l=ne();if((0,s.useEffect)((()=>{(async()=>{const t=i.find((t=>t._id===e));if(t)n(t);else{const t=await a(rc(e));rc.fulfilled.match(t)&&n(t.payload.data)}})()}),[e,i,a]),r)return(0,If.jsx)(JE,{});if(o)return(0,If.jsx)(eA,{error:o});if(!t){const e={message:"User not found",name:"NotFoundError",status:404,code:"USER_NOT_FOUND"};return(0,If.jsx)(eA,{error:e})}return(0,If.jsx)(Zx,{title:"Update User",children:(0,If.jsx)(LG,{currentUser:t,onSuccess:()=>l("/dashboard/user")})})},VG=e=>{let{currentWarehouse:t,onSuccess:n}=e;const i=$E(),r={name:t?t.name:"",location:{address:t?t.location.address:"",cityId:t?t.location.cityId:"",countryId:t?t.location.countryId:""},capacity:t?t.capacity:0},s=bn().shape({name:ln().required("Name is required"),location:bn().shape({address:ln().required("Address is required"),cityId:ln().required("City is required"),countryId:ln().required("Country is required")}),capacity:un().required("Capacity is required").min(0,"Capacity must be at least 0")});return(0,If.jsx)(xE,{title:t?"Update Warehouse":"Create Warehouse",buttonText:t?"Update":"Create",handleSubmit:async(e,r)=>{let{setSubmitting:s}=r;try{if(t&&t._id){const r=await i(Gl({...e,_id:t._id}));Gl.fulfilled.match(r)?(ot.success("Warehouse updated successfully"),n()):Gl.rejected.match(r)&&ot.error("Failed to update warehouse")}else{const t=await i(Vl(e));Vl.fulfilled.match(t)?(ot.success("Warehouse created successfully"),n()):Vl.rejected.match(t)&&ot.error("Failed to create warehouse")}}catch(o){ot.error("An error occurred")}finally{s(!1)}},initialValues:r,validationSchema:s,children:e=>(0,If.jsxs)(If.Fragment,{children:[(0,If.jsx)(qf,{type:"text",label:"Name",name:"name",required:!0}),(0,If.jsx)(qf,{type:"number",label:"Capacity",name:"capacity",required:!0}),(0,If.jsx)(qf,{className:"w-full",type:"textarea",label:"Address",name:"location.address",required:!0}),(0,If.jsx)(kG,{countryField:"location.countryId",cityField:"location.cityId"})]})})},GG=()=>{const e=ne();return(0,If.jsx)(Zx,{title:"Create Warehouse",children:(0,If.jsx)(VG,{onSuccess:()=>e("/dashboard/warehouse")})})},HG=()=>{const{id:e}=re(),[t,n]=(0,s.useState)(void 0),{warehouses:i,loading:r,error:o}=GE((e=>e.warehouses)),a=$E(),l=ne();if((0,s.useEffect)((()=>{(async()=>{const t=i.find((t=>t._id===e));if(t)n(t);else{const t=await a(Bl(e));Bl.fulfilled.match(t)&&n(t.payload.data)}})()}),[e,i,a]),r)return(0,If.jsx)(JE,{});if(o)return(0,If.jsx)(eA,{error:o});if(!t){const e={message:"Warehouse not found",name:"NotFoundError",status:404,code:"WAREHOUSE_NOT_FOUND"};return(0,If.jsx)(eA,{error:e})}return(0,If.jsx)(Zx,{title:"Update Warehouse",children:(0,If.jsx)(VG,{currentWarehouse:t,onSuccess:()=>l("/dashboard/warehouse")})})},WG=()=>{const{warehouses:e,loading:t,error:n}=GE((e=>e.warehouses));return(0,If.jsx)(yG,{title:"Warehouses",data:e,loading:t,error:n,fetchAction:Fl,deleteAction:Hl,columns:[{headerName:"Id",field:"_id",sortable:!0,filter:!0},{headerName:"Name",field:"name",sortable:!0,filter:!0},{headerName:"Address",field:"location.address",sortable:!0,filter:!0},{headerName:"City",field:"location.city.name",sortable:!0,filter:!0},{headerName:"Country",field:"location.country.name",sortable:!0,filter:!0},{headerName:"Capacity",field:"capacity",sortable:!0,filter:!0}],createLink:"/dashboard/warehouse/create",updateLink:e=>"/dashboard/warehouse/update/".concat(e),total:e.length})},jG=e=>{let{name:t,className:n}=e;const[i,r]=(0,s.useState)([]),[o,a]=(0,s.useState)(!1),l=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";a(!0);try{const t=await ua.get("/users?role=shipper&page=1&limit=100&query=".concat(e));r(t.data.users)}catch(t){console.error("Failed to fetch users",t)}finally{a(!1)}};(0,s.useEffect)((()=>{l();const e=e=>{e.role&&!0===e.role.isShipper?r((t=>t.find((t=>t._id===e._id))?t.map((t=>t._id===e._id?e:t)):[...t,e])):r((t=>t.filter((t=>t._id!==e._id))))},t=e=>{r((t=>t.filter((t=>t._id!==e))))},n=e=>{l()},i=e=>{l()};return Ju.onMessage(Zu.Updated,e),Ju.onMessage(Zu.Deleted,t),Ju.onMessage(Xu.Updated,n),Ju.onMessage(Xu.Deleted,i),()=>{var r,s,o,a;null===(r=Ju.socket)||void 0===r||r.off(Zu.Updated,e),null===(s=Ju.socket)||void 0===s||s.off(Zu.Deleted,t),null===(o=Ju.socket)||void 0===o||o.off(Xu.Updated,n),null===(a=Ju.socket)||void 0===a||a.off(Xu.Deleted,i)}}),[]);return(0,If.jsx)(qf,{type:"datalist",label:"Shipper",name:t,options:i.map((e=>({value:e._id,name:e.username}))),handleChange:e=>{const{value:t}=e.target;l(t)},isLoading:o,className:n})},UG=e=>{let{name:t,className:n}=e;const[i,r]=(0,s.useState)([]),[o,a]=(0,s.useState)(!1),l=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";a(!0);try{const t=await ua.get("/warehouses?page=1&limit=100&query=".concat(e));r(t.data.warehouses)}catch(t){console.error("Failed to fetch warehouses",t)}finally{a(!1)}};(0,s.useEffect)((()=>{l();const e=e=>{r((t=>t.find((t=>t._id===e._id))?t.map((t=>t._id===e._id?e:t)):[...t,e]))},t=e=>{r((t=>t.filter((t=>t._id!==e))))};return Ju.onMessage(Qu.Updated,e),Ju.onMessage(Qu.Deleted,t),()=>{var n,i;null===(n=Ju.socket)||void 0===n||n.off(Qu.Updated,e),null===(i=Ju.socket)||void 0===i||i.off(Qu.Deleted,t)}}),[]);return(0,If.jsx)(qf,{type:"datalist",label:"Warehouse",name:t,options:i.map((e=>({value:e._id,name:e.name}))),handleChange:e=>{const{value:t}=e.target;l(t)},isLoading:o,className:n})};let zG=function(e){return e.PayBySender="Pay by Sender",e.PayByRecipients="Pay by Recipients",e.CreditTerms="B2B (Credit Terms)",e}({}),YG=function(e){return e.ParcelCreated="Parcel Created",e.InWarehouse="In Warehouse",e.OnVehicle="On Vehicle",e.OutForDelivery="Out for Delivery",e.Delivered="Delivered",e.Completed="Completed",e.Rescheduled="Rescheduled",e.Cancelled="Cancelled",e}({}),qG=function(e){return e.Shipper="Shipper",e.Guest="Guest",e}({}),KG=function(e){return e.Flat="Flat",e.Percentage="Percentage",e}({}),XG=function(e){return e.Flat="Flat",e.Percentage="Percentage",e}({});const QG=e=>{let{name:t,className:n}=e;const i=[{value:zG.PayBySender,name:"Pay by Sender"},{value:zG.PayByRecipients,name:"Pay by Recipients"},{value:zG.CreditTerms,name:"B2B (Credit Terms)"}];return(0,If.jsx)(qf,{type:"select",label:"Payment Type",name:t,required:!0,options:i,className:n})},ZG=e=>{let{name:t,className:n}=e;const i=[{value:qG.Shipper,name:"Shipper"},{value:qG.Guest,name:"Guest"}];return(0,If.jsx)(qf,{type:"select",label:"Sender Type",name:t,required:!0,options:i,className:n})},$G=e=>{let{currentParcel:t,onSuccess:n}=e;const i=$E(),r={sender:{type:(null===t||void 0===t?void 0:t.sender.type)||qG.Shipper,shipper_id:(null===t||void 0===t?void 0:t.sender.shipper_id)||"",guest:(null===t||void 0===t?void 0:t.sender.guest)||{name:"",phoneNumber:"",address:"",countryId:"",cityId:"",zip:""}},receiver:(null===t||void 0===t?void 0:t.receiver)||{name:"",phoneNumber:"",address:"",countryId:"",cityId:"",zip:""},deliveryFees:(null===t||void 0===t?void 0:t.deliveryFees)||0,weight:(null===t||void 0===t?void 0:t.weight)||0,size:(null===t||void 0===t?void 0:t.size)||0,discountValue:(null===t||void 0===t?void 0:t.discountValue)||0,discountType:(null===t||void 0===t?void 0:t.discountType)||KG.Flat,taxValue:(null===t||void 0===t?void 0:t.taxValue)||0,taxType:(null===t||void 0===t?void 0:t.taxType)||XG.Flat,paymentType:(null===t||void 0===t?void 0:t.paymentType)||zG.PayBySender,creditDueDate:null!==t&&void 0!==t&&t.creditDueDate?new Date(t.creditDueDate):void 0,remark:(null===t||void 0===t?void 0:t.remark)||"",initialWarehouseId:""},s=bn().shape({sender:bn().shape({type:ln().required("Required"),shipper_id:ln().when("type",{is:e=>e===qG.Shipper,then:e=>e.required("Required for Shipper"),otherwise:e=>e.notRequired()}),guest:bn().shape({name:ln().when("type",{is:qG.Guest,then:e=>e.required("Guest name is required"),otherwise:e=>e.notRequired()}),phoneNumber:ln().when("type",{is:qG.Guest,then:e=>e.required("Guest phone number is required"),otherwise:e=>e.notRequired()}),address:ln().when("type",{is:qG.Guest,then:e=>e.required("Guest address is required"),otherwise:e=>e.notRequired()}),countryId:ln().when("type",{is:qG.Guest,then:e=>e.required("Guest country is required"),otherwise:e=>e.notRequired()}),cityId:ln().when("type",{is:qG.Guest,then:e=>e.required("Guest city is required"),otherwise:e=>e.notRequired()}),zip:ln().when("type",{is:qG.Guest,then:e=>e.required("Guest ZIP code is required"),otherwise:e=>e.notRequired()})})}),receiver:bn().shape({name:ln().required("Receiver name is required"),phoneNumber:ln().required("Receiver phone number is required"),address:ln().required("Receiver address is required"),countryId:ln().required("Receiver country is required"),cityId:ln().required("Receiver city is required"),zip:ln().required("Receiver ZIP code is required")}),deliveryFees:un().required("Delivery fees is required"),weight:un().required("Weight is required"),size:un().required("Size is required"),discountValue:un().required("Discount value is required"),discountType:ln().required("Discount type is required"),taxValue:un().required("Tax value is required"),taxType:ln().required("Tax type is required"),paymentType:ln().required("Payment type is required"),creditDueDate:pn().when("paymentType",{is:e=>e===zG.CreditTerms,then:e=>e.required("Credit due date is required for Credit Terms"),otherwise:e=>e.notRequired()}),remark:ln(),initialWarehouseId:ln().when([],{is:()=>!t,then:e=>e.required("Initial warehouse is required"),otherwise:e=>e.notRequired()})});return(0,If.jsx)(xE,{initialValues:r,validationSchema:s,handleSubmit:async(e,r)=>{let{setSubmitting:s}=r;try{const{initialWarehouseId:r,...s}=e;if(t&&t._id){const e=await i(ul({...s,_id:t._id}));ul.fulfilled.match(e)?(console.log("Parcel updated successfully",e.payload.data),ot.success("Parcel updated successfully!"),n()):ul.rejected.match(e)&&(console.error("Error updating parcel",e.payload),ot.error("Failed to update parcel!"))}else{const e=await i(cl({parcel:s,initialWarehouseId:r}));cl.fulfilled.match(e)?(ot.success("Parcel created successfully!"),n()):cl.rejected.match(e)&&ot.error("Failed to create parcel!")}}catch(o){ot.error("Failed to save parcel!")}finally{s(!1)}},title:t?"Update Parcel":"Create Parcel",buttonText:t?"Update Parcel":"Create Parcel",debug:!1,children:e=>(0,If.jsxs)(If.Fragment,{children:[(0,If.jsxs)("div",{className:"w-full flex flex-wrap border shadow-md my-2 rounded p-2",children:[!t&&(0,If.jsx)(Sf,{name:"initialWarehouseId",as:UG,className:"w-full md:w-1/2"}),(0,If.jsx)(Sf,{name:"sender.type",as:ZG,className:"w-full md:w-1/2"})]}),(0,If.jsx)("div",{className:"w-full flex flex-wrap border shadow-md my-2 rounded p-2",children:e.values.sender.type===qG.Shipper?(0,If.jsx)(Sf,{name:"sender.shipper_id",as:jG,className:"w-full"}):(0,If.jsxs)(If.Fragment,{children:[(0,If.jsx)(Sf,{as:qf,type:"text",label:"Guest Name",name:"sender.guest.name",required:!0,className:"w-full md:w-1/2"}),(0,If.jsx)(Sf,{component:OG,phoneNumberField:"sender.guest.phoneNumber",addressField:"sender.guest.address",countryField:"sender.guest.countryId",cityField:"sender.guest.cityId",zipField:"sender.guest.zip"})]})}),(0,If.jsxs)("div",{className:"w-full flex flex-wrap border shadow-md my-2 rounded p-2",children:[(0,If.jsx)(Sf,{as:qf,type:"text",label:"Receiver Name",name:"receiver.name",required:!0,className:"w-full md:w-1/3"}),(0,If.jsx)(Sf,{component:OG,phoneNumberField:"receiver.phoneNumber",addressField:"receiver.address",zipField:"receiver.zip",countryField:"receiver.countryId",cityField:"receiver.cityId"})]}),(0,If.jsxs)("div",{className:"w-full flex flex-wrap border shadow-md my-2 rounded p-2",children:[(0,If.jsx)(Sf,{as:qf,type:"number",label:"Weight",name:"weight",className:"w-full md:w-1/5",required:!0}),(0,If.jsx)(Sf,{as:qf,type:"number",label:"Size",name:"size",className:"w-full md:w-1/5",required:!0}),(0,If.jsx)(Sf,{as:qf,type:"number",label:"Delivery Fees",name:"deliveryFees",className:"w-full md:w-1/5",required:!0}),(0,If.jsx)(Sf,{name:"paymentType",className:"w-full md:w-1/5",as:QG}),e.values.paymentType===zG.CreditTerms&&(0,If.jsx)(Sf,{as:qf,type:"date",className:"w-full md:w-1/5",label:"Credit Due Date",name:"creditDueDate",required:!0}),(0,If.jsxs)("div",{className:"w-full flex flex-wrap",children:[(0,If.jsx)(Sf,{as:qf,type:"number",label:"Discount Value",name:"discountValue",className:"w-full md:w-1/2",required:!0}),(0,If.jsx)(Sf,{as:qf,type:"select",label:"Discount Type",name:"discountType",className:"w-full md:w-1/2",options:[{value:KG.Flat,name:"Flat"},{value:KG.Percentage,name:"Percentage"}]})]}),(0,If.jsxs)("div",{className:"w-full flex flex-wrap",children:[(0,If.jsx)(Sf,{as:qf,type:"number",label:"Tax Value",name:"taxValue",className:"w-full md:w-1/2",required:!0}),(0,If.jsx)(Sf,{as:qf,type:"select",label:"Tax Type",name:"taxType",className:"w-full md:w-1/2",options:[{value:XG.Flat,name:"Flat"},{value:XG.Percentage,name:"Percentage"}]})]}),(0,If.jsx)(Sf,{as:qf,type:"textarea",label:"Remark",name:"remark",className:"w-full"})]})]})})},JG=()=>{const e=ne();return(0,If.jsx)(Zx,{title:"Create Parcel",children:(0,If.jsx)($G,{onSuccess:()=>e("/dashboard/parcel")})})},eH=()=>{const{id:e}=re(),[t,n]=(0,s.useState)(void 0),{parcels:i,loading:r,error:o}=GE((e=>e.parcels)),a=$E(),l=ne();if((0,s.useEffect)((()=>{(async()=>{const t=i.find((t=>t._id===e));if(t)n(t);else{const t=await a(al(e));al.fulfilled.match(t)&&n(t.payload.data)}})()}),[e,i,a]),r)return(0,If.jsx)(JE,{});if(o)return(0,If.jsx)(eA,{error:o});if(!t){const e={message:"Parcel not found",name:"NotFoundError",status:404,code:"PARCEL_NOT_FOUND"};return(0,If.jsx)(eA,{error:e})}return(0,If.jsx)(Zx,{title:"Update Parcel",children:(0,If.jsx)($G,{currentParcel:t,onSuccess:()=>l("/dashboard/parcel")})})},tH=()=>{const{parcels:e,loading:t,error:n,total:i}=GE((e=>e.parcels)),r=[{headerName:"Id",field:"_id",sortable:!0,filter:!0},{headerName:"Parcel ID",field:"parcelId",sortable:!0,filter:!0},{headerName:"Sender",field:"sender",sortable:!0,filter:!0,cellRenderer:e=>{const{sender:t}=e.data;var n,i,r,s;return t.type===qG.Shipper?t.shipper?"".concat(t.shipper.username,", ").concat(null===(n=t.shipper.city)||void 0===n?void 0:n.name,", ").concat(null===(i=t.shipper.country)||void 0===i?void 0:i.name):"Unknown Shipper":t.type===qG.Guest?t.guest?"".concat(t.guest.name,", ").concat(null===(r=t.guest.city)||void 0===r?void 0:r.name,", ").concat(null===(s=t.guest.country)||void 0===s?void 0:s.name):"Unknown Guest":"Unknown Sender"}},{headerName:"Receiver",field:"receiver.name",sortable:!0,filter:!0,cellRenderer:e=>{var t,n;const{receiver:i}=e.data;return i?"".concat(i.name,", ").concat(null===(t=i.city)||void 0===t?void 0:t.name,", ").concat(null===(n=i.country)||void 0===n?void 0:n.name):"Unknown Receiver"}},{headerName:"Delivery Fees",field:"deliveryFees",sortable:!0,filter:!0},{headerName:"Payment Status",field:"paymentStatus",sortable:!0,filter:!0},{headerName:"Subtotal",field:"subTotal",sortable:!0,filter:!0},{headerName:"Total Fee",field:"totalFee",sortable:!0,filter:!0},{headerName:"Status",field:"status",sortable:!0,filter:!0,cellRenderer:e=>{const{trackingHistory:t}=e.data,n=null===t||void 0===t?void 0:t[t.length-1];if(n&&n.status===YG.InWarehouse){var i;const e=(null===(i=n.warehouse)||void 0===i?void 0:i.name)||"Unknown Warehouse";return"In ".concat(e)}return n?n.status:"No Status"}}];return(0,If.jsx)(yG,{title:"Parcels",data:e,loading:t,error:n,fetchAction:ol,deleteAction:dl,columns:r,createLink:"/dashboard/parcel/create",updateLink:e=>"/dashboard/parcel/update/".concat(e),viewLink:e=>"/dashboard/parcel/".concat(e),total:i})};var nH;!function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(nH||(nH={}));var iH,rH,sH=new Map([[nH.QR_CODE,"QR_CODE"],[nH.AZTEC,"AZTEC"],[nH.CODABAR,"CODABAR"],[nH.CODE_39,"CODE_39"],[nH.CODE_93,"CODE_93"],[nH.CODE_128,"CODE_128"],[nH.DATA_MATRIX,"DATA_MATRIX"],[nH.MAXICODE,"MAXICODE"],[nH.ITF,"ITF"],[nH.EAN_13,"EAN_13"],[nH.EAN_8,"EAN_8"],[nH.PDF_417,"PDF_417"],[nH.RSS_14,"RSS_14"],[nH.RSS_EXPANDED,"RSS_EXPANDED"],[nH.UPC_A,"UPC_A"],[nH.UPC_E,"UPC_E"],[nH.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function oH(e){return Object.values(nH).includes(e)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"}(iH||(iH={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(rH||(rH={}));var aH,lH=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[rH.SCAN_TYPE_CAMERA,rH.SCAN_TYPE_FILE],e}(),cH=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!sH.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,sH.get(t))},e}(),uH=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(aH||(aH={}));var dH=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:aH.UNKWOWN_ERROR}},e}(),hH=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function pH(e){return"undefined"===typeof e||null===e}var gH,fH=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),mH=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),vH=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),yH=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var i=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),r=0,s=Object.keys(e);r<s.length;r++){var o=s[r];if(i.has(o))return t.logError("".concat(o," is not supported videoConstaints."),!0),!1}return!0},e}(),CH=n(3407),wH=function(){function e(e,t,n){if(this.formatMap=new Map([[nH.QR_CODE,CH.BarcodeFormat.QR_CODE],[nH.AZTEC,CH.BarcodeFormat.AZTEC],[nH.CODABAR,CH.BarcodeFormat.CODABAR],[nH.CODE_39,CH.BarcodeFormat.CODE_39],[nH.CODE_93,CH.BarcodeFormat.CODE_93],[nH.CODE_128,CH.BarcodeFormat.CODE_128],[nH.DATA_MATRIX,CH.BarcodeFormat.DATA_MATRIX],[nH.MAXICODE,CH.BarcodeFormat.MAXICODE],[nH.ITF,CH.BarcodeFormat.ITF],[nH.EAN_13,CH.BarcodeFormat.EAN_13],[nH.EAN_8,CH.BarcodeFormat.EAN_8],[nH.PDF_417,CH.BarcodeFormat.PDF_417],[nH.RSS_14,CH.BarcodeFormat.RSS_14],[nH.RSS_EXPANDED,CH.BarcodeFormat.RSS_EXPANDED],[nH.UPC_A,CH.BarcodeFormat.UPC_A],[nH.UPC_E,CH.BarcodeFormat.UPC_E],[nH.UPC_EAN_EXTENSION,CH.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!CH)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var i=this.createZXingFormats(e),r=new Map;r.set(CH.DecodeHintType.POSSIBLE_FORMATS,i),r.set(CH.DecodeHintType.TRY_HARDER,!1),this.hints=r}return e.prototype.decodeAsync=function(e){var t=this;return new Promise((function(n,i){try{n(t.decode(e))}catch(r){i(r)}}))},e.prototype.decode=function(e){var t=new CH.MultiFormatReader(this.verbose,this.hints),n=new CH.HTMLCanvasElementLuminanceSource(e),i=new CH.BinaryBitmap(new CH.HybridBinarizer(n)),r=t.decode(i);return{text:r.text,format:cH.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach((function(t,n,i){e.set(t,n)})),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var r=i[n];this.formatMap.has(r)?t.push(this.formatMap.get(r)):this.logger.logError("".concat(r," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),bH=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(rre){s(rre)}}function a(e){try{l(i.throw(e))}catch(rre){s(rre)}}function l(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}l((i=i.apply(e,t||[])).next())}))},SH=function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(rre){a=[6,rre],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},EH=function(){function e(t,n,i){if(this.formatMap=new Map([[nH.QR_CODE,"qr_code"],[nH.AZTEC,"aztec"],[nH.CODABAR,"codabar"],[nH.CODE_39,"code_39"],[nH.CODE_93,"code_93"],[nH.CODE_128,"code_128"],[nH.DATA_MATRIX,"data_matrix"],[nH.ITF,"itf"],[nH.EAN_13,"ean_13"],[nH.EAN_8,"ean_8"],[nH.PDF_417,"pdf417"],[nH.UPC_A,"upc_a"],[nH.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var r=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(r),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&"undefined"!==typeof new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(e){return bH(this,void 0,void 0,(function(){var t,n;return SH(this,(function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=i.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(n=this.selectLargestBarcode(t)).rawValue,format:cH.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}}))}))},e.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,i=0,r=e;i<r.length;i++){var s=r[i],o=s.boundingBox.width*s.boundingBox.height;o>n&&(n=o,t=s)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var r=i[n];this.formatMap.has(r)?t.push(this.formatMap.get(r)):this.logger.warn("".concat(r," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach((function(t,n,i){e.set(t,n)})),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),xH=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(rre){s(rre)}}function a(e){try{l(i.throw(e))}catch(rre){s(rre)}}function l(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}l((i=i.apply(e,t||[])).next())}))},AH=function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(rre){a=[6,rre],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},TH=function(){function e(e,t,n,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&EH.isSupported()?(this.primaryDecoder=new EH(e,n,i),this.secondaryDecoder=new wH(e,n,i)):this.primaryDecoder=new wH(e,n,i)}return e.prototype.decodeAsync=function(e){return xH(this,void 0,void 0,(function(){var t;return AH(this,(function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}}))}))},e.prototype.decodeRobustlyAsync=function(e){return xH(this,void 0,void 0,(function(){var t,n;return AH(this,(function(i){switch(i.label){case 0:t=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(n=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}}))}))},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){e+=n[t]}var i=e/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),_H=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),RH=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(rre){s(rre)}}function a(e){try{l(i.throw(e))}catch(rre){s(rre)}}function l(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}l((i=i.apply(e,t||[])).next())}))},DH=function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(rre){a=[6,rre],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},MH=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),PH=function(e){function t(t,n){return e.call(this,t,n)||this}return _H(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(MH),IH=function(e){function t(t){return e.call(this,"zoom",t)||this}return _H(t,e),t}(PH),NH=function(e){function t(t){return e.call(this,"torch",t)||this}return _H(t,e),t}(MH),kH=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new IH(this.track)},e.prototype.torchFeature=function(){return new NH(this.track)},e}(),OH=function(){function e(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,i),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,i,r){return RH(this,void 0,void 0,(function(){var s,o;return DH(this,(function(a){switch(a.label){case 0:return s=new e(t,n,r),i.aspectRatio?(o={aspectRatio:i.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:a.sent(),a.label=2;case 2:return s.setupSurface(),[2,s]}}))}))},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return RH(this,void 0,void 0,(function(){return DH(this,(function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]}))}))},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise((function(t,n){var i=e.mediaStream.getVideoTracks().length,r=0;e.mediaStream.getVideoTracks().forEach((function(n){e.mediaStream.removeTrack(n),n.stop(),++r>=i&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())}))}))},e.prototype.getCapabilities=function(){return new kH(this.getFirstTrackOrFail())},e}(),LH=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,n){return RH(this,void 0,void 0,(function(){return DH(this,(function(i){return[2,OH.create(e,this.mediaStream,t,n)]}))}))},e.create=function(t){return RH(this,void 0,void 0,(function(){var n;return DH(this,(function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return[2,new e(i.sent())]}}))}))},e}(),FH=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(rre){s(rre)}}function a(e){try{l(i.throw(e))}catch(rre){s(rre)}}function l(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}l((i=i.apply(e,t||[])).next())}))},BH=function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(rre){a=[6,rre],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},VH=function(){function e(){}return e.failIfNotSupported=function(){return FH(this,void 0,void 0,(function(){return BH(this,(function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]}))}))},e.prototype.create=function(e){return FH(this,void 0,void 0,(function(){return BH(this,(function(t){return[2,LH.create(e)]}))}))},e}(),GH=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(rre){s(rre)}}function a(e){try{l(i.throw(e))}catch(rre){s(rre)}}function l(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}l((i=i.apply(e,t||[])).next())}))},HH=function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(rre){a=[6,rre],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},WH=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=fH.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=fH.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return GH(this,void 0,void 0,(function(){var e,t,n,i,r,s,o;return HH(this,(function(a){switch(a.label){case 0:return e=function(e){for(var t=0,n=e.getVideoTracks();t<n.length;t++){var i=n[t];i.enabled=!1,i.stop(),e.removeTrack(i)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=a.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=a.sent(),i=[],r=0,s=n;r<s.length;r++)"videoinput"===(o=s[r]).kind&&i.push({id:o.deviceId,label:o.label});return e(t),[2,i]}}))}))},e.getCamerasFromMediaStreamTrack=function(){return new Promise((function(e,t){MediaStreamTrack.getSources((function(t){for(var n=[],i=0,r=t;i<r.length;i++){var s=r[i];"video"===s.kind&&n.push({id:s.id,label:s.label})}e(n)}))}))},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(gH||(gH={}));var jH,UH=function(){function e(){this.state=gH.NOT_STARTED,this.onGoingTransactionNewState=gH.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===gH.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=gH.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===gH.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=gH.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==gH.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case gH.UNKNOWN:throw"Transition from unknown is not allowed";case gH.NOT_STARTED:this.failIfNewStateIs(e,[gH.PAUSED]);case gH.SCANNING:case gH.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var n=0,i=t;n<i.length;n++){if(e===i[n])throw"Cannot transition from ".concat(this.state," to ").concat(e)}},e}(),zH=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===gH.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==gH.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===gH.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===gH.PAUSED},e}(),YH=function(){function e(){}return e.create=function(){return new zH(new UH)},e}(),qH=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),KH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qH(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(lH),XH=function(){function e(e,t){this.logger=t,this.fps=KH.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=KH.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?yH.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!pH(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),QH=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");var n;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(n=t,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new hH(this.verbose),this.qrcode=new TH(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=YH.create()}return e.prototype.start=function(e,t,n,i){var r,s=this;if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";r=i||(this.verbose?this.logger.log:function(){});var o=XH.create(t,this.logger);this.clearElement();var a=!1;o.videoConstraints&&(o.isMediaStreamConstraintsValid()?a=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=a,c=document.getElementById(this.elementId);c.clientWidth?c.clientWidth:KH.DEFAULT_WIDTH;c.style.position="relative",this.shouldScan=!0,this.element=c;var u=this,d=this.stateManagerProxy.startTransition(gH.SCANNING);return new Promise((function(t,i){var a=l?o.videoConstraints:u.createVideoConstraints(e);if(!a)return d.cancel(),void i("videoConstraints should be defined");var c={};l&&!o.aspectRatio||(c.aspectRatio=o.aspectRatio);var h={onRenderSurfaceReady:function(e,t){u.setupUi(e,t,o),u.isScanning=!0,u.foreverScan(o,n,r)}};VH.failIfNotSupported().then((function(e){e.create(a).then((function(e){return e.render(s.element,c,h).then((function(e){u.renderedCamera=e,d.execute(),t(null)})).catch((function(e){d.cancel(),i(e)}))})).catch((function(e){d.cancel(),i(fH.errorGettingUserMedia(e))}))})).catch((function(e){d.cancel(),i(fH.cameraStreamingNotSupported())}))}))},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(gH.PAUSED),this.showPausedState(),(pH(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(gH.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume((function(){t()})):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(gH.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=this;return this.renderedCamera.close().then((function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),function(){if(e.element){var t=document.getElementById(KH.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}}(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()}))},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then((function(e){return e.decodedText}))},e.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(pH(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise((function(i,r){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var s=new Image;s.onload=function(){var e=s.width,o=s.height,a=document.getElementById(n.elementId),l=a.clientWidth?a.clientWidth:KH.DEFAULT_WIDTH,c=Math.max(a.clientHeight?a.clientHeight:o,KH.FILE_SCAN_MIN_HEIGHT),u=n.computeCanvasDrawConfig(e,o,l,c);if(t){var d=n.createCanvasElement(l,c,"qr-canvas-visible");d.style.display="inline-block",a.appendChild(d);var h=d.getContext("2d");if(!h)throw"Unable to get 2d context from canvas";h.canvas.width=l,h.canvas.height=c,h.drawImage(s,0,0,e,o,u.x,u.y,u.width,u.height)}var p=KH.FILE_SCAN_HIDDEN_CANVAS_PADDING,g=Math.max(s.width,u.width),f=Math.max(s.height,u.height),m=g+2*p,v=f+2*p,y=n.createCanvasElement(m,v);a.appendChild(y);var C=y.getContext("2d");if(!C)throw"Unable to get 2d context from canvas";C.canvas.width=m,C.canvas.height=v,C.drawImage(s,0,0,e,o,p,p,g,f);try{n.qrcode.decodeRobustlyAsync(y).then((function(e){i(uH.createFromQrcodeResult(e))})).catch(r)}catch(w){r("QR code parse error, error = ".concat(w))}},s.onerror=r,s.onabort=r,s.onstalled=r,s.onsuspend=r,s.src=URL.createObjectURL(e)}))},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return WH.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!yH.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[nH.QR_CODE,nH.AZTEC,nH.CODABAR,nH.CODE_39,nH.CODE_93,nH.CODE_128,nH.DATA_MATRIX,nH.MAXICODE,nH.ITF,nH.EAN_13,nH.EAN_8,nH.PDF_417,nH.RSS_14,nH.RSS_EXPANDED,nH.UPC_A,nH.UPC_E,nH.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],i=0,r=e.formatsToSupport;i<r.length;i++){var s=r[i];oH(s)?n.push(s):this.logger.warn("Invalid format: ".concat(s," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(pH(e))return!0;if(!pH(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(pH(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!pH(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,n){var i=this,r=n.qrbox;this.validateQrboxConfig(r);var s,o=this.toQrdimensions(e,t,r),a=function(e){if(e<KH.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(KH.MIN_QR_BOX_SIZE,"px.")};a(o.width),a(o.height),o.width=((s=o.width)>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),s=e),s)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(e,t)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return n},e.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var i=pH(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(i);var r=this.toQrdimensions(e,t,i);r.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var s=n.isShadedBoxEnabled()&&r.height<=t,o={x:0,y:0,width:e,height:t},a=s?this.getShadedRegionBounds(e,t,r):o,l=this.createCanvasElement(a.width,a.height),c=l.getContext("2d",{willReadFrequently:!0});c.canvas.width=a.width,c.canvas.height=a.height,this.element.append(l),s&&this.possiblyInsertShadingElement(this.element,e,t,r),this.createScannerPausedUiElement(this.element),this.qrRegion=a,this.context=c,this.canvasElement=l},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=fH.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then((function(t){return e(t.text,uH.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0})).catch((function(e){n.possiblyUpdateShaders(!1);var i=fH.codeParseError(e);return t(i,dH.createFrom(i)),!1}))},e.prototype.foreverScan=function(e,t,n){var i=this;if(this.shouldScan&&this.renderedCamera){var r=this.renderedCamera.getSurface(),s=r.videoWidth/r.clientWidth,o=r.videoHeight/r.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var a=this.qrRegion.width*s,l=this.qrRegion.height*o,c=this.qrRegion.x*s,u=this.qrRegion.y*o;this.context.drawImage(r,c,u,a,l,0,0,this.qrRegion.width,this.qrRegion.height);var d=function(){i.foreverScanTimeout=setTimeout((function(){i.foreverScan(e,t,n)}),i.getTimeoutFps(e.fps))};this.scanContext(t,n).then((function(r){r||!0===e.disableFlip?d():(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(t,n).finally((function(){d()})))})).catch((function(e){i.logger.logError("Error happend while scanning context",e),d()}))}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",i={user:!0,environment:!0},r="exact",s=function(e){if(e in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},o=Object.keys(e);if(1!==o.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(o.length," keys");var a=Object.keys(e)[0];if(a!==t&&a!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(a!==t){var l=e.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(r in l)return{deviceId:{exact:l["".concat(r)]}};throw"'deviceId' should be string or object with"+" ".concat(r," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof l)}var c=e.facingMode;if("string"==typeof c){if(s(c))return{facingMode:c}}else{if("object"!=typeof c)throw"Invalid type of 'facingMode' = ".concat(typeof c);if(!(r in c))throw"'facingMode' should be string or object with"+" ".concat(r," as key.");if(s(c["".concat(r)]))return{facingMode:{exact:c["".concat(r)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof e)},e.prototype.computeCanvasDrawConfig=function(e,t,n,i){if(e<=n&&t<=i)return{x:(n-e)/2,y:(i-t)/2,width:e,height:t};var r=e,s=t;return e>n&&(t*=n/e,e=n),t>i&&(e*=i/t,t=i),this.logger.log("Image downsampled from "+"".concat(r,"X").concat(s)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,n,i)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach((function(t){t.style.backgroundColor=e?KH.BORDER_SHADER_MATCH_COLOR:KH.BORDER_SHADER_DEFAULT_COLOR})),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,n){var i=e,r=t,s=document.createElement("canvas");return s.style.width="".concat(i,"px"),s.style.height="".concat(r,"px"),s.style.display="none",s.id=pH(n)?"qr-canvas":n,s},e.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(e,t,n,i){if(!(t-i.width<1||n-i.height<1)){var r=document.createElement("div");r.style.position="absolute";var s=(t-i.width)/2,o=(n-i.height)/2;if(r.style.borderLeft="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),r.style.borderRight="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),r.style.borderTop="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),r.style.borderBottom="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),r.style.boxSizing="border-box",r.style.top="0px",r.style.bottom="0px",r.style.left="0px",r.style.right="0px",r.id="".concat(KH.SHADED_REGION_ELEMENT_ID),t-i.width<11||n-i.height<11)this.hasBorderShaders=!1;else{var a=40;this.insertShaderBorders(r,a,5,-5,null,0,!0),this.insertShaderBorders(r,a,5,-5,null,0,!1),this.insertShaderBorders(r,a,5,null,-5,0,!0),this.insertShaderBorders(r,a,5,null,-5,0,!1),this.insertShaderBorders(r,5,45,-5,null,-5,!0),this.insertShaderBorders(r,5,45,null,-5,-5,!0),this.insertShaderBorders(r,5,45,-5,null,-5,!1),this.insertShaderBorders(r,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}e.append(r)}},e.prototype.insertShaderBorders=function(e,t,n,i,r,s,o){var a=document.createElement("div");a.style.position="absolute",a.style.backgroundColor=KH.BORDER_SHADER_DEFAULT_COLOR,a.style.width="".concat(t,"px"),a.style.height="".concat(n,"px"),null!==i&&(a.style.top="".concat(i,"px")),null!==r&&(a.style.bottom="".concat(r,"px")),o?a.style.left="".concat(s,"px"):a.style.right="".concat(s,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(a),e.appendChild(a)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),ZH="data:image/svg+xml;base64,",$H=ZH+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",JH=ZH+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",eW=ZH+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",tW=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),nW=function(){function e(){this.data=tW.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=tW.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),iW=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=vH.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(i);var r=document.createElement("a");r.innerText=vH.reportIssues(),r.href="https://github.com/mebjas/html5-qrcode/issues",r.target="new",r.style.color="white",this.infoDiv.appendChild(r),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),rW=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=eW,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=eW,this.infoIcon.style.opacity="0.6")},e}(),sW=function(){function e(){var e=this;this.infoDiv=new iW,this.infoIcon=new rW((function(){e.infoDiv.show()}),(function(){e.infoDiv.hide()}))}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),oW=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(rre){s(rre)}}function a(e){try{l(i.throw(e))}catch(rre){s(rre)}}function l(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}l((i=i.apply(e,t||[])).next())}))},aW=function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(rre){a=[6,rre],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},lW=function(){function e(){}return e.hasPermissions=function(){return oW(this,void 0,void 0,(function(){var e,t,n,i;return aW(this,(function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=r.sent(),t=0,n=e;t<n.length;t++)if("videoinput"===(i=n[t]).kind&&i.label)return[2,!0];return[2,!1]}}))}))},e}(),cW=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var i=n[t];if(e.isCameraScanType(i))return!0}return!1},e.isCameraScanType=function(e){return e===rH.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===rH.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return lH.DEFAULT_SUPPORTED_SCAN_TYPE;var t=lH.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var n=0,i=e;n<i.length;n++){var r=i[n];if(!lH.DEFAULT_SUPPORTED_SCAN_TYPE.includes(r))throw"Unsupported scan type ".concat(r)}return e},e}(),uW=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),dW=function(){function e(){}return e.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(uW.ALL_ELEMENT_CLASS),"button"===e&&n.setAttribute("type","button"),n},e}(),hW=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(rre){s(rre)}}function a(e){try{l(i.throw(e))}catch(rre){s(rre)}}function l(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}l((i=i.apply(e,t||[])).next())}))},pW=function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(rre){a=[6,rre],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},gW=function(){function e(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return hW(this,void 0,void 0,(function(){var e,t;return pW(this,(function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}}))}))},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?mH.torchOffButton():mH.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var n=e?mH.torchOnFailedMessage():mH.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),fW=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=dW.createElement("button",uW.TORCH_BUTTON_ID),this.torchController=new gW(e,this,t)}return e.prototype.render=function(e,t){var n=this;this.torchButton.innerText=mH.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var i=this;this.torchButton.addEventListener("click",(function(e){return hW(n,void 0,void 0,(function(){return pW(this,(function(e){switch(e.label){case 0:return[4,i.torchController.flipState()];case 1:return e.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(uW.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(uW.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(uW.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(uW.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}}))}))})),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new gW(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=mH.torchOnButton(),this.torchController.reset()},e.create=function(t,n,i,r){var s=new e(n,r);return s.render(t,i),s},e}(),mW=function(){function e(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=dW.createElement("button",uW.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",(function(e){i.click()})),i.append(this.fileSelectionButton),this.fileScanInput=dW.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var r=this;this.fileScanInput.addEventListener("change",(function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var i=t.files[0],s=i.name;r.setImageNameToButton(s),n(i)}}}));var s=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(s),this.fileBasedScanRegion.addEventListener("dragenter",(function(e){r.fileBasedScanRegion.style.border=r.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragleave",(function(e){r.fileBasedScanRegion.style.border=r.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragover",(function(e){r.fileBasedScanRegion.style.border=r.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault(),r.fileBasedScanRegion.style.border=r.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var i=t.files;if(!i||0===i.length)return;for(var o=!1,a=0;a<i.length;++a){var l=i.item(a);if(l){if(l.type.match(/image.*/)){o=!0;var c=l.name;r.setImageNameToButton(c),n(l),s.innerText=mH.dragAndDropMessage();break}}}o||(s.innerText=mH.dragAndDropMessageOnlyImages())}}))}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=mH.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),n=e.length,i=e.substring(n-8,n);e="".concat(t,"....").concat(i)}var r=mH.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=r},e.prototype.setInitialValueToButton=function(){var e=mH.fileSelectionChooseImage()+" - "+mH.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,i){return new e(t,n,i)},e}(),vW=function(){function e(e){this.selectElement=dW.createElement("select",uW.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw new Error("No cameras found");if(1===n)t.style.display="none";else{var i=mH.selectCamera();t.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var r=1,s=0,o=this.cameras;s<o.length;s++){var a=o[s],l=a.id,c=null==a.label?l:a.label;c&&""!==c||(c=[mH.anonymousCameraPrefix(),r++].join(" "));var u=document.createElement("option");u.value=l,u.innerText=c,this.options.push(u),this.selectElement.appendChild(u)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++){if(n[t].value===e)return!0}return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var i=new e(n);return i.render(t),i},e}(),yW=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=dW.createElement("input",uW.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=mH.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",(function(){return i.onValueChange()})),this.rangeInput.addEventListener("change",(function(){return i.onValueChange()})),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=mH.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,n,i){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var i=new e;return i.render(t,n),i},e}();!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(jH||(jH={}));var CW=function(){function e(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new cW(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new hH(this.verbose),this.persistedDataManager=new nW,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}return e.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,i){if(e)e(t,i);else{if(n.lastMatchFound===t)return;n.lastMatchFound=t,n.setHeaderMessage(mH.lastMatch(t),jH.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var i,r,s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id=".concat(this.elementId," not found");s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new QH(this.getScanRegionId(),(i=this.config,r=this.verbose,{formatsToSupport:i.formatsToSupport,useBarCodeDetectorIfSupported:i.useBarCodeDetectorIfSupported,experimentalFeatures:i.experimentalFeatures,verbose:r}))},e.prototype.pause=function(e){(pH(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise((function(n,i){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then((function(i){e.html5Qrcode?(e.html5Qrcode.clear(),t(),n()):n()})).catch((function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),i(t)})):(e.html5Qrcode.clear(),t(),n()):n()})):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=lH.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!lH.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=lH.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=lH.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:lH.SCAN_DEFAULT_FPS,rememberLastUsedCamera:lH.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:lH.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),cW.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),r=this.getDashboardId();i.id=r,i.style.width="100%",e.appendChild(i),this.setupInitialDashboard(i)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),(new sW).renderInto(t);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",t.appendChild(n)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,n){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(mH.cameraPermissionRequesting());var r=function(){n||i.createPermissionButton(e,t)};QH.getCameras().then((function(n){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),i.renderCameraSelection(n)):(i.setHeaderMessage(mH.noCameraFound(),jH.STATUS_WARNING),r())})).catch((function(e){i.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:r(),i.setHeaderMessage(e,jH.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)}))},e.prototype.createPermissionButton=function(e,t){var n=this,i=dW.createElement("button",this.getCameraPermissionButtonId());i.innerText=mH.cameraPermissionTitle(),i.addEventListener("click",(function(){i.disabled=!0,n.createCameraListUi(e,t,i)})),t.appendChild(i)},e.prototype.createPermissionsUi=function(e,t){var n=this;cW.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?lW.hasPermissions().then((function(i){i?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))})).catch((function(i){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)})):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=cW.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var i=document.createElement("div");i.style.textAlign="center",n.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,i),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=cW.isFileScanType(this.currentScanType),n=this;this.fileSelectionUi=mW.create(e,t,(function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";cW.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(mH.loadingImage()),n.html5Qrcode.scanFileV2(e,!0).then((function(e){n.resetHeaderMessage(),n.qrCodeSuccessCallback(e.decodedText,e)})).catch((function(e){n.setHeaderMessage(e,jH.STATUS_WARNING),n.qrCodeErrorCallback(e,dH.createFrom(e))})))}))},e.prototype.renderCameraSelection=function(e){var t=this,n=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var r=yW.create(i,!1),s=vW.create(i,e),o=document.createElement("span"),a=dW.createElement("button",uW.CAMERA_START_BUTTON_ID);a.innerText=mH.scanButtonStartScanningText(),o.appendChild(a);var l,c=dW.createElement("button",uW.CAMERA_STOP_BUTTON_ID);c.innerText=mH.scanButtonStopScanningText(),c.style.display="none",c.disabled=!0,o.appendChild(c);i.appendChild(o);var u=function(e){e||(a.style.display="none"),a.innerText=mH.scanButtonStartScanningText(),a.style.opacity="1",a.disabled=!1,e&&(a.style.display="inline-block")};if(a.addEventListener("click",(function(e){a.innerText=mH.scanButtonScanningStarting(),s.disable(),a.disabled=!0,a.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var i,d=s.getValue();n.persistedDataManager.setLastUsedCameraId(d),n.html5Qrcode.start(d,(i=n.config,{fps:i.fps,qrbox:i.qrbox,aspectRatio:i.aspectRatio,disableFlip:i.disableFlip,videoConstraints:i.videoConstraints}),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then((function(e){c.disabled=!1,c.style.display="inline-block",u(!1);var i=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===t.config.showTorchButtonIfSupported&&function(e){e.torchFeature().isSupported()?(l?l.updateTorchCapability(e.torchFeature()):l=fW.create(o,e.torchFeature(),{display:"none",marginLeft:"5px"},(function(e){n.setHeaderMessage(e,jH.STATUS_WARNING)})),l.show()):l&&l.hide()}(i),!0===t.config.showZoomSliderIfSupported&&function(e){var n=e.zoomFeature();if(n.isSupported()){r.setOnCameraZoomValueChangeCallback((function(e){n.apply(e)}));var i=1;t.config.defaultZoomValueIfSupported&&(i=t.config.defaultZoomValueIfSupported),i=function(e,t,n){return e>n?n:e<t?t:e}(i,n.min(),n.max()),r.setValues(n.min(),n.max(),i,n.step()),r.show()}}(i)})).catch((function(e){n.showHideScanTypeSwapLink(!0),s.enable(),u(!0),n.setHeaderMessage(e,jH.STATUS_WARNING)}))})),s.hasSingleItem()&&a.click(),c.addEventListener("click",(function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";c.disabled=!0,n.html5Qrcode.stop().then((function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),s.enable(),a.disabled=!1,c.style.display="none",a.style.display="inline-block",l&&(l.reset(),l.hide()),r.removeOnCameraZoomValueChangeCallback(),r.hide(),n.insertCameraScanImageToScanRegion()})).catch((function(e){c.disabled=!1,n.setHeaderMessage(e,jH.STATUS_WARNING)}))})),n.persistedDataManager.getLastUsedCameraId()){var d=n.persistedDataManager.getLastUsedCameraId();s.hasValue(d)?(s.setValue(d),a.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=mH.textIfCameraScanSelected(),n=mH.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");r.style.textAlign="center";var s=dW.createElement("span",this.getDashboardSectionSwapLinkId());s.style.textDecoration="underline",s.style.cursor="pointer",s.innerText=cW.isCameraScanType(this.currentScanType)?t:n,s.addEventListener("click",(function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,cW.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),s.innerText=n,e.currentScanType=rH.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),s.innerText=t,e.currentScanType=rH.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")})),r.appendChild(s),i.appendChild(r)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&lW.hasPermissions().then((function(n){if(n){var i=document.getElementById(t.getCameraPermissionButtonId());if(!i)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else t.persistedDataManager.setHasPermission(!1)})).catch((function(e){t.persistedDataManager.setHasPermission(!1)}))},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=jH.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case jH.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case jH.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case jH.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=$H,this.cameraScanImage.alt=mH.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=JH,this.fileScanImage.alt=mH.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return uW.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return uW.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();const wW=e=>{let{title:t,onClose:n,children:i}=e;return(0,If.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,If.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden shadow-xl max-w-lg w-full",children:[(0,If.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,If.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t}),(0,If.jsx)("button",{className:"text-gray-600 hover:text-gray-800",onClick:n,children:"\xd7"})]}),(0,If.jsx)("div",{className:"px-6 py-4",children:i})]})})},bW=()=>{const e=$E(),{parcels:t,loading:n,error:i}=GE((e=>e.cart)),{warehouses:r}=GE((e=>e.warehouses)),[o,a]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),[u,d]=(0,s.useState)(!1),h=(0,s.useRef)(null),p="html5qr-code-full-region",g=(0,s.useRef)(!1),[f,m]=(0,s.useState)(!1),[v,y]=(0,s.useState)(null),[C,w]=(0,s.useState)(""),[b,S]=(0,s.useState)("");(0,s.useEffect)((()=>{e(Fl({page:1,limit:100,query:C}))}),[e,C]),(0,s.useEffect)((()=>{o?setTimeout((()=>{d(!0)}),5e3):d(!1)}),[o]),(0,s.useEffect)((()=>{if(v){const t=async()=>{m(!0);try{const t=await e(ll(v));ll.fulfilled.match(t)?(e($l(t.payload.data)),ot.success("Parcel added to cart successfully.")):ot.error("Parcel not found.")}catch(i){ot.error("Error fetching parcel."),console.error("Error:",i)}m(!1)};t()}}),[v,e]);const E=(0,s.useCallback)((e=>{const t=e.split("/").pop()||"";8===t.length?t!==v?y(t):console.log("Duplicate scan ignored"):ot.error("Invalid QR.")}),[v]);(0,s.useEffect)((()=>{if(!h.current&&document.getElementById(p)&&!g.current){const e={rememberLastUsedCamera:!0,fps:10,qrbox:250,disableFlip:!1};h.current=new CW(p,e,!1),h.current.render(E,x),g.current=!0}}),[E]);const x=e=>{["QR code parse error, error = NotFoundException: No MultiFormat Readers were able to detect the code.","QR code parse error, error = FormatException: Could not decode QR Code"].includes(e)||console.error("QR Code error: ".concat(e))},A=()=>{a(!1),c(!1),d(!1)};return(0,If.jsxs)(Zx,{title:"Parcel Reception",children:[(0,If.jsxs)("div",{className:"flex flex-col lg:flex-row w-full h-[85vh]",children:[(0,If.jsxs)("div",{className:"lg:w-1/3 w-full flex flex-col items-stretch justify-center p-4 h-full",children:[(0,If.jsxs)("div",{className:"shadow-lg rounded-lg w-full p-4 mb-6",children:[(0,If.jsx)("input",{type:"text",placeholder:"Search warehouses...",className:"w-full p-2 border border-gray-300 rounded",onChange:e=>(e=>{w(e)})(e.target.value)}),(0,If.jsxs)("select",{value:b||"",onChange:e=>{S(e.target.value)},className:"w-full p-2 border border-gray-300 rounded mt-2",children:[(0,If.jsx)("option",{value:"",children:"Select Warehouse"}),r.map((e=>(0,If.jsx)("option",{value:e._id,children:e.name},e._id)))]})]}),(0,If.jsx)("div",{id:p,className:"bg-white shadow-lg rounded-lg w-full h-auto"})]}),(0,If.jsx)("div",{className:"lg:w-2/3 w-full p-4 h-full flex flex-col",children:(0,If.jsxs)("div",{className:"shadow-lg rounded-lg border w-full h-full flex flex-col justify-between",children:[0===t.length?(0,If.jsx)("div",{className:"flex items-center justify-center p-4 w-full h-full",children:(0,If.jsx)("p",{className:"text-gray-600",children:"No parcels in cart."})}):(0,If.jsx)("div",{className:"flex flex-col p-4 overflow-y-auto",children:(0,If.jsx)("ul",{className:"mb-4",children:t.map((t=>{var n;return t?(0,If.jsxs)("li",{className:"flex justify-between items-center p-2 bg-white shadow mb-2 rounded",children:[(0,If.jsxs)("div",{className:"flex flex-col",children:[(0,If.jsxs)("span",{children:[t.parcelId," -"," ",(null===(n=t.receiver)||void 0===n?void 0:n.name)||"Unknown Receiver"]}),(0,If.jsxs)("span",{className:"text-gray-500",children:["Delivery Fees: ",t.deliveryFees," MMK"]}),(0,If.jsxs)("span",{className:"text-gray-500",children:["Payment Type: ",t.paymentType]})]}),(0,If.jsx)("button",{onClick:()=>{return n=t._id,void e(Jl(n));var n},className:"bg-red-500 text-white px-4 py-2 rounded",children:"Remove"})]},t._id):null}))})}),(0,If.jsxs)("div",{className:"flex flex-col border-t border-gray-300 p-4 mt-4 bg-white shadow-md rounded-lg",children:[(0,If.jsxs)("div",{className:"w-full text-lg font-semibold text-gray-700 mb-2",children:["Total Parcels: ",t.length]}),(0,If.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,If.jsx)("button",{onClick:()=>{e(tc())},className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition duration-200",children:"Clear Cart"}),(0,If.jsx)("button",{onClick:()=>{b?a(!0):ot.error("Please select a warehouse.")},disabled:n||0===t.length,className:"bg-blue-500 text-white px-4 py-2 rounded-md transition duration-200 ".concat(n||0===t.length?"opacity-50 cursor-not-allowed":"hover:bg-blue-600"),children:n?"Processing...":"Submit"})]}),i&&(0,If.jsx)("p",{className:"text-red-500 mt-4",children:i})]})]})})]}),o&&(0,If.jsxs)(wW,{title:"Confirm Submission",onClose:A,children:[(0,If.jsx)("p",{children:"Are you sure you want to submit these parcels?"}),(0,If.jsx)("div",{className:"mt-4",children:(0,If.jsxs)("label",{children:[(0,If.jsx)("input",{type:"checkbox",checked:l,onChange:()=>c(!l)})," ","I confirm the details are correct."]})}),(0,If.jsxs)("div",{className:"mt-4 flex justify-end",children:[(0,If.jsx)("button",{onClick:()=>{if(!b)return void ot.error("No warehouse selected.");const n=t.map((e=>e._id));e(Ql({parcels:n,warehouseId:b})).unwrap().then((()=>{setTimeout((()=>{ot.success("Parcels submitted successfully."),A()}),1e3)})).catch((e=>{setTimeout((()=>{ot.error("Failed to submit parcels."),console.error("Submission Error:",e)}),1e3)}))},disabled:!l||!u,className:"bg-green-500 text-white py-2 px-4 rounded ".concat(l&&u?"hover:bg-green-600":"opacity-50 cursor-not-allowed"),children:u?"Yes, Submit":"Please wait..."}),(0,If.jsx)("button",{onClick:A,className:"bg-gray-500 text-white py-2 px-4 rounded ml-2 hover:bg-gray-600",children:"No, Cancel"})]})]})]})},SW=e=>{let{parcels:t}=e;return(0,If.jsx)("div",{className:"w-full flex flex-col items-center overflow-y-auto text-sm border border-gray-300 grow mb-4",children:t.length>0?t.map(((e,t)=>(0,If.jsxs)("div",{className:"w-full border-t border-gray-100 text-gray-600 py-4 px-6 block hover:bg-gray-100 transition duration-150",children:[(0,If.jsxs)("div",{className:"flex items-center justify-between",children:[(0,If.jsx)("div",{children:(0,If.jsxs)("span",{className:"font-semibold text-lg mr-1",children:["Package ID: ",e.parcelId]})}),(0,If.jsx)("div",{children:"Pay by Sender"===e.paymentType&&"Delivered"===e.status&&(0,If.jsxs)("span",{className:"font-semibold text-lg text-green-500",children:[e.deliveryFees," MMK"]})})]}),(0,If.jsxs)("div",{className:"w-full",children:[(0,If.jsxs)("p",{className:"text-gray-500 mb-2",children:["Receiver: ",e.receiver.name]}),(0,If.jsxs)("p",{className:"text-gray-500 mb-2",children:["Payment Type: ",e.paymentType]}),(0,If.jsxs)("p",{className:"text-gray-500 mb-2",children:["Status: ",e.status]})]})]},t))):(0,If.jsx)("div",{className:"flex items-center justify-center text-center py-5 w-full h-full",children:(0,If.jsx)("h3",{className:"font-medium text-gray-900",children:"No Packages Found"})})})},EW=e=>{let{driver:t,parcels:n,loadingState:i,onSubmit:r,disabledSubmit:s,submitClassName:o}=e;const a=n.filter((e=>"Pay by Sender"===e.paymentType&&"Delivered"===e.status)).reduce(((e,t)=>e+t.deliveryFees),0);return(0,If.jsxs)("div",{className:"bg-white shadow-lg border border-gray-400 rounded-lg w-full h-full p-4 flex flex-col",children:[(0,If.jsxs)("div",{className:"w-full flex flex-wrap mb-8",children:[(0,If.jsxs)("p",{className:"text-lg font-semibold w-full",children:["Driver: ",t.username]}),(0,If.jsxs)("p",{className:"text-sm text-gray-600 w-full",children:["Email: ",t.email]})]}),(0,If.jsx)(SW,{parcels:n}),(0,If.jsxs)("div",{className:"flex justify-between items-center p-4",children:[a>0&&(0,If.jsx)(If.Fragment,{children:(0,If.jsxs)("span",{className:"font-semibold text-lg",children:["Total Fees:",(0,If.jsxs)("span",{className:"font-semibold text-lg text-green-500 ml-2",children:[a," MMK"]})]})}),(0,If.jsx)("button",{disabled:s,onClick:r,className:o,children:i?"Processing...":"Submit"})]}),i&&(0,If.jsx)("p",{className:"text-red-500 text-sm mt-2",children:"Processing..."})]})},xW=()=>{const e=$E(),{warehouses:t}=GE((e=>e.warehouses)),[n,i]=(0,s.useState)(null),[r,o]=(0,s.useState)([]),[a,l]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),p=(0,s.useRef)(null),g="html5qr-code-full-region",f=(0,s.useRef)(!1),[m,v]=(0,s.useState)(!1),[y,C]=(0,s.useState)(null),[w,b]=(ne(),(0,s.useState)("")),[S,E]=(0,s.useState)("");(0,s.useEffect)((()=>{e(Fl({page:1,limit:100,query:w}))}),[e,w]),(0,s.useEffect)((()=>{a?setTimeout((()=>{h(!0)}),5e3):h(!1)}),[a]),(0,s.useEffect)((()=>{if(y){const[t,n]=y.split("|").map((e=>e.trim())),r=new Date(n);r.setSeconds(r.getSeconds()+15);const s=new Date;if(!t||isNaN(r.getTime())||s>r)return ot.error("Driver QR code has expired or is invalid"),void C(null);(async()=>{v(!0);try{const n=await e(rc(t));if(rc.fulfilled.match(n)){i(n.payload.data);const e=await ua.get("/reception/driver/".concat(t));o(e.data.parcels||[]),ot.success("Driver information loaded successfully.")}else ot.error("Driver not found.")}catch(n){ot.error("Error fetching driver."),console.error("Error:",n)}v(!1)})()}}),[y,e]);const x=(0,s.useCallback)((e=>{n||(e!==y?C(e):console.log("Duplicate scan ignored"))}),[n,y]);(0,s.useEffect)((()=>{if(!p.current&&document.getElementById(g)&&!f.current&&!n){const e={rememberLastUsedCamera:!0,fps:10,qrbox:250,disableFlip:!1};p.current=new CW(g,e,!1),p.current.render(x,A),f.current=!0}}),[x,n]);const A=e=>{["QR code parse error, error = NotFoundException: No MultiFormat Readers were able to detect the code.","QR code parse error, error = FormatException: Could not decode QR Code"].includes(e)||console.error("QR Code error: ".concat(e))},T=()=>{window.location.reload()},_=()=>{l(!1),u(!1),h(!1)};return(0,If.jsxs)(Zx,{title:"Driver Reception",children:[(0,If.jsxs)("div",{className:"flex flex-col lg:flex-row w-full h-[85vh]",children:[!n&&(0,If.jsx)("div",{className:"w-full flex flex-col items-center justify-center p-4 h-full",children:(0,If.jsx)("div",{id:g,className:"bg-white shadow-lg rounded-lg"})}),n&&(0,If.jsxs)(If.Fragment,{children:[(0,If.jsxs)("div",{className:"lg:w-1/3 w-full flex flex-col p-4 h-full",children:[(0,If.jsxs)("div",{className:"shadow-lg rounded-lg w-full p-4 mb-6",children:[(0,If.jsx)("input",{type:"text",placeholder:"Search warehouses...",className:"w-full p-2 border border-gray-300 rounded",onChange:e=>(e=>{b(e)})(e.target.value)}),(0,If.jsxs)("select",{value:S||"",onChange:e=>{E(e.target.value)},className:"w-full p-2 border border-gray-300 rounded mt-2",children:[(0,If.jsx)("option",{value:"",children:"Select Warehouse"}),t.map((e=>(0,If.jsx)("option",{value:e._id,children:e.name},e._id)))]})]}),(0,If.jsx)("div",{className:"shadow-lg rounded-lg w-full p-4 mb-6",children:(0,If.jsx)("button",{onClick:T,className:"bg-gray-500 text-white px-4 w-full py-2 rounded-md hover:bg-gray-600 transition duration-200",children:"Rescan Driver Qr"})})]}),(0,If.jsx)("div",{className:"lg:w-2/3 w-full p-4 h-full flex flex-col",children:(0,If.jsx)("div",{className:"shadow-lg rounded-lg border w-full h-full flex flex-col justify-between",children:(0,If.jsx)(EW,{driver:n,parcels:r,loadingState:m,onSubmit:()=>{S?l(!0):ot.error("Please select a warehouse.")},disabledSubmit:m||!S||!n,submitClassName:"bg-blue-500 text-white px-4 py-2 rounded-md transition duration-200 ".concat(!m&&S&&n?"hover:bg-blue-600":"opacity-50 cursor-not-allowed")})})})]})]}),a&&(0,If.jsxs)(wW,{title:"Confirm Submission",onClose:_,children:[(0,If.jsx)("p",{children:"Are you sure you want to submit these parcels?"}),(0,If.jsx)("div",{className:"mt-4",children:(0,If.jsxs)("label",{children:[(0,If.jsx)("input",{type:"checkbox",checked:c,onChange:()=>u(!c)})," ","I confirm the details are correct."]})}),(0,If.jsxs)("div",{className:"mt-4 flex justify-end",children:[(0,If.jsx)("button",{onClick:async()=>{if(!S)return void ot.error("No warehouse selected.");const e=r.map((e=>e._id));try{await ua.post("/reception/driver/".concat(null===n||void 0===n?void 0:n._id,"/process"),{packageIds:e,warehouseId:S}),ot.success("Successfully processed driver deliveries."),T()}catch(s){var t,i;ot.error("Error submitting driver data: ".concat((null===(t=s.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)||s.message))}v(!1),_()},disabled:!c||!d,className:"bg-green-500 text-white py-2 px-4 rounded ".concat(c&&d?"hover:bg-green-600":"opacity-50 cursor-not-allowed"),children:d?"Yes, Submit":"Please wait..."}),(0,If.jsx)("button",{onClick:_,className:"bg-gray-500 text-white py-2 px-4 rounded ml-2 hover:bg-gray-600",children:"No, Cancel"})]})]})]})},AW=e=>{let{children:t}=e;$E();const n=ne(),i=ee(),{token:r,loading:o,fetchingCurrentUser:a}=GE((e=>e.auth)),l=(0,s.useRef)(null),c=(0,s.useRef)(!1),u=["/dashboard","/login"];return(0,s.useEffect)((()=>((async()=>{if(u.some((e=>i.pathname.startsWith(e))))if(!r||o&&a||l.current===r&&c.current)r||o||n("/login");else{c.current=!0,l.current=r,console.log("Fetching CurrentUser");const e=await ed.fetchCurrentUser();console.log("CurrentUser Fetched",e),e?Ju.connect():(console.log("Navigating to login"),n("/login"))}})(),()=>{Ju.socket&&Ju.disconnect()})),[r,o,a,n,i.pathname]),(o||a)&&r?(0,If.jsx)(JE,{text:"Loading Session"}):(0,If.jsx)(If.Fragment,{children:t})},TW=e=>{let{currentUser:t,onSuccess:n}=e;const i=$E(),r={username:t.username,email:t.email,roleId:t.roleId,phoneNumber:t.phoneNumber,address:t.address,zip:t.zip,cityId:t.cityId,countryId:t.countryId},s=bn().shape({username:ln().required("Username is required"),phoneNumber:ln().required("Phone number is required"),address:ln().required("Address is required"),zip:ln().required("ZIP code is required"),cityId:ln().required("City is required"),countryId:ln().required("Country is required")});return(0,If.jsx)(xE,{initialValues:r,validationSchema:s,handleSubmit:async(e,r)=>{let{setSubmitting:s}=r;try{await i(oc({id:t._id,user:e})),ot.success("Profile updated successfully"),n()}catch(o){ot.error("An error occurred")}finally{s(!1)}},title:"Update Profile",buttonText:"Update",children:e=>(0,If.jsxs)(If.Fragment,{children:[(0,If.jsx)(Sf,{as:qf,type:"text",label:"Username",name:"username",required:!0}),(0,If.jsx)(Sf,{component:OG,phoneNumberField:"phoneNumber",addressField:"address",zipField:"zip",countryField:"countryId",cityField:"cityId"})]})})},_W=()=>{const{user:e,loading:t,error:n}=GE((e=>e.auth)),i=ne();if(t)return(0,If.jsx)(JE,{});if(n)return(0,If.jsx)(eA,{error:n});if(!e){const e={message:"User not found",name:"NotFoundError",status:404,code:"USER_NOT_FOUND"};return(0,If.jsx)(eA,{error:e,showLogoutButton:!0})}return(0,If.jsx)(Zx,{title:"Edit Profile",children:(0,If.jsx)(TW,{currentUser:e,onSuccess:()=>i("/dashboard/profile")})})};var RW=n(3133),DW=n(9046);const MW="react-tooltip-core-styles",PW="react-tooltip-base-styles",IW={core:!1,base:!1};function NW(e){let{css:t,id:n=PW,type:i="base",ref:r}=e;var s,o;if(!t||"undefined"==typeof document||IW[i])return;if("core"===i&&"undefined"!=typeof process&&(null===(s=null===process||void 0===process?void 0:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_SOCKET_URL:"http://172.23.40.227:5000",REACT_APP_BACKEND_URL:"http://172.23.40.227:5000/api"})||void 0===s?void 0:s.REACT_TOOLTIP_DISABLE_CORE_STYLES))return;if("base"!==i&&"undefined"!=typeof process&&(null===(o=null===process||void 0===process?void 0:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_SOCKET_URL:"http://172.23.40.227:5000",REACT_APP_BACKEND_URL:"http://172.23.40.227:5000/api"})||void 0===o?void 0:o.REACT_TOOLTIP_DISABLE_BASE_STYLES))return;"core"===i&&(n=MW),r||(r={});const{insertAt:a}=r;if(document.getElementById(n))return;const l=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.id=n,c.type="text/css","top"===a&&l.firstChild?l.insertBefore(c,l.firstChild):l.appendChild(c),c.styleSheet?c.styleSheet.cssText=t:c.appendChild(document.createTextNode(t)),IW[i]=!0}const kW=async e=>{let{elementReference:t=null,tooltipReference:n=null,tooltipArrowReference:i=null,place:r="top",offset:s=10,strategy:o="absolute",middlewares:a=[(0,RW.cY)(Number(s)),(0,RW.UU)({fallbackAxisSideDirection:"start"}),(0,RW.BN)({padding:5})],border:l}=e;if(!t)return{tooltipStyles:{},tooltipArrowStyles:{},place:r};if(null===n)return{tooltipStyles:{},tooltipArrowStyles:{},place:r};const c=a;return i?(c.push((0,RW.UE)({element:i,padding:5})),(0,RW.rD)(t,n,{placement:r,strategy:o,middleware:c}).then((e=>{let{x:t,y:n,placement:i,middlewareData:r}=e;var s,o;const a={left:"".concat(t,"px"),top:"".concat(n,"px"),border:l},{x:c,y:u}=null!==(s=r.arrow)&&void 0!==s?s:{x:0,y:0},d=null!==(o={top:"bottom",right:"left",bottom:"top",left:"right"}[i.split("-")[0]])&&void 0!==o?o:"bottom",h=l&&{borderBottom:l,borderRight:l};let p=0;if(l){const e="".concat(l).match(/(\d+)px/);p=(null==e?void 0:e[1])?Number(e[1]):1}return{tooltipStyles:a,tooltipArrowStyles:{left:null!=c?"".concat(c,"px"):"",top:null!=u?"".concat(u,"px"):"",right:"",bottom:"",...h,[d]:"-".concat(4+p,"px")},place:i}}))):(0,RW.rD)(t,n,{placement:"bottom",strategy:o,middleware:c}).then((e=>{let{x:t,y:n,placement:i}=e;return{tooltipStyles:{left:"".concat(t,"px"),top:"".concat(n,"px")},tooltipArrowStyles:{},place:i}}))},OW=(e,t)=>!("CSS"in window&&"supports"in window.CSS)||window.CSS.supports(e,t),LW=(e,t,n)=>{let i=null;const r=function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];const a=()=>{i=null,n||e.apply(this,s)};n&&!i&&(e.apply(this,s),i=setTimeout(a,t)),n||(i&&clearTimeout(i),i=setTimeout(a,t))};return r.cancel=()=>{i&&(clearTimeout(i),i=null)},r},FW=e=>null!==e&&!Array.isArray(e)&&"object"==typeof e,BW=(e,t)=>{if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every(((e,n)=>BW(e,t[n])));if(Array.isArray(e)!==Array.isArray(t))return!1;if(!FW(e)||!FW(t))return e===t;const n=Object.keys(e),i=Object.keys(t);return n.length===i.length&&n.every((n=>BW(e[n],t[n])))},VW=e=>{if(!(e instanceof HTMLElement||e instanceof SVGElement))return!1;const t=getComputedStyle(e);return["overflow","overflow-x","overflow-y"].some((e=>{const n=t.getPropertyValue(e);return"auto"===n||"scroll"===n}))},GW=e=>{if(!e)return null;let t=e.parentElement;for(;t;){if(VW(t))return t;t=t.parentElement}return document.scrollingElement||document.documentElement},HW="undefined"!=typeof window?s.useLayoutEffect:s.useEffect,WW=e=>{e.current&&(clearTimeout(e.current),e.current=null)},jW="DEFAULT_TOOLTIP_ID",UW={anchorRefs:new Set,activeAnchor:{current:null},attach:()=>{},detach:()=>{},setActiveAnchor:()=>{}},zW=(0,s.createContext)({getTooltipData:()=>UW});function YW(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jW;return(0,s.useContext)(zW).getTooltipData(e)}var qW={tooltip:"core-styles-module_tooltip__3vRRp",fixed:"core-styles-module_fixed__pcSol",arrow:"core-styles-module_arrow__cvMwQ",noArrow:"core-styles-module_noArrow__xock6",clickable:"core-styles-module_clickable__ZuTTB",show:"core-styles-module_show__Nt9eE",closing:"core-styles-module_closing__sGnxF"},KW={tooltip:"styles-module_tooltip__mnnfp",arrow:"styles-module_arrow__K0L3T",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"};const XW=e=>{let{forwardRef:t,id:n,className:i,classNameArrow:r,variant:o="dark",anchorId:a,anchorSelect:l,place:c="top",offset:u=10,events:d=["hover"],openOnClick:h=!1,positionStrategy:p="absolute",middlewares:g,wrapper:f,delayShow:m=0,delayHide:v=0,float:y=!1,hidden:C=!1,noArrow:w=!1,clickable:b=!1,closeOnEsc:S=!1,closeOnScroll:E=!1,closeOnResize:x=!1,openEvents:A,closeEvents:T,globalCloseEvents:_,imperativeModeOnly:R,style:D,position:M,afterShow:P,afterHide:I,disableTooltip:N,content:k,contentWrapperRef:O,isOpen:L,defaultIsOpen:F=!1,setIsOpen:B,activeAnchor:V,setActiveAnchor:G,border:H,opacity:W,arrowColor:j,role:U="tooltip"}=e;var z;const Y=(0,s.useRef)(null),q=(0,s.useRef)(null),K=(0,s.useRef)(null),X=(0,s.useRef)(null),Q=(0,s.useRef)(null),[Z,$]=(0,s.useState)({tooltipStyles:{},tooltipArrowStyles:{},place:c}),[J,ee]=(0,s.useState)(!1),[te,ne]=(0,s.useState)(!1),[ie,re]=(0,s.useState)(null),se=(0,s.useRef)(!1),oe=(0,s.useRef)(null),{anchorRefs:ae,setActiveAnchor:le}=YW(n),ce=(0,s.useRef)(!1),[ue,de]=(0,s.useState)([]),he=(0,s.useRef)(!1),pe=h||d.includes("click"),ge=pe||(null==A?void 0:A.click)||(null==A?void 0:A.dblclick)||(null==A?void 0:A.mousedown),fe=A?{...A}:{mouseover:!0,focus:!0,mouseenter:!1,click:!1,dblclick:!1,mousedown:!1};!A&&pe&&Object.assign(fe,{mouseenter:!1,focus:!1,mouseover:!1,click:!0});const me=T?{...T}:{mouseout:!0,blur:!0,mouseleave:!1,click:!1,dblclick:!1,mouseup:!1};!T&&pe&&Object.assign(me,{mouseleave:!1,blur:!1,mouseout:!1});const ve=_?{..._}:{escape:S||!1,scroll:E||!1,resize:x||!1,clickOutsideAnchor:ge||!1};R&&(Object.assign(fe,{mouseenter:!1,focus:!1,click:!1,dblclick:!1,mousedown:!1}),Object.assign(me,{mouseleave:!1,blur:!1,click:!1,dblclick:!1,mouseup:!1}),Object.assign(ve,{escape:!1,scroll:!1,resize:!1,clickOutsideAnchor:!1})),HW((()=>(he.current=!0,()=>{he.current=!1})),[]);const ye=e=>{he.current&&(e&&ne(!0),setTimeout((()=>{he.current&&(null==B||B(e),void 0===L&&ee(e))}),10))};(0,s.useEffect)((()=>{if(void 0===L)return()=>null;L&&ne(!0);const e=setTimeout((()=>{ee(L)}),10);return()=>{clearTimeout(e)}}),[L]),(0,s.useEffect)((()=>{if(J!==se.current)if(WW(Q),se.current=J,J)null==P||P();else{const e=(e=>{const t=getComputedStyle(document.body).getPropertyValue("--rt-transition-show-delay").match(/^([\d.]+)(ms|s)$/);if(!t)return 0;const[,n,i]=t;return Number(n)*("ms"===i?1:1e3)})();Q.current=setTimeout((()=>{ne(!1),re(null),null==I||I()}),e+25)}}),[J]);const Ce=e=>{$((t=>BW(t,e)?t:e))},we=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;WW(K),te?ye(!0):K.current=setTimeout((()=>{ye(!0)}),e)},be=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;WW(X),X.current=setTimeout((()=>{ce.current||ye(!1)}),e)},Se=e=>{var t;if(!e)return;const n=null!==(t=e.currentTarget)&&void 0!==t?t:e.target;if(!(null==n?void 0:n.isConnected))return G(null),void le({current:null});m?we():ye(!0),G(n),le({current:n}),WW(X)},Ee=()=>{b?be(v||100):v?be():ye(!1),WW(K)},xe=e=>{let{x:t,y:n}=e;var i;const r={getBoundingClientRect:()=>({x:t,y:n,width:0,height:0,top:n,left:t,right:t,bottom:n})};kW({place:null!==(i=null==ie?void 0:ie.place)&&void 0!==i?i:c,offset:u,elementReference:r,tooltipReference:Y.current,tooltipArrowReference:q.current,strategy:p,middlewares:g,border:H}).then((e=>{Ce(e)}))},Ae=e=>{if(!e)return;const t=e,n={x:t.clientX,y:t.clientY};xe(n),oe.current=n},Te=e=>{var t;if(!J)return;const n=e.target;n.isConnected&&((null===(t=Y.current)||void 0===t?void 0:t.contains(n))||[document.querySelector("[id='".concat(a,"']")),...ue].some((e=>null==e?void 0:e.contains(n)))||(ye(!1),WW(K)))},_e=LW(Se,50,!0),Re=LW(Ee,50,!0),De=e=>{Re.cancel(),_e(e)},Me=()=>{_e.cancel(),Re()},Pe=(0,s.useCallback)((()=>{var e,t;const n=null!==(e=null==ie?void 0:ie.position)&&void 0!==e?e:M;n?xe(n):y?oe.current&&xe(oe.current):(null==V?void 0:V.isConnected)&&kW({place:null!==(t=null==ie?void 0:ie.place)&&void 0!==t?t:c,offset:u,elementReference:V,tooltipReference:Y.current,tooltipArrowReference:q.current,strategy:p,middlewares:g,border:H}).then((e=>{he.current&&Ce(e)}))}),[J,V,k,D,c,null==ie?void 0:ie.place,u,p,M,null==ie?void 0:ie.position,y]);(0,s.useEffect)((()=>{var e,t;const n=new Set(ae);ue.forEach((e=>{(null==N?void 0:N(e))||n.add({current:e})}));const i=document.querySelector("[id='".concat(a,"']"));i&&!(null==N?void 0:N(i))&&n.add({current:i});const r=()=>{ye(!1)},s=GW(V),o=GW(Y.current);ve.scroll&&(window.addEventListener("scroll",r),null==s||s.addEventListener("scroll",r),null==o||o.addEventListener("scroll",r));let l=null;ve.resize?window.addEventListener("resize",r):V&&Y.current&&(l=(0,RW.ll)(V,Y.current,Pe,{ancestorResize:!0,elementResize:!0,layoutShift:!0}));const c=e=>{"Escape"===e.key&&ye(!1)};ve.escape&&window.addEventListener("keydown",c),ve.clickOutsideAnchor&&window.addEventListener("click",Te);const u=[],d=e=>{J&&(null==e?void 0:e.target)===V||Se(e)},h=e=>{J&&(null==e?void 0:e.target)===V&&Ee()},p=["mouseover","mouseout","mouseenter","mouseleave","focus","blur"],g=["click","dblclick","mousedown","mouseup"];Object.entries(fe).forEach((e=>{let[t,n]=e;n&&(p.includes(t)?u.push({event:t,listener:De}):g.includes(t)&&u.push({event:t,listener:d}))})),Object.entries(me).forEach((e=>{let[t,n]=e;n&&(p.includes(t)?u.push({event:t,listener:Me}):g.includes(t)&&u.push({event:t,listener:h}))})),y&&u.push({event:"pointermove",listener:Ae});const f=()=>{ce.current=!0},m=()=>{ce.current=!1,Ee()};return b&&!ge&&(null===(e=Y.current)||void 0===e||e.addEventListener("mouseenter",f),null===(t=Y.current)||void 0===t||t.addEventListener("mouseleave",m)),u.forEach((e=>{let{event:t,listener:i}=e;n.forEach((e=>{var n;null===(n=e.current)||void 0===n||n.addEventListener(t,i)}))})),()=>{var e,t;ve.scroll&&(window.removeEventListener("scroll",r),null==s||s.removeEventListener("scroll",r),null==o||o.removeEventListener("scroll",r)),ve.resize?window.removeEventListener("resize",r):null==l||l(),ve.clickOutsideAnchor&&window.removeEventListener("click",Te),ve.escape&&window.removeEventListener("keydown",c),b&&!ge&&(null===(e=Y.current)||void 0===e||e.removeEventListener("mouseenter",f),null===(t=Y.current)||void 0===t||t.removeEventListener("mouseleave",m)),u.forEach((e=>{let{event:t,listener:i}=e;n.forEach((e=>{var n;null===(n=e.current)||void 0===n||n.removeEventListener(t,i)}))}))}}),[V,Pe,te,ae,ue,A,T,_,pe,m,v]),(0,s.useEffect)((()=>{var e,t;let i=null!==(t=null!==(e=null==ie?void 0:ie.anchorSelect)&&void 0!==e?e:l)&&void 0!==t?t:"";!i&&n&&(i="[data-tooltip-id='".concat(n.replace(/'/g,"\\'"),"']"));const r=new MutationObserver((e=>{const t=[],r=[];e.forEach((e=>{if("attributes"===e.type&&"data-tooltip-id"===e.attributeName&&(e.target.getAttribute("data-tooltip-id")===n?t.push(e.target):e.oldValue===n&&r.push(e.target)),"childList"===e.type){if(V){const t=[...e.removedNodes].filter((e=>1===e.nodeType));if(i)try{r.push(...t.filter((e=>e.matches(i)))),r.push(...t.flatMap((e=>[...e.querySelectorAll(i)])))}catch(e){}t.some((e=>{var t;return!!(null===(t=null==e?void 0:e.contains)||void 0===t?void 0:t.call(e,V))&&(ne(!1),ye(!1),G(null),WW(K),WW(X),!0)}))}if(i)try{const n=[...e.addedNodes].filter((e=>1===e.nodeType));t.push(...n.filter((e=>e.matches(i)))),t.push(...n.flatMap((e=>[...e.querySelectorAll(i)])))}catch(e){}}})),(t.length||r.length)&&de((e=>[...e.filter((e=>!r.includes(e))),...t]))}));return r.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"],attributeOldValue:!0}),()=>{r.disconnect()}}),[n,l,null==ie?void 0:ie.anchorSelect,V]),(0,s.useEffect)((()=>{Pe()}),[Pe]),(0,s.useEffect)((()=>{if(!(null==O?void 0:O.current))return()=>null;const e=new ResizeObserver((()=>{setTimeout((()=>Pe()))}));return e.observe(O.current),()=>{e.disconnect()}}),[k,null==O?void 0:O.current]),(0,s.useEffect)((()=>{var e;const t=document.querySelector("[id='".concat(a,"']")),n=[...ue,t];V&&n.includes(V)||G(null!==(e=ue[0])&&void 0!==e?e:t)}),[a,ue,V]),(0,s.useEffect)((()=>(F&&ye(!0),()=>{WW(K),WW(X)})),[]),(0,s.useEffect)((()=>{var e;let t=null!==(e=null==ie?void 0:ie.anchorSelect)&&void 0!==e?e:l;if(!t&&n&&(t="[data-tooltip-id='".concat(n.replace(/'/g,"\\'"),"']")),t)try{const e=Array.from(document.querySelectorAll(t));de(e)}catch(e){de([])}}),[n,l,null==ie?void 0:ie.anchorSelect]),(0,s.useEffect)((()=>{K.current&&(WW(K),we(m))}),[m]);const Ie=null!==(z=null==ie?void 0:ie.content)&&void 0!==z?z:k,Ne=J&&Object.keys(Z.tooltipStyles).length>0;return(0,s.useImperativeHandle)(t,(()=>({open:e=>{if(null==e?void 0:e.anchorSelect)try{document.querySelector(e.anchorSelect)}catch(t){return void console.warn('[react-tooltip] "'.concat(e.anchorSelect,'" is not a valid CSS selector'))}re(null!=e?e:null),(null==e?void 0:e.delay)?we(e.delay):ye(!0)},close:e=>{(null==e?void 0:e.delay)?be(e.delay):ye(!1)},activeAnchor:V,place:Z.place,isOpen:Boolean(te&&!C&&Ie&&Ne)}))),te&&!C&&Ie?s.createElement(f,{id:n,role:U,className:DW("react-tooltip",qW.tooltip,KW.tooltip,KW[o],i,"react-tooltip__place-".concat(Z.place),qW[Ne?"show":"closing"],Ne?"react-tooltip__show":"react-tooltip__closing","fixed"===p&&qW.fixed,b&&qW.clickable),onTransitionEnd:e=>{WW(Q),J||"opacity"!==e.propertyName||(ne(!1),re(null),null==I||I())},style:{...D,...Z.tooltipStyles,opacity:void 0!==W&&Ne?W:void 0},ref:Y},Ie,s.createElement(f,{className:DW("react-tooltip-arrow",qW.arrow,KW.arrow,r,w&&qW.noArrow),style:{...Z.tooltipArrowStyles,background:j?"linear-gradient(to right bottom, transparent 50%, ".concat(j," 50%)"):void 0},ref:q})):null},QW=e=>{let{content:t}=e;return s.createElement("span",{dangerouslySetInnerHTML:{__html:t}})},ZW=s.forwardRef(((e,t)=>{let{id:n,anchorId:i,anchorSelect:r,content:o,html:a,render:l,className:c,classNameArrow:u,variant:d="dark",place:h="top",offset:p=10,wrapper:g="div",children:f=null,events:m=["hover"],openOnClick:v=!1,positionStrategy:y="absolute",middlewares:C,delayShow:w=0,delayHide:b=0,float:S=!1,hidden:E=!1,noArrow:x=!1,clickable:A=!1,closeOnEsc:T=!1,closeOnScroll:_=!1,closeOnResize:R=!1,openEvents:D,closeEvents:M,globalCloseEvents:P,imperativeModeOnly:I=!1,style:N,position:k,isOpen:O,defaultIsOpen:L=!1,disableStyleInjection:F=!1,border:B,opacity:V,arrowColor:G,setIsOpen:H,afterShow:W,afterHide:j,disableTooltip:U,role:z="tooltip"}=e;const[Y,q]=(0,s.useState)(o),[K,X]=(0,s.useState)(a),[Q,Z]=(0,s.useState)(h),[$,J]=(0,s.useState)(d),[ee,te]=(0,s.useState)(p),[ne,ie]=(0,s.useState)(w),[re,se]=(0,s.useState)(b),[oe,ae]=(0,s.useState)(S),[le,ce]=(0,s.useState)(E),[ue,de]=(0,s.useState)(g),[he,pe]=(0,s.useState)(m),[ge,fe]=(0,s.useState)(y),[me,ve]=(0,s.useState)(null),[ye,Ce]=(0,s.useState)(null),we=(0,s.useRef)(F),{anchorRefs:be,activeAnchor:Se}=YW(n),Ee=e=>null==e?void 0:e.getAttributeNames().reduce(((t,n)=>{var i;return n.startsWith("data-tooltip-")&&(t[n.replace(/^data-tooltip-/,"")]=null!==(i=null==e?void 0:e.getAttribute(n))&&void 0!==i?i:null),t}),{}),xe=e=>{const t={place:e=>{var t;Z(null!==(t=e)&&void 0!==t?t:h)},content:e=>{q(null!=e?e:o)},html:e=>{X(null!=e?e:a)},variant:e=>{var t;J(null!==(t=e)&&void 0!==t?t:d)},offset:e=>{te(null===e?p:Number(e))},wrapper:e=>{var t;de(null!==(t=e)&&void 0!==t?t:g)},events:e=>{const t=null==e?void 0:e.split(" ");pe(null!=t?t:m)},"position-strategy":e=>{var t;fe(null!==(t=e)&&void 0!==t?t:y)},"delay-show":e=>{ie(null===e?w:Number(e))},"delay-hide":e=>{se(null===e?b:Number(e))},float:e=>{ae(null===e?S:"true"===e)},hidden:e=>{ce(null===e?E:"true"===e)},"class-name":e=>{ve(e)}};Object.values(t).forEach((e=>e(null))),Object.entries(e).forEach((e=>{let[n,i]=e;var r;null===(r=t[n])||void 0===r||r.call(t,i)}))};(0,s.useEffect)((()=>{q(o)}),[o]),(0,s.useEffect)((()=>{X(a)}),[a]),(0,s.useEffect)((()=>{Z(h)}),[h]),(0,s.useEffect)((()=>{J(d)}),[d]),(0,s.useEffect)((()=>{te(p)}),[p]),(0,s.useEffect)((()=>{ie(w)}),[w]),(0,s.useEffect)((()=>{se(b)}),[b]),(0,s.useEffect)((()=>{ae(S)}),[S]),(0,s.useEffect)((()=>{ce(E)}),[E]),(0,s.useEffect)((()=>{fe(y)}),[y]),(0,s.useEffect)((()=>{we.current!==F&&console.warn("[react-tooltip] Do not change `disableStyleInjection` dynamically.")}),[F]),(0,s.useEffect)((()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("react-tooltip-inject-styles",{detail:{disableCore:"core"===F,disableBase:F}}))}),[]),(0,s.useEffect)((()=>{var e;const t=new Set(be);let s=r;if(!s&&n&&(s="[data-tooltip-id='".concat(n.replace(/'/g,"\\'"),"']")),s)try{document.querySelectorAll(s).forEach((e=>{t.add({current:e})}))}catch(e){console.warn('[react-tooltip] "'.concat(s,'" is not a valid CSS selector'))}const o=document.querySelector("[id='".concat(i,"']"));if(o&&t.add({current:o}),!t.size)return()=>null;const a=null!==(e=null!=ye?ye:o)&&void 0!==e?e:Se.current,l=new MutationObserver((e=>{e.forEach((e=>{var t;if(!a||"attributes"!==e.type||!(null===(t=e.attributeName)||void 0===t?void 0:t.startsWith("data-tooltip-")))return;const n=Ee(a);xe(n)}))})),c={attributes:!0,childList:!1,subtree:!1};if(a){const e=Ee(a);xe(e),l.observe(a,c)}return()=>{l.disconnect()}}),[be,Se,ye,i,r]),(0,s.useEffect)((()=>{(null==N?void 0:N.border)&&console.warn("[react-tooltip] Do not set `style.border`. Use `border` prop instead."),B&&!OW("border","".concat(B))&&console.warn('[react-tooltip] "'.concat(B,'" is not a valid `border`.')),(null==N?void 0:N.opacity)&&console.warn("[react-tooltip] Do not set `style.opacity`. Use `opacity` prop instead."),V&&!OW("opacity","".concat(V))&&console.warn('[react-tooltip] "'.concat(V,'" is not a valid `opacity`.'))}),[]);let Ae=f;const Te=(0,s.useRef)(null);if(l){const e=l({content:(null==ye?void 0:ye.getAttribute("data-tooltip-content"))||Y||null,activeAnchor:ye});Ae=e?s.createElement("div",{ref:Te,className:"react-tooltip-content-wrapper"},e):null}else Y&&(Ae=Y);K&&(Ae=s.createElement(QW,{content:K}));const _e={forwardRef:t,id:n,anchorId:i,anchorSelect:r,className:DW(c,me),classNameArrow:u,content:Ae,contentWrapperRef:Te,place:Q,variant:$,offset:ee,wrapper:ue,events:he,openOnClick:v,positionStrategy:ge,middlewares:C,delayShow:ne,delayHide:re,float:oe,hidden:le,noArrow:x,clickable:A,closeOnEsc:T,closeOnScroll:_,closeOnResize:R,openEvents:D,closeEvents:M,globalCloseEvents:P,imperativeModeOnly:I,style:N,position:k,isOpen:O,defaultIsOpen:L,border:B,opacity:V,arrowColor:G,setIsOpen:H,afterShow:W,afterHide:j,disableTooltip:U,activeAnchor:ye,setActiveAnchor:e=>Ce(e),role:z};return s.createElement(XW,{..._e})}));function $W(e){return e+.5|0}"undefined"!=typeof window&&window.addEventListener("react-tooltip-inject-styles",(e=>{e.detail.disableCore||NW({css:":root{--rt-color-white:#fff;--rt-color-dark:#222;--rt-color-success:#8dc572;--rt-color-error:#be6464;--rt-color-warning:#f0ad4e;--rt-color-info:#337ab7;--rt-opacity:0.9;--rt-transition-show-delay:0.15s;--rt-transition-closing-delay:0.15s}.core-styles-module_tooltip__3vRRp{position:absolute;top:0;left:0;pointer-events:none;opacity:0;will-change:opacity}.core-styles-module_fixed__pcSol{position:fixed}.core-styles-module_arrow__cvMwQ{position:absolute;background:inherit}.core-styles-module_noArrow__xock6{display:none}.core-styles-module_clickable__ZuTTB{pointer-events:auto}.core-styles-module_show__Nt9eE{opacity:var(--rt-opacity);transition:opacity var(--rt-transition-show-delay)ease-out}.core-styles-module_closing__sGnxF{opacity:0;transition:opacity var(--rt-transition-closing-delay)ease-in}",type:"core"}),e.detail.disableBase||NW({css:"\n.styles-module_tooltip__mnnfp{padding:8px 16px;border-radius:3px;font-size:90%;width:max-content}.styles-module_arrow__K0L3T{width:8px;height:8px}[class*='react-tooltip__place-top']>.styles-module_arrow__K0L3T{transform:rotate(45deg)}[class*='react-tooltip__place-right']>.styles-module_arrow__K0L3T{transform:rotate(135deg)}[class*='react-tooltip__place-bottom']>.styles-module_arrow__K0L3T{transform:rotate(225deg)}[class*='react-tooltip__place-left']>.styles-module_arrow__K0L3T{transform:rotate(315deg)}.styles-module_dark__xNqje{background:var(--rt-color-dark);color:var(--rt-color-white)}.styles-module_light__Z6W-X{background-color:var(--rt-color-white);color:var(--rt-color-dark)}.styles-module_success__A2AKt{background-color:var(--rt-color-success);color:var(--rt-color-white)}.styles-module_warning__SCK0X{background-color:var(--rt-color-warning);color:var(--rt-color-white)}.styles-module_error__JvumD{background-color:var(--rt-color-error);color:var(--rt-color-white)}.styles-module_info__BWdHW{background-color:var(--rt-color-info);color:var(--rt-color-white)}",type:"base"})}));const JW=(e,t,n)=>Math.max(Math.min(e,n),t);function ej(e){return JW($W(2.55*e),0,255)}function tj(e){return JW($W(255*e),0,255)}function nj(e){return JW($W(e/2.55)/100,0,1)}function ij(e){return JW($W(100*e),0,100)}const rj={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},sj=[..."0123456789ABCDEF"],oj=e=>sj[15&e],aj=e=>sj[(240&e)>>4]+sj[15&e],lj=e=>(240&e)>>4===(15&e);function cj(e){var t=(e=>lj(e.r)&&lj(e.g)&&lj(e.b)&&lj(e.a))(e)?oj:aj;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const uj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dj(e,t,n){const i=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function hj(e,t,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function pj(e,t,n){const i=dj(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function gj(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),o=(r+s)/2;let a,l,c;return r!==s&&(c=r-s,l=o>.5?c/(2-r-s):c/(r+s),a=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(t,n,i,c,r),a=60*a+.5),[0|a,l||0,o]}function fj(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(tj)}function mj(e,t,n){return fj(dj,e,t,n)}function vj(e){return(e%360+360)%360}function yj(e){const t=uj.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?ej(+t[5]):tj(+t[5]));const r=vj(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return fj(pj,e,t,n)}(r,s,o):"hsv"===t[1]?function(e,t,n){return fj(hj,e,t,n)}(r,s,o):mj(r,s,o),{r:n[0],g:n[1],b:n[2],a:i}}const Cj={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},wj={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let bj;function Sj(e){bj||(bj=function(){const e={},t=Object.keys(wj),n=Object.keys(Cj);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,Cj[s]);s=parseInt(wj[o],16),e[a]=[s>>16&255,s>>8&255,255&s]}return e}(),bj.transparent=[0,0,0,0]);const t=bj[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Ej=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const xj=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Aj=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Tj(e,t,n){if(e){let i=gj(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=mj(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function _j(e,t){return e?Object.assign(t||{},e):e}function Rj(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=tj(e[3]))):(t=_j(e,{r:0,g:0,b:0,a:1})).a=tj(t.a),t}function Dj(e){return"r"===e.charAt(0)?function(e){const t=Ej.exec(e);let n,i,r,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?ej(e):JW(255*e,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?ej(n):JW(n,0,255)),i=255&(t[4]?ej(i):JW(i,0,255)),r=255&(t[6]?ej(r):JW(r,0,255)),{r:n,g:i,b:r,a:s}}}(e):yj(e)}class Mj{constructor(e){if(e instanceof Mj)return e;const t=typeof e;let n;"object"===t?n=Rj(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*rj[e[1]],g:255&17*rj[e[2]],b:255&17*rj[e[3]],a:5===n?17*rj[e[4]]:255}:7!==n&&9!==n||(t={r:rj[e[1]]<<4|rj[e[2]],g:rj[e[3]]<<4|rj[e[4]],b:rj[e[5]]<<4|rj[e[6]],a:9===n?rj[e[7]]<<4|rj[e[8]]:255})),t}(e)||Sj(e)||Dj(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=_j(this._rgb);return e&&(e.a=nj(e.a)),e}set rgb(e){this._rgb=Rj(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(nj(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?cj(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=gj(e),n=t[0],i=ij(t[1]),r=ij(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(nj(e.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const s=t===r?.5:t,o=2*s-1,a=n.a-i.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=Aj(nj(e.r)),r=Aj(nj(e.g)),s=Aj(nj(e.b));return{r:tj(xj(i+n*(Aj(nj(t.r))-i))),g:tj(xj(r+n*(Aj(nj(t.g))-r))),b:tj(xj(s+n*(Aj(nj(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Mj(this.rgb)}alpha(e){return this._rgb.a=tj(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=$W(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Tj(this._rgb,2,e),this}darken(e){return Tj(this._rgb,2,-e),this}saturate(e){return Tj(this._rgb,1,e),this}desaturate(e){return Tj(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=gj(e);n[0]=vj(n[0]+t),n=mj(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function Pj(){}const Ij=(()=>{let e=0;return()=>e++})();function Nj(e){return null===e||"undefined"===typeof e}function kj(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Oj(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Lj(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Fj(e,t){return Lj(e)?e:t}function Bj(e,t){return"undefined"===typeof e?t:e}const Vj=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Gj(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Hj(e,t,n,i){let r,s,o;if(kj(e))if(s=e.length,i)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(Oj(e))for(o=Object.keys(e),s=o.length,r=0;r<s;r++)t.call(n,e[o[r]],o[r])}function Wj(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function jj(e){if(kj(e))return e.map(jj);if(Oj(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=jj(e[n[r]]);return t}return e}function Uj(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function zj(e,t,n,i){if(!Uj(e))return;const r=t[e],s=n[e];Oj(r)&&Oj(s)?Yj(r,s,i):t[e]=jj(s)}function Yj(e,t,n){const i=kj(t)?t:[t],r=i.length;if(!Oj(e))return e;const s=(n=n||{}).merger||zj;let o;for(let a=0;a<r;++a){if(o=i[a],!Oj(o))continue;const t=Object.keys(o);for(let i=0,r=t.length;i<r;++i)s(t[i],e,o,n)}return e}function qj(e,t){return Yj(e,t,{merger:Kj})}function Kj(e,t,n){if(!Uj(e))return;const i=t[e],r=n[e];Oj(i)&&Oj(r)?qj(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=jj(r))}const Xj={"":e=>e,x:e=>e.x,y:e=>e.y};function Qj(e,t){const n=Xj[t]||(Xj[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Zj(e){return e.charAt(0).toUpperCase()+e.slice(1)}const $j=e=>"undefined"!==typeof e,Jj=e=>"function"===typeof e,eU=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const tU=Math.PI,nU=2*tU,iU=nU+tU,rU=Number.POSITIVE_INFINITY,sU=tU/180,oU=tU/2,aU=tU/4,lU=2*tU/3,cU=Math.log10,uU=Math.sign;function dU(e,t,n){return Math.abs(e-t)<n}function hU(e){const t=Math.round(e);e=dU(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(cU(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function pU(e){return!isNaN(parseFloat(e))&&isFinite(e)}function gU(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function fU(e){return e*(tU/180)}function mU(e){return e*(180/tU)}function vU(e){if(!Lj(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function yU(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*tU&&(s+=nU),{angle:s,distance:r}}function CU(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function wU(e,t){return(e-t+iU)%nU-tU}function bU(e){return(e%nU+nU)%nU}function SU(e,t,n,i){const r=bU(e),s=bU(t),o=bU(n),a=bU(s-r),l=bU(o-r),c=bU(r-s),u=bU(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function EU(e,t,n){return Math.max(t,Math.min(n,e))}function xU(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function AU(e,t,n){n=n||(n=>e[n]<t);let i,r=e.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const TU=(e,t,n,i)=>AU(e,n,i?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),_U=(e,t,n)=>AU(e,n,(i=>e[i][t]>=n));const RU=["push","pop","shift","splice","unshift"];function DU(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(RU.forEach((t=>{delete e[t]})),delete e._chartjs)}function MU(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const PU="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function IU(e,t){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];n=s,i||(i=!0,PU.call(window,(()=>{i=!1,e.apply(t,n)})))}}const NU=e=>"start"===e?"left":"end"===e?"right":"center",kU=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function OU(e,t,n){const i=t.length;let r=0,s=i;if(e._sorted){const{iScale:o,_parsed:a}=e,l=o.axis,{min:c,max:u,minDefined:d,maxDefined:h}=o.getUserBounds();d&&(r=EU(Math.min(TU(a,l,c).lo,n?i:TU(t,l,o.getPixelForValue(c)).lo),0,i-1)),s=h?EU(Math.max(TU(a,o.axis,u,!0).hi+1,n?0:TU(t,l,o.getPixelForValue(u),!0).hi+1),r,i)-r:i-r}return{start:r,count:s}}function LU(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const FU=e=>0===e||1===e,BU=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*nU/n),VU=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*nU/n)+1,GU={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*oU),easeOutSine:e=>Math.sin(e*oU),easeInOutSine:e=>-.5*(Math.cos(tU*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>FU(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>FU(e)?e:BU(e,.075,.3),easeOutElastic:e=>FU(e)?e:VU(e,.075,.3),easeInOutElastic(e){const t=.1125;return FU(e)?e:e<.5?.5*BU(2*e,t,.45):.5+.5*VU(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-GU.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*GU.easeInBounce(2*e):.5*GU.easeOutBounce(2*e-1)+.5};function HU(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function WU(e){return HU(e)?e:new Mj(e)}function jU(e){return HU(e)?e:new Mj(e).saturate(.5).darken(.1).hexString()}const UU=["x","y","borderWidth","radius","tension"],zU=["color","borderColor","backgroundColor"];const YU=new Map;function qU(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=YU.get(n);return i||(i=new Intl.NumberFormat(e,t),YU.set(n,i)),i}(t,n).format(e)}const KU={values:e=>kj(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const o=cU(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),qU(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(cU(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?KU.numeric.call(this,e,t,n):""}};var XU={formatters:KU};const QU=Object.create(null),ZU=Object.create(null);function $U(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function JU(e,t,n){return"string"===typeof t?Yj($U(e,t),n):Yj($U(e,""),t)}class ez{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>jU(t.backgroundColor),this.hoverBorderColor=(e,t)=>jU(t.borderColor),this.hoverColor=(e,t)=>jU(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return JU(this,e,t)}get(e){return $U(this,e)}describe(e,t){return JU(ZU,e,t)}override(e,t){return JU(QU,e,t)}route(e,t,n,i){const r=$U(this,e),s=$U(this,n),o="_"+t;Object.defineProperties(r,{[o]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=s[i];return Oj(e)?Object.assign({},t,e):Bj(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach((e=>e(this)))}}var tz=new ez({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:zU},numbers:{type:"number",properties:UU}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:XU.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function nz(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function iz(e,t,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],void 0===d||null===d||kj(d)){if(kj(d))for(c=0,u=d.length;c<u;c++)h=d[c],void 0===h||null===h||kj(h)||(o=nz(e,r,s,o,h))}else o=nz(e,r,s,o,d);e.restore();const p=s.length/2;if(p>n.length){for(l=0;l<p;l++)delete r[s[l]];s.splice(0,p)}return o}function rz(e,t,n){const i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function sz(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function oz(e,t,n,i){az(e,t,n,i,null)}function az(e,t,n,i,r){let s,o,a,l,c,u,d,h;const p=t.pointStyle,g=t.rotation,f=t.radius;let m=(g||0)*sU;if(p&&"object"===typeof p&&(s=p.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,i),e.rotate(m),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(f)||f<=0)){switch(e.beginPath(),p){default:r?e.ellipse(n,i,r/2,f,0,0,nU):e.arc(n,i,f,0,nU),e.closePath();break;case"triangle":u=r?r/2:f,e.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*f),m+=lU,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*f),m+=lU,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*f),e.closePath();break;case"rectRounded":c=.516*f,l=f-c,o=Math.cos(m+aU)*l,d=Math.cos(m+aU)*(r?r/2-c:l),a=Math.sin(m+aU)*l,h=Math.sin(m+aU)*(r?r/2-c:l),e.arc(n-d,i-a,c,m-tU,m-oU),e.arc(n+h,i-o,c,m-oU,m),e.arc(n+d,i+a,c,m,m+oU),e.arc(n-h,i+o,c,m+oU,m+tU),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*f,u=r?r/2:l,e.rect(n-u,i-l,2*u,2*l);break}m+=aU;case"rectRot":d=Math.cos(m)*(r?r/2:f),o=Math.cos(m)*f,a=Math.sin(m)*f,h=Math.sin(m)*(r?r/2:f),e.moveTo(n-d,i-a),e.lineTo(n+h,i-o),e.lineTo(n+d,i+a),e.lineTo(n-h,i+o),e.closePath();break;case"crossRot":m+=aU;case"cross":d=Math.cos(m)*(r?r/2:f),o=Math.cos(m)*f,a=Math.sin(m)*f,h=Math.sin(m)*(r?r/2:f),e.moveTo(n-d,i-a),e.lineTo(n+d,i+a),e.moveTo(n+h,i-o),e.lineTo(n-h,i+o);break;case"star":d=Math.cos(m)*(r?r/2:f),o=Math.cos(m)*f,a=Math.sin(m)*f,h=Math.sin(m)*(r?r/2:f),e.moveTo(n-d,i-a),e.lineTo(n+d,i+a),e.moveTo(n+h,i-o),e.lineTo(n-h,i+o),m+=aU,d=Math.cos(m)*(r?r/2:f),o=Math.cos(m)*f,a=Math.sin(m)*f,h=Math.sin(m)*(r?r/2:f),e.moveTo(n-d,i-a),e.lineTo(n+d,i+a),e.moveTo(n+h,i-o),e.lineTo(n-h,i+o);break;case"line":o=r?r/2:Math.cos(m)*f,a=Math.sin(m)*f,e.moveTo(n-o,i-a),e.lineTo(n+o,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(m)*(r?r/2:f),i+Math.sin(m)*f);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function lz(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function cz(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function uz(e){e.restore()}function dz(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function hz(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function pz(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function gz(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function fz(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=kj(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Nj(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&gz(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),Nj(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,i,s.maxWidth)),e.fillText(c,n,i,s.maxWidth),pz(e,n,i,c,s),i+=Number(r.lineHeight);e.restore()}function mz(e,t){const{x:n,y:i,w:r,h:s,radius:o}=t;e.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*tU,tU,!0),e.lineTo(n,i+s-o.bottomLeft),e.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,tU,oU,!0),e.lineTo(n+r-o.bottomRight,i+s),e.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,oU,0,!0),e.lineTo(n+r,i+o.topRight),e.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-oU,!0),e.lineTo(n+o.topLeft,i)}const vz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,yz=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Cz(e,t){const n=(""+e).match(vz);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const wz=e=>+e||0;function bz(e,t){const n={},i=Oj(t),r=i?Object.keys(t):t,s=Oj(e)?i?n=>Bj(e[n],e[t[n]]):t=>e[t]:()=>e;for(const o of r)n[o]=wz(s(o));return n}function Sz(e){return bz(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Ez(e){return bz(e,["topLeft","topRight","bottomLeft","bottomRight"])}function xz(e){const t=Sz(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Az(e,t){e=e||{},t=t||tz.font;let n=Bj(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=Bj(e.style,t.style);i&&!(""+i).match(yz)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Bj(e.family,t.family),lineHeight:Cz(Bj(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:Bj(e.weight,t.weight),string:""};return r.string=function(e){return!e||Nj(e.size)||Nj(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function Tz(e,t,n,i){let r,s,o,a=!0;for(r=0,s=e.length;r<s;++r)if(o=e[r],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),a=!1),void 0!==n&&kj(o)&&(o=o[n%o.length],a=!1),void 0!==o))return i&&!a&&(i.cacheable=!1),o}function _z(e,t){return Object.assign(Object.create(e),t)}function Rz(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Vz("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>Rz([i,...e],t,r,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>Nz(n,i,(()=>function(e,t,n,i){let r;for(const s of t)if(r=Vz(Pz(s,e),n),"undefined"!==typeof r)return Iz(e,r)?Fz(n,i,e,r):r}(i,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Gz(e).includes(t),ownKeys:e=>Gz(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function Dz(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Mz(e,i),setContext:t=>Dz(e,t,n,i),override:r=>Dz(e.override(r),t,n,i)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>Nz(e,t,(()=>function(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=e;let a=i[t];Jj(a)&&o.isScriptable(t)&&(a=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,o||i);a.delete(e),Iz(e,l)&&(l=Fz(r._scopes,r,e,l));return l}(t,a,e,n));kj(a)&&a.length&&(a=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&i(e))return t[s.index%t.length];if(Oj(t[0])){const n=t,i=r._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=Fz(i,r,e,l);t.push(Dz(n,s,o&&o[e],a))}}return t}(t,a,e,o.isIndexable));Iz(t,a)&&(a=Dz(a,r,s&&s[t],o));return a}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function Mz(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Jj(n)?n:()=>n,isIndexable:Jj(i)?i:()=>i}}const Pz=(e,t)=>e?e+Zj(t):t,Iz=(e,t)=>Oj(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Nz(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const i=n();return e[t]=i,i}function kz(e,t,n){return Jj(e)?e(t,n):e}const Oz=(e,t)=>!0===e?t:"string"===typeof e?Qj(t,e):void 0;function Lz(e,t,n,i,r){for(const s of t){const t=Oz(n,s);if(t){e.add(t);const s=kz(t._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function Fz(e,t,n,i){const r=t._rootScopes,s=kz(t._fallback,n,i),o=[...e,...r],a=new Set;a.add(i);let l=Bz(a,o,n,s||n,i);return null!==l&&(("undefined"===typeof s||s===n||(l=Bz(a,o,s,l,i),null!==l))&&Rz(Array.from(a),[""],r,s,(()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];if(kj(r)&&Oj(n))return n;return r||{}}(t,n,i))))}function Bz(e,t,n,i,r){for(;n;)n=Lz(e,t,n,i,r);return n}function Vz(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Gz(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function Hz(e,t,n,i){const{iScale:r}=e,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=t[c],o[a]={r:r.parse(Qj(u,s),c)};return o}const Wz=Number.EPSILON||1e-14,jz=(e,t)=>t<e.length&&!e[t].skip&&e[t],Uz=e=>"x"===e?"y":"x";function zz(e,t,n,i){const r=e.skip?t:e,s=t,o=n.skip?t:n,a=CU(s,r),l=CU(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,h=i*u;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+h*(o.x-r.x),y:s.y+h*(o.y-r.y)}}}function Yz(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Uz(t),i=e.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=jz(e,0);for(o=0;o<i;++o)if(a=l,l=c,c=jz(e,o+1),l){if(c){const e=c[t]-l[t];r[o]=0!==e?(c[n]-l[n])/e:0}s[o]=a?c?uU(r[o-1])!==uU(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}!function(e,t,n){const i=e.length;let r,s,o,a,l,c=jz(e,0);for(let u=0;u<i-1;++u)l=c,c=jz(e,u+1),l&&c&&(dU(t[u],0,Wz)?n[u]=n[u+1]=0:(r=n[u]/t[u],s=n[u+1]/t[u],a=Math.pow(r,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=r*o*t[u],n[u+1]=s*o*t[u])))}(e,r,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=Uz(n),r=e.length;let s,o,a,l=jz(e,0);for(let c=0;c<r;++c){if(o=a,a=l,l=jz(e,c+1),!a)continue;const r=a[n],u=a[i];o&&(s=(r-o[n])/3,a["cp1".concat(n)]=r-s,a["cp1".concat(i)]=u-s*t[c]),l&&(s=(l[n]-r)/3,a["cp2".concat(n)]=r+s,a["cp2".concat(i)]=u+s*t[c])}}(e,s,t)}function qz(e,t,n){return Math.max(Math.min(e,n),t)}function Kz(e,t,n,i,r){let s,o,a,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)Yz(e,r);else{let n=i?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)a=e[s],l=zz(n,a,e[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}t.capBezierPoints&&function(e,t){let n,i,r,s,o,a=lz(e[0],t);for(n=0,i=e.length;n<i;++n)o=s,s=a,a=n<i-1&&lz(e[n+1],t),s&&(r=e[n],o&&(r.cp1x=qz(r.cp1x,t.left,t.right),r.cp1y=qz(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=qz(r.cp2x,t.left,t.right),r.cp2y=qz(r.cp2y,t.top,t.bottom)))}(e,n)}function Xz(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Qz(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Zz(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const $z=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Jz=["top","right","bottom","left"];function eY(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Jz[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const tY=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function nY(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=$z(n),s="border-box"===r.boxSizing,o=eY(r,"padding"),a=eY(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let o,a,l=!1;if(tY(r,s,e.target))o=r,a=s;else{const e=t.getBoundingClientRect();o=i.clientX-e.left,a=i.clientY-e.top,l=!0}return{x:o,y:a,box:l}}(e,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:p,height:g}=t;return s&&(p-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-d)/p*n.width/i),y:Math.round((c-h)/g*n.height/i)}}const iY=e=>Math.round(10*e)/10;function rY(e,t,n,i){const r=$z(e),s=eY(r,"margin"),o=Zz(r.maxWidth,e,"clientWidth")||rU,a=Zz(r.maxHeight,e,"clientHeight")||rU,l=function(e,t,n){let i,r;if(void 0===t||void 0===n){const s=e&&Qz(e);if(s){const e=s.getBoundingClientRect(),o=$z(s),a=eY(o,"border","width"),l=eY(o,"padding");t=e.width-l.width-a.width,n=e.height-l.height-a.height,i=Zz(o.maxWidth,s,"clientWidth"),r=Zz(o.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||rU,maxHeight:r||rU}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=eY(r,"border","width"),t=eY(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=iY(Math.min(c,o,l.maxWidth)),u=iY(Math.min(u,a,l.maxHeight)),c&&!u&&(u=iY(c/2));return(void 0!==t||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=iY(Math.floor(u*i))),{width:c,height:u}}function sY(e,t,n){const i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(e.currentDevicePixelRatio=i,o.height=r,o.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0)}const oY=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Xz()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(rre){}return e}();function aY(e,t){const n=function(e,t){return $z(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function lY(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function cY(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function uY(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=lY(e,r,n),a=lY(r,s,n),l=lY(s,t,n),c=lY(o,a,n),u=lY(a,l,n);return lY(c,u,n)}function dY(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function hY(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function pY(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function gY(e){return"angle"===e?{between:SU,compare:wU,normalize:bU}:{between:xU,compare:(e,t)=>e-t,normalize:e=>e}}function fY(e){let{start:t,end:n,count:i,loop:r,style:s}=e;return{start:t%i,end:n%i,loop:r&&(n-t+1)%i===0,style:s}}function mY(e,t,n){if(!n)return[e];const{property:i,start:r,end:s}=n,o=t.length,{compare:a,between:l,normalize:c}=gY(i),{start:u,end:d,loop:h,style:p}=function(e,t,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=gY(i),l=t.length;let c,u,{start:d,end:h,loop:p}=e;if(p){for(d+=l,h+=l,c=0,u=l;c<u&&o(a(t[d%l][i]),r,s);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:p,style:e.style}}(e,t,n),g=[];let f,m,v,y=!1,C=null;const w=()=>y||l(r,v,f)&&0!==a(r,v),b=()=>!y||0===a(s,f)||l(s,v,f);for(let S=u,E=u;S<=d;++S)m=t[S%o],m.skip||(f=c(m[i]),f!==v&&(y=l(f,r,s),null===C&&w()&&(C=0===a(f,r)?S:E),null!==C&&b()&&(g.push(fY({start:C,end:S,loop:h,count:o,style:p})),C=null),E=S,v=f));return null!==C&&g.push(fY({start:C,end:d,loop:h,count:o,style:p})),g}function vY(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const s=mY(i[r],e.points,t);s.length&&n.push(...s)}return n}function yY(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const r=e._chart.getContext(),s=CY(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=s,d=t[0].start,h=d;function p(e,t,i,r){const s=a?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:i,style:r}),u=r,d=t%l)}}for(const g of t){d=a?d:g.start;let e,t=n[d%l];for(h=d+1;h<=g.end;h++){const s=n[h%l];e=CY(i.setContext(_z(r,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),wY(e,u)&&p(d,h-1,g.loop,u),t=s,u=e}d<h-1&&p(d,h-1,g.loop,u)}return c}(e,t,n,i):t}function CY(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function wY(e,t){if(!t)return!1;const n=[],i=function(e,t){return HU(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,i)!==JSON.stringify(t,i)}class bY{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],s=t.duration;r.forEach((i=>i({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=PU.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,o=r.length-1,a=!1;for(;o>=0;--o)s=r[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var SY=new bY;const EY="transparent",xY={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=WU(e||EY),r=i.valid&&WU(t||EY);return r&&r.valid?r.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class AY{constructor(e,t,n,i){const r=t[n];i=Tz([e.to,i,r,e.from]);const s=Tz([e.from,r,i]);this._active=!0,this._fn=e.fn||xY[e.type||typeof s],this._easing=GU[e.easing]||GU.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Tz([e.to,t,i,e.from]),this._from=Tz([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,o=this._to;let a;if(this._active=r!==o&&(s||t<n),!this._active)return this._target[i]=o,void this._notify(!0);t<0?this._target[i]=r:(a=t/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(r,o,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class TY{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Oj(e))return;const t=Object.keys(tz.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((i=>{const r=e[i];if(!Oj(r))return;const s={};for(const e of t)s[e]=r[e];(kj(r.properties)&&r.properties||[i]).forEach((e=>{e!==i&&n.has(e)||n.set(e,s)}))}))}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const t=e[i[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,o);continue}u.cancel()}d&&d.duration?(r[l]=u=new AY(d,e,l,c),i.push(u)):e[l]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(SY.add(this._chart,n),!0):void 0}}function _Y(e,t){const n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:i?s:r,end:i?r:s}}function RY(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function DY(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,s="single"===i.mode;let o,a,l,c;if(null!==t){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(i.all)continue;break}c=e.values[l],Lj(c)&&(s||0===t||uU(t)===uU(c))&&(t+=c)}return t}}function MY(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function PY(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function IY(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function NY(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,o,i),d=t.length;let h;for(let p=0;p<d;++p){const e=t[p],{[l]:n,[c]:s}=e;h=(e._stacks||(e._stacks={}))[c]=PY(r,u,n),h[a]=s,h._top=IY(h,o,!0,i.type),h._bottom=IY(h,o,!1,i.type);(h._visualValues||(h._visualValues={}))[a]=s}}function kY(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function OY(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const LY=e=>"reset"===e||"none"===e,FY=(e,t)=>t?e:Object.assign({},e);class BY{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=MY(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&OY(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,r=t.xAxisID=Bj(n.xAxisID,kY(e,"x")),s=t.yAxisID=Bj(n.yAxisID,kY(e,"y")),o=t.rAxisID=Bj(n.rAxisID,kY(e,"r")),a=t.indexAxis,l=t.iAxisID=i(a,r,s,o),c=t.vAxisID=i(a,s,r,o);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&DU(this._data,this),e._stacked&&OY(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Oj(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:i}=t,r="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:e[u]};return a}(t,e)}else if(n!==t){if(n){DU(n,this);const e=this._cachedMeta;OY(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),RU.forEach((t=>{const n="_onData"+Zj(t),i=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];const o=i.apply(this,r);return e._chartjs.listeners.forEach((e=>{"function"===typeof e[n]&&e[n](...r)})),o}})})))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=MY(t.vScale,t),t.stack!==n.stack&&(i=!0,OY(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&NY(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,o=r.axis;let a,l,c,u=0===e&&t===i.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=kj(i[e])?this.parseArrayData(n,i,e,t):Oj(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const r=()=>null===l[o]||d&&l[o]<d[o];for(a=0;a<t;++a)n._parsed[a+e]=l=c[a],u&&(r()&&(u=!1),d=l);n._sorted=u}s&&NY(this,c)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:s}=e,o=r.axis,a=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let d,h,p;for(d=0,h=i;d<h;++d)p=d+n,u[d]={[o]:c||r.parse(l[p],p),[a]:s.parse(t[p],p)};return u}parseArrayData(e,t,n,i){const{xScale:r,yScale:s}=e,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=t[c],o[a]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(e,t,n,i){const{xScale:r,yScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(i);let c,u,d,h;for(c=0,u=i;c<u;++c)d=c+n,h=t[d],l[c]={x:r.parse(Qj(h,o),d),y:s.parse(Qj(h,a),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,s=t[e.axis];return DY({keys:RY(i,!0),values:t._stacks[e.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let s=null===r?NaN:r;const o=i&&n._stacks[t.axis];i&&o&&(i.values=o,s=DY(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,s=i.length,o=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:RY(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(o);let d,h;function p(){h=i[d];const t=h[o.axis];return!Lj(h[e.axis])||c>t||u<t}for(d=0;d<s&&(p()||(this.updateRangeFromParsed(l,e,h,a),!r));++d);if(r)for(d=s-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(l,e,h,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i][e.axis],Lj(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,r;return Oj(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(Bj(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=_Y(e,n),r=_Y(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||i.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,o,a),c=o;c<o+a;++c){const t=i[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,r))}for(c=0;c<s.length;++c)s[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return _z(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return _z(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,r=this._cachedDataOpts,s=e+"-"+t,o=r[s],a=this.enableOptionSharing&&$j(n);if(o)return FY(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=i?["".concat(e,"Hover"),"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(tz.elements[e]),p=l.resolveNamedOptions(d,h,(()=>this.getContext(n,i,t)),u);return p.$shared&&(p.$shared=a,r[s]=Object.freeze(FY(p,a))),p}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,s="animation-".concat(t),o=r[s];if(o)return o;let a;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,t),s=i.getOptionScopes(this.getDataset(),r);a=i.createResolver(s,this.getContext(e,n,t))}const l=new TY(i,a&&a.animations);return a&&a._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||LY(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:s}}updateElement(e,t,n,i){LY(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!LY(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const i=n.length,r=t.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=e+t;let o;const a=e=>{for(e.length+=t,o=e.length-1;o>=s;o--)e[o]=e[o-t]};for(a(r),o=e;o<s;++o)r[o]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&OY(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function VY(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let t=0,r=n.length;t<r;t++)i=i.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=MU(i.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let i,r,s,o,a=t._length;const l=()=>{32767!==s&&-32768!==s&&($j(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(i=0,r=n.length;i<r;++i)s=t.getPixelForValue(n[i]),l();for(o=void 0,i=0,r=t.ticks.length;i<r;++i)s=t.getPixelForTick(i),l();return a}function GY(e,t,n,i){return kj(e)?function(e,t,n,i){const r=n.parse(e[0],i),s=n.parse(e[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function HY(e,t,n,i){const r=e.iScale,s=e.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,d,h;for(c=n,u=n+i;c<u;++c)h=t[c],d={},d[r.axis]=a||r.parse(o[c],c),l.push(GY(h,d,s,c));return l}function WY(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function jY(e,t,n,i){let r=t.borderSkipped;const s={};if(!r)return void(e.borderSkipped=s);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function(e){let t,n,i,r,s;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:t,top:r,bottom:s}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[UY(u,o,a,l)]=!0,r=c)),s[UY(r,o,a,l)]=!0,e.borderSkipped=s}function UY(e,t,n,i){var r,s,o;return i?(o=n,e=zY(e=(r=e)===(s=t)?o:r===o?s:r,n,t)):e=zY(e,t,n),e}function zY(e,t,n){return"start"===e?t:"end"===e?n:e}function YY(e,t,n){let{inflateAmount:i}=t;e.inflateAmount="auto"===i?1===n?.33:0:i}An(BY,"defaults",{}),An(BY,"datasetElementType",null),An(BY,"dataElementType",null);class qY extends BY{parsePrimitiveData(e,t,n,i){return HY(e,t,n,i)}parseArrayData(e,t,n,i){return HY(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:r,vScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===r.axis?o:a,c="x"===s.axis?o:a,u=[];let d,h,p,g;for(d=n,h=n+i;d<h;++d)g=t[d],p={},p[r.axis]=r.parse(Qj(g,l),d),u.push(GY(Qj(g,c),p,s,d));return u}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,r=this.getParsed(e),s=r._custom,o=WY(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,i);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=r||Nj(t[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,c),g=(t._stacks||{})[o.axis],f={horizontal:l,base:n.base,enableBorderRadius:!g||WY(t._custom)||s===g._top||s===g._bottom,x:l?n.head:p.center,y:l?p.center:n.head,height:l?p.size:Math.abs(n.size),width:l?Math.abs(n.size):p.size};d&&(f.options=u||this.resolveDataElementOptions(h,e[h].active?"active":i));const m=f.options||e[h].options;jY(f,m,g,s),YY(f,m,c.ratio),this.updateElement(e[h],h,f,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),r=n.options.stacked,s=[],o=e=>{const n=e.controller.getParsed(t),i=n&&n[e.vScale.axis];if(Nj(i)||isNaN(i))return!0};for(const a of i)if((void 0===t||!o(a))&&((!1===r||-1===s.indexOf(a.stack)||void 0===r&&void 0===a.stack)&&s.push(a.stack),a.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let r,s;for(r=0,s=t.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const o=e.barThickness;return{min:o||VY(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,o=r||0,a=this.getParsed(e),l=a._custom,c=WY(l);let u,d,h=a[t.axis],p=0,g=n?this.applyStack(t,a,n):h;g!==h&&(p=g-h,g=h),c&&(h=l.barStart,g=l.barEnd-l.barStart,0!==h&&uU(h)!==uU(l.barEnd)&&(p=0),p+=h);const f=Nj(r)||c?p:r;let m=t.getPixelForValue(f);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(p+g):m,d=u-m,Math.abs(d)<s){d=function(e,t,n){return 0!==e?uU(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(d,t,o)*s,h===o&&(m-=d/2);const e=t.getPixelForDecimal(0),r=t.getPixelForDecimal(1),l=Math.min(e,r),p=Math.max(e,r);m=Math.max(Math.min(m,p),l),u=m+d,n&&!c&&(a._stacks[t.axis]._visualValues[i]=t.getValueForPixel(u)-t.getValueForPixel(m))}if(m===t.getPixelForValue(o)){const e=uU(d)*t.getLineWidthForValue(o)/2;m+=e,d-=e}return{size:d,base:m,head:u,center:u+d/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,r=i.skipNull,s=Bj(i.maxBarThickness,1/0);let o,a;if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,l="flex"===i.barThickness?function(e,t,n,i){const r=t.pixels,s=r[e];let o=e>0?r[e-1]:null,a=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?t.end-t.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}(e,t,i,n):function(e,t,n,i){const r=n.barThickness;let s,o;return Nj(r)?(s=t.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[e]-s/2}}(e,t,i,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);o=l.start+l.chunk*c+l.chunk/2,a=Math.min(s,l.chunk*l.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),a=Math.min(s,t.min*t.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[t.axis]||n[r].hidden||n[r].draw(this._ctx)}}An(qY,"id","bar"),An(qY,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),An(qY,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class KY extends BY{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const r=super.parsePrimitiveData(e,t,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(e,t,n,i){const r=super.parseArrayData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=Bj(e[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(e,t,n,i){const r=super.parseObjectData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=Bj(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,i),c=s.axis,u=o.axis;for(let d=t;d<t+n;d++){const t=e[d],n=!r&&this.getParsed(d),h={},p=h[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),g=h[u]=r?o.getBasePixel():o.getPixelForValue(n[u]);h.skip=isNaN(p)||isNaN(g),l&&(h.options=a||this.resolveDataElementOptions(d,t.active?"active":i),r&&(h.options.radius=0)),this.updateElement(t,d,h,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==t&&(i.radius=0),i.radius+=Bj(n&&n._custom,r),i}}An(KY,"id","bubble"),An(KY,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),An(KY,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class XY extends BY{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,o=e=>+n[e];if(Oj(n[e])){const{key:e="value"}=this._parsing;o=t=>+Qj(n[t],e)}for(r=e,s=e+t;r<s;++r)i._parsed[r]=o(r)}}_getRotation(){return fU(this.options.rotation-90)}_getCircumference(){return fU(this.options.circumference)}_getRotationExtents(){let e=nU,t=-nU;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min(((e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t)(this.options.cutout,o),1),l=this._getRingWeight(this.index),{circumference:c,rotation:u}=this._getRotationExtents(),{ratioX:d,ratioY:h,offsetX:p,offsetY:g}=function(e,t,n){let i=1,r=1,s=0,o=0;if(t<nU){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),p=(e,t,i)=>SU(e,a,l,!0)?1:Math.max(t,t*n,i,i*n),g=(e,t,i)=>SU(e,a,l,!0)?-1:Math.min(t,t*n,i,i*n),f=p(0,c,d),m=p(oU,u,h),v=g(tU,c,d),y=g(tU+oU,u,h);i=(f-v)/2,r=(m-y)/2,s=-(f+v)/2,o=-(m+y)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(u,c,a),f=(n.width-s)/d,m=(n.height-s)/h,v=Math.max(Math.min(f,m)/2,0),y=Vj(this.options.radius,v),C=(y-Math.max(y*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*y,this.offsetY=g*y,i.total=this.calculateTotal(),this.outerRadius=y-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*l,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/nU)}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=r&&a.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(t,i);let f,m=this._getRotation();for(f=0;f<t;++f)m+=this._circumference(f,r);for(f=t;f<t+n;++f){const t=this._circumference(f,r),n=e[f],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:h,innerRadius:d};g&&(s.options=p||this.resolveDataElementOptions(f,n.active?"active":i)),m+=t,this.updateElement(n,f,s,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?nU*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=qU(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,s,o,a;if(!e)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,o=s.controller;break}if(!e)return 0;for(i=0,r=e.length;i<r;++i)a=o.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(Bj(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}An(XY,"id","doughnut"),An(XY,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),An(XY,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),An(XY,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class QY extends BY{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,s=this.chart._animationsDisabled;let{start:o,count:a}=OU(t,i,s);this._drawStart=o,this._drawCount=a,LU(t)&&(o=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(i,o,a,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,i),d=s.axis,h=o.axis,{spanGaps:p,segment:g}=this.options,f=pU(p)?p:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||"none"===i,v=t+n,y=e.length;let C=t>0&&this.getParsed(t-1);for(let w=0;w<y;++w){const n=e[w],p=m?n:{};if(w<t||w>=v){p.skip=!0;continue}const y=this.getParsed(w),b=Nj(y[h]),S=p[d]=s.getPixelForValue(y[d],w),E=p[h]=r||b?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,y,a):y[h],w);p.skip=isNaN(S)||isNaN(E)||b,p.stop=w>0&&Math.abs(y[d]-C[d])>f,g&&(p.parsed=y,p.raw=l.data[w]),u&&(p.options=c||this.resolveDataElementOptions(w,n.active?"active":i)),m||this.updateElement(n,w,p,i),C=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}An(QY,"id","line"),An(QY,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),An(QY,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ZY extends BY{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=qU(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,n,i){return Hz.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*tU;let d,h=u;const p=360/this.countVisibleElements();for(d=0;d<t;++d)h+=this._computeAngle(d,i,p);for(d=t;d<t+n;d++){const t=e[d];let n=h,g=h+this._computeAngle(d,i,p),f=s.getDataVisibility(d)?a.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=g,r&&(o.animateScale&&(f=0),o.animateRotate&&(n=g=u));const m={x:l,y:c,innerRadius:0,outerRadius:f,startAngle:n,endAngle:g,options:this.resolveDataElementOptions(d,t.active?"active":i)};this.updateElement(t,d,m,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?fU(this.resolveDataElementOptions(e,t).angle||n):0}}An(ZY,"id","polarArea"),An(ZY,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),An(ZY,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class $Y extends XY{}An($Y,"id","pie"),An($Y,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class JY extends BY{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return Hz.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let o=t;o<t+n;o++){const t=e[o],n=this.resolveDataElementOptions(o,t.active?"active":i),a=r.getPointPositionForValue(o,this.getParsed(o).r),l=s?r.xCenter:a.x,c=s?r.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,o,u,i)}}}An(JY,"id","radar"),An(JY,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),An(JY,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class eq extends BY{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y);return{label:n[e]||"",value:"("+o+", "+a+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:s}=OU(t,n,i);if(this._drawStart=r,this._drawCount=s,LU(t)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const o=this.resolveDatasetElementOptions(e);o.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:o},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(c),d=this.includeOptions(i,u),h=s.axis,p=o.axis,{spanGaps:g,segment:f}=this.options,m=pU(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===i;let y=t>0&&this.getParsed(t-1);for(let C=t;C<t+n;++C){const t=e[C],n=this.getParsed(C),c=v?t:{},g=Nj(n[p]),w=c[h]=s.getPixelForValue(n[h],C),b=c[p]=r||g?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[p],C);c.skip=isNaN(w)||isNaN(b)||g,c.stop=C>0&&Math.abs(n[h]-y[h])>m,f&&(c.parsed=n,c.raw=l.data[C]),d&&(c.options=u||this.resolveDataElementOptions(C,t.active?"active":i)),v||this.updateElement(t,C,c,i),y=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,s)/2}}An(eq,"id","scatter"),An(eq,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),An(eq,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function tq(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class nq{static override(e){Object.assign(nq.prototype,e)}constructor(e){An(this,"options",void 0),this.options=e||{}}init(){}formats(){return tq()}parse(){return tq()}format(){return tq()}add(){return tq()}diff(){return tq()}startOf(){return tq()}endOf(){return tq()}}var iq=nq;function rq(e,t,n,i){const{controller:r,data:s,_sorted:o}=e,a=r._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const e=a._reversePixels?_U:TU;if(!i)return e(s,t,n);if(r._sharedOptions){const i=s[0],r="function"===typeof i.getRange&&i.getRange(t);if(r){const i=e(s,t,n-r),o=e(s,t,n+r);return{lo:i.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function sq(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=s.length;a<l;++a){const{index:e,data:n}=s[a],{lo:l,hi:c}=rq(s[a],t,o,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||i(r,e,t)}}}function oq(e,t,n,i,r){const s=[];if(!r&&!e.isPointInArea(t))return s;return sq(e,n,t,(function(n,o,a){(r||lz(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&s.push({element:n,datasetIndex:o,index:a})}),!0),s}function aq(e,t,n,i,r,s){let o=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const r=t?Math.abs(e.x-i.x):0,s=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return sq(e,n,t,(function(n,c,u){const d=n.inRange(t.x,t.y,r);if(i&&!d)return;const h=n.getCenterPoint(r);if(!(!!s||e.isPointInArea(h))&&!d)return;const p=a(t,h);p<l?(o=[{element:n,datasetIndex:c,index:u}],l=p):p===l&&o.push({element:n,datasetIndex:c,index:u})})),o}function lq(e,t,n,i,r,s){return s||e.isPointInArea(t)?"r"!==n||i?aq(e,t,n,i,r,s):function(e,t,n,i){let r=[];return sq(e,n,t,(function(e,n,s){const{startAngle:o,endAngle:a}=e.getProps(["startAngle","endAngle"],i),{angle:l}=yU(e,{x:t.x,y:t.y});SU(l,o,a)&&r.push({element:e,datasetIndex:n,index:s})})),r}(e,t,n,r):[]}function cq(e,t,n,i,r){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return sq(e,n,t,((e,i,l)=>{e[o](t[n],r)&&(s.push({element:e,datasetIndex:i,index:l}),a=a||e.inRange(t.x,t.y,r))})),i&&!a?[]:s}var uq={evaluateInteractionItems:sq,modes:{index(e,t,n,i){const r=nY(t,e),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?oq(e,r,s,i,o):lq(e,r,s,!1,i,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,i){const r=nY(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?oq(e,r,s,i,o):lq(e,r,s,!1,i,o);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,i)=>oq(e,nY(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const r=nY(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return lq(e,r,s,n.intersect,i,o)},x:(e,t,n,i)=>cq(e,nY(t,e),"x",n.intersect,i),y:(e,t,n,i)=>cq(e,nY(t,e),"y",n.intersect,i)}};const dq=["left","top","right","bottom"];function hq(e,t){return e.filter((e=>e.pos===t))}function pq(e,t){return e.filter((e=>-1===dq.indexOf(e.pos)&&e.box.axis===t))}function gq(e,t){return e.sort(((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function fq(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:r}=n;if(!e||!dq.includes(i))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*i:o&&t.availableWidth,a.height=r):(a.width=i,a.height=c?c*r:o&&t.availableHeight)}return n}function mq(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function vq(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function yq(e,t,n,i){const{pos:r,box:s}=n,o=e.maxPadding;if(!Oj(r)){n.size&&(e[r]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[r]+=n.size}s.getPadding&&vq(o,s.getPadding());const a=Math.max(0,t.outerWidth-mq(o,e,"left","right")),l=Math.max(0,t.outerHeight-mq(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Cq(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{i[e]=Math.max(t[e],n[e])})),i}return i(e?["left","right"]:["top","bottom"])}function wq(e,t,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=e.length,c=0;s<o;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,Cq(a.horizontal,t));const{same:o,other:d}=yq(t,n,a,i);c|=o&&r.length,u=u||d,l.fullSize||r.push(a)}return c&&wq(r,t,n,i)||u}function bq(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function Sq(e,t,n,i){const r=n.padding;let{x:s,y:o}=t;for(const a of e){const e=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const i=t.w*c,s=l.size||e.height;$j(l.start)&&(o=l.start),e.fullSize?bq(e,r.left,o,n.outerWidth-r.right-r.left,s):bq(e,t.left+l.placed,o,i,s),l.start=o,l.placed+=i,o=e.bottom}else{const i=t.h*c,o=l.size||e.width;$j(l.start)&&(s=l.start),e.fullSize?bq(e,s,r.top,o,n.outerHeight-r.bottom-r.top):bq(e,s,t.top+l.placed,o,i),l.start=s,l.placed+=i,s=e.right}}t.x=s,t.y=o}var Eq={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=xz(e.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(n-r.height,0),a=function(e){const t=function(e){const t=[];let n,i,r,s,o,a;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],({position:s,options:{stack:o,stackWeight:a=1}}=r),t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}(e),n=gq(t.filter((e=>e.box.fullSize)),!0),i=gq(hq(t,"left"),!0),r=gq(hq(t,"right")),s=gq(hq(t,"top"),!0),o=gq(hq(t,"bottom")),a=pq(t,"x"),l=pq(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:hq(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;Hj(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);vq(h,xz(i));const p=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),g=fq(l.concat(c),d);wq(a.fullSize,p,d,g),wq(l,p,d,g),wq(c,p,d,g)&&wq(l,p,d,g),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(p),Sq(a.leftAndTop,p,d,g),p.x+=p.w,p.y+=p.h,Sq(a.rightAndBottom,p,d,g),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Hj(a.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};class xq{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class Aq extends xq{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Tq="$chartjs",_q={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Rq=e=>null===e||""===e;const Dq=!!oY&&{passive:!0};function Mq(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Dq)}function Pq(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Iq(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Pq(n.addedNodes,i),t=t&&!Pq(n.removedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function Nq(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Pq(n.removedNodes,i),t=t&&!Pq(n.addedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const kq=new Map;let Oq=0;function Lq(){const e=window.devicePixelRatio;e!==Oq&&(Oq=e,kq.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function Fq(e,t,n){const i=e.canvas,r=i&&Qz(i);if(!r)return;const s=IU(((e,t)=>{const i=r.clientWidth;n(e,t),i<r.clientWidth&&n()}),window),o=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||s(n,i)}));return o.observe(r),function(e,t){kq.size||window.addEventListener("resize",Lq),kq.set(e,t)}(e,s),o}function Bq(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){kq.delete(e),kq.size||window.removeEventListener("resize",Lq)}(e)}function Vq(e,t,n){const i=e.canvas,r=IU((t=>{null!==e.ctx&&n(function(e,t){const n=_q[e.type]||e.type,{x:i,y:r}=nY(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,Dq)}(i,t,r),r}class Gq extends xq{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[Tq]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Rq(r)){const t=aY(e,"width");void 0!==t&&(e.width=t)}if(Rq(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=aY(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[Tq])return!1;const n=t[Tq].initial;["height","width"].forEach((e=>{const i=n[e];Nj(i)?t.removeAttribute(e):t.setAttribute(e,i)}));const i=n.style||{};return Object.keys(i).forEach((e=>{t.style[e]=i[e]})),t.width=t.width,delete t[Tq],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),r={attach:Iq,detach:Nq,resize:Fq}[t]||Vq;i[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:Bq,detach:Bq,resize:Bq}[t]||Mq)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return rY(e,t,n,i)}isAttached(e){const t=e&&Qz(e);return!(!t||!t.isConnected)}}class Hq{constructor(){An(this,"x",void 0),An(this,"y",void 0),An(this,"active",!1),An(this,"options",void 0),An(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return pU(this.x)&&pU(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach((e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),i}}function Wq(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return function(e,t,n,i){let r,s=0,o=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===o&&(t.push(e[r]),s++,o=n[s*i])}(t,c,s,o/r),c;const u=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),r=t.length/n;if(!i)return Math.max(r,1);const s=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(i);for(let o=0,a=s.length-1;o<a;o++){const e=s[o];if(e>r)return e}return Math.max(r,1)}(s,t,r);if(o>0){let e,n;const i=o>1?Math.round((l-a)/(o-1)):null;for(jq(t,c,u,Nj(i)?0:a-i,a),e=0,n=o-1;e<n;e++)jq(t,c,u,s[e],s[e+1]);return jq(t,c,u,l,Nj(i)?t.length:l+i),c}return jq(t,c,u),c}function jq(e,t,n,i,r){const s=Bj(i,0),o=Math.min(Bj(r,e.length),e.length);let a,l,c,u=0;for(n=Math.ceil(n),r&&(a=r-i,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}An(Hq,"defaults",{}),An(Hq,"defaultRoutes",void 0);const Uq=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,zq=(e,t)=>Math.min(t||e,e);function Yq(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function qq(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,o=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<s-a||c>o+a)))return c}function Kq(e){return e.drawTicks?e.tickLength:0}function Xq(e,t){if(!e.display)return 0;const n=Az(e.font,t),i=xz(e.padding);return(kj(e.text)?e.text.length:1)*n.lineHeight+i.height}function Qq(e,t,n){let i=NU(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class Zq extends Hq{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=Fj(e,Number.POSITIVE_INFINITY),t=Fj(t,Number.NEGATIVE_INFINITY),n=Fj(n,Number.POSITIVE_INFINITY),i=Fj(i,Number.NEGATIVE_INFINITY),{min:Fj(e,n),max:Fj(t,i),minDefined:Lj(e),maxDefined:Lj(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)t=o[a].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(i=Math.max(i,t.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Fj(n,Fj(i,n)),max:Fj(i,Fj(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Gj(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:r}=e,s=Vj(t,(r-i)/2),o=(e,t)=>n&&0===e?0:e+t;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?Yq(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Wq(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Gj(this.options.afterUpdate,[this])}beforeSetDimensions(){Gj(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Gj(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Gj(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Gj(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=Gj(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){Gj(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Gj(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=zq(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let s,o,a,l=i;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=EU(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:h/(n-1),u+6>s&&(s=h/(n-(e.offset?.5:1)),o=this.maxHeight-Kq(e.grid)-t.padding-Xq(e.title,this.chart.options.font),a=Math.sqrt(u*u+d*d),l=mU(Math.min(Math.asin(EU((c.highest.height+6)/s,-1,1)),Math.asin(EU(o/a,-1,1))-Math.asin(EU(d/a,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){Gj(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Gj(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=Xq(i,t.options.font);if(o?(e.width=this.maxWidth,e.height=Kq(r)+s):(e.height=this.maxHeight,e.width=Kq(r)+s),n.display&&this.ticks.length){const{first:t,last:i,widest:r,highest:s}=this._getLabelSizes(),a=2*n.padding,l=fU(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const t=n.mirror?0:u*r.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:c*r.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,i,u,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;a?l?(u=i*e.width,d=n*t.height):(u=n*e.height,d=i*t.width):"start"===r?d=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((d-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,i=e.height/2;"start"===r?(n=0,i=e.height):"end"===r&&(n=t.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Gj(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)Nj(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=Yq(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,s=[],o=[],a=Math.floor(t/zq(t,n));let l,c,u,d,h,p,g,f,m,v,y,C=0,w=0;for(l=0;l<t;l+=a){if(d=e[l].label,h=this._resolveTickFontOptions(l),i.font=p=h.string,g=r[p]=r[p]||{data:{},gc:[]},f=h.lineHeight,m=v=0,Nj(d)||kj(d)){if(kj(d))for(c=0,u=d.length;c<u;++c)y=d[c],Nj(y)||kj(y)||(m=nz(i,g.data,g.gc,m,y),v+=f)}else m=nz(i,g.data,g.gc,m,d),v=f;s.push(m),o.push(v),C=Math.max(m,C),w=Math.max(v,w)}!function(e,t){Hj(e,(e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}}))}(r,t);const b=s.indexOf(C),S=o.indexOf(w),E=e=>({width:s[e]||0,height:o[e]||0});return{first:E(0),last:E(t-1),widest:E(b),highest:E(S),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function(e){return EU(e,-32768,32767)}(this._alignToPixels?rz(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return _z(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return _z(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=fU(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,o=r?r.widest.width+s:0,a=r?r.highest.height+s:0;return this.isHorizontal()?a*n>o*i?o/n:a/i:a*i<o*n?a/n:o/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:o}=i,a=r.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=Kq(r),d=[],h=o.setContext(this.getContext()),p=h.display?h.width:0,g=p/2,f=function(e){return rz(n,e,p)};let m,v,y,C,w,b,S,E,x,A,T,_;if("top"===s)m=f(this.bottom),b=this.bottom-u,E=m-g,A=f(e.top)+g,_=e.bottom;else if("bottom"===s)m=f(this.top),A=e.top,_=f(e.bottom)-g,b=m+g,E=this.top+u;else if("left"===s)m=f(this.right),w=this.right-u,S=m-g,x=f(e.left)+g,T=e.right;else if("right"===s)m=f(this.left),x=e.left,T=f(e.right)-g,w=m+g,S=this.left+u;else if("x"===t){if("center"===s)m=f((e.top+e.bottom)/2+.5);else if(Oj(s)){const e=Object.keys(s)[0],t=s[e];m=f(this.chart.scales[e].getPixelForValue(t))}A=e.top,_=e.bottom,b=m+g,E=b+u}else if("y"===t){if("center"===s)m=f((e.left+e.right)/2);else if(Oj(s)){const e=Object.keys(s)[0],t=s[e];m=f(this.chart.scales[e].getPixelForValue(t))}w=m-g,S=w-u,x=e.left,T=e.right}const R=Bj(i.ticks.maxTicksLimit,c),D=Math.max(1,Math.ceil(c/R));for(v=0;v<c;v+=D){const e=this.getContext(v),t=r.setContext(e),i=o.setContext(e),s=t.lineWidth,c=t.color,u=i.dash||[],h=i.dashOffset,p=t.tickWidth,g=t.tickColor,f=t.tickBorderDash||[],m=t.tickBorderDashOffset;y=qq(this,v,a),void 0!==y&&(C=rz(n,y,s),l?w=S=x=T=C:b=E=A=_=C,d.push({tx1:w,ty1:b,tx2:S,ty2:E,x1:x,y1:A,x2:T,y2:_,width:s,color:c,borderDash:u,borderDashOffset:h,tickWidth:p,tickColor:g,tickBorderDash:f,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=r,d=Kq(n.grid),h=d+c,p=u?-c:h,g=-fU(this.labelRotation),f=[];let m,v,y,C,w,b,S,E,x,A,T,_,R="middle";if("top"===i)b=this.bottom-p,S=this._getXAxisLabelAlignment();else if("bottom"===i)b=this.top+p,S=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(d);S=e.textAlign,w=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(d);S=e.textAlign,w=e.x}else if("x"===t){if("center"===i)b=(e.top+e.bottom)/2+h;else if(Oj(i)){const e=Object.keys(i)[0],t=i[e];b=this.chart.scales[e].getPixelForValue(t)+h}S=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)w=(e.left+e.right)/2-h;else if(Oj(i)){const e=Object.keys(i)[0],t=i[e];w=this.chart.scales[e].getPixelForValue(t)}S=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===a?R="top":"end"===a&&(R="bottom"));const D=this._getLabelSizes();for(m=0,v=o.length;m<v;++m){y=o[m],C=y.label;const e=r.setContext(this.getContext(m));E=this.getPixelForTick(m)+r.labelOffset,x=this._resolveTickFontOptions(m),A=x.lineHeight,T=kj(C)?C.length:1;const t=T/2,n=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let d,h=S;if(s?(w=E,"inner"===S&&(h=m===v-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),_="top"===i?"near"===l||0!==g?-T*A+A/2:"center"===l?-D.highest.height/2-t*A+A:-D.highest.height+A/2:"near"===l||0!==g?A/2:"center"===l?D.highest.height/2-t*A:D.highest.height-T*A,u&&(_*=-1),0===g||e.showLabelBackdrop||(w+=A/2*Math.sin(g))):(b=E,_=(1-T)*A/2),e.showLabelBackdrop){const t=xz(e.backdropPadding),n=D.heights[m],i=D.widths[m];let r=_-t.top,s=0-t.left;switch(R){case"middle":r-=n/2;break;case"bottom":r-=n}switch(S){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":m===v-1?s-=i:m>0&&(s-=i/2)}d={left:s,top:r,width:i+t.width,height:n+t.height,color:e.backdropColor}}f.push({label:C,font:x,textOffset:_,options:{rotation:g,color:n,strokeColor:a,strokeWidth:c,textAlign:h,textBaseline:R,translation:[w,b],backdrop:d}})}return f}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-fU(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=e+r,o=this._getLabelSizes().widest.width;let a,l;return"left"===t?i?(l=this.right+r,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===t?i?(l=this.left+r,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const o=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,s=i.length;r<s;++r){const e=i[r];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=rz(e,this.left,s)-s/2,c=rz(e,this.right,o)+o/2,u=d=a):(u=rz(e,this.top,s)-s/2,d=rz(e,this.bottom,o)+o/2,l=c=a),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&cz(t,n);const i=this.getLabelItems(e);for(const r of i){const e=r.options,n=r.font;fz(t,r.label,0,r.textOffset,n,e)}n&&uz(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=Az(n.font),s=xz(n.padding),o=n.align;let a=r.lineHeight/2;"bottom"===t||"center"===t||Oj(t)?(a+=s.bottom,kj(n.text)&&(a+=r.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,p,g=0;const f=o-r,m=a-s;if(e.isHorizontal()){if(h=kU(i,s,a),Oj(n)){const e=Object.keys(n)[0],i=n[e];p=u[e].getPixelForValue(i)+f-t}else p="center"===n?(c.bottom+c.top)/2+f-t:Uq(e,n,t);d=a-s}else{if(Oj(n)){const e=Object.keys(n)[0],i=n[e];h=u[e].getPixelForValue(i)-m+t}else h="center"===n?(c.left+c.right)/2-m+t:Uq(e,n,t);p=kU(i,o,r),g="left"===n?-oU:oU}return{titleX:h,titleY:p,maxWidth:d,rotation:g}}(this,a,t,o);fz(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:d,textAlign:Qq(o,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=Bj(e.grid&&e.grid.z,-1),i=Bj(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Zq.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];s[n]!==this.id||e&&s.type!==e||i.push(s)}return i}_resolveTickFontOptions(e){return Az(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class $q{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){const i=Yj(Object.create(null),[n?tz.get(n):{},tz.get(t),e.defaults]);tz.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");tz.route(s,r,l,a)}))}(t,e.defaultRoutes);e.descriptors&&tz.describe(t,e.descriptors)}(e,s,n),this.override&&tz.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in tz[i]&&(delete tz[i][n],this.override&&delete QU[n])}}class Jq{constructor(){this.controllers=new $q(BY,"datasets",!0),this.elements=new $q(Hq,"elements"),this.plugins=new $q(Object,"plugins"),this.scales=new $q(Zq,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):Hj(t,(t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)}))}))}_exec(e,t,n){const i=Zj(e);Gj(n["before"+i],[],n),t[e](n),Gj(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var eK=new Jq;class tK{constructor(){this._init=[]}notify(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,i){i=i||{};for(const r of e){const e=r.plugin;if(!1===Gj(e[n],[t,i,r.options],e)&&i.cancelable)return!1}return!0}invalidate(){Nj(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=Bj(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],i=Object.keys(eK.plugins.items);for(let s=0;s<i.length;s++)n.push(eK.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const e=r[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:r,localIds:s}=t;const o=[],a=e.getContext();for(const l of r){const t=l.id,r=nK(n[t],i);null!==r&&o.push({plugin:l,options:iK(e.config,{plugin:l,local:s[t]},r,a)})}return o}(e,r,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function nK(e,t){return t||!1!==e?!0===e?{}:e:null}function iK(e,t,n,i){let{plugin:r,local:s}=t;const o=e.pluginScopeKeys(r),a=e.getOptionScopes(n,o);return s&&r.defaults&&a.push(r.defaults),e.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function rK(e,t){const n=tz.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function sK(e){if("x"===e||"y"===e||"r"===e)return e}function oK(e){if(sK(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of n){const t=s.axis||("top"===(r=s.position)||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0)||e.length>1&&sK(e[0].toLowerCase());if(t)return t}var r;throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function aK(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function lK(e,t){const n=QU[e.type]||{scales:{}},i=t.scales||{},r=rK(e.type,t),s=Object.create(null);return Object.keys(i).forEach((t=>{const o=i[t];if(!Oj(o))return console.error("Invalid scale configuration for scale: ".concat(t));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const a=oK(t,o,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return aK(e,"x",n[0])||aK(e,"y",n[0])}return{}}(t,e),tz.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(a,r),c=n.scales||{};s[t]=qj(Object.create(null),[{axis:a},o,c[a],c[l]])})),e.data.datasets.forEach((n=>{const r=n.type||e.type,o=n.indexAxis||rK(r,t),a=(QU[r]||{}).scales||{};Object.keys(a).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),r=n[t+"AxisID"]||t;s[r]=s[r]||Object.create(null),qj(s[r],[{axis:t},i[r],a[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];qj(t,[tz.scales[t.type],tz.scale])})),s}function cK(e){const t=e.options||(e.options={});t.plugins=Bj(t.plugins,{}),t.scales=lK(e,t)}function uK(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const dK=new Map,hK=new Set;function pK(e,t){let n=dK.get(e);return n||(n=t(),dK.set(e,n),hK.add(n)),n}const gK=(e,t,n)=>{const i=Qj(t,n);void 0!==i&&e.add(i)};class fK{constructor(e){this._config=function(e){return(e=e||{}).data=uK(e.data),cK(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=uK(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),cK(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return pK(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return pK("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return pK("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return pK("".concat(n,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,s=this._cachedScopes(e,n),o=s.get(t);if(o)return o;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>gK(a,e,t)))),t.forEach((e=>gK(a,i,e))),t.forEach((e=>gK(a,QU[r]||{},e))),t.forEach((e=>gK(a,tz,e))),t.forEach((e=>gK(a,ZU,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),hK.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,QU[t]||{},tz.datasets[t]||{},{type:t},tz,ZU]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:o}=mK(this._resolverCache,e,i);let a=s;if(function(e,t){const{isScriptable:n,isIndexable:i}=Mz(e);for(const r of t){const t=n(r),s=i(r),o=(s||t)&&e[r];if(t&&(Jj(o)||vK(o))||s&&kj(o))return!0}return!1}(s,t)){r.$shared=!1;a=Dz(s,n=Jj(n)?n():n,this.createResolver(e,n,o))}for(const l of t)r[l]=a[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=mK(this._resolverCache,e,n);return Oj(t)?Dz(r,t,void 0,i):r}}function mK(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:Rz(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},i.set(r,s)}return s}const vK=e=>Oj(e)&&Object.getOwnPropertyNames(e).some((t=>Jj(e[t])));const yK=["top","bottom","left","right","chartArea"];function CK(e,t){return"top"===e||"bottom"===e||-1===yK.indexOf(e)&&"x"===t}function wK(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function bK(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Gj(n&&n.onComplete,[e],t)}function SK(e){const t=e.chart,n=t.options.animation;Gj(n&&n.onProgress,[e],t)}function EK(e){return Xz()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const xK={},AK=e=>{const t=EK(e);return Object.values(xK).filter((e=>e.canvas===t)).pop()};function TK(e,t,n){const i=Object.keys(e);for(const r of i){const i=+r;if(i>=t){const s=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=s)}}}function _K(e,t,n){return e.options.clip?e[n]:t[n]}class RK{static register(){eK.add(...arguments),DK()}static unregister(){eK.remove(...arguments),DK()}constructor(e,t){const n=this.config=new fK(t),i=EK(e),r=AK(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Xz()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Aq:Gq}(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=Ij(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new tK,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],xK[this.id]=this,o&&a?(SY.listen(this,"complete",bK),SY.listen(this,"progress",SK),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return Nj(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return eK}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():sY(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sz(this.canvas,this.ctx),this}stop(){return SY.stop(this),this}resize(e,t){SY.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,t,r),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,sY(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Gj(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){Hj(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let r=[];t&&(r=r.concat(Object.keys(t).map((e=>{const n=t[e],i=oK(e,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}})))),Hj(r,(t=>{const r=t.options,s=r.id,o=oK(s,r),a=Bj(r.type,t.dtype);void 0!==r.position&&CK(r.position,o)===CK(t.dposition)||(r.position=t.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(eK.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)})),Hj(i,((e,t)=>{e||delete n[t]})),Hj(n,(e=>{Eq.configure(this,e,e.options),Eq.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(wK("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||rK(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=eK.getController(s),{datasetElementType:i,dataElementType:o}=tz.datasets[s];Object.assign(t,{dataElementType:eK.getElement(o),datasetElementType:i&&eK.getElement(i)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Hj(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||Hj(r,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(wK("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Hj(this.scales,(e=>{Eq.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);eU(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){TK(e,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),i=n(0);for(let r=1;r<t;r++)if(!eU(i,n(r)))return;return Array.from(i).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Eq.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Hj(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Jj(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(SY.has(this)?this.attached&&!SY.running(this)&&SY.start(this):(this.draw(),bK({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const r=t[i];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,i=!n.disabled,r=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:_K(n,t,"left"),right:_K(n,t,"right"),top:_K(i,t,"top"),bottom:_K(i,t,"bottom")}:t}(e,this.chartArea),s={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(i&&cz(t,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),e.controller.draw(),i&&uz(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return lz(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=uq.modes[t];return"function"===typeof r?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter((e=>e&&e._dataset===t)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=_z(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,i);$j(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update((t=>t.datasetIndex===e?i:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),SY.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),sz(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete xK[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Hj(this.options.events,(e=>n(e,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():s()}unbindEvents(){Hj(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},Hj(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,s,o,a;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=e.length;o<a;++o){s=e[o];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}));!Wj(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=r(t,e),o=n?e:r(e,t);s.length&&this.updateHoverStyle(s,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,s=t,o=this._getActiveElements(e,i,n,s),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,Gj(r.onHover,[e,o,this],this),a&&Gj(r.onClick,[e,o,this],this));const c=!Wj(o,i);return(c||t)&&(this._active=o,this._updateHoverStyles(o,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}function DK(){return Hj(RK.instances,(e=>e._plugins.invalidate()))}function MK(e,t,n,i){const r=function(e){return bz(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),s=(n-t)/2,o=Math.min(s,i*t/2),a=e=>{const t=(n-Math.min(s,e))*i/2;return EU(e,0,Math.min(s,t))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:EU(r.innerStart,0,o),innerEnd:EU(r.innerEnd,0,o)}}function PK(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function IK(e,t,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+i+n-c,0),h=u>0?u+i+n+c:0;let p=0;const g=r-l;if(i){const e=((u>0?u-i:0)+(d>0?d-i:0))/2;p=(g-(0!==e?g*e/(e+i):g))/2}const f=(g-Math.max(.001,g*d-n/tU)/d)/2,m=l+f+p,v=r-f-p,{outerStart:y,outerEnd:C,innerStart:w,innerEnd:b}=MK(t,h,d,v-m),S=d-y,E=d-C,x=m+y/S,A=v-C/E,T=h+w,_=h+b,R=m+w/T,D=v-b/_;if(e.beginPath(),s){const t=(x+A)/2;if(e.arc(o,a,d,x,t),e.arc(o,a,d,t,A),C>0){const t=PK(E,A,o,a);e.arc(t.x,t.y,C,A,v+oU)}const n=PK(_,v,o,a);if(e.lineTo(n.x,n.y),b>0){const t=PK(_,D,o,a);e.arc(t.x,t.y,b,v+oU,D+Math.PI)}const i=(v-b/h+(m+w/h))/2;if(e.arc(o,a,h,v-b/h,i,!0),e.arc(o,a,h,i,m+w/h,!0),w>0){const t=PK(T,R,o,a);e.arc(t.x,t.y,w,R+Math.PI,m-oU)}const r=PK(S,m,o,a);if(e.lineTo(r.x,r.y),y>0){const t=PK(S,x,o,a);e.arc(t.x,t.y,y,m-oU,x)}}else{e.moveTo(o,a);const t=Math.cos(x)*d+o,n=Math.sin(x)*d+a;e.lineTo(t,n);const i=Math.cos(A)*d+o,r=Math.sin(A)*d+a;e.lineTo(i,r)}e.closePath()}function NK(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=h,p?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let g=t.endAngle;if(s){IK(e,t,n,i,g,r);for(let t=0;t<s;++t)e.stroke();isNaN(a)||(g=o+(a%nU||nU))}p&&function(e,t,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=r/a;e.beginPath(),e.arc(s,o,a,i-c,n+c),l>r?(c=r/l,e.arc(s,o,l,n+c,i-c,!0)):e.arc(s,o,r,n+oU,i-oU),e.closePath(),e.clip()}(e,t,g),s||(IK(e,t,n,i,g,r),e.stroke())}An(RK,"defaults",tz),An(RK,"instances",xK),An(RK,"overrides",QU),An(RK,"registry",eK),An(RK,"version","4.4.3"),An(RK,"getChart",AK);class kK extends Hq{constructor(e){super(),An(this,"circumference",void 0),An(this,"endAngle",void 0),An(this,"fullCircles",void 0),An(this,"innerRadius",void 0),An(this,"outerRadius",void 0),An(this,"pixelMargin",void 0),An(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=yU(i,{x:e,y:t}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=Bj(u,a-o)>=nU||SU(r,o,a),p=xU(s,l+d,c+d);return h&&p}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(i+r)/2,u=(s+o+l+a)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>nU?Math.floor(n/nU):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*i,Math.sin(o)*i);const a=i*(1-Math.sin(Math.min(tU,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){IK(e,t,n,i,l,r);for(let t=0;t<s;++t)e.fill();isNaN(a)||(l=o+(a%nU||nU))}IK(e,t,n,i,l,r),e.fill()}(e,this,a,r,s),NK(e,this,a,r,s),e.restore()}}function OK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Bj(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Bj(n.borderDash,t.borderDash)),e.lineDashOffset=Bj(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Bj(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Bj(n.borderWidth,t.borderWidth),e.strokeStyle=Bj(n.borderColor,t.borderColor)}function LK(e,t,n){e.lineTo(n.x,n.y)}function FK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function BK(e,t,n,i){const{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:c}=FK(r,n,i),u=function(e){return e.stepped?dz:e.tension||"monotone"===e.cubicInterpolationMode?hz:LK}(s);let d,h,p,{move:g=!0,reverse:f}=i||{};for(d=0;d<=c;++d)h=r[(a+(f?c-d:d))%o],h.skip||(g?(e.moveTo(h.x,h.y),g=!1):u(e,p,h,f,s.stepped),p=h);return l&&(h=r[(a+(f?c:0))%o],u(e,p,h,f,s.stepped)),!!l}function VK(e,t,n,i){const r=t.points,{count:s,start:o,ilen:a}=FK(r,n,i),{move:l=!0,reverse:c}=i||{};let u,d,h,p,g,f,m=0,v=0;const y=e=>(o+(c?a-e:e))%s,C=()=>{p!==g&&(e.lineTo(m,g),e.lineTo(m,p),e.lineTo(m,f))};for(l&&(d=r[y(0)],e.moveTo(d.x,d.y)),u=0;u<=a;++u){if(d=r[y(u)],d.skip)continue;const t=d.x,n=d.y,i=0|t;i===h?(n<p?p=n:n>g&&(g=n),m=(v*m+t)/++v):(C(),e.lineTo(t,n),h=i,v=0,p=g=n),f=n}C()}function GK(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?VK:BK}An(kK,"id","arc"),An(kK,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),An(kK,"defaultRoutes",{backgroundColor:"backgroundColor"}),An(kK,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const HK="function"===typeof Path2D;function WK(e,t,n,i){HK&&!t.options.segment?function(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),OK(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){const{segments:r,options:s}=t,o=GK(t);for(const a of r)OK(e,s,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class jK extends Hq{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;Kz(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:o,end:a}=function(e,t,n,i){let r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}(n,r,s,i);return yY(e,!0===i?[{start:o,end:a,loop:s}]:function(e,t,n,i){const r=e.length,s=[];let o,a=t,l=e[t];for(o=t+1;o<=n;++o){const n=e[o%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:t%r,end:(o-1)%r,loop:i}),t=a=n.stop?o:null):(a=o,l.skip&&(t=o)),l=n}return null!==a&&s.push({start:t%r,end:a%r,loop:i}),s}(n,o,a<o?a+r:a,!!e._fullLoop&&0===o&&a===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,s=vY(this,{property:t,start:i,end:i});if(!s.length)return;const o=[],a=function(e){return e.stepped?cY:e.tension||"monotone"===e.cubicInterpolationMode?uY:lY}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],d=r[c],h=r[u];if(d===h){o.push(d);continue}const p=a(d,h,Math.abs((i-d[t])/(h[t]-d[t])),n.stepped);p[t]=e[t],o.push(p)}return 1===o.length?o[0]:o}pathSegment(e,t,n){return GK(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=GK(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const o of i)s&=r(e,this,o,{start:t,end:t+n-1});return!!s}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),WK(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function UK(e,t,n,i){const r=e.options,{[n]:s}=e.getProps([n],i);return Math.abs(t-s)<r.radius+r.hitRadius}An(jK,"id","line"),An(jK,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),An(jK,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),An(jK,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class zK extends Hq{constructor(e){super(),An(this,"parsed",void 0),An(this,"skip",void 0),An(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return UK(this,e,"x",t)}inYRange(e,t){return UK(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!lz(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,oz(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function YK(e,t){const{x:n,y:i,base:r,width:s,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,d;return e.horizontal?(d=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-d,u=i+d):(d=s/2,a=n-d,l=n+d,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function qK(e,t,n,i){return e?0:EU(t,n,i)}function KK(e){const t=YK(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,s=Sz(i);return{t:qK(r.top,s.top,0,n),r:qK(r.right,s.right,0,t),b:qK(r.bottom,s.bottom,0,n),l:qK(r.left,s.left,0,t)}}(e,n/2,i/2),s=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=Ez(r),o=Math.min(t,n),a=e.borderSkipped,l=i||Oj(r);return{topLeft:qK(!l||a.top||a.left,s.topLeft,0,o),topRight:qK(!l||a.top||a.right,s.topRight,0,o),bottomLeft:qK(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:qK(!l||a.bottom||a.right,s.bottomRight,0,o)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function XK(e,t,n,i){const r=null===t,s=null===n,o=e&&!(r&&s)&&YK(e,i);return o&&(r||xU(t,o.left,o.right))&&(s||xU(n,o.top,o.bottom))}function QK(e,t){e.rect(t.x,t.y,t.w,t.h)}function ZK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-i,o=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+s,h:e.h+o,radius:e.radius}}An(zK,"id","point"),An(zK,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),An(zK,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class $K extends Hq{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=KK(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?mz:QK;var a;e.save(),s.w===r.w&&s.h===r.h||(e.beginPath(),o(e,ZK(s,t,r)),e.clip(),o(e,ZK(r,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,ZK(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return XK(this,e,t,n)}inXRange(e,t){return XK(this,e,null,t)}inYRange(e,t){return XK(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}An($K,"id","bar"),An($K,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),An($K,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const JK=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class eX extends Hq{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Gj(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=Az(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=JK(n,r);let l,c;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,i,o,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+o;let u=e;r.textAlign="left",r.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach(((e,p)=>{const g=n+t/2+r.measureText(e.text).width;(0===p||l[l.length-1]+g+2*o>s)&&(u+=c,l[l.length-(p>0?0:1)]=0,h+=c,d++),a[p]={left:0,top:h,row:d,width:g,height:i},l[l.length-1]+=g+o})),u}_fitCols(e,t,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=o,d=0,h=0,p=0,g=0;return this.legendItems.forEach(((e,s)=>{const{itemWidth:f,itemHeight:m}=function(e,t,n,i,r){const s=function(e,t,n,i){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+i.measureText(r).width}(i,e,t,n),o=function(e,t,n){let i=e;"string"!==typeof t.text&&(i=tX(t,n));return i}(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}(n,t,r,e,i);s>0&&h+m+2*o>c&&(u+=d+o,l.push({width:d,height:h}),p+=d+o,g++,d=h=0),a[s]={left:p,top:h,col:g,width:f,height:m},d=Math.max(d,f),h+=m+o})),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,s=dY(r,this.left,this.width);if(this.isHorizontal()){let r=0,o=kU(n,this.left+i,this.right-this.lineWidths[r]);for(const a of t)r!==a.row&&(r=a.row,o=kU(n,this.left+i,this.right-this.lineWidths[r])),a.top+=this.top+e+i,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+i}else{let r=0,o=kU(n,this.top+e+i,this.bottom-this.columnSizes[r].height);for(const a of t)a.col!==r&&(r=a.col,o=kU(n,this.top+e+i,this.bottom-this.columnSizes[r].height)),a.top=o,a.left+=this.left+i,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;cz(e,this),this._draw(),uz(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:s}=e,o=tz.color,a=dY(e.rtl,this.left,this.width),l=Az(s.font),{padding:c}=s,u=l.size,d=u/2;let h;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:p,boxHeight:g,itemHeight:f}=JK(s,u),m=this.isHorizontal(),v=this._computeTitleHeight();h=m?{x:kU(r,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:kU(r,this.top+v+c,this.bottom-t[0].height),line:0},hY(this.ctx,e.textDirection);const y=f+c;this.legendItems.forEach(((C,w)=>{i.strokeStyle=C.fontColor,i.fillStyle=C.fontColor;const b=i.measureText(C.text).width,S=a.textAlign(C.textAlign||(C.textAlign=s.textAlign)),E=p+d+b;let x=h.x,A=h.y;a.setWidth(this.width),m?w>0&&x+E+c>this.right&&(A=h.y+=y,h.line++,x=h.x=kU(r,this.left+c,this.right-n[h.line])):w>0&&A+y>this.bottom&&(x=h.x=x+t[h.line].width+c,h.line++,A=h.y=kU(r,this.top+v+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();const r=Bj(n.lineWidth,1);if(i.fillStyle=Bj(n.fillStyle,o),i.lineCap=Bj(n.lineCap,"butt"),i.lineDashOffset=Bj(n.lineDashOffset,0),i.lineJoin=Bj(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=Bj(n.strokeStyle,o),i.setLineDash(Bj(n.lineDash,[])),s.usePointStyle){const o={radius:g*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=a.xPlus(e,p/2);az(i,o,l,t+d,s.pointStyleWidth&&p)}else{const s=t+Math.max((u-g)/2,0),o=a.leftForLtr(e,p),l=Ez(n.borderRadius);i.beginPath(),Object.values(l).some((e=>0!==e))?mz(i,{x:o,y:s,w:p,h:g,radius:l}):i.rect(o,s,p,g),i.fill(),0!==r&&i.stroke()}i.restore()}(a.x(x),A,C),x=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(S,x+p+d,m?x+E:this.right,e.rtl),function(e,t,n){fz(i,n.text,e,t+f/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(x),A,C),m)h.x+=E+c;else if("string"!==typeof C.text){const e=l.lineHeight;h.y+=tX(C,e)+c}else h.y+=y})),pY(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=Az(t.font),i=xz(t.padding);if(!t.display)return;const r=dY(e.rtl,this.left,this.width),s=this.ctx,o=t.position,a=n.size/2,l=i.top+a;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=kU(e.align,u,this.right-d);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+kU(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=kU(o,u,u+d);s.textAlign=r.textAlign(NU(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,fz(s,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=Az(e.font),n=xz(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(xU(e,this.left,this.right)&&xU(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],xU(e,i.left,i.left+i.width)&&xU(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,r=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(i,n);i&&!r&&Gj(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!r&&Gj(t.onHover,[e,n,this],this)}else n&&Gj(t.onClick,[e,n,this],this)}}function tX(e,t){return t*(e.text?e.text.length:0)}var nX={id:"legend",_element:eX,start(e,t,n){const i=e.legend=new eX({ctx:e.ctx,options:n,chart:e});Eq.configure(e,i,n),Eq.addBox(e,i)},stop(e){Eq.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Eq.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=xz(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class iX extends Hq{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=kj(n.text)?n.text.length:1;this._padding=xz(n.padding);const r=i*Az(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:i,right:r,options:s}=this,o=s.align;let a,l,c,u=0;return this.isHorizontal()?(l=kU(o,n,r),c=t+e,a=r-n):("left"===s.position?(l=n+e,c=kU(o,i,t),u=-.5*tU):(l=r-e,c=kU(o,t,i),u=.5*tU),a=i-t),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=Az(t.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:o,rotation:a}=this._drawArgs(i);fz(e,t.text,0,0,n,{color:t.color,maxWidth:o,rotation:a,textAlign:NU(t.align),textBaseline:"middle",translation:[r,s]})}}var rX={id:"title",_element:iX,start(e,t,n){!function(e,t){const n=new iX({ctx:e.ctx,options:t,chart:e});Eq.configure(e,n,t),Eq.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;Eq.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;Eq.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const sX={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),r+=e.y,++s}}const o=[...i].reduce(((e,t)=>e+t))/i.size;return{x:o,y:r/s}},nearest(e,t){if(!e.length)return!1;let n,i,r,s=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=CU(t,i.getCenterPoint());e<a&&(a=e,r=i)}}if(r){const e=r.tooltipPosition();s=e.x,o=e.y}return{x:s,y:o}}};function oX(e,t){return t&&(kj(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function aX(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function lX(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:e,label:o,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function cX(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:o,boxHeight:a}=t,l=Az(t.bodyFont),c=Az(t.titleFont),u=Az(t.footerFont),d=s.length,h=r.length,p=i.length,g=xz(t.padding);let f=g.height,m=0,v=i.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(v+=e.beforeBody.length+e.afterBody.length,d&&(f+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){f+=p*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(v-p)*l.lineHeight+(v-1)*t.bodySpacing}h&&(f+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let y=0;const C=function(e){m=Math.max(m,n.measureText(e).width+y)};return n.save(),n.font=c.string,Hj(e.title,C),n.font=l.string,Hj(e.beforeBody.concat(e.afterBody),C),y=t.displayColors?o+2+t.boxPadding:0,Hj(i,(e=>{Hj(e.before,C),Hj(e.lines,C),Hj(e.after,C)})),y=0,n.font=u.string,Hj(e.footer,C),n.restore(),m+=g.width,{width:m,height:f}}function uX(e,t,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),function(e,t,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;return"left"===e&&r+s+o>t.width||"right"===e&&r-s-o<0||void 0}(c,e,t,n)&&(c="center"),c}function dX(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||uX(e,t,n,i),yAlign:i}}function hX(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=Ez(o);let g=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,a);const f=function(e,t,n){let{y:i,height:r}=e;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,c);return"center"===l?"left"===a?g+=c:"right"===a&&(g-=c):"left"===a?g-=Math.max(u,h)+r:"right"===a&&(g+=Math.max(d,p)+r),{x:EU(g,0,i.width-t.width),y:EU(f,0,i.height-t.height)}}function pX(e,t,n){const i=xz(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function gX(e){return oX([],aX(e))}function fX(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const mX={beforeTitle:Pj,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Pj,beforeBody:Pj,beforeLabel:Pj,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Nj(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Pj,afterBody:Pj,beforeFooter:Pj,footer:Pj,afterFooter:Pj};function vX(e,t,n,i){const r=e[t].call(n,i);return"undefined"===typeof r?mX[t].call(n,i):r}class yX extends Hq{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new TY(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,_z(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=vX(n,"beforeTitle",this,e),r=vX(n,"title",this,e),s=vX(n,"afterTitle",this,e);let o=[];return o=oX(o,aX(i)),o=oX(o,aX(r)),o=oX(o,aX(s)),o}getBeforeBody(e,t){return gX(vX(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return Hj(e,(e=>{const t={before:[],lines:[],after:[]},r=fX(n,e);oX(t.before,aX(vX(r,"beforeLabel",this,e))),oX(t.lines,vX(r,"label",this,e)),oX(t.after,aX(vX(r,"afterLabel",this,e))),i.push(t)})),i}getAfterBody(e,t){return gX(vX(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=vX(n,"beforeFooter",this,e),r=vX(n,"footer",this,e),s=vX(n,"afterFooter",this,e);let o=[];return o=oX(o,aX(i)),o=oX(o,aX(r)),o=oX(o,aX(s)),o}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],s=[];let o,a,l=[];for(o=0,a=t.length;o<a;++o)l.push(lX(this.chart,t[o]));return e.filter&&(l=l.filter(((t,i,r)=>e.filter(t,i,r,n)))),e.itemSort&&(l=l.sort(((t,i)=>e.itemSort(t,i,n)))),Hj(l,(t=>{const n=fX(e.callbacks,t);i.push(vX(n,"labelColor",this,t)),r.push(vX(n,"labelPointStyle",this,t)),s.push(vX(n,"labelTextColor",this,t))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const e=sX[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=cX(this,n),o=Object.assign({},e,t),a=dX(this.chart,n,o),l=hX(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=Ez(o),{x:d,y:h}=e,{width:p,height:g}=t;let f,m,v,y,C,w;return"center"===r?(C=h+g/2,"left"===i?(f=d,m=f-s,y=C+s,w=C-s):(f=d+p,m=f+s,y=C-s,w=C+s),v=f):(m="left"===i?d+Math.max(a,c)+s:"right"===i?d+p-Math.max(l,u)-s:this.caretX,"top"===r?(y=h,C=y-s,f=m-s,v=m+s):(y=h+g,C=y+s,f=m+s,v=m-s),w=y),{x1:f,x2:m,x3:v,y1:y,y2:C,y3:w}}drawTitle(e,t,n){const i=this.title,r=i.length;let s,o,a;if(r){const l=dY(n.rtl,this.x,this.width);for(e.x=pX(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=Az(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,a=0;a<r;++a)t.fillText(i[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,a+1===r&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,i,r){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=r,c=Az(r.bodyFont),u=pX(this,"left",r),d=i.x(u),h=a<c.lineHeight?(c.lineHeight-a)/2:0,p=t.y+h;if(r.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=i.leftForLtr(d,l)+l/2,c=p+a/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,oz(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,oz(e,t,n,c)}else{e.lineWidth=Oj(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=i.leftForLtr(d,l),n=i.leftForLtr(i.xPlus(d,1),l-2),o=Ez(s.borderRadius);Object.values(o).some((e=>0!==e))?(e.beginPath(),e.fillStyle=r.multiKeyBackground,mz(e,{x:t,y:p,w:l,h:a,radius:o}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),mz(e,{x:n,y:p+1,w:l-2,h:a-2,radius:o}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,p,l,a),e.strokeRect(t,p,l,a),e.fillStyle=s.backgroundColor,e.fillRect(n,p+1,l-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=Az(n.bodyFont);let d=u.lineHeight,h=0;const p=dY(n.rtl,this.x,this.width),g=function(n){t.fillText(n,p.x(e.x+h),e.y+d/2),e.y+=d+r},f=p.textAlign(s);let m,v,y,C,w,b,S;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=pX(this,f,n),t.fillStyle=n.bodyColor,Hj(this.beforeBody,g),h=o&&"right"!==f?"center"===s?l/2+c:l+2+c:0,C=0,b=i.length;C<b;++C){for(m=i[C],v=this.labelTextColors[C],t.fillStyle=v,Hj(m.before,g),y=m.lines,o&&y.length&&(this._drawColorBox(t,e,C,p,n),d=Math.max(u.lineHeight,a)),w=0,S=y.length;w<S;++w)g(y[w]),d=u.lineHeight;Hj(m.after,g)}h=0,d=u.lineHeight,Hj(this.afterBody,g),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let s,o;if(r){const a=dY(n.rtl,this.x,this.width);for(e.x=pX(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",s=Az(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,o=0;o<r;++o)t.fillText(i[o],a.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:s}=this,{x:o,y:a}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=Ez(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(o+u,a),"top"===s&&this.drawCaret(e,t,n,i),t.lineTo(o+l-d,a),t.quadraticCurveTo(o+l,a,o+l,a+d),"center"===s&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(o+l,a+c-p),t.quadraticCurveTo(o+l,a+c,o+l-p,a+c),"bottom"===s&&this.drawCaret(e,t,n,i),t.lineTo(o+h,a+c),t.quadraticCurveTo(o,a+c,o,a+c-h),"center"===s&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(o,a+u),t.quadraticCurveTo(o,a,o+u,a),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=sX[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=cX(this,e),o=Object.assign({},n,this._size),a=dX(t,e,o),l=hX(e,o,a,t);i._to===l.x&&r._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=xz(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),hY(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),pY(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}})),r=!Wj(n,i),s=this._positionChanged(i,t);(r||s)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(e,r,t,n),o=this._positionChanged(s,e),a=t||!Wj(s,r)||o;return a&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,i){const r=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const s=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,s=sX[r.position].call(this,e,t);return!1!==s&&(n!==s.x||i!==s.y)}}An(yX,"positioners",sX);var CX={id:"tooltip",_element:yX,positioners:sX,afterInit(e,t,n){n&&(e.tooltip=new yX({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:mX},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function wX(e,t,n,i){const r=e.indexOf(t);if(-1===r)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return r!==e.lastIndexOf(t)?n:r}function bX(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class SX extends Zq{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Nj(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:EU(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:wX(n,e,Bj(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)i.push({value:s});return i}getLabelForValue(e){return bX.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function EX(e,t){const n=[],{bounds:i,step:r,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=r||1,p=c-1,{min:g,max:f}=t,m=!Nj(s),v=!Nj(o),y=!Nj(l),C=(f-g)/(u+1);let w,b,S,E,x=hU((f-g)/p/h)*h;if(x<1e-14&&!m&&!v)return[{value:g},{value:f}];E=Math.ceil(f/x)-Math.floor(g/x),E>p&&(x=hU(E*x/p/h)*h),Nj(a)||(w=Math.pow(10,a),x=Math.ceil(x*w)/w),"ticks"===i?(b=Math.floor(g/x)*x,S=Math.ceil(f/x)*x):(b=g,S=f),m&&v&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((o-s)/r,x/1e3)?(E=Math.round(Math.min((o-s)/x,c)),x=(o-s)/E,b=s,S=o):y?(b=m?s:b,S=v?o:S,E=l-1,x=(S-b)/E):(E=(S-b)/x,E=dU(E,Math.round(E),x/1e3)?Math.round(E):Math.ceil(E));const A=Math.max(vU(x),vU(b));w=Math.pow(10,Nj(a)?A:a),b=Math.round(b*w)/w,S=Math.round(S*w)/w;let T=0;for(m&&(d&&b!==s?(n.push({value:s}),b<s&&T++,dU(Math.round((b+T*x)*w)/w,s,xX(s,C,e))&&T++):b<s&&T++);T<E;++T){const e=Math.round((b+T*x)*w)/w;if(v&&e>o)break;n.push({value:e})}return v&&d&&S!==o?n.length&&dU(n[n.length-1].value,o,xX(o,C,e))?n[n.length-1].value=o:n.push({value:o}):v&&S!==o||n.push({value:S}),n}function xX(e,t,n){let{horizontal:i,minRotation:r}=n;const s=fU(r),o=(i?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/o,a)}An(SX,"id","category"),An(SX,"defaults",{ticks:{callback:bX}});class AX extends Zq{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Nj(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=e=>i=t?i:e,o=e=>r=n?r:e;if(e){const e=uU(i),t=uU(r);e<0&&t<0?o(0):e>0&&t>0&&s(0)}if(i===r){let t=0===r?1:Math.abs(.05*r);o(r+t),e||s(i-t)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=EX({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&gU(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return qU(e,this.chart.options.locale,this.options.ticks.format)}}class TX extends AX{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Lj(e)?e:0,this.max=Lj(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=fU(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}An(TX,"id","linear"),An(TX,"defaults",{ticks:{callback:XU.formatters.numeric}});const _X=e=>Math.floor(cU(e)),RX=(e,t)=>Math.pow(10,_X(e)+t);function DX(e){return 1===e/Math.pow(10,_X(e))}function MX(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function PX(e,t){let{min:n,max:i}=t;n=Fj(e.min,n);const r=[],s=_X(n);let o=function(e,t){let n=_X(t-e);for(;MX(e,t,n)>10;)n++;for(;MX(e,t,n)<10;)n--;return Math.min(n,_X(e))}(n,i),a=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=s>o?Math.pow(10,s):0,u=Math.round((n-c)*a)/a,d=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((u-d)/Math.pow(10,o)),p=Fj(e.min,Math.round((c+d+h*Math.pow(10,o))*a)/a);for(;p<i;)r.push({value:p,major:DX(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,a=o>=0?1:a),p=Math.round((c+d+h*Math.pow(10,o))*a)/a;const g=Fj(e.max,p);return r.push({value:g,major:DX(g),significand:h}),r}class IX extends Zq{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=AX.prototype.parse.apply(this,[e,t]);if(0!==n)return Lj(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Lj(e)?Math.max(0,e):null,this.max=Lj(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Lj(this._userMin)&&(this.min=e===RX(this.min,0)?RX(this.min,-1):RX(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const r=t=>n=e?n:t,s=e=>i=t?i:e;n===i&&(n<=0?(r(1),s(10)):(r(RX(n,-1)),s(RX(i,1)))),n<=0&&r(RX(i,-1)),i<=0&&s(RX(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t=PX({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&gU(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":qU(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=cU(e),this._valueRange=cU(this.max)-cU(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(cU(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function NX(e){const t=e.ticks;if(t.display&&e.display){const e=xz(t.backdropPadding);return Bj(t.font&&t.font.size,tz.font.size)+e.height}return 0}function kX(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function OX(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],s=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?tU/s:0;for(let d=0;d<s;d++){const s=o.setContext(e.getPointLabelContext(d));r[d]=s.padding;const h=e.getPointPosition(d,e.drawingArea+r[d],a),p=Az(s.font),g=(l=e.ctx,c=p,u=kj(u=e._pointLabels[d])?u:[u],{w:iz(l,c.string,u),h:u.length*c.lineHeight});i[d]=g;const f=bU(e.getIndexAngle(d)+a),m=Math.round(mU(f));LX(n,t,f,kX(m,h.x,g.w,0,180),kX(m,h.y,g.h,90,270))}var l,c,u;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const i=[],r=e._pointLabels.length,s=e.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:NX(s)/2,additionalAngle:o?tU/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=t[u];const r=FX(e,u,l);i.push(r),"auto"===a&&(r.visible=BX(r,c),r.visible&&(c=r))}return i}(e,i,r)}function LX(e,t,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,e.l=Math.min(e.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,e.r=Math.max(e.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function FX(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=e.getPointPosition(t,i+r+o,s),c=Math.round(mU(bU(l.angle+oU))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,a.h,c),d=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function BX(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:s}=e;return!(lz({x:n,y:i},t)||lz({x:n,y:s},t)||lz({x:r,y:i},t)||lz({x:r,y:s},t))}function VX(e,t,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=t;if(!Nj(a)){const n=Ez(t.borderRadius),l=xz(t.backdropPadding);e.fillStyle=a;const c=i-l.left,u=r-l.top,d=s-i+l.width,h=o-r+l.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),mz(e,{x:c,y:u,w:d,h:h,radius:n}),e.fill()):e.fillRect(c,u,d,h)}}function GX(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,nU);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=e.getPointPosition(s,t),r.lineTo(n.x,n.y)}}An(IX,"id","logarithmic"),An(IX,"defaults",{ticks:{callback:XU.formatters.logarithmic,major:{enabled:!0}}});class HX extends AX{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=xz(NX(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Lj(e)&&!isNaN(e)?e:0,this.max=Lj(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/NX(this.options))}generateTickLabels(e){AX.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=Gj(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?OX(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){return bU(e*(nU/(this._pointLabels.length||1))+fU(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Nj(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Nj(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return _z(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(e)-oU+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),GX(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i,border:r}=t,s=this._pointLabels.length;let o,a,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const s=i.setContext(e.getPointLabelContext(r));VX(n,s,t);const o=Az(s.font),{x:a,y:l,textAlign:c}=t;fz(n,e._pointLabels[r],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){a=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),o=i.setContext(n),l=r.setContext(n);!function(e,t,n,i,r){const s=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),GX(e,n,o,i),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,l)}})),n.display){for(e.save(),o=s-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:r,lineWidth:s}=i;s&&r&&(e.lineWidth=s,e.strokeStyle=r,e.setLineDash(i.borderDash),e.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),l=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((i,o)=>{if(0===o&&this.min>=0&&!t.reverse)return;const a=n.setContext(this.getContext(o)),l=Az(a.font);if(r=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){e.font=l.string,s=e.measureText(i.label).width,e.fillStyle=a.backdropColor;const t=xz(a.backdropPadding);e.fillRect(-s/2-t.left,-r-l.size/2-t.top,s+t.width,l.size+t.height)}fz(e,i.label,0,-r,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})})),e.restore()}drawTitle(){}}An(HX,"id","radialLinear"),An(HX,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:XU.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),An(HX,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),An(HX,"descriptors",{angleLines:{_fallback:"grid"}});const WX={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},jX=Object.keys(WX);function UX(e,t){return e-t}function zX(e,t){if(Nj(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let o=t;return"function"===typeof i&&(o=i(o)),Lj(o)||(o="string"===typeof i?n.parse(o,i):n.parse(o)),null===o?null:(r&&(o="week"!==r||!pU(s)&&!0!==s?n.startOf(o,r):n.startOf(o,"isoWeek",s)),+o)}function YX(e,t,n,i){const r=jX.length;for(let s=jX.indexOf(e);s<r-1;++s){const e=WX[jX[s]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=i)return jX[s]}return jX[r-1]}function qX(e,t,n){if(n){if(n.length){const{lo:i,hi:r}=AU(n,t);e[n[i]>=t?n[i]:n[r]]=!0}}else e[t]=!0}function KX(e,t,n){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(t[l].major=!0);return t}(e,i,r,n):i}class XX extends Zq{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new iq(e.adapters.date);i.init(t),qj(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:zX(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:o}=this.getUserBounds();function a(e){s||isNaN(e.min)||(i=Math.min(i,e.min)),o||isNaN(e.max)||(r=Math.max(r,e.max))}s&&o||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),i=Lj(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=Lj(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?YX(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(let s=jX.length-1;s>=jX.indexOf(n);s--){const n=jX[s];if(WX[n].common&&e._adapter.diff(r,i,n)>=t-1)return n}return jX[n?jX.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=jX.indexOf(e)+1,n=jX.length;t<n;++t)if(WX[jX[t]].common)return jX[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&s.reverse(),KX(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),i=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=EU(i,0,s),r=EU(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||YX(r.minUnit,t,n,this._getLabelCapacity(t)),o=Bj(i.ticks.stepSize,1),a="week"===s&&r.isoWeekday,l=pU(a)||!0===a,c={};let u,d,h=t;if(l&&(h=+e.startOf(h,"isoWeek",a)),h=+e.startOf(h,l?"day":s),e.diff(n,t,s)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+s);const p="data"===i.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+e.add(u,o,s),d++)qX(c,u,p);return u!==n&&"ticks"!==i.bounds&&1!==d||qX(c,u,p),Object.keys(c).sort(UX).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,r=t||n[i];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,i){const r=this.options,s=r.ticks.callback;if(s)return Gj(s,[e,t,n],this);const o=r.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],d=n[t],h=l&&u&&d&&d.major;return this._adapter.format(e,i||(h?u:c))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=fU(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),s=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*r+o*s,h:n*s+o*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,KX(this,[e],this._majorUnit),i),s=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(zX(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return MU(e.sort(UX))}}function QX(e,t,n){let i,r,s,o,a=0,l=e.length-1;n?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=TU(e,"pos",t)),({pos:i,time:s}=e[a]),({pos:r,time:o}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=TU(e,"time",t)),({time:i,pos:s}=e[a]),({time:r,pos:o}=e[l]));const c=r-i;return c?s+(o-s)*(t-i)/c:s}An(XX,"id","time"),An(XX,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class ZX extends XX{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=QX(t,this.min),this._tableRange=QX(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;++s)l=e[s],l>=t&&l<=n&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,o=i.length;s<o;++s)c=i[s+1],a=i[s-1],l=i[s],Math.round((c+a)/2)!==l&&r.push({time:l,pos:s/(o-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(QX(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return QX(this._table,n*this._tableRange+this._minPos,!0)}}An(ZX,"id","timeseries"),An(ZX,"defaults",XX.defaults);const $X="label";function JX(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function eQ(e,t){e.labels=t}function tQ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$X;const i=[];e.datasets=t.map((t=>{const r=e.datasets.find((e=>e[n]===t[n]));return r&&t.data&&!i.includes(r)?(i.push(r),Object.assign(r,t),r):{...t}}))}function nQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$X;const n={labels:[],datasets:[]};return eQ(n,e.labels),tQ(n,e.datasets,t),n}function iQ(e,t){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:o,type:a,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...p}=e,g=(0,s.useRef)(null),f=(0,s.useRef)(),m=()=>{g.current&&(f.current=new RK(g.current,{type:a,data:nQ(l,o),options:c&&{...c},plugins:u}),JX(t,f.current))},v=()=>{JX(t,null),f.current&&(f.current.destroy(),f.current=null)};return(0,s.useEffect)((()=>{!r&&f.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(f.current,c)}),[r,c]),(0,s.useEffect)((()=>{!r&&f.current&&eQ(f.current.config.data,l.labels)}),[r,l.labels]),(0,s.useEffect)((()=>{!r&&f.current&&l.datasets&&tQ(f.current.config.data,l.datasets,o)}),[r,l.datasets]),(0,s.useEffect)((()=>{f.current&&(r?(v(),setTimeout(m)):f.current.update(h))}),[r,c,l.labels,l.datasets,h]),(0,s.useEffect)((()=>{f.current&&(v(),setTimeout(m))}),[a]),(0,s.useEffect)((()=>(m(),()=>v())),[]),s.createElement("canvas",Object.assign({ref:g,role:"img",height:n,width:i},p),d)}const rQ=(0,s.forwardRef)(iQ);function sQ(e,t){return RK.register(t),(0,s.forwardRef)(((t,n)=>s.createElement(rQ,Object.assign({},t,{ref:n,type:e}))))}const oQ=sQ("line",QY);RK.register(SX,TX,zK,jK,rX,CX,nX);const aQ=e=>{let{data:t,height:n=400}=e;return(0,If.jsx)("div",{style:{height:"".concat(n,"px"),width:"100%"},children:(0,If.jsx)(oQ,{data:t,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Monthly Parcel Overview"}},scales:{y:{beginAtZero:!0}}}})})},lQ=e=>{let{onTheWayTotal:t,deliveredTotal:n,inWarehouseTotal:i}=e;return(0,If.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,If.jsxs)("div",{className:"bg-blue-100 p-6 rounded-lg shadow-lg",children:[(0,If.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-blue-500",children:"On The Way"}),(0,If.jsxs)("p",{className:"text-gray-700 text-lg",children:["Total: ",t]})]}),(0,If.jsxs)("div",{className:"bg-green-100 p-6 rounded-lg shadow-lg",children:[(0,If.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-green-500",children:"Delivered"}),(0,If.jsxs)("p",{className:"text-gray-700 text-lg",children:["Total: ",n]})]}),(0,If.jsxs)("div",{className:"bg-yellow-100 p-6 rounded-lg shadow-lg",children:[(0,If.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-yellow-500",children:"In Warehouse"}),(0,If.jsxs)("p",{className:"text-gray-700 text-lg",children:["Total: ",i]})]})]})},cQ=()=>{const[e,t]=(0,s.useState)({labels:[],datasets:[]}),[n,i]=(0,s.useState)(0),[r,o]=(0,s.useState)(0),[a,l]=(0,s.useState)(0);return(0,s.useEffect)((()=>{(async()=>{try{const e=await ua.get("/dashboard"),{monthlyData:n,totals:r}=e.data,s=n.map((e=>e.day)),a=n.map((e=>e.delivered)),c=n.map((e=>e.rescheduled)),u=n.map((e=>e.warehouse));t({labels:s,datasets:[{label:"Delivered",data:a,borderColor:"#55CC55",backgroundColor:"rgba(74, 144, 226, 0.2)",fill:!0,tension:.6},{label:"Rescheduled",data:c,borderColor:"#F5A623",backgroundColor:"rgba(245, 166, 35, 0.2)",fill:!0,tension:.6},{label:"Warehouse",data:u,borderColor:"#4A90E2",backgroundColor:"rgba(231, 76, 60, 0.2)",fill:!0,tension:.6}]}),i(r.onTheWay),o(r.delivered),l(r.inWarehouse)}catch(e){console.error("Failed to fetch dashboard data:",e)}})()}),[]),(0,If.jsxs)(Zx,{title:"Dashboard",children:[(0,If.jsx)(Qx,{children:(0,If.jsx)("title",{children:"Dashboard"})}),(0,If.jsxs)("div",{className:"mb-8 fixed bottom-0 right-0 max-w-md w-full mx-4",children:[(0,If.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 w-full",children:[(0,If.jsx)(Pe,{to:"/dashboard/report",className:"bg-blue-600 text-white px-4 py-3 rounded-lg shadow-md hover:bg-blue-700 transition duration-300 text-center flex items-center justify-center","data-tooltip-id":"report-tooltip",children:(0,If.jsx)(xA,{})}),(0,If.jsx)(Pe,{to:"/dashboard/user/create",className:"bg-green-600 text-white px-4 py-3 rounded-lg shadow-md hover:bg-green-700 transition duration-300 text-center flex items-center justify-center","data-tooltip-id":"user-tooltip",children:(0,If.jsx)(PA,{})}),(0,If.jsx)(Pe,{to:"/dashboard/parcel",className:"bg-yellow-600 text-white px-4 py-3 rounded-lg shadow-md hover:bg-yellow-700 transition duration-300 text-center flex items-center justify-center","data-tooltip-id":"parcel-tooltip",children:(0,If.jsx)(mA,{})})]}),(0,If.jsx)(ZW,{id:"report-tooltip",place:"top",children:"Go to Reports"}),(0,If.jsx)(ZW,{id:"user-tooltip",place:"top",children:"Create a New User"}),(0,If.jsx)(ZW,{id:"parcel-tooltip",place:"top",children:"Manage Parcels"})]}),(0,If.jsx)("div",{className:"w-full container mx-auto overflow-hidden p-8",children:(0,If.jsxs)("div",{className:"w-full p-8 bg-white rounded-lg shadow-lg border border-gray-300",children:[(0,If.jsx)("h1",{className:"text-4xl font-semibold mb-6 text-gray-900",children:"Dashboard"}),(0,If.jsx)(lQ,{onTheWayTotal:n,deliveredTotal:r,inWarehouseTotal:a}),(0,If.jsxs)("div",{className:"bg-white border p-6 rounded-lg shadow-lg mb-8",children:[(0,If.jsx)("h2",{className:"text-3xl font-semibold mb-6 text-gray-900",children:"Parcel Delivery Status"}),(0,If.jsx)(aQ,{data:e,height:400})]})]})})]})};var uQ=n(481),dQ=n.n(uQ);const hQ=e=>{let{preparedData:t,columnDefs:n,rowStyle:i}=e;return console.log("Prepared Data for Grid:",t),(0,If.jsx)("div",{className:"ag-theme-alpine",style:{height:400,width:"100%"},children:(0,If.jsx)(sG,{columnDefs:n,rowData:t,getRowStyle:i})})};var pQ=n(9964),gQ=n.n(pQ);function fQ(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(rre){s(rre)}}function a(e){try{l(i.throw(e))}catch(rre){s(rre)}}function l(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}l((i=i.apply(e,t||[])).next())}))}function mQ(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(rre){a=[6,rre],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;function vQ(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o}function yQ(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var CQ=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function wQ(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),i=CQ.get(n);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof n.path){var i=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"===typeof t?t:"string"===typeof i&&i.length>0?i:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var bQ=[".DS_Store","Thumbs.db"];function SQ(e){return"object"===typeof e&&null!==e}function EQ(e){return _Q(e.target.files).map((function(e){return wQ(e)}))}function xQ(e){return fQ(this,void 0,void 0,(function(){return mQ(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return wQ(e)}))]}}))}))}function AQ(e,t){return fQ(this,void 0,void 0,(function(){var n;return mQ(this,(function(i){switch(i.label){case 0:return e.items?(n=_Q(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(RQ))]):[3,2];case 1:return[2,TQ(DQ(i.sent()))];case 2:return[2,TQ(_Q(e.files).map((function(e){return wQ(e)})))]}}))}))}function TQ(e){return e.filter((function(e){return-1===bQ.indexOf(e.name)}))}function _Q(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(i)}return t}function RQ(e){if("function"!==typeof e.webkitGetAsEntry)return MQ(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?IQ(t):MQ(e)}function DQ(e){return e.reduce((function(e,t){return yQ(yQ([],vQ(e),!1),vQ(Array.isArray(t)?DQ(t):[t]),!1)}),[])}function MQ(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=wQ(t);return Promise.resolve(n)}function PQ(e){return fQ(this,void 0,void 0,(function(){return mQ(this,(function(t){return[2,e.isDirectory?IQ(e):NQ(e)]}))}))}function IQ(e){var t=e.createReader();return new Promise((function(e,n){var i=[];!function r(){var s=this;t.readEntries((function(t){return fQ(s,void 0,void 0,(function(){var s,o,a;return mQ(this,(function(l){switch(l.label){case 0:if(t.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return s=l.sent(),e(s),[3,4];case 3:return o=l.sent(),n(o),[3,4];case 4:return[3,6];case 5:a=Promise.all(t.map(PQ)),i.push(a),r(),l.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function NQ(e){return fQ(this,void 0,void 0,(function(){return mQ(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var i=wQ(n,e.fullPath);t(i)}),(function(e){n(e)}))}))]}))}))}var kQ=n(6519);function OQ(e){return function(e){if(Array.isArray(e))return HQ(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||GQ(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function FQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LQ(Object(n),!0).forEach((function(t){BQ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VQ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);o=!0);}catch(sre){a=!0,r=sre}finally{try{o||null==n.return||n.return()}finally{if(a)throw r}}return s}(e,t)||GQ(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GQ(e,t){if(e){if("string"===typeof e)return HQ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HQ(e,t):void 0}}function HQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var WQ="file-invalid-type",jQ="file-too-large",UQ="file-too-small",zQ="too-many-files",YQ=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:WQ,message:"File type must be ".concat(t)}},qQ=function(e){return{code:jQ,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},KQ=function(e){return{code:UQ,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},XQ={code:zQ,message:"Too many files"};function QQ(e,t){var n="application/x-moz-file"===e.type||(0,kQ.A)(e,t);return[n,n?null:YQ(t)]}function ZQ(e,t,n){if($Q(e.size))if($Q(t)&&$Q(n)){if(e.size>n)return[!1,qQ(n)];if(e.size<t)return[!1,KQ(t)]}else{if($Q(t)&&e.size<t)return[!1,KQ(t)];if($Q(n)&&e.size>n)return[!1,qQ(n)]}return[!0,null]}function $Q(e){return void 0!==e&&null!==e}function JQ(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function eZ(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function tZ(e){e.preventDefault()}function nZ(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.some((function(t){return!JQ(e)&&t&&t.apply(void 0,[e].concat(i)),JQ(e)}))}}function iZ(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)}function rZ(e){return/^.*\.[\w]+$/.test(e)}var sZ=["children"],oZ=["open"],aZ=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],lZ=["refKey","onChange","onClick"];function cZ(e){return function(e){if(Array.isArray(e))return hZ(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dZ(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);o=!0);}catch(sre){a=!0,r=sre}finally{try{o||null==n.return||n.return()}finally{if(a)throw r}}return s}(e,t)||dZ(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dZ(e,t){if(e){if("string"===typeof e)return hZ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hZ(e,t):void 0}}function hZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function pZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pZ(Object(n),!0).forEach((function(t){fZ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pZ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mZ(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var vZ=(0,s.forwardRef)((function(e,t){var n=e.children,i=wZ(mZ(e,sZ)),r=i.open,o=mZ(i,oZ);return(0,s.useImperativeHandle)(t,(function(){return{open:r}}),[r]),s.createElement(s.Fragment,null,n(gZ(gZ({},o),{},{open:r})))}));vZ.displayName="Dropzone";var yZ={disabled:!1,getFilesFromEvent:function(e){return fQ(this,void 0,void 0,(function(){return mQ(this,(function(t){return SQ(e)&&function(e){return SQ(e)}(e.dataTransfer)?[2,AQ(e.dataTransfer,e.type)]:function(e){return SQ(e)&&SQ(e.target)}(e)?[2,EQ(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,xQ(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};vZ.defaultProps=yZ,vZ.propTypes={children:gQ().func,accept:gQ().objectOf(gQ().arrayOf(gQ().string)),multiple:gQ().bool,preventDropOnDocument:gQ().bool,noClick:gQ().bool,noKeyboard:gQ().bool,noDrag:gQ().bool,noDragEventsBubbling:gQ().bool,minSize:gQ().number,maxSize:gQ().number,maxFiles:gQ().number,disabled:gQ().bool,getFilesFromEvent:gQ().func,onFileDialogCancel:gQ().func,onFileDialogOpen:gQ().func,useFsAccessApi:gQ().bool,autoFocus:gQ().bool,onDragEnter:gQ().func,onDragLeave:gQ().func,onDragOver:gQ().func,onDrop:gQ().func,onDropAccepted:gQ().func,onDropRejected:gQ().func,onError:gQ().func,validator:gQ().func};var CZ={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function wZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=gZ(gZ({},yZ),e),n=t.accept,i=t.disabled,r=t.getFilesFromEvent,o=t.maxSize,a=t.minSize,l=t.multiple,c=t.maxFiles,u=t.onDragEnter,d=t.onDragLeave,h=t.onDragOver,p=t.onDrop,g=t.onDropAccepted,f=t.onDropRejected,m=t.onFileDialogCancel,v=t.onFileDialogOpen,y=t.useFsAccessApi,C=t.autoFocus,w=t.preventDropOnDocument,b=t.noClick,S=t.noKeyboard,E=t.noDrag,x=t.noDragEventsBubbling,A=t.onError,T=t.validator,_=(0,s.useMemo)((function(){return function(e){if($Q(e))return Object.entries(e).reduce((function(e,t){var n=VQ(t,2),i=n[0],r=n[1];return[].concat(OQ(e),[i],OQ(r))}),[]).filter((function(e){return iZ(e)||rZ(e)})).join(",")}(n)}),[n]),R=(0,s.useMemo)((function(){return function(e){return $Q(e)?[{description:"Files",accept:Object.entries(e).filter((function(e){var t=VQ(e,2),n=t[0],i=t[1],r=!0;return iZ(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),r=!1),Array.isArray(i)&&i.every(rZ)||(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),r=!1),r})).reduce((function(e,t){var n=VQ(t,2),i=n[0],r=n[1];return FQ(FQ({},e),{},BQ({},i,r))}),{})}]:e}(n)}),[n]),D=(0,s.useMemo)((function(){return"function"===typeof v?v:SZ}),[v]),M=(0,s.useMemo)((function(){return"function"===typeof m?m:SZ}),[m]),P=(0,s.useRef)(null),I=(0,s.useRef)(null),N=uZ((0,s.useReducer)(bZ,CZ),2),k=N[0],O=N[1],L=k.isFocused,F=k.isFileDialogActive,B=(0,s.useRef)("undefined"!==typeof window&&window.isSecureContext&&y&&"showOpenFilePicker"in window),V=function(){!B.current&&F&&setTimeout((function(){I.current&&(I.current.files.length||(O({type:"closeDialog"}),M()))}),300)};(0,s.useEffect)((function(){return window.addEventListener("focus",V,!1),function(){window.removeEventListener("focus",V,!1)}}),[I,F,M,B]);var G=(0,s.useRef)([]),H=function(e){P.current&&P.current.contains(e.target)||(e.preventDefault(),G.current=[])};(0,s.useEffect)((function(){return w&&(document.addEventListener("dragover",tZ,!1),document.addEventListener("drop",H,!1)),function(){w&&(document.removeEventListener("dragover",tZ),document.removeEventListener("drop",H))}}),[P,w]),(0,s.useEffect)((function(){return!i&&C&&P.current&&P.current.focus(),function(){}}),[P,C,i]);var W=(0,s.useCallback)((function(e){A?A(e):console.error(e)}),[A]),j=(0,s.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e),G.current=[].concat(cZ(G.current),[e.target]),eZ(e)&&Promise.resolve(r(e)).then((function(t){if(!JQ(e)||x){var n=t.length,i=n>0&&function(e){var t=e.files,n=e.accept,i=e.minSize,r=e.maxSize,s=e.multiple,o=e.maxFiles,a=e.validator;return!(!s&&t.length>1||s&&o>=1&&t.length>o)&&t.every((function(e){var t=VQ(QQ(e,n),1)[0],s=VQ(ZQ(e,i,r),1)[0],o=a?a(e):null;return t&&s&&!o}))}({files:t,accept:_,minSize:a,maxSize:o,multiple:l,maxFiles:c,validator:T});O({isDragAccept:i,isDragReject:n>0&&!i,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e)}})).catch((function(e){return W(e)}))}),[r,u,W,x,_,a,o,l,c,T]),U=(0,s.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e);var t=eZ(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&h&&h(e),!1}),[h,x]),z=(0,s.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e);var t=G.current.filter((function(e){return P.current&&P.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),G.current=t,t.length>0||(O({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),eZ(e)&&d&&d(e))}),[P,d,x]),Y=(0,s.useCallback)((function(e,t){var n=[],i=[];e.forEach((function(e){var t=uZ(QQ(e,_),2),r=t[0],s=t[1],l=uZ(ZQ(e,a,o),2),c=l[0],u=l[1],d=T?T(e):null;if(r&&c&&!d)n.push(e);else{var h=[s,u];d&&(h=h.concat(d)),i.push({file:e,errors:h.filter((function(e){return e}))})}})),(!l&&n.length>1||l&&c>=1&&n.length>c)&&(n.forEach((function(e){i.push({file:e,errors:[XQ]})})),n.splice(0)),O({acceptedFiles:n,fileRejections:i,type:"setFiles"}),p&&p(n,i,t),i.length>0&&f&&f(i,t),n.length>0&&g&&g(n,t)}),[O,l,_,a,o,c,p,g,f,T]),q=(0,s.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e),G.current=[],eZ(e)&&Promise.resolve(r(e)).then((function(t){JQ(e)&&!x||Y(t,e)})).catch((function(e){return W(e)})),O({type:"reset"})}),[r,Y,W,x]),K=(0,s.useCallback)((function(){if(B.current){O({type:"openDialog"}),D();var e={multiple:l,types:R};window.showOpenFilePicker(e).then((function(e){return r(e)})).then((function(e){Y(e,null),O({type:"closeDialog"})})).catch((function(e){!function(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}(e)?!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?W(e):(B.current=!1,I.current?(I.current.value=null,I.current.click()):W(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):(M(e),O({type:"closeDialog"}))}))}else I.current&&(O({type:"openDialog"}),D(),I.current.value=null,I.current.click())}),[O,D,M,y,Y,W,R,l]),X=(0,s.useCallback)((function(e){P.current&&P.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),K()))}),[P,K]),Q=(0,s.useCallback)((function(){O({type:"focus"})}),[]),Z=(0,s.useCallback)((function(){O({type:"blur"})}),[]),$=(0,s.useCallback)((function(){b||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?K():setTimeout(K,0))}),[b,K]),J=function(e){return i?null:e},ee=function(e){return S?null:J(e)},te=function(e){return E?null:J(e)},ne=function(e){x&&e.stopPropagation()},ie=(0,s.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.role,s=e.onKeyDown,o=e.onFocus,a=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,d=e.onDragLeave,h=e.onDrop,p=mZ(e,aZ);return gZ(gZ(fZ({onKeyDown:ee(nZ(s,X)),onFocus:ee(nZ(o,Q)),onBlur:ee(nZ(a,Z)),onClick:J(nZ(l,$)),onDragEnter:te(nZ(c,j)),onDragOver:te(nZ(u,U)),onDragLeave:te(nZ(d,z)),onDrop:te(nZ(h,q)),role:"string"===typeof r&&""!==r?r:"presentation"},n,P),i||S?{}:{tabIndex:0}),p)}}),[P,X,Q,Z,$,j,U,z,q,S,E,i]),re=(0,s.useCallback)((function(e){e.stopPropagation()}),[]),se=(0,s.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,i=e.onChange,r=e.onClick,s=mZ(e,lZ);return gZ(gZ({},fZ({accept:_,multiple:l,type:"file",style:{display:"none"},onChange:J(nZ(i,q)),onClick:J(nZ(r,re)),tabIndex:-1},n,I)),s)}}),[I,n,l,q,i]);return gZ(gZ({},k),{},{isFocused:L&&!i,getRootProps:ie,getInputProps:se,rootRef:P,inputRef:I,open:J(K)})}function bZ(e,t){switch(t.type){case"focus":return gZ(gZ({},e),{},{isFocused:!0});case"blur":return gZ(gZ({},e),{},{isFocused:!1});case"openDialog":return gZ(gZ({},CZ),{},{isFileDialogActive:!0});case"closeDialog":return gZ(gZ({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return gZ(gZ({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return gZ(gZ({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return gZ({},CZ);default:return e}}function SZ(){}const EZ=e=>e.data&&e.data.hasErrors?{backgroundColor:"#f8d7da"}:null,xZ=()=>[{headerName:"Receiver Name",field:"receiver.name"},{headerName:"Phone Number",field:"receiver.phoneNumber"},{headerName:"Address",field:"receiver.address"},{headerName:"City",field:"receiverCityValidation",cellStyle:e=>e.value.includes("Not Found")?{color:"red"}:null},{headerName:"Country",field:"receiverCountryValidation",cellStyle:e=>e.value.includes("Not Found")?{color:"red"}:null},{headerName:"Zip",field:"receiver.zip"},{headerName:"Delivery Fees",field:"deliveryFees"},{headerName:"Weight",field:"weight"},{headerName:"Size",field:"size"},{headerName:"Discount Value",field:"discountValue"},{headerName:"Tax Value",field:"taxValue"},{headerName:"Payment Type",field:"paymentTypeValidation",cellStyle:e=>e.value.includes("Invalid Payment Type")?{color:"red"}:null}],AZ=()=>{const[e,t]=(0,s.useState)([]),[n,i]=(0,s.useState)(null),[r,o]=(0,s.useState)([]),[a,l]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),d=ne(),h=async e=>{try{const t=await ua.post("/csv/validate-entities",e);return console.log(t.data),t.data}catch(t){return console.error("Validation error",t),null}},p=(0,s.useCallback)((async e=>{const n=e[0];if(n){l(!0);try{const e=await y(n);console.log("Parsed CSV Data:",e);const r=e.filter((e=>e["Receiver Name"]||e["Receiver Phone Number"]||e["Receiver Address"]));t(r);const s=C(r),a=await h(s);i(a);const l=v(r,a);o(l)}catch(r){console.error("Error processing CSV file:",r)}finally{l(!1)}}}),[h]),{getRootProps:g,getInputProps:f,isDragActive:m}=wZ({onDrop:p,accept:{"text/csv":[".csv"]}}),v=(e,t)=>{const n=e.map((e=>{var n,i;let r=t.countries.find((t=>t._id===e["Receiver Country"]));r||(r=t.countries.find((t=>t.name.toLowerCase()===e["Receiver Country"].toLowerCase())));let s=t.cities.find((t=>{var n;return t._id===e["Receiver City"]&&t.countryId===(null===(n=r)||void 0===n?void 0:n._id)}));!s&&r&&(s=t.cities.find((t=>{var n;return t.name.toLowerCase()===e["Receiver City"].toLowerCase()&&t.countryId===(null===(n=r)||void 0===n?void 0:n._id)})));const o=Object.values(zG).includes(e["Payment Type"]),a=Object.values(KG).includes(e["Discount Type"]),l=Object.values(XG).includes(e["Tax Type"]),c=o?e["Payment Type"]:zG.PayBySender,u=a?e["Discount Type"]:KG.Percentage,d=l?e["Tax Type"]:XG.Percentage,h=r?r.name:"".concat(e["Receiver Country"]," (Country Not Found)"),p=s?s.name:"".concat(e["Receiver City"]," (City Not Found)"),g=o?e["Payment Type"]:"".concat(e["Payment Type"]," (Invalid Payment Type)"),f=a?e["Discount Type"]:"".concat(e["Discount Type"]," (Invalid Discount Type)"),m=l?e["Tax Type"]:"".concat(e["Tax Type"]," (Invalid Tax Type)"),v=h.includes("Not Found")||p.includes("Not Found")||g.includes("Invalid Payment Type")||f.includes("Invalid Discount Type")||m.includes("Invalid Tax Type");return{receiver:{name:e["Receiver Name"]||"",phoneNumber:e["Receiver Phone Number"]||"",address:e["Receiver Address"]||"",countryId:(null===(n=r)||void 0===n?void 0:n._id)||"",cityId:(null===(i=s)||void 0===i?void 0:i._id)||"",zip:e["Receiver Zip"]||""},deliveryFees:parseFloat(e["Delivery Fees"])||0,weight:parseFloat(e.Weight)||0,size:parseFloat(e.Size)||0,discountValue:parseFloat(e["Discount Value"])||0,taxValue:parseFloat(e["Tax Value"])||0,paymentType:c,discountType:u,taxType:d,creditDueDate:c===zG.CreditTerms?new Date(e["Credit Due Date"]).toISOString():void 0,remark:e.Remark||"",paymentTypeValidation:g,receiverCountryValidation:h,receiverCityValidation:p,hasErrors:v}}));return u(n.some((e=>e.hasErrors))),n},y=e=>new Promise(((t,n)=>{dQ().parse(e,{header:!0,complete:e=>t(e.data),error:e=>n(e.message)})})),C=e=>{const t={countries:new Set,cities:new Set};return e.forEach((e=>{e["Receiver Country"]&&t.countries.add(e["Receiver Country"]),e["Receiver City"]&&t.cities.add(e["Receiver City"])})),{countries:Array.from(t.countries),cities:Array.from(t.cities)}},w=()=>{t([]),i(null),o([]),u(!1)},b=()=>{const e=r.map((e=>({"Receiver Name":e.receiver.name,"Receiver Phone Number":e.receiver.phoneNumber,"Receiver Address":e.receiver.address,"Receiver City":e.receiverCityValidation,"Receiver Country":e.receiverCountryValidation,"Receiver Zip":e.receiver.zip,"Delivery Fees":e.deliveryFees,Weight:e.weight,Size:e.size,"Discount Value":e.discountValue,"Discount Type":e.discountType,"Tax Value":e.taxValue,"Tax Type":e.taxType,"Payment Type":e.paymentTypeValidation}))),t=dQ().unparse(e),n=new Blob([t],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(n),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download","processed_data_with_errors.csv"),s.click()};return(0,If.jsx)(Zx,{title:"CSV Parcel Create Page",children:(0,If.jsxs)("div",{className:"w-full mx-auto p-4",children:[!e.length&&(0,If.jsxs)("div",{...g(),className:"border-4 border-dashed p-6 rounded-md cursor-pointer text-center ".concat(m?"border-green-600":"border-gray-400"),children:[(0,If.jsx)("input",{...f()}),m?(0,If.jsx)("p",{children:"Drop the files here ..."}):(0,If.jsx)("p",{children:"Drag 'n' drop a CSV file here, or click to select a file"})]}),a&&(0,If.jsx)("div",{className:"text-center",children:"Processing..."}),c&&(0,If.jsx)("div",{className:"text-red-500 text-center mb-4",children:"There are errors with the CSV file. Please review the highlighted rows."}),r.length>0&&!a&&n&&(0,If.jsx)(mf,{initialValues:{shipper:"",initialWarehouse:""},onSubmit:async t=>{if(!n)return void ot.error("Please upload and validate a CSV file first.");if(console.log("Values",t),!t.shipper)return void ot.error("Please select a Shipper.");if(!t.initialWarehouse)return void ot.error("Please select an Initial Warehouse.");const i=v(e,n),r=i.map((e=>{let{paymentTypeValidation:t,receiverCountryValidation:n,receiverCityValidation:i,hasErrors:r,discountType:s,taxType:o,...a}=e;return a}));console.log("Sanitized parcels:",r);if(i.some((e=>!e.receiver.countryId||!e.receiver.cityId||e.paymentTypeValidation.includes("Invalid Payment Type"))))ot.error("Submission failed: Some parcels have missing or invalid data, including Payment Type, country, or city.");else try{200===(await ua.post("/csv/create-parcels",{parcels:r,initialWarehouseId:t.initialWarehouse,shipperId:t.shipper})).status&&(ot.success("Parcels created successfully!"),d("/dashboard/parcel"))}catch(s){console.error("Error submitting parcels",s),ot.error("Failed to create parcels. Please try again.")}},children:t=>{let{isSubmitting:i}=t;return(0,If.jsxs)(Ef,{children:[(0,If.jsx)(Sf,{name:"shipper",as:jG,label:"Select Shipper",className:"mb-4"}),(0,If.jsx)(Sf,{name:"initialWarehouse",as:UG,label:"Select Initial Warehouse",className:"mb-4"}),(0,If.jsx)(hQ,{preparedData:r,validatedData:n,columnDefs:xZ(),rowStyle:EZ}),(0,If.jsxs)("div",{className:"flex justify-between mt-4",children:[!c&&(0,If.jsx)("button",{type:"submit",disabled:i||!e.length,className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 disabled:bg-gray-300",children:i?"Processing...":"Submit"}),c&&(0,If.jsx)("button",{type:"button",onClick:b,className:"bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600",children:"Download CSV with Errors"}),(0,If.jsx)("button",{type:"button",onClick:w,className:"bg-yellow-500 text-white py-2 px-4 rounded hover:bg-yellow-600 ml-2",children:"Re-upload CSV"})]})]})}})]})})},TZ=()=>{const e=(0,s.useRef)(null);return(0,If.jsxs)("header",{id:"home",className:"relative h-screen flex flex-col items-center justify-center bg-cover bg-no-repeat bg-center",style:{backgroundImage:"url('/images/header-bg.jpg')"},onMouseMove:t=>{if(e.current){const{clientX:n,clientY:i,currentTarget:r}=t,{left:s,top:o,width:a,height:l}=r.getBoundingClientRect(),c=n-(s+a/2),u=i-(o+l/2);e.current.style.transform="perspective(600px) rotateY(".concat(c/50,"deg) rotateX(").concat(u/50,"deg)")}},onMouseLeave:()=>{e.current&&(e.current.style.transform="perspective(600px) rotateY(0deg) rotateX(0deg)")},children:[(0,If.jsx)("div",{className:"container relative z-10 mx-auto px-4 sm:px-8 items-center",children:(0,If.jsxs)("div",{className:"text-center",children:[(0,If.jsx)("h2",{className:"text-2xl text-white opacity-80 mb-8 capitalize italic font-medium",children:"Provides with maximum efforts"}),(0,If.jsxs)("h1",{className:"text-4xl lg:text-6xl font-bold text-white mb-5 relative",children:["WELCOME TO"," ",(0,If.jsxs)("div",{ref:e,className:"inline-block relative transition-transform duration-300",style:{display:"inline-block"},children:["PM",(0,If.jsx)("span",{className:"text-[#f27821]",children:"X"})]})]}),(0,If.jsx)("div",{className:"flex justify-center space-x-4",children:(0,If.jsx)("a",{className:"bg-[#f27821] text-white py-3 px-8 rounded-full font-semibold transition duration-200 hover:bg-[#1f2a4c] flex items-center",href:"#download",children:"Get Started"})})]})}),(0,If.jsxs)("div",{className:"absolute bottom-8 flex flex-col items-center animate-bounce w-8 sm:w-12",children:[(0,If.jsx)(yA,{className:"text-white text-3xl mb-[.5px]",style:{width:"2.5em"}}),(0,If.jsx)(yA,{className:"text-white text-3xl mb-[.5px] opacity-75",style:{width:"2.5em"}}),(0,If.jsx)(yA,{className:"text-white text-3xl opacity-50",style:{width:"2.5em"}})]})]})},_Z=()=>{const[e,t]=(0,s.useState)(""),n=ne();return(0,If.jsx)("section",{id:"tracking",className:"flex items-center justify-center bg-white my-2 min-h-screen h-full",children:(0,If.jsxs)("div",{className:"container mx-auto px-4 sm:px-8 xl:px-4",children:[(0,If.jsx)("h1",{className:"mt-10 font-bold uppercase text-[#28305c] text-4xl leading-10 text-center tracking-wider",children:"Tracking"}),(0,If.jsx)("p",{className:" text-gray-500 italic font-light text-center mb-6 ",children:"Find out where your parcel is"}),(0,If.jsxs)("form",{id:"trackingform",onSubmit:t=>{t.preventDefault(),e.trim()&&n("/tracking/".concat(e))},className:"relative max-w-xl mx-auto mt-8",children:[(0,If.jsx)("input",{type:"search",value:e,onChange:e=>t(e.target.value),id:"default-search",className:"block p-4 pl-10 w-full text-sm text-gray-900 bg-gray-50 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 rounded-full",placeholder:"Enter Tracking Code",required:!0}),(0,If.jsx)("button",{type:"submit",className:"absolute right-2.5 bottom-2.5 bg-[#28305c] text-white font-medium text-sm px-4 py-2 rounded-full hover:bg-[#1e2a46] transition duration-300",children:"Search"})]})]})})},RZ=()=>(0,If.jsx)("section",{id:"services",className:"py-20 bg-gray-50 text-center ",children:(0,If.jsxs)("div",{className:"container mx-auto px-4 sm:px-8",children:[(0,If.jsx)("h1",{className:"text-[#28305c] mb-5 text-4xl font-bold",children:"Services"}),(0,If.jsx)("div",{className:"flex flex-wrap",children:[{title:"Logistics",description:"Whether by land, sea, or air, our extensive network allows us to offer cost-effective and reliable solutions.",image:"/images/Logistics.svg"},{title:"Parcel Management",description:"We specialize in delivering a seamless parcel management experience that takes the stress out of shipping and receiving. Whether you're a business or an individual, our innovative solutions are designed to cater to all your parcel needs.",image:"/images/Parcel Management.svg"},{title:"Wearhousing",description:"With strategically located warehouses, we provide secure storage and efficient distribution services to help streamline your supply chain.",image:"/images/Wearhousing.svg"}].map(((e,t)=>(0,If.jsx)("div",{className:"w-full sm:w-full md:w-1/2 lg:w-1/3 p-4 min-h-96",children:(0,If.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md transition-transform transform hover:scale-105 h-full",children:[(0,If.jsx)("img",{className:"mx-auto mb-6 h-32 w-32",src:e.image,alt:e.title}),(0,If.jsx)("h3",{className:"text-4xl font-bold text-gray-500 mb-4",children:e.title}),(0,If.jsx)("p",{className:"text-black text-xl",children:e.description})]})},t)))})]})}),DZ=()=>{const[e,t]=(0,s.useState)({name:"",email:"",phone:"",message:""}),n=n=>{const{name:i,value:r}=n.target;t({...e,[i]:r})};return(0,If.jsx)("div",{id:"contactus",className:"py-24 bg-cover bg-center text-center lg:text-left bg-[#28305c]",style:{backgroundImage:"url('/images/map-image.png')",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:(0,If.jsxs)("div",{className:"container mx-auto",children:[(0,If.jsx)("h2",{className:"text-3xl font-bold text-white text-center uppercase",children:"Contact Us"}),(0,If.jsx)("h6",{className:"text-xl mb-8 text-gray-500 text-center",children:"Don\u2019t Be Shy\u2014We\u2019re Here to Help!"}),(0,If.jsxs)("form",{onSubmit:n=>{n.preventDefault(),console.log("Form submitted:",e),t({name:"",email:"",phone:"",message:""})},className:"flex flex-wrap max-w-6xl  mx-auto",children:[(0,If.jsxs)("div",{className:"w-full md:w-1/2 p-2",children:[(0,If.jsx)("div",{className:"w-full mb-4",children:(0,If.jsx)("input",{type:"text",id:"name",name:"name",value:e.name,onChange:n,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow shadow-sm",placeholder:"Your Name"})}),(0,If.jsx)("div",{className:"w-full mb-4",children:(0,If.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:n,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow shadow-sm",placeholder:"Your Email"})}),(0,If.jsx)("div",{className:"w-full mb-4",children:(0,If.jsx)("input",{type:"tel",id:"phone",name:"phone",value:e.phone,onChange:n,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow shadow-sm",placeholder:"Your Phone Number"})})]}),(0,If.jsx)("div",{className:"w-full md:w-1/2 mb-4 flex flex-col p-2",children:(0,If.jsx)("textarea",{id:"message",name:"message",value:e.message,onChange:n,required:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow shadow-sm",placeholder:"Your Message",rows:4})}),(0,If.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,If.jsx)("button",{type:"submit",className:"bg-[#f27821] text-white rounded-lg  transition mt-4 py-4 px-10 shadow-md capitalize font-extrabold",children:"SEND MESSAGE"})})]})]})})},MZ=[{year:"August 2019-2020",title:"The Journey Begins",description:"Our logistics company was founded with a clear mission: to redefine efficiency in the supply chain industry. Starting with a small but dedicated team, we laid the foundation for what would become a rapidly growing operation, driven by innovation and a customer-first approach.",imageUrl:"https://via.placeholder.com/50"},{year:"2020-2021",title:"Navigating the Challenges of COVID-19",description:"The global pandemic brought unprecedented challenges to the logistics industry, and our company was no exception. Despite the disruptions, we adapted quickly, implementing stringent safety measures and innovative solutions to keep our operations running smoothly. Our team\u2019s resilience and commitment allowed us to continue serving our clients effectively, ensuring that essential goods were delivered even in the most difficult times. The experience strengthened our operations and reinforced our role as a reliable partner in critical times.",imageUrl:"https://via.placeholder.com/50"},{year:"September 2022",title:"Expanding Our Reach",description:"Just one year after our inception, we successfully scaled our operations, delivering to 10 key local destinations. This year marked a significant milestone as we optimized our delivery networks and enhanced our service offerings to ensure reliable and timely deliveries.",imageUrl:"https://via.placeholder.com/50"},{year:"July 2024",title:"Pioneering Growth and Innovation",description:"As we move forward, 2024 marks a year of significant growth and development. We are enhancing our logistics capabilities by expanding our fleet, refining our processes, and adopting sustainable practices to reduce our environmental impact. Our focus remains on delivering superior logistics solutions that drive success for our clients.",imageUrl:"https://via.placeholder.com/50"}],PZ=()=>(0,If.jsxs)("section",{id:"aboutus",className:"container mx-auto py-20 mb-48 px-4 lg:px-8",children:[(0,If.jsx)("h1",{className:"text-5xl font-bold text-center mb-12 text-gray-800",children:"About Us"}),(0,If.jsx)("h2",{className:"text-3xl font-semibold text-center mb-16 text-gray-600",children:"Milestones in Our Success"}),(0,If.jsxs)("div",{className:"relative min-h-screen",children:[(0,If.jsx)("div",{className:"hidden md:block absolute left-1/2 transform -translate-x-1/2 h-full border-l-4 border-gray-300"}),(0,If.jsxs)("div",{className:"space-y-36 mt-20 relative hidden md:block",children:[MZ.map(((e,t)=>(0,If.jsxs)("div",{className:"flex flex-col md:flex-row w-full relative",children:[(0,If.jsx)("div",{className:"w-full md:w-1/2 ".concat(t%2===0?"md:ml-auto pl-8 md:pl-28":"md:mr-auto pr-8 md:pr-28"),children:(0,If.jsxs)("div",{className:"text-center md:text-".concat(t%2===0?"right":"left"),children:[(0,If.jsxs)("h3",{className:"text-xl md:text-2xl font-bold text-gray-700 mb-4",children:[e.year,": ",e.title]}),(0,If.jsx)("p",{className:"text-sm md:text-lg text-gray-600",children:e.description})]})}),(0,If.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 bg-gray-200 w-44 h-44 rounded-full flex items-center justify-center shadow-lg",children:(0,If.jsx)("img",{src:e.imageUrl,alt:"Milestone ".concat(t+1),className:"w-44 h-44 rounded-full object-cover"})})]},t))),(0,If.jsx)("div",{className:"flex flex-col md:flex-row w-full relative",children:(0,If.jsx)("div",{className:"bg-[#f27821] text-white font-bold absolute left-1/2 transform -translate-x-1/2 w-20 h-20 rounded-full flex items-center justify-center shadow-lg",children:"Now"})})]}),(0,If.jsxs)("div",{className:"md:hidden mt-16 space-y-12 relative",children:[(0,If.jsx)("div",{className:"absolute left-8 top-0 h-full border-l-4 border-gray-300"}),MZ.map(((e,t)=>(0,If.jsxs)("div",{className:"flex items-start text-left pl-12 relative",children:[(0,If.jsx)("div",{className:"bg-gray-200 w-20 h-20 rounded-full flex items-center justify-center shadow-lg mb-4 absolute left-8 transform -translate-x-1/2",children:(0,If.jsx)("img",{src:e.imageUrl,alt:"Milestone ".concat(t+1),className:"w-20 h-20 rounded-full object-cover"})}),(0,If.jsxs)("div",{className:"ml-8",children:[(0,If.jsxs)("h3",{className:"text-lg font-bold text-gray-700 mb-2",children:[e.year,": ",e.title]}),(0,If.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]},t))),(0,If.jsx)("div",{className:"flex items-start text-left pl-12 relative",children:(0,If.jsx)("div",{className:"bg-[#f27821] text-white font-bold w-12 h-12 rounded-full flex items-center justify-center shadow-lg mb-4 absolute left-8 transform -translate-x-1/2",children:"Now"})})]})]})]}),IZ=()=>{const e=ee(),[t,n]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(()=>{const t=e.hash.replace("#","");if(t){const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}})()}),[e]),(0,s.useEffect)((()=>{const e=()=>{window.scrollY>300?n(!0):n(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]);return(0,If.jsxs)(If.Fragment,{children:[(0,If.jsx)(TZ,{}),(0,If.jsx)(_Z,{}),(0,If.jsx)(PZ,{}),(0,If.jsx)(RZ,{}),(0,If.jsx)(DZ,{}),t&&(0,If.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-8 right-8 bg-[#f27821] text-white p-3 rounded-full shadow-lg hover:bg-[#1f2a4c] transition duration-300 flex items-center justify-center","aria-label":"Scroll to Top",children:(0,If.jsx)(fA,{className:"text-xl"})})]})},NZ=e=>{let{trackingHistory:t}=e;return t&&0!==t.length?(0,If.jsxs)("div",{className:"mt-8 bg-white border border-gray-500 rounded-lg p-6",children:[(0,If.jsx)("h4",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Tracking History"}),(0,If.jsx)("ul",{className:"relative border-l-4 border-blue-600 pl-4 space-y-6",children:t.map(((e,t)=>{var n,i;return(0,If.jsxs)("li",{className:"relative",children:[(0,If.jsx)("div",{className:"absolute left-0 top-1.5 w-4 h-4 bg-blue-600 rounded-full border-2 border-white"}),(0,If.jsxs)("div",{className:"ml-8",children:[(0,If.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,If.jsx)("span",{className:"font-medium",children:"Status:"})," ",e.status]}),(0,If.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,If.jsx)("span",{className:"font-medium",children:"Date:"})," ",new Date(e.timestamp).toLocaleString()]}),e.warehouse&&(0,If.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,If.jsx)("span",{className:"font-medium",children:"Warehouse:"})," ",e.warehouse.name," (",null===(n=e.warehouse.location.city)||void 0===n?void 0:n.name,","," ",null===(i=e.warehouse.location.country)||void 0===i?void 0:i.name,")"]}),e.driver&&(0,If.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,If.jsx)("span",{className:"font-medium",children:"Driver:"})," ",e.driver.username]})]})]},t)}))})]}):(0,If.jsx)("h4",{className:"text-2xl font-bold text-red-500 mb-6",children:"Tracking Error"})},kZ=e=>{let{parcel:t}=e;return t?(0,If.jsxs)("div",{className:"bg-white shadow-md border border-gray-500 rounded-lg p-6 mb-6",children:[t.parcelId&&(0,If.jsxs)("h3",{className:"text-2xl font-semibold text-gray-800 mb-4",children:["Parcel ID: ",t.parcelId]}),(0,If.jsxs)("div",{className:"space-y-4",children:[(0,If.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,If.jsx)("span",{className:"font-medium",children:"Current Status: "}),t.status]}),(0,If.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,If.jsx)("span",{className:"font-medium",children:"Receiver: "}),t.receiver.name]}),(0,If.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,If.jsx)("span",{className:"font-medium",children:"Receiver Phone Number: "}),t.receiver.phoneNumber]}),(0,If.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,If.jsx)("span",{className:"font-medium",children:"Receiver Address: "}),t.receiver.address]}),(0,If.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,If.jsx)("span",{className:"font-medium",children:"Delivery Fees: "}),t.deliveryFees," MMK"]})]}),(0,If.jsx)(NZ,{trackingHistory:t.trackingHistory})]}):(0,If.jsx)("p",{className:"text-lg text-gray-500",children:"No parcel found. Please try again."})},OZ=()=>{const[e,t]=(0,s.useState)(""),[n,i]=(0,s.useState)(null),[r,o]=(0,s.useState)(!1),{parcelId:a}=re(),l=ne();(0,s.useEffect)((()=>{a&&!r&&(t(a),c(a))}),[a]);const c=async e=>{if(!r){o(!0);try{const t=await la.get("/parcelId/".concat(e));i(t.data)}catch(t){ot.error("Error fetching parcel"),console.error(t)}finally{o(!1)}}},u=()=>{e&&!r&&(l("/tracking/".concat(e)),c(e))};return(0,If.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,If.jsxs)("div",{className:"w-full max-w-4xl p-6 bg-white shadow-lg rounded-lg border border-gray-300",children:[(0,If.jsx)("h2",{className:"text-3xl font-bold mb-6 text-black",children:"Tracking"}),(0,If.jsxs)("div",{className:"mb-6",children:[(0,If.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter Parcel ID",onKeyPress:e=>{"Enter"===e.key&&u()},className:"border p-3 w-full text-lg rounded text-black"}),(0,If.jsx)("button",{onClick:u,className:"mt-3 bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition duration-200",disabled:r,children:"Search"})]}),(0,If.jsx)(kZ,{parcel:n})]})})};var LZ=n(4157),FZ=n(6658),BZ=n.n(FZ);const VZ=()=>{const[e,t]=(0,s.useState)(void 0),[n,i]=(0,s.useState)(void 0),[r,o]=(0,s.useState)([]),[a,l]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=new Date,n=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0);t(n),i(r),c(n,r)}),[]);const c=async(e,t)=>{if(e&&t){l(!0);try{const n=await ua.get("/report/data",{params:{startDate:e.toISOString(),endDate:t.toISOString()}});o(n.data)}catch(n){console.error("Error fetching parcels:",n)}finally{l(!1)}}};(0,s.useEffect)((()=>{e&&n&&c(e,n)}),[e,n]);const u=e=>{var t,n,i,r;return(null===e||void 0===e?void 0:e.type)===qG.Shipper?e.shipper?"".concat(e.shipper.username,",").concat(e.shipper.address||"N/A",", ").concat((null===(t=e.shipper.city)||void 0===t?void 0:t.name)||"N/A",", ").concat((null===(n=e.shipper.country)||void 0===n?void 0:n.name)||"N/A"):"Unknown Shipper":(null===e||void 0===e?void 0:e.type)===qG.Guest?e.guest?"".concat(e.guest.name,",").concat(e.guest.address||"N/A",", ").concat((null===(i=e.guest.city)||void 0===i?void 0:i.name)||"N/A",", ").concat((null===(r=e.guest.country)||void 0===r?void 0:r.name)||"N/A"):"Unknown Guest":"Unknown Sender"},d=e=>{var t,n;return e?"".concat(e.name||"N/A",",").concat(e.address||"N/A",", ").concat((null===(t=e.city)||void 0===t?void 0:t.name)||"N/A",", ").concat((null===(n=e.country)||void 0===n?void 0:n.name)||"N/A"):"Unknown Receiver"},h=e=>{const t=null===e||void 0===e?void 0:e[e.length-1];if(t&&t.status===YG.InWarehouse){var n;const e=(null===(n=t.warehouse)||void 0===n?void 0:n.name)||"Unknown Warehouse";return"In ".concat(e)}return t?t.status:"No Status"},p=e=>{const t=Object.keys(e[0]).join(","),n=e.map((e=>Object.values(e).map((e=>'"'.concat(e,'"'))).join(",")));return[t,...n].join("\n")},g=[{headerName:"Parcel ID",field:"parcelId",sortable:!0,filter:!0},{headerName:"Sender",field:"sender",sortable:!0,filter:!0,cellRenderer:e=>{const{sender:t}=e.data;return u(t)}},{headerName:"Receiver",field:"receiver.name",sortable:!0,filter:!0,cellRenderer:e=>{const{receiver:t}=e.data;return d(t)}},{headerName:"Delivery Fees",field:"deliveryFees",sortable:!0,filter:!0},{headerName:"Payment Status",field:"paymentStatus",sortable:!0,filter:!0},{headerName:"Subtotal",field:"subTotal",sortable:!0,filter:!0},{headerName:"Total Fee",field:"totalFee",sortable:!0,filter:!0},{headerName:"Status",field:"status",sortable:!0,filter:!0,cellRenderer:e=>{const{trackingHistory:t}=e.data;return h(t)}}];return(0,If.jsx)(Zx,{title:"Customer Report",children:(0,If.jsxs)("div",{className:"container mx-auto p-6",children:[(0,If.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Customer Report"}),(0,If.jsxs)("div",{className:"mb-4",children:[(0,If.jsx)(BZ(),{selected:e,onChange:e=>t(null!==e&&void 0!==e?e:void 0),selectsStart:!0,startDate:e,endDate:n,className:"border p-2 rounded",placeholderText:"Select start date"}),(0,If.jsx)(BZ(),{selected:n,onChange:e=>i(null!==e&&void 0!==e?e:void 0),selectsEnd:!0,startDate:e,endDate:n,minDate:e,className:"border p-2 rounded ml-2",placeholderText:"Select end date"}),(0,If.jsx)("button",{onClick:()=>{e&&n&&c(e,n)},className:"ml-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200",children:"Fetch Data"}),(0,If.jsx)("button",{onClick:async()=>{if(e&&n)try{const t=await ua.get("/report/download",{params:{startDate:e.toISOString(),endDate:n.toISOString()},responseType:"text"});if("string"===typeof t.data&&t.data.includes(",")){const i=dQ().parse(t.data,{header:!0,dynamicTyping:!0}).data;console.log(i);const r=i.map((e=>{var t,n,i,r,s;const o=e.sender?JSON.parse(e.sender):{},a=e.receiver?JSON.parse(e.receiver):{},l=e.trackingHistory?JSON.parse(e.trackingHistory):[];return{"Parcel ID":null!==(t=e.parcelId)&&void 0!==t?t:"N/A",Sender:u(o),Receiver:d(a),"Delivery Fees":null!==(n=e.deliveryFees)&&void 0!==n?n:"N/A","Payment Status":null!==(i=e.paymentStatus)&&void 0!==i?i:"N/A",Subtotal:null!==(r=e.subTotal)&&void 0!==r?r:"N/A","Total Fee":null!==(s=e.totalFee)&&void 0!==s?s:"N/A",Status:h(l),"Discount Type":e.discountType,"Discount Value":e.discountValue,"Tax Type":e.taxType,"Tax Value":e.taxValue}})),s=p(r),o=new Blob([s],{type:"text/csv"});(0,LZ.saveAs)(o,"parcel-report-".concat(e.toISOString(),"-to-").concat(n.toISOString(),".csv"))}else console.error("Error: Expected CSV data but got:",t.data)}catch(t){console.error("Error downloading report:",t)}},className:"ml-4 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition duration-200",children:"Download CSV"})]}),a&&(0,If.jsx)("p",{children:"Loading data..."}),!a&&r.length>0&&(0,If.jsx)("div",{className:"ag-theme-alpine",style:{height:400,width:"100%"},children:(0,If.jsx)(sG,{rowData:r,columnDefs:g,pagination:!0,paginationPageSize:10})})]})})};var GZ=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},HZ=GZ(GZ(GZ(GZ(GZ(GZ(GZ(GZ(GZ(GZ(GZ(GZ(GZ(GZ(GZ(GZ(GZ(GZ([],["onCopy","onCut","onPaste"],!0),["onCompositionEnd","onCompositionStart","onCompositionUpdate"],!0),["onFocus","onBlur"],!0),["onInput","onInvalid","onReset","onSubmit"],!0),["onLoad","onError"],!0),["onKeyDown","onKeyPress","onKeyUp"],!0),["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],!0),["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],!0),["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],!0),["onSelect"],!0),["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],!0),["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],!0),["onScroll"],!0),["onWheel"],!0),["onAnimationStart","onAnimationEnd","onAnimationIteration"],!0),["onTransitionEnd"],!0),["onChange"],!0),["onToggle"],!0);function WZ(e,t){var n={};return HZ.forEach((function(i){var r=e[i];r&&(n[i]=t?function(e){return r(e,t(i))}:r)})),n}function jZ(e){var t=!1,n=new Promise((function(n,i){e.then((function(e){return!t&&n(e)})).catch((function(e){return!t&&i(e)}))}));return{promise:n,cancel:function(){t=!0}}}function UZ(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=UZ(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}const zZ=function(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=UZ(e))&&(i&&(i+=" "),i+=t);return i};var YZ=!0,qZ="Invariant failed";function KZ(e,t){if(!e){if(YZ)throw new Error(qZ);var n="function"===typeof t?t():t,i=n?"".concat(qZ,": ").concat(n):qZ;throw new Error(i)}}var XZ,QZ,ZZ,$Z,JZ,e$,t$,n$,i$,r$,s$,o$,a$=n(9011),l$=Object.prototype.hasOwnProperty;function c$(e,t,n){for(n of e.keys())if(u$(n,t))return n}function u$(e,t){var n,i,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&u$(e[i],t[i]););return-1===i}if(n===Set){if(e.size!==t.size)return!1;for(i of e){if((r=i)&&"object"===typeof r&&!(r=c$(t,r)))return!1;if(!t.has(r))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(i of e){if((r=i[0])&&"object"===typeof r&&!(r=c$(t,r)))return!1;if(!u$(i[1],t.get(r)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((i=e.byteLength)===t.byteLength)for(;i--&&e.getInt8(i)===t.getInt8(i););return-1===i}if(ArrayBuffer.isView(e)){if((i=e.byteLength)===t.byteLength)for(;i--&&e[i]===t[i];);return-1===i}if(!n||"object"===typeof e){for(n in i=0,e){if(l$.call(e,n)&&++i&&!l$.call(t,n))return!1;if(!(n in t)||!u$(e[n],t[n]))return!1}return Object.keys(t).length===i}}return e!==e&&t!==t}function d$(e,t,n){t||(t=[]);var i=t.length++;return Object.defineProperty({},"_",{set:function(r){t[i]=r,e.apply(n,t)}})}function h$(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p$(e,t){h$(e,t),t.add(e)}function g$(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function f$(e,t,n){return n(g$(e,t))}function m$(e,t,n){h$(e,t),t.set(e,n)}function v$(e,t){return e.get(g$(e,t))}function y$(e,t,n){return e.set(g$(e,t),n),n}var C$={d:(e,t)=>{for(var n in t)C$.o(t,n)&&!C$.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},w$=globalThis.pdfjsLib={};C$.d(w$,{AbortException:()=>IJ,AnnotationEditorLayer:()=>kne,AnnotationEditorParamsType:()=>k$,AnnotationEditorType:()=>N$,AnnotationEditorUIManager:()=>x2,AnnotationLayer:()=>Y7,AnnotationMode:()=>I$,CMapCompressionType:()=>pJ,ColorPicker:()=>wee,DOMSVGFactory:()=>D0,DrawLayer:()=>Yne,FeatureTest:()=>LJ,GlobalWorkerOptions:()=>L4,ImageKind:()=>W$,InvalidPDFException:()=>RJ,MissingPDFException:()=>DJ,OPS:()=>gJ,Outliner:()=>b9,PDFDataRangeTransport:()=>N8,PDFDateString:()=>H0,PDFWorker:()=>Y8,PasswordResponses:()=>fJ,PermissionFlag:()=>O$,PixelsPerInch:()=>a0,RenderingCancelledException:()=>P0,TextLayer:()=>u8,UnexpectedResponseException:()=>MJ,Util:()=>BJ,VerbosityLevel:()=>hJ,XfaLayer:()=>C5,build:()=>f5,createValidAbsoluteUrl:()=>EJ,fetchData:()=>T0,getDocument:()=>D8,getFilenameFromUrl:()=>k0,getPdfFilenameFromUrl:()=>O0,getXfaPageViewport:()=>W0,isDataScheme:()=>I0,isPdfFile:()=>N0,noContextMenu:()=>B0,normalizeUnicode:()=>jJ,renderTextLayer:()=>b8,setLayerDimensions:()=>Y0,shadow:()=>xJ,updateTextLayer:()=>S8,version:()=>g5});const b$="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),S$=[1,0,0,1,0,0],E$=[.001,0,0,.001,0,0],x$=1.35,A$=1,T$=2,_$=4,R$=16,D$=32,M$=64,P$=256,I$={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},N$={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},k$={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},O$={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},L$=0,F$=1,B$=2,V$=3,G$=3,H$=4,W$={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},j$=1,U$=2,z$=3,Y$=4,q$=5,K$=6,X$=7,Q$=8,Z$=9,$$=10,J$=11,eJ=12,tJ=13,nJ=14,iJ=15,rJ=16,sJ=17,oJ=20,aJ=1,lJ=2,cJ=3,uJ=4,dJ=5,hJ={ERRORS:0,WARNINGS:1,INFOS:5},pJ={NONE:0,BINARY:1},gJ={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},fJ={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let mJ=hJ.WARNINGS;function vJ(e){Number.isInteger(e)&&(mJ=e)}function yJ(){return mJ}function CJ(e){mJ>=hJ.INFOS&&console.log("Info: ".concat(e))}function wJ(e){mJ>=hJ.WARNINGS&&console.log("Warning: ".concat(e))}function bJ(e){throw new Error(e)}function SJ(e,t){e||bJ(t)}function EJ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch{}}const i=t?new URL(e,t):new URL(e);if(function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch{}return null}function xJ(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const AJ=function(){function e(t,n){this.constructor===e&&bJ("Cannot initialize BaseException."),this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class TJ extends AJ{constructor(e,t){super(e,"PasswordException"),this.code=t}}class _J extends AJ{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class RJ extends AJ{constructor(e){super(e,"InvalidPDFException")}}class DJ extends AJ{constructor(e){super(e,"MissingPDFException")}}class MJ extends AJ{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class PJ extends AJ{constructor(e){super(e,"FormatError")}}class IJ extends AJ{constructor(e){super(e,"AbortException")}}function NJ(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||bJ("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const i=[];for(let r=0;r<t;r+=n){const s=Math.min(r+n,t),o=e.subarray(r,s);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function kJ(e){"string"!==typeof e&&bJ("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let i=0;i<t;++i)n[i]=255&e.charCodeAt(i);return n}function OJ(e){const t=Object.create(null);for(const[n,i]of e)t[n]=i;return t}class LJ{static get isLittleEndian(){return xJ(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return xJ(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return xJ(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get platform(){var e;return"undefined"!==typeof navigator&&"string"===typeof(null===(e=navigator)||void 0===e?void 0:e.platform)?xJ(this,"platform",{isMac:navigator.platform.includes("Mac")}):xJ(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return xJ(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const FJ=Array.from(Array(256).keys(),(e=>e.toString(16).padStart(2,"0")));class BJ{static makeHexColor(e,t,n){return"#".concat(FJ[e]).concat(FJ[t]).concat(FJ[n])}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),s=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],i[0],r[0],s[0]),Math.min(n[1],i[1],r[1],s[1]),Math.max(n[0],i[0],r[0],s[0]),Math.max(n[1],i[1],r[1],s[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],s=e[2]*t[1]+e[3]*t[3],o=(n+s)/2,a=Math.sqrt((n+s)**2-4*(n*s-r*i))/2,l=o+a||1,c=o-a||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>s?null:[n,r,i,s]}static bezierBoundingBox(e,t,n,i,r,s,o,a,l){return l?(l[0]=Math.min(l[0],e,o),l[1]=Math.min(l[1],t,a),l[2]=Math.max(l[2],e,o),l[3]=Math.max(l[3],t,a)):l=[Math.min(e,o),Math.min(t,a),Math.max(e,o),Math.max(t,a)],g$(BJ,this,GJ).call(this,e,n,r,o,t,i,s,a,3*(3*(n-r)-e+o),6*(e-2*n+r),3*(n-e),l),g$(BJ,this,GJ).call(this,e,n,r,o,t,i,s,a,3*(3*(i-s)-t+a),6*(t-2*i+s),3*(i-t),l),l}}function VJ(e,t,n,i,r,s,o,a,l,c){if(l<=0||l>=1)return;const u=1-l,d=l*l,h=d*l,p=u*(u*(u*e+3*l*t)+3*d*n)+h*i,g=u*(u*(u*r+3*l*s)+3*d*o)+h*a;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],g),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],g)}function GJ(e,t,n,i,r,s,o,a,l,c,u,d){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&g$(XZ,this,VJ).call(this,e,t,n,i,r,s,o,a,-u/c,d));const h=c**2-4*u*l;if(h<0)return;const p=Math.sqrt(h),g=2*l;g$(XZ,this,VJ).call(this,e,t,n,i,r,s,o,a,(-c+p)/g,d),g$(XZ,this,VJ).call(this,e,t,n,i,r,s,o,a,(-c-p)/g,d)}XZ=BJ;let HJ=null,WJ=null;function jJ(e){return HJ||(HJ=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,WJ=new Map([["\ufb05","\u017ft"]])),e.replaceAll(HJ,((e,t,n)=>t?t.normalize("NFKC"):WJ.get(n)))}const UJ="pdfjs_internal_id_",zJ=0,YJ=1,qJ=2,KJ=3,XJ=4,QJ=5,ZJ=6,$J=7,JJ=8;class e0{constructor(){this.constructor===e0&&bJ("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,r){return"none"}destroy(){}}var t0=new WeakMap;class n0{constructor(){let{enableHWA:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m$(this,t0,!1),this.constructor===n0&&bJ("Cannot initialize BaseCanvasFactory."),y$(t0,this,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!v$(t0,this)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){bJ("Abstract method `_createCanvas` called.")}}class i0{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.constructor===i0&&bJ("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?pJ.BINARY:pJ.NONE;return this._fetchData(n,i).catch((e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))}))}_fetchData(e,t){bJ("Abstract method `_fetchData` called.")}}class r0{constructor(e){let{baseUrl:t=null}=e;this.constructor===r0&&bJ("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetchData(n).catch((e=>{throw new Error("Unable to load font data at: ".concat(n))}))}_fetchData(e){bJ("Abstract method `_fetchData` called.")}}class s0{constructor(){this.constructor===s0&&bJ("Cannot initialize BaseSVGFactory.")}create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(e,"px")),i.setAttribute("height","".concat(t,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),i}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){bJ("Abstract method `_createSVG` called.")}}const o0="http://www.w3.org/2000/svg";class a0{}QZ=a0,An(a0,"CSS",96),An(a0,"PDF",72),An(a0,"PDF_TO_CSS_UNITS",QZ.CSS/QZ.PDF);var l0=new WeakMap,c0=new WeakMap,u0=new WeakMap,d0=new WeakMap,h0=new WeakMap,p0=new WeakMap,g0=new WeakSet;function f0(e){return v$(l0,e)||y$(l0,e,new Map)}function m0(e){return v$(h0,e)||y$(h0,e,new Map)}function v0(e){if(!v$(c0,e)){const t=v$(d0,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=v$(d0,e).createElementNS(o0,"svg");i.setAttribute("width",0),i.setAttribute("height",0),y$(c0,e,v$(d0,e).createElementNS(o0,"defs")),t.append(i),i.append(v$(c0,e)),v$(d0,e).body.append(t)}return v$(c0,e)}function y0(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const i=n.join(",");return[i,i,i]}const[t,n,i]=e,r=new Array(256),s=new Array(256),o=new Array(256);for(let a=0;a<256;a++)r[a]=t[a]/255,s[a]=n[a]/255,o[a]=i[a]/255;return[r.join(","),s.join(","),o.join(",")]}function C0(e){const t=v$(d0,this).createElementNS(o0,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function w0(e){const t=v$(d0,this).createElementNS(o0,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function b0(e){const t=v$(d0,this).createElementNS(o0,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),f$(g0,this,v0).append(t),t}function S0(e,t,n){const i=v$(d0,this).createElementNS(o0,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}function E0(e,t,n,i){const r=v$(d0,this).createElementNS(o0,"feComponentTransfer");i.append(r),g$(g0,this,S0).call(this,r,"feFuncR",e),g$(g0,this,S0).call(this,r,"feFuncG",t),g$(g0,this,S0).call(this,r,"feFuncB",n)}function x0(e,t){const n=v$(d0,this).createElementNS(o0,"feComponentTransfer");t.append(n),g$(g0,this,S0).call(this,n,"feFuncA",e)}function A0(e){return f$(g0,this,v0).style.color=e,j0(getComputedStyle(f$(g0,this,v0)).getPropertyValue("color"))}async function T0(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(F0(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise(((n,i)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE)if(200!==r.status&&0!==r.status)i(new Error(r.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(r.response)}n(r.responseText)}},r.send(null)}))}class _0 extends i0{_fetchData(e,t){return T0(e,this.isCompressed?"arraybuffer":"text").then((e=>({cMapData:e instanceof ArrayBuffer?new Uint8Array(e):kJ(e),compressionType:t})))}}class R0 extends r0{_fetchData(e){return T0(e,"arraybuffer").then((e=>new Uint8Array(e)))}}class D0 extends s0{_createSVG(e){return document.createElementNS(o0,e)}}class M0{constructor(e){let{viewBox:t,scale:n,rotation:i,offsetX:r=0,offsetY:s=0,dontFlip:o=!1}=e;this.viewBox=t,this.scale=n,this.rotation=i,this.offsetX=r,this.offsetY=s;const a=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let c,u,d,h,p,g,f,m;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,u=0,d=0,h=1;break;case 90:c=0,u=1,d=1,h=0;break;case 270:c=0,u=-1,d=-1,h=0;break;case 0:c=1,u=0,d=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,h=-h),0===c?(p=Math.abs(l-t[1])*n+r,g=Math.abs(a-t[0])*n+s,f=(t[3]-t[1])*n,m=(t[2]-t[0])*n):(p=Math.abs(a-t[0])*n+r,g=Math.abs(l-t[1])*n+s,f=(t[2]-t[0])*n,m=(t[3]-t[1])*n),this.transform=[c*n,u*n,d*n,h*n,p-c*n*a-d*n*l,g-u*n*a-h*n*l],this.width=f,this.height=m}get rawDims(){const{viewBox:e}=this;return xJ(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new M0({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){return BJ.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=BJ.applyTransform([e[0],e[1]],this.transform),n=BJ.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return BJ.applyInverseTransform([e,t],this.transform)}}class P0 extends AJ{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function I0(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function N0(e){return"string"===typeof e&&/\.pdf$/i.test(e)}function k0(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)}function O0(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(I0(e))return wJ('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let r=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t}class L0{constructor(){An(this,"started",Object.create(null)),An(this,"times",[])}time(e){e in this.started&&wJ("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||wJ("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:r}of this.times)e.push("".concat(n.padEnd(t)," ").concat(r-i,"ms\n"));return e.join("")}}function F0(e,t){try{const{protocol:n}=t?new URL(e,t):new URL(e);return"http:"===n||"https:"===n}catch{return!1}}function B0(e){e.preventDefault()}function V0(e){console.log("Deprecated API usage: "+e)}let G0;class H0{static toDateObject(e){if(!e||"string"!==typeof e)return null;G0||(G0=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=G0.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let a=parseInt(t[6],10);a=a>=0&&a<=59?a:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[9],10)||0;return u=u>=0&&u<=59?u:0,"-"===l?(s+=c,o+=u):"+"===l&&(s-=c,o-=u),new Date(Date.UTC(n,i,r,s,o,a))}}function W0(e,t){let{scale:n=1,rotation:i=0}=t;const{width:r,height:s}=e.attributes.style,o=[0,0,parseInt(r),parseInt(s)];return new M0({viewBox:o,scale:n,rotation:i})}function j0(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map((e=>parseInt(e))):e.startsWith("rgba(")?e.slice(5,-1).split(",").map((e=>parseInt(e))).slice(0,3):(wJ('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function U0(e){const{a:t,b:n,c:i,d:r,e:s,f:o}=e.getTransform();return[t,n,i,r,s,o]}function z0(e){const{a:t,b:n,c:i,d:r,e:s,f:o}=e.getTransform().invertSelf();return[t,n,i,r,s,o]}function Y0(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof M0){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:s}=e,o=LJ.isCSSRoundSupported,a="var(--scale-factor) * ".concat(i,"px"),l="var(--scale-factor) * ".concat(r,"px"),c=o?"round(".concat(a,", 1px)"):"calc(".concat(a,")"),u=o?"round(".concat(l,", 1px)"):"calc(".concat(l,")");n&&t.rotation%180!==0?(s.width=u,s.height=c):(s.width=c,s.height=u)}i&&e.setAttribute("data-main-rotation",t.rotation)}var q0=new WeakMap,K0=new WeakMap,X0=new WeakMap,Q0=new WeakMap,Z0=new WeakSet;class $0{constructor(e){p$(this,Z0),m$(this,q0,null),m$(this,K0,null),m$(this,X0,void 0),m$(this,Q0,null),y$(X0,this,e)}render(){const e=y$(q0,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=v$(X0,this)._uiManager._signal;e.addEventListener("contextmenu",B0,{signal:t}),e.addEventListener("pointerdown",J0,{signal:t});const n=y$(Q0,this,document.createElement("div"));n.className="buttons",e.append(n);const i=v$(X0,this).toolbarPosition;if(i){const{style:t}=e,n="ltr"===v$(X0,this)._uiManager.direction?1-i[0]:i[0];t.insetInlineEnd="".concat(100*n,"%"),t.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return g$(Z0,this,i1).call(this),e}hide(){var e;v$(q0,this).classList.add("hidden"),null===(e=v$(K0,this))||void 0===e||e.hideDropdown()}show(){v$(q0,this).classList.remove("hidden")}addAltTextButton(e){g$(Z0,this,n1).call(this,e),v$(Q0,this).prepend(e,f$(Z0,this,r1))}addColorPicker(e){y$(K0,this,e);const t=e.renderButton();g$(Z0,this,n1).call(this,t),v$(Q0,this).prepend(t,f$(Z0,this,r1))}remove(){var e;v$(q0,this).remove(),null===(e=v$(K0,this))||void 0===e||e.destroy(),y$(K0,this,null)}}function J0(e){e.stopPropagation()}function e1(e){v$(X0,this)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}function t1(e){v$(X0,this)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}function n1(e){const t=v$(X0,this)._uiManager._signal;e.addEventListener("focusin",g$(Z0,this,e1).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",g$(Z0,this,t1).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",B0,{signal:t})}function i1(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-editor-remove-".concat(v$(X0,this).editorType,"-button")),g$(Z0,this,n1).call(this,e),e.addEventListener("click",(e=>{v$(X0,this)._uiManager.delete()}),{signal:v$(X0,this)._uiManager._signal}),v$(Q0,this).append(e)}function r1(e){const t=document.createElement("div");return t.className="divider",t}var s1=new WeakMap,o1=new WeakMap,a1=new WeakMap,l1=new WeakSet;class c1{constructor(e){p$(this,l1),m$(this,s1,null),m$(this,o1,null),m$(this,a1,void 0),y$(a1,this,e)}show(e,t,n){const[i,r]=g$(l1,this,d1).call(this,t,n),{style:s}=v$(o1,this)||y$(o1,this,g$(l1,this,u1).call(this));e.append(v$(o1,this)),s.insetInlineEnd="".concat(100*i,"%"),s.top="calc(".concat(100*r,"% + var(--editor-toolbar-vert-offset))")}hide(){v$(o1,this).remove()}}function u1(){const e=y$(o1,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",B0,{signal:v$(a1,this)._signal});const t=y$(s1,this,document.createElement("div"));return t.className="buttons",e.append(t),g$(l1,this,h1).call(this),e}function d1(e,t){let n=0,i=0;for(const r of e){const e=r.y+r.height;if(e<n)continue;const s=r.x+(t?r.width:0);e>n?(i=s,n=e):t?s>i&&(i=s):s<i&&(i=s)}return[t?1-i:i,n]}function h1(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=v$(a1,this)._signal;e.addEventListener("contextmenu",B0,{signal:n}),e.addEventListener("click",(()=>{v$(a1,this).highlightSelection("floating_button")}),{signal:n}),v$(s1,this).append(e)}function p1(e,t,n){for(const i of n)t.addEventListener(i,e[i].bind(e))}var g1=new WeakMap;class f1{constructor(){m$(this,g1,0)}get id(){var e,t;return"".concat("pdfjs_internal_editor_").concat((y$(g1,this,(e=v$(g1,this),t=e++,e)),t))}}var m1=new WeakMap,v1=new WeakMap,y1=new WeakMap,C1=new WeakSet;class w1{constructor(){p$(this,C1),m$(this,m1,function(){var e,t;if("undefined"!==typeof crypto&&"function"===typeof(null===(e=crypto)||void 0===e?void 0:e.randomUUID))return crypto.randomUUID();const n=new Uint8Array(32);if("undefined"!==typeof crypto&&"function"===typeof(null===(t=crypto)||void 0===t?void 0:t.getRandomValues))crypto.getRandomValues(n);else for(let i=0;i<32;i++)n[i]=Math.floor(255*Math.random());return NJ(n)}()),m$(this,v1,0),m$(this,y1,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return xJ(this,"_isSVGFittingCanvas",t.decode().then((()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0]))))}async getFromFile(e){const{lastModified:t,name:n,size:i,type:r}=e;return g$(C1,this,b1).call(this,"".concat(t,"_").concat(n,"_").concat(i,"_").concat(r),e)}async getFromUrl(e){return g$(C1,this,b1).call(this,e,e)}async getFromId(e){v$(y1,this)||y$(y1,this,new Map);const t=v$(y1,this).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=v$(y1,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){v$(y1,this)||y$(y1,this,new Map);const t=v$(y1,this).get(e);t&&(t.refCounter-=1,0===t.refCounter&&(t.bitmap=null))}isValidId(e){return e.startsWith("image_".concat(v$(m1,this),"_"))}}async function b1(e,t){var n;v$(y1,this)||y$(y1,this,new Map);let i=v$(y1,this).get(e);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var r,s;let e;if(i||(i={bitmap:null,id:"image_".concat(v$(m1,this),"_").concat((y$(v1,this,(r=v$(v1,this),s=r++,r)),s)),refCounter:0,isSvg:!1}),"string"===typeof t?(i.url=t,e=await T0(t,"blob")):e=i.file=t,"image/svg+xml"===e.type){const t=ZZ._isSVGFittingCanvas,n=new FileReader,r=new Image,s=new Promise(((e,s)=>{r.onload=()=>{i.bitmap=r,i.isSvg=!0,e()},n.onload=async()=>{const e=i.svgUrl=n.result;r.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},r.onerror=n.onerror=s}));n.readAsDataURL(e),await s}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(rre){console.error(rre),i=null}return v$(y1,this).set(e,i),i&&v$(y1,this).set(i.id,i),i}ZZ=w1;var S1=new WeakMap,E1=new WeakMap,x1=new WeakMap,A1=new WeakMap;class T1{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;m$(this,S1,[]),m$(this,E1,!1),m$(this,x1,void 0),m$(this,A1,-1),y$(x1,this,e)}add(e){let{cmd:t,undo:n,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}=e;if(r&&t(),v$(E1,this))return;const l={cmd:t,undo:n,post:i,type:s};if(-1===v$(A1,this))return v$(S1,this).length>0&&(v$(S1,this).length=0),y$(A1,this,0),void v$(S1,this).push(l);if(o&&v$(S1,this)[v$(A1,this)].type===s)return a&&(l.undo=v$(S1,this)[v$(A1,this)].undo),void(v$(S1,this)[v$(A1,this)]=l);const c=v$(A1,this)+1;c===v$(x1,this)?v$(S1,this).splice(0,1):(y$(A1,this,c),c<v$(S1,this).length&&v$(S1,this).splice(c)),v$(S1,this).push(l)}undo(){if(-1===v$(A1,this))return;y$(E1,this,!0);const{undo:e,post:t}=v$(S1,this)[v$(A1,this)];e(),null===t||void 0===t||t(),y$(E1,this,!1),y$(A1,this,v$(A1,this)-1)}redo(){if(v$(A1,this)<v$(S1,this).length-1){y$(A1,this,v$(A1,this)+1),y$(E1,this,!0);const{cmd:e,post:t}=v$(S1,this)[v$(A1,this)];e(),null===t||void 0===t||t(),y$(E1,this,!1)}}hasSomethingToUndo(){return-1!==v$(A1,this)}hasSomethingToRedo(){return v$(A1,this)<v$(S1,this).length-1}destroy(){y$(S1,this,null)}}var _1=new WeakSet;class R1{constructor(e){p$(this,_1),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=LJ.platform;for(const[n,i,r={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:i,options:r}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:i,options:r}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(g$(_1,this,D1).call(this,t));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:s=[],checker:o=null}}=n;o&&!o(e,t)||(i.bind(e,...s,t)(),r||(t.stopPropagation(),t.preventDefault()))}}function D1(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}class M1{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const n of e.keys()){t.style.color=n;const i=window.getComputedStyle(t).color;e.set(n,j0(i))}t.remove()}(e),xJ(this,"_colors",e)}convert(e){const t=j0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every(((e,n)=>e===t[n])))return M1._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?BJ.makeHexColor(...t):e}}An(M1,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var P1=new WeakMap,I1=new WeakMap,N1=new WeakMap,k1=new WeakMap,O1=new WeakMap,L1=new WeakMap,F1=new WeakMap,B1=new WeakMap,V1=new WeakMap,G1=new WeakMap,H1=new WeakMap,W1=new WeakMap,j1=new WeakMap,U1=new WeakMap,z1=new WeakMap,Y1=new WeakMap,q1=new WeakMap,K1=new WeakMap,X1=new WeakMap,Q1=new WeakMap,Z1=new WeakMap,$1=new WeakMap,J1=new WeakMap,e2=new WeakMap,t2=new WeakMap,n2=new WeakMap,i2=new WeakMap,r2=new WeakMap,s2=new WeakMap,o2=new WeakMap,a2=new WeakMap,l2=new WeakMap,c2=new WeakMap,u2=new WeakMap,d2=new WeakMap,h2=new WeakMap,p2=new WeakMap,g2=new WeakMap,f2=new WeakMap,m2=new WeakMap,v2=new WeakMap,y2=new WeakMap,C2=new WeakMap,w2=new WeakMap,b2=new WeakMap,S2=new WeakMap,E2=new WeakSet;class x2{static get _keyboardManager(){const e=x2.prototype,t=e=>v$(b2,e).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return xJ(this,"_keyboardManager",new R1([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&v$(b2,e).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&v$(b2,e).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}constructor(e,t,n,i,r,s,o,a,l){p$(this,E2),m$(this,P1,new AbortController),m$(this,I1,null),m$(this,N1,new Map),m$(this,k1,new Map),m$(this,O1,null),m$(this,L1,null),m$(this,F1,null),m$(this,B1,new T1),m$(this,V1,0),m$(this,G1,new Set),m$(this,H1,null),m$(this,W1,null),m$(this,j1,new Set),m$(this,U1,!1),m$(this,z1,null),m$(this,Y1,null),m$(this,q1,null),m$(this,K1,!1),m$(this,X1,null),m$(this,Q1,new f1),m$(this,Z1,!1),m$(this,$1,!1),m$(this,J1,null),m$(this,e2,null),m$(this,t2,null),m$(this,n2,N$.NONE),m$(this,i2,new Set),m$(this,r2,null),m$(this,s2,null),m$(this,o2,null),m$(this,a2,this.blur.bind(this)),m$(this,l2,this.focus.bind(this)),m$(this,c2,this.copy.bind(this)),m$(this,u2,this.cut.bind(this)),m$(this,d2,this.paste.bind(this)),m$(this,h2,this.keydown.bind(this)),m$(this,p2,this.keyup.bind(this)),m$(this,g2,this.onEditingAction.bind(this)),m$(this,f2,this.onPageChanging.bind(this)),m$(this,m2,this.onScaleChanging.bind(this)),m$(this,v2,this.onRotationChanging.bind(this)),m$(this,y2,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),m$(this,C2,[0,0]),m$(this,w2,null),m$(this,b2,null),m$(this,S2,null),this._signal=v$(P1,this).signal,y$(b2,this,e),y$(S2,this,t),y$(O1,this,n),this._eventBus=i,this._eventBus._on("editingaction",v$(g2,this)),this._eventBus._on("pagechanging",v$(f2,this)),this._eventBus._on("scalechanging",v$(m2,this)),this._eventBus._on("rotationchanging",v$(v2,this)),g$(E2,this,D2).call(this),g$(E2,this,L2).call(this),g$(E2,this,I2).call(this),y$(L1,this,r.annotationStorage),y$(z1,this,r.filterFactory),y$(s2,this,s),y$(q1,this,o||null),y$(U1,this,a),y$(t2,this,l||null),this.viewParameters={realScale:a0.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){var e,t,n;null===(e=v$(P1,this))||void 0===e||e.abort(),y$(P1,this,null),this._signal=null,this._eventBus._off("editingaction",v$(g2,this)),this._eventBus._off("pagechanging",v$(f2,this)),this._eventBus._off("scalechanging",v$(m2,this)),this._eventBus._off("rotationchanging",v$(v2,this));for(const i of v$(k1,this).values())i.destroy();v$(k1,this).clear(),v$(N1,this).clear(),v$(j1,this).clear(),y$(I1,this,null),v$(i2,this).clear(),v$(B1,this).destroy(),null===(t=v$(O1,this))||void 0===t||t.destroy(),null===(n=v$(X1,this))||void 0===n||n.hide(),y$(X1,this,null),v$(Y1,this)&&(clearTimeout(v$(Y1,this)),y$(Y1,this,null)),v$(w2,this)&&(clearTimeout(v$(w2,this)),y$(w2,this,null))}async mlGuess(e){var t;return(null===(t=v$(t2,this))||void 0===t?void 0:t.guess(e))||null}get hasMLManager(){return!!v$(t2,this)}get hcmFilter(){return xJ(this,"hcmFilter",v$(s2,this)?v$(z1,this).addHCMFilter(v$(s2,this).foreground,v$(s2,this).background):"none")}get direction(){return xJ(this,"direction",getComputedStyle(v$(b2,this)).direction)}get highlightColors(){return xJ(this,"highlightColors",v$(q1,this)?new Map(v$(q1,this).split(",").map((e=>e.split("=").map((e=>e.trim()))))):null)}get highlightColorNames(){return xJ(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(e=>e.reverse()))):null)}setMainHighlightColorPicker(e){y$(e2,this,e)}editAltText(e){var t;null===(t=v$(O1,this))||void 0===t||t.editAltText(this,e)}onPageChanging(e){let{pageNumber:t}=e;y$(V1,this,t-1)}focusMainContainer(){v$(b2,this).focus()}findParent(e,t){for(const n of v$(k1,this).values()){const{x:i,y:r,width:s,height:o}=n.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=r&&t<=r+o)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];v$(S2,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){v$(j1,this).add(e)}removeShouldRescale(e){v$(j1,this).delete(e)}onScaleChanging(e){let{scale:t}=e;this.commitOrRemove(),this.viewParameters.realScale=t*a0.PDF_TO_CSS_UNITS;for(const n of v$(j1,this))n.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t,o=t.toString(),a=g$(E2,this,A2).call(this,t).closest(".textLayer"),l=this.getSelectionBoxes(a);if(l){t.empty(),v$(n2,this)===N$.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:N$.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const t of v$(k1,this).values())if(t.hasTextLayer(a)){t.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:l,anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s,text:o});break}}}addToAnnotationStorage(e){e.isEmpty()||!v$(L1,this)||v$(L1,this).has(e.id)||v$(L1,this).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,v$(K1,this)&&(y$(K1,this,!1),g$(E2,this,R2).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of v$(i2,this))if(t.div.contains(e)){y$(J1,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!v$(J1,this))return;const[e,t]=v$(J1,this);y$(J1,this,null),t.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0,signal:this._signal}),t.focus()}addEditListeners(){g$(E2,this,I2).call(this),g$(E2,this,k2).call(this)}removeEditListeners(){g$(E2,this,N2).call(this),g$(E2,this,O2).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of v$(W1,this))if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of v$(W1,this))if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){var t;if(e.preventDefault(),null===(t=v$(I1,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of v$(i2,this)){const e=i.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const e of v$(W1,this))if(e.isHandlingMimeForPasting(s.type))return void e.paste(s,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){return void wJ('paste: "'.concat(r.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const e=[];for(const s of n){const t=i.deserialize(s);if(!t)return;e.push(t)}const t=()=>{for(const t of e)g$(E2,this,H2).call(this,t);g$(E2,this,U2).call(this,e)},r=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:r,mustExec:!0})}catch(r){wJ('paste: "'.concat(r.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),v$(n2,this)===N$.NONE||this.isEditorHandlingKeyboard||x2._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,v$(K1,this)&&(y$(K1,this,!1),g$(E2,this,R2).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(e){e?(g$(E2,this,M2).call(this),g$(E2,this,k2).call(this),g$(E2,this,F2).call(this,{isEditing:v$(n2,this)!==N$.NONE,isEmpty:g$(E2,this,j2).call(this),hasSomethingToUndo:v$(B1,this).hasSomethingToUndo(),hasSomethingToRedo:v$(B1,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(g$(E2,this,P2).call(this),g$(E2,this,O2).call(this),g$(E2,this,F2).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!v$(W1,this)){y$(W1,this,e);for(const e of v$(W1,this))g$(E2,this,B2).call(this,e.defaultPropertiesToUpdate)}}getId(){return v$(Q1,this).id}get currentLayer(){return v$(k1,this).get(v$(V1,this))}getLayer(e){return v$(k1,this).get(e)}get currentPageIndex(){return v$(V1,this)}addLayer(e){v$(k1,this).set(e.pageIndex,e),v$(Z1,this)?e.enable():e.disable()}removeLayer(e){v$(k1,this).delete(e.pageIndex)}updateMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(v$(n2,this)!==e){if(y$(n2,this,e),e===N$.NONE)return this.setEditingState(!1),void g$(E2,this,G2).call(this);this.setEditingState(!0),g$(E2,this,V2).call(this),this.unselectAll();for(const t of v$(k1,this).values())t.updateMode(e);if(t||!n){if(t)for(const e of v$(N1,this).values())if(e.annotationElementId===t){this.setSelected(e),e.enterInEditMode();break}}else this.addNewEditorFromKeyboard()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==v$(n2,this)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(v$(W1,this)){switch(e){case k$.CREATE:return void this.currentLayer.addNewEditor();case k$.HIGHLIGHT_DEFAULT_COLOR:null===(n=v$(e2,this))||void 0===n||n.updateColor(t);break;case k$.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(v$(o2,this)||y$(o2,this,new Map)).set(e,t),this.showAllEditors("highlight",t)}for(const n of v$(i2,this))n.updateParams(e,t);for(const n of v$(W1,this))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,i;for(const r of v$(N1,this).values())r.editorType===e&&r.show(t);(null===(n=null===(i=v$(o2,this))||void 0===i?void 0:i.get(k$.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==t&&g$(E2,this,B2).call(this,[[k$.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(v$($1,this)!==e){y$($1,this,e);for(const t of v$(k1,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of v$(N1,this).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return v$(N1,this).get(e)}addEditor(e){v$(N1,this).set(e.id,e)}removeEditor(e){var t;(e.div.contains(document.activeElement)&&(v$(Y1,this)&&clearTimeout(v$(Y1,this)),y$(Y1,this,setTimeout((()=>{this.focusMainContainer(),y$(Y1,this,null)}),0))),v$(N1,this).delete(e.id),this.unselect(e),e.annotationElementId&&v$(G1,this).has(e.annotationElementId))||(null===(t=v$(L1,this))||void 0===t||t.remove(e.id))}addDeletedAnnotationElement(e){v$(G1,this).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return v$(G1,this).has(e)}removeDeletedAnnotationElement(e){v$(G1,this).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){v$(I1,this)!==e&&(y$(I1,this,e),e&&g$(E2,this,B2).call(this,e.propertiesToUpdate))}updateUI(e){f$(E2,this,W2)===e&&g$(E2,this,B2).call(this,e.propertiesToUpdate)}toggleSelected(e){if(v$(i2,this).has(e))return v$(i2,this).delete(e),e.unselect(),void g$(E2,this,F2).call(this,{hasSelectedEditor:this.hasSelection});v$(i2,this).add(e),e.select(),g$(E2,this,B2).call(this,e.propertiesToUpdate),g$(E2,this,F2).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of v$(i2,this))t!==e&&t.unselect();v$(i2,this).clear(),v$(i2,this).add(e),e.select(),g$(E2,this,B2).call(this,e.propertiesToUpdate),g$(E2,this,F2).call(this,{hasSelectedEditor:!0})}isSelected(e){return v$(i2,this).has(e)}get firstSelectedEditor(){return v$(i2,this).values().next().value}unselect(e){e.unselect(),v$(i2,this).delete(e),g$(E2,this,F2).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==v$(i2,this).size}get isEnterHandled(){return 1===v$(i2,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){v$(B1,this).undo(),g$(E2,this,F2).call(this,{hasSomethingToUndo:v$(B1,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:g$(E2,this,j2).call(this)})}redo(){v$(B1,this).redo(),g$(E2,this,F2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:v$(B1,this).hasSomethingToRedo(),isEmpty:g$(E2,this,j2).call(this)})}addCommands(e){v$(B1,this).add(e),g$(E2,this,F2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:g$(E2,this,j2).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...v$(i2,this)];this.addCommands({cmd:()=>{for(const t of e)t.remove()},undo:()=>{for(const t of e)g$(E2,this,H2).call(this,t)},mustExec:!0})}commitOrRemove(){var e;null===(e=v$(I1,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return v$(I1,this)||this.hasSelection}selectAll(){for(const e of v$(i2,this))e.commit();g$(E2,this,U2).call(this,v$(N1,this).values())}unselectAll(){if((!v$(I1,this)||(v$(I1,this).commitOrRemove(),v$(n2,this)===N$.NONE))&&this.hasSelection){for(const e of v$(i2,this))e.unselect();v$(i2,this).clear(),g$(E2,this,F2).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;v$(C2,this)[0]+=e,v$(C2,this)[1]+=t;const[n,i]=v$(C2,this),r=[...v$(i2,this)];v$(w2,this)&&clearTimeout(v$(w2,this)),y$(w2,this,setTimeout((()=>{y$(w2,this,null),v$(C2,this)[0]=v$(C2,this)[1]=0,this.addCommands({cmd:()=>{for(const e of r)v$(N1,this).has(e.id)&&e.translateInPage(n,i)},undo:()=>{for(const e of r)v$(N1,this).has(e.id)&&e.translateInPage(-n,-i)},mustExec:!1})}),1e3));for(const s of r)s.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),y$(H1,this,new Map);for(const e of v$(i2,this))v$(H1,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!v$(H1,this))return!1;this.disableUserSelect(!1);const e=v$(H1,this);y$(H1,this,null);let t=!1;for(const[{x:i,y:r,pageIndex:s},o]of e)o.newX=i,o.newY=r,o.newPageIndex=s,t||(t=i!==o.savedX||r!==o.savedY||s!==o.savedPageIndex);if(!t)return!1;const n=(e,t,n,i)=>{if(v$(N1,this).has(e.id)){const r=v$(k1,this).get(i);r?e._setParentAndPosition(r,t,n):(e.pageIndex=i,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:i,newY:r,newPageIndex:s}]of e)n(t,i,r,s)},undo:()=>{for(const[t,{savedX:i,savedY:r,savedPageIndex:s}]of e)n(t,i,r,s)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(v$(H1,this))for(const n of v$(H1,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null===(e=this.getActive())||void 0===e?void 0:e.shouldGetKeyboardEvents())||1===v$(i2,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return v$(I1,this)===e}getActive(){return v$(I1,this)}getMode(){return v$(n2,this)}get imageManager(){return xJ(this,"imageManager",new w1)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:s}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(e,t,o,a)=>({x:(t-i)/s,y:1-(e+o-n)/r,width:a/s,height:o/r});break;case"180":o=(e,t,o,a)=>({x:1-(e+o-n)/r,y:1-(t+a-i)/s,width:o/r,height:a/s});break;case"270":o=(e,t,o,a)=>({x:1-(t+a-i)/s,y:(e-n)/r,width:a/s,height:o/r});break;default:o=(e,t,o,a)=>({x:(e-n)/r,y:(t-i)/s,width:o/r,height:a/s})}const a=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:i,height:r}of e.getClientRects())0!==i&&0!==r&&a.push(o(t,n,i,r))}return 0===a.length?null:a}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(v$(F1,this)||y$(F1,this,new Map)).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null===(t=v$(F1,this))||void 0===t||t.delete(n)}renderAnnotationElement(e){var t;const n=null===(t=v$(F1,this))||void 0===t?void 0:t.get(e.data.id);if(!n)return;const i=v$(L1,this).getRawValue(n);i&&(v$(n2,this)!==N$.NONE||i.hasBeenModified)&&i.renderAnnotationElement(e)}}function A2(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function T2(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=g$(E2,this,A2).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(v$(X1,this)||y$(X1,this,new c1(this)),v$(X1,this).show(t,n,"ltr"===this.direction))}function _2(){var e;const t=document.getSelection();if(!t||t.isCollapsed){var n;if(v$(r2,this))null===(n=v$(X1,this))||void 0===n||n.hide(),y$(r2,this,null),g$(E2,this,F2).call(this,{hasSelectedText:!1});return}const{anchorNode:i}=t;if(i===v$(r2,this))return;var r;if(g$(E2,this,A2).call(this,t).closest(".textLayer")){if(null===(e=v$(X1,this))||void 0===e||e.hide(),y$(r2,this,i),g$(E2,this,F2).call(this,{hasSelectedText:!0}),(v$(n2,this)===N$.HIGHLIGHT||v$(n2,this)===N$.NONE)&&(v$(n2,this)===N$.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),y$(K1,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=this._signal,t=e=>{"pointerup"===e.type&&0!==e.button||(window.removeEventListener("pointerup",t),window.removeEventListener("blur",t),"pointerup"===e.type&&g$(E2,this,R2).call(this,"main_toolbar"))};window.addEventListener("pointerup",t,{signal:e}),window.addEventListener("blur",t,{signal:e})}}else v$(r2,this)&&(null===(r=v$(X1,this))||void 0===r||r.hide(),y$(r2,this,null),g$(E2,this,F2).call(this,{hasSelectedText:!1}))}function R2(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";v$(n2,this)===N$.HIGHLIGHT?this.highlightSelection(e):v$(U1,this)&&g$(E2,this,T2).call(this)}function D2(){document.addEventListener("selectionchange",g$(E2,this,_2).bind(this),{signal:this._signal})}function M2(){const e=this._signal;window.addEventListener("focus",v$(l2,this),{signal:e}),window.addEventListener("blur",v$(a2,this),{signal:e})}function P2(){window.removeEventListener("focus",v$(l2,this)),window.removeEventListener("blur",v$(a2,this))}function I2(){const e=this._signal;window.addEventListener("keydown",v$(h2,this),{signal:e}),window.addEventListener("keyup",v$(p2,this),{signal:e})}function N2(){window.removeEventListener("keydown",v$(h2,this)),window.removeEventListener("keyup",v$(p2,this))}function k2(){const e=this._signal;document.addEventListener("copy",v$(c2,this),{signal:e}),document.addEventListener("cut",v$(u2,this),{signal:e}),document.addEventListener("paste",v$(d2,this),{signal:e})}function O2(){document.removeEventListener("copy",v$(c2,this)),document.removeEventListener("cut",v$(u2,this)),document.removeEventListener("paste",v$(d2,this))}function L2(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function F2(e){const t=Object.entries(e).some((e=>{let[t,n]=e;return v$(y2,this)[t]!==n}));t&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(v$(y2,this),e)}),v$(n2,this)===N$.HIGHLIGHT&&!1===e.hasSelectedEditor&&g$(E2,this,B2).call(this,[[k$.HIGHLIGHT_FREE,!0]]))}function B2(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}function V2(){if(!v$(Z1,this)){y$(Z1,this,!0);for(const e of v$(k1,this).values())e.enable();for(const e of v$(N1,this).values())e.enable()}}function G2(){if(this.unselectAll(),v$(Z1,this)){y$(Z1,this,!1);for(const e of v$(k1,this).values())e.disable();for(const e of v$(N1,this).values())e.disable()}}function H2(e){const t=v$(k1,this).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function W2(e){let t=null;for(t of v$(i2,e));return t}function j2(){if(0===v$(N1,this).size)return!0;if(1===v$(N1,this).size)for(const e of v$(N1,this).values())return e.isEmpty();return!1}function U2(e){for(const t of v$(i2,this))t.unselect();v$(i2,this).clear();for(const t of e)t.isEmpty()||(v$(i2,this).add(t),t.select());g$(E2,this,F2).call(this,{hasSelectedEditor:this.hasSelection})}An(x2,"TRANSLATE_SMALL",1),An(x2,"TRANSLATE_BIG",10);var z2=new WeakMap,Y2=new WeakMap,q2=new WeakMap,K2=new WeakMap,X2=new WeakMap,Q2=new WeakMap,Z2=new WeakMap,$2=new WeakSet;class J2{constructor(e){p$(this,$2),m$(this,z2,""),m$(this,Y2,!1),m$(this,q2,null),m$(this,K2,null),m$(this,X2,null),m$(this,Q2,!1),m$(this,Z2,null),y$(Z2,this,e)}static initialize(e){J2._l10nPromise||(J2._l10nPromise=e)}async render(){const e=y$(q2,this,document.createElement("button"));e.className="altText";const t=await J2._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0";const n=v$(Z2,this)._uiManager._signal;e.addEventListener("contextmenu",B0,{signal:n}),e.addEventListener("pointerdown",(e=>e.stopPropagation()),{signal:n});const i=e=>{e.preventDefault(),v$(Z2,this)._uiManager.editAltText(v$(Z2,this))};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",(t=>{t.target===e&&"Enter"===t.key&&(y$(Q2,this,!0),i(t))}),{signal:n}),await g$($2,this,e3).call(this),e}finish(){v$(q2,this)&&(v$(q2,this).focus({focusVisible:v$(Q2,this)}),y$(Q2,this,!1))}isEmpty(){return!v$(z2,this)&&!v$(Y2,this)}get data(){return{altText:v$(z2,this),decorative:v$(Y2,this)}}set data(e){let{altText:t,decorative:n}=e;v$(z2,this)===t&&v$(Y2,this)===n||(y$(z2,this,t),y$(Y2,this,n),g$($2,this,e3).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];v$(q2,this)&&(!e&&v$(X2,this)&&(clearTimeout(v$(X2,this)),y$(X2,this,null)),v$(q2,this).disabled=!e)}destroy(){var e;null===(e=v$(q2,this))||void 0===e||e.remove(),y$(q2,this,null),y$(K2,this,null)}}async function e3(){const e=v$(q2,this);if(!e)return;var t;if(!v$(z2,this)&&!v$(Y2,this))return e.classList.remove("done"),void(null===(t=v$(K2,this))||void 0===t||t.remove());e.classList.add("done"),$Z._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then((t=>{e.setAttribute("aria-label",t)}));let n=v$(K2,this);if(!n){y$(K2,this,n=document.createElement("span")),n.className="tooltip",n.setAttribute("role","tooltip");const t=n.id="alt-text-tooltip-".concat(v$(Z2,this).id);e.setAttribute("aria-describedby",t);const i=100,r=v$(Z2,this)._uiManager._signal;r.addEventListener("abort",(()=>{clearTimeout(v$(X2,this)),y$(X2,this,null)}),{once:!0}),e.addEventListener("mouseenter",(()=>{y$(X2,this,setTimeout((()=>{y$(X2,this,null),v$(K2,this).classList.add("show"),v$(Z2,this)._reportTelemetry({action:"alt_text_tooltip"})}),i))}),{signal:r}),e.addEventListener("mouseleave",(()=>{var e;v$(X2,this)&&(clearTimeout(v$(X2,this)),y$(X2,this,null)),null===(e=v$(K2,this))||void 0===e||e.classList.remove("show")}),{signal:r})}n.innerText=v$(Y2,this)?await $Z._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):v$(z2,this),n.parentNode||e.append(n);const i=v$(Z2,this).getImageForAltText();null===i||void 0===i||i.setAttribute("aria-describedby",n.id)}$Z=J2,An(J2,"_l10nPromise",null);var t3=new WeakMap,n3=new WeakMap,i3=new WeakMap,r3=new WeakMap,s3=new WeakMap,o3=new WeakMap,a3=new WeakMap,l3=new WeakMap,c3=new WeakMap,u3=new WeakMap,d3=new WeakMap,h3=new WeakMap,p3=new WeakMap,g3=new WeakMap,f3=new WeakMap,m3=new WeakMap,v3=new WeakMap,y3=new WeakMap,C3=new WeakMap,w3=new WeakMap,b3=new WeakMap,S3=new WeakMap,E3=new WeakSet;class x3{static get _resizerKeyboardManager(){const e=x3.prototype._resizeWithKeyboard,t=x2.TRANSLATE_SMALL,n=x2.TRANSLATE_BIG;return xJ(this,"_resizerKeyboardManager",new R1([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],x3.prototype._stopResizingWithKeyboard]]))}constructor(e){p$(this,E3),m$(this,t3,null),m$(this,n3,null),m$(this,i3,null),m$(this,r3,!1),m$(this,s3,!1),m$(this,o3,null),m$(this,a3,null),m$(this,l3,this.focusin.bind(this)),m$(this,c3,this.focusout.bind(this)),m$(this,u3,null),m$(this,d3,""),m$(this,h3,!1),m$(this,p3,null),m$(this,g3,!1),m$(this,f3,!1),m$(this,m3,!1),m$(this,v3,null),m$(this,y3,0),m$(this,C3,0),m$(this,w3,null),An(this,"_initialOptions",Object.create(null)),An(this,"_isVisible",!0),An(this,"_uiManager",null),An(this,"_focusEventsAllowed",!0),An(this,"_l10nPromise",null),m$(this,b3,!1),m$(this,S3,x3._zIndex++),this.constructor===x3&&bJ("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,s];const[o,a]=this.parentDimensions;this.x=e.x/o,this.y=e.y/a,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return xJ(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new V3({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,n){if(x3._l10nPromise||(x3._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map((t=>[t,e.get(t.replaceAll(/([A-Z])/g,(e=>"-".concat(e.toLowerCase()))))])))),null!==n&&void 0!==n&&n.strings)for(const r of n.strings)x3._l10nPromise.set(r,e.get(r));if(-1!==x3._borderLineWidth)return;const i=getComputedStyle(document.documentElement);x3._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){bJ("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return v$(b3,this)}set _isDraggable(e){var t;y$(b3,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=v$(S3,this)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):g$(E3,this,B3).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(v$(h3,this)?y$(h3,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[r,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/r,this.y=(t+i)/s,this.fixAndSetPosition()}translate(e,t){g$(E3,this,A3).call(this,this.parentDimensions,e,t)}translateInPage(e,t){v$(p3,this)||y$(p3,this,[this.x,this.y]),g$(E3,this,A3).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){v$(p3,this)||y$(p3,this,[this.x,this.y]);const[n,i]=this.parentDimensions;if(this.x+=e/n,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:s}=this;const[o,a]=this.getBaseTranslation();r+=o,s+=a,this.div.style.left="".concat((100*r).toFixed(2),"%"),this.div.style.top="".concat((100*s).toFixed(2),"%"),this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!v$(p3,this)&&(v$(p3,this)[0]!==this.x||v$(p3,this)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=x3,i=n/e,r=n/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const[t,n]=this.pageDimensions;let{x:i,y:r,width:s,height:o}=this;if(s*=t,o*=n,i*=t,r*=n,this._mustFixPosition)switch(e){case 0:i=Math.max(0,Math.min(t-s,i)),r=Math.max(0,Math.min(n-o,r));break;case 90:i=Math.max(0,Math.min(t-o,i)),r=Math.min(n,Math.max(s,r));break;case 180:i=Math.min(t,Math.max(s,i)),r=Math.min(n,Math.max(o,r));break;case 270:i=Math.min(t,Math.max(o,i)),r=Math.max(0,Math.min(n-s,r))}this.x=i/=t,this.y=r/=n;const[a,l]=this.getBaseTranslation();i+=a,r+=l;const{style:c}=this.div;c.left="".concat((100*i).toFixed(2),"%"),c.top="".concat((100*r).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return T3.call(x3,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return T3.call(x3,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this,i=t*e,r=n*e;return LJ.isCSSRoundSupported?[Math.round(i),Math.round(r)]:[i,r]}setDims(e,t){const[n,i]=this.parentDimensions;this.div.style.width="".concat((100*e/n).toFixed(2),"%"),v$(s3,this)||(this.div.style.height="".concat((100*t/i).toFixed(2),"%"))}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),r=!v$(s3,this)&&t.endsWith("%");if(i&&r)return;const[s,o]=this.parentDimensions;i||(e.width="".concat((100*parseFloat(n)/s).toFixed(2),"%")),v$(s3,this)||r||(e.height="".concat((100*parseFloat(t)/o).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}altTextFinish(){var e;null===(e=v$(i3,this))||void 0===e||e.finish()}async addEditToolbar(){return v$(u3,this)||v$(f3,this)||(y$(u3,this,new $0(this)),this.div.append(v$(u3,this).render()),v$(i3,this)&&v$(u3,this).addAltTextButton(await v$(i3,this).render())),v$(u3,this)}removeEditToolbar(){var e;v$(u3,this)&&(v$(u3,this).remove(),y$(u3,this,null),null===(e=v$(i3,this))||void 0===e||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){v$(i3,this)||(J2.initialize(x3._l10nPromise),y$(i3,this,new J2(this)),v$(t3,this)&&(v$(i3,this).data=v$(t3,this),y$(t3,this,null)),await this.addEditToolbar())}get altTextData(){var e;return null===(e=v$(i3,this))||void 0===e?void 0:e.data}set altTextData(e){v$(i3,this)&&(v$(i3,this).data=e)}hasAltText(){var e;return!(null!==(e=v$(i3,this))&&void 0!==e&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=v$(r3,this)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const e=this._uiManager._signal;this.div.addEventListener("focusin",v$(l3,this),{signal:e}),this.div.addEventListener("focusout",v$(c3,this),{signal:e});const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth="".concat((100*n/t).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*t/n).toFixed(2),"%"));const[i,r]=this.getInitialTranslation();return this.translate(i,r),p1(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=LJ.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(y$(h3,this,!0),this._isDraggable?g$(E3,this,N3).call(this,e):g$(E3,this,I3).call(this,e))}moveInDOM(){v$(v3,this)&&clearTimeout(v$(v3,this)),y$(v3,this,setTimeout((()=>{var e;y$(v3,this,null),null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)}),0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const i=this.parentScale,[r,s]=this.pageDimensions,[o,a]=this.pageTranslation,l=e/i,c=t/i,u=this.x*r,d=this.y*s,h=this.width*r,p=this.height*s;switch(n){case 0:return[u+l+o,s-d-c-p+a,u+l+h+o,s-d-c+a];case 90:return[u+c+o,s-d+l+a,u+c+p+o,s-d+l+h+a];case 180:return[u-l-h+o,s-d+c+a,u-l+o,s-d+c+p+a];case 270:return[u-c-p+o,s-d-l-h+a,u-c+o,s-d-l+a];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,r,s]=e,o=r-n,a=s-i;switch(this.rotation){case 0:return[n,t-s,o,a];case 90:return[n,t-i,a,o];case 180:return[r,t-i,o,a];case 270:return[r,t-s,a,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){y$(f3,this,!0)}disableEditMode(){y$(f3,this,!1)}isInEditMode(){return v$(f3,this)}shouldGetKeyboardEvents(){return v$(m3,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,t;const n=this._uiManager._signal;null===(e=this.div)||void 0===e||e.addEventListener("focusin",v$(l3,this),{signal:n}),null===(t=this.div)||void 0===t||t.addEventListener("focusout",v$(c3,this),{signal:n})}rotate(e){}serialize(){bJ("An editor must be serializable")}static deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});i.rotation=e.rotation,y$(t3,i,e.accessibilityData);const[r,s]=i.pageDimensions,[o,a,l,c]=i.getRectInCurrentCoords(e.rect,s);return i.x=o/r,i.y=a/s,i.width=l/r,i.height=c/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.div.removeEventListener("focusin",v$(l3,this)),this.div.removeEventListener("focusout",v$(c3,this)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),v$(v3,this)&&(clearTimeout(v$(v3,this)),y$(v3,this,null)),g$(E3,this,B3).call(this),this.removeEditToolbar(),v$(w3,this)){for(const e of v$(w3,this).values())clearTimeout(e);y$(w3,this,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(g$(E3,this,R3).call(this),v$(o3,this).classList.remove("hidden"),p1(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),y$(a3,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=v$(o3,this).children;if(!v$(n3,this)){y$(n3,this,Array.from(t));const e=g$(E3,this,k3).bind(this),n=g$(E3,this,O3).bind(this),i=this._uiManager._signal;for(const t of v$(n3,this)){const r=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:i}),t.addEventListener("blur",n,{signal:i}),t.addEventListener("focus",g$(E3,this,L3).bind(this,r),{signal:i}),x3._l10nPromise.get("pdfjs-editor-resizer-label-".concat(r)).then((e=>t.setAttribute("aria-label",e)))}}const n=v$(n3,this)[0];let i=0;for(const s of t){if(s===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(v$(n3,this).length/4);if(r!==i){if(r<i)for(let t=0;t<i-r;t++)v$(o3,this).append(v$(o3,this).firstChild);else if(r>i)for(let t=0;t<r-i;t++)v$(o3,this).firstChild.before(v$(o3,this).lastChild);let e=0;for(const n of t){const t=v$(n3,this)[e++].getAttribute("data-resizer-name");x3._l10nPromise.get("pdfjs-editor-resizer-label-".concat(t)).then((e=>n.setAttribute("aria-label",e)))}}g$(E3,this,F3).call(this,0),y$(m3,this,!0),v$(o3,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){v$(m3,this)&&g$(E3,this,P3).call(this,v$(d3,this),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){g$(E3,this,B3).call(this),this.div.focus()}select(){var e,t;this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor"),v$(u3,this)?null===(t=v$(u3,this))||void 0===t||t.show():this.addEditToolbar().then((()=>{var e,t;null!==(e=this.div)&&void 0!==e&&e.classList.contains("selectedEditor")&&(null===(t=v$(u3,this))||void 0===t||t.show())}))}unselect(){var e,t,n,i;null===(e=v$(o3,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=v$(u3,this))||void 0===i||i.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return v$(g3,this)}set isEditing(e){y$(g3,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){y$(s3,this,!0);const n=e/t,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){v$(w3,this)||y$(w3,this,new Map);const{action:t}=e;let n=v$(w3,this).get(t);return n&&clearTimeout(n),n=setTimeout((()=>{this._reportTelemetry(e),v$(w3,this).delete(t),0===v$(w3,this).size&&y$(w3,this,null)}),x3._telemetryTimeout),void v$(w3,this).set(t,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),y$(r3,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),y$(r3,this,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===t.nodeName&&t.classList.contains("annotationContent")&&t.remove()}}function A3(e,t,n){let[i,r]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/i,this.y+=n/r,this.fixAndSetPosition()}function T3(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function _3(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function R3(){if(v$(o3,this))return;y$(o3,this,document.createElement("div")),v$(o3,this).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");v$(o3,this).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",g$(E3,this,D3).bind(this,n),{signal:t}),e.addEventListener("contextmenu",B0,{signal:t}),e.tabIndex=-1}this.div.prepend(v$(o3,this))}function D3(e,t){var n;t.preventDefault();const{isMac:i}=LJ.platform;if(0!==t.button||t.ctrlKey&&i)return;null===(n=v$(i3,this))||void 0===n||n.toggle(!1);const r=g$(E3,this,P3).bind(this,e),s=this._isDraggable;this._isDraggable=!1;const o=this._uiManager._signal,a={passive:!0,capture:!0,signal:o};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",r,a),window.addEventListener("contextmenu",B0,{signal:o});const l=this.x,c=this.y,u=this.width,d=this.height,h=this.parent.div.style.cursor,p=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const g=()=>{var e;this.parent.togglePointerEvents(!0),null===(e=v$(i3,this))||void 0===e||e.toggle(!0),this._isDraggable=s,window.removeEventListener("pointerup",g),window.removeEventListener("blur",g),window.removeEventListener("pointermove",r,a),window.removeEventListener("contextmenu",B0),this.parent.div.style.cursor=h,this.div.style.cursor=p,g$(E3,this,M3).call(this,l,c,u,d)};window.addEventListener("pointerup",g,{signal:o}),window.addEventListener("blur",g,{signal:o})}function M3(e,t,n,i){const r=this.x,s=this.y,o=this.width,a=this.height;r===e&&s===t&&o===n&&a===i||this.addCommands({cmd:()=>{this.width=o,this.height=a,this.x=r,this.y=s;const[e,t]=this.parentDimensions;this.setDims(e*o,t*a),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=i,this.x=e,this.y=t;const[r,s]=this.parentDimensions;this.setDims(r*n,s*i),this.fixAndSetPosition()},mustExec:!0})}function P3(e,t){const[n,i]=this.parentDimensions,r=this.x,s=this.y,o=this.width,a=this.height,l=JZ.MIN_SIZE/n,c=JZ.MIN_SIZE/i,u=e=>Math.round(1e4*e)/1e4,d=g$(E3,this,_3).call(this,this.rotation),h=(e,t)=>[d[0]*e+d[2]*t,d[1]*e+d[3]*t],p=g$(E3,this,_3).call(this,360-this.rotation);let g,f,m=!1,v=!1;switch(e){case"topLeft":m=!0,g=(e,t)=>[0,0],f=(e,t)=>[e,t];break;case"topMiddle":g=(e,t)=>[e/2,0],f=(e,t)=>[e/2,t];break;case"topRight":m=!0,g=(e,t)=>[e,0],f=(e,t)=>[0,t];break;case"middleRight":v=!0,g=(e,t)=>[e,t/2],f=(e,t)=>[0,t/2];break;case"bottomRight":m=!0,g=(e,t)=>[e,t],f=(e,t)=>[0,0];break;case"bottomMiddle":g=(e,t)=>[e/2,t],f=(e,t)=>[e/2,0];break;case"bottomLeft":m=!0,g=(e,t)=>[0,t],f=(e,t)=>[e,0];break;case"middleLeft":v=!0,g=(e,t)=>[0,t/2],f=(e,t)=>[e,t/2]}const y=g(o,a),C=f(o,a);let w=h(...C);const b=u(r+w[0]),S=u(s+w[1]);let E=1,x=1,[A,T]=this.screenToPageTranslation(t.movementX,t.movementY);if([A,T]=((e,t)=>[p[0]*e+p[2]*t,p[1]*e+p[3]*t])(A/n,T/i),m){const e=Math.hypot(o,a);E=x=Math.max(Math.min(Math.hypot(C[0]-y[0]-A,C[1]-y[1]-T)/e,1/o,1/a),l/o,c/a)}else v?E=Math.max(l,Math.min(1,Math.abs(C[0]-y[0]-A)))/o:x=Math.max(c,Math.min(1,Math.abs(C[1]-y[1]-T)))/a;const _=u(o*E),R=u(a*x);w=h(...f(_,R));const D=b-w[0],M=S-w[1];this.width=_,this.height=R,this.x=D,this.y=M,this.setDims(n*_,i*R),this.fixAndSetPosition()}function I3(e){const{isMac:t}=LJ.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function N3(e){const t=this._uiManager.isSelected(this);let n,i;this._uiManager.setUpDragSession();const r=this._uiManager._signal;t&&(this.div.classList.add("moving"),n={passive:!0,capture:!0,signal:r},y$(y3,this,e.clientX),y$(C3,this,e.clientY),i=e=>{const{clientX:t,clientY:n}=e,[i,r]=this.screenToPageTranslation(t-v$(y3,this),n-v$(C3,this));y$(y3,this,t),y$(C3,this,n),this._uiManager.dragSelectedEditors(i,r)},window.addEventListener("pointermove",i,n));const s=()=>{window.removeEventListener("pointerup",s),window.removeEventListener("blur",s),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",i,n)),y$(h3,this,!1),this._uiManager.endDragSession()||g$(E3,this,I3).call(this,e)};window.addEventListener("pointerup",s,{signal:r}),window.addEventListener("blur",s,{signal:r})}function k3(e){JZ._resizerKeyboardManager.exec(this,e)}function O3(e){var t;v$(m3,this)&&(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentNode)!==v$(o3,this)&&g$(E3,this,B3).call(this)}function L3(e){y$(d3,this,v$(m3,this)?e:"")}function F3(e){if(v$(n3,this))for(const t of v$(n3,this))t.tabIndex=e}function B3(){if(y$(m3,this,!1),g$(E3,this,F3).call(this,-1),v$(a3,this)){const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=v$(a3,this);g$(E3,this,M3).call(this,e,t,n,i),y$(a3,this,null)}}JZ=x3,An(x3,"_borderLineWidth",-1),An(x3,"_colorManager",new M1),An(x3,"_zIndex",1),An(x3,"_telemetryTimeout",1e3);class V3 extends x3{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const G3=3285377520,H3=4294901760,W3=65535;class j3{constructor(e){this.h1=e?4294967295&e:G3,this.h2=e?4294967295&e:G3}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let i=0,r=e.length;i<r;i++){const r=e.charCodeAt(i);r<=255?t[n++]=r:(t[n++]=r>>>8,t[n++]=255&r)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const i=n>>2,r=n-4*i,s=new Uint32Array(t.buffer,0,i);let o=0,a=0,l=this.h1,c=this.h2;const u=3432918353,d=461845907,h=11601,p=13715;for(let g=0;g<i;g++)1&g?(o=s[g],o=o*u&H3|o*h&W3,o=o<<15|o>>>17,o=o*d&H3|o*p&W3,l^=o,l=l<<13|l>>>19,l=5*l+3864292196):(a=s[g],a=a*u&H3|a*h&W3,a=a<<15|a>>>17,a=a*d&H3|a*p&W3,c^=a,c=c<<13|c>>>19,c=5*c+3864292196);switch(o=0,r){case 3:o^=t[4*i+2]<<16;case 2:o^=t[4*i+1]<<8;case 1:o^=t[4*i],o=o*u&H3|o*h&W3,o=o<<15|o>>>17,o=o*d&H3|o*p&W3,1&i?l^=o:c^=o}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&H3|36045*e&W3,t=4283543511*t&H3|(2950163797*(t<<16|e>>>16)&H3)>>>16,e^=t>>>1,e=444984403*e&H3|60499*e&W3,t=3301882366*t&H3|(3120437893*(t<<16|e>>>16)&H3)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const U3=Object.freeze({map:null,hash:"",transfer:void 0});var z3=new WeakMap,Y3=new WeakMap,q3=new WeakSet;class K3{constructor(){p$(this,q3),m$(this,z3,!1),m$(this,Y3,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=v$(Y3,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return v$(Y3,this).get(e)}remove(e){if(v$(Y3,this).delete(e),0===v$(Y3,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const e of v$(Y3,this).values())if(e instanceof x3)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=v$(Y3,this).get(e);let i=!1;if(void 0!==n)for(const[r,s]of Object.entries(t))n[r]!==s&&(i=!0,n[r]=s);else i=!0,v$(Y3,this).set(e,t);i&&g$(q3,this,X3).call(this),t instanceof x3&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return v$(Y3,this).has(e)}getAll(){return v$(Y3,this).size>0?OJ(v$(Y3,this)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return v$(Y3,this).size}resetModified(){v$(z3,this)&&(y$(z3,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new Z3(this)}get serializable(){if(0===v$(Y3,this).size)return U3;const e=new Map,t=new j3,n=[],i=Object.create(null);let r=!1;for(const[s,o]of v$(Y3,this)){const n=o instanceof x3?o.serialize(!1,i):o;n&&(e.set(s,n),t.update("".concat(s,":").concat(JSON.stringify(n))),r||(r=!!n.bitmap))}if(r)for(const s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:U3}get editorStats(){let e=null;const t=new Map;for(const r of v$(Y3,this).values()){var n;if(!(r instanceof x3))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:o}=s;t.has(o)||t.set(o,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const a=(n=e)[o]||(n[o]=new Map);for(const[e,t]of Object.entries(s)){var i;if("type"===e)continue;let n=a.get(e);n||(n=new Map,a.set(e,n));const r=null!==(i=n.get(t))&&void 0!==i?i:0;n.set(t,r+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}}function X3(){v$(z3,this)||(y$(z3,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var Q3=new WeakMap;class Z3 extends K3{constructor(e){super(),m$(this,Q3,void 0);const{map:t,hash:n,transfer:i}=e.serializable,r=structuredClone(t,i?{transfer:i}:null);y$(Q3,this,{map:r,hash:n,transfer:i})}get print(){bJ("Should not call PrintAnnotationStorage.print")}get serializable(){return v$(Q3,this)}}var $3=new WeakMap;class J3{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;m$(this,$3,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),v$($3,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,_inspectFont:n}=e;if(t&&!v$($3,this).has(t.loadedName))if(SJ(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:i,style:r}=t,s=new FontFace(e,i,r);this.addNativeFontFace(s);try{await s.load(),v$($3,this).add(e),null===n||void 0===n||n(t)}catch{wJ("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(s)}}else bJ("Not implemented: loadSystemFont without the Font Loading API.")}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw wJ("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise((t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)}))}}get isFontLoadingAPISupported(){var e;return xJ(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}get isSyncFontLoadingSupported(){var e;let t=!1;return(b$||"undefined"!==typeof navigator&&"string"===typeof(null===(e=navigator)||void 0===e?void 0:e.userAgent)&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),xJ(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(SJ(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return xJ(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,i){return e.substring(0,t)+i+e.substring(t+n)}let r,s;const o=this._document.createElement("canvas");o.width=1,o.height=1;const a=o.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let u=this._loadTestFont;u=i(u,976,c.length,c);const d=1482184792;let h=n(u,16);for(r=0,s=c.length-3;r<s;r+=4)h=h-d+n(c,r)|0;r<c.length&&(h=h-d+n(c+"XXX",r)|0),u=i(u,16,4,function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}(h));const p="url(data:font/opentype;base64,".concat(btoa(u),");"),g='@font-face {font-family:"'.concat(c,'";src:').concat(p,"}");this.insertRule(g);const f=this._document.createElement("div");f.style.visibility="hidden",f.style.width=f.style.height="10px",f.style.position="absolute",f.style.top=f.style.left="0px";for(const m of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=m,f.append(e)}this._document.body.append(f),function e(t,n){if(++l>30)return wJ("Load test font never loaded."),void n();a.font="30px "+t,a.fillText(".",0,20),a.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,(()=>{f.remove(),t.complete()}))}}class e4{constructor(e,t){let{disableFontFace:n=!1,inspectFont:i=null}=t;this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=!0===n,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t=NJ(this.data),n="url(data:".concat(this.mimetype,";base64,").concat(btoa(t),");");let i;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),i='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(n,"}")}else i='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(n,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,n),i}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(r){wJ('getPathGenerator - ignoring character: "'.concat(r,'".'))}if(!Array.isArray(n)||0===n.length)return this.compiledGlyphs[t]=function(e,t){};const i=[];for(let s=0,o=n.length;s<o;)switch(n[s++]){case zJ:{const[e,t,r,o,a,l]=n.slice(s,s+6);i.push((n=>n.bezierCurveTo(e,t,r,o,a,l))),s+=6}break;case YJ:{const[e,t]=n.slice(s,s+2);i.push((n=>n.moveTo(e,t))),s+=2}break;case qJ:{const[e,t]=n.slice(s,s+2);i.push((n=>n.lineTo(e,t))),s+=2}break;case KJ:{const[e,t,r,o]=n.slice(s,s+4);i.push((n=>n.quadraticCurveTo(e,t,r,o))),s+=4}break;case XJ:i.push((e=>e.restore()));break;case QJ:i.push((e=>e.save()));break;case ZJ:SJ(2===i.length,"Scale command is only valid at the third position.");break;case $J:{const[e,t,r,o,a,l]=n.slice(s,s+6);i.push((n=>n.transform(e,t,r,o,a,l))),s+=6}break;case JJ:{const[e,t]=n.slice(s,s+2);i.push((n=>n.translate(e,t))),s+=2}}return this.compiledGlyphs[t]=function(e,t){i[0](e),i[1](e),e.scale(t,-t);for(let n=2,r=i.length;n<r;n++)i[n](e)}}}if(b$){var t4=Promise.withResolvers(),n4=null;const e=async()=>{const e=await import("fs"),t=await import("http"),n=await import("https"),i=await import("url");return new Map(Object.entries({fs:e,http:t,https:n,url:i,canvas:undefined,path2d:undefined}))};e().then((e=>{n4=e,t4.resolve()}),(e=>{wJ("loadPackages: ".concat(e)),n4=new Map,t4.resolve()}))}class i4{static get promise(){return t4.promise}static get(e){var t;return null===(t=n4)||void 0===t?void 0:t.get(e)}}const r4=function(e){return i4.get("fs").promises.readFile(e).then((e=>new Uint8Array(e)))};const s4="Fill",o4="Stroke",a4="Shading";function l4(e,t){if(!t)return;const n=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],n,i),e.clip(r)}class c4{constructor(){this.constructor===c4&&bJ("Cannot initialize BaseShadingPattern.")}getPattern(){bJ("Abstract method `getPattern` called.")}}class u4 extends c4{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let r;if(i===o4||i===s4){const s=t.current.getClippedPathBoundingBox(i,U0(e))||[0,0,0,0],o=Math.ceil(s[2]-s[0])||1,a=Math.ceil(s[3]-s[1])||1,l=t.cachedCanvases.getCanvas("pattern",o,a,!0),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-s[0],-s[1]),n=BJ.transform(n,[1,0,0,1,s[0],s[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),l4(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=e.createPattern(l.canvas,"no-repeat");const u=new DOMMatrix(n);r.setTransform(u)}else l4(e,this._bbox),r=this._createGradient(e);return r}}function d4(e,t,n,i,r,s,o,a){const l=t.coords,c=t.colors,u=e.data,d=4*e.width;let h;l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=s,s=o,o=h),l[i+1]>l[r+1]&&(h=i,i=r,r=h,h=o,o=a,a=h),l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=s,s=o,o=h);const p=(l[n]+t.offsetX)*t.scaleX,g=(l[n+1]+t.offsetY)*t.scaleY,f=(l[i]+t.offsetX)*t.scaleX,m=(l[i+1]+t.offsetY)*t.scaleY,v=(l[r]+t.offsetX)*t.scaleX,y=(l[r+1]+t.offsetY)*t.scaleY;if(g>=y)return;const C=c[s],w=c[s+1],b=c[s+2],S=c[o],E=c[o+1],x=c[o+2],A=c[a],T=c[a+1],_=c[a+2],R=Math.round(g),D=Math.round(y);let M,P,I,N,k,O,L,F;for(let B=R;B<=D;B++){if(B<m){const e=B<g?0:(g-B)/(g-m);M=p-(p-f)*e,P=C-(C-S)*e,I=w-(w-E)*e,N=b-(b-x)*e}else{let e;e=B>y?1:m===y?0:(m-B)/(m-y),M=f-(f-v)*e,P=S-(S-A)*e,I=E-(E-T)*e,N=x-(x-_)*e}let e;e=B<g?0:B>y?1:(g-B)/(g-y),k=p-(p-v)*e,O=C-(C-A)*e,L=w-(w-T)*e,F=b-(b-_)*e;const t=Math.round(Math.min(M,k)),n=Math.round(Math.max(M,k));let i=d*B+4*t;for(let r=t;r<=n;r++)e=(M-r)/(M-k),e<0?e=0:e>1&&(e=1),u[i++]=P-(P-O)*e|0,u[i++]=I-(I-L)*e|0,u[i++]=N-(N-F)*e|0,u[i++]=255}}function h4(e,t,n){const i=t.coords,r=t.colors;let s,o;switch(t.type){case"lattice":const a=t.verticesPerRow,l=Math.floor(i.length/a)-1,c=a-1;for(s=0;s<l;s++){let t=s*a;for(let s=0;s<c;s++,t++)d4(e,n,i[t],i[t+1],i[t+a],r[t],r[t+1],r[t+a]),d4(e,n,i[t+a+1],i[t+1],i[t+a],r[t+a+1],r[t+1],r[t+a])}break;case"triangles":for(s=0,o=i.length;s<o;s+=3)d4(e,n,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class p4 extends c4{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const i=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-i,o=Math.ceil(this._bounds[3])-r,a=Math.min(Math.ceil(Math.abs(s*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(o*e[1]*1.1)),3e3),c=s/a,u=o/l,d={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-r,scaleX:1/c,scaleY:1/u},h=a+4,p=l+4,g=n.getCanvas("mesh",h,p,!1),f=g.context,m=f.createImageData(a,l);if(t){const e=m.data;for(let n=0,i=e.length;n<i;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)h4(m,v,d);f.putImageData(m,2,2);return{canvas:g.canvas,offsetX:i-2*c,offsetY:r-2*u,scaleX:c,scaleY:u}}getPattern(e,t,n,i){let r;if(l4(e,this._bbox),i===a4)r=BJ.singularValueDecompose2dScale(U0(e));else if(r=BJ.singularValueDecompose2dScale(t.baseTransform),this.matrix){const e=BJ.singularValueDecompose2dScale(this.matrix);r=[r[0]*e[0],r[1]*e[1]]}const s=this._createMeshCanvas(r,i===a4?null:this._background,t.cachedCanvases);return i!==a4&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class g4 extends c4{getPattern(){return"hotpink"}}const f4=1,m4=2;class v4{constructor(e,t,n,i,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(e){const t=this.operatorList,n=this.bbox,i=this.xstep,r=this.ystep,s=this.paintType,o=this.tilingType,a=this.color,l=this.canvasGraphicsFactory;CJ("TilingType: "+o);const c=n[0],u=n[1],d=n[2],h=n[3],p=BJ.singularValueDecompose2dScale(this.matrix),g=BJ.singularValueDecompose2dScale(this.baseTransform),f=[p[0]*g[0],p[1]*g[1]],m=this.getSizeAndScale(i,this.ctx.canvas.width,f[0]),v=this.getSizeAndScale(r,this.ctx.canvas.height,f[1]),y=e.cachedCanvases.getCanvas("pattern",m.size,v.size,!0),C=y.context,w=l.createCanvasGraphics(C);w.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(w,s,a);let b=c,S=u,E=d,x=h;return c<0&&(b=0,E+=Math.abs(c)),u<0&&(S=0,x+=Math.abs(u)),C.translate(-m.scale*b,-v.scale*S),w.transform(m.scale,0,0,v.scale,0,0),C.save(),this.clipBbox(w,b,S,E,x),w.baseTransform=U0(w.ctx),w.executeOperatorList(t),w.endDrawing(),{canvas:y.canvas,scaleX:m.scale,scaleY:v.scale,offsetX:b,offsetY:S}}getSizeAndScale(e,t,n){e=Math.abs(e);const i=Math.max(v4.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*n);return r>=i?r=i:n=r/e,{scale:n,size:r}}clipBbox(e,t,n,i,r){const s=i-t,o=r-n;e.ctx.rect(t,n,s,o),e.current.updateRectMinMax(U0(e.ctx),[t,n,i,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,r=e.current;switch(t){case f4:const e=this.ctx;i.fillStyle=e.fillStyle,i.strokeStyle=e.strokeStyle,r.fillColor=e.fillStyle,r.strokeColor=e.strokeStyle;break;case m4:const s=BJ.makeHexColor(n[0],n[1],n[2]);i.fillStyle=s,i.strokeStyle=s,r.fillColor=s,r.strokeColor=s;break;default:throw new PJ("Unsupported paint type: ".concat(t))}}getPattern(e,t,n,i){let r=n;i!==a4&&(r=BJ.transform(r,t.baseTransform),this.matrix&&(r=BJ.transform(r,this.matrix)));const s=this.createPatternCanvas(t);let o=new DOMMatrix(r);o=o.translate(s.offsetX,s.offsetY),o=o.scale(1/s.scaleX,1/s.scaleY);const a=e.createPattern(s.canvas,"repeat");return a.setTransform(o),a}}function y4(e){let{src:t,srcPos:n=0,dest:i,width:r,height:s,nonBlackColor:o=4294967295,inverseDecode:a=!1}=e;const l=LJ.isLittleEndian?4278190080:255,[c,u]=a?[o,l]:[l,o],d=r>>3,h=7&r,p=t.length;i=new Uint32Array(i.buffer);let g=0;for(let f=0;f<s;f++){for(const r=n+d;n<r;n++){const e=n<p?t[n]:255;i[g++]=128&e?u:c,i[g++]=64&e?u:c,i[g++]=32&e?u:c,i[g++]=16&e?u:c,i[g++]=8&e?u:c,i[g++]=4&e?u:c,i[g++]=2&e?u:c,i[g++]=1&e?u:c}if(0===h)continue;const e=n<p?t[n++]:255;for(let t=0;t<h;t++)i[g++]=e&1<<7-t?u:c}return{srcPos:n,destPos:g}}An(v4,"MAX_PATTERN_SIZE",3e3);const C4=16;class w4{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function b4(e,t,n,i,r,s,o,a,l,c){const[u,d,h,p,g,f]=U0(e);if(0===d&&0===h){const m=o*u+g,v=Math.round(m),y=a*p+f,C=Math.round(y),w=(o+l)*u+g,b=Math.abs(Math.round(w)-v)||1,S=(a+c)*p+f,E=Math.abs(Math.round(S)-C)||1;return e.setTransform(Math.sign(u),0,0,Math.sign(p),v,C),e.drawImage(t,n,i,r,s,0,0,b,E),e.setTransform(u,d,h,p,g,f),[b,E]}if(0===u&&0===p){const m=a*h+g,v=Math.round(m),y=o*d+f,C=Math.round(y),w=(a+c)*h+g,b=Math.abs(Math.round(w)-v)||1,S=(o+l)*d+f,E=Math.abs(Math.round(S)-C)||1;return e.setTransform(0,Math.sign(d),Math.sign(h),0,v,C),e.drawImage(t,n,i,r,s,0,0,E,b),e.setTransform(u,d,h,p,g,f),[E,b]}e.drawImage(t,n,i,r,s,o,a,l,c);return[Math.hypot(u,d)*l,Math.hypot(h,p)*c]}class S4{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=S$,this.textMatrixScale=1,this.fontMatrix=E$,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=L$,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=BJ.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=BJ.applyTransform(t,e),i=BJ.applyTransform(t.slice(2),e),r=BJ.applyTransform([t[0],t[3]],e),s=BJ.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],i[0],r[0],s[0]),this.minY=Math.min(this.minY,n[1],i[1],r[1],s[1]),this.maxX=Math.max(this.maxX,n[0],i[0],r[0],s[0]),this.maxY=Math.max(this.maxY,n[1],i[1],r[1],s[1])}updateScalingPathMinMax(e,t){BJ.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,i,r,s,o,a,l,c){const u=BJ.bezierBoundingBox(t,n,i,r,s,o,a,l,c);c||this.updateRectMinMax(e,u)}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s4,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===o4){t||bJ("Stroke bounding box must include transform.");const e=BJ.singularValueDecompose2dScale(t),i=e[0]*this.lineWidth/2,r=e[1]*this.lineWidth/2;n[0]-=i,n[1]-=r,n[2]+=i,n[3]+=r}return n}updateClipFromPath(){const e=BJ.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s4,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return BJ.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function E4(e,t){if("undefined"!==typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,i=t.width,r=n%C4,s=(n-r)/C4,o=0===r?s:s+1,a=e.createImageData(i,C4);let l,c=0;const u=t.data,d=a.data;let h,p,g,f;if(t.kind===W$.GRAYSCALE_1BPP){const t=u.byteLength,n=new Uint32Array(d.buffer,0,d.byteLength>>2),f=n.length,m=i+7>>3,v=4294967295,y=LJ.isLittleEndian?4278190080:255;for(h=0;h<o;h++){for(g=h<s?C4:r,l=0,p=0;p<g;p++){const e=t-c;let r=0;const s=e>m?i:8*e-7,o=-8&s;let a=0,d=0;for(;r<o;r+=8)d=u[c++],n[l++]=128&d?v:y,n[l++]=64&d?v:y,n[l++]=32&d?v:y,n[l++]=16&d?v:y,n[l++]=8&d?v:y,n[l++]=4&d?v:y,n[l++]=2&d?v:y,n[l++]=1&d?v:y;for(;r<s;r++)0===a&&(d=u[c++],a=128),n[l++]=d&a?v:y,a>>=1}for(;l<f;)n[l++]=0;e.putImageData(a,0,h*C4)}}else if(t.kind===W$.RGBA_32BPP){for(p=0,f=i*C4*4,h=0;h<s;h++)d.set(u.subarray(c,c+f)),c+=f,e.putImageData(a,0,p),p+=C4;h<o&&(f=i*r*4,d.set(u.subarray(c,c+f)),e.putImageData(a,0,p))}else{if(t.kind!==W$.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(g=C4,f=i*g,h=0;h<o;h++){for(h>=s&&(g=r,f=i*g),l=0,p=f;p--;)d[l++]=u[c++],d[l++]=u[c++],d[l++]=u[c++],d[l++]=255;e.putImageData(a,0,h*C4)}}}function x4(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,i=t.width,r=n%C4,s=(n-r)/C4,o=0===r?s:s+1,a=e.createImageData(i,C4);let l=0;const c=t.data,u=a.data;for(let d=0;d<o;d++){const t=d<s?C4:r;({srcPos:l}=y4({src:c,srcPos:l,dest:u,width:i,height:t,nonBlackColor:0})),e.putImageData(a,0,d*C4)}}function A4(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==e[i]&&(t[i]=e[i]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function T4(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!b$){const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function _4(e,t){if(t)return!0;const n=BJ.singularValueDecompose2dScale(e);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*a0.PDF_TO_CSS_UNITS);return n[0]<=i&&n[1]<=i}const R4=["butt","round","square"],D4=["miter","round","bevel"],M4={},P4={};var I4=new WeakSet;class N4{constructor(e,t,n,i,r,s,o,a){let{optionalContentConfig:l,markedContentStack:c=null}=s;p$(this,I4),this.ctx=e,this.current=new S4(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new w4(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=a,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:n,transparency:i=!1,background:r=null}=e;const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,i){const e=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...U0(this.compositeCtx))}this.ctx.save(),T4(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=U0(this.ctx)}executeOperatorList(e,t,n,i){const r=e.argsArray,s=e.fnArray;let o=t||0;const a=r.length;if(a===o)return o;const l=a-o>10&&"function"===typeof n,c=l?Date.now()+15:0;let u=0;const d=this.commonObjs,h=this.objs;let p;for(;;){if(void 0!==i&&o===i.nextBreakPoint)return i.breakIt(o,n),o;if(p=s[o],p!==gJ.dependency)this[p].apply(this,r[o]);else for(const e of r[o]){const t=e.startsWith("g_")?d:h;if(!t.has(e))return t.get(e,n),o}if(o++,o===a)return o;if(l&&++u>10){if(Date.now()>c)return n(),o;u=0}}}endDrawing(){g$(I4,this,k4).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),g$(I4,this,O4).call(this)}_scaleImage(e,t){const n=e.width,i=e.height;let r,s,o=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=n,c=i,u="prescale1";for(;o>2&&l>1||a>2&&c>1;){let t=l,n=c;o>2&&l>1&&(t=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),o/=l/t),a>2&&c>1&&(n=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/n),r=this.cachedCanvases.getCanvas(u,t,n),s=r.context,s.clearRect(0,0,t,n),s.drawImage(e,0,0,l,c,0,0,t,n),e=r.canvas,l=t,c=n,u="prescale1"===u?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:i}=e,r=this.current.fillColor,s=this.current.patternFill,o=U0(t);let a,l,c,u;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;l=JSON.stringify(s?o:[o.slice(0,4),r]),a=this._cachedBitmapsMap.get(t),a||(a=new Map,this._cachedBitmapsMap.set(t,a));const n=a.get(l);if(n&&!s){return{canvas:n,offsetX:Math.round(Math.min(o[0],o[2])+o[4]),offsetY:Math.round(Math.min(o[1],o[3])+o[5])}}c=n}c||(u=this.cachedCanvases.getCanvas("maskCanvas",n,i),x4(u.context,e));let d=BJ.transform(o,[1/n,0,0,-1/i,0,0]);d=BJ.transform(d,[1,0,0,1,0,-i]);const[h,p,g,f]=BJ.getAxialAlignedBoundingBox([0,0,n,i],d),m=Math.round(g-h)||1,v=Math.round(f-p)||1,y=this.cachedCanvases.getCanvas("fillCanvas",m,v),C=y.context,w=h,b=p;C.translate(-w,-b),C.transform(...d),c||(c=this._scaleImage(u.canvas,z0(C)),c=c.img,a&&s&&a.set(l,c)),C.imageSmoothingEnabled=_4(U0(C),e.interpolate),b4(C,c,0,0,c.width,c.height,0,0,n,i),C.globalCompositeOperation="source-in";const S=BJ.transform(z0(C),[1,0,0,1,-w,-b]);return C.fillStyle=s?r.getPattern(t,this,S,s4):r,C.fillRect(0,0,n,i),a&&!s&&(this.cachedCanvases.delete("fillCanvas"),a.set(l,y.canvas)),{canvas:y.canvas,offsetX:Math.round(w),offsetY:Math.round(b)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=R4[e]}setLineJoin(e){this.ctx.lineJoin=D4[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...U0(this.suspendedCtx)),A4(this.suspendedCtx,r),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,i,r,s,o){t.transform(e,n,i,r,s,o),this.__originalTransform(e,n,i,r,s,o)},e.setTransform=function(e,n,i,r,s,o){t.setTransform(e,n,i,r,s,o),this.__originalSetTransform(e,n,i,r,s,o)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,i,r,s,o){t.bezierCurveTo(e,n,i,r,s,o),this.__originalBezierCurveTo(e,n,i,r,s,o)},e.rect=function(e,n,i,r){t.rect(e,n,i,r),this.__originalRect(e,n,i,r)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),A4(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const r=i[0],s=i[1],o=i[2]-r,a=i[3]-s;0!==o&&0!==a&&(this.genericComposeSMask(t.context,n,o,a,t.subtype,t.backdrop,t.transferMap,r,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,r,s,o,a,l,c,u){let d=e.canvas,h=a-c,p=l-u;if(s)if(h<0||p<0||h+n>d.width||p+i>d.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,i),t=e.context;t.drawImage(d,-h,-p),s.some((e=>0!==e))&&(t.globalCompositeOperation="destination-atop",t.fillStyle=BJ.makeHexColor(...s),t.fillRect(0,0,n,i),t.globalCompositeOperation="source-over"),d=e.canvas,h=p=0}else if(s.some((e=>0!==e))){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const t=new Path2D;t.rect(h,p,n,i),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=BJ.makeHexColor(...s),e.fillRect(h,p,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===r&&o?t.filter=this.filterFactory.addAlphaFilter(o):"Luminosity"===r&&(t.filter=this.filterFactory.addLuminosityFilter(o));const g=new Path2D;g.rect(a,l,n,i),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(d,h,p,n,i,a,l,n,i),t.restore()}save(){this.inSMaskMode?(A4(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),A4(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,i,r,s){this.ctx.transform(e,t,n,i,r,s),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const i=this.ctx,r=this.current;let s,o,a=r.x,l=r.y;const c=U0(i),u=0===c[0]&&0===c[3]||0===c[1]&&0===c[2],d=u?n.slice(0):null;for(let h=0,p=0,g=e.length;h<g;h++)switch(0|e[h]){case gJ.rectangle:a=t[p++],l=t[p++];const e=t[p++],n=t[p++],h=a+e,g=l+n;i.moveTo(a,l),0===e||0===n?i.lineTo(h,g):(i.lineTo(h,l),i.lineTo(h,g),i.lineTo(a,g)),u||r.updateRectMinMax(c,[a,l,h,g]),i.closePath();break;case gJ.moveTo:a=t[p++],l=t[p++],i.moveTo(a,l),u||r.updatePathMinMax(c,a,l);break;case gJ.lineTo:a=t[p++],l=t[p++],i.lineTo(a,l),u||r.updatePathMinMax(c,a,l);break;case gJ.curveTo:s=a,o=l,a=t[p+4],l=t[p+5],i.bezierCurveTo(t[p],t[p+1],t[p+2],t[p+3],a,l),r.updateCurvePathMinMax(c,s,o,t[p],t[p+1],t[p+2],t[p+3],a,l,d),p+=6;break;case gJ.curveTo2:s=a,o=l,i.bezierCurveTo(a,l,t[p],t[p+1],t[p+2],t[p+3]),r.updateCurvePathMinMax(c,s,o,a,l,t[p],t[p+1],t[p+2],t[p+3],d),a=t[p+2],l=t[p+3],p+=4;break;case gJ.curveTo3:s=a,o=l,a=t[p+2],l=t[p+3],i.bezierCurveTo(t[p],t[p+1],a,l,a,l),r.updateCurvePathMinMax(c,s,o,t[p],t[p+1],a,l,a,l,d),p+=4;break;case gJ.closePath:i.closePath()}u&&r.updateScalingPathMinMax(c,d),r.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===typeof n&&null!==n&&void 0!==n&&n.getPattern?(t.save(),t.strokeStyle=n.getPattern(t,this,z0(t),o4),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.fillColor;let i=!1;this.current.patternFill&&(t.save(),t.fillStyle=n.getPattern(t,this,z0(t),s4),i=!0);const r=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==r&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(r)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=M4}eoClip(){this.pendingClip=P4}beginText(){this.current.textMatrix=S$,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var n;const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error("Can't find font for ".concat(e));if(r.fontMatrix=i.fontMatrix||E$,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||wJ("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const s=i.loadedName||"sans-serif",o=(null===(n=i.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(s,'", ').concat(i.fallbackName);let a="normal";i.black?a="900":i.bold&&(a="bold");const l=i.italic?"italic":"normal";let c=t;t<16?c=16:t>100&&(c=100),this.current.fontSizeScale=t/c,this.ctx.font="".concat(l," ").concat(a," ").concat(c,"px ").concat(o)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,i,r,s){this.current.textMatrix=[e,t,n,i,r,s],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,i){const r=this.ctx,s=this.current,o=s.font,a=s.textRenderingMode,l=s.fontSize/s.fontSizeScale,c=a&G$,u=!!(a&H$),d=s.patternFill&&!o.missingFile;let h;if((o.disableFontFace||u||d)&&(h=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||d?(r.save(),r.translate(t,n),r.beginPath(),h(r,l),i&&r.setTransform(...i),c!==L$&&c!==B$||r.fill(),c!==F$&&c!==B$||r.stroke(),r.restore()):(c!==L$&&c!==B$||r.fillText(e,t,n),c!==F$&&c!==B$||r.strokeText(e,t,n)),u){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:U0(r),x:t,y:n,fontSize:l,addToPath:h})}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return xJ(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(0===i)return;const r=this.ctx,s=t.fontSizeScale,o=t.charSpacing,a=t.wordSpacing,l=t.fontDirection,c=t.textHScale*l,u=e.length,d=n.vertical,h=d?1:-1,p=n.defaultVMetrics,g=i*t.fontMatrix[0],f=t.textRenderingMode===L$&&!n.disableFontFace&&!t.patternFill;let m;if(r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),l>0?r.scale(c,-1):r.scale(c,1),t.patternFill){r.save();const e=t.fillColor.getPattern(r,this,z0(r),s4);m=U0(r),r.restore(),r.fillStyle=e}let v=t.lineWidth;const y=t.textMatrixScale;if(0===y||0===v){const e=t.textRenderingMode&G$;e!==F$&&e!==B$||(v=this.getSinglePixelWidth())}else v/=y;if(1!==s&&(r.scale(s,s),v/=s),r.lineWidth=v,n.isInvalidPDFjsFont){const n=[];let i=0;for(const t of e)n.push(t.unicode),i+=t.width;return r.fillText(n.join(""),0,0),t.x+=i*g*c,r.restore(),void this.compose()}let C,w=0;for(C=0;C<u;++C){const t=e[C];if("number"===typeof t){w+=h*t*i/1e3;continue}let c=!1;const u=(t.isSpace?a:0)+o,v=t.fontChar,y=t.accent;let b,S,E=t.width;if(d){const e=t.vmetric||p,n=-(t.vmetric?e[1]:.5*E)*g,i=e[2]*g;E=e?-e[0]:E,b=n/s,S=(w+i)/s}else b=w/s,S=0;if(n.remeasure&&E>0){const e=1e3*r.measureText(v).width/i*s;if(E<e&&this.isFontSubpixelAAEnabled){const t=E/e;c=!0,r.save(),r.scale(t,1),b/=t}else E!==e&&(b+=(E-e)/2e3*i/s)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(f&&!y)r.fillText(v,b,S);else if(this.paintChar(v,b,S,m),y){const e=b+i*y.offset.x/s,t=S-i*y.offset.y/s;this.paintChar(y.fontChar,e,t,m)}w+=d?E*g-u*l:E*g+u*l,c&&r.restore()}d?t.y-=w:t.x+=w*c,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,r=n.fontSize,s=n.fontDirection,o=i.vertical?1:-1,a=n.charSpacing,l=n.wordSpacing,c=n.textHScale*s,u=n.fontMatrix||E$,d=e.length;let h,p,g,f;if(!(n.textRenderingMode===V$)&&0!==r){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(c,s),h=0;h<d;++h){if(p=e[h],"number"===typeof p){f=o*p*r/1e3,this.ctx.translate(f,0),n.x+=f*c;continue}const s=(p.isSpace?l:0)+a,d=i.charProcOperatorList[p.operatorListId];if(!d){wJ('Type3 character "'.concat(p.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=p,this.save(),t.scale(r,r),t.transform(...u),this.executeOperatorList(d),this.restore());g=BJ.applyTransform([p.width,0],u)[0]*r+s,t.translate(g,0),n.x+=g*c}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,i,r,s){this.ctx.rect(n,i,r-n,s-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const n=e[1],i=this.baseTransform||U0(this.ctx),r={createCanvasGraphics:e=>new N4(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new v4(e,n,this.ctx,r,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){const i=BJ.makeHexColor(e,t,n);this.ctx.strokeStyle=i,this.current.strokeColor=i}setFillRGBColor(e,t,n){const i=BJ.makeHexColor(e,t,n);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1}_getPattern(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=function(e){switch(e[0]){case"RadialAxial":return new u4(e);case"Mesh":return new p4(e);case"Dummy":return new g4}throw new Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,z0(t),a4);const i=z0(t);if(i){const{width:e,height:n}=t.canvas,[r,s,o,a]=BJ.getAxialAlignedBoundingBox([0,0,e,n],i);this.ctx.fillRect(r,s,o-r,a-s)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){bJ("Should not call beginInlineImage")}beginImageData(){bJ("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=U0(this.ctx),t)){const e=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],e,n),this.current.updateRectMinMax(U0(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||CJ("TODO: Support non-isolated groups."),e.knockout&&wJ("Knockout groups not supported.");const n=U0(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=BJ.getAxialAlignedBoundingBox(e.bbox,U0(t));const r=[0,0,t.canvas.width,t.canvas.height];i=BJ.intersect(i,r)||[0,0,0,0];const s=Math.floor(i[0]),o=Math.floor(i[1]),a=Math.max(Math.ceil(i[2])-s,1),l=Math.max(Math.ceil(i[3])-o,1);this.current.startNewPathAndClipBox([0,0,a,l]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const u=this.cachedCanvases.getCanvas(c,a,l),d=u.context;d.translate(-s,-o),d.transform(...n),e.smask?this.smaskStack.push({canvas:u.canvas,context:d,offsetX:s,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(s,o),t.save()),A4(t,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=U0(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const n=BJ.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,i,r){if(g$(I4,this,k4).call(this),T4(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const i=t[2]-t[0],s=t[3]-t[1];if(r&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=i,t[3]=s;const[r,o]=BJ.singularValueDecompose2dScale(U0(this.ctx)),{viewportScale:a}=this,l=Math.ceil(i*this.outputScaleX*a),c=Math.ceil(s*this.outputScaleY*a);this.annotationCanvas=this.canvasFactory.create(l,c);const{canvas:u,context:d}=this.annotationCanvas;this.annotationCanvasMap.set(e,u),this.annotationCanvas.savedCtx=this.ctx,this.ctx=d,this.ctx.save(),this.ctx.setTransform(r,0,0,-o,0,s*o),T4(this.ctx)}else T4(this.ctx),this.ctx.rect(t[0],t[1],i,s),this.ctx.clip(),this.endPath()}this.current=new S4(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),g$(I4,this,O4).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const n=this.ctx,i=this.processingType3;if(i&&(void 0===i.compiled&&(i.compiled=function(e){const{width:t,height:n}=e;if(t>1e3||n>1e3)return null;const i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let s,o,a,l=new Uint8Array(r*(n+1));const c=t+7&-8;let u=new Uint8Array(c*n),d=0;for(const f of e.data){let e=128;for(;e>0;)u[d++]=f&e?0:255,e>>=1}let h=0;for(d=0,0!==u[d]&&(l[0]=1,++h),o=1;o<t;o++)u[d]!==u[d+1]&&(l[o]=u[d]?2:1,++h),d++;for(0!==u[d]&&(l[o]=2,++h),s=1;s<n;s++){d=s*c,a=s*r,u[d-c]!==u[d]&&(l[a]=u[d]?1:8,++h);let e=(u[d]?4:0)+(u[d-c]?8:0);for(o=1;o<t;o++)e=(e>>2)+(u[d+1]?4:0)+(u[d-c+1]?8:0),i[e]&&(l[a+o]=i[e],++h),d++;if(u[d-c]!==u[d]&&(l[a+o]=u[d]?2:4,++h),h>1e3)return null}for(d=c*(n-1),a=s*r,0!==u[d]&&(l[a]=8,++h),o=1;o<t;o++)u[d]!==u[d+1]&&(l[a+o]=u[d]?4:8,++h),d++;if(0!==u[d]&&(l[a+o]=4,++h),h>1e3)return null;const p=new Int32Array([0,r,-1,0,-r,0,0,0,1]),g=new Path2D;for(s=0;h&&s<=n;s++){let e=s*r;const n=e+t;for(;e<n&&!l[e];)e++;if(e===n)continue;g.moveTo(e%r,s);const i=e;let o=l[e];do{const t=p[o];do{e+=t}while(!l[e]);const n=l[e];5!==n&&10!==n?(o=n,l[e]=0):(o=n&51*o>>4,l[e]&=o>>2|o<<2),g.lineTo(e%r,e/r|0),l[e]||--h}while(i!==e);--s}return u=null,l=null,function(e){e.save(),e.scale(1/t,-1/n),e.translate(0,-n),e.fill(g),e.beginPath(),e.restore()}}(e)),i.compiled))return void i.compiled(n);const r=this._createMaskCanvas(e),s=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(s,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const a=U0(o);o.transform(t,n,i,r,0,0);const l=this._createMaskCanvas(e);o.setTransform(1,0,0,1,l.offsetX-a[4],l.offsetY-a[5]);for(let c=0,u=s.length;c<u;c+=2){const e=BJ.transform(a,[t,n,i,r,s[c],s[c+1]]),[u,d]=BJ.applyTransform([0,0],e);o.drawImage(l.canvas,u,d)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const r of e){const{data:e,width:s,height:o,transform:a}=r,l=this.cachedCanvases.getCanvas("maskCanvas",s,o),c=l.context;c.save();x4(c,this.getObject(e,r)),c.globalCompositeOperation="source-in",c.fillStyle=i?n.getPattern(c,this,z0(t),s4):n,c.fillRect(0,0,s,o),c.restore(),t.save(),t.transform(...a),t.scale(1,-1),b4(t,l.canvas,0,0,s,o,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):wJ("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const r=this.getObject(e);if(!r)return void wJ("Dependent image isn't ready yet");const s=r.width,o=r.height,a=[];for(let l=0,c=i.length;l<c;l+=2)a.push({transform:[t,0,0,n,i[l],i[l+1]],x:0,y:0,w:s,h:o});this.paintInlineImageXObjectGroup(r,a)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",n,i),s=r.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,i=this.ctx;if(this.save(),!b$){const{filter:e}=i;"none"!==e&&""!==e&&(i.filter="none")}let r;if(i.scale(1/t,-1/n),e.bitmap)r=this.applyTransferMapsToBitmap(e);else if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)r=e;else{const i=this.cachedCanvases.getCanvas("inlineImage",t,n).context;E4(i,e),r=this.applyTransferMapsToCanvas(i)}const s=this._scaleImage(r,z0(i));i.imageSmoothingEnabled=_4(U0(i),e.interpolate),b4(i,s.img,0,0,s.paintWidth,s.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const t=e.width,n=e.height,r=this.cachedCanvases.getCanvas("inlineImage",t,n).context;E4(r,e),i=this.applyTransferMapsToCanvas(r)}for(const r of t)n.save(),n.transform(...r.transform),n.scale(1,-1),b4(n,i,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===P4?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=U0(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:r}=this.ctx.getTransform();let s,o;if(0===n&&0===i){const n=Math.abs(t),i=Math.abs(r);if(n===i)if(0===e)s=o=1/n;else{const t=n*e;s=o=t<1?1/t:1}else if(0===e)s=1/n,o=1/i;else{const t=n*e,r=i*e;s=t<1?1/t:1,o=r<1?1/r:1}}else{const a=Math.abs(t*r-n*i),l=Math.hypot(t,n),c=Math.hypot(i,r);if(0===e)s=c/a,o=l/a;else{const t=e*a;s=c>t?c/t:1,o=l>t?l/t:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[i,r]=this.getScaleForStroking();if(t.lineWidth=n||1,1===i&&1===r)return void t.stroke();const s=t.getLineDash();if(e&&t.save(),t.scale(i,r),s.length>0){const e=Math.max(i,r);t.setLineDash(s.map((t=>t/e))),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function k4(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function O4(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}for(const n in gJ)void 0!==N4.prototype[n]&&(N4.prototype[gJ[n]]=N4.prototype[n]);class L4{static get workerPort(){return g$(L4,this,F4)._}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");F4._=g$(L4,this,e)}static get workerSrc(){return g$(L4,this,B4)._}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");B4._=g$(L4,this,e)}}var F4={_:null},B4={_:""};const V4=1,G4=2,H4=1,W4=2,j4=3,U4=4,z4=5,Y4=6,q4=7,K4=8;function X4(e){switch(e instanceof Error||"object"===typeof e&&null!==e||bJ('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new IJ(e.message);case"MissingPDFException":return new DJ(e.message);case"PasswordException":return new TJ(e.message,e.code);case"UnexpectedResponseException":return new MJ(e.message,e.status);case"UnknownErrorException":return new _J(e.message,e.details);default:return new _J(e.message,e.toString())}}var Q4=new WeakSet;class Z4{constructor(e,t,n){p$(this,Q4),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=e=>{const t=e.data;if(t.targetName!==this.sourceName)return;if(t.stream)return void g$(Q4,this,J4).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===V4)n.resolve(t.data);else{if(t.callback!==G4)throw new Error("Unexpected callback case");n.reject(X4(t.reason))}return}const i=this.actionHandler[t.action];if(!i)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,r=t.sourceName;new Promise((function(e){e(i(t.data))})).then((function(i){n.postMessage({sourceName:e,targetName:r,callback:V4,callbackId:t.callbackId,data:i})}),(function(i){n.postMessage({sourceName:e,targetName:r,callback:G4,callbackId:t.callbackId,reason:X4(i)})}))}else t.streamId?g$(Q4,this,$4).call(this,t):i(t.data)},n.addEventListener("message",this._onComObjOnMessage)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(s){r.reject(s)}return r.promise}sendWithStream(e,t,n,i){const r=this.streamId++,s=this.sourceName,o=this.targetName,a=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[r]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},a.postMessage({sourceName:s,targetName:o,action:e,streamId:r,data:t,desiredSize:n.desiredSize},i),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[r].pullCall=t,a.postMessage({sourceName:s,targetName:o,stream:Y4,streamId:r,desiredSize:e.desiredSize}),t.promise},cancel:e=>{SJ(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[r].cancelCall=t,this.streamControllers[r].isClosed=!0,a.postMessage({sourceName:s,targetName:o,stream:H4,streamId:r,reason:X4(e)}),t.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}function $4(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,r=this.comObj,s=this,o=this.actionHandler[e.action],a={enqueue(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const a=this.desiredSize;this.desiredSize-=s,a>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:U4,streamId:t,chunk:e},o)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:j4,streamId:t}),delete s.streamSinks[t])},error(e){SJ(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:z4,streamId:t,reason:X4(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};a.sinkCapability.resolve(),a.ready=a.sinkCapability.promise,this.streamSinks[t]=a,new Promise((function(t){t(o(e.data,a))})).then((function(){r.postMessage({sourceName:n,targetName:i,stream:K4,streamId:t,success:!0})}),(function(e){r.postMessage({sourceName:n,targetName:i,stream:K4,streamId:t,reason:X4(e)})}))}function J4(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,r=this.comObj,s=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case K4:e.success?s.startCall.resolve():s.startCall.reject(X4(e.reason));break;case q4:e.success?s.pullCall.resolve():s.pullCall.reject(X4(e.reason));break;case Y4:if(!o){r.postMessage({sourceName:n,targetName:i,stream:q4,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,new Promise((function(e){var t;e(null===(t=o.onPull)||void 0===t?void 0:t.call(o))})).then((function(){r.postMessage({sourceName:n,targetName:i,stream:q4,streamId:t,success:!0})}),(function(e){r.postMessage({sourceName:n,targetName:i,stream:q4,streamId:t,reason:X4(e)})}));break;case U4:if(SJ(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case j4:if(SJ(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),g$(Q4,this,e6).call(this,s,t);break;case z4:SJ(s,"error should have stream controller"),s.controller.error(X4(e.reason)),g$(Q4,this,e6).call(this,s,t);break;case W4:e.success?s.cancelCall.resolve():s.cancelCall.reject(X4(e.reason)),g$(Q4,this,e6).call(this,s,t);break;case H4:if(!o)break;new Promise((function(t){var n;t(null===(n=o.onCancel)||void 0===n?void 0:n.call(o,X4(e.reason)))})).then((function(){r.postMessage({sourceName:n,targetName:i,stream:W4,streamId:t,success:!0})}),(function(e){r.postMessage({sourceName:n,targetName:i,stream:W4,streamId:t,reason:X4(e)})})),o.sinkCapability.reject(X4(e.reason)),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function e6(e,t){var n,i,r;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(i=e.pullCall)||void 0===i?void 0:i.promise,null===(r=e.cancelCall)||void 0===r?void 0:r.promise]),delete this.streamControllers[t]}var t6=new WeakMap,n6=new WeakMap;class i6{constructor(e){let{parsedData:t,rawData:n}=e;m$(this,t6,void 0),m$(this,n6,void 0),y$(t6,this,t),y$(n6,this,n)}getRaw(){return v$(n6,this)}get(e){var t;return null!==(t=v$(t6,this).get(e))&&void 0!==t?t:null}getAll(){return OJ(v$(t6,this))}has(e){return v$(t6,this).has(e)}}const r6=Symbol("INTERNAL");var s6=new WeakMap,o6=new WeakMap,a6=new WeakMap,l6=new WeakMap;class c6{constructor(e,t){let{name:n,intent:i,usage:r}=t;m$(this,s6,!1),m$(this,o6,!1),m$(this,a6,!1),m$(this,l6,!0),y$(s6,this,!!(e&T$)),y$(o6,this,!!(e&_$)),this.name=n,this.intent=i,this.usage=r}get visible(){if(v$(a6,this))return v$(l6,this);if(!v$(l6,this))return!1;const{print:e,view:t}=this.usage;return v$(s6,this)?"OFF"!==(null===t||void 0===t?void 0:t.viewState):!v$(o6,this)||"OFF"!==(null===e||void 0===e?void 0:e.printState)}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==r6&&bJ("Internal method `_setVisible` called."),y$(a6,this,n),y$(l6,this,t)}}var u6=new WeakMap,d6=new WeakMap,h6=new WeakMap,p6=new WeakMap,g6=new WeakSet;class f6{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T$;if(p$(this,g6),m$(this,u6,null),m$(this,d6,new Map),m$(this,h6,null),m$(this,p6,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,y$(p6,this,e.order);for(const n of e.groups)v$(d6,this).set(n.id,new c6(t,n));if("OFF"===e.baseState)for(const e of v$(d6,this).values())e._setVisible(r6,!1);for(const t of e.on)v$(d6,this).get(t)._setVisible(r6,!0);for(const t of e.off)v$(d6,this).get(t)._setVisible(r6,!1);y$(h6,this,this.getHash())}}isVisible(e){if(0===v$(d6,this).size)return!0;if(!e)return CJ("Optional content group not defined."),!0;if("OCG"===e.type)return v$(d6,this).has(e.id)?v$(d6,this).get(e.id).visible:(wJ("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return g$(g6,this,m6).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!v$(d6,this).has(t))return wJ("Optional content group not found: ".concat(t)),!0;if(v$(d6,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!v$(d6,this).has(t))return wJ("Optional content group not found: ".concat(t)),!0;if(!v$(d6,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!v$(d6,this).has(t))return wJ("Optional content group not found: ".concat(t)),!0;if(!v$(d6,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!v$(d6,this).has(t))return wJ("Optional content group not found: ".concat(t)),!0;if(v$(d6,this).get(t).visible)return!1}return!0}return wJ("Unknown optional content policy ".concat(e.policy,".")),!0}return wJ("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=v$(d6,this).get(e);n?(n._setVisible(r6,!!t,!0),y$(u6,this,null)):wJ("Optional content group not found: ".concat(e))}setOCGState(e){let t,{state:n,preserveRB:i}=e;for(const r of n){switch(r){case"ON":case"OFF":case"Toggle":t=r;continue}const e=v$(d6,this).get(r);if(e)switch(t){case"ON":e._setVisible(r6,!0);break;case"OFF":e._setVisible(r6,!1);break;case"Toggle":e._setVisible(r6,!e.visible)}}y$(u6,this,null)}get hasInitialVisibility(){return null===v$(h6,this)||this.getHash()===v$(h6,this)}getOrder(){return v$(d6,this).size?v$(p6,this)?v$(p6,this).slice():[...v$(d6,this).keys()]:null}getGroups(){return v$(d6,this).size>0?OJ(v$(d6,this)):null}getGroup(e){return v$(d6,this).get(e)||null}getHash(){if(null!==v$(u6,this))return v$(u6,this);const e=new j3;for(const[t,n]of v$(d6,this))e.update("".concat(t,":").concat(n.visible));return y$(u6,this,e.hexdigest())}}function m6(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const t=e[i];let r;if(Array.isArray(t))r=g$(g6,this,m6).call(this,t);else{if(!v$(d6,this).has(t))return wJ("Optional content group not found: ".concat(t)),!0;r=v$(d6,this).get(t).visible}switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===n}class v6{constructor(e,t){let{disableRange:n=!1,disableStream:i=!1}=t;SJ(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(null===s||void 0===s?void 0:s.length)>0){const e=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener(((e,t)=>{this._onReceiveData({begin:e,chunk:t})})),e.addProgressListener(((e,t)=>{this._onProgress({loaded:e,total:t})})),e.addProgressiveReadListener((e=>{this._onReceiveData({chunk:e})})),e.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{SJ(this._rangeReaders.some((function(e){return e._begin===t&&(e._enqueue(i),!0)})),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,i,r;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(r=i.onProgress)||void 0===r||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){SJ(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new y6(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new C6(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class y6{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=N0(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class C6{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function w6(e){let{getResponseHeader:t,isHttp:n,rangeChunkSize:i,disableRange:r}=e;const s={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(t("Content-Length"),10);if(!Number.isInteger(o))return s;if(s.suggestedLength=o,o<=2*i)return s;if(r||!n)return s;if("bytes"!==t("Accept-Ranges"))return s;return"identity"!==(t("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s}function b6(e){const t=e("Content-Disposition");if(t){let e=function(e){let t=!0,n=i("filename\\*","i").exec(e);if(n){n=n[1];let e=o(n);return e=unescape(e),e=a(e),e=l(e),s(e)}if(n=function(e){const t=[];let n;const r=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=r.exec(e));){let[,e,i,r]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[i,r]}const s=[];for(let i=0;i<t.length&&i in t;++i){let[e,n]=t[i];n=o(n),e&&(n=unescape(n),0===i&&(n=a(n))),s.push(n)}return s.join("")}(e),n)return s(l(n));if(n=i("filename","i").exec(e),n){n=n[1];let e=o(n);return e=l(e),s(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function r(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(e,{fatal:!0}),r=kJ(n);n=i.decode(r),t=!1}catch{}}return n}function s(e){return t&&/[\x80-\xff]/.test(e)&&(e=r("utf-8",e),t&&(e=r("iso-8859-1",e))),e}function o(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function a(e){const t=e.indexOf("'");return-1===t?e:r(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,n,i){if("q"===n||"Q"===n)return i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})),r(t,i);try{i=atob(i)}catch{}return r(t,i)}))}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(N0(e))return e}return null}function S6(e,t){return 404===e||0===e&&t.startsWith("file:")?new DJ('Missing PDF "'+t+'".'):new MJ("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e)}function E6(e){return 200===e||206===e}function x6(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function A6(e){const t=new Headers;for(const n in e){const i=e[n];void 0!==i&&t.append(n,i)}return t}function T6(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(wJ("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class _6{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return SJ(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new R6(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new D6(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class R6{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=A6(this._stream.httpHeaders);const n=t.url;fetch(n,x6(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!E6(e.status))throw S6(e.status,n);this._reader=e.body.getReader(),this._headersCapability.resolve();const t=t=>e.headers.get(t),{allowRangeRequests:i,suggestedLength:r}=w6({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=r||this._contentLength,this._filename=b6(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new IJ("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:T6(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class D6{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController,this._headers=A6(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(t,"-").concat(n-1));const r=i.url;fetch(r,x6(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!E6(e.status))throw S6(e.status,r);this._readCapability.resolve(),this._reader=e.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:T6(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class M6{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const i={begin:e,end:t};for(const r in n)i[r]=n[r];return this.request(i)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const r in this.httpHeaders){const e=this.httpHeaders[r];void 0!==e&&t.setRequestHeader(r,e)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),i.expectedStatus=206):i.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const i=this.pendingRequests[e];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(e in this.pendingRequests))return;var r;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void(null===(r=n.onError)||void 0===r||r.call(n,i.status));const s=i.status||200;var o;if(!(200===s&&206===n.expectedStatus)&&s!==n.expectedStatus)return void(null===(o=n.onError)||void 0===o||o.call(n,i.status));const a=function(e){const t=e.response;return"string"!==typeof t?t:kJ(t).buffer}(i);if(206===s){const e=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);n.onDone({begin:parseInt(t[1],10),chunk:a})}else if(a)n.onDone({begin:0,chunk:a});else{var l;null===(l=n.onError)||void 0===l||l.call(n,i.status)}}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class P6{constructor(e){this._source=e,this._manager=new M6(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return SJ(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new I6(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new N6(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class I6{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=e=>t.getResponseHeader(e),{allowRangeRequests:i,suggestedLength:r}=w6({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=b6(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=S6(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class N6{constructor(e,t,n){this._manager=e;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=S6(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const k6=/^file:\/\/\/[a-zA-Z]:\//;class O6{constructor(e){this.source=e,this.url=function(e){const t=i4.get("url"),n=t.parse(e);return"file:"===n.protocol||n.host?n:/^[a-z]:[/\\]/i.test(e)?t.parse("file:///".concat(e)):(n.host||(n.protocol="file:"),n)}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return SJ(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new H6(this):new V6(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new W6(this,e,t):new G6(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class L6{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new IJ("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class F6{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function B6(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}class V6 extends L6{constructor(e){super(e);const t=t=>{if(404===t.statusCode){const e=new DJ('Missing PDF "'.concat(this._url,'".'));return this._storedError=e,void this._headersCapability.reject(e)}this._headersCapability.resolve(),this._setReadableStream(t);const n=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:i,suggestedLength:r}=w6({getResponseHeader:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=r||this._contentLength,this._filename=b6(n)};if(this._request=null,"http:"===this._url.protocol){const n=i4.get("http");this._request=n.request(B6(this._url,e.httpHeaders),t)}else{const n=i4.get("https");this._request=n.request(B6(this._url,e.httpHeaders),t)}this._request.on("error",(e=>{this._storedError=e,this._headersCapability.reject(e)})),this._request.end()}}class G6 extends F6{constructor(e,t,n){super(e),this._httpHeaders={};for(const r in e.httpHeaders){const t=e.httpHeaders[r];void 0!==t&&(this._httpHeaders[r]=t)}this._httpHeaders.Range="bytes=".concat(t,"-").concat(n-1);const i=e=>{if(404!==e.statusCode)this._setReadableStream(e);else{const e=new DJ('Missing PDF "'.concat(this._url,'".'));this._storedError=e}};if(this._request=null,"http:"===this._url.protocol){const e=i4.get("http");this._request=e.request(B6(this._url,this._httpHeaders),i)}else{const e=i4.get("https");this._request=e.request(B6(this._url,this._httpHeaders),i)}this._request.on("error",(e=>{this._storedError=e})),this._request.end()}}class H6 extends L6{constructor(e){super(e);let t=decodeURIComponent(this._url.path);k6.test(this._url.href)&&(t=t.replace(/^\//,""));const n=i4.get("fs");n.promises.lstat(t).then((e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(t)),this._headersCapability.resolve()}),(e=>{"ENOENT"===e.code&&(e=new DJ('Missing PDF "'.concat(t,'".'))),this._storedError=e,this._headersCapability.reject(e)}))}}class W6 extends F6{constructor(e,t,n){super(e);let i=decodeURIComponent(this._url.path);k6.test(this._url.href)&&(i=i.replace(/^\//,""));const r=i4.get("fs");this._setReadableStream(r.createReadStream(i,{start:t,end:n-1}))}}const j6=30,U6=.8;var z6=new WeakMap,Y6=new WeakMap,q6=new WeakMap,K6=new WeakMap,X6=new WeakMap,Q6=new WeakMap,Z6=new WeakMap,$6=new WeakMap,J6=new WeakMap,e8=new WeakMap,t8=new WeakMap,n8=new WeakMap,i8=new WeakMap,r8=new WeakMap,s8=new WeakMap,o8=new WeakMap,a8=new WeakMap,l8=new WeakMap,c8=new WeakSet;class u8{constructor(e){var t;let{textContentSource:n,container:i,viewport:r}=e;if(p$(this,c8),m$(this,z6,Promise.withResolvers()),m$(this,Y6,null),m$(this,q6,!1),m$(this,K6,!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled)),m$(this,X6,null),m$(this,Q6,null),m$(this,Z6,0),m$(this,$6,0),m$(this,J6,null),m$(this,e8,null),m$(this,t8,0),m$(this,n8,0),m$(this,i8,Object.create(null)),m$(this,r8,[]),m$(this,s8,null),m$(this,o8,[]),m$(this,a8,new WeakMap),m$(this,l8,null),n instanceof ReadableStream)y$(s8,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');y$(s8,this,new ReadableStream({start(e){e.enqueue(n),e.close()}}))}y$(Y6,this,y$(e8,this,i)),y$(n8,this,r.scale*(globalThis.devicePixelRatio||1)),y$(t8,this,r.rotation),y$(Q6,this,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:o,pageX:a,pageY:l}=r.rawDims;y$(l8,this,[1,0,0,-1,-a,l+o]),y$($6,this,s),y$(Z6,this,o),f8.call(u8),Y0(i,r),v$(z6,this).promise.catch((()=>{})).then((()=>{w8._.delete(this),y$(Q6,this,null),y$(i8,this,null)}))}render(){const e=()=>{v$(J6,this).read().then((t=>{var n;let{value:i,done:r}=t;r?v$(z6,this).resolve():(null!==(n=v$(X6,this))&&void 0!==n||y$(X6,this,i.lang),Object.assign(v$(i8,this),i.styles),g$(c8,this,d8).call(this,i.items),e())}),v$(z6,this).reject)};return y$(J6,this,v$(s8,this).getReader()),w8._.add(this),e(),v$(z6,this).promise}update(e){let{viewport:t,onBefore:n=null}=e;const i=t.scale*(globalThis.devicePixelRatio||1),r=t.rotation;if(r!==v$(t8,this)&&(null===n||void 0===n||n(),y$(t8,this,r),Y0(v$(e8,this),{rotation:r})),i!==v$(n8,this)){null===n||void 0===n||n(),y$(n8,this,i);const e={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:g8.call(u8,v$(X6,this))};for(const t of v$(o8,this))e.properties=v$(a8,this).get(t),e.div=t,g$(c8,this,p8).call(this,e)}}cancel(){var e;const t=new IJ("TextLayer task cancelled.");null===(e=v$(J6,this))||void 0===e||e.cancel(t).catch((()=>{})),y$(J6,this,null),v$(z6,this).reject(t)}get textDivs(){return v$(o8,this)}get textContentItemsStr(){return v$(r8,this)}static cleanup(){if(!(g$(u8,this,w8)._.size>0)){g$(u8,this,v8)._.clear();for(const{canvas:e}of g$(u8,this,y8)._.values())e.remove();g$(u8,this,y8)._.clear()}}}function d8(e){var t,n;if(v$(q6,this))return;null!==(n=(t=v$(Q6,this)).ctx)&&void 0!==n||(t.ctx=g8.call(e$,v$(X6,this)));const i=v$(o8,this),r=v$(r8,this);for(const s of e){if(i.length>1e5)return wJ("Ignoring additional textDivs for performance reasons."),void y$(q6,this,!0);if(void 0!==s.str)r.push(s.str),g$(c8,this,h8).call(this,s);else if("beginMarkedContentProps"===s.type||"beginMarkedContent"===s.type){const e=v$(Y6,this);y$(Y6,this,document.createElement("span")),v$(Y6,this).classList.add("markedContent"),null!==s.id&&v$(Y6,this).setAttribute("id","".concat(s.id)),e.append(v$(Y6,this))}else"endMarkedContent"===s.type&&y$(Y6,this,v$(Y6,this).parentNode)}}function h8(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};v$(o8,this).push(t);const i=BJ.transform(v$(l8,this),e.transform);let r=Math.atan2(i[1],i[0]);const s=v$(i8,this)[e.fontName];s.vertical&&(r+=Math.PI/2);const o=v$(K6,this)&&s.fontSubstitution||s.fontFamily,a=Math.hypot(i[2],i[3]),l=a*m8.call(e$,o,v$(X6,this));let c,u;0===r?(c=i[4],u=i[5]-l):(c=i[4]+l*Math.sin(r),u=i[5]-l*Math.cos(r));const d="calc(var(--scale-factor)*",h=t.style;v$(Y6,this)===v$(e8,this)?(h.left="".concat((100*c/v$($6,this)).toFixed(2),"%"),h.top="".concat((100*u/v$(Z6,this)).toFixed(2),"%")):(h.left="".concat(d).concat(c.toFixed(2),"px)"),h.top="".concat(d).concat(u.toFixed(2),"px)")),h.fontSize="".concat(d).concat((C8._*a).toFixed(2),"px)"),h.fontFamily=o,n.fontSize=a,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,v$(K6,this)&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),0!==r&&(n.angle=r*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(p=!0)}if(p&&(n.canvasWidth=s.vertical?e.height:e.width),v$(a8,this).set(t,n),v$(Q6,this).div=t,v$(Q6,this).properties=n,g$(c8,this,p8).call(this,v$(Q6,this)),n.hasText&&v$(Y6,this).append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),v$(Y6,this).append(e)}}function p8(e){const{div:t,properties:n,ctx:i,prevFontSize:r,prevFontFamily:s}=e,{style:o}=t;let a="";if(C8._>1&&(a="scale(".concat(1/C8._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:l}=o,{canvasWidth:c,fontSize:u}=n;r===u&&s===l||(i.font="".concat(u*v$(n8,this),"px ").concat(l),e.prevFontSize=u,e.prevFontFamily=l);const{width:d}=i.measureText(t.textContent);d>0&&(a="scaleX(".concat(c*v$(n8,this)/d,") ").concat(a))}0!==n.angle&&(a="rotate(".concat(n.angle,"deg) ").concat(a)),a.length>0&&(o.transform=a)}function g8(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=g$(e$,this,y8)._.get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),g$(e$,this,y8)._.set(e,t)}return t}function f8(){if(null!==g$(e$,this,C8)._)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.textContent="X",document.body.append(e),C8._=g$(e$,this,e.getBoundingClientRect().height),e.remove()}function m8(e,t){const n=g$(e$,this,v8)._.get(e);if(n)return n;const i=g$(e$,this,g8).call(this,t),r=i.font;i.canvas.width=i.canvas.height=j6,i.font="".concat(j6,"px ").concat(e);const s=i.measureText("");let o=s.fontBoundingBoxAscent,a=Math.abs(s.fontBoundingBoxDescent);if(o){const t=o/(o+a);return g$(e$,this,v8)._.set(e,t),i.canvas.width=i.canvas.height=0,i.font=r,t}i.strokeStyle="red",i.clearRect(0,0,j6,j6),i.strokeText("g",0,0);let l=i.getImageData(0,0,j6,j6).data;a=0;for(let u=l.length-1-3;u>=0;u-=4)if(l[u]>0){a=Math.ceil(u/4/j6);break}i.clearRect(0,0,j6,j6),i.strokeText("A",0,j6),l=i.getImageData(0,0,j6,j6).data,o=0;for(let u=0,d=l.length;u<d;u+=4)if(l[u]>0){o=j6-Math.floor(u/4/j6);break}i.canvas.width=i.canvas.height=0,i.font=r;const c=o?o/(o+a):U6;return g$(e$,this,v8)._.set(e,c),c}e$=u8;var v8={_:new Map},y8={_:new Map},C8={_:null},w8={_:new Set};function b8(){V0("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:e,container:t,viewport:n,...i}=arguments[0],r=Object.keys(i);r.length>0&&wJ("Ignoring `renderTextLayer` parameters: "+r.join(", "));const s=new u8({textContentSource:e,container:t,viewport:n}),{textDivs:o,textContentItemsStr:a}=s;return{promise:s.render(),textDivs:o,textContentItemsStr:a}}function S8(){V0("`updateTextLayer`, please use `TextLayer` instead.")}class E8{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var i;if(!n)return;let r=null;const s=n.name;if("#text"===s)r=n.value;else{if(!E8.shouldBuildText(s))return;null!==n&&void 0!==n&&null!==(i=n.attributes)&&void 0!==i&&i.textContent?r=n.attributes.textContent:n.value&&(r=n.value)}if(null!==r&&t.push({str:r}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}const x8=65536,A8=b$?class extends n0{_createCanvas(e,t){return i4.get("canvas").createCanvas(e,t)}}:class extends n0{constructor(){let{ownerDocument:e=globalThis.document,enableHWA:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}},T8=b$?class extends i0{_fetchData(e,t){return r4(e).then((e=>({cMapData:e,compressionType:t})))}}:_0,_8=b$?class extends e0{}:class extends e0{constructor(){let{docId:e,ownerDocument:t=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),p$(this,g0),m$(this,l0,void 0),m$(this,c0,void 0),m$(this,u0,void 0),m$(this,d0,void 0),m$(this,h0,void 0),m$(this,p0,0),y$(u0,this,e),y$(d0,this,t)}addFilter(e){var t,n;if(!e)return"none";let i=f$(g0,this,f0).get(e);if(i)return i;const[r,s,o]=g$(g0,this,y0).call(this,e),a=1===e.length?r:"".concat(r).concat(s).concat(o);if(i=f$(g0,this,f0).get(a),i)return f$(g0,this,f0).set(e,i),i;const l="g_".concat(v$(u0,this),"_transfer_map_").concat((y$(p0,this,(t=v$(p0,this),n=t++,t)),n)),c="url(#".concat(l,")");f$(g0,this,f0).set(e,c),f$(g0,this,f0).set(a,c);const u=g$(g0,this,b0).call(this,l);return g$(g0,this,E0).call(this,r,s,o,u),c}addHCMFilter(e,t){var n;const i="".concat(e,"-").concat(t),r="base";let s=f$(g0,this,m0).get(r);if((null===(n=s)||void 0===n?void 0:n.key)===i)return s.url;var o;s?(null===(o=s.filter)||void 0===o||o.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},f$(g0,this,m0).set(r,s));if(!e||!t)return s.url;const a=g$(g0,this,A0).call(this,e);e=BJ.makeHexColor(...a);const l=g$(g0,this,A0).call(this,t);if(t=BJ.makeHexColor(...l),f$(g0,this,v0).style.color="","#000000"===e&&"#ffffff"===t||e===t)return s.url;const c=new Array(256);for(let g=0;g<=255;g++){const e=g/255;c[g]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const u=c.join(","),d="g_".concat(v$(u0,this),"_hcm_filter"),h=s.filter=g$(g0,this,b0).call(this,d);g$(g0,this,E0).call(this,u,u,u,h),g$(g0,this,w0).call(this,h);const p=(e,t)=>{const n=a[e]/255,i=l[e]/255,r=new Array(t+1);for(let s=0;s<=t;s++)r[s]=n+s/t*(i-n);return r.join(",")};return g$(g0,this,E0).call(this,p(0,5),p(1,5),p(2,5),h),s.url="url(#".concat(d,")"),s.url}addAlphaFilter(e){var t,n;let i=f$(g0,this,f0).get(e);if(i)return i;const[r]=g$(g0,this,y0).call(this,[e]),s="alpha_".concat(r);if(i=f$(g0,this,f0).get(s),i)return f$(g0,this,f0).set(e,i),i;const o="g_".concat(v$(u0,this),"_alpha_map_").concat((y$(p0,this,(t=v$(p0,this),n=t++,t)),n)),a="url(#".concat(o,")");f$(g0,this,f0).set(e,a),f$(g0,this,f0).set(s,a);const l=g$(g0,this,b0).call(this,o);return g$(g0,this,x0).call(this,r,l),a}addLuminosityFilter(e){var t,n;let i,r,s=f$(g0,this,f0).get(e||"luminosity");if(s)return s;if(e?([i]=g$(g0,this,y0).call(this,[e]),r="luminosity_".concat(i)):r="luminosity",s=f$(g0,this,f0).get(r),s)return f$(g0,this,f0).set(e,s),s;const o="g_".concat(v$(u0,this),"_luminosity_map_").concat((y$(p0,this,(t=v$(p0,this),n=t++,t)),n)),a="url(#".concat(o,")");f$(g0,this,f0).set(e,a),f$(g0,this,f0).set(r,a);const l=g$(g0,this,b0).call(this,o);return g$(g0,this,C0).call(this,l),e&&g$(g0,this,x0).call(this,i,l),a}addHighlightHCMFilter(e,t,n,i,r){var s;const o="".concat(t,"-").concat(n,"-").concat(i,"-").concat(r);let a=f$(g0,this,m0).get(e);if((null===(s=a)||void 0===s?void 0:s.key)===o)return a.url;var l;a?(null===(l=a.filter)||void 0===l||l.remove(),a.key=o,a.url="none",a.filter=null):(a={key:o,url:"none",filter:null},f$(g0,this,m0).set(e,a));if(!t||!n)return a.url;const[c,u]=[t,n].map(g$(g0,this,A0).bind(this));let d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[p,g]=[i,r].map(g$(g0,this,A0).bind(this));h<d&&([d,h,p,g]=[h,d,g,p]),f$(g0,this,v0).style.color="";const f=(e,t,n)=>{const i=new Array(256),r=(h-d)/n,s=e/255,o=(t-e)/(255*n);let a=0;for(let l=0;l<=n;l++){const e=Math.round(d+l*r),t=s+l*o;for(let n=a;n<=e;n++)i[n]=t;a=e+1}for(let l=a;l<256;l++)i[l]=i[a-1];return i.join(",")},m="g_".concat(v$(u0,this),"_hcm_").concat(e,"_filter"),v=a.filter=g$(g0,this,b0).call(this,m);return g$(g0,this,w0).call(this,v),g$(g0,this,E0).call(this,f(p[0],g[0],5),f(p[1],g[1],5),f(p[2],g[2],5),v),a.url="url(#".concat(m,")"),a.url}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&0!==f$(g0,this,m0).size||(v$(c0,this)&&(v$(c0,this).parentNode.parentNode.remove(),y$(c0,this,null)),v$(l0,this)&&(v$(l0,this).clear(),y$(l0,this,null)),y$(p0,this,0))}},R8=b$?class extends r0{_fetchData(e){return r4(e)}}:R0;function D8(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const i=new P8,{docId:r}=i,s=n.url?function(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(b$&&"string"===typeof e)return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,o=n.data?function(e){if(b$&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return kJ(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,a=n.httpHeaders||null,l=!0===n.withCredentials,c=null!==(e=n.password)&&void 0!==e?e:null,u=n.range instanceof N8?n.range:null,d=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:x8;let h=n.worker instanceof Y8?n.worker:null;const p=n.verbosity,g="string"!==typeof n.docBaseUrl||I0(n.docBaseUrl)?null:n.docBaseUrl,f="string"===typeof n.cMapUrl?n.cMapUrl:null,m=!1!==n.cMapPacked,v=n.CMapReaderFactory||T8,y="string"===typeof n.standardFontDataUrl?n.standardFontDataUrl:null,C=n.StandardFontDataFactory||R8,w=!0!==n.stopAtErrors,b=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,S=!1!==n.isEvalSupported,E="boolean"===typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!b$,x=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,A="boolean"===typeof n.disableFontFace?n.disableFontFace:b$,T=!0===n.fontExtraProperties,_=!0===n.enableXfa,R=n.ownerDocument||globalThis.document,D=!0===n.disableRange,M=!0===n.disableStream,P=!0===n.disableAutoFetch,I=!0===n.pdfBug,N=!0===n.enableHWA,k=u?u.length:null!==(t=n.length)&&void 0!==t?t:NaN,O="boolean"===typeof n.useSystemFonts?n.useSystemFonts:!b$&&!A,L="boolean"===typeof n.useWorkerFetch?n.useWorkerFetch:v===_0&&C===R0&&f&&y&&F0(f,document.baseURI)&&F0(y,document.baseURI),F=n.canvasFactory||new A8({ownerDocument:R,enableHWA:N}),B=n.filterFactory||new _8({docId:r,ownerDocument:R});vJ(p);const V={canvasFactory:F,filterFactory:B};if(L||(V.cMapReaderFactory=new v({baseUrl:f,isCompressed:m}),V.standardFontDataFactory=new C({baseUrl:y})),!h){const e={verbosity:p,port:L4.workerPort};h=e.port?Y8.fromPort(e):new Y8(e),i._worker=h}const G={docId:r,apiVersion:"4.4.168",data:o,password:c,disableAutoFetch:P,rangeChunkSize:d,length:k,docBaseUrl:g,enableXfa:_,evaluatorOptions:{maxImageSize:b,disableFontFace:A,ignoreErrors:w,isEvalSupported:S,isOffscreenCanvasSupported:E,canvasMaxAreaInBytes:x,fontExtraProperties:T,useSystemFonts:O,cMapUrl:L?f:null,standardFontDataUrl:L?y:null}},H={disableFontFace:A,fontExtraProperties:T,ownerDocument:R,pdfBug:I,styleElement:null,loadingParams:{disableAutoFetch:P,enableXfa:_}};return h.promise.then((function(){if(i.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const e=h.messageHandler.sendWithPromise("GetDocRequest",G,o?[o.buffer]:null);let t;if(u)t=new v6(u,{disableRange:D,disableStream:M});else if(!o){if(!s)throw new Error("getDocument - no `url` parameter provided.");t=(e=>{if(b$){return function(){return"undefined"!==typeof fetch&&"undefined"!==typeof Response&&"body"in Response.prototype}()&&F0(e.url)?new _6(e):new O6(e)}return F0(e.url)?new _6(e):new P6(e)})({url:s,length:k,httpHeaders:a,withCredentials:l,rangeChunkSize:d,disableRange:D,disableStream:M})}return e.then((e=>{if(i.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const n=new Z4(r,e,h.port),s=new n5(n,i,t,H,V);i._transport=s,n.send("Ready",null)}))})).catch(i._capability.reject),i}function M8(e){return"object"===typeof e&&Number.isInteger(null===e||void 0===e?void 0:e.num)&&e.num>=0&&Number.isInteger(null===e||void 0===e?void 0:e.gen)&&e.gen>=0}class P8{constructor(){var e,t;this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d".concat((I8._=(e=I8._,t=e++,e),t)),this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{var e,t;null!==(e=this._worker)&&void 0!==e&&e.port&&(this._worker._pendingDestroy=!0),await(null===(t=this._transport)||void 0===t?void 0:t.destroy())}catch(i){var n;throw null!==(n=this._worker)&&void 0!==n&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}var I8={_:0};class N8{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then((()=>{for(const n of this._progressListeners)n(e,t)}))}onDataProgressiveRead(e){this._readyCapability.promise.then((()=>{for(const t of this._progressiveReadListeners)t(e)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const e of this._progressiveDoneListeners)e()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){bJ("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class k8{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return xJ(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var O8=new WeakMap,L8=new WeakMap,F8=new WeakSet;class B8{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];p$(this,F8),m$(this,O8,null),m$(this,L8,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new L0:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new a5,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new M0({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return xJ(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n;let{canvasContext:i,viewport:r,intent:s="display",annotationMode:o=I$.ENABLE,transform:a=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:h=null}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const p=this._transport.getRenderingIntent(s,o,h),{renderingIntent:g,cacheKey:f}=p;y$(L8,this,!1),g$(F8,this,G8).call(this),c||(c=this._transport.getOptionalContentConfig(g));let m=this._intentStates.get(f);m||(m=Object.create(null),this._intentStates.set(f,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const v=!!(g&_$);var y;m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(y=this._stats)||void 0===y||y.time("Page Request"),this._pumpOperatorList(p));const C=e=>{var t;(m.renderTasks.delete(w),(this._maybeCleanupAfterRender||v)&&y$(L8,this,!0),g$(F8,this,V8).call(this,!v),e?(w.capability.reject(e),this._abortOperatorList({intentState:m,reason:e instanceof Error?e:new Error(e)})):w.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(t=globalThis.Stats)&&void 0!==t&&t.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new h5({callback:C,params:{canvasContext:i,viewport:r,transform:a,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:d});((n=m).renderTasks||(n.renderTasks=new Set)).add(w);const b=w.task;return Promise.all([m.displayReadyCapability.promise,c]).then((e=>{var t;let[n,i]=e;if(this.destroyed)C();else{if(null===(t=this._stats)||void 0===t||t.time("Rendering"),!(i.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:n,optionalContentConfig:i}),w.operatorListChanged()}})).catch(C),b}getOperatorList(){let{intent:e="display",annotationMode:t=I$.ENABLE,printAnnotationStorage:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this._transport.getRenderingIntent(e,t,n,!0);let r,s=this._intentStates.get(i.cacheKey);var o,a;(s||(s=Object.create(null),this._intentStates.set(i.cacheKey,s)),s.opListReadCapability)||(r=Object.create(null),r.operatorListChanged=function(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(r))},s.opListReadCapability=Promise.withResolvers(),((o=s).renderTasks||(o.renderTasks=new Set)).add(r),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(a=this._stats)||void 0===a||a.time("Page Request"),this._pumpOperatorList(i));return s.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((e=>E8.textContent(e)));const t=this.streamTextContent(e);return new Promise((function(e,n){const i=t.getReader(),r={items:[],styles:Object.create(null),lang:null};!function t(){i.read().then((function(n){var i;let{value:s,done:o}=n;o?e(r):(null!==(i=r.lang)&&void 0!==i||(r.lang=s.lang),Object.assign(r.styles,s.styles),r.items.push(...s.items),t())}),n)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),y$(L8,this,!1),g$(F8,this,G8).call(this),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];y$(L8,this,!0);const t=g$(F8,this,V8).call(this,!1);return e&&t&&this._stats&&(this._stats=new L0),t}_startRenderPage(e,t){var n,i;const r=this._intentStates.get(t);r&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=r.displayReadyCapability)||void 0===i||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&g$(F8,this,V8).call(this,!0)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:i}=e;const{map:r,transfer:s}=i,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:r},s).getReader(),a=this._intentStates.get(n);a.streamReader=o;const l=()=>{o.read().then((e=>{let{value:t,done:n}=e;n?a.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,a),l())}),(e=>{if(a.streamReader=null,!this._transport.destroyed){if(a.operatorList){a.operatorList.lastChunk=!0;for(const e of a.renderTasks)e.operatorListChanged();g$(F8,this,V8).call(this,!0)}if(a.displayReadyCapability)a.displayReadyCapability.reject(e);else{if(!a.opListReadCapability)throw e;a.opListReadCapability.reject(e)}}}))};l()}_abortOperatorList(e){let{intentState:t,reason:n,force:i=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(n instanceof P0){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout((()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})}),e))}}if(t.streamReader.cancel(new IJ(n.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function V8(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(g$(F8,this,G8).call(this),!v$(L8,this)||this.destroyed)return!1;if(e)return y$(O8,this,setTimeout((()=>{y$(O8,this,null),g$(F8,this,V8).call(this,!1)}),5e3)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),y$(L8,this,!1),!0}function G8(){v$(O8,this)&&(clearTimeout(v$(O8,this)),y$(O8,this,null))}var H8=new WeakMap,W8=new WeakMap;class j8{constructor(){m$(this,H8,new Set),m$(this,W8,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};v$(W8,this).then((()=>{for(const e of v$(H8,this))e.call(this,n)}))}addEventListener(e,t){v$(H8,this).add(t)}removeEventListener(e,t){v$(H8,this).delete(t)}terminate(){v$(H8,this).clear()}}const U8={isWorkerDisabled:!1,fakeWorkerId:0};b$&&(U8.isWorkerDisabled=!0,L4.workerSrc||(L4.workerSrc="./pdf.worker.mjs")),U8.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||"null"===n.origin)return!1}catch{return!1}const i=new URL(t,n);return n.origin===i.origin},U8.createCDNWrapper=function(e){const t='await import("'.concat(e,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var z8=new WeakSet;class Y8{constructor(){let{name:e=null,port:t=null,verbosity:n=yJ()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(p$(this,z8),this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){var i;if(null!==(i=X8._)&&void 0!==i&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");return(X8._||(X8._=new WeakMap)).set(t,this),void this._initializeFromPort(t)}this._initialize()}get promise(){return b$?Promise.all([i4.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Z4("main","worker",e),this._messageHandler.on("ready",(function(){})),g$(z8,this,q8).call(this)}_initialize(){if(U8.isWorkerDisabled||K8(Y8))return void this._setupFakeWorker();let{workerSrc:e}=Y8;try{U8.isSameOrigin(window.location.href,e)||(e=U8.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Z4("main","worker",t),i=()=>{r.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",(()=>{this._webWorker||i()}),{signal:r.signal}),n.on("test",(e=>{r.abort(),!this.destroyed&&e?(this._messageHandler=n,this._port=t,this._webWorker=t,g$(z8,this,q8).call(this)):i()})),n.on("ready",(e=>{if(r.abort(),this.destroyed)i();else try{s()}catch{this._setupFakeWorker()}}));const s=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void s()}catch{CJ("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){U8.isWorkerDisabled||(wJ("Setting up fake worker."),U8.isWorkerDisabled=!0),Y8._setupFakeWorkerGlobal.then((e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new j8;this._port=t;const n="fake".concat(U8.fakeWorkerId++),i=new Z4(n+"_worker",n,t);e.setup(i,t),this._messageHandler=new Z4(n,n+"_worker",t),g$(z8,this,q8).call(this)})).catch((e=>{this._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))}))}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),null===(e=X8._)||void 0===e||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var t;if(null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const n=null===(t=g$(Y8,this,X8)._)||void 0===t?void 0:t.get(e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Y8(e)}static get workerSrc(){if(L4.workerSrc)return L4.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return xJ(this,"_setupFakeWorkerGlobal",(async()=>{if(f$(Y8,this,K8))return f$(Y8,this,K8);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function q8(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}function K8(e){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch{return null}}var X8={_:void 0},Q8=new WeakMap,Z8=new WeakMap,$8=new WeakMap,J8=new WeakMap,e5=new WeakMap,t5=new WeakSet;class n5{constructor(e,t,n,i,r){p$(this,t5),m$(this,Q8,new Map),m$(this,Z8,new Map),m$(this,$8,new Map),m$(this,J8,new Map),m$(this,e5,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new a5,this.fontLoader=new J3({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return xJ(this,"annotationStorage",new K3)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I$.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=T$,s=U3;switch(e){case"any":r=A$;break;case"display":break;case"print":r=_$;break;default:wJ("getRenderingIntent - invalid intent: ".concat(e))}switch(t){case I$.DISABLE:r+=M$;break;case I$.ENABLE:break;case I$.ENABLE_FORMS:r+=R$;break;case I$.ENABLE_STORAGE:r+=D$;s=(r&_$&&n instanceof Z3?n:this.annotationStorage).serializable;break;default:wJ("getRenderingIntent - invalid annotationMode: ".concat(t))}return i&&(r+=P$),{renderingIntent:r,cacheKey:"".concat(r,"_").concat(s.hash),annotationStorageSerializable:s}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(e=v$(e5,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of v$(Z8,this).values())t.push(i._destroy());v$(Z8,this).clear(),v$($8,this).clear(),v$(J8,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then((()=>{var e;this.commonObjs.clear(),this.fontLoader.clear(),v$(Q8,this).clear(),this.filterFactory.destroy(),u8.cleanup(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new IJ("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",((e,t)=>{SJ(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then((function(e){let{value:n,done:i}=e;i?t.close():(SJ(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(e=>{const n=Promise.withResolvers(),i=this._fullReader;return i.headersReady.then((()=>{if(!i.isStreamingSupported||!i.isRangeSupported){var e;if(this._lastProgress)null===(e=t.onProgress)||void 0===e||e.call(t,this._lastProgress);i.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}}n.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})}),n.reject),n.promise})),e.on("GetRangeReader",((e,t)=>{SJ(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then((function(e){let{value:n,done:i}=e;i?t.close():(SJ(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{n.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}):t.close()})),e.on("GetDoc",(e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new k8(n,this))})),e.on("DocException",(function(e){let n;switch(e.name){case"PasswordException":n=new TJ(e.message,e.code);break;case"InvalidPDFException":n=new RJ(e.message);break;case"MissingPDFException":n=new DJ(e.message);break;case"UnexpectedResponseException":n=new MJ(e.message,e.status);break;case"UnknownErrorException":n=new _J(e.message,e.details);break;default:bJ("DocException - expected a valid Error.")}t._capability.reject(n)})),e.on("PasswordRequest",(e=>{if(y$(e5,this,Promise.withResolvers()),t.onPassword){const i=e=>{e instanceof Error?v$(e5,this).reject(e):v$(e5,this).resolve({password:e})};try{t.onPassword(i,e.code)}catch(n){v$(e5,this).reject(n)}}else v$(e5,this).reject(new TJ(e.message,e.code));return v$(e5,this).promise})),e.on("DataLoaded",(e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(e=>{if(this.destroyed)return;v$(Z8,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)})),e.on("commonobj",(t=>{var n;let[i,r,s]=t;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:t,fontExtraProperties:o,pdfBug:a}=this._params;if("error"in s){const e=s.error;wJ("Error during font loading: ".concat(e)),this.commonObjs.resolve(i,e);break}const l=a&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,c=new e4(s,{disableFontFace:t,inspectFont:l});this.fontLoader.bind(c).catch((()=>e.sendWithPromise("FontFallback",{id:i}))).finally((()=>{!o&&c.data&&(c.data=null),this.commonObjs.resolve(i,c)}));break;case"CopyLocalImage":const{imageRef:u}=s;SJ(u,"The imageRef must be defined.");for(const e of v$(Z8,this).values())for(const[,t]of e.objs)if((null===t||void 0===t?void 0:t.ref)===u)return t.dataLen?(this.commonObjs.resolve(i,structuredClone(t)),t.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error("Got unknown common object type ".concat(r))}return null})),e.on("obj",(e=>{let[t,n,i,r]=e;if(this.destroyed)return;const s=v$(Z8,this).get(n);var o;if(!s.objs.has(t))if(0!==s._intentStates.size)switch(i){case"Image":s.objs.resolve(t,r),(null===r||void 0===r?void 0:r.dataLen)>1e7&&(s._maybeCleanupAfterRender=!0);break;case"Pattern":s.objs.resolve(t,r);break;default:throw new Error("Got unknown object type ".concat(i))}else null===r||void 0===r||null===(o=r.bitmap)||void 0===o||o.close()})),e.on("DocProgress",(e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})})),e.on("FetchBuiltInCMap",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),e.on("FetchStandardFontData",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&wJ("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},i).finally((()=>{this.annotationStorage.resetModified()}))}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=v$($8,this).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then((n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&v$(J8,this).set(n.refStr,e);const i=new B8(t,n,this,this._params.pdfBug);return v$(Z8,this).set(t,i),i}));return v$($8,this).set(t,i),i}getPageIndex(e){return M8(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return g$(t5,this,i5).call(this,"GetFieldObjects")}hasJSActions(){return g$(t5,this,i5).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return g$(t5,this,i5).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return g$(t5,this,i5).call(this,"GetOptionalContentConfig").then((t=>new f6(t,e)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=v$(Q8,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then((e=>{var t,n,i,r;return{info:e[0],metadata:e[1]?new i6(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(i=null===(r=this._fullReader)||void 0===r?void 0:r.contentLength)&&void 0!==i?i:null}}));return v$(Q8,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of v$(Z8,this).values()){if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."))}this.commonObjs.clear(),e||this.fontLoader.clear(),v$(Q8,this).clear(),this.filterFactory.destroy(!0),u8.cleanup()}}cachedPageNumber(e){var t;if(!M8(e))return null;const n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!==(t=v$(J8,this).get(n))&&void 0!==t?t:null}}function i5(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=v$(Q8,this).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return v$(Q8,this).set(e,i),i}const r5=Symbol("INITIAL_DATA");var s5=new WeakMap,o5=new WeakSet;class a5{constructor(){p$(this,o5),m$(this,s5,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=g$(o5,this,l5).call(this,e);return n.promise.then((()=>t(n.data))),null}const n=v$(s5,this)[e];if(!n||n.data===r5)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=v$(s5,this)[e];return!!t&&t.data!==r5}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=g$(o5,this,l5).call(this,e);n.data=t,n.resolve()}clear(){for(const t in v$(s5,this)){var e;const{data:n}=v$(s5,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}y$(s5,this,Object.create(null))}*[Symbol.iterator](){for(const e in v$(s5,this)){const{data:t}=v$(s5,this)[e];t!==r5&&(yield[e,t])}}}function l5(e){var t;return(t=v$(s5,this))[e]||(t[e]={...Promise.withResolvers(),data:r5})}var c5=new WeakMap;class u5{constructor(e){m$(this,c5,null),y$(c5,this,e),this.onContinue=null}get promise(){return v$(c5,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;v$(c5,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=v$(c5,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=v$(c5,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}var d5=new WeakMap;class h5{constructor(e){let{callback:t,params:n,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:h=null}=e;m$(this,d5,null),this.callback=t,this.params=n,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===u&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new u5(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics(e){var t,n;let{transparency:i=!1,optionalContentConfig:r}=e;if(this.cancelled)return;if(this._canvas){if(p5._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");p5._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:o,transform:a,background:l}=this.params;this.gfx=new N4(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:o,transparency:i,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),v$(d5,this)&&(window.cancelAnimationFrame(v$(d5,this)),y$(d5,this,null)),p5._.delete(this._canvas),this.callback(t||new P0("Rendering cancelled, page ".concat(this._pageIndex+1),n))}operatorListChanged(){var e;this.graphicsReady?(null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?y$(d5,this,window.requestAnimationFrame((()=>{y$(d5,this,null),this._nextBound().catch(this._cancelBound)}))):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),p5._.delete(this._canvas),this.callback())))}}var p5={_:new WeakSet};const g5="4.4.168",f5="19fbc8998";function m5(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function v5(e){return Math.max(0,Math.min(255,255*e))}class y5{static CMYK_G(e){let[t,n,i,r]=e;return["G",1-Math.min(1,.3*t+.59*i+.11*n+r)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=v5(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=m5(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,i]=e;return["G",.3*t+.59*n+.11*i]}static RGB_rgb(e){return e.map(v5)}static RGB_HTML(e){return"#".concat(e.map(m5).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,i,r]=e;return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,n+r)]}static CMYK_rgb(e){let[t,n,i,r]=e;return[v5(1-Math.min(1,t+r)),v5(1-Math.min(1,i+r)),v5(1-Math.min(1,n+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,i]=e;const r=1-t,s=1-n,o=1-i;return["CMYK",r,s,o,Math.min(r,s,o)]}}class C5{static setupStorage(e,t,n,i,r){const s=i.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==s.value&&(e.textContent=s.value),"print"===r)break;e.addEventListener("input",(e=>{i.setValue(t,{value:e.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===r)break;e.addEventListener("change",(e=>{i.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})}))}else{if(null!==s.value&&e.setAttribute("value",s.value),"print"===r)break;e.addEventListener("input",(e=>{i.setValue(t,{value:e.target.value})}))}break;case"select":if(null!==s.value){e.setAttribute("value",s.value);for(const e of n.children)e.attributes.value===s.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",(e=>{const n=e.target.options,r=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(t,{value:r})}))}}static setAttributes(e){let{html:t,element:n,storage:i=null,intent:r,linkService:s}=e;const{attributes:o}=n,a=t instanceof HTMLAnchorElement;"radio"===o.type&&(o.name="".concat(o.name,"-").concat(r));for(const[l,c]of Object.entries(o))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!a||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}a&&s.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,n,i)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,r=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:r,linkService:n});const o="richText"!==r,a=e.div;if(a.append(s),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");a.style.transform=t}o&&a.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const e=document.createTextNode(i.value);s.append(e),o&&E8.shouldBuildText(i.name)&&l.push(e)}return{textDivs:l}}const c=[[i,-1,s]];for(;c.length>0;){var u,d;const[e,i,s]=c.at(-1);if(i+1===e.children.length){c.pop();continue}const a=e.children[++c.at(-1)[1]];if(null===a)continue;const{name:h}=a;if("#text"===h){const e=document.createTextNode(a.value);l.push(e),s.append(e);continue}const p=null!==a&&void 0!==a&&null!==(u=a.attributes)&&void 0!==u&&u.xmlns?document.createElementNS(a.attributes.xmlns,h):document.createElement(h);if(s.append(p),a.attributes&&this.setAttributes({html:p,element:a,storage:t,intent:r,linkService:n}),(null===(d=a.children)||void 0===d?void 0:d.length)>0)c.push([a,-1,p]);else if(a.value){const e=document.createTextNode(a.value);o&&E8.shouldBuildText(h)&&l.push(e),p.append(e)}}for(const h of a.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}const w5=1e3,b5=new WeakSet;function S5(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class E5{static create(e){switch(e.data.annotationType){case U$:return new P5(e);case j$:return new O5(e);case oJ:switch(e.data.fieldType){case"Tx":return new F5(e);case"Btn":return e.data.radioButton?new G5(e):e.data.checkBox?new V5(e):new H5(e);case"Ch":return new W5(e);case"Sig":return new B5(e)}return new L5(e);case rJ:return new j5(e);case z$:return new w7(e);case Y$:return new S7(e);case q$:return new x7(e);case K$:return new T7(e);case Q$:return new R7(e);case nJ:return new M7(e);case iJ:return new I7(e);case X$:return new D7(e);case Z$:return new N7(e);case $$:return new k7(e);case J$:return new O7(e);case eJ:return new L7(e);case tJ:return new F7(e);case sJ:return new G7(e);default:return new R5(e)}}}var x5=new WeakMap,A5=new WeakMap,T5=new WeakMap,_5=new WeakSet;class R5{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p$(this,_5),m$(this,x5,null),m$(this,A5,!1),m$(this,T5,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData(e){let{titleObj:t,contentsObj:n,richText:i}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str||null!==i&&void 0!==i&&i.str)}get hasPopupData(){return R5._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;v$(x5,this)||y$(x5,this,{rect:this.data.rect.slice(0)});const{rect:n}=e;n&&g$(_5,this,D5).call(this,n),null===(t=v$(T5,this))||void 0===t||t.popup.updateEdited(e)}resetEdited(){var e;v$(x5,this)&&(g$(_5,this,D5).call(this,v$(x5,this).rect),null===(e=v$(T5,this))||void 0===e||e.popup.resetEdited(),y$(x5,this,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof L5||(r.tabIndex=w5);const{style:s}=r;if(s.zIndex=this.parent.zIndex++,t.popupRef&&r.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof j5){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,r),r}const{width:o,height:a}=S5(t.rect);if(!e&&t.borderStyle.width>0){s.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--scale-factor)) / calc(").concat(n,"px * var(--scale-factor))");s.borderRadius=t}else if(this instanceof G5){const e="calc(".concat(o,"px * var(--scale-factor)) / calc(").concat(a,"px * var(--scale-factor))");s.borderRadius=e}switch(t.borderStyle.style){case aJ:s.borderStyle="solid";break;case lJ:s.borderStyle="dashed";break;case cJ:wJ("Unimplemented border style: beveled");break;case uJ:wJ("Unimplemented border style: inset");break;case dJ:s.borderBottomStyle="solid"}const i=t.borderColor||null;i?(y$(A5,this,!0),s.borderColor=BJ.makeHexColor(0|i[0],0|i[1],0|i[2])):s.borderWidth=0}const l=BJ.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:u,pageX:d,pageY:h}=i.rawDims;s.left="".concat(100*(l[0]-d)/c,"%"),s.top="".concat(100*(l[1]-h)/u,"%");const{rotation:p}=t;return t.hasOwnCanvas||0===p?(s.width="".concat(100*o/c,"%"),s.height="".concat(100*a/u,"%")):this.setRotation(p,r),r}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:s}=S5(this.data.rect);let o,a;e%180===0?(o=100*r/n,a=100*s/i):(o=100*s/n,a=100*r/i),t.style.width="".concat(o,"%"),t.style.height="".concat(a,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const i=n.detail[e],r=i[0],s=i.slice(1);n.target.style[t]=y5["".concat(r,"_HTML")](s),this.annotationStorage.setValue(this.data.id,{[t]:y5["".concat(r,"_rgb")](s)})};return xJ(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout((()=>e.target.focus({preventScroll:!1})),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||n[i];null===r||void 0===r||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,r]of Object.entries(t)){const s=n[i];if(s){s({detail:{[i]:r},target:e}),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,r]=this.data.rect.map((e=>Math.fround(e)));if(8===e.length){const[s,o,a,l]=e.subarray(2,6);if(i===s&&r===o&&t===a&&n===l)return}const{style:s}=this.container;let o;if(v$(A5,this)){const{borderColor:e,borderWidth:t}=s;s.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const a=i-t,l=r-n,{svgFactory:c}=this,u=c.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0);const d=c.createElement("defs");u.append(d);const h=c.createElement("clipPath"),p="clippath_".concat(this.data.id);h.setAttribute("id",p),h.setAttribute("clipPathUnits","objectBoundingBox"),d.append(h);for(let f=2,m=e.length;f<m;f+=8){var g;const n=e[f],i=e[f+1],s=e[f+2],u=e[f+3],d=c.createElement("rect"),p=(s-t)/a,m=(r-i)/l,v=(n-s)/a,y=(i-u)/l;d.setAttribute("x",p),d.setAttribute("y",m),d.setAttribute("width",v),d.setAttribute("height",y),h.append(d),null===(g=o)||void 0===g||g.push('<rect vector-effect="non-scaling-stroke" x="'.concat(p,'" y="').concat(m,'" width="').concat(v,'" height="').concat(y,'"/>'))}v$(A5,this)&&(o.push("</g></svg>')"),s.backgroundImage=o.join("")),this.container.append(u),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const n=y$(T5,this,new j5({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:"popup_".concat(t.id),rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){bJ("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:e,id:r,exportValues:s}of i){if(-1===e)continue;if(r===t)continue;const i="string"===typeof s?s:null,o=document.querySelector('[data-element-id="'.concat(r,'"]'));!o||b5.has(o)?n.push({id:r,exportValue:i,domElement:o}):wJ("_getElementsByName - element not allowed: ".concat(r))}return n}for(const i of document.getElementsByName(e)){const{exportValue:e}=i,r=i.getAttribute("data-element-id");r!==t&&(b5.has(i)&&n.push({id:r,exportValue:e,domElement:i}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",(()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})}))}}function D5(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:o,pageY:a}}}}=this;null===n||void 0===n||n.splice(0,4,...e);const{width:l,height:c}=S5(e);t.left="".concat(100*(e[0]-o)/r,"%"),t.top="".concat(100*(s-e[3]+a)/s,"%"),0===i?(t.width="".concat(100*l/r,"%"),t.height="".concat(100*c/s,"%")):this.setRotation(i)}var M5=new WeakSet;class P5 extends R5{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),p$(this,M5),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action),i=!0):e.attachment?(g$(M5,this,N5).call(this,n,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(g$(M5,this,k5).call(this,n,e.setOCGState),i=!0):e.dest?(this._bindLink(n,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&g$(M5,this,I5).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),g$(M5,this,I5).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const r=n.get(i);r&&(e[r]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1})}e.onclick||(e.onclick=()=>!1),g$(M5,this,I5).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),g$(M5,this,I5).call(this),!this._fieldObjects)return wJ('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:i,include:r}=t,s=[];if(0!==e.length||0!==i.length){const t=new Set(i);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===r&&s.push(n)}else for(const t of Object.values(this._fieldObjects))s.push(...t);const o=this.annotationStorage,a=[];for(const t of s){const{id:e}=t;switch(a.push(e),t.type){case"text":{const n=t.defaultValue||"";o.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;o.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";o.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(b5.has(n)?n.dispatchEvent(new Event("resetform")):wJ("_bindResetFormAction - element not allowed: ".concat(e)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:a,name:"ResetForm"}}));return!1}}}function I5(){this.container.setAttribute("data-internal-link","")}function N5(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(t.content,t.filename,n),!1},g$(M5,this,I5).call(this)}function k5(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),g$(M5,this,I5).call(this)}class O5 extends R5{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class L5 extends R5{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return LJ.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,r){n.includes("mouse")?e.addEventListener(n,(e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})})):e.addEventListener(n,(e=>{var s;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}r&&(null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(e)}}))}))}_setEventListeners(e,t,n,i){for(const[a,l]of n){var r,s,o;if("Action"===l||null!==(r=this.data.actions)&&void 0!==r&&r[l])"Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,a,l,i),"Focus"!==l||null!==(s=this.data.actions)&&void 0!==s&&s.Blur?"Blur"!==l||null!==(o=this.data.actions)&&void 0!==o&&o.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":BJ.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,r=e.style;let s;const o=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(x$*i))||1);s=Math.min(i,o(t/x$))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(i,o(e/x$))}r.fontSize="calc(".concat(s,"px * var(--scale-factor))"),r.color=BJ.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class F5 extends L5{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,i){const r=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=n),r.setValue(s.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var i;const a=e.getValue(t,{value:this.data.fieldValue});let l=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=a.formattedValue||(null===(i=this.data.textContent)||void 0===i?void 0:i.join("\n"))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};var r,s;if(this.data.multiLine)n=document.createElement("textarea"),n.textContent=null!==(r=u)&&void 0!==r?r:l,this.data.doNotScroll&&(n.style.overflowY="hidden");else n=document.createElement("input"),n.type="text",n.setAttribute("value",null!==(s=u)&&void 0!==s?s:l),this.data.doNotScroll&&(n.style.overflowX="hidden");this.data.hasOwnCanvas&&(n.hidden=!0),b5.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=w5,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",(i=>{e.setValue(t,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),d.formattedValue=null})),n.addEventListener("resetform",(e=>{var t;const i=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=d.userValue=i,d.formattedValue=null}));let h=e=>{const{formattedValue:t}=d;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var o;n.addEventListener("focus",(e=>{var t;if(d.focused)return;const{target:n}=e;d.userValue&&(n.value=d.userValue),d.lastCommittedValue=n.value,d.commitKey=1,null!==(t=this.data.actions)&&void 0!==t&&t.Focus||(d.focused=!0)})),n.addEventListener("updatefromsandbox",(n=>{this.showElementAndHideCanvas(n.target);const i={value(n){var i;d.userValue=null!==(i=n.detail.value)&&void 0!==i?i:"",e.setValue(t,{value:d.userValue.toString()}),n.target.value=d.userValue},formattedValue(n){const{formattedValue:i}=n.detail;d.formattedValue=i,null!==i&&void 0!==i&&n.target!==document.activeElement&&(n.target.value=i),e.setValue(t,{formattedValue:i})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var i;const{charLimit:r}=n.detail,{target:s}=n;if(0===r)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",r);let o=d.userValue;!o||o.length<=r||(o=o.slice(0,r),s.value=d.userValue=o,e.setValue(t,{value:o}),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)})),n.addEventListener("keydown",(e=>{var n;d.commitKey=1;let i=-1;if("Escape"===e.key?i=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(d.commitKey=3):i=2,-1===i)return;const{value:r}=e.target;d.lastCommittedValue!==r&&(d.lastCommittedValue=r,d.userValue=r,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:i,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}));const i=h;h=null,n.addEventListener("blur",(e=>{var n;if(!d.focused||!e.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(d.focused=!1);const{value:r}=e.target;var s;(d.userValue=r,d.lastCommittedValue!==r)&&(null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:d.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));i(e)})),null!==(o=this.data.actions)&&void 0!==o&&o.Keystroke&&n.addEventListener("beforeinput",(e=>{var n;d.lastCommittedValue=null;const{data:i,target:r}=e,{value:s,selectionStart:o,selectionEnd:a}=r;let l=o,c=a;switch(e.inputType){case"deleteWordBackward":{const e=s.substring(0,o).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=s.substring(o).match(/^[^\w]*\w*/);e&&(c+=e[0].length);break}case"deleteContentBackward":o===a&&(l-=1);break;case"deleteContentForward":o===a&&(c+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,change:i||"",willCommit:!1,selStart:l,selEnd:c}})})),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.value))}if(h&&n.addEventListener("blur",h),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class B5 extends L5{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class V5 extends L5{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof i&&(i="Off"!==i,e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return b5.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=w5,r.addEventListener("change",(i=>{const{name:r,checked:s}=i.target;for(const o of this._getElementsByName(r,n)){const n=s&&o.exportValue===t.exportValue;o.domElement&&(o.domElement.checked=n),e.setValue(o.id,{value:n})}e.setValue(n,{value:s})})),r.addEventListener("resetform",(e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue})),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",(t=>{const i={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(i,t)})),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class G5 extends L5{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof i&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const s of this._getElementsByName(t.fieldName,n))e.setValue(s.id,{value:!1});const r=document.createElement("input");if(b5.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=w5,r.addEventListener("change",(t=>{const{name:i,checked:r}=t.target;for(const s of this._getElementsByName(i,n))e.setValue(s.id,{value:!1});e.setValue(n,{value:r})})),r.addEventListener("resetform",(e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue})),this.enableScripting&&this.hasJSActions){const i=t.buttonValue;r.addEventListener("updatefromsandbox",(t=>{const r={value:t=>{const r=i===t.detail.value;for(const i of this._getElementsByName(t.target.name)){const t=r&&i.id===n;i.domElement&&(i.domElement.checked=t),e.setValue(i.id,{value:t})}}};this._dispatchEventFromSandbox(r,t)})),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class H5 extends P5{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({},e)}))),e}}class W5 extends L5{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");b5.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=w5;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===t}));for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),r=!1),i.append(e)}let s=null;if(r){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),i.prepend(e),s=()=>{e.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const o=e=>{const t=e?"value":"textContent",{options:n,multiple:r}=i;return r?Array.prototype.filter.call(n,(e=>e.selected)).map((e=>e[t])):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let a=o(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,(e=>({displayValue:e.textContent,exportValue:e.value})))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",(n=>{const r={value(n){var r;null===(r=s)||void 0===r||r();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of i.options)e.selected=c.has(e.value);e.setValue(t,{value:o(!0)}),a=o(!1)},multipleSelection(e){i.multiple=!0},remove(n){const r=i.options,s=n.detail.remove;if(r[s].selected=!1,i.remove(s),r.length>0){-1===Array.prototype.findIndex.call(r,(e=>e.selected))&&(r[0].selected=!0)}e.setValue(t,{value:o(!0),items:l(n)}),a=o(!1)},clear(n){for(;0!==i.length;)i.remove(0);e.setValue(t,{value:null,items:[]}),a=o(!1)},insert(n){const{index:r,displayValue:s,exportValue:c}=n.detail.insert,u=i.children[r],d=document.createElement("option");d.textContent=s,d.value=c,u?u.before(d):i.append(d),e.setValue(t,{value:o(!0),items:l(n)}),a=o(!1)},items(n){const{items:r}=n.detail;for(;0!==i.length;)i.remove(0);for(const e of r){const{displayValue:t,exportValue:n}=e,r=document.createElement("option");r.textContent=t,r.value=n,i.append(r)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:o(!0),items:l(n)}),a=o(!1)},indices(n){const i=new Set(n.detail.indices);for(const e of n.target.options)e.selected=i.has(e.index);e.setValue(t,{value:o(!0)}),a=o(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(r,n)})),i.addEventListener("input",(n=>{var i;const r=o(!0),s=o(!1);e.setValue(t,{value:r}),n.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,change:s,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(e=>e.target.value))):i.addEventListener("input",(function(n){e.setValue(t,{value:o(!0)})})),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class j5 extends R5{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:R5._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new u7({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map((e=>"".concat(UJ).concat(e))).join(",")),this.container}}var U5=new WeakMap,z5=new WeakMap,Y5=new WeakMap,q5=new WeakMap,K5=new WeakMap,X5=new WeakMap,Q5=new WeakMap,Z5=new WeakMap,$5=new WeakMap,J5=new WeakMap,e7=new WeakMap,t7=new WeakMap,n7=new WeakMap,i7=new WeakMap,r7=new WeakMap,s7=new WeakMap,o7=new WeakMap,a7=new WeakMap,l7=new WeakMap,c7=new WeakSet;class u7{constructor(e){let{container:t,color:n,elements:i,titleObj:r,modificationDate:s,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:d}=e;p$(this,c7),m$(this,U5,g$(c7,this,f7).bind(this)),m$(this,z5,g$(c7,this,C7).bind(this)),m$(this,Y5,g$(c7,this,y7).bind(this)),m$(this,q5,g$(c7,this,v7).bind(this)),m$(this,K5,null),m$(this,X5,null),m$(this,Q5,null),m$(this,Z5,null),m$(this,$5,null),m$(this,J5,null),m$(this,e7,null),m$(this,t7,!1),m$(this,n7,null),m$(this,i7,null),m$(this,r7,null),m$(this,s7,null),m$(this,o7,null),m$(this,a7,null),m$(this,l7,!1),y$(X5,this,t),y$(o7,this,r),y$(Q5,this,o),y$(s7,this,a),y$(J5,this,l),y$(K5,this,n),y$(r7,this,c),y$(e7,this,u),y$($5,this,i),y$(Z5,this,H0.toDateObject(s)),this.trigger=i.flatMap((e=>e.getElementsToTriggerPopup()));for(const p of this.trigger)p.addEventListener("click",v$(q5,this)),p.addEventListener("mouseenter",v$(Y5,this)),p.addEventListener("mouseleave",v$(z5,this)),p.classList.add("popupTriggerArea");for(const p of i){var h;null===(h=p.container)||void 0===h||h.addEventListener("keydown",v$(U5,this))}v$(X5,this).hidden=!0,d&&g$(c7,this,v7).call(this)}render(){if(v$(n7,this))return;const e=y$(n7,this,document.createElement("div"));if(e.className="popup",v$(K5,this)){const t=e.style.outlineColor=BJ.makeHexColor(...v$(K5,this));if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))e.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)");else{const t=.7;e.style.backgroundColor=BJ.makeHexColor(...v$(K5,this).map((e=>Math.floor(t*(255-e)+e))))}}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),({dir:n.dir,str:n.textContent}=v$(o7,this)),e.append(t),v$(Z5,this)){const e=document.createElement("span");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),e.setAttribute("data-l10n-args",JSON.stringify({date:v$(Z5,this).toLocaleDateString(),time:v$(Z5,this).toLocaleTimeString()})),t.append(e)}const i=f$(c7,this,d7);if(i)C5.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const t=this._formatContents(v$(Q5,this));e.append(t)}v$(X5,this).append(e)}_formatContents(e){let{str:t,dir:n}=e;const i=document.createElement("p");i.classList.add("popupContent"),i.dir=n;const r=t.split(/(?:\r\n?|\n)/);for(let s=0,o=r.length;s<o;++s){const e=r[s];i.append(document.createTextNode(e)),s<o-1&&i.append(document.createElement("br"))}return i}updateEdited(e){var t;let{rect:n,popupContent:i}=e;v$(a7,this)||y$(a7,this,{contentsObj:v$(Q5,this),richText:v$(s7,this)}),n&&y$(i7,this,null),i&&(y$(s7,this,g$(c7,this,g7).call(this,i)),y$(Q5,this,null)),null===(t=v$(n7,this))||void 0===t||t.remove(),y$(n7,this,null)}resetEdited(){var e;v$(a7,this)&&(({contentsObj:d$(y$,[Q5,this])._,richText:d$(y$,[s7,this])._}=v$(a7,this)),y$(a7,this,null),null===(e=v$(n7,this))||void 0===e||e.remove(),y$(n7,this,null),y$(i7,this,null))}forceHide(){y$(l7,this,this.isVisible),v$(l7,this)&&(v$(X5,this).hidden=!0)}maybeShow(){v$(l7,this)&&(v$(n7,this)||g$(c7,this,y7).call(this),y$(l7,this,!1),v$(X5,this).hidden=!1)}get isVisible(){return!1===v$(X5,this).hidden}}function d7(e){const t=v$(s7,e),n=v$(Q5,e);return null===t||void 0===t||!t.str||null!==n&&void 0!==n&&n.str&&n.str!==t.str?null:v$(s7,e).html||null}function h7(e){var t;return(null===(t=f$(c7,e,d7))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.fontSize)||0}function p7(e){var t;return(null===(t=f$(c7,e,d7))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.color)||null}function g7(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:f$(c7,this,p7),fontSize:f$(c7,this,h7)?"calc(".concat(f$(c7,this,h7),"px * var(--scale-factor))"):""}};for(const r of e.split("\n"))t.push({name:"span",value:r,attributes:i});return n}function f7(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&v$(t7,this))&&g$(c7,this,v7).call(this)}function m7(){if(null!==v$(i7,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:r}}}=v$(J5,this);let s=!!v$(e7,this),o=v$(s?e7:r7,this);for(const h of v$($5,this))if(!o||null!==BJ.intersect(h.data.rect,o)){o=h.data.rect,s=!0;break}const a=BJ.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),l=s?o[2]-o[0]+5:0,c=a[0]+l,u=a[1];y$(i7,this,[100*(c-i)/t,100*(u-r)/n]);const{style:d}=v$(X5,this);d.left="".concat(v$(i7,this)[0],"%"),d.top="".concat(v$(i7,this)[1],"%")}function v7(){y$(t7,this,!v$(t7,this)),v$(t7,this)?(g$(c7,this,y7).call(this),v$(X5,this).addEventListener("click",v$(q5,this)),v$(X5,this).addEventListener("keydown",v$(U5,this))):(g$(c7,this,C7).call(this),v$(X5,this).removeEventListener("click",v$(q5,this)),v$(X5,this).removeEventListener("keydown",v$(U5,this)))}function y7(){v$(n7,this)||this.render(),this.isVisible?v$(t7,this)&&v$(X5,this).classList.add("focused"):(g$(c7,this,m7).call(this),v$(X5,this).hidden=!1,v$(X5,this).style.zIndex=parseInt(v$(X5,this).style.zIndex)+1e3)}function C7(){v$(X5,this).classList.remove("focused"),!v$(t7,this)&&this.isVisible&&(v$(X5,this).hidden=!0,v$(X5,this).style.zIndex=parseInt(v$(X5,this).style.zIndex)-1e3)}class w7 extends R5{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=N$.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var b7=new WeakMap;class S7 extends R5{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),m$(this,b7,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:n}=S5(e.rect),i=this.svgFactory.create(t,n,!0),r=y$(b7,this,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return v$(b7,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var E7=new WeakMap;class x7 extends R5{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),m$(this,E7,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:n}=S5(e.rect),i=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,s=y$(E7,this,this.svgFactory.createElement("svg:rect"));return s.setAttribute("x",r/2),s.setAttribute("y",r/2),s.setAttribute("width",t-r),s.setAttribute("height",n-r),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return v$(E7,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var A7=new WeakMap;class T7 extends R5{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),m$(this,A7,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:n}=S5(e.rect),i=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,s=y$(A7,this,this.svgFactory.createElement("svg:ellipse"));return s.setAttribute("cx",t/2),s.setAttribute("cy",n/2),s.setAttribute("rx",t/2-r/2),s.setAttribute("ry",n/2-r/2),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return v$(A7,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var _7=new WeakMap;class R7 extends R5{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),m$(this,_7,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:i}}=this;if(!t)return this.container;const{width:r,height:s}=S5(e),o=this.svgFactory.create(r,s,!0);let a=[];for(let c=0,u=t.length;c<u;c+=2){const n=t[c]-e[0],i=e[3]-t[c+1];a.push("".concat(n,",").concat(i))}a=a.join(" ");const l=y$(_7,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",a),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),o.append(l),this.container.append(o),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return v$(_7,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class D7 extends R7{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class M7 extends R5{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var P7=new WeakMap;class I7 extends R5{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),m$(this,P7,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=N$.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:n,popupRef:i}}=this,{width:r,height:s}=S5(e),o=this.svgFactory.create(r,s,!0);for(const a of t){let t=[];for(let n=0,i=a.length;n<i;n+=2){const i=a[n]-e[0],r=e[3]-a[n+1];t.push("".concat(i,",").concat(r))}t=t.join(" ");const r=this.svgFactory.createElement(this.svgElementName);v$(P7,this).push(r),r.setAttribute("points",t),r.setAttribute("stroke-width",n.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),!i&&this.hasPopupData&&this._createPopup(),o.append(r)}return this.container.append(o),this.container}getElementsToTriggerPopup(){return v$(P7,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class N7 extends R5{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class k7 extends R5{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class O7 extends R5{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class L7 extends R5{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class F7 extends R5{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var B7=new WeakMap,V7=new WeakSet;class G7 extends R5{constructor(e){var t;super(e,{isRenderable:!0}),p$(this,V7),m$(this,B7,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",g$(V7,this,H7).bind(this)),y$(B7,this,n);const{isMac:i}=LJ.platform;return e.addEventListener("keydown",(e=>{"Enter"===e.key&&(i?e.metaKey:e.ctrlKey)&&g$(V7,this,H7).call(this)})),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return v$(B7,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function H7(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.content,this.filename)}var W7=new WeakMap,j7=new WeakMap,U7=new WeakMap,z7=new WeakSet;class Y7{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:o}=e;p$(this,z7),m$(this,W7,null),m$(this,j7,null),m$(this,U7,new Map),this.div=t,y$(W7,this,n),y$(j7,this,i),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}async render(e){const{annotations:t}=e,n=this.div;Y0(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new D0,annotationStorage:e.annotationStorage||new K3,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const e=o.annotationType===rJ;if(e){const e=i.get(o.id);if(!e)continue;r.elements=e}else{const{width:e,height:t}=S5(o.rect);if(e<=0||t<=0)continue}r.data=o;const t=E5.create(r);if(!t.isRenderable)continue;if(!e&&o.popupRef){const e=i.get(o.popupRef);e?e.push(t):i.set(o.popupRef,[t])}const n=t.render();var s;if(o.hidden&&(n.style.visibility="hidden"),g$(z7,this,q7).call(this,n,o.id),t.annotationEditorType>0)v$(U7,this).set(t.data.id,t),null===(s=this._annotationEditorUIManager)||void 0===s||s.renderAnnotationElement(t)}g$(z7,this,K7).call(this)}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,Y0(n,{rotation:t.rotation}),g$(z7,this,K7).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(v$(U7,this).values())}getEditableAnnotation(e){return v$(U7,this).get(e)}}function q7(e,t){var n;const i=e.firstChild||e;i.id="".concat(UJ).concat(t),this.div.append(e),null===(n=v$(W7,this))||void 0===n||n.moveElementInDOM(this.div,e,i,!1)}function K7(){if(!v$(j7,this))return;const e=this.div;for(const[t,n]of v$(j7,this)){const i=e.querySelector('[data-annotation-id="'.concat(t,'"]'));if(!i)continue;n.className="annotationContent";const{firstChild:r}=i;r?"CANVAS"===r.nodeName?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):i.append(n)}v$(j7,this).clear()}const X7=/\r\n?|\n/g;var Q7=new WeakMap,Z7=new WeakMap,$7=new WeakMap,J7=new WeakMap,e9=new WeakMap,t9=new WeakMap,n9=new WeakMap,i9=new WeakMap,r9=new WeakMap,s9=new WeakMap,o9=new WeakSet;class a9 extends x3{static get _keyboardManager(){const e=a9.prototype,t=e=>e.isEmpty(),n=x2.TRANSLATE_SMALL,i=x2.TRANSLATE_BIG;return xJ(this,"_keyboardManager",new R1([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}constructor(e){super({...e,name:"freeTextEditor"}),p$(this,o9),m$(this,Q7,this.editorDivBlur.bind(this)),m$(this,Z7,this.editorDivFocus.bind(this)),m$(this,$7,this.editorDivInput.bind(this)),m$(this,J7,this.editorDivKeydown.bind(this)),m$(this,e9,this.editorDivPaste.bind(this)),m$(this,t9,void 0),m$(this,n9,""),m$(this,i9,"".concat(this.id,"-editor")),m$(this,r9,void 0),m$(this,s9,null),y$(t9,this,e.color||a9._defaultColor||x3._defaultLineColor),y$(r9,this,e.fontSize||a9._defaultFontSize)}static initialize(e,t){x3.initialize(e,t,{strings:["pdfjs-free-text-default-content"]});const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case k$.FREETEXT_SIZE:a9._defaultFontSize=t;break;case k$.FREETEXT_COLOR:a9._defaultColor=t}}updateParams(e,t){switch(e){case k$.FREETEXT_SIZE:g$(o9,this,l9).call(this,t);break;case k$.FREETEXT_COLOR:g$(o9,this,c9).call(this,t)}}static get defaultPropertiesToUpdate(){return[[k$.FREETEXT_SIZE,a9._defaultFontSize],[k$.FREETEXT_COLOR,a9._defaultColor||x3._defaultLineColor]]}get propertiesToUpdate(){return[[k$.FREETEXT_SIZE,v$(r9,this)],[k$.FREETEXT_COLOR,v$(t9,this)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-a9._internalPadding*e,-(a9._internalPadding+v$(r9,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(N$.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const e=this._uiManager._signal;this.editorDiv.addEventListener("keydown",v$(J7,this),{signal:e}),this.editorDiv.addEventListener("focus",v$(Z7,this),{signal:e}),this.editorDiv.addEventListener("blur",v$(Q7,this),{signal:e}),this.editorDiv.addEventListener("input",v$($7,this),{signal:e}),this.editorDiv.addEventListener("paste",v$(e9,this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",v$(i9,this)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",v$(J7,this)),this.editorDiv.removeEventListener("focus",v$(Z7,this)),this.editorDiv.removeEventListener("blur",v$(Q7,this)),this.editorDiv.removeEventListener("input",v$($7,this)),this.editorDiv.removeEventListener("paste",v$(e9,this)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=v$(n9,this),t=y$(n9,this,g$(o9,this,u9).call(this).trimEnd());if(e===t)return;const n=e=>{y$(n9,this,e),e?(g$(o9,this,p9).call(this),this._uiManager.rebuild(this),g$(o9,this,d9).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),g$(o9,this,d9).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){a9._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",v$(i9,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),x3._l10nPromise.get("pdfjs-free-text-default-content").then((e=>{var t;return null===(t=this.editorDiv)||void 0===t?void 0:t.setAttribute("default-content",e)})),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(v$(r9,this),"px * var(--scale-factor))"),n.color=v$(t9,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),p1(this,this.div,["dblclick","keydown"]),this.width){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:r}=v$(s9,this);let[s,o]=this.getInitialTranslation();[s,o]=this.pageTranslationToScreen(s,o);const[a,l]=this.pageDimensions,[c,u]=this.pageTranslation;let d,h;switch(this.rotation){case 0:d=e+(r[0]-c)/a,h=t+this.height-(r[1]-u)/l;break;case 90:d=e+(r[0]-c)/a,h=t-(r[1]-u)/l,[s,o]=[o,-s];break;case 180:d=e-this.width+(r[0]-c)/a,h=t-(r[1]-u)/l,[s,o]=[-s,-o];break;case 270:d=e+(r[0]-c-this.height*l)/a,h=t+(r[1]-u-this.width*a)/l,[s,o]=[-o,s]}this.setAt(d*n,h*i,s,o)}else this.setAt(e*n,t*i,this.width*n,this.height*i);g$(o9,this,p9).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const i=f9.call(a9,t.getData("text")||"").replaceAll(X7,"\n");if(!i)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const s=r.getRangeAt(0);if(!i.includes("\n"))return s.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void r.collapseToStart();const{startContainer:o,startOffset:a}=s,l=[],c=[];if(o.nodeType===Node.TEXT_NODE){const e=o.parentElement;if(c.push(o.nodeValue.slice(a).replaceAll(X7,"")),e!==this.editorDiv){let t=l;for(const n of this.editorDiv.childNodes)n!==e?t.push(h9.call(a9,n)):t=c}l.push(o.nodeValue.slice(0,a).replaceAll(X7,""))}else if(o===this.editorDiv){let e=l,t=0;for(const n of this.editorDiv.childNodes)t++===a&&(e=c),e.push(h9.call(a9,n))}y$(n9,this,"".concat(l.join("\n")).concat(i).concat(c.join("\n"))),g$(o9,this,p9).call(this);const u=new Range;let d=l.reduce(((e,t)=>e+t.length),0);for(const{firstChild:h}of this.editorDiv.childNodes)if(h.nodeType===Node.TEXT_NODE){const e=h.nodeValue.length;if(d<=e){u.setStart(h,d),u.setEnd(h,d);break}d-=e}r.removeAllRanges(),r.addRange(u)}get contentDiv(){return this.editorDiv}static deserialize(e,t,n){let i=null;if(e instanceof w7){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:r,rotation:s,id:o},textContent:a,textPosition:l,parent:{page:{pageNumber:c}}}=e;if(!a||0===a.length)return null;i=e={annotationType:N$.FREETEXT,color:Array.from(n),fontSize:t,value:a.join("\n"),position:l,pageIndex:c-1,rect:r.slice(0),rotation:s,id:o,deleted:!1}}const r=super.deserialize(e,t,n);return y$(r9,r,e.fontSize),y$(t9,r,BJ.makeHexColor(...e.color)),y$(n9,r,f9.call(a9,e.value)),r.annotationElementId=e.id||null,y$(s9,r,i),r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=a9._internalPadding*this.parentScale,n=this.getRect(t,t),i=x3._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:v$(t9,this)),r={annotationType:N$.FREETEXT,color:i,fontSize:v$(r9,this),value:g$(o9,this,g9).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?r:this.annotationElementId&&!g$(o9,this,m9).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:n}=t;n.fontSize="calc(".concat(v$(r9,this),"px * var(--scale-factor))"),n.color=v$(t9,this),t.replaceChildren();for(const r of v$(n9,this).split("\n")){const e=document.createElement("div");e.append(r?document.createTextNode(r):document.createElement("br")),t.append(e)}const i=a9._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:v$(n9,this)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}function l9(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--scale-factor))"),this.translate(0,-(e-v$(r9,this))*this.parentScale),y$(r9,this,e),g$(o9,this,d9).call(this)},n=v$(r9,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:k$.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function c9(e){const t=e=>{y$(t9,this,this.editorDiv.style.color=e)},n=v$(t9,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:k$.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function u9(){const e=[];this.editorDiv.normalize();for(const t of this.editorDiv.childNodes)e.push(h9.call(t$,t));return e.join("\n")}function d9(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,i=t.style.display,r=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=i,t.classList.toggle("hidden",r)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function h9(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(X7,"")}function p9(){if(this.editorDiv.replaceChildren(),v$(n9,this))for(const e of v$(n9,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function g9(){return v$(n9,this).replaceAll("\xa0"," ")}function f9(e){return e.replaceAll(" ","\xa0")}function m9(e){const{value:t,fontSize:n,color:i,pageIndex:r}=v$(s9,this);return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some(((e,t)=>e!==i[t]))||e.pageIndex!==r}t$=a9,An(a9,"_freeTextDefaultContent",""),An(a9,"_internalPadding",0),An(a9,"_defaultColor",null),An(a9,"_defaultFontSize",10),An(a9,"_type","freetext"),An(a9,"_editorType",N$.FREETEXT);var v9=new WeakMap,y9=new WeakMap,C9=new WeakMap,w9=new WeakSet;class b9{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];p$(this,w9),m$(this,v9,void 0),m$(this,y9,[]),m$(this,C9,[]);let r=1/0,s=-1/0,o=1/0,a=-1/0;const l=10**-4;for(const{x:f,y:m,width:v,height:y}of e){const e=Math.floor((f-t)/l)*l,n=Math.ceil((f+v+t)/l)*l,i=Math.floor((m-t)/l)*l,c=Math.ceil((m+y+t)/l)*l,u=[e,i,c,!0],d=[n,i,c,!1];v$(y9,this).push(u,d),r=Math.min(r,e),s=Math.max(s,n),o=Math.min(o,i),a=Math.max(a,c)}const c=s-r+2*n,u=a-o+2*n,d=r-n,h=o-n,p=v$(y9,this).at(i?-1:-2),g=[p[0],p[2]];for(const f of v$(y9,this)){const[e,t,n]=f;f[0]=(e-d)/c,f[1]=(t-h)/u,f[2]=(n-h)/u}y$(v9,this,{x:d,y:h,width:c,height:u,lastPoint:g})}getOutlines(){v$(y9,this).sort(((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]));const e=[];for(const t of v$(y9,this))t[3]?(e.push(...g$(w9,this,T9).call(this,t)),g$(w9,this,x9).call(this,t)):(g$(w9,this,A9).call(this,t),e.push(...g$(w9,this,T9).call(this,t)));return g$(w9,this,S9).call(this,e)}}function S9(e){const t=[],n=new Set;for(const s of e){const[e,n,i]=s;t.push([e,n,s],[e,i,s])}t.sort(((e,t)=>e[1]-t[1]||e[0]-t[0]));for(let s=0,o=t.length;s<o;s+=2){const e=t[s][2],i=t[s+1][2];e.push(i),i.push(e),n.add(e),n.add(i)}const i=[];let r;for(;n.size>0;){const e=n.values().next().value;let[t,s,o,a,l]=e;n.delete(e);let c=t,u=s;for(r=[t,o],i.push(r);;){let e;if(n.has(a))e=a;else{if(!n.has(l))break;e=l}n.delete(e),[t,s,o,a,l]=e,c!==t&&(r.push(c,u,t,u===s?s:o),c=t),u=u===s?o:s}r.push(c,u)}return new M9(i,v$(v9,this))}function E9(e){const t=v$(C9,this);let n=0,i=t.length-1;for(;n<=i;){const r=n+i>>1,s=t[r][0];if(s===e)return r;s<e?n=r+1:i=r-1}return i+1}function x9(e){let[,t,n]=e;const i=g$(w9,this,E9).call(this,t);v$(C9,this).splice(i,0,[t,n])}function A9(e){let[,t,n]=e;const i=g$(w9,this,E9).call(this,t);for(let r=i;r<v$(C9,this).length;r++){const[e,i]=v$(C9,this)[r];if(e!==t)break;if(e===t&&i===n)return void v$(C9,this).splice(r,1)}for(let r=i-1;r>=0;r--){const[e,i]=v$(C9,this)[r];if(e!==t)break;if(e===t&&i===n)return void v$(C9,this).splice(r,1)}}function T9(e){const[t,n,i]=e,r=[[t,n,i]],s=g$(w9,this,E9).call(this,i);for(let o=0;o<s;o++){const[e,n]=v$(C9,this)[o];for(let i=0,s=r.length;i<s;i++){const[,o,a]=r[i];if(!(n<=o||a<=e))if(o>=e)if(a>n)r[i][1]=n;else{if(1===s)return[];r.splice(i,1),i--,s--}else r[i][2]=e,a>n&&r.push([t,n,a])}}return r}class _9{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof iee}}var R9=new WeakMap,D9=new WeakMap;class M9 extends _9{constructor(e,t){super(),m$(this,R9,void 0),m$(this,D9,void 0),y$(D9,this,e),y$(R9,this,t)}toSVGPath(){const e=[];for(const t of v$(D9,this)){let[n,i]=t;e.push("M".concat(n," ").concat(i));for(let r=2;r<t.length;r+=2){const s=t[r],o=t[r+1];s===n?(e.push("V".concat(o)),i=o):o===i&&(e.push("H".concat(s)),n=s)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,i,r,s]=e;const o=[],a=r-n,l=s-i;for(const c of v$(D9,this)){const e=new Array(c.length);for(let t=0;t<c.length;t+=2)e[t]=n+c[t]*a,e[t+1]=s-c[t+1]*l;o.push(e)}return o}get box(){return v$(R9,this)}}var P9=new WeakMap,I9=new WeakMap,N9=new WeakMap,k9=new WeakMap,O9=new WeakMap,L9=new WeakMap,F9=new WeakMap,B9=new WeakMap,V9=new WeakMap,G9=new WeakMap,H9=new WeakMap,W9=new WeakMap,j9=new WeakMap,U9=new WeakSet;class z9{constructor(e,t,n,i,r){let{x:s,y:o}=e,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;p$(this,U9),m$(this,P9,void 0),m$(this,I9,[]),m$(this,N9,void 0),m$(this,k9,void 0),m$(this,O9,[]),m$(this,L9,new Float64Array(18)),m$(this,F9,void 0),m$(this,B9,void 0),m$(this,V9,void 0),m$(this,G9,void 0),m$(this,H9,void 0),m$(this,W9,void 0),m$(this,j9,[]),y$(P9,this,t),y$(W9,this,i*n),y$(k9,this,r),v$(L9,this).set([NaN,NaN,NaN,NaN,s,o],6),y$(N9,this,a),y$(G9,this,q9._*n),y$(V9,this,K9._*n),y$(H9,this,n),v$(j9,this).push(s,o)}get free(){return!0}isEmpty(){return isNaN(v$(L9,this)[8])}add(e){var t;let{x:n,y:i}=e;y$(F9,this,n),y$(B9,this,i);const[r,s,o,a]=v$(P9,this);let[l,c,u,d]=v$(L9,this).subarray(8,12);const h=n-u,p=i-d,g=Math.hypot(h,p);if(g<v$(V9,this))return!1;const f=g-v$(G9,this),m=f/g,v=m*h,y=m*p;let C=l,w=c;l=u,c=d,u+=v,d+=y,null===(t=v$(j9,this))||void 0===t||t.push(n,i);const b=v/f,S=-y/f*v$(W9,this),E=b*v$(W9,this);if(v$(L9,this).set(v$(L9,this).subarray(2,8),0),v$(L9,this).set([u+S,d+E],4),v$(L9,this).set(v$(L9,this).subarray(14,18),12),v$(L9,this).set([u-S,d-E],16),isNaN(v$(L9,this)[6]))return 0===v$(O9,this).length&&(v$(L9,this).set([l+S,c+E],2),v$(O9,this).push(NaN,NaN,NaN,NaN,(l+S-r)/o,(c+E-s)/a),v$(L9,this).set([l-S,c-E],14),v$(I9,this).push(NaN,NaN,NaN,NaN,(l-S-r)/o,(c-E-s)/a)),v$(L9,this).set([C,w,l,c,u,d],6),!this.isEmpty();v$(L9,this).set([C,w,l,c,u,d],6);return Math.abs(Math.atan2(w-c,C-l)-Math.atan2(y,v))<Math.PI/2?([l,c,u,d]=v$(L9,this).subarray(2,6),v$(O9,this).push(NaN,NaN,NaN,NaN,((l+u)/2-r)/o,((c+d)/2-s)/a),[l,c,C,w]=v$(L9,this).subarray(14,18),v$(I9,this).push(NaN,NaN,NaN,NaN,((C+l)/2-r)/o,((w+c)/2-s)/a),!0):([C,w,l,c,u,d]=v$(L9,this).subarray(0,6),v$(O9,this).push(((C+5*l)/6-r)/o,((w+5*c)/6-s)/a,((5*l+u)/6-r)/o,((5*c+d)/6-s)/a,((l+u)/2-r)/o,((c+d)/2-s)/a),[u,d,l,c,C,w]=v$(L9,this).subarray(12,18),v$(I9,this).push(((C+5*l)/6-r)/o,((w+5*c)/6-s)/a,((5*l+u)/6-r)/o,((5*c+d)/6-s)/a,((l+u)/2-r)/o,((c+d)/2-s)/a),!0)}toSVGPath(){if(this.isEmpty())return"";const e=v$(O9,this),t=v$(I9,this),n=v$(L9,this).subarray(4,6),i=v$(L9,this).subarray(16,18),[r,s,o,a]=v$(P9,this),[l,c,u,d]=g$(U9,this,Y9).call(this);if(isNaN(v$(L9,this)[6])&&!this.isEmpty())return"M".concat((v$(L9,this)[2]-r)/o," ").concat((v$(L9,this)[3]-s)/a," L").concat((v$(L9,this)[4]-r)/o," ").concat((v$(L9,this)[5]-s)/a," L").concat(l," ").concat(c," L").concat(u," ").concat(d," L").concat((v$(L9,this)[16]-r)/o," ").concat((v$(L9,this)[17]-s)/a," L").concat((v$(L9,this)[14]-r)/o," ").concat((v$(L9,this)[15]-s)/a," Z");const h=[];h.push("M".concat(e[4]," ").concat(e[5]));for(let p=6;p<e.length;p+=6)isNaN(e[p])?h.push("L".concat(e[p+4]," ").concat(e[p+5])):h.push("C".concat(e[p]," ").concat(e[p+1]," ").concat(e[p+2]," ").concat(e[p+3]," ").concat(e[p+4]," ").concat(e[p+5]));h.push("L".concat((n[0]-r)/o," ").concat((n[1]-s)/a," L").concat(l," ").concat(c," L").concat(u," ").concat(d," L").concat((i[0]-r)/o," ").concat((i[1]-s)/a));for(let p=t.length-6;p>=6;p-=6)isNaN(t[p])?h.push("L".concat(t[p+4]," ").concat(t[p+5])):h.push("C".concat(t[p]," ").concat(t[p+1]," ").concat(t[p+2]," ").concat(t[p+3]," ").concat(t[p+4]," ").concat(t[p+5]));return h.push("L".concat(t[4]," ").concat(t[5]," Z")),h.join(" ")}getOutlines(){var e,t;const n=v$(O9,this),i=v$(I9,this),r=v$(L9,this),s=r.subarray(4,6),o=r.subarray(16,18),[a,l,c,u]=v$(P9,this),d=new Float64Array((null!==(e=null===(t=v$(j9,this))||void 0===t?void 0:t.length)&&void 0!==e?e:0)+2);for(let y=0,C=d.length-2;y<C;y+=2)d[y]=(v$(j9,this)[y]-a)/c,d[y+1]=(v$(j9,this)[y+1]-l)/u;d[d.length-2]=(v$(F9,this)-a)/c,d[d.length-1]=(v$(B9,this)-l)/u;const[h,p,g,f]=g$(U9,this,Y9).call(this);if(isNaN(r[6])&&!this.isEmpty()){const e=new Float64Array(36);return e.set([NaN,NaN,NaN,NaN,(r[2]-a)/c,(r[3]-l)/u,NaN,NaN,NaN,NaN,(r[4]-a)/c,(r[5]-l)/u,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,g,f,NaN,NaN,NaN,NaN,(r[16]-a)/c,(r[17]-l)/u,NaN,NaN,NaN,NaN,(r[14]-a)/c,(r[15]-l)/u],0),new iee(e,d,v$(P9,this),v$(H9,this),v$(N9,this),v$(k9,this))}const m=new Float64Array(v$(O9,this).length+24+v$(I9,this).length);let v=n.length;for(let y=0;y<v;y+=2)isNaN(n[y])?m[y]=m[y+1]=NaN:(m[y]=n[y],m[y+1]=n[y+1]);m.set([NaN,NaN,NaN,NaN,(s[0]-a)/c,(s[1]-l)/u,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,g,f,NaN,NaN,NaN,NaN,(o[0]-a)/c,(o[1]-l)/u],v),v+=24;for(let y=i.length-6;y>=6;y-=6)for(let e=0;e<6;e+=2)isNaN(i[y+e])?(m[v]=m[v+1]=NaN,v+=2):(m[v]=i[y+e],m[v+1]=i[y+e+1],v+=2);return m.set([NaN,NaN,NaN,NaN,i[4],i[5]],v),new iee(m,d,v$(P9,this),v$(H9,this),v$(N9,this),v$(k9,this))}}function Y9(){const e=v$(L9,this).subarray(4,6),t=v$(L9,this).subarray(16,18),[n,i,r,s]=v$(P9,this);return[(v$(F9,this)+(e[0]-t[0])/2-n)/r,(v$(B9,this)+(e[1]-t[1])/2-i)/s,(v$(F9,this)+(t[0]-e[0])/2-n)/r,(v$(B9,this)+(t[1]-e[1])/2-i)/s]}var q9={_:8},K9={_:q9._+2},X9=new WeakMap,Q9=new WeakMap,Z9=new WeakMap,$9=new WeakMap,J9=new WeakMap,eee=new WeakMap,tee=new WeakMap,nee=new WeakSet;class iee extends _9{constructor(e,t,n,i,r,s){super(),p$(this,nee),m$(this,X9,void 0),m$(this,Q9,null),m$(this,Z9,void 0),m$(this,$9,void 0),m$(this,J9,void 0),m$(this,eee,void 0),m$(this,tee,void 0),y$(tee,this,e),y$(J9,this,t),y$(X9,this,n),y$(eee,this,i),y$(Z9,this,r),y$($9,this,s),g$(nee,this,oee).call(this,s);const{x:o,y:a,width:l,height:c}=v$(Q9,this);for(let u=0,d=e.length;u<d;u+=2)e[u]=(e[u]-o)/l,e[u+1]=(e[u+1]-a)/c;for(let u=0,d=t.length;u<d;u+=2)t[u]=(t[u]-o)/l,t[u+1]=(t[u+1]-a)/c}toSVGPath(){const e=["M".concat(v$(tee,this)[4]," ").concat(v$(tee,this)[5])];for(let t=6,n=v$(tee,this).length;t<n;t+=6)isNaN(v$(tee,this)[t])?e.push("L".concat(v$(tee,this)[t+4]," ").concat(v$(tee,this)[t+5])):e.push("C".concat(v$(tee,this)[t]," ").concat(v$(tee,this)[t+1]," ").concat(v$(tee,this)[t+2]," ").concat(v$(tee,this)[t+3]," ").concat(v$(tee,this)[t+4]," ").concat(v$(tee,this)[t+5]));return e.push("Z"),e.join(" ")}serialize(e,t){let[n,i,r,s]=e;const o=r-n,a=s-i;let l,c;switch(t){case 0:l=g$(nee,this,ree).call(this,v$(tee,this),n,s,o,-a),c=g$(nee,this,ree).call(this,v$(J9,this),n,s,o,-a);break;case 90:l=g$(nee,this,see).call(this,v$(tee,this),n,i,o,a),c=g$(nee,this,see).call(this,v$(J9,this),n,i,o,a);break;case 180:l=g$(nee,this,ree).call(this,v$(tee,this),r,i,-o,a),c=g$(nee,this,ree).call(this,v$(J9,this),r,i,-o,a);break;case 270:l=g$(nee,this,see).call(this,v$(tee,this),r,s,-o,-a),c=g$(nee,this,see).call(this,v$(J9,this),r,s,-o,-a)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return v$(Q9,this)}getNewOutline(e,t){const{x:n,y:i,width:r,height:s}=v$(Q9,this),[o,a,l,c]=v$(X9,this),u=r*l,d=s*c,h=n*l+o,p=i*c+a,g=new z9({x:v$(J9,this)[0]*u+h,y:v$(J9,this)[1]*d+p},v$(X9,this),v$(eee,this),e,v$($9,this),null!==t&&void 0!==t?t:v$(Z9,this));for(let f=2;f<v$(J9,this).length;f+=2)g.add({x:v$(J9,this)[f]*u+h,y:v$(J9,this)[f+1]*d+p});return g.getOutlines()}}function ree(e,t,n,i,r){const s=new Float64Array(e.length);for(let o=0,a=e.length;o<a;o+=2)s[o]=t+e[o]*i,s[o+1]=n+e[o+1]*r;return s}function see(e,t,n,i,r){const s=new Float64Array(e.length);for(let o=0,a=e.length;o<a;o+=2)s[o]=t+e[o+1]*i,s[o+1]=n+e[o]*r;return s}function oee(e){const t=v$(tee,this);let n=t[4],i=t[5],r=n,s=i,o=n,a=i,l=n,c=i;const u=e?Math.max:Math.min;for(let f=6,m=t.length;f<m;f+=6){if(isNaN(t[f]))r=Math.min(r,t[f+4]),s=Math.min(s,t[f+5]),o=Math.max(o,t[f+4]),a=Math.max(a,t[f+5]),c<t[f+5]?(l=t[f+4],c=t[f+5]):c===t[f+5]&&(l=u(l,t[f+4]));else{const e=BJ.bezierBoundingBox(n,i,...t.slice(f,f+6));r=Math.min(r,e[0]),s=Math.min(s,e[1]),o=Math.max(o,e[2]),a=Math.max(a,e[3]),c<e[3]?(l=e[2],c=e[3]):c===e[3]&&(l=u(l,e[2]))}n=t[f+4],i=t[f+5]}const d=r-v$(Z9,this),h=s-v$(Z9,this),p=o-r+2*v$(Z9,this),g=a-s+2*v$(Z9,this);y$(Q9,this,{x:d,y:h,width:p,height:g,lastPoint:[l,c]})}var aee=new WeakMap,lee=new WeakMap,cee=new WeakMap,uee=new WeakMap,dee=new WeakMap,hee=new WeakMap,pee=new WeakMap,gee=new WeakMap,fee=new WeakMap,mee=new WeakMap,vee=new WeakMap,yee=new WeakMap,Cee=new WeakSet;class wee{static get _keyboardManager(){return xJ(this,"_keyboardManager",new R1([[["Escape","mac+Escape"],wee.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],wee.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],wee.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],wee.prototype._moveToPrevious],[["Home","mac+Home"],wee.prototype._moveToBeginning],[["End","mac+End"],wee.prototype._moveToEnd]]))}constructor(e){var t;let{editor:n=null,uiManager:i=null}=e;p$(this,Cee),m$(this,aee,g$(Cee,this,Eee).bind(this)),m$(this,lee,g$(Cee,this,Aee).bind(this)),m$(this,cee,null),m$(this,uee,null),m$(this,dee,void 0),m$(this,hee,null),m$(this,pee,!1),m$(this,gee,!1),m$(this,fee,null),m$(this,mee,void 0),m$(this,vee,null),m$(this,yee,void 0),n?(y$(gee,this,!1),y$(yee,this,k$.HIGHLIGHT_COLOR),y$(fee,this,n)):(y$(gee,this,!0),y$(yee,this,k$.HIGHLIGHT_DEFAULT_COLOR)),y$(vee,this,(null===n||void 0===n?void 0:n._uiManager)||i),y$(mee,this,v$(vee,this)._eventBus),y$(dee,this,(null===n||void 0===n?void 0:n.color)||(null===(t=v$(vee,this))||void 0===t?void 0:t.highlightColors.values().next().value)||"#FFFF98")}renderButton(){const e=y$(cee,this,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=v$(vee,this)._signal;e.addEventListener("click",g$(Cee,this,xee).bind(this),{signal:t}),e.addEventListener("keydown",v$(aee,this),{signal:t});const n=y$(uee,this,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=v$(dee,this),e.append(n),e}renderMainDropdown(){const e=y$(hee,this,g$(Cee,this,bee).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===v$(cee,this))return void g$(Cee,this,xee).call(this,e);const t=e.target.getAttribute("data-color");t&&g$(Cee,this,See).call(this,t,e)}_moveToNext(e){var t,n;f$(Cee,this,Tee)?e.target!==v$(cee,this)?null===(t=e.target.nextSibling)||void 0===t||t.focus():null===(n=v$(hee,this).firstChild)||void 0===n||n.focus():g$(Cee,this,xee).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null===(t=v$(hee,this))||void 0===t?void 0:t.firstChild)&&e.target!==v$(cee,this)?(f$(Cee,this,Tee)||g$(Cee,this,xee).call(this,e),null===(n=e.target.previousSibling)||void 0===n||n.focus()):f$(Cee,this,Tee)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;f$(Cee,this,Tee)?null===(t=v$(hee,this).firstChild)||void 0===t||t.focus():g$(Cee,this,xee).call(this,e)}_moveToEnd(e){var t;f$(Cee,this,Tee)?null===(t=v$(hee,this).lastChild)||void 0===t||t.focus():g$(Cee,this,xee).call(this,e)}hideDropdown(){var e;null===(e=v$(hee,this))||void 0===e||e.classList.add("hidden"),window.removeEventListener("pointerdown",v$(lee,this))}_hideDropdownFromKeyboard(){var e;v$(gee,this)||(f$(Cee,this,Tee)?(this.hideDropdown(),v$(cee,this).focus({preventScroll:!0,focusVisible:v$(pee,this)})):null===(e=v$(fee,this))||void 0===e||e.unselect())}updateColor(e){if(v$(uee,this)&&(v$(uee,this).style.backgroundColor=e),!v$(hee,this))return;const t=v$(vee,this).highlightColors.values();for(const n of v$(hee,this).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;null===(e=v$(cee,this))||void 0===e||e.remove(),y$(cee,this,null),y$(uee,this,null),null===(t=v$(hee,this))||void 0===t||t.remove(),y$(hee,this,null)}}function bee(){const e=document.createElement("div"),t=v$(vee,this)._signal;e.addEventListener("contextmenu",B0,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of v$(vee,this).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-".concat(n));const s=document.createElement("span");r.append(s),s.className="swatch",s.style.backgroundColor=i,r.setAttribute("aria-selected",i===v$(dee,this)),r.addEventListener("click",g$(Cee,this,See).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",v$(aee,this),{signal:t}),e}function See(e,t){t.stopPropagation(),v$(mee,this).dispatch("switchannotationeditorparams",{source:this,type:v$(yee,this),value:e})}function Eee(e){n$._keyboardManager.exec(this,e)}function xee(e){if(f$(Cee,this,Tee))return void this.hideDropdown();if(y$(pee,this,0===e.detail),window.addEventListener("pointerdown",v$(lee,this),{signal:v$(vee,this)._signal}),v$(hee,this))return void v$(hee,this).classList.remove("hidden");const t=y$(hee,this,g$(Cee,this,bee).call(this));v$(cee,this).append(t)}function Aee(e){var t;null!==(t=v$(hee,this))&&void 0!==t&&t.contains(e.target)||this.hideDropdown()}function Tee(e){return v$(hee,e)&&!v$(hee,e).classList.contains("hidden")}n$=wee;var _ee=new WeakMap,Ree=new WeakMap,Dee=new WeakMap,Mee=new WeakMap,Pee=new WeakMap,Iee=new WeakMap,Nee=new WeakMap,kee=new WeakMap,Oee=new WeakMap,Lee=new WeakMap,Fee=new WeakMap,Bee=new WeakMap,Vee=new WeakMap,Gee=new WeakMap,Hee=new WeakMap,Wee=new WeakMap,jee=new WeakMap,Uee=new WeakMap,zee=new WeakMap,Yee=new WeakSet;class qee extends x3{static get _keyboardManager(){const e=qee.prototype;return xJ(this,"_keyboardManager",new R1([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),p$(this,Yee),m$(this,_ee,null),m$(this,Ree,0),m$(this,Dee,void 0),m$(this,Mee,null),m$(this,Pee,null),m$(this,Iee,null),m$(this,Nee,null),m$(this,kee,0),m$(this,Oee,null),m$(this,Lee,null),m$(this,Fee,null),m$(this,Bee,!1),m$(this,Vee,g$(Yee,this,nte).bind(this)),m$(this,Gee,null),m$(this,Hee,void 0),m$(this,Wee,null),m$(this,jee,""),m$(this,Uee,void 0),m$(this,zee,""),this.color=e.color||qee._defaultColor,y$(Uee,this,e.thickness||qee._defaultThickness),y$(Hee,this,e.opacity||qee._defaultOpacity),y$(Dee,this,e.boxes||null),y$(zee,this,e.methodOfCreation||""),y$(jee,this,e.text||""),this._isDraggable=!1,e.highlightId>-1?(y$(Bee,this,!0),g$(Yee,this,Xee).call(this,e),g$(Yee,this,ete).call(this)):(y$(_ee,this,e.anchorNode),y$(Ree,this,e.anchorOffset),y$(Nee,this,e.focusNode),y$(kee,this,e.focusOffset),g$(Yee,this,Kee).call(this),g$(Yee,this,ete).call(this),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:v$(Bee,this)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:v$(Uee,this),methodOfCreation:v$(zee,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;x3.initialize(e,t),qee._defaultColor||(qee._defaultColor=(null===(n=t.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case k$.HIGHLIGHT_DEFAULT_COLOR:qee._defaultColor=t;break;case k$.HIGHLIGHT_THICKNESS:qee._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return v$(Gee,this)}updateParams(e,t){switch(e){case k$.HIGHLIGHT_COLOR:g$(Yee,this,Qee).call(this,t);break;case k$.HIGHLIGHT_THICKNESS:g$(Yee,this,Zee).call(this,t)}}static get defaultPropertiesToUpdate(){return[[k$.HIGHLIGHT_DEFAULT_COLOR,qee._defaultColor],[k$.HIGHLIGHT_THICKNESS,qee._defaultThickness]]}get propertiesToUpdate(){return[[k$.HIGHLIGHT_COLOR,this.color||qee._defaultColor],[k$.HIGHLIGHT_THICKNESS,v$(Uee,this)||qee._defaultThickness],[k$.HIGHLIGHT_FREE,v$(Bee,this)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(y$(Pee,this,new wee({editor:this})),e.addColorPicker(v$(Pee,this))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(g$(Yee,this,rte).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,g$(Yee,this,rte).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){g$(Yee,this,Jee).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(g$(Yee,this,ete).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)g$(Yee,this,Jee).call(this);else if(e){var n;g$(Yee,this,ete).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){const{drawLayer:t}=this.parent;let n;v$(Bee,this)?(e=(e-this.rotation+360)%360,n=tte.call(qee,v$(Lee,this).box,e)):n=tte.call(qee,this,e),t.rotate(v$(Fee,this),e),t.rotate(v$(Wee,this),e),t.updateBox(v$(Fee,this),n),t.updateBox(v$(Wee,this),tte.call(qee,v$(Iee,this).box,e))}render(){if(this.div)return this.div;const e=super.render();v$(jee,this)&&(e.setAttribute("aria-label",v$(jee,this)),e.setAttribute("role","mark")),v$(Bee,this)?e.classList.add("free"):this.div.addEventListener("keydown",v$(Vee,this),{signal:this._uiManager._signal});const t=y$(Oee,this,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=v$(Mee,this);const[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),p1(this,v$(Oee,this),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(v$(Wee,this),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(v$(Wee,this),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:g$(Yee,this,ite).call(this,!0);break;case 1:case 3:g$(Yee,this,ite).call(this,!1)}}select(){var e,t;super.select(),v$(Wee,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.removeClass(v$(Wee,this),"hovered"),null===(t=this.parent)||void 0===t||t.drawLayer.addClass(v$(Wee,this),"selected"))}unselect(){var e;super.unselect(),v$(Wee,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.removeClass(v$(Wee,this),"selected"),v$(Bee,this)||g$(Yee,this,ite).call(this,!1))}get _mustFixPosition(){return!v$(Bee,this)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.show(v$(Fee,this),e),this.parent.drawLayer.show(v$(Wee,this),e))}static startHighlighting(e,t,n){let{target:i,x:r,y:s}=n;const{x:o,y:a,width:l,height:c}=i.getBoundingClientRect(),u=t=>{g$(qee,this,ate).call(this,e,t)},d=e._signal,h={capture:!0,passive:!1,signal:d},p=e=>{e.preventDefault(),e.stopPropagation()},g=t=>{i.removeEventListener("pointermove",u),window.removeEventListener("blur",g),window.removeEventListener("pointerup",g),window.removeEventListener("pointerdown",p,h),window.removeEventListener("contextmenu",B0),g$(qee,this,lte).call(this,e,t)};window.addEventListener("blur",g,{signal:d}),window.addEventListener("pointerup",g,{signal:d}),window.addEventListener("pointerdown",p,h),window.addEventListener("contextmenu",B0,{signal:d}),i.addEventListener("pointermove",u,{signal:d}),this._freeHighlight=new z9({x:r,y:s},[o,a,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static deserialize(e,t,n){const i=super.deserialize(e,t,n),{rect:[r,s,o,a],color:l,quadPoints:c}=e;i.color=BJ.makeHexColor(...l),y$(Hee,i,e.opacity);const[u,d]=i.pageDimensions;i.width=(o-r)/u,i.height=(a-s)/d;const h=y$(Dee,i,[]);for(let p=0;p<c.length;p+=8)h.push({x:(c[4]-o)/u,y:(a-(1-c[p+5]))/d,width:(c[p+2]-c[p])/u,height:(c[p+5]-c[p+1])/d});return g$(Yee,i,Kee).call(i),i}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;const t=this.getRect(0,0),n=x3._colorManager.convert(this.color);return{annotationType:N$.HIGHLIGHT,color:n,opacity:v$(Hee,this),thickness:v$(Uee,this),quadPoints:g$(Yee,this,ste).call(this),outlines:g$(Yee,this,ote).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:g$(Yee,this,rte).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}}function Kee(){const e=new b9(v$(Dee,this),.001);y$(Lee,this,e.getOutlines()),({x:this.x,y:this.y,width:this.width,height:this.height}=v$(Lee,this).box);const t=new b9(v$(Dee,this),.0025,.001,"ltr"===this._uiManager.direction);y$(Iee,this,t.getOutlines());const{lastPoint:n}=v$(Iee,this).box;y$(Gee,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])}function Xee(e){let{highlightOutlines:t,highlightId:n,clipPathId:i}=e;y$(Lee,this,t);if(y$(Iee,this,t.getNewOutline(v$(Uee,this)/2+1.5,.0025)),n>=0)y$(Fee,this,n),y$(Mee,this,i),this.parent.drawLayer.finalizeLine(n,t),y$(Wee,this,this.parent.drawLayer.highlightOutline(v$(Iee,this)));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(v$(Fee,this),t),this.parent.drawLayer.updateBox(v$(Fee,this),tte.call(i$,v$(Lee,this).box,(e-this.rotation+360)%360)),this.parent.drawLayer.updateLine(v$(Wee,this),v$(Iee,this)),this.parent.drawLayer.updateBox(v$(Wee,this),tte.call(i$,v$(Iee,this).box,e))}const{x:r,y:s,width:o,height:a}=t.box;switch(this.rotation){case 0:this.x=r,this.y=s,this.width=o,this.height=a;break;case 90:{const[e,t]=this.parentDimensions;this.x=s,this.y=1-r,this.width=o*t/e,this.height=a*e/t;break}case 180:this.x=1-r,this.y=1-s,this.width=o,this.height=a;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-s,this.y=r,this.width=o*t/e,this.height=a*e/t;break}}const{lastPoint:l}=v$(Iee,this).box;y$(Gee,this,[(l[0]-r)/o,(l[1]-s)/a])}function Qee(e){const t=e=>{var t,n;this.color=e,null===(t=this.parent)||void 0===t||t.drawLayer.changeColor(v$(Fee,this),e),null===(n=v$(Pee,this))||void 0===n||n.updateColor(e)},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:k$.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}function Zee(e){const t=v$(Uee,this),n=e=>{y$(Uee,this,e),g$(Yee,this,$ee).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:k$.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function $ee(e){if(!v$(Bee,this))return;g$(Yee,this,Xee).call(this,{highlightOutlines:v$(Lee,this).getNewOutline(e/2)}),this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}function Jee(){null!==v$(Fee,this)&&this.parent&&(this.parent.drawLayer.remove(v$(Fee,this)),y$(Fee,this,null),this.parent.drawLayer.remove(v$(Wee,this)),y$(Wee,this,null))}function ete(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===v$(Fee,this)&&(({id:d$(y$,[Fee,this])._,clipPathId:d$(y$,[Mee,this])._}=e.drawLayer.highlight(v$(Lee,this),this.color,v$(Hee,this))),y$(Wee,this,e.drawLayer.highlightOutline(v$(Iee,this))),v$(Oee,this)&&(v$(Oee,this).style.clipPath=v$(Mee,this)))}function tte(e,t){let{x:n,y:i,width:r,height:s}=e;switch(t){case 90:return{x:1-i-s,y:n,width:s,height:r};case 180:return{x:1-n-r,y:1-i-s,width:r,height:s};case 270:return{x:i,y:1-n-r,width:s,height:r}}return{x:n,y:i,width:r,height:s}}function nte(e){i$._keyboardManager.exec(this,e)}function ite(e){if(!v$(_ee,this))return;const t=window.getSelection();e?t.setPosition(v$(_ee,this),v$(Ree,this)):t.setPosition(v$(Nee,this),v$(kee,this))}function rte(){return v$(Bee,this)?this.rotation:0}function ste(){if(v$(Bee,this))return null;const[e,t]=this.pageDimensions,n=v$(Dee,this),i=new Float32Array(8*n.length);let r=0;for(const{x:s,y:o,width:a,height:l}of n){const n=s*e,c=(1-o-l)*t;i[r]=i[r+4]=n,i[r+1]=i[r+3]=c,i[r+2]=i[r+6]=n+a*e,i[r+5]=i[r+7]=c+l*t,r+=8}return i}function ote(e){return v$(Lee,this).serialize(e,g$(Yee,this,rte).call(this))}function ate(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}function lte(e,t){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}i$=qee,An(qee,"_defaultColor",null),An(qee,"_defaultOpacity",1),An(qee,"_defaultThickness",12),An(qee,"_l10nPromise",void 0),An(qee,"_type","highlight"),An(qee,"_editorType",N$.HIGHLIGHT),An(qee,"_freeHighlightId",-1),An(qee,"_freeHighlight",null),An(qee,"_freeHighlightClipId","");var cte=new WeakMap,ute=new WeakMap,dte=new WeakMap,hte=new WeakMap,pte=new WeakMap,gte=new WeakMap,fte=new WeakMap,mte=new WeakMap,vte=new WeakMap,yte=new WeakMap,Cte=new WeakMap,wte=new WeakMap,bte=new WeakMap,Ste=new WeakMap,Ete=new WeakMap,xte=new WeakSet;class Ate extends x3{constructor(e){super({...e,name:"inkEditor"}),p$(this,xte),m$(this,cte,0),m$(this,ute,0),m$(this,dte,this.canvasPointermove.bind(this)),m$(this,hte,this.canvasPointerleave.bind(this)),m$(this,pte,this.canvasPointerup.bind(this)),m$(this,gte,this.canvasPointerdown.bind(this)),m$(this,fte,null),m$(this,mte,new Path2D),m$(this,vte,!1),m$(this,yte,!1),m$(this,Cte,!1),m$(this,wte,null),m$(this,bte,0),m$(this,Ste,0),m$(this,Ete,null),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){x3.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case k$.INK_THICKNESS:Ate._defaultThickness=t;break;case k$.INK_COLOR:Ate._defaultColor=t;break;case k$.INK_OPACITY:Ate._defaultOpacity=t/100}}updateParams(e,t){switch(e){case k$.INK_THICKNESS:g$(xte,this,Tte).call(this,t);break;case k$.INK_COLOR:g$(xte,this,_te).call(this,t);break;case k$.INK_OPACITY:g$(xte,this,Rte).call(this,t)}}static get defaultPropertiesToUpdate(){return[[k$.INK_THICKNESS,Ate._defaultThickness],[k$.INK_COLOR,Ate._defaultColor||x3._defaultLineColor],[k$.INK_OPACITY,Math.round(100*Ate._defaultOpacity)]]}get propertiesToUpdate(){var e;return[[k$.INK_THICKNESS,this.thickness||Ate._defaultThickness],[k$.INK_COLOR,this.color||Ate._defaultColor||x3._defaultLineColor],[k$.INK_OPACITY,Math.round(100*(null!==(e=this.opacity)&&void 0!==e?e:Ate._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(g$(xte,this,Gte).call(this),g$(xte,this,Hte).call(this)),this.isAttachedToDOM||(this.parent.add(this),g$(xte,this,Wte).call(this)),g$(xte,this,Zte).call(this)))}remove(){var e;null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,v$(fte,this)&&(clearTimeout(v$(fte,this)),y$(fte,this,null)),null===(e=v$(wte,this))||void 0===e||e.disconnect(),y$(wte,this,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,n=this.width*e,i=this.height*t;this.setDimensions(n,i)}enableEditMode(){v$(vte,this)||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",v$(gte,this),{signal:this._uiManager._signal}))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",v$(gte,this)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){v$(vte,this)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),y$(vte,this,!0),this.div.classList.add("disabled"),g$(xte,this,Zte).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){0===e.button&&this.isInEditMode()&&!v$(vte,this)&&(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),g$(xte,this,Pte).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),g$(xte,this,Ite).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),g$(xte,this,Vte).call(this,e)}canvasPointerleave(e){g$(xte,this,Vte).call(this,e)}get isResizable(){return!this.isEmpty()&&v$(vte,this)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,i,r,s]=g$(xte,this,Dte).call(this);if(this.setAt(n,i,0,0),this.setDims(r,s),g$(xte,this,Gte).call(this),this.width){const[n,i]=this.parentDimensions;this.setAspectRatio(this.width*n,this.height*i),this.setAt(e*n,t*i,this.width*n,this.height*i),y$(Cte,this,!0),g$(xte,this,Wte).call(this),this.setDims(this.width*n,this.height*i),g$(xte,this,Bte).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return g$(xte,this,Hte).call(this),this.div}setDimensions(e,t){const n=Math.round(e),i=Math.round(t);if(v$(bte,this)===n&&v$(Ste,this)===i)return;y$(bte,this,n),y$(Ste,this,i),this.canvas.style.visibility="hidden";const[r,s]=this.parentDimensions;this.width=e/r,this.height=t/s,this.fixAndSetPosition(),v$(vte,this)&&g$(xte,this,jte).call(this,e,t),g$(xte,this,Wte).call(this),g$(xte,this,Bte).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,t,n){if(e instanceof I7)return null;const i=super.deserialize(e,t,n);i.thickness=e.thickness,i.color=BJ.makeHexColor(...e.color),i.opacity=e.opacity;const[r,s]=i.pageDimensions,o=i.width*r,a=i.height*s,l=i.parentScale,c=e.thickness/2;y$(vte,i,!0),y$(bte,i,Math.round(o)),y$(Ste,i,Math.round(a));const{paths:u,rect:d,rotation:h}=e;for(let{bezier:g}of u){g=qte.call(Ate,g,d,h);const e=[];i.paths.push(e);let t=l*(g[0]-c),n=l*(g[1]-c);for(let i=2,s=g.length;i<s;i+=6){const r=l*(g[i]-c),s=l*(g[i+1]-c),o=l*(g[i+2]-c),a=l*(g[i+3]-c),u=l*(g[i+4]-c),d=l*(g[i+5]-c);e.push([[t,n],[r,s],[o,a],[u,d]]),t=u,n=d}const r=g$(Ate,this,zte).call(this,e);i.bezierPath2D.push(r)}const p=g$(xte,i,Xte).call(i);return y$(ute,i,Math.max(x3.MIN_SIZE,p[2]-p[0])),y$(cte,i,Math.max(x3.MIN_SIZE,p[3]-p[1])),g$(xte,i,jte).call(i,o,a),i}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=x3._colorManager.convert(this.ctx.strokeStyle);return{annotationType:N$.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:g$(xte,this,Kte).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}function Tte(e){const t=e=>{this.thickness=e,g$(xte,this,Zte).call(this)},n=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:k$.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function _te(e){const t=e=>{this.color=e,g$(xte,this,Bte).call(this)},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:k$.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Rte(e){const t=e=>{this.opacity=e,g$(xte,this,Bte).call(this)};e/=100;const n=this.opacity;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:k$.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function Dte(){const{parentRotation:e,parentDimensions:[t,n]}=this;switch(e){case 90:return[0,n,n,t];case 180:return[t,n,t,n];case 270:return[t,0,n,t];default:return[0,0,t,n]}}function Mte(){const{ctx:e,color:t,opacity:n,thickness:i,parentScale:r,scaleFactor:s}=this;e.lineWidth=i*r/s,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle="".concat(t).concat(function(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")}(n))}function Pte(e,t){const n=this._uiManager._signal;var i;(this.canvas.addEventListener("contextmenu",B0,{signal:n}),this.canvas.addEventListener("pointerleave",v$(hte,this),{signal:n}),this.canvas.addEventListener("pointermove",v$(dte,this),{signal:n}),this.canvas.addEventListener("pointerup",v$(pte,this),{signal:n}),this.canvas.removeEventListener("pointerdown",v$(gte,this)),this.isEditing=!0,v$(Cte,this))||(y$(Cte,this,!0),g$(xte,this,Wte).call(this),this.thickness||(this.thickness=r$._defaultThickness),this.color||(this.color=r$._defaultColor||x3._defaultLineColor),null!==(i=this.opacity)&&void 0!==i||(this.opacity=r$._defaultOpacity));this.currentPath.push([e,t]),y$(yte,this,!1),g$(xte,this,Mte).call(this),y$(Ete,this,(()=>{g$(xte,this,Ote).call(this),v$(Ete,this)&&window.requestAnimationFrame(v$(Ete,this))})),window.requestAnimationFrame(v$(Ete,this))}function Ite(e,t){const[n,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===n&&t===i)return;const r=this.currentPath;let s=v$(mte,this);if(r.push([e,t]),y$(yte,this,!0),r.length<=2)return s.moveTo(...r[0]),void s.lineTo(e,t);3===r.length&&(y$(mte,this,s=new Path2D),s.moveTo(...r[0])),g$(xte,this,Lte).call(this,s,...r.at(-3),...r.at(-2),e,t)}function Nte(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);v$(mte,this).lineTo(...e)}function kte(e,t){let n;if(y$(Ete,this,null),e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),g$(xte,this,Ite).call(this,e,t),g$(xte,this,Nte).call(this),1!==this.currentPath.length)n=g$(xte,this,Fte).call(this);else{const i=[e,t];n=[[i,i.slice(),i.slice(),i]]}const i=v$(mte,this),r=this.currentPath;this.currentPath=[],y$(mte,this,new Path2D);this.addCommands({cmd:()=>{this.allRawPaths.push(r),this.paths.push(n),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(g$(xte,this,Gte).call(this),g$(xte,this,Hte).call(this)),g$(xte,this,Zte).call(this))},mustExec:!0})}function Ote(){if(!v$(yte,this))return;y$(yte,this,!1);const e=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),n=t.map((e=>e[0])),i=t.map((e=>e[1])),{ctx:r}=(Math.min(...n),Math.max(...n),Math.min(...i),Math.max(...i),this);r.save(),r.clearRect(0,0,this.canvas.width,this.canvas.height);for(const s of this.bezierPath2D)r.stroke(s);r.stroke(v$(mte,this)),r.restore()}function Lte(e,t,n,i,r,s,o){const a=(t+i)/2,l=(n+r)/2,c=(i+s)/2,u=(r+o)/2;e.bezierCurveTo(a+2*(i-a)/3,l+2*(r-l)/3,c+2*(i-c)/3,u+2*(r-u)/3,c,u)}function Fte(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let n,[i,r]=e[0];for(n=1;n<e.length-2;n++){const[s,o]=e[n],[a,l]=e[n+1],c=(s+a)/2,u=(o+l)/2,d=[i+2*(s-i)/3,r+2*(o-r)/3],h=[c+2*(s-c)/3,u+2*(o-u)/3];t.push([[i,r],d,h,[c,u]]),[i,r]=[c,u]}const[s,o]=e[n],[a,l]=e[n+1],c=[i+2*(s-i)/3,r+2*(o-r)/3],u=[a+2*(s-a)/3,l+2*(o-l)/3];return t.push([[i,r],c,u,[a,l]]),t}function Bte(){if(this.isEmpty())return void g$(xte,this,Ute).call(this);g$(xte,this,Mte).call(this);const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),g$(xte,this,Ute).call(this);for(const n of this.bezierPath2D)t.stroke(n)}function Vte(e){this.canvas.removeEventListener("pointerleave",v$(hte,this)),this.canvas.removeEventListener("pointermove",v$(dte,this)),this.canvas.removeEventListener("pointerup",v$(pte,this)),this.canvas.addEventListener("pointerdown",v$(gte,this),{signal:this._uiManager._signal}),v$(fte,this)&&clearTimeout(v$(fte,this)),y$(fte,this,setTimeout((()=>{y$(fte,this,null),this.canvas.removeEventListener("contextmenu",B0)}),10)),g$(xte,this,kte).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}function Gte(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function Hte(){y$(wte,this,new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}))),v$(wte,this).observe(this.div),this._uiManager._signal.addEventListener("abort",(()=>{var e;null===(e=v$(wte,this))||void 0===e||e.disconnect(),y$(wte,this,null)}),{once:!0})}function Wte(){if(!v$(Cte,this))return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),g$(xte,this,Ute).call(this)}function jte(e,t){const n=g$(xte,this,Qte).call(this),i=(e-n)/v$(ute,this),r=(t-n)/v$(cte,this);this.scaleFactor=Math.min(i,r)}function Ute(){const e=g$(xte,this,Qte).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}function zte(e){const t=new Path2D;for(let n=0,i=e.length;n<i;n++){const[i,r,s,o]=e[n];0===n&&t.moveTo(...i),t.bezierCurveTo(r[0],r[1],s[0],s[1],o[0],o[1])}return t}function Yte(e,t,n){const[i,r,s,o]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]+=i,e[t+1]=o-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]+i,e[t+1]=n+r}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=s-e[t],e[t+1]+=r;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=s-e[t+1],e[t+1]=o-n}break;default:throw new Error("Invalid rotation")}return e}function qte(e,t,n){const[i,r,s,o]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]-=i,e[t+1]=o-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]-r,e[t+1]=n-i}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=s-e[t],e[t+1]-=r;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=o-e[t+1],e[t+1]=s-n}break;default:throw new Error("Invalid rotation")}return e}function Kte(e,t,n,i){const r=[],s=this.thickness/2,o=e*t+s,a=e*n+s;for(const l of this.paths){const t=[],n=[];for(let i=0,r=l.length;i<r;i++){const[s,c,u,d]=l[i];if(s[0]===d[0]&&s[1]===d[1]&&1===r){const i=e*s[0]+o,r=e*s[1]+a;t.push(i,r),n.push(i,r);break}const h=e*s[0]+o,p=e*s[1]+a,g=e*c[0]+o,f=e*c[1]+a,m=e*u[0]+o,v=e*u[1]+a,y=e*d[0]+o,C=e*d[1]+a;0===i&&(t.push(h,p),n.push(h,p)),t.push(g,f,m,v,y,C),n.push(g,f),i===r-1&&n.push(y,C)}r.push({bezier:Yte.call(r$,t,i,this.rotation),points:Yte.call(r$,n,i,this.rotation)})}return r}function Xte(){let e=1/0,t=-1/0,n=1/0,i=-1/0;for(const r of this.paths)for(const[s,o,a,l]of r){const r=BJ.bezierBoundingBox(...s,...o,...a,...l);e=Math.min(e,r[0]),n=Math.min(n,r[1]),t=Math.max(t,r[2]),i=Math.max(i,r[3])}return[e,n,t,i]}function Qte(){return v$(vte,this)?Math.ceil(this.thickness*this.parentScale):0}function Zte(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!v$(vte,this))return void g$(xte,this,Bte).call(this);const t=g$(xte,this,Xte).call(this),n=g$(xte,this,Qte).call(this);y$(ute,this,Math.max(x3.MIN_SIZE,t[2]-t[0])),y$(cte,this,Math.max(x3.MIN_SIZE,t[3]-t[1]));const i=Math.ceil(n+v$(ute,this)*this.scaleFactor),r=Math.ceil(n+v$(cte,this)*this.scaleFactor),[s,o]=this.parentDimensions;this.width=i/s,this.height=r/o,this.setAspectRatio(i,r);const a=this.translationX,l=this.translationY;this.translationX=-t[0],this.translationY=-t[1],g$(xte,this,Wte).call(this),g$(xte,this,Bte).call(this),y$(bte,this,i),y$(Ste,this,r),this.setDims(i,r);const c=e?n/this.scaleFactor/2:0;this.translate(a-this.translationX-c,l-this.translationY-c)}r$=Ate,An(Ate,"_defaultColor",null),An(Ate,"_defaultOpacity",1),An(Ate,"_defaultThickness",1),An(Ate,"_type","ink"),An(Ate,"_editorType",N$.INK);var $te=new WeakMap,Jte=new WeakMap,ene=new WeakMap,tne=new WeakMap,nne=new WeakMap,ine=new WeakMap,rne=new WeakMap,sne=new WeakMap,one=new WeakMap,ane=new WeakMap,lne=new WeakMap,cne=new WeakSet;class une extends x3{constructor(e){super({...e,name:"stampEditor"}),p$(this,cne),m$(this,$te,null),m$(this,Jte,null),m$(this,ene,null),m$(this,tne,null),m$(this,nne,null),m$(this,ine,""),m$(this,rne,null),m$(this,sne,null),m$(this,one,null),m$(this,ane,!1),m$(this,lne,!1),y$(tne,this,e.bitmapUrl),y$(nne,this,e.bitmapFile)}static initialize(e,t){x3.initialize(e,t)}static get supportedTypes(){return xJ(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((e=>"image/".concat(e))))}static get supportedTypesStr(){return xJ(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(N$.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,t;v$(Jte,this)&&(y$($te,this,null),this._uiManager.imageManager.deleteId(v$(Jte,this)),null===(e=v$(rne,this))||void 0===e||e.remove(),y$(rne,this,null),null===(t=v$(sne,this))||void 0===t||t.disconnect(),y$(sne,this,null),v$(one,this)&&(clearTimeout(v$(one,this)),y$(one,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(v$(Jte,this)&&null===v$(rne,this)&&g$(cne,this,pne).call(this),this.isAttachedToDOM||this.parent.add(this))):v$(Jte,this)&&g$(cne,this,pne).call(this)}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(v$(ene,this)||v$($te,this)||v$(tne,this)||v$(nne,this)||v$(Jte,this))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),v$($te,this)?g$(cne,this,gne).call(this):g$(cne,this,pne).call(this),this.width){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i)}return this.div}getImageForAltText(){return v$(rne,this)}static deserialize(e,t,n){if(e instanceof F7)return null;const i=super.deserialize(e,t,n),{rect:r,bitmapUrl:s,bitmapId:o,isSvg:a,accessibilityData:l}=e;o&&n.imageManager.isValidId(o)?y$(Jte,i,o):y$(tne,i,s),y$(ane,i,a);const[c,u]=i.pageDimensions;return i.width=(r[2]-r[0])/c,i.height=(r[3]-r[1])/u,l&&(i.altTextData=l),i}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;const n={annotationType:N$.STAMP,bitmapId:v$(Jte,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:v$(ane,this),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=g$(cne,this,yne).call(this,!0),n.accessibilityData=this.altTextData,n;const{decorative:i,altText:r}=this.altTextData;if(!i&&r&&(n.accessibilityData={type:"Figure",alt:r}),null===t)return n;t.stamps||(t.stamps=new Map);const s=v$(ane,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(v$(Jte,this))){if(v$(ane,this)){const e=t.stamps.get(v$(Jte,this));s>e.area&&(e.area=s,e.serialized.bitmap.close(),e.serialized.bitmap=g$(cne,this,yne).call(this,!1))}}else t.stamps.set(v$(Jte,this),{area:s,serialized:n}),n.bitmap=g$(cne,this,yne).call(this,!1);return n}}function dne(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(y$($te,this,e.bitmap),t||(y$(Jte,this,e.id),y$(ane,this,e.isSvg)),e.file&&y$(ine,this,e.file.name),g$(cne,this,gne).call(this)):this.remove()}function hne(){y$(ene,this,null),this._uiManager.enableWaiting(!1),v$(rne,this)&&this.div.focus()}function pne(){if(v$(Jte,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(v$(Jte,this)).then((e=>g$(cne,this,dne).call(this,e,!0))).finally((()=>g$(cne,this,hne).call(this)));if(v$(tne,this)){const e=v$(tne,this);return y$(tne,this,null),this._uiManager.enableWaiting(!0),void y$(ene,this,this._uiManager.imageManager.getFromUrl(e).then((e=>g$(cne,this,dne).call(this,e))).finally((()=>g$(cne,this,hne).call(this))))}if(v$(nne,this)){const e=v$(nne,this);return y$(nne,this,null),this._uiManager.enableWaiting(!0),void y$(ene,this,this._uiManager.imageManager.getFromFile(e).then((e=>g$(cne,this,dne).call(this,e))).finally((()=>g$(cne,this,hne).call(this))))}const e=document.createElement("input");e.type="file",e.accept=s$.supportedTypesStr;const t=this._uiManager._signal;y$(ene,this,new Promise((n=>{e.addEventListener("change",(async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);g$(cne,this,dne).call(this,t)}else this.remove();n()}),{signal:t}),e.addEventListener("cancel",(()=>{this.remove(),n()}),{signal:t})})).finally((()=>g$(cne,this,hne).call(this)))),e.click()}function gne(){const{div:e}=this;let{width:t,height:n}=v$($te,this);const[i,r]=this.pageDimensions,s=.75;if(this.width)t=this.width*i,n=this.height*r;else if(t>s*i||n>s*r){const e=Math.min(s*i/t,s*r/n);t*=e,n*=e}const[o,a]=this.parentDimensions;this.setDims(t*o/i,n*a/r),this._uiManager.enableWaiting(!1);const l=y$(rne,this,document.createElement("canvas"));e.append(l),e.hidden=!1,g$(cne,this,vne).call(this,t,n),g$(cne,this,Cne).call(this),v$(lne,this)||(this.parent.addUndoableEditor(this),y$(lne,this,!0)),this._reportTelemetry({action:"inserted_image"}),v$(ine,this)&&l.setAttribute("aria-label",v$(ine,this))}function fne(e,t){var n;const[i,r]=this.parentDimensions;this.width=e/i,this.height=t/r,this.setDims(e,t),null!==(n=this._initialOptions)&&void 0!==n&&n.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==v$(one,this)&&clearTimeout(v$(one,this));y$(one,this,setTimeout((()=>{y$(one,this,null),g$(cne,this,vne).call(this,e,t)}),200))}function mne(e,t){const{width:n,height:i}=v$($te,this);let r=n,s=i,o=v$($te,this);for(;r>2*e||s>2*t;){const n=r,i=s;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const a=new OffscreenCanvas(r,s);a.getContext("2d").drawImage(o,0,0,n,i,0,0,r,s),o=a.transferToImageBitmap()}return o}function vne(e,t){e=Math.ceil(e),t=Math.ceil(t);const n=v$(rne,this);if(!n||n.width===e&&n.height===t)return;n.width=e,n.height=t;const i=v$(ane,this)?v$($te,this):g$(cne,this,mne).call(this,e,t);if(this._uiManager.hasMLManager&&!this.hasAltText()){const n=new OffscreenCanvas(e,t).getContext("2d");n.drawImage(i,0,0,i.width,i.height,0,0,e,t),this._uiManager.mlGuess({service:"image-to-text",request:{data:n.getImageData(0,0,e,t).data,width:e,height:t,channels:4}}).then((e=>{const t=(null===e||void 0===e?void 0:e.output)||"";this.parent&&t&&!this.hasAltText()&&(this.altTextData={altText:t,decorative:!1})}))}const r=n.getContext("2d");r.filter=this._uiManager.hcmFilter,r.drawImage(i,0,0,i.width,i.height,0,0,e,t)}function yne(e){if(e){if(v$(ane,this)){const e=this._uiManager.imageManager.getSvgUrl(v$(Jte,this));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=v$($te,this));return e.getContext("2d").drawImage(v$($te,this),0,0),e.toDataURL()}if(v$(ane,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*a0.PDF_TO_CSS_UNITS),i=Math.round(this.height*t*a0.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(n,i);return r.getContext("2d").drawImage(v$($te,this),0,0,v$($te,this).width,v$($te,this).height,0,0,n,i),r.transferToImageBitmap()}return structuredClone(v$($te,this))}function Cne(){this._uiManager._signal&&(y$(sne,this,new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&g$(cne,this,fne).call(this,t.width,t.height)}))),v$(sne,this).observe(this.div),this._uiManager._signal.addEventListener("abort",(()=>{var e;null===(e=v$(sne,this))||void 0===e||e.disconnect(),y$(sne,this,null)}),{once:!0}))}s$=une,An(une,"_type","stamp"),An(une,"_editorType",N$.STAMP);var wne=new WeakMap,bne=new WeakMap,Sne=new WeakMap,Ene=new WeakMap,xne=new WeakMap,Ane=new WeakMap,Tne=new WeakMap,_ne=new WeakMap,Rne=new WeakMap,Dne=new WeakMap,Mne=new WeakMap,Pne=new WeakMap,Ine=new WeakMap,Nne=new WeakSet;class kne{constructor(e){let{uiManager:t,pageIndex:n,div:i,accessibilityManager:r,annotationLayer:s,drawLayer:o,textLayer:a,viewport:l,l10n:c}=e;p$(this,Nne),m$(this,wne,void 0),m$(this,bne,!1),m$(this,Sne,null),m$(this,Ene,null),m$(this,xne,null),m$(this,Ane,null),m$(this,Tne,null),m$(this,_ne,new Map),m$(this,Rne,!1),m$(this,Dne,!1),m$(this,Mne,!1),m$(this,Pne,null),m$(this,Ine,void 0);const u=[...Gne._.values()];if(!kne._initialized){kne._initialized=!0;for(const e of u)e.initialize(c,t)}t.registerEditorTypes(u),y$(Ine,this,t),this.pageIndex=n,this.div=i,y$(wne,this,r),y$(Sne,this,s),this.viewport=l,y$(Pne,this,a),this.drawLayer=o,v$(Ine,this).addLayer(this)}get isEmpty(){return 0===v$(_ne,this).size}get isInvisible(){return this.isEmpty&&v$(Ine,this).getMode()===N$.NONE}updateToolbar(e){v$(Ine,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v$(Ine,this).getMode();switch(g$(Nne,this,Vne).call(this),e){case N$.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case N$.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case N$.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of Gne._.values())t.toggle("".concat(n._type,"Editing"),e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null===(t=v$(Pne,this))||void 0===t?void 0:t.div)}addInkEditorIfNeeded(e){if(v$(Ine,this).getMode()!==N$.INK)return;if(!e)for(const t of v$(_ne,this).values())if(t.isEmpty())return void t.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){v$(Ine,this).setEditingState(e)}addCommands(e){v$(Ine,this).addCommands(e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=v$(Sne,this))||void 0===e||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of v$(_ne,this).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(v$(Ine,this).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!v$(Sne,this))return;const t=v$(Sne,this).getEditableAnnotations();for(const n of t){if(n.hide(),v$(Ine,this).isDeletedAnnotationElement(n.data.id))continue;if(e.has(n.data.id))continue;const t=this.deserialize(n);t&&(this.addOrRebuild(t),t.enableEditing())}}disable(){y$(Mne,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of v$(_ne,this).values()){var n;r.disableEditing(),r.annotationElementId&&(null===r.serialize()?(t.set(r.annotationElementId,r),null===(n=this.getEditableAnnotation(r.annotationElementId))||void 0===n||n.show(),r.remove()):e.set(r.annotationElementId,r))}if(v$(Sne,this)){const n=v$(Sne,this).getEditableAnnotations();for(const i of n){const{id:n}=i.data;if(v$(Ine,this).isDeletedAnnotationElement(n))continue;let r=t.get(n);r?(r.resetAnnotationElement(i),r.show(!1),i.show()):(r=e.get(n),r&&(v$(Ine,this).addChangedExistingAnnotation(r),r.renderAnnotationElement(i),r.show(!1)),i.show())}}g$(Nne,this,Vne).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of Gne._.values())i.remove("".concat(r._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),y$(Mne,this,!1)}getEditableAnnotation(e){var t;return(null===(t=v$(Sne,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){v$(Ine,this).getActive()!==e&&v$(Ine,this).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,null!==(e=v$(Pne,this))&&void 0!==e&&e.div&&!v$(Ane,this)&&(y$(Ane,this,g$(Nne,this,One).bind(this)),v$(Pne,this).div.addEventListener("pointerdown",v$(Ane,this),{signal:v$(Ine,this)._signal}),v$(Pne,this).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,null!==(e=v$(Pne,this))&&void 0!==e&&e.div&&v$(Ane,this)&&(v$(Pne,this).div.removeEventListener("pointerdown",v$(Ane,this)),y$(Ane,this,null),v$(Pne,this).div.classList.remove("highlighting"))}enableClick(){if(v$(xne,this))return;const e=v$(Ine,this)._signal;y$(xne,this,this.pointerdown.bind(this)),y$(Ene,this,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",v$(xne,this),{signal:e}),this.div.addEventListener("pointerup",v$(Ene,this),{signal:e})}disableClick(){v$(xne,this)&&(this.div.removeEventListener("pointerdown",v$(xne,this)),this.div.removeEventListener("pointerup",v$(Ene,this)),y$(xne,this,null),y$(Ene,this,null))}attach(e){v$(_ne,this).set(e.id,e);const{annotationElementId:t}=e;t&&v$(Ine,this).isDeletedAnnotationElement(t)&&v$(Ine,this).removeDeletedAnnotationElement(e)}detach(e){var t;v$(_ne,this).delete(e.id),null===(t=v$(wne,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!v$(Mne,this)&&e.annotationElementId&&v$(Ine,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),v$(Ine,this).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,v$(Dne,this)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(v$(Ine,this).addDeletedAnnotationElement(e.annotationElementId),x3.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),v$(Ine,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),v$(Ine,this).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!v$(Tne,this)&&(e._focusEventsAllowed=!1,y$(Tne,this,setTimeout((()=>{y$(Tne,this,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0,signal:v$(Ine,this)._signal}),n.focus())}),0))),e._structTreeParentId=null===(t=v$(wne,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return v$(Ine,this).getId()}get _signal(){return v$(Ine,this)._signal}canCreateNewEmptyEditor(){var e;return null===(e=f$(Nne,this,Lne))||void 0===e?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){v$(Ine,this).updateToolbar(e),v$(Ine,this).updateMode(e);const{offsetX:n,offsetY:i}=g$(Nne,this,Bne).call(this),r=this.getNextId(),s=g$(Nne,this,Fne).call(this,{parent:this,id:r,x:n,y:i,uiManager:v$(Ine,this),isCentered:!0,...t});s&&this.add(s)}deserialize(e){var t,n;return(null===(t=Gne._.get(null!==(n=e.annotationType)&&void 0!==n?n:e.annotationEditorType))||void 0===t?void 0:t.deserialize(e,this,v$(Ine,this)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getNextId(),r=g$(Nne,this,Fne).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:v$(Ine,this),isCentered:t,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(g$(Nne,this,Bne).call(this),!0)}setSelected(e){v$(Ine,this).setSelected(e)}toggleSelected(e){v$(Ine,this).toggleSelected(e)}isSelected(e){return v$(Ine,this).isSelected(e)}unselect(e){v$(Ine,this).unselect(e)}pointerup(e){const{isMac:t}=LJ.platform;0!==e.button||e.ctrlKey&&t||e.target===this.div&&v$(Rne,this)&&(y$(Rne,this,!1),v$(bne,this)?v$(Ine,this).getMode()!==N$.STAMP?this.createAndAddNewEditor(e,!1):v$(Ine,this).unselectAll():y$(bne,this,!0))}pointerdown(e){if(v$(Ine,this).getMode()===N$.HIGHLIGHT&&this.enableTextSelection(),v$(Rne,this))return void y$(Rne,this,!1);const{isMac:t}=LJ.platform;if(0!==e.button||e.ctrlKey&&t)return;if(e.target!==this.div)return;y$(Rne,this,!0);const n=v$(Ine,this).getActive();y$(bne,this,!n||n.isEmpty())}findNewParent(e,t,n){const i=v$(Ine,this).findParent(t,n);return null!==i&&i!==this&&(i.changeParent(e),!0)}destroy(){var e;(null===(e=v$(Ine,this).getActive())||void 0===e?void 0:e.parent)===this&&(v$(Ine,this).commitOrRemove(),v$(Ine,this).setActiveEditor(null)),v$(Tne,this)&&(clearTimeout(v$(Tne,this)),y$(Tne,this,null));for(const n of v$(_ne,this).values()){var t;null===(t=v$(wne,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,v$(_ne,this).clear(),v$(Ine,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,Y0(this.div,t);for(const n of v$(Ine,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;v$(Ine,this).commitOrRemove(),g$(Nne,this,Vne).call(this);const n=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Y0(this.div,{rotation:i}),n!==i)for(const r of v$(_ne,this).values())r.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return v$(Ine,this).viewParameters.realScale}}function One(e){if(v$(Ine,this).unselectAll(),e.target===v$(Pne,this).div){const{isMac:t}=LJ.platform;if(0!==e.button||e.ctrlKey&&t)return;v$(Ine,this).showAllEditors("highlight",!0,!0),v$(Pne,this).div.classList.add("free"),qee.startHighlighting(this,"ltr"===v$(Ine,this).direction,e),v$(Pne,this).div.addEventListener("pointerup",(()=>{v$(Pne,this).div.classList.remove("free")}),{once:!0,signal:v$(Ine,this)._signal}),e.preventDefault()}}function Lne(e){return Gne._.get(v$(Ine,e).getMode())}function Fne(e){const t=f$(Nne,this,Lne);return t?new t.prototype.constructor(e):null}function Bne(){const{x:e,y:t,width:n,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,e),s=Math.max(0,t),o=(r+Math.min(window.innerWidth,e+n))/2-e,a=(s+Math.min(window.innerHeight,t+i))/2-t,[l,c]=this.viewport.rotation%180===0?[o,a]:[a,o];return{offsetX:l,offsetY:c}}function Vne(){y$(Dne,this,!0);for(const e of v$(_ne,this).values())e.isEmpty()&&e.remove();y$(Dne,this,!1)}An(kne,"_initialized",!1);var Gne={_:new Map([a9,Ate,une,qee].map((e=>[e._editorType,e])))},Hne=new WeakMap,Wne=new WeakMap,jne=new WeakMap,Une=new WeakMap,zne=new WeakSet;class Yne{constructor(e){let{pageIndex:t}=e;p$(this,zne),m$(this,Hne,null),m$(this,Wne,0),m$(this,jne,new Map),m$(this,Une,new Map),this.pageIndex=t}setParent(e){if(v$(Hne,this)){if(v$(Hne,this)!==e){if(v$(jne,this).size>0)for(const t of v$(jne,this).values())t.remove(),e.append(t);y$(Hne,this,e)}}else y$(Hne,this,e)}static get _svgFactory(){return xJ(this,"_svgFactory",new D0)}highlight(e,t,n){var i,r;let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=(y$(Wne,this,(i=v$(Wne,this),r=i++,i)),r),a=g$(zne,this,Kne).call(this,e.box);a.classList.add("highlight"),e.free&&a.classList.add("free");const l=Yne._svgFactory.createElement("defs");a.append(l);const c=Yne._svgFactory.createElement("path");l.append(c);const u="path_p".concat(this.pageIndex,"_").concat(o);c.setAttribute("id",u),c.setAttribute("d",e.toSVGPath()),s&&v$(Une,this).set(o,c);const d=g$(zne,this,Xne).call(this,l,u),h=Yne._svgFactory.createElement("use");return a.append(h),a.setAttribute("fill",t),a.setAttribute("fill-opacity",n),h.setAttribute("href","#".concat(u)),v$(jne,this).set(o,a),{id:o,clipPathId:"url(#".concat(d,")")}}highlightOutline(e){var t,n;const i=(y$(Wne,this,(t=v$(Wne,this),n=t++,t)),n),r=g$(zne,this,Kne).call(this,e.box);r.classList.add("highlightOutline");const s=Yne._svgFactory.createElement("defs");r.append(s);const o=Yne._svgFactory.createElement("path");s.append(o);const a="path_p".concat(this.pageIndex,"_").concat(i);let l;if(o.setAttribute("id",a),o.setAttribute("d",e.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke"),e.free){r.classList.add("free");const e=Yne._svgFactory.createElement("mask");s.append(e),l="mask_p".concat(this.pageIndex,"_").concat(i),e.setAttribute("id",l),e.setAttribute("maskUnits","objectBoundingBox");const t=Yne._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");const n=Yne._svgFactory.createElement("use");e.append(n),n.setAttribute("href","#".concat(a)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const c=Yne._svgFactory.createElement("use");r.append(c),c.setAttribute("href","#".concat(a)),l&&c.setAttribute("mask","url(#".concat(l,")"));const u=c.cloneNode();return r.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),v$(jne,this).set(i,r),i}finalizeLine(e,t){const n=v$(Une,this).get(e);v$(Une,this).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){v$(jne,this).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),v$(Une,this).delete(e)}updatePath(e,t){v$(Une,this).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){qne.call(Yne,v$(jne,this).get(e),t)}show(e,t){v$(jne,this).get(e).classList.toggle("hidden",!t)}rotate(e,t){v$(jne,this).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){v$(jne,this).get(e).setAttribute("fill",t)}changeOpacity(e,t){v$(jne,this).get(e).setAttribute("fill-opacity",t)}addClass(e,t){v$(jne,this).get(e).classList.add(t)}removeClass(e,t){v$(jne,this).get(e).classList.remove(t)}remove(e){null!==v$(Hne,this)&&(v$(jne,this).get(e).remove(),v$(jne,this).delete(e))}destroy(){y$(Hne,this,null);for(const e of v$(jne,this).values())e.remove();v$(jne,this).clear()}}function qne(e){let{x:t=0,y:n=0,width:i=1,height:r=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{style:s}=e;s.top="".concat(100*n,"%"),s.left="".concat(100*t,"%"),s.width="".concat(100*i,"%"),s.height="".concat(100*r,"%")}function Kne(e){const t=o$._svgFactory.create(1,1,!0);return v$(Hne,this).append(t),t.setAttribute("aria-hidden",!0),qne.call(o$,t,e),t}function Xne(e,t){const n=o$._svgFactory.createElement("clipPath");e.append(n);const i="clip_".concat(t);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=o$._svgFactory.createElement("use");return n.append(r),r.setAttribute("href","#".concat(t)),r.classList.add("clip"),i}o$=Yne;var Qne=w$.AnnotationLayer,Zne=w$.AnnotationMode,$ne=w$.GlobalWorkerOptions,Jne=w$.PDFDataRangeTransport,eie=w$.TextLayer,tie=w$.getDocument,nie=w$.version;const iie=(0,s.createContext)(null);function rie(e){let{children:t,type:n}=e;return(0,If.jsx)("div",{className:"react-pdf__message react-pdf__message--".concat(n),children:t})}class sie{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return KZ(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){KZ(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise((t=>{KZ(this.pdfDocument,"PDF document not loaded."),KZ(e,"Destination is not specified."),"string"===typeof e?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)})).then((e=>{KZ(Array.isArray(e),'"'.concat(e,'" is not a valid destination array.'));const t=e[0];new Promise((e=>{KZ(this.pdfDocument,"PDF document not loaded."),t instanceof Object?this.pdfDocument.getPageIndex(t).then((t=>{e(t)})).catch((()=>{KZ(!1,'"'.concat(t,'" is not a valid page reference.'))})):"number"===typeof t?e(t):KZ(!1,'"'.concat(t,'" is not a valid destination reference.'))})).then((t=>{const n=t+1;KZ(this.pdfViewer,"PDF viewer is not initialized."),KZ(n>=1&&n<=this.pagesCount,'"'.concat(n,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:t,pageNumber:n})}))}))}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;KZ(this.pdfViewer,"PDF viewer is not initialized."),KZ(e>=1&&e<=this.pagesCount,'"'.concat(e,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||"noopener noreferrer nofollow",e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const oie={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},aie="undefined"!==typeof document,lie=aie&&"file:"===window.location.protocol;function cie(e){return function(e){return"undefined"!==typeof e}(e)&&null!==e}function uie(e){return function(e){return"string"===typeof e}(e)&&/^data:/.test(e)}function die(e){KZ(uie(e),"Invalid data URI.");const[t="",n=""]=e.split(",");return-1!==t.split(";").indexOf("base64")?atob(n):unescape(n)}function hie(){return aie&&window.devicePixelRatio||1}const pie="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function gie(){a$(!lie,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(pie))}function fie(e){(null===e||void 0===e?void 0:e.cancel)&&e.cancel()}function mie(e,t){return Object.defineProperty(e,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(e,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(e,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get(){return this.view[3]},configurable:!0}),e}function vie(e,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return e}}function yie(){return(0,s.useReducer)(vie,{value:void 0,error:void 0})}var Cie=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(rre){s(rre)}}function a(e){try{l(i.throw(e))}catch(rre){s(rre)}}function l(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}l((i=i.apply(e,t||[])).next())}))},wie=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const{PDFDataRangeTransport:bie}=i,Sie=(e,t)=>{switch(t){case oie.NEED_PASSWORD:e(prompt("Enter the password to open this PDF file."));break;case oie.INCORRECT_PASSWORD:e(prompt("Invalid password. Please try again."));break}};function Eie(e){return"object"===typeof e&&null!==e&&("data"in e||"range"in e||"url"in e)}const xie=(0,s.forwardRef)((function(e,t){var{children:n,className:i,error:r="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:a,file:l,inputRef:c,imageResourcesPath:u,loading:d="Loading PDF\u2026",noData:h="No PDF file specified.",onItemClick:p,onLoadError:g,onLoadProgress:f,onLoadSuccess:m,onPassword:v=Sie,onSourceError:y,onSourceSuccess:C,options:w,renderMode:b,rotate:S}=e,E=wie(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[x,A]=yie(),{value:T,error:_}=x,[R,D]=yie(),{value:M,error:P}=R,I=(0,s.useRef)(new sie),N=(0,s.useRef)([]),k=(0,s.useRef)(void 0),O=(0,s.useRef)(void 0);l&&l!==k.current&&Eie(l)&&(a$(!u$(l,k.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),k.current=l),w&&w!==O.current&&(a$(!u$(w,O.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),O.current=w);const L=(0,s.useRef)({scrollPageIntoView:e=>{const{dest:t,pageNumber:n,pageIndex:i=n-1}=e;if(p)return void p({dest:t,pageIndex:i,pageNumber:n});const r=N.current[i];r?r.scrollIntoView():a$(!1,"An internal link leading to page ".concat(n," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}});(0,s.useImperativeHandle)(t,(()=>({linkService:I,pages:N,viewer:L})),[]),(0,s.useEffect)((function(){A({type:"RESET"})}),[l,A]);const F=(0,s.useCallback)((()=>Cie(this,void 0,void 0,(function*(){if(!l)return null;if("string"===typeof l){if(uie(l)){return{data:die(l)}}return gie(),{url:l}}if(l instanceof bie)return{range:l};if(l instanceof ArrayBuffer)return{data:l};if(aie&&function(e){return KZ(aie,"isBlob can only be used in a browser environment"),e instanceof Blob}(l)){const e=yield function(e){return new Promise(((t,n)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return n(new Error("Error while reading a file."));t(i.result)},i.onerror=e=>{if(!e.target)return n(new Error("Error while reading a file."));const{error:t}=e.target;if(!t)return n(new Error("Error while reading a file."));switch(t.code){case t.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case t.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case t.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},i.readAsArrayBuffer(e)}))}(l);return{data:e}}if(KZ("object"===typeof l,"Invalid parameter in file, need either Uint8Array, string or a parameter object"),KZ(Eie(l),"Invalid parameter object: need either .data, .range or .url"),"url"in l&&"string"===typeof l.url){if(uie(l.url)){const{url:e}=l,t=wie(l,["url"]),n=die(e);return Object.assign({data:n},t)}gie()}return l}))),[l]);(0,s.useEffect)((()=>{const e=jZ(F());return e.promise.then((e=>{A({type:"RESOLVE",value:e})})).catch((e=>{A({type:"REJECT",error:e})})),()=>{fie(e)}}),[F,A]),(0,s.useEffect)((()=>{"undefined"!==typeof T&&(!1!==T?C&&C():_&&(a$(!1,_.toString()),y&&y(_)))}),[T]),(0,s.useEffect)((function(){D({type:"RESET"})}),[D,T]),(0,s.useEffect)((function(){if(!T)return;const e=Object.assign(Object.assign({},T),w),t=tie(e);f&&(t.onProgress=f),v&&(t.onPassword=v);const n=t;return n.promise.then((e=>{D({type:"RESOLVE",value:e})})).catch((e=>{n.destroyed||D({type:"REJECT",error:e})})),()=>{n.destroy()}}),[w,D,T]),(0,s.useEffect)((()=>{"undefined"!==typeof M&&(!1!==M?M&&(m&&m(M),N.current=new Array(M.numPages),I.current.setDocument(M)):P&&(a$(!1,P.toString()),g&&g(P)))}),[M]),(0,s.useEffect)((function(){I.current.setViewer(L.current),I.current.setExternalLinkRel(o),I.current.setExternalLinkTarget(a)}),[o,a]);const B=(0,s.useCallback)(((e,t)=>{N.current[e]=t}),[]),V=(0,s.useCallback)((e=>{delete N.current[e]}),[]),G=(0,s.useMemo)((()=>({imageResourcesPath:u,linkService:I.current,onItemClick:p,pdf:M,registerPage:B,renderMode:b,rotate:S,unregisterPage:V})),[u,p,M,B,b,S,V]),H=(0,s.useMemo)((()=>WZ(E,(()=>M))),[E,M]);return(0,If.jsx)("div",Object.assign({className:zZ("react-pdf__Document",i),ref:c,style:{"--scale-factor":"1"}},H,{children:l?void 0===M||null===M?(0,If.jsx)(rie,{type:"loading",children:"function"===typeof d?d():d}):!1===M?(0,If.jsx)(rie,{type:"error",children:"function"===typeof r?r():r}):(0,If.jsx)(iie.Provider,{value:G,children:n}):(0,If.jsx)(rie,{type:"no-data",children:"function"===typeof h?h():h})}))})),Aie=xie;function Tie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter(Boolean);return n.length<=1?n[0]||null:function(e){n.forEach((function(t){"function"===typeof t?t(e):t&&(t.current=e)}))}}const _ie=(0,s.createContext)(null),Rie={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Die=/^H(\d+)$/;function Mie(e){return"children"in e}function Pie(e){return!!Mie(e)&&(1===e.children.length&&0 in e.children&&"id"in e.children[0])}function Iie(e){const t={};if(Mie(e)){const{role:n}=e,i=n.match(Die);if(i)t.role="heading",t["aria-level"]=Number(i[1]);else if(function(e){return e in Rie}(n)){const e=Rie[n];e&&(t.role=e)}}return t}function Nie(e){const t={};if(Mie(e)){if(void 0!==e.alt&&(t["aria-label"]=e.alt),void 0!==e.lang&&(t.lang=e.lang),Pie(e)){const[n]=e.children;if(n){const e=Nie(n);return Object.assign(Object.assign({},t),e)}}}else"id"in e&&(t["aria-owns"]=e.id);return t}function kie(e){return e?Object.assign(Object.assign({},Iie(e)),Nie(e)):null}function Oie(e){let{className:t,node:n}=e;const i=(0,s.useMemo)((()=>kie(n)),[n]),r=(0,s.useMemo)((()=>Mie(n)?Pie(n)?null:n.children.map(((e,t)=>(0,If.jsx)(Oie,{node:e},t))):null),[n]);return(0,If.jsx)("span",Object.assign({className:t},i,{children:r}))}function Lie(){return(0,s.useContext)(_ie)}function Fie(){const e=Lie();KZ(e,"Unable to find Page context.");const{onGetStructTreeError:t,onGetStructTreeSuccess:n}=e,[i,r]=yie(),{value:o,error:a}=i,{customTextRenderer:l,page:c}=e;return(0,s.useEffect)((function(){r({type:"RESET"})}),[r,c]),(0,s.useEffect)((function(){if(l)return;if(!c)return;const e=jZ(c.getStructTree()),t=e;return e.promise.then((e=>{r({type:"RESOLVE",value:e})})).catch((e=>{r({type:"REJECT",error:e})})),()=>fie(t)}),[l,c,r]),(0,s.useEffect)((()=>{void 0!==o&&(!1!==o?o&&n&&n(o):a&&(a$(!1,a.toString()),t&&t(a)))}),[o]),o?(0,If.jsx)(Oie,{className:"react-pdf__Page__structTree structTree",node:o}):null}const Bie=Zne;function Vie(e){const t=Lie();KZ(t,"Unable to find Page context.");const n=Object.assign(Object.assign({},t),e),{_className:i,canvasBackground:r,devicePixelRatio:o=hie(),onRenderError:a,onRenderSuccess:l,page:c,renderForms:u,renderTextLayer:d,rotate:h,scale:p}=n,{canvasRef:g}=e;KZ(c,"Attempted to render page canvas, but no page was specified.");const f=(0,s.useRef)(null);function m(e){(function(e){return"RenderingCancelledException"===e.name})(e)||(a$(!1,e.toString()),a&&a(e))}const v=(0,s.useMemo)((()=>c.getViewport({scale:p*o,rotation:h})),[o,c,h,p]),y=(0,s.useMemo)((()=>c.getViewport({scale:p,rotation:h})),[c,h,p]);(0,s.useEffect)((function(){if(!c)return;c.cleanup();const{current:e}=f;if(!e)return;e.width=v.width,e.height=v.height,e.style.width="".concat(Math.floor(y.width),"px"),e.style.height="".concat(Math.floor(y.height),"px"),e.style.visibility="hidden";const t={annotationMode:u?Bie.ENABLE_FORMS:Bie.ENABLE,canvasContext:e.getContext("2d",{alpha:!1}),viewport:v};r&&(t.background=r);const n=c.render(t),i=n;return n.promise.then((()=>{e.style.visibility="",c&&l&&l(mie(c,p))})).catch(m),()=>fie(i)}),[r,c,u,v,y]);const C=(0,s.useCallback)((()=>{const{current:e}=f;e&&(e.width=0,e.height=0)}),[]);return(0,s.useEffect)((()=>C),[C]),(0,If.jsx)("canvas",{className:"".concat(i,"__canvas"),dir:"ltr",ref:Tie(g,f),style:{display:"block",userSelect:"none"},children:d?(0,If.jsx)(Fie,{}):null})}function Gie(){const e=Lie();KZ(e,"Unable to find Page context.");const{customTextRenderer:t,onGetTextError:n,onGetTextSuccess:i,onRenderTextLayerError:r,onRenderTextLayerSuccess:o,page:a,pageIndex:l,pageNumber:c,rotate:u,scale:d}=e;KZ(a,"Attempted to load page text content, but no page was specified.");const[h,p]=yie(),{value:g,error:f}=h,m=(0,s.useRef)(null),v=(0,s.useRef)(void 0);a$(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,s.useEffect)((function(){p({type:"RESET"})}),[a,p]),(0,s.useEffect)((function(){if(!a)return;const e=jZ(a.getTextContent()),t=e;return e.promise.then((e=>{p({type:"RESOLVE",value:e})})).catch((e=>{p({type:"REJECT",error:e})})),()=>fie(t)}),[a,p]),(0,s.useEffect)((()=>{void 0!==g&&(!1!==g?g&&i&&i(g):f&&(a$(!1,f.toString()),n&&n(f)))}),[g]);const y=(0,s.useCallback)((()=>{o&&o()}),[o]),C=(0,s.useCallback)((e=>{a$(!1,e.toString()),r&&r(e)}),[r]);const w=(0,s.useMemo)((()=>a.getViewport({scale:d,rotation:u})),[a,u,d]);return(0,s.useLayoutEffect)((function(){if(!a||!g)return;const{current:e}=m;if(!e)return;e.innerHTML="";const n=a.streamTextContent({includeMarkedContent:!0}),i=new eie({container:e,textContentSource:n,viewport:w}),r=i;return i.render().then((()=>{const n=document.createElement("div");n.className="endOfContent",e.append(n),v.current=n;const i=e.querySelectorAll('[role="presentation"]');if(t){let e=0;g.items.forEach(((n,r)=>{if(!function(e){return"str"in e}(n))return;const s=i[e];if(!s)return;const o=t(Object.assign({pageIndex:l,pageNumber:c,itemIndex:r},n));s.innerHTML=o,e+=n.str&&n.hasEOL?2:1}))}y()})).catch(C),()=>fie(r)}),[t,C,y,a,l,c,g,w]),(0,If.jsx)("div",{className:zZ("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){const e=v.current;e&&e.classList.remove("active")},onMouseDown:function(){const e=v.current;e&&e.classList.add("active")},ref:m})}function Hie(){return(0,s.useContext)(iie)}function Wie(){const e=Hie(),t=Lie();KZ(t,"Unable to find Page context.");const n=Object.assign(Object.assign({},e),t),{imageResourcesPath:i,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:u,pdf:d,renderForms:h,rotate:p,scale:g=1}=n;KZ(d,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),KZ(u,"Attempted to load page annotations, but no page was specified."),KZ(r,"Attempted to load page annotations, but no linkService was specified.");const[f,m]=yie(),{value:v,error:y}=f,C=(0,s.useRef)(null);a$(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,s.useEffect)((function(){m({type:"RESET"})}),[m,u]),(0,s.useEffect)((function(){if(!u)return;const e=jZ(u.getAnnotations()),t=e;return e.promise.then((e=>{m({type:"RESOLVE",value:e})})).catch((e=>{m({type:"REJECT",error:e})})),()=>{fie(t)}}),[m,u]),(0,s.useEffect)((()=>{void 0!==v&&(!1!==v?v&&a&&a(v):y&&(a$(!1,y.toString()),o&&o(y)))}),[v]);const w=(0,s.useMemo)((()=>u.getViewport({scale:g,rotation:p})),[u,p,g]);return(0,s.useEffect)((function(){if(!d||!u||!r||!v)return;const{current:e}=C;if(!e)return;const t=w.clone({dontFlip:!0}),n={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:e,l10n:null,page:u,viewport:t},s={annotations:v,annotationStorage:d.annotationStorage,div:e,imageResourcesPath:i,linkService:r,page:u,renderForms:h,viewport:t};e.innerHTML="";try{new Qne(n).render(s),c&&c()}catch(o){!function(e){a$(!1,"".concat(e)),l&&l(e)}(o)}return()=>{}}),[v,i,r,u,d,h,w]),(0,If.jsx)("div",{className:zZ("react-pdf__Page__annotations","annotationLayer"),ref:C})}var jie=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Uie=1;function zie(e){const t=Hie(),n=Object.assign(Object.assign({},t),e),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:o,canvasRef:a,children:l,className:c,customRenderer:u,customTextRenderer:d,devicePixelRatio:h,error:p="Failed to load the page.",height:g,inputRef:f,loading:m="Loading page\u2026",noData:v="No page specified.",onGetAnnotationsError:y,onGetAnnotationsSuccess:C,onGetStructTreeError:w,onGetStructTreeSuccess:b,onGetTextError:S,onGetTextSuccess:E,onLoadError:x,onLoadSuccess:A,onRenderAnnotationLayerError:T,onRenderAnnotationLayerSuccess:_,onRenderError:R,onRenderSuccess:D,onRenderTextLayerError:M,onRenderTextLayerSuccess:P,pageIndex:I,pageNumber:N,pdf:k,registerPage:O,renderAnnotationLayer:L=!0,renderForms:F=!1,renderMode:B="canvas",renderTextLayer:V=!0,rotate:G,scale:H=Uie,unregisterPage:W,width:j}=n,U=jie(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[z,Y]=yie(),{value:q,error:K}=z,X=(0,s.useRef)(null);KZ(k,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const Q=cie(N)?N-1:null!==I&&void 0!==I?I:null,Z=null!==N&&void 0!==N?N:cie(I)?I+1:null,$=null!==G&&void 0!==G?G:q?q.rotate:null,J=(0,s.useMemo)((()=>{if(!q)return null;let e=1;const t=null!==H&&void 0!==H?H:Uie;if(j||g){const t=q.getViewport({scale:1,rotation:$});j?e=j/t.width:g&&(e=g/t.height)}return t*e}),[g,q,$,H,j]);(0,s.useEffect)((function(){return()=>{cie(Q)&&r&&W&&W(Q)}}),[r,k,Q,W]),(0,s.useEffect)((function(){Y({type:"RESET"})}),[Y,k,Q]),(0,s.useEffect)((function(){if(!k||!Z)return;const e=jZ(k.getPage(Z)),t=e;return e.promise.then((e=>{Y({type:"RESOLVE",value:e})})).catch((e=>{Y({type:"REJECT",error:e})})),()=>fie(t)}),[Y,k,Z]),(0,s.useEffect)((()=>{void 0!==q&&(!1!==q?function(){if(A){if(!q||!J)return;A(mie(q,J))}if(r&&O){if(!cie(Q)||!X.current)return;O(Q,X.current)}}():K&&(a$(!1,K.toString()),x&&x(K)))}),[q,J]);const ee=(0,s.useMemo)((()=>q&&cie(Q)&&Z&&cie($)&&cie(J)?{_className:i,canvasBackground:o,customTextRenderer:d,devicePixelRatio:h,onGetAnnotationsError:y,onGetAnnotationsSuccess:C,onGetStructTreeError:w,onGetStructTreeSuccess:b,onGetTextError:S,onGetTextSuccess:E,onRenderAnnotationLayerError:T,onRenderAnnotationLayerSuccess:_,onRenderError:R,onRenderSuccess:D,onRenderTextLayerError:M,onRenderTextLayerSuccess:P,page:q,pageIndex:Q,pageNumber:Z,renderForms:F,renderTextLayer:V,rotate:$,scale:J}:null),[i,o,d,h,y,C,w,b,S,E,T,_,R,D,M,P,q,Q,Z,F,V,$,J]),te=(0,s.useMemo)((()=>WZ(U,(()=>q?J?mie(q,J):void 0:q))),[U,q,J]),ne="".concat(Q,"@").concat(J,"/").concat($);function ie(){switch(B){case"custom":return KZ(u,'renderMode was set to "custom", but no customRenderer was passed.'),(0,If.jsx)(u,{},"".concat(ne,"_custom"));case"none":return null;default:return(0,If.jsx)(Vie,{canvasRef:a},"".concat(ne,"_canvas"))}}return(0,If.jsx)("div",Object.assign({className:zZ(i,c),"data-page-number":Z,ref:Tie(f,X),style:{"--scale-factor":"".concat(J),backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},te,{children:Z?null===k||void 0===q||null===q?(0,If.jsx)(rie,{type:"loading",children:"function"===typeof m?m():m}):!1===k||!1===q?(0,If.jsx)(rie,{type:"error",children:"function"===typeof p?p():p}):(0,If.jsxs)(_ie.Provider,{value:ee,children:[ie(),V?(0,If.jsx)(Gie,{},"".concat(ne,"_text")):null,L?(0,If.jsx)(Wie,{},"".concat(ne,"_annotations")):null,l]}):(0,If.jsx)(rie,{type:"no-data",children:"function"===typeof v?v():v})}))}const Yie=e=>{let{fileUrl:t}=e;const[n,i]=(0,s.useState)(null);return(0,If.jsx)("div",{className:"h-full w-full overflow-auto",children:(0,If.jsx)(Aie,{file:t,onLoadSuccess:e=>{let{numPages:t}=e;i(t)},children:Array.from(new Array(n||0),((e,t)=>(0,If.jsx)(zie,{pageNumber:t+1,className:"w-full",renderTextLayer:!1,renderAnnotationLayer:!1,height:1200},"page_".concat(t+1))))})})},qie=()=>{const{id:e}=re(),[t,n]=(0,s.useState)(void 0),[i,r]=(0,s.useState)(null),{parcels:o,loading:a,error:l}=GE((e=>e.parcels)),c=$E();if((0,s.useEffect)((()=>{(async()=>{try{const t=await ua.get("/parcels/".concat(e,"/waybill-pdf"),{responseType:"blob"}),n=URL.createObjectURL(t.data);r(n)}catch(sre){console.error(sre.message)}})(),(async()=>{const t=o.find((t=>t._id===e));if(t)n(t);else{const t=await c(al(e));al.fulfilled.match(t)&&n(t.payload.data)}})()}),[e,o,c]),a)return(0,If.jsx)(JE,{});if(l)return(0,If.jsx)(eA,{error:l});if(!t){const e={message:"Parcel not found",name:"NotFoundError",status:404,code:"PARCEL_NOT_FOUND"};return(0,If.jsx)(eA,{error:e})}return(0,If.jsx)(Zx,{title:"Parcel View",children:(0,If.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 p-4 min-h-screen",children:[(0,If.jsxs)("div",{className:"md:w-2/3 bg-white shadow-md border border-gray-500 rounded-lg p-4 flex flex-col h-full",children:[(0,If.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Parcel Waybill"}),(0,If.jsx)("div",{className:"flex-grow",children:i?(0,If.jsx)(Yie,{fileUrl:i}):(0,If.jsx)("div",{className:"text-lg text-gray-500",children:"Loading PDF..."})})]}),(0,If.jsx)("div",{className:"md:w-1/3 bg-white overflow-y-auto",children:(0,If.jsx)(kZ,{parcel:t})})]})})};const Kie=function(){return(0,If.jsxs)(Re,{children:[(0,If.jsx)(gt,{}),(0,If.jsx)(AW,{children:(0,If.jsxs)(Se,{children:[(0,If.jsxs)(we,{path:"/",element:(0,If.jsx)(_T,{}),children:[(0,If.jsx)(we,{index:!0,element:(0,If.jsx)(IZ,{})}),(0,If.jsx)(we,{path:"tracking",element:(0,If.jsx)(OZ,{})}),(0,If.jsx)(we,{path:"tracking/:parcelId",element:(0,If.jsx)(OZ,{})}),(0,If.jsx)(we,{index:!0,element:(0,If.jsx)(ye,{to:"/login"})}),(0,If.jsx)(we,{path:"login",element:(0,If.jsx)(Jx,{children:(0,If.jsx)(_E,{})})})]}),(0,If.jsxs)(we,{path:"dashboard",element:(0,If.jsx)(tA,{children:(0,If.jsx)(AT,{})}),children:[(0,If.jsx)(we,{index:!0,element:(0,If.jsx)(cQ,{})}),(0,If.jsx)(we,{path:"report",element:(0,If.jsx)(nA,{requiredPermissions:[],children:(0,If.jsx)(VZ,{})})}),(0,If.jsx)(we,{path:"maintenance",element:(0,If.jsx)(RT,{})}),(0,If.jsx)(we,{path:"city/create",element:(0,If.jsx)(nA,{requiredPermissions:[LA.CreateCity],children:(0,If.jsx)(EG,{})})}),(0,If.jsx)(we,{path:"city/update/:id",element:(0,If.jsx)(nA,{requiredPermissions:[LA.UpdateCity],children:(0,If.jsx)(xG,{})})}),(0,If.jsx)(we,{path:"city",element:(0,If.jsx)(nA,{requiredPermissions:[LA.ReadCity],children:(0,If.jsx)(AG,{})})}),(0,If.jsx)(we,{path:"country",element:(0,If.jsx)(nA,{requiredPermissions:[LA.ReadCountry],children:(0,If.jsx)(CG,{})})}),(0,If.jsx)(we,{path:"country/create",element:(0,If.jsx)(nA,{requiredPermissions:[LA.CreateCountry],children:(0,If.jsx)(MT,{})})}),(0,If.jsx)(we,{path:"country/update/:id",element:(0,If.jsx)(nA,{requiredPermissions:[LA.UpdateCountry],children:(0,If.jsx)(wG,{})})}),(0,If.jsx)(we,{path:"parcel/create",element:(0,If.jsx)(nA,{requiredPermissions:[LA.CreateParcel],children:(0,If.jsx)(JG,{})})}),(0,If.jsx)(we,{path:"parcel/csvcreate",element:(0,If.jsx)(nA,{requiredPermissions:[LA.CreateParcel],children:(0,If.jsx)(AZ,{})})}),(0,If.jsx)(we,{path:"parcel/update/:id",element:(0,If.jsx)(nA,{requiredPermissions:[LA.UpdateParcel],children:(0,If.jsx)(eH,{})})}),(0,If.jsx)(we,{path:"parcel/:id",element:(0,If.jsx)(nA,{requiredPermissions:[LA.UpdateParcel],children:(0,If.jsx)(qie,{})})}),(0,If.jsx)(we,{path:"parcel",element:(0,If.jsx)(nA,{requiredPermissions:[LA.ReadParcel],children:(0,If.jsx)(tH,{})})}),(0,If.jsx)(we,{path:"role/create",element:(0,If.jsx)(nA,{requiredPermissions:[LA.CreateRole],children:(0,If.jsx)(MG,{})})}),(0,If.jsx)(we,{path:"role/update/:id",element:(0,If.jsx)(nA,{requiredPermissions:[LA.UpdateRole],children:(0,If.jsx)(DG,{})})}),(0,If.jsx)(we,{path:"role",element:(0,If.jsx)(nA,{requiredPermissions:[LA.ReadRole],children:(0,If.jsx)(TG,{})})}),(0,If.jsx)(we,{path:"user/create",element:(0,If.jsx)(nA,{requiredPermissions:[LA.CreateUser],children:(0,If.jsx)(FG,{})})}),(0,If.jsx)(we,{path:"user/update/:id",element:(0,If.jsx)(nA,{requiredPermissions:[LA.UpdateUser],children:(0,If.jsx)(BG,{})})}),(0,If.jsx)(we,{path:"user",element:(0,If.jsx)(nA,{requiredPermissions:[LA.ReadUser],children:(0,If.jsx)(PG,{})})}),(0,If.jsx)(we,{path:"warehouse/create",element:(0,If.jsx)(nA,{requiredPermissions:[LA.CreateWarehouse],children:(0,If.jsx)(GG,{})})}),(0,If.jsx)(we,{path:"warehouse/update/:id",element:(0,If.jsx)(nA,{requiredPermissions:[LA.UpdateWarehouse],children:(0,If.jsx)(HG,{})})}),(0,If.jsx)(we,{path:"warehouse",element:(0,If.jsx)(nA,{requiredPermissions:[LA.ReadWarehouse],children:(0,If.jsx)(WG,{})})}),(0,If.jsx)(we,{path:"profile",element:(0,If.jsx)($x,{})}),(0,If.jsx)(we,{path:"profile/edit",element:(0,If.jsx)(_W,{})}),(0,If.jsx)(we,{path:"parcel-reception",element:(0,If.jsx)(bW,{})}),(0,If.jsx)(we,{path:"driver-reception",element:(0,If.jsx)(xW,{})})]})]})})]})},Xie=e=>{e&&e instanceof Function&&n.e(540).then(n.bind(n,5540)).then((t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:s,getTTFB:o}=t;n(e),i(e),r(e),s(e),o(e)}))};function Qie(e){return Qie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qie(e)}function Zie(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $ie(e){return $ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$ie(e)}function Jie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ere(e,t){return ere=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ere(e,t)}function tre(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nre=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=function(e,t){return!t||"object"!==Qie(t)&&"function"!==typeof t?Jie(e):t}(this,(e=$ie(t)).call.apply(e,[this].concat(r))),tre(Jie(n),"state",{bootstrapped:!1}),tre(Jie(n),"_unsubscribe",void 0),tre(Jie(n),"handlePersistorState",(function(){n.props.persistor.getState().bootstrapped&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally((function(){return n.setState({bootstrapped:!0})})):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())})),n}var n,i,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ere(e,t)}(t,e),n=t,(i=[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"===typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}])&&Zie(n.prototype,i),r&&Zie(n,r),t}(s.PureComponent);tre(nre,"defaultProps",{children:null,loading:null}),$ne.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(nie,"/pdf.worker.min.mjs");const ire=()=>(0,If.jsx)(qE,{store:wc,children:(0,If.jsx)(nre,{loading:null,persistor:bc,children:(0,If.jsx)(jx,{children:(0,If.jsx)(Kie,{})})})});a.createRoot(document.getElementById("root")).render((0,If.jsx)(ire,{})),Xie()})()})();